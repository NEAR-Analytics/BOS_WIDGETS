{"tx_hash": "BnB96UL1QTcqBCsFvJd3pTRLtLePpKU9TuY7fhRNyGTC", "action_id_social": "CJrvTtMZCjCj7NRk9qMbU5LL1dQKZbMU5f6pJS82VRbJ-0-widget", "block_id": 114414930, "block_timestamp": "2024-03-09T21:00:18.942Z", "signer_id": "devgovgigs.petersalomonsen.near", "widget_name": "devhub.entity.proposal.Comments", "source_code": "const socialComments = Social.index(\"comment\", props.item);\nconst snapshotHistory = props.snapshotHistory;\n\nconst Wrapper = styled.div`\n  position: relative;\n  .log-line {\n    position: absolute;\n    left: 7%;\n    top: -30px;\n    bottom: 0;\n    z-index: 1;\n    width: 1px;\n    height: 100%;\n    background-color: var(--bs-border-color);\n    z-index: 1;\n  }\n`;\n\nconst CommentContainer = styled.div`\n  border: 1px solid lightgrey;\n`;\n\nconst Header = styled.div`\n  position: relative;\n  background-color: #f4f4f4;\n  height: 50px;\n\n  .menu {\n    position: absolute;\n    right: 10px;\n    top: 4px;\n    font-size: 30px;\n  }\n`;\n\nconst Comment = ({ commentItem }) => {\n  const { accountId, blockHeight } = commentItem;\n  const item = {\n    type: \"social\",\n    path: `${accountId}/post/comment`,\n    blockHeight,\n  };\n  const content = JSON.parse(Social.get(item.path, blockHeight) ?? \"null\");\n\n  const link = `https://near.org/mob.near/widget/MainPage.N.Comment.Page?accountId=${accountId}&blockHeight=${blockHeight}`;\n  return (\n    <div style={{ zIndex: 99, background: \"white\" }}>\n      <div className=\"d-flex gap-2 flex-1\">\n        <Widget\n          src={\"${REPL_DEVHUB}/widget/devhub.entity.proposal.Profile\"}\n          props={{\n            accountId: accountId,\n          }}\n        />\n        <CommentContainer className=\"rounded-2 flex-1\">\n          <Header className=\"d-flex gap-3 align-items-center p-2 px-3\">\n            <div>\n              {accountId} commented\n              <Widget\n                src=\"${REPL_NEAR}/widget/TimeAgo\"\n                props={{\n                  blockHeight: blockHeight,\n                }}\n              />\n            </div>\n            {context.accountId && (\n              <div className=\"menu\">\n                <Widget\n                  src=\"${REPL_NEAR}/widget/Posts.Menu\"\n                  props={{\n                    accountId: accountId,\n                    blockHeight: blockHeight,\n                    contentPath: `/post/comment`,\n                    contentType: \"comment\",\n                  }}\n                />\n              </div>\n            )}\n          </Header>\n          <div className=\"p-2 px-3\">\n            <Widget\n              src={\n                \"${REPL_DEVHUB}/widget/devhub.components.molecule.MarkdownViewer\"\n              }\n              props={{\n                text: content.text,\n              }}\n            />\n\n            <div className=\"d-flex gap-2 align-items-center mt-4\">\n              <Widget\n                src=\"${REPL_NEAR}/widget/v1.LikeButton\"\n                props={{\n                  item: item,\n                }}\n              />\n              <Widget\n                src=\"${REPL_NEAR}/widget/CopyUrlButton\"\n                props={{\n                  url: link,\n                }}\n              />\n              <Widget\n                src=\"${REPL_NEAR}/widget/ShareButton\"\n                props={{\n                  postType: \"post\",\n                  url: link,\n                }}\n              />\n            </div>\n          </div>\n        </CommentContainer>\n      </div>\n    </div>\n  );\n};\n\nif (socialComments.length) {\n  return (\n    <Wrapper>\n      <div className=\"log-line\"> </div>\n      <div className=\"d-flex flex-column gap-4\">\n        {socialComments.map((i) => (\n          <Comment commentItem={i} />\n        ))}\n      </div>\n    </Wrapper>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devgovgigs.petersalomonsen.near/widget/devhub.entity.proposal.Comments", "fact_widget_deployments_id": "27acd963c5ea51d36e9de7806d2fdb16", "inserted_timestamp": "2024-03-09T22:25:48.007Z", "modified_timestamp": "2024-03-09T22:25:48.007Z", "__row_index": 0}