{"tx_hash": "4acmefqqpmLbc8iL7DfmsDY5hJj1UG2P1ZHAFEAf8igk", "action_id_social": "6RGdmLiSgg5bWczYyTwUmSvdBnYeqFhbP6xUn5KfGZKW-0-widget", "block_id": 115147160, "block_timestamp": "2024-03-21T05:52:49.198Z", "signer_id": "devgovgigs.petersalomonsen.near", "widget_name": "devhub.entity.proposal.VerificationStatus", "source_code": "const receiverAccount = props.receiverAccount;\nconst showGetVerifiedBtn = props.showGetVerifiedBtn;\nconst [verificationStatus, setVerificationStatus] = useState(null);\n\nconst WarningImg =\n  \"https://ipfs.near.social/ipfs/bafkreieq4222tf3hkbccfnbw5kpgedm3bf2zcfgzbnmismxav2phqdwd7q\";\n\nconst SuccessImg =\n  \"https://ipfs.near.social/ipfs/bafkreidqveupkcc7e3rko2e67lztsqrfnjzw3ceoajyglqeomvv7xznusm\";\n\nuseEffect(() => {\n  if (\n    receiverAccount.length === 64 ||\n    (receiverAccount ?? \"\").includes(\".near\")\n  ) {\n    useCache(\n      () =>\n        asyncFetch(\n          `https://neardevhub-kyc-proxy.shuttleapp.rs/kyc/${receiverAccount}`\n        ).then((res) => {\n          let displayableText = \"\";\n          switch (res.body.kyc_status) {\n            case \"Approved\":\n              displayableText = \"Verified\";\n              break;\n            case \"Pending\":\n              displayableText = \"Pending\";\n              break;\n            default:\n              displayableText = \"Not Verfied\";\n              break;\n          }\n          setVerificationStatus(displayableText);\n        }),\n      \"ky-check-proposal\" + receiverAccount,\n      { subscribe: false }\n    );\n  }\n}, [receiverAccount]);\n\nconst DropdowntBtnContainer = styled.div`\n  font-size: 13px;\n  min-width: 150px;\n\n  .custom-select {\n    position: relative;\n  }\n\n  .select-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: 1px solid #ccc;\n    border-radius-top: 5px;\n    cursor: pointer;\n    background-color: #fff;\n    border-radius: 5px;\n  }\n\n  .no-border {\n    border: none !important;\n  }\n\n  .options-card {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    width: 200%;\n    border: 1px solid #ccc;\n    background-color: #fff;\n    padding: 0.5rem;\n    z-index: 9999;\n    font-size: 13px;\n  }\n\n  .left {\n    right: 0 !important;\n    left: auto !important;\n  }\n\n  @media screen and (max-width: 768px) {\n    .options-card {\n      right: 0 !important;\n      left: auto !important;\n    }\n  }\n\n  .option {\n    margin-block: 5px;\n    padding: 10px;\n    cursor: pointer;\n    border-bottom: 1px solid #f0f0f0;\n    transition: background-color 0.3s ease;\n  }\n\n  .option:hover {\n    background-color: #f0f0f0; /* Custom hover effect color */\n  }\n\n  .option:last-child {\n    border-bottom: none;\n  }\n\n  .selected {\n    background-color: #f0f0f0;\n  }\n\n  .disabled {\n    background-color: #f4f4f4 !important;\n    cursor: not-allowed !important;\n    font-weight: 500;\n    color: #b3b3b3;\n  }\n\n  .disabled .circle {\n    opacity: 0.5;\n  }\n\n  .circle {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n  }\n\n  .grey {\n    background-color: #818181;\n  }\n\n  .green {\n    background-color: #04a46e;\n  }\n\n  a:hover {\n    text-decoration: none;\n  }\n\n  .black-btn {\n    background-color: #000 !important;\n    border: none;\n    color: white;\n    &:active {\n      color: white;\n    }\n  }\n`;\n\nconst [kycOptionsOpen, setKycOptions] = useState(false);\n\nconst VerificationBtn = () => {\n  const btnOptions = [\n    {\n      src: \"https://ipfs.near.social/ipfs/bafkreidqveupkcc7e3rko2e67lztsqrfnjzw3ceoajyglqeomvv7xznusm\",\n      label: \"KYC\",\n      description: \"Choose this if you are an individual.\",\n      value: \"KYC\",\n    },\n    {\n      src: \"https://ipfs.near.social/ipfs/bafkreic5ksax6b45pelvxm6a2v2j465jgbitpzrxtzpmn6zehl23gocwxm\",\n      label: \"KYB\",\n      description: \"Choose this if you are a business or corporate entity..\",\n      value: \"KYB\",\n    },\n  ];\n\n  const toggleDropdown = () => {\n    setKycOptions(!kycOptionsOpen);\n  };\n\n  return (\n    <DropdowntBtnContainer>\n      <div\n        className=\"custom-select\"\n        tabIndex=\"0\"\n        onBlur={() => setKycOptions(false)}\n      >\n        <div className={\"select-header no-border\"}>\n          <Widget\n            src={`devgovgigs.petersalomonsen.near/widget/devhub.components.molecule.Button`}\n            props={{\n              classNames: { root: \"black-btn\" },\n              label: (\n                <div className=\"d-flex align-items-center gap-1\">\n                  Get Verified\n                  <i class=\"bi bi-box-arrow-up-right\"></i>\n                </div>\n              ),\n              onClick: toggleDropdown,\n            }}\n          />\n        </div>\n\n        {kycOptionsOpen && (\n          <div className=\"options-card left\">\n            {btnOptions.map((option) => (\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={\n                  option.value === \"KYC\"\n                    ? \"https://go.fractal.id/near-social-kyc\"\n                    : \"https://go.fractal.id/near-social-kyb\"\n                }\n              >\n                <div\n                  key={option.value}\n                  className={`option ${\n                    selectedOption.value === option.value ? \"selected\" : \"\"\n                  }`}\n                  onClick={() => setKycOptions(false)}\n                >\n                  <div className={`d-flex gap-2 align-items-center`}>\n                    <img src={option.src} height={30} />\n                    <div>\n                      <div className=\"fw-bold\">{option.label}</div>\n                      <div className=\"text-muted text-xs\">\n                        {option.description}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </a>\n            ))}\n          </div>\n        )}\n      </div>\n    </DropdowntBtnContainer>\n  );\n};\n\nreturn (\n  <div>\n    <div className=\"d-flex justify-content-between align-items-center\">\n      <div className=\"d-flex gap-4 \">\n        <img\n          className=\"align-self-center\"\n          src={verificationStatus === \"Verified\" ? SuccessImg : WarningImg}\n          height={30}\n        />\n        <div className=\"d-flex flex-column justify-content-center\">\n          <div className=\"h6 mb-0\">Fractal</div>\n          <div className=\"text-muted text-sm\">{verificationStatus}</div>\n        </div>\n      </div>\n      {verificationStatus !== \"Verified\" && showGetVerifiedBtn && (\n        <VerificationBtn />\n      )}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devgovgigs.petersalomonsen.near/widget/devhub.entity.proposal.VerificationStatus", "fact_widget_deployments_id": "4c78f55ef30a1c3ca26858fa40b545cb", "inserted_timestamp": "2024-03-21T07:29:03.043Z", "modified_timestamp": "2024-03-21T07:29:03.043Z", "__row_index": 11}