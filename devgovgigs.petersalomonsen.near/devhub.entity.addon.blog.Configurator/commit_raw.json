{"tx_hash": "3gYook6jMyc1oosEpHGmDsZ35zbXdUTiKGre24DDR2zW", "action_id_social": "FUXfJFt2KQfWrH6cES6GRprhCu4RKKEWfePu13e4mUxL-0-widget", "block_id": 104786736, "block_timestamp": "2023-11-02T19:58:20.465Z", "signer_id": "devgovgigs.petersalomonsen.near", "widget_name": "devhub.entity.addon.blog.Configurator", "source_code": "const { data, handle, onSubmit } = props;\n\nconst { Tile } =\n  VM.require(\"devgovgigs.petersalomonsen.near/widget/devhub.components.molecule.Tile\") ||\n  (() => <></>);\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst Item = styled.div`\n  padding: 10px;\n  margin: 5px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: 10px;\n`;\n\nconst EditableField = styled.input`\n  flex: 1;\n`;\n\nconst initialData = data;\nconst [includeLabels, setIncludeLabels] = useState(\n  initialData.includeLabels || []\n);\nconst [excludeLabels, setExcludeLabels] = useState(\n  initialData.excludeLabels || []\n);\nconst [newIncludeLabel, setNewIncludeLabel] = useState(\"\");\nconst [newExcludeLabel, setNewExcludeLabel] = useState(\"\");\nconst [layout, setLayout] = useState(initialData.layout || \"feed\"); // \"feed\" or \"grid\"\n\nconst handleAddIncludeLabel = () => {\n  if (newIncludeLabel) {\n    setIncludeLabels([...includeLabels, newIncludeLabel]);\n    setNewIncludeLabel(\"\");\n  }\n};\n\nconst handleDeleteIncludeLabel = (index) => {\n  const updatedIncludeLabels = [...includeLabels];\n  updatedIncludeLabels.splice(index, 1);\n  setIncludeLabels(updatedIncludeLabels);\n};\n\nconst handleAddExcludeLabel = () => {\n  if (newExcludeLabel) {\n    setExcludeLabels([...excludeLabels, newExcludeLabel]);\n    setNewExcludeLabel(\"\");\n  }\n};\n\nconst handleDeleteExcludeLabel = (index) => {\n  const updatedExcludeLabels = [...excludeLabels];\n  updatedExcludeLabels.splice(index, 1);\n  setExcludeLabels(updatedExcludeLabels);\n};\n\nconst hasDataChanged = () => {\n  return (\n    JSON.stringify(includeLabels) !==\n      JSON.stringify(initialData.includeLabels) ||\n    JSON.stringify(excludeLabels) !==\n      JSON.stringify(initialData.excludeLabels) ||\n    layout !== initialData.layout\n  );\n};\n\nconst handleSubmit = () => {\n  onSubmit({ includeLabels, excludeLabels, layout });\n};\n\nreturn (\n  <Tile className=\"p-3 bg-white\">\n    <ul className=\"nav nav-tabs\" id=\"blogConfiguratorTabs\" role=\"tablist\">\n      <li className=\"nav-item\" role=\"presentation\">\n        <button\n          className=\"nav-link active\"\n          id=\"settings-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#settings\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"settings\"\n          aria-selected=\"true\"\n        >\n          Settings\n        </button>\n      </li>\n      <li className=\"nav-item\" role=\"presentation\">\n        <button\n          className=\"nav-link\"\n          id=\"editor-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#editor\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"editor\"\n          aria-selected=\"false\"\n        >\n          Editor\n        </button>\n      </li>\n    </ul>\n\n    <div className=\"tab-content\" id=\"blogConfiguratorTabsContent\">\n      {/* Settings Tab */}\n      <div\n        className=\"tab-pane show active\"\n        id=\"settings\"\n        role=\"tabpanel\"\n        aria-labelledby=\"settings-tab\"\n      >\n        <Container>\n          <h3>Include Labels</h3>\n          {includeLabels.map((item, index) => (\n            <Item key={index}>\n              <div className=\"flex-grow-1\">\n                <Widget\n                  // TODO: LEGACY.\n                  src=\"devgovgigs.petersalomonsen.near/widget/gigs-board.components.molecule.text-input\"\n                  props={{\n                    className: \"flex-grow-1\",\n                    value: item,\n                    placeholder: \"\",\n                    inputProps: {\n                      disabled: true,\n                    },\n                  }}\n                />\n              </div>\n              <button\n                className=\"btn btn-outline-danger\"\n                onClick={() => handleDeleteIncludeLabel(index)}\n              >\n                <i className=\"bi bi-trash-fill\" />\n              </button>\n            </Item>\n          ))}\n          <Item>\n            <div className=\"flex-grow-1\">\n              <Widget\n                // TODO: LEGACY.\n                src=\"devgovgigs.petersalomonsen.near/widget/gigs-board.components.molecule.text-input\"\n                props={{\n                  className: \"flex-grow-1\",\n                  onChange: (e) => setNewIncludeLabel(e.target.value),\n                  value: newIncludeLabel,\n                  placeholder: \"label\",\n                }}\n              />\n            </div>\n            <button\n              className=\"btn btn-success\"\n              onClick={() => handleAddIncludeLabel()}\n              disabled={newIncludeLabel === \"\"}\n            >\n              <i className=\"bi bi-plus\" />\n            </button>\n          </Item>\n          <h3>Exclude Labels</h3>\n          {excludeLabels.map((item, index) => (\n            <Item key={index}>\n              <div className=\"flex-grow-1\">\n                <Widget\n                  // TODO: LEGACY.\n                  src=\"devgovgigs.petersalomonsen.near/widget/gigs-board.components.molecule.text-input\"\n                  props={{\n                    className: \"flex-grow-1\",\n                    value: item,\n                    placeholder: \"label\",\n                    inputProps: {\n                      disabled: true,\n                    },\n                  }}\n                />\n              </div>\n              <button\n                className=\"btn btn-outline-danger\"\n                onClick={() => handleDeleteExcludeLabel(index)}\n              >\n                <i className=\"bi bi-trash-fill\" />\n              </button>\n            </Item>\n          ))}\n          <Item>\n            <div className=\"flex-grow-1\">\n              <Widget\n                // TODO: LEGACY.\n                src=\"devgovgigs.petersalomonsen.near/widget/gigs-board.components.molecule.text-input\"\n                props={{\n                  className: \"flex-grow-1\",\n                  onChange: (e) => setNewExcludeLabel(e.target.value),\n                  value: newExcludeLabel,\n                  placeholder: \"label\",\n                }}\n              />\n            </div>\n            <button\n              className=\"btn btn-success\"\n              onClick={() => handleAddExcludeLabel()}\n              disabled={newExcludeLabel === \"\"}\n            >\n              <i className=\"bi bi-plus\" />\n            </button>\n          </Item>\n          <h3>Layout</h3>\n          <div className=\"flex-grow-1\">\n            <Widget\n              src={\"near/widget/DIG.InputSelect\"}\n              props={{\n                groups: [\n                  {\n                    items: [\n                      {\n                        label: \"Grid\",\n                        value: \"grid\",\n                      },\n                      {\n                        label: \"Feed\",\n                        value: \"feed\",\n                      },\n                    ],\n                  },\n                ],\n                rootProps: {\n                  value: layout || \"\",\n                  placeholder: \"Select a Layout\",\n                  onValueChange: (value) => setLayout(value),\n                },\n              }}\n            />\n          </div>\n          <div\n            className={\n              \"d-flex align-items-center justify-content-end gap-3 mt-4\"\n            }\n          >\n            <Widget\n              src={\"devgovgigs.petersalomonsen.near/widget/devhub.components.molecule.Button\"}\n              props={{\n                classNames: { root: \"btn-success\" },\n                disabled: !hasDataChanged(),\n                icon: {\n                  type: \"bootstrap_icon\",\n                  variant: \"bi-check-circle-fill\",\n                },\n                label: \"Submit\",\n                onClick: handleSubmit,\n              }}\n            />\n          </div>\n        </Container>\n      </div>\n\n      {/* Editor Tab */}\n      <div\n        className=\"tab-pane\"\n        id=\"editor\"\n        role=\"tabpanel\"\n        aria-labelledby=\"editor-tab\"\n      >\n        <Container>\n          <Widget\n            src={\"devgovgigs.petersalomonsen.near/widget/devhub.entity.addon.blog.editor.index\"}\n            props={{\n              data,\n              handle,\n            }}\n          />\n        </Container>\n      </div>\n    </div>\n  </Tile>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devgovgigs.petersalomonsen.near/widget/devhub.entity.addon.blog.Configurator", "fact_widget_deployments_id": "461d564fbe336c932fecb222046448b8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}