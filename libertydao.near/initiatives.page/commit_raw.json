{"tx_hash": "oNKRUsGRzw7Wn1xq6E9stoqXAJzmthMATDdK5q1k2rY", "action_id_social": "HZnmV27RJtzcNDqcJtqMKyWMXQoVi35jfzFGjNRwj52f-0-widget", "block_id": 101629511, "block_timestamp": "2023-09-21T13:57:31.286Z", "signer_id": "libertydao.near", "widget_name": "initiatives.page", "source_code": "const creatorId = props.creatorId;\nconst groupId = props.groupId;\n\nconst groupInfo = Social.get(`${creatorId}/thing/${groupId}/**`, \"final\");\n\nif (!groupInfo) {\n  return \"group details not found\";\n}\nconst groupData = JSON.parse(groupInfo[\"\"]);\n\nconst NavUnderline = styled.ul`\n  border-bottom: 1px #eceef0 solid;\n\n  a {\n    color: #687076;\n    text-decoration: none;\n  }\n\n  a.active {\n    font-weight: bold;\n    color: #0c7283;\n    border-bottom: 4px solid #0c7283;\n  }\n`;\n/* END_INCLUDE: \"core/lib/gui/navigation\" */\n\nconst Button = styled.button`\n  height: 40px;\n  font-size: 14px;\n  border-color: #e3e3e0;\n  background-color: #ffffff;\n`;\n\nconst Banner = styled.div`\n  max-width: 100%;\n  min-height: 240px;\n  height: 240px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`;\n\nconst { Feed } = VM.require(\"efiz.near/widget/Module.Feed\");\nFeed = Feed || (() => <></>);\n\nconst tabs = [\n  {\n    defaultActive: true,\n    title: \"Activity\",\n    iconClass: \"bi bi-house-door\",\n    module: () => (\n      <>\n        <Widget\n          src=\"devs.near/widget/Compose\"\n          props={{\n            index: {\n              post: JSON.stringify([\n                {\n                  key: {\n                    type: \"thing\",\n                    path: `${creatorId}/thing/${groupId}`,\n                  },\n                  value: {\n                    type: \"md\",\n                  },\n                },\n                {\n                  key: \"main\",\n                  value: {\n                    type: \"md\",\n                  },\n                },\n              ]),\n            },\n          }}\n        />\n        <Feed\n          index={[\n            {\n              action: \"post\",\n              key: {\n                type: \"thing\",\n                path: `${creatorId}/thing/${groupId}`,\n              },\n              options: {\n                limit: 10,\n                order: \"desc\",\n                accountId: props.accounts,\n              },\n              cacheOptions: {\n                ignoreCache: true,\n              },\n            },\n            {\n              action: \"repost\",\n              key: JSON.stringify({\n                type: \"thing\",\n                path: `${creatorId}/thing/${groupId}`,\n              }),\n              options: {\n                limit: 10,\n                order: \"desc\",\n                accountId: props.accounts,\n              },\n              cacheOptions: {\n                ignoreCache: true,\n              },\n            },\n          ]}\n          Item={(p) => (\n            <Widget\n              loading={<div className=\"w-100\" style={{ height: \"200px\" }} />}\n              src=\"mob.near/widget/MainPage.N.Post\"\n              props={{ accountId: p.accountId, blockHeight: p.blockHeight }}\n            />\n          )}\n        />\n      </>\n    ),\n  },\n  {\n    iconClass: \"bi bi-house-door\",\n    title: \"Members\",\n    module: () => (\n      <>\n        <p>These are mutual members across all graphs</p>\n        <Widget src=\"hack.near/widget/group.members\" props={{ groupId }} />\n      </>\n    ),\n  },\n  {\n    iconClass: \"bi bi-house-door\",\n    title: \"Graphs\",\n    module: () => (\n      <>\n        <p>\n          These are the users that have created their versions of this group.\n        </p>\n        <Widget src=\"hack.near/widget/group.members\" props={{ groupId }} />\n      </>\n    ),\n  },\n  {\n    iconClass: \"bi bi-gear\",\n    title: \"Settings\",\n    module: () => (\n      <Widget\n        src=\"hack.near/widget/group.settings\"\n        props={{ groupId, groupData }}\n      />\n    ),\n  },\n  ...(groupData.tabs || []),\n];\n\nState.init({\n  selectedTab: tabs[0],\n});\n\nconst { metadata } = groupInfo;\nconst { name, description, image, backgroundImage } = metadata;\n\nfunction Module({ module }) {\n  if (typeof module === \"function\") {\n    return module();\n  } else {\n    return <Widget src={module.src} />;\n  }\n}\n\nreturn (\n  <div className=\"d-flex flex-column gap-3 bg-white\">\n    <Banner\n      className=\"object-fit-cover\"\n      style={{\n        background: `center / cover no-repeat url(https://ipfs.near.social/ipfs/${backgroundImage.ipfs_cid})`,\n      }}\n    />\n\n    <div className=\"d-md-flex d-block justify-content-between container\">\n      <div className=\"d-md-flex d-block align-items-end\">\n        <div className=\"position-relative\">\n          <div style={{ width: 150, height: 100 }}>\n            <img\n              alt=\"Loading logo...\"\n              className=\"border border-3 border-white rounded-circle shadow position-absolute\"\n              width=\"150\"\n              height=\"150\"\n              src={`https://ipfs.near.social/ipfs/${image.ipfs_cid}`}\n              style={{ top: -50 }}\n            />\n          </div>\n        </div>\n\n        <div className=\"d-flex flex-column ps-3 pt-3 pb-2\">\n          <span className=\"h1 text-nowrap\">{name}</span>\n          <span className=\"text-secondary\">{description}</span>\n        </div>\n      </div>\n\n      <div className=\"d-flex align-items-end gap-3\">\n        <Button\n          className=\"btn btn-outline-primary\"\n          onClick={() => State.update({ selectedTab: tabs[3] })}\n        >\n          Configure Community\n        </Button>\n        <Button className=\"btn btn-outline-primary\">Join</Button>\n      </div>\n    </div>\n\n    <NavUnderline className=\"nav\">\n      {tabs.map(({ iconClass, title }, index) =>\n        title ? (\n          <li className=\"nav-item\" key={title}>\n            <div\n              className={[\n                \"d-inline-flex gap-2\",\n                state.selectedTab === title ? \"nav-link active\" : \"nav-link\",\n              ].join(\" \")}\n              onClick={() => State.update({ selectedTab: tabs[index] })}\n            >\n              <i className={iconClass} />\n              <span>{title}</span>\n            </div>\n          </li>\n        ) : null\n      )}\n    </NavUnderline>\n    <Content>\n      <Module module={state.selectedTab.module} />\n    </Content>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/libertydao.near/widget/initiatives.page", "fact_widget_deployments_id": "4815ddf2ed9af41ac98ae5574370f1bc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}