{"tx_hash": "CnDK9nxRhCGZhhRga2G2oYhgR2R1AqjTaDU34BBzJxrp", "action_id_social": "2xdyoV9DLtqWkBErRbBXf7WEwP5L2CRndvEBRU6gjWUe-0-widget", "block_id": 107505562, "block_timestamp": "2023-12-09T09:13:58.096Z", "signer_id": "bos.questverse.near", "widget_name": "components.createQuestSteps.step2", "source_code": "const { formState, errors, renderFooter } = props;\nconst { fetch_step_two_data } = VM.require(\n  \"bos.questverse.near/widget/data.data_step2\"\n);\nconst AUDIENCES_JSON = fetch_step_two_data();\n\nState.init({\n  masterList: AUDIENCES_JSON.public_audience,\n  allowedList: AUDIENCES_JSON.public_audience,\n  excludedList: [],\n});\n\nconst handleRemoveItem = (item, list) => {\n  if (list === \"allowedList\") {\n    const updatedSubList = state.allowedList.filter((i) => i !== item);\n\n    State.update({\n      allowedList: updatedSubList,\n    });\n  } else if (list === \"excludedList\") {\n    const updatedSubList = excludedList.filter((i) => i !== item);\n\n    State.update({\n      excludedList: updatedSubList,\n    });\n  }\n};\nconst handleMoveItem = (item, fromList, toList) => {\n  if (fromList === \"master\" && toList === \"allowedList\") {\n    State.update({\n      allowedList: [...state.allowedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (fromList === \"master\" && toList === \"excludedList\") {\n    State.update({\n      excludedList: [...state.excludedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (\n    (fromList === \"allowedList\" ) &&\n    toList === \"excludedList\"\n  ) {\n    if (fromList === \"allowedList\") {\n      const updatedAllowedSubList = state.allowedList.filter(\n        (i) => i.id !== item.id\n      );\n      State.update({\n        allowedList: updatedAllowedSubList,\n        excludedList: [...state.excludedList, item],\n      });\n    } else if (fromList === \"excludedList\") {\n      const updatedExcludedSubList = state.excludedList.filter(\n        (i) => i.id !== item.id\n      );\n      State.update({\n        excludedList: updatedExcludedSubList,\n        allowedList: [...state.allowedList, item],\n      });\n    }\n  }\n};\n\nreturn (\n  <div className=\"mt-4 ndc-card p-4\">\n    <div className=\"d-flex flex-column gap-4\">\n      <h2 className=\"h5 fw-bold\">\n        <span\n          className=\"rounded-circle d-inline-flex align-items-center justify-content-center fw-bolder h5 me-2\"\n          style={{\n            width: \"48px\",\n            height: \"48px\",\n            border: \"1px solid #82E299\",\n          }}\n        >\n          2\n        </span>\n      Target Your Quest To Specific Users\n      </h2>\n    {state.masterList.map((l, i) => (\n      <div\n        className={[\n          \"d-flex align-items-center gap-2 pt-2\",\n          l === null && \"d-none\",\n        ].join(\" \")}\n      >\n        <p className=\"text-black-100 fw-dark small\">\n          <div>Target Users: {l.name}</div>\n          <small>Count: {l.member_count}</small>\n        </p>\n        {state.allowedList.find((a) => l.id == a.id) && (\n          <Widget\n            src=\"nearui.near/widget/Input.Button\"\n            props={{\n              children: <i className=\"bi bi-trash\" />,\n              variant: \"icon danger outline\",\n              size: \"lg\",\n              onClick: () => handleMoveItem(l, \"allowedList\", \"excludedList\"),\n            }}\n          />\n        )}\n\n        {state.excludedList.find((a) => a.id == l.id) && (\n          <Widget\n            src=\"nearui.near/widget/Input.Button\"\n            props={{\n              children: <i className=\"bi bi-plus\" />,\n              variant: \"icon success outline\",\n              size: \"lg\",\n              onClick: () => handleRemoveItem(l, \"excludedList\"),\n            }}\n          />\n        )}\n      </div>\n    ))}\n\n    {renderFooter(state)}\n  </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.questverse.near/widget/components.createQuestSteps.step2", "fact_widget_deployments_id": "a84f929bc3cfb9724083e3e7ab96661f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}