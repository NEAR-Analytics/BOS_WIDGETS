{"tx_hash": "AGYnRm9YPsV4gAuez54VZiHMzcHgH5U9QaZPipzcYysy", "action_id_social": "3LXVgvxVjTDSBoghdcRuxxXQqu7Po7ekVTpzfmG1qBrp-0-widget", "block_id": 109951655, "block_timestamp": "2024-01-09T03:47:54.465Z", "signer_id": "bos.questverse.near", "widget_name": "pages.Dashboard", "source_code": "// Feed\n// const type = props.type || \"quest\";\n//\n// const things = Social.keys(`*/${type}/*`, \"final\", {\n//   return_type: \"BlockHeight\",\n// });\n//\n// if (!things) {\n//   return \"Loading...\";\n// }\n//\nconst Container = styled.div`\n  margin: 0 auto;\n  padding: 20px;\n  width: 100%;\n  max-width: 1200px;\n`;\n\nconst Grid = styled.div`\n  display: grid;\n  grid-gap: 10px;\n  // grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n\n  // @media (min-width: 576px) {\n  //   grid-gap: 15px;\n  // }\n\n  // @media (min-width: 992px) {\n  //   grid-gap: 20px;\n  // }\n\n  > * {\n    transition: transform 0.3s ease; // Smooth transition for hover effect\n\n    &:hover {\n      transform: scale(1.03); // Subtle scale effect on hover\n    }\n  }\n`;\n\nconst processData = useCallback(\n  (data) => {\n    const accounts = Object.entries(data);\n\n    const allItems = accounts\n      .map((account) => {\n        const accountId = account[0];\n        return Object.entries(account[1][type]).map((kv) => {\n          return {\n            accountId,\n            type: type,\n            name: kv[0],\n            metadatadata: Social.get(\n              `${accountId}/${type}/${kv[0]}/metadata/**`,\n              \"final\"\n            ),\n          };\n        });\n      })\n      .flat();\n\n    // sort by latest\n    allItems.sort((a, b) => b.blockHeight - a.blockHeight);\n    return allItems;\n  },\n  [type]\n);\n\n// const items = processData(things);\n\nconst items = Near.view(\"v0.questverse.near\", \"quests\");\nconsole.log(items, \"quests\")\n\nif (!items) {\n  return \"Loading data...\";\n}\n\nif (items.length === 0) {\n  return `No items of type: \"${type}\" found.`;\n}\n\nfunction Item(item) {\n  return (\n    <Widget\n      src=\"bos.questverse.near/widget/components.quest.card\"\n      props={{ questId: item.quest_id }}\n    />\n  );\n  // // Use metadata.name if it exists, otherwise use the passed name\n  // const displayName = metadata.name || name;\n  // const defaultImage =\n  //   \"https://ipfs.near.social/ipfs/bafkreihi3qh72njb3ejg7t2mbxuho2vk447kzkvpjtmulsb2njd6m2cfgi\";\n\n  // return (\n  //   <div\n  //     className=\"card\"\n  //     style={{\n  //       maxWidth: \"100%\",\n  //       height: \"200px\",\n  //       display: \"flex\",\n  //       flexDirection: \"column\",\n  //       justifyContent: \"space-between\",\n  //       overflow: \"hidden\",\n  //     }}\n  //   >\n  //     <div\n  //       className=\"card-img-top\"\n  //       style={{\n  //         backgroundImage: `url(${metadata.backgroundImage || defaultImage})`,\n  //         height: \"80px\",\n  //         backgroundSize: \"cover\",\n  //         backgroundPosition: \"center\",\n  //       }}\n  //     />\n\n  //     <div className=\"card-body\">\n  //       <Link\n  //         to={`/${accountId}/${type}/${name}`}\n  //         style={{ textDecoration: \"none\" }}\n  //       >\n  //         <h5 className=\"card-title\">\n  //           {accountId}/{displayName}\n  //         </h5>\n  //       </Link>\n  //       {metadata.description && (\n  //         <p\n  //           className=\"card-text\"\n  //           style={{ overflow: \"hidden\", textOverflow: \"ellipsis\" }}\n  //         >\n  //           {metadata.description}\n  //         </p>\n  //       )}\n  //     </div>\n  //     {context.accountId && (\n  //       <div\n  //         className=\"pb-2\"\n  //         style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"4px\" }}\n  //       >\n  //         <Widget\n  //           src=\"mob.near/widget/N.StarButton\"\n  //           props={{\n  //             notifyAccountId: accountId,\n  //             item: {\n  //               type: \"social\",\n  //               path: `${accountId}/${type}/${name}`,\n  //             },\n  //           }}\n  //         />\n  //         <Widget\n  //           src=\"mob.near/widget/N.LikeButton\"\n  //           props={{\n  //             notifyAccountId: accountId,\n  //             item: {\n  //               type: \"social\",\n  //               path: `${accountId}/${type}/${name}`,\n  //             },\n  //           }}\n  //         />\n  //       </div>\n  //     )}\n  //   </div>\n  // );\n}\n\nreturn (\n  <Container>\n    <div className=\"d-flex justify-content-between align-items-center w-100\">\n      <h2 className=\"mb-3\" style={{ fontFamily: \"Helvetica Neue\" }}>\n        <b>Discover</b>\n      </h2>\n      <Link to={`/bos.questverse.near/widget/app?page=create`}>\n        <button className=\"btn btn-primary\">Create</button>\n      </Link>\n    </div>\n    <Widget\n      src=\"everycanvas.near/widget/ItemFeed\"\n      props={{\n        items: items,\n        renderItem: Item,\n        perPage: 100,\n        renderLayout: (items) => <Grid>{items}</Grid>,\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.questverse.near/widget/pages.Dashboard", "fact_widget_deployments_id": "a61b29fbd949180f6579c828af32f45f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}