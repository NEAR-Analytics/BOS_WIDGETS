{"tx_hash": "8f1N8LBy1yqVNhz9enqszEAUmAKxmzWAJJg8uCvnaLhK", "action_id_social": "FX4m86e27s7Kaphyas8QQbR5cVXZZfDFhzwJESPBYhf1-0-widget", "block_id": 110032979, "block_timestamp": "2024-01-10T03:52:47.646Z", "signer_id": "bos.questverse.near", "widget_name": "components.quest.card", "source_code": "const accountId = props.accountId ?? context.accountId;\nconst questId = props.questId ?? 3;\nconst pageUrl = props.url ?? \"/bos.questverse.near/widget/pages.Discover\";\nconst claimedByUser = props.isClaimedByUser ?? false;\n\nconst quest = Near.view(\"v0.questverse.near\", \"quest_by_id\", {\n  quest_id: questId,\n});\nif (!quest) {\n  return \"quest data missing\";\n}\n\nconst questUrl = `/bos.questverse.near/widget/pages.QuestDetailsPage?questId=${questId}`;\n\nconst isEligible = props.isEligible ?? true;\n\nconst Card = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 39px;\n  width: 100%;\n  border-radius: 12px;\n  background: #fff;\n  border: 1px solid #eceef0;\n  box-shadow: 0px 1px 3px rgba(16, 24, 40, 0.1),\n    0px 1px 2px rgba(16, 24, 40, 0.06);\n  overflow: hidden;\n  padding: 16px;\n`;\n\nconst CardLeft = styled.div`\n  display: flex;\n  gap: 18px;\n  align-items: center;\n  width: 100%;\n  min-width: 0;\n  padding-left: 12px;\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    min-width: 0;\n  }\n`;\n\nconst TextLink = styled.a`\n  display: block;\n  margin: 0;\n  font-size: 14px;\n  line-height: 18px;\n  color: ${(p) => (p.bold ? \"#11181C !important\" : \"#687076 !important\")};\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"visible\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"unset\")};\n  white-space: nowrap;\n  outline: none;\n\n  &:focus,\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst TagsWrapper = styled.div`\n  padding-top: 4px;\n`;\n\nconst Tag = styled.a`\n  color: black;\n  text-decoration: none;\n\n  &:hover {\n    color: blue;\n    text-decoration: none;\n  }\n`;\n\nconst amount = (quest.total_reward_amount / 1000000000000000000000000).toFixed(\n  4\n);\n\nconst indexer = quest.indexer_name;\nconst openClaims = quest.total_participants_allowed - quest.num_claimed_rewards;\n// const didStartQuest = Social.get(\"questId\")\nconst questStatus = claimedByUser ? \"Claimed\" : \"\";\n\nreturn (\n  <>\n    <Card>\n      <CardLeft>\n        <div className=\"d-flex flex-column me-3\">\n          <div className=\"text-truncate pb-3\">Quest Status: {questStatus}</div>\n          <div className=\"d-flex flex-row me-3\">\n            <div className=\"me-3\">\n              <a href={questUrl}>\n                <Widget\n                  src=\"mob.near/widget/ProfileImage\"\n                  props={{\n                    accountId: `${quest.creator}`,\n                    imageStyle: {\n                      objectFit: \"cover\",\n                      borderRadius: \"0.6em\",\n                    },\n                    imageClassName: \"w-100 h-100\",\n                  }}\n                />\n              </a>\n            </div>\n            <div className=\"text-truncate mb-1\">\n              <a href={questUrl} style={{ textDecoration: \"none\" }}>\n                <span className=\"fw-bold\" style={{ color: \"black\" }}>\n                  {indexer}\n                </span>\n              </a>\n              <p>@{quest.creator}</p>\n            </div>\n            <div className=\"text-truncate text-muted\">\n              {quest.tags.length > 0 && (\n                <>\n                  {quest.tags.map((tag, i) => (\n                    <span\n                      key={i}\n                      className=\"me-1 fw-light badge border border-secondary text-bg-light\"\n                    >\n                      <a\n                        href={`${pageUrl}?tag=${tag}`}\n                        style={{ textDecoration: \"none\" }}\n                        className=\"no-text-decoration\"\n                      >\n                        <Tag>#{tag}</Tag>\n                      </a>\n                    </span>\n                  ))}\n                </>\n              )}\n            </div>\n            {context.accountId == quest.creator && (\n              <div className=\"d-flex flex-row me-3\">\n                <Widget\n                  src=\"hack.near/widget/tags\"\n                  props={{\n                    path: `${quest.creator}/quest/${quest.quest_id}`,\n                    url: \"/bos.questverse.near/widget/pages.Discover\",\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </CardLeft>\n      <div className=\"d-flex flex-row me-3\">\n        <p>\n          <Widget\n            src=\"mob.near/widget/N.Overlay.Faces\"\n            props={{ accounts: quest.participants, limit: 10 }}\n          />\n          {quest.participants.length !== 0 && \"claimed\"}\n        </p>\n      </div>\n      <div className=\"d-flex flex-column\">\n        <p>\n          <b>Starts At:</b>\n        </p>\n        <p>{new Date(quest.starts_at).toLocaleString()}</p>\n      </div>\n      <div className=\"d-flex flex-column\">\n        <p>\n          <b>Expires At:</b>\n        </p>\n        <p>{new Date(quest.expires_at).toLocaleString()}</p>\n      </div>\n      {!isVerified && context.accountId && (\n        <div className=\"d-flex flex-column m12\">\n          <b>{amount} NEAR</b>\n          {!claimedByUser && (\n            <Widget\n              src=\"bos.questverse.near/widget/components.quest.claim\"\n              props={{ questId, claimedByUser }}\n            />\n          )}\n          <p className=\"text-center mt-1\">\n            <i>{openClaims} left</i>\n          </p>\n          <p className=\"text-center\">\n            <i>{quest.total_participants_allowed} total</i>\n          </p>\n        </div>\n      )}\n    </Card>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.questverse.near/widget/components.quest.card", "fact_widget_deployments_id": "9cb4623f69a751268e6022aaa48a5bb3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}