{"tx_hash": "13XBrMRMjtWxehEnfJ3huAeFzFWAA5AtLQ5aJ6TLdbJS", "action_id_social": "HtU9xqwSTCA3NnAWAedq5KSPb1JWdqbMCEnnfkigbSeF-0-widget", "block_id": 107453461, "block_timestamp": "2023-12-08T17:41:29.415Z", "signer_id": "bos.questverse.near", "widget_name": "components.createQuestSteps.stepTwo", "source_code": "const AUDIENCES = {\n  public_audience: [\n    {\n      id: \"1\",\n      name: \"audienceMember1\",\n      member_count: 123,\n    },\n    {\n      id: \"2\",\n      name: \"audienceMember2\",\n      member_count: 123,\n    },\n    {\n      id: \"3\",\n      name: \"audienceMember3\",\n      member_count: 123,\n    },\n    {\n      id: \"4\",\n      name: \"audienceMember4\",\n      member_count: 123,\n    },\n    {\n      id: \"5\",\n      name: \"audienceMember5\",\n      member_count: 123,\n    },\n    {\n      id: \"6\",\n      name: \"audienceMember6\",\n      member_count: 123,\n    },\n    {\n      id: \"7\",\n      name: \"audienceMember7\",\n      member_count: 123,\n    },\n    {\n      id: \"8\",\n      name: \"audienceMember8\",\n      member_count: 123,\n    },\n    {\n      id: \"8\",\n      name: \"audienceMember9\",\n      member_count: 123,\n    },\n    {\n      id: \"9\",\n      name: \"audienceMember10\",\n      member_count: 123,\n    },\n  ],\n};\n\nState.init({\n  masterList: AUDIENCES.public_audience,\n  allowedList: [],\n  excludedList: [],\n});\n\nfunction handleRemoveItem(item, list) {\n  if (list === \"allowedList\") {\n    const updatedSubList = state.allowedList.filter((i) => i !== item);\n\n    State.update({\n      allowedList: updatedSubList,\n    });\n  } else if (list === \"excludedList\") {\n    const updatedSubList = excludedList.filter((i) => i !== item);\n\n    State.update({\n      excludedList: updatedSubList,\n    });\n  }\n}\n//I hate this prettier\n\nfunction handleMoveItem(item, fromList, toList) {\n  if (fromList === \"master\" && toList === \"allowedList\") {\n    State.update({\n      allowedList: [...state.allowedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (fromList === \"master\" && toList === \"excludedList\") {\n    State.update({\n      excludedList: [...state.excludedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (\n    (fromList === \"allowedList\" || fromList === \"excludedList\") &&\n    toList === \"master\"\n  ) {\n    if (fromList === \"allowedList\") {\n      const updatedAllowedSubList = state.allowedList.filter((i) => i.id !== item.id);\n      State.update({\n        allowedList: updatedAllowedSubList,\n        masterList: [...state.masterList, item],\n      });\n    } else if (fromList === \"excludedList\") {\n      const updatedExcludedSubList = state.excludedList.filter(\n        (i) => i.id !== item.id\n      );\n      State.update({\n        excludedList: updatedExcludedSubList,\n        masterList: [...state.masterList, item],\n      });\n    }\n  }\n}\n\nreturn (\n  <div>\n    <div className=\"stepTwo\">\n      <div>\n        <h2>Audience</h2>\n        <small>Add or exclude audiences to refine quest eligibility.</small>\n\n        <ul>\n          {state.masterList.map((item, index) => (\n            <li key={index}>\n              <div>Audience Name: {item.name}</div>\n              <small>Member Count: {item.member_count}</small>\n              <button\n                onClick={() => handleMoveItem(item, \"master\", \"allowedList\")}\n              >\n                Move to Allowed\n              </button>\n              <button\n                onClick={() => handleMoveItem(item, \"master\", \"excludedList\")}\n              >\n                Move to Excluded\n              </button>\n            </li>\n          ))}\n        </ul>\n\n        <h3>Allowed</h3>\n        <ul>\n          {state.allowedList.map((item, index) => (\n            <li key={index}>\n              <div>Audience Name: {item.name}</div>\n              <small>Member Count: {item.member_count}</small>\n              <button\n                onClick={() => handleMoveItem(item, \"allowedList\", \"master\")}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n\n        <h3>Excluded</h3>\n        <ul>\n          {state.excludedList.map((item, index) => (\n            <li key={index}>\n              <div>Audience Name: {item.name}</div>\n              <small>Member Count: {item.member_count}</small>\n              <button\n                onClick={() => handleMoveItem(item, \"excludedList\", \"master\")}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.questverse.near/widget/components.createQuestSteps.stepTwo", "fact_widget_deployments_id": "0e856c6e5a19a44fe3eecdc808e0f20e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}