{"tx_hash": "3UXvz8XJUGjjTHdLWmrpVE4SBc7nZ1j9aBessNVshoVC", "action_id_social": "Ku19ALNCyvTrhjUFCY9sNtpX8ADyZBFgX49fCGMve3f-0-widget", "block_id": 107477855, "block_timestamp": "2023-12-09T00:55:35.770Z", "signer_id": "bos.questverse.near", "widget_name": "components.createQuestSteps.stepTwo", "source_code": "const AUDIENCES_JSON = props.data;\n\nState.init({\n  masterList: AUDIENCES_JSON.public_audience,\n  allowedList: [],\n  excludedList: [],\n});\n\nconst handleRemoveItem = (item, list) => {\n  if (list === \"allowedList\") {\n    const updatedSubList = state.allowedList.filter((i) => i !== item);\n\n    State.update({\n      allowedList: updatedSubList,\n    });\n  } else if (list === \"excludedList\") {\n    const updatedSubList = excludedList.filter((i) => i !== item);\n\n    State.update({\n      excludedList: updatedSubList,\n    });\n  }\n};\nconst handleMoveItem = (item, fromList, toList) => {\n  if (fromList === \"master\" && toList === \"allowedList\") {\n    State.update({\n      allowedList: [...state.allowedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (fromList === \"master\" && toList === \"excludedList\") {\n    State.update({\n      excludedList: [...state.excludedList, item],\n      masterList: state.masterList.filter((i) => i.id !== item.id),\n    });\n  } else if (\n    (fromList === \"allowedList\" || fromList === \"excludedList\") &&\n    toList === \"master\"\n  ) {\n    if (fromList === \"allowedList\") {\n      const updatedAllowedSubList = state.allowedList.filter(\n        (i) => i.id !== item.id\n      );\n      State.update({\n        allowedList: updatedAllowedSubList,\n        masterList: [...state.masterList, item],\n      });\n    } else if (fromList === \"excludedList\") {\n      const updatedExcludedSubList = state.excludedList.filter(\n        (i) => i.id !== item.id\n      );\n      State.update({\n        excludedList: updatedExcludedSubList,\n        masterList: [...state.masterList, item],\n      });\n    }\n  }\n};\n\nreturn (\n  <div className=\"stepTwo\">\n    <div>\n      <h2>Audience</h2>\n      <small>Add or exclude audiences to refine quest eligibility.</small>\n\n      <ul>\n        {state.masterList.map((item, index) => (\n          <li key={index}>\n            <div>Audience Name: {item.name}</div>\n            <small>Member Count: {item.member_count}</small>\n            <button\n              onClick={() => handleMoveItem(item, \"master\", \"allowedList\")}\n            >\n              Move to Allowed\n            </button>\n            <button\n              onClick={() => handleMoveItem(item, \"master\", \"excludedList\")}\n            >\n              Move to Excluded\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      <h3>Allowed</h3>\n      <ul>\n        {state.allowedList.map((item, index) => (\n          <li key={index}>\n            <div>Audience Name: {item.name}</div>\n            <small>Member Count: {item.member_count}</small>\n            <button\n              onClick={() => handleMoveItem(item, \"allowedList\", \"master\")}\n            >\n              Remove\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      <h3>Excluded</h3>\n      <ul>\n        {state.excludedList.map((item, index) => (\n          <li key={index}>\n            <div>Audience Name: {item.name}</div>\n            <small>Member Count: {item.member_count}</small>\n            <button\n              onClick={() => handleMoveItem(item, \"excludedList\", \"master\")}\n            >\n              Remove\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.questverse.near/widget/components.createQuestSteps.stepTwo", "fact_widget_deployments_id": "e556d2ce4235ca1c06165e92dfb5dd26", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}