{"tx_hash": "9SomVgS1xAGowG92wk8DunRH4bbmmr6rKbEdj9bCEm6g", "action_id_social": "GPeZHYiTtPh28eLeWyGgYohwjriNXwD4yZB4LuaYPi63-0-widget", "block_id": 126705109, "block_timestamp": "2024-08-27T20:58:34.384Z", "signer_id": "treasury-devdao.near", "widget_name": "components.Approvers", "source_code": "const { isNearSocial } = VM.require(\n  \"treasury-devdao.near/widget/lib.common\"\n) || {\n  isNearSocial: false,\n};\nconst votes = props.votes ?? {};\nconst accounts = Object.keys(votes);\nconst transferApproversGroup = props.transferApproversGroup ?? [];\nconst approve =\n  \"https://ipfs.near.social/ipfs/bafkreib52fq4kw7gyfsupz4mrtrexbusc2lplxnopqswa5awtnlqmenena\";\nconst reject =\n  \"https://ipfs.near.social/ipfs/bafkreihrwi2nzl7d2dyij3tstr6tdr7fnioq7vu37en3dxt4faihxreabm\";\nconst maxIndex = 100;\nconst Container = styled.div`\n  .grey-circle {\n    width: 40px;\n    height: 40px;\n    background-color: #e2e6ec;\n  }\n  .reject {\n    color: #d20000;\n  }\n  .approve {\n    color: #089968;\n  }\n`;\nconst maxShow = 1;\nfunction getImage(acc) {\n  return `https://i.near.social/magic/large/https://near.social/magic/img/account/${acc}`;\n}\nreturn (\n  <Container className=\"d-flex justify-content-center\">\n    <Widget\n      src=\"mob.near/widget/N.Common.OverlayTrigger\"\n      props={{\n        popup: (\n          <div className=\"p-1\">\n            <div className=\"d-flex flex-column gap-3\">\n              {transferApproversGroup.map((acc) => {\n                const profile = Social.getr(`${acc}/profile`);\n                const name = profile.name;\n                const imageSrc = getImage(acc);\n                const voted = !!votes[acc];\n                const isApproved = votes[acc] === \"Approve\";\n                const voteImg = isApproved ? approve : reject;\n                return (\n                  <div\n                    className=\"d-flex gap-2 align-items-center\"\n                    style={{\n                      color: voted ? \"\" : \"#B3B3B3\",\n                      opacity: voted ? \" \" : \"0.6\",\n                    }}\n                  >\n                    <div>\n                      <img\n                        src={imageSrc}\n                        height={40}\n                        width={40}\n                        className=\"rounded-circle\"\n                      />\n                      {voted && (\n                        <img\n                          src={voteImg}\n                          height={20}\n                          style={\n                            isNearSocial\n                              ? { marginTop: 17, marginLeft: \"-15px\" }\n                              : { marginTop: \"-19px\", marginLeft: \"21px\" }\n                          }\n                        />\n                      )}\n                    </div>\n                    <div className=\"d-flex flex-column\">\n                      <div className=\"h6 mb-0\">{name ?? acc}</div>\n                      <div className=\"d-flex\">\n                        {voted ? (\n                          <span className={isApproved ? \"approve\" : \"reject\"}>\n                            {isApproved ? \"Approved\" : \"Rejected\"}{\" \"}\n                          </span>\n                        ) : (\n                          \"Not Voted\"\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        ),\n        children: (\n          <div className=\"d-flex align-items-center\">\n            {accounts.slice(0, maxShow).map((acc, index) => {\n              const imageSrc = getImage(acc);\n              const voteImg = votes[acc] === \"Approve\" ? approve : reject;\n              return (\n                <div\n                  style={{\n                    marginLeft: index > 0 ? \"-10px\" : 0,\n                    zIndex: maxIndex - index,\n                    position: \"relative\",\n                  }}\n                >\n                  <img\n                    src={imageSrc}\n                    height={40}\n                    width={40}\n                    className=\"rounded-circle\"\n                  />\n                  <img\n                    src={voteImg}\n                    height={20}\n                    style={\n                      isNearSocial\n                        ? { marginTop: 25, marginLeft: \"-20px\" }\n                        : { marginTop: \"-17px\", marginLeft: \"23px\" }\n                    }\n                  />\n                </div>\n              );\n            })}\n            {accounts.length > maxShow && (\n              <div\n                style={{ marginLeft: \"-10px\" }}\n                className=\"grey-circle rounded-circle d-flex justify-content-center align-items-center\"\n              >\n                +{accounts.length - maxShow}\n              </div>\n            )}\n          </div>\n        ),\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/treasury-devdao.near/widget/components.Approvers", "fact_widget_deployments_id": "8016b4c11a9fefbbe400a15ed7d242bf", "inserted_timestamp": "2024-08-27T22:54:57.200Z", "modified_timestamp": "2024-08-31T19:26:00.638Z", "__row_index": 2}