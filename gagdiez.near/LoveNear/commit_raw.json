{"tx_hash": "BZKJtcTwRDXkMhhaHuuL8ceP3bc4gAGAdZyaksYbckWg", "action_id_social": "4w9g9bZfFNB3ihbYvQVYgYEkMXWLBuSNtMDQCwFGz71a-0-widget", "block_id": 107133557, "block_timestamp": "2023-12-04T11:19:44.478Z", "signer_id": "gagdiez.near", "widget_name": "LoveNear", "source_code": "if (context.loading) return \"Loading ...\";\n\nconst elementToLike = \"I<3Near\";\n\nconst likes = Social.index(\"like\", elementToLike, { subscribe: true });\nconst userLike = context.accountId\n  ? Social.index(\"like\", elementToLike, {\n      accountId: context.accountId,\n      subscribe: true,\n    })\n  : [];\n\nlet dataLoading = likes === null || userLike === null;\n\nconst LikeButton = styled.button`\n  border: 0;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  color: #687076;\n  font-weight: 400;\n  font-size: 3rem;\n  line-height: 17px;\n  cursor: pointer;\n  background: none;\n  padding: 6px;\n  transition: color 200ms;\n\n  i {\n    font-size: 3rem;\n    transition: color 200ms;\n\n    &.bi-heart-fill {\n      color: #E5484D !important;\n    }\n  }\n`;\n\nconst Main = styled.div`\n  font-family: -apple-system, BlinkMacSystemFont, Segoe UI\n`;\n\nconst likeClick = () => {\n  const data = {\n    index: {\n      like: JSON.stringify({\n        key: elementToLike,\n        value: \"liked\",\n      }),\n    },\n  };\n\n  Social.set(data, {\n    onCommit: () => {\n      setHasLike(true);\n      setTotalLikes(likes.length + 1);\n    },\n    onCancel: () => {},\n  });\n};\n\nreturn (\n  <Main>\n    <div class=\"text-center\">\n      <h3 class=\"font-weight-bold\"> Welcome to Near </h3>\n\n      <div class=\"container py-3 text-dark bg-light rounded-3\">\n        <p class=\"small font-weight-light\">\n          You're gonna\n          <span class=\"text-danger\">like it</span>\n          here\n        </p>\n\n        <LikeButton\n          disabled={context.loading || dataLoading || !context.accountId}\n          onClick={likeClick}\n        >\n          <i\n            className={`${userLike.length > 0 ? \"bi-heart-fill\" : \"bi-heart\"}`}\n          />\n          {likes.length}\n        </LikeButton>\n      </div>\n    </div>\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gagdiez.near/widget/LoveNear", "fact_widget_deployments_id": "2e0cda87ac8226960bf82cef9f064107", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}