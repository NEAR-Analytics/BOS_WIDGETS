{"tx_hash": "8MK3qEhGdq2avuL5d7j1wd3xoipTwcsHjwHGQbWubEdk", "action_id_social": "5GtDYbBZWtUHvZXVqgSMm92rXn7hPpBFmANvtWbRFfQ6-0-widget", "block_id": 109244764, "block_timestamp": "2023-12-31T14:40:29.155Z", "signer_id": "gagdiez.near", "widget_name": "Darija.Knowledge.Create", "source_code": "if (context.loading) return \"Loading ...\";\n\nconst thash = props.transactionHashes;\nif (thash)\n  return <a href=\"/gagdiez.near/widget/Darija.Knowledge.List\"> Go back </a>;\n\nconst uuid = props.uuid;\nconst blockHeight = props.blockHeight;\n\nconst knowledgeDB = Social.get(\"gagdiez.near/knowledge\", blockHeight);\nconst parsed = JSON.parse(knowledgeDB);\n\nconst [title, setTitle] = useState(parsed.title);\nconst [knowledge, setKnowledge] = useState(parsed.knowledge);\n\nlet submit = () => {\n  if (!title) return;\n  const toString = JSON.stringify({\n    title,\n    knowledge,\n  });\n\n  Social.set({\n    knowledge: toString,\n    index: {\n      knowledge: JSON.stringify({\n        key: \"darija\",\n        value: { uuid, title },\n      }),\n    },\n  });\n};\n\nreturn (\n  <>\n    <div class=\"mb-3\">\n      <label for=\"title\">Title</label>\n      <input\n        type=\"text\"\n        placeholder={title}\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n      />\n    </div>\n    <Widget\n      src=\"gagdiez.near/widget/Darija.Components.Table\"\n      props={{\n        elements: knowledge,\n        keys: [\"darija\", \"spanish\", \"emoji\"],\n        editors: {\n          darija: { type: \"text\" },\n          spanish: { type: \"text\" },\n          emoji: { type: \"text\" },\n        },\n        onUpdate: setKnowledge,\n      }}\n    />\n\n    <button class=\"btn btn-success align-right\" onClick={submit}>\n      Submit\n    </button>\n  </>\n);\n", "metadata": {"fork_of": "gagdiez.near/widget/Darija.Knowledge.Create@109228258"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gagdiez.near/widget/Darija.Knowledge.Create", "fact_widget_deployments_id": "6662be06b3a16d27159097923eef6ac7", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 12}