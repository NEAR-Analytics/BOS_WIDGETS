{"tx_hash": "CbPCQGH18fbdTpUnp5rQnkfYjm3FHgNMzG1A4DvLQGzr", "action_id_social": "BrwCgYk92awFGCyjgqbYun3FhWA34bxvwN26JCj27wm8-0-widget", "block_id": 109228258, "block_timestamp": "2023-12-31T09:54:25.276Z", "signer_id": "gagdiez.near", "widget_name": "Darija.Knowledge.Create", "source_code": "if (context.loading) return \"Loading ...\";\n\nconst thash = props.transactionHashes;\nif (thash)\n  return <a href=\"/gagdiez.near/widget/Darija.Knowledge.List\"> Go back </a>;\n\nconst uuid = props.uuid;\nconst blockHeight = props.blockHeight;\n\nconst [title, setTitle] = useState(\"\");\nconst [knowledge, setKnowledge] = useState([]);\n\nif (blockHeight) {\n  const knowledgeDB = Social.get(\"gagdiez.near/knowledge\", blockHeight);\n  const { title, knowledge } = JSON.parse(knowledgeDB);\n  setTitle(title);\n  setKnowledge(knowledge);\n}\n\nconst submit = () => {\n  if (!title) return;\n\n  Social.set({\n    knowledge: JSON.stringify({\n      title,\n      knowledge,\n    }),\n    index: {\n      knowledge: JSON.stringify({\n        key: \"darija\",\n        value: { uuid, title },\n      }),\n    },\n  });\n};\n\nreturn (\n  <>\n    <div class=\"mb-3\">\n      <label for=\"title\">Title</label>\n      <input\n        type=\"text\"\n        placeholder={title}\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n      />\n    </div>\n    <Widget\n      src=\"gagdiez.near/widget/Darija.Components.Table\"\n      props={{\n        elements: knowledge,\n        keys: [\"darija\", \"spanish\", \"emoji\"],\n        editors: {\n          darija: { type: \"text\" },\n          spanish: { type: \"text\" },\n          emoji: { type: \"text\" },\n        },\n        onUpdate: setKnowledge,\n      }}\n    />\n\n    <button class=\"btn btn-success align-right\" onClick={submit}>\n      Submit\n    </button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gagdiez.near/widget/Darija.Knowledge.Create", "fact_widget_deployments_id": "1360c8b22033f812ff82d62b9cf27243", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 10}