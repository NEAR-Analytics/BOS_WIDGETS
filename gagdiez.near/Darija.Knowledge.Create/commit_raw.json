{"tx_hash": "5fjKsU12nqDLhBBrL4ZkobdyC6o4KH8MPrCf8hixoFFG", "action_id_social": "4LfVoNJDxiXuW2WJMaWgQrtai18A8o8ofBwszdpHPAik-0-widget", "block_id": 108942615, "block_timestamp": "2023-12-27T16:50:57.579Z", "signer_id": "gagdiez.near", "widget_name": "Darija.Knowledge.Create", "source_code": "const known = [\n  {\n    darija: \"smiya\",\n    spanish: \"nombre\",\n    emoji: \"\ud83d\udcac\",\n  },\n  {\n    darija: \"ktab\",\n    spanish: \"libro\",\n    emoji: \"\ud83d\udcd6\",\n  },\n  {\n    darija: \"medina\",\n    spanish: \"ciudad\",\n    emoji: \"\ud83c\udfd9\ufe0f\",\n  },\n  {\n    darija: \"tilifun\",\n    spanish: \"telefono\",\n    emoji: \"\ud83d\udcde\",\n  },\n  {\n    darija: \"mesha\",\n    spanish: \"gata\",\n    emoji: \"\ud83d\udc31\",\n  },\n];\n\nconst [darija, setDarija] = useState(\"\");\nconst [spanish, setSpanish] = useState(\"\");\nconst [emoji, setEmoji] = useState(\"\");\nconst [knowledge, setKnowledge] = useState(known);\nconst [hideInput, setHideInput] = useState(known.map(() => true));\nconst [title, setTitle] = useState(\"\");\n\nconst submit = () => {\n  const uuid = Date.now();\n  Social.set({\n    knowledge: JSON.stringify({\n      title, knowledge\n    }),\n    index: {\n      knowledge: JSON.stringify({\n        key: 'darija',\n        value: uuid\n      })\n    }\n  })\n}\n\nconst change = (index, field, value) => {\n  const newKnowledge = [...knowledge];\n  newKnowledge[index][field] = value;\n  setKnowledge(newKnowledge);\n};\n\nconst remove = (index) => {\n  const newKnowledge = [...knowledge];\n  newKnowledge.splice(index, 1);\n  setKnowledge(newKnowledge);\n};\n\nconst add = () => {\n  if (!darija || !spanish || !emoji) return;\n\n  const newKnowledge = [...knowledge];\n  newKnowledge.push({\n    darija,\n    spanish,\n    emoji,\n  });\n  setKnowledge(newKnowledge);\n  setDarija('');\n  setSpanish('');\n  setEmoji('');\n  setHideInput([...hideInput, true]);\n};\n\nreturn (\n  <>\n    <h3><input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} />  </h3>\n\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">Darija</th>\n          <th scope=\"col\">Espa\u00f1ol</th>\n          <th scope=\"col\">Emoji</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        {knowledge.map((elem, index) => {\n          return (\n            <tr>\n              <th scope=\"row\">{index + 1}</th>\n              <td>\n                {hideInput[index] && elem.darija}\n                <input\n                  value={elem.darija}\n                  onChange={(e) => change(index, \"darija\", e.target.value)}\n                  hidden={hideInput[index]}\n                />\n              </td>\n              <td>\n                {hideInput[index] && elem.spanish}\n                <input\n                  value={elem.spanish}\n                  onChange={(e) => change(index, \"spanish\", e.target.value)}\n                  hidden={hideInput[index]}\n                />\n              </td>\n              <td>\n                {hideInput[index] && elem.emoji}\n                <input\n                  value={elem.emoji}\n                  onChange={(e) => change(index, \"emoji\", e.target.value)}\n                  hidden={hideInput[index]}\n                />\n              </td>\n              <td>\n                <a\n                  className=\"me-1\"\n                  onClick={() => {\n                    setHideInput(\n                      hideInput.map((elem, i) => (i === index ? !elem : elem))\n                    );\n                  }}\n                >\n                  \u270f\ufe0f\n                </a>\n                <a onClick={() => remove(index)}>\ud83d\uddd1\ufe0f</a>\n              </td>\n            </tr>\n          );\n        })}\n        <tr>\n          <th scope=\"row\">#</th>\n          <td>\n            <input type=\"text\" onChange={(e) => setDarija(e.target.value)} />\n          </td>\n          <td>\n            <input type=\"text\" onChange={(e) => setSpanish(e.target.value)} />\n          </td>\n          <td>\n            <input type=\"text\" onChange={(e) => setEmoji(e.target.value)} />\n          </td>\n          <td>\n            <button class=\"btn btn-primary\" onClick={add}>Add</button>\n          </td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn btn-primary\" onClick={submit}>Submit</button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gagdiez.near/widget/Darija.Knowledge.Create", "fact_widget_deployments_id": "0736756c73ba80a58ef8654dd55809de", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}