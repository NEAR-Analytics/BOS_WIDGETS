{"tx_hash": "BRh6npoVTbSZPvYJuuwtHCfrnrEdzfA2JPcGQD8DXJQw", "action_id_social": "5rh1hJcSoaaPx1oZbtrkwxWN79Nh2T9X9jzoqGUozapQ-0-widget", "block_id": 109183563, "block_timestamp": "2023-12-30T21:04:41.183Z", "signer_id": "gagdiez.near", "widget_name": "Darija.Knowledge.Create", "source_code": "if (context.loading) return \"Loading ...\";\n\nconst thash = props.transactionHashes;\nif (thash)\n  return <a href=\"/gagdiez.near/widget/Darija.Knowledge.List\"> Go back </a>;\n\nconst uuid = props.uuid;\nconst blockHeight = props.blockHeight;\n\nconst [title, setTitle] = useState(\"\");\nconst [knowledge, setKnowledge] = useState([]);\nconst retrieved = Social.get(\"gagdiez.near/knowledge\", blockHeight);\n\nuseEffect(() => {\n  const { title, knowledge } = JSON.parse(retrieved);\n  setTitle(title);\n  setKnowledge(knowledge);\n}, [retrieved]);\n\nconst submit = () => {\n  if (!title) return;\n\n  Social.set({\n    knowledge: JSON.stringify({\n      title,\n      knowledge,\n    }),\n    index: {\n      knowledge: JSON.stringify({\n        key: \"darija\",\n        value: { uuid, title },\n      }),\n    },\n  });\n};\n\nreturn (\n  <>\n    <div class=\"mb-3\">\n      <label for=\"title\">Title</label>\n      <input\n        type=\"text\"\n        placeholder={title}\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n      />\n    </div>\n    <Widget\n      src=\"gagdiez.near/widget/Darija.Components.Table\"\n      props={{\n        elements: knowledge,\n        keys: [\"darija\", \"spanish\", \"emoji\"],\n        editors: {\n          darija: { type: \"text\" },\n          spanish: { type: \"text\" },\n          emoji: { type: \"text\" },\n        },\n        onUpdate: setKnowledge,\n      }}\n    />\n\n    <button class=\"btn btn-success align-right\" onClick={submit}>\n      Submit\n    </button>\n  </>\n);\n", "metadata": {"fork_of": "gagdiez.near/widget/Darija.Knowledge.Create@109165741"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gagdiez.near/widget/Darija.Knowledge.Create", "fact_widget_deployments_id": "d8776ec704d644d8e65346c4bffb3f52", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}