{"tx_hash": "4YCDbGnuUB3mmhnCSYatAHH4QtHiQAXj4C2hUqNrH3Hv", "action_id_social": "G7F9f8TPic6QLZzMkQaxRT9Qd49L9JhHBan8RygLRmsp-0-widget", "block_id": 95080364, "block_timestamp": "2023-06-26T14:29:17.896Z", "signer_id": "cavies.near", "widget_name": "DataProvider", "source_code": "// onLoad\nconst { onLoad, targetState, updateState } = props;\n\n// Define constants value\nconst API = \"https://prod-pocket-api.hamsterbox.xyz/api\";\nconst POCKET_ABI_URL =\n  \"https://raw.githubusercontent.com/CaviesLabs/hamsterpocket-assets/main/pocketchef.json\";\nconst WHITELIST_ENDPOINT = `${API}/whitelist`;\nconst LIST_POCKET_ENDPOINT = `${API}/pool/decimals-formatted?limit=1000&offset=0&chainId=bnb&statuses=POOL_STATUS%3A%3AACTIVE&statuses=POOL_STATUS%3A%3ACLOSED&sortBy=DATE_START_DESC`;\n\n// Define state reducer\nconst context = {\n  useState: (stateName, defaultValue) => {\n    if (!targetState[stateName]) {\n      updateState({\n        [stateName]: defaultValue,\n      });\n    }\n\n    return [\n      targetState[stateName] || defaultValue,\n      (value) => {\n        updateState({\n          [stateName]: value,\n        });\n      },\n    ];\n  },\n\n  // Define methods to be exposed\n  fetchPockets: (ownerAddress) => {\n    const [_, setPockets] = context.useState(\"pockets\", []);\n\n    return asyncFetch(\n      `${LIST_POCKET_ENDPOINT}&ownerAddress=${ownerAddress}`\n    ).then((result) => {\n      setPockets(result.body);\n      return result.body;\n    });\n  },\n\n  //\n};\n\n// emit data to parents component\nonLoad(context);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cavies.near/widget/DataProvider", "fact_widget_deployments_id": "e9354a92ad6ae7b5202418dbf185ace0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}