{"tx_hash": "HxAbek7bkc8gichYDYEG557FV1fjXuSYAvHga36EUZW7", "action_id_social": "5LDHaALFNZ2eVSaL2c58ACuSvbTQptbLCsgnGG9sfcnk-0-widget", "block_id": 99024103, "block_timestamp": "2023-08-17T15:57:57.759Z", "signer_id": "zavodil.near", "widget_name": "chainlist", "source_code": "let appName = \"chainlist\";\n\nlet data = {\n  [appName]: {\n    chains: {\n      [state.chain_id]: {\n        coingecko_id: state.coingecko_id,\n        name: state.name,\n        icon_svg: state.icon_svg,\n      },\n    },\n    contracts: {\n      [state.chain_id]: {\n        weth: state.weth,\n      },\n    },\n  },\n};\n\nconst getSvgImage = (svg) => {\n  if (!svg) return;\n\n  const buff = new Buffer(svg);\n  const base64data = buff.toString(\"base64\");\n\n  return (\n    <img\n      style={{ maxWidth: \"32px\" }}\n      class=\"img-thumbnail mt-2\"\n      src={`data:image/svg+xml;base64,${base64data}`}\n      alt=\"\"\n    />\n  );\n};\n\nconst load = () => {\n  State.update({\n    coingecko_id: null,\n    name: null,\n    icon_svg: null,\n    weth: null,\n  });\n\n  const chainId = state.chain_id;\n  if (!chainId) {\n    console.log(\"No chainId\");\n  }\n  const chainlistData = Social.get(\n    `zavodil.near/chainlist/*/${chainId}/**`,\n    \"final\"\n  );\n\n  State.update({\n    coingecko_id: chainlistData.chains[chainId].coingecko_id,\n    name: chainlistData.chains[chainId].name,\n    icon_svg: chainlistData.chains[chainId].icon_svg,\n    weth: chainlistData.contracts[chainId].weth,\n  });\n};\n\nreturn (\n  <div class=\"container\">\n    <div class=\"form-floating\">\n      <div class=\"mb-3\">\n        <label for=\"chainId\" class=\"form-label\">\n          Chain ID\n        </label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          value={state.chain_id}\n          onChange={(e) => State.update({ chain_id: e.target.value })}\n          id=\"chainId\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <input\n          type=\"button\"\n          class=\"form-control mw-200\"\n          onClick={() => load()}\n          disabled={!state.chain_id}\n          value=\"Load Data by Chain ID\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"coingeckoId\" class=\"form-label\">\n          Coingecko ID\n        </label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          value={state.coingecko_id}\n          onChange={(e) => State.update({ coingecko_id: e.target.value })}\n          id=\"coingeckoId\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">\n          Network name\n        </label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          value={state.name}\n          onChange={(e) => State.update({ name: e.target.value })}\n          id=\"name\"\n        />\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"icon_svg\" class=\"form-label\">\n          SVG Icon\n        </label>\n        <textarea\n          class=\"form-control\"\n          value={state.icon_svg}\n          onChange={(e) =>\n            State.update({\n              icon_svg: e.target.value\n                .replace(/\\t/g, \" \")\n                .replace(/\\n/g, \"\")\n                .replace(/\\s{2,}/g, \" \")\n                .replace(/\\> \\</g, \"><\"),\n            })\n          }\n          id=\"icon_svg\"\n        />\n        {state.icon_svg && <>{getSvgImage(state.icon_svg)}</>}\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"weth\" class=\"form-label\">\n          Weth Contract\n        </label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          value={state.weth}\n          onChange={(e) => State.update({ weth: e.target.value })}\n          id=\"weth\"\n        />\n      </div>\n\n      <div class=\"mb-3\">\n        <CommitButton disabled={!(state.chain_id && state.name)} data={data}>\n          Add a chain\n        </CommitButton>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/chainlist", "fact_widget_deployments_id": "b9a56c0204dbfaa370b567139fa93393", "inserted_timestamp": "2023-08-17T17:44:58.651Z", "modified_timestamp": "2023-08-17T17:44:58.651Z", "__row_index": 5}