{"tx_hash": "3Vnp8N572F8cdAW3zwDKBY4UaXfT8MxyNgA6ATSgTzPK", "action_id_social": "5yCLPmMMfoBMoKJvzssLjirrmELnxhDFXNUD3kDngMRj-0-widget", "block_id": 99316098, "block_timestamp": "2023-08-21T11:35:51.697Z", "signer_id": "zavodil.near", "widget_name": "PriceOracle.NearPrices", "source_code": "let keys = props.keys ?? [\n  \"wrap.near\",\n  \"aurora\",\n  \"2260fac5e5542a773aa44fbcfedf7c193bc2c599.factory.bridge.near\",\n  \"aaaaaa20d9e0e2461697782ef11675f668207961.factory.bridge.near\",\n];\n\nlet price_data = Near.view(\"priceoracle.near\", \"get_price_data\", {});\nif (!price_data) {\n  return \"\";\n}\n\nlet assets = Near.view(\"oracle-prices.near\", \"get_config\", { keys });\nif (!assets) {\n  return \"\";\n}\n\nlet price_data_prepared = [];\nprice_data.prices.map(\n  (data) => (price_data_prepared[data.asset_id] = data.price)\n);\n\nlet prices = assets.map((asset) => {\n  let asset_account_id = asset[0];\n  let asset_name = asset[1].token_name;\n  let asset_decimals = asset[1].decimals;\n\n  let asset_price = price_data_prepared[asset_account_id];\n  let price = new Big(asset_price.multiplier).div(\n    new Big(10).pow(asset_price.decimals - asset_decimals)\n  );\n\n  return (\n    <small class=\"col\">\n      {asset_name}:{\" \"}\n      {`${price\n        .toFixed(price.gt(new Big(1000)) ? 0 : price.gt(new Big(100)) ? 1 : 2)\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n      `}\n    </small>\n  );\n});\n\nreturn (\n  <div class=\"container\">\n    <h5>Priceoracle.near prices</h5>\n    <div class=\"row\">{prices}</div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/PriceOracle.NearPrices", "fact_widget_deployments_id": "b71afcad4067a794bc1c5bb34cfeebd9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}