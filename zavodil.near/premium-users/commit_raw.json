{"tx_hash": "4nEKAVumfGbiDu9Eexz4mUusYq5pjCh5puafstZDixGo", "action_id_social": "HCcWmymvQ9WCPTMcjUGeto4vnNYUGvrLXWqMRDGq9Ub9-0-widget", "block_id": 99254298, "block_timestamp": "2023-08-20T16:29:05.598Z", "signer_id": "zavodil.near", "widget_name": "premium-users", "source_code": "const data = Social.get(\n  \"premium.social.near/badge/premium/accounts/*\",\n  \"final\"\n);\n\nif (!data) return \"Loading\";\n\nconst now = Date.now();\nconst premiumUsers = Object.entries(data)\n  .filter((item) => item[1] >= now)\n  .sort((a, b) => {\n    if (a[1] < b[1]) return 1;\n    if (a[1] > b[1]) return -1;\n    return 0;\n  });\n\nconst getDate = (timestamp) => {\n  const dateObj = new Date(timestamp);\n\n  const day = dateObj.getDate();\n  const month = dateObj.toLocaleString(\"default\", { month: \"long\" });\n  const year = dateObj.getFullYear();\n\n  const nthNumber = (number) => {\n    if (number > 3 && number < 21) return \"th\";\n    switch (number % 10) {\n      case 1:\n        return \"st\";\n      case 2:\n        return \"nd\";\n      case 3:\n        return \"rd\";\n      default:\n        return \"th\";\n    }\n  };\n\n  return `${dateObj.getHours()}:${dateObj\n    .getMinutes()\n    .toString()\n    .padStart(2, \"0\")}, ${month} ${day}${nthNumber(day)}, ${year} `;\n};\n\nreturn (\n  <div>\n    <h1>\n      Premium Users\n      <a href=\"/zavodil.near/widget/subscribe\" target=\"_blank\">\n        <span className=\"badge bg-secondary fs-6 align-middle\">\n          Buy premium\n        </span>\n      </a>\n    </h1>\n    <table class=\"table table-sm\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">User</th>\n          <th scope=\"col\">Premium until</th>\n        </tr>\n      </thead>\n      <tbody>\n        {premiumUsers.map((item, i) => (\n          <tr>\n            <th scope=\"row\">{i + 1}</th>\n            <td>\n              <Widget\n                src=\"mob.near/widget/Profile.ShortInlineBlock\"\n                props={{ accountId: item[0], tooltip: true }}\n              />\n            </td>\n            <td>{getDate(Number(item[1]))}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n    <div class=\"alert alert-primary\" role=\"alert\">\n      Use{\" \"}\n      <a href=\"https://near.social/zavodil.near/widget/premium-users\">\n        https://near.social\n      </a>{\" \"}\n      to enable premium subscriptions\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/premium-users", "fact_widget_deployments_id": "b0d5cf6c27ce4f2254a5164c6557475d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}