{"tx_hash": "C2NoQbZ4gzrMdjmEP9QwXJXRGicoYAb1ijdZ1qT7ySaR", "action_id_social": "AkJrAjBJabrUGF4joZ38GtcGZ1mUFxoTq5yGX5Widsj9-0-widget", "block_id": 96996802, "block_timestamp": "2023-07-21T14:12:29.253Z", "signer_id": "zavodil.near", "widget_name": "unwrap-weth", "source_code": "const tokenId = \"0x4F9A0e7FD2Bf6067db6994CF12E4495Df938E6e9\";\nconst receiver = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nconst abiUrl =\n  \"https://eth.blockscout.com/api?module=contract&action=getabi&address=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\";\n\nconst abi = fetch(abiUrl);\n\nif (!abi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(abi.body.result);\n\nconst encodedBalanceData = iface.encodeFunctionData(\"balanceOf\", [receiver]);\n\nEthers.provider()\n  .call({\n    to: tokenId,\n    data: encodedBalanceData,\n  })\n  .then((rawBalance) => {\n    const receiverBalanceHex = iface.decodeFunctionResult(\n      \"balanceOf\",\n      rawBalance\n    );\n\n    State.update({\n      balance: Big(receiverBalanceHex).toFixed(),\n    });\n  });\n\nconst unwrap = (balance) => {\n  const wEthContract = new ethers.Contract(\n    tokenId,\n    abi.body.result,\n    Ethers.provider().getSigner()\n  );\n\n  wEthContract.withdraw(balance, {}).then((transactionHash) => {\n    onComplete(transactionHash);\n  });\n};\n\nif (!state.balance) {\n  return \"loading\";\n}\n\nreturn (\n  <div>\n    {new Big(state.balance).div(Big(10).pow(18)).toFixed()}\n    <hr />\n\n    <button onClick={() => unwrap(state.balance)}>UNWRAP</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/unwrap-weth", "fact_widget_deployments_id": "2a9a331db967ac4dea57b436e02d3bce", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 0}