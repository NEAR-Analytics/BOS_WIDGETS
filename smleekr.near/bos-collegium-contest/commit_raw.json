{"tx_hash": "7KLCGKyBdSg1QmkSAfYg4xFVhirttXLXUeRL9bKPqJmo", "action_id_social": "9NziFhptWRCkUgEbWHS4W29r7k6toL4kX4WSAB2UP4ZX-0-widget", "block_id": 101814806, "block_timestamp": "2023-09-24T01:33:33.458Z", "signer_id": "smleekr.near", "widget_name": "bos-collegium-contest", "source_code": "State.init({\n  chainId: 0,\n  count: 0,\n  message: \"\",\n  address: \"\",\n  tx: \"\",\n});\nconst messageContractAddress = \"0x5eCebd454e890b49e9a74B81205a8bE9Ce7601a3\";\nconst messageABI = [\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"sender\",\n        type: \"address\",\n      },\n      {\n        indexed: true,\n        internalType: \"string\",\n        name: \"receiver\",\n        type: \"string\",\n      },\n      {\n        indexed: false,\n        internalType: \"string\",\n        name: \"content\",\n        type: \"string\",\n      },\n    ],\n    name: \"MessageSent\",\n    type: \"event\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"user\",\n        type: \"address\",\n      },\n    ],\n    name: \"getInboxCount\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"user\",\n        type: \"address\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"index\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"getMessage\",\n    outputs: [\n      {\n        internalType: \"string\",\n        name: \"\",\n        type: \"string\",\n      },\n      {\n        internalType: \"string\",\n        name: \"\",\n        type: \"string\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"\",\n        type: \"address\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"inbox\",\n    outputs: [\n      {\n        internalType: \"address\",\n        name: \"sender\",\n        type: \"address\",\n      },\n      {\n        internalType: \"string\",\n        name: \"receiver\",\n        type: \"string\",\n      },\n      {\n        internalType: \"string\",\n        name: \"content\",\n        type: \"string\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"timestamp\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"string\",\n        name: \"receiver\",\n        type: \"string\",\n      },\n      {\n        internalType: \"string\",\n        name: \"content\",\n        type: \"string\",\n      },\n    ],\n    name: \"sendMessage\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\n\nif (Ethers.provider()) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\n\nconst sendMessage = async () => {\n  const messageContract = new ethers.Contract(\n    messageContractAddress,\n    messageABI,\n    Ethers.provider().getSigner()\n  );\n  messageContract\n    .sendMessage(state.address, state.message)\n    .then((transactionHash) => {\n      State.update({ tx: transactionHash.hash });\n    });\n};\n\nreturn (\n  <div style={{ textAlign: \"center\", fontSize: \"30px\" }}>\n    <div style={{ textAlign: \"center\", fontSize: \"30px\" }}>Message Sender</div>\n    <input\n      type=\"text\"\n      placeholder=\"Near Wallet Address\"\n      value={state.address}\n      style={{ margin: \"10px\" }}\n    />\n    <input\n      type=\"text\"\n      placeholder=\"Message\"\n      value={state.message}\n      style={{ margin: \"10px\" }}\n    />\n    <div>\n      <a href={\"https://sepolia.etherscan.io/tx/\" + { tx }}>{tx}</a>\n    </div>\n    <button onClick={sendMessage}>SEND</button>\n    <Web3Connect />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/smleekr.near/widget/bos-collegium-contest", "fact_widget_deployments_id": "8f13950aa4bcef8a59027737c3076735", "inserted_timestamp": "2023-09-24T03:18:52.235Z", "modified_timestamp": "2023-09-24T03:18:52.235Z", "__row_index": 14}