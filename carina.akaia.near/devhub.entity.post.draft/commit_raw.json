{"tx_hash": "HbfLoWjzNV5Fk3chvv6CoqxgKJjDoBbhPZVNs14j3Qkk", "action_id_social": "EsPzwLTywFCaKqedVcEAqv4DsWyHE8FGMMjCDcrd2qcg-0-widget", "block_id": 105388028, "block_timestamp": "2023-11-10T17:05:37.666Z", "signer_id": "carina.akaia.near", "widget_name": "devhub.entity.post.draft", "source_code": "const DRAFT_STATE_STORAGE_KEY = \"POST_DRAFT_STATE\";\nlet is_edit_or_add_post_transaction = false;\nlet transaction_method_name;\n\nif (props.transactionHashes) {\n  const transaction = fetch(\"https://rpc.mainnet.near.org\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      jsonrpc: \"2.0\",\n      id: \"dontcare\",\n      method: \"tx\",\n      params: [props.transactionHashes, context.accountId],\n    }),\n  });\n  transaction_method_name =\n    transaction?.body?.result?.transaction?.actions[0].FunctionCall.method_name;\n\n  is_edit_or_add_post_transaction =\n    transaction_method_name == \"add_post\" ||\n    transaction_method_name == \"edit_post\";\n\n  if (is_edit_or_add_post_transaction) {\n    Storage.privateSet(DRAFT_STATE_STORAGE_KEY, undefined);\n  }\n}\n\nconst onDraftStateChange = (draftState) =>\n  Storage.privateSet(DRAFT_STATE_STORAGE_KEY, JSON.stringify(draftState));\nlet draftState;\ntry {\n  draftState = JSON.parse(Storage.privateGet(DRAFT_STATE_STORAGE_KEY));\n} catch (e) {}\n\nreturn { DRAFT_STATE_STORAGE_KEY, draftState, onDraftStateChange };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/carina.akaia.near/widget/devhub.entity.post.draft", "fact_widget_deployments_id": "68a05ccd48307c52b73cf910fa747230", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}