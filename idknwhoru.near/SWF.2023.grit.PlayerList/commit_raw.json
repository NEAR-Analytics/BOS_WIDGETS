{"tx_hash": "g8e4aMcBhAxTo1CMgL5mD8bS1EBcw3Z8yWWQBu8SnLc", "action_id_social": "G3yLxwjFUccjjHqLBpTq88saNSQ8ZoseHE5ky7YCntNy-0-widget", "block_id": 97860680, "block_timestamp": "2023-08-01T19:19:05.367Z", "signer_id": "idknwhoru.near", "widget_name": "SWF.2023.grit.PlayerList", "source_code": "State.init({\n  mode: 0,\n  page: 0,\n});\n\nconst cronosContractAddress = \"0xBBF09A10B1B8f1825cAdB58d34E0672A9Ee69c2d\";\n\nconst cronosContractABI = [\n  {\n    type: \"function\",\n    stateMutability: \"view\",\n    outputs: [\n      {\n        type: \"tuple[]\",\n        name: \"\",\n        internalType: \"struct MyERC20.PlayerInfo[]\",\n        components: [\n          { type: \"address\", name: \"playerAddress\", internalType: \"address\" },\n          { type: \"string\", name: \"koreanName\", internalType: \"string\" },\n          { type: \"string\", name: \"englishName\", internalType: \"string\" },\n          { type: \"string\", name: \"birthDate\", internalType: \"string\" },\n          { type: \"string\", name: \"position\", internalType: \"string\" },\n          { type: \"string\", name: \"team\", internalType: \"string\" },\n          {\n            type: \"uint256\",\n            name: \"totalDonationAmount\",\n            internalType: \"uint256\",\n          },\n          { type: \"string\", name: \"photoUrl\", internalType: \"string\" },\n        ],\n      },\n    ],\n    name: \"getAllPlayers\",\n    inputs: [],\n  },\n];\n\nconst getAllPlayers = () => {\n  const cronosContract = new ethers.Contract(\n    cronosContractAddress,\n    cronosContractABI,\n    Ethers.provider()\n  );\n\n  cronosContract.getAllPlayers().then((players) => {\n    State.update({ players });\n  });\n};\n\nif (Ethers.provider()) {\n  if (state.players === undefined) {\n    getAllPlayers();\n  }\n  const signer = Ethers.provider().getSigner();\n  signer\n    .getAddress()\n    .then((address) => {\n      State.update({ address });\n    })\n    .catch((err) => {\n      console.log({ err });\n    });\n}\n\nconst Card = styled.div`\n    color: #fff;\n    width: Calc(25% - 15px);\n    height: 100%;\n    border: solid 1px #bbb;\n    border-radius: 12px;\n    cursor: pointer;\n    padding: 7px;\n    background-color: #fff;\n\n    img {\n      border: 1px solid;\n      border-radius: 14px;\n    }\n\n    h1 {\n      padding-left: 5px;\n      font-size: 16px;\n    }\n\n    .card-wrapper {\n      position: relative;\n      display: inline-block; \n      width: 100%;\n    }\n\n    .card-wrapper img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .player-info {\n      position: absolute;\n      bottom: 0%;\n      width: 100%;\n    }\n`;\n\nconst BSNWrapper = styled.div`\n    display: flex;\n    justify-content: space-between;\n    padding-right: 10px;\n\n    h2 {\n      font-size: 11px;\n      padding-left: 5px;\n      margin-left: 5px;\n    }\n\n    h3 {\n      font-size: 11px;\n    }\n`;\n\nconst PersonalWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-right: 10px;\n  border-top: 1px solid #fff;\n  height: 30px;\n  align-items: center;\n\n  h2 {\n    width: 50px;\n    height: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: solid 1px #E3DAFF;\n    background-color: #E3DAFF;\n    color: blue;\n    font-size: 11px;\n    border-radius: 30px;\n    margin: 0;\n    margin-left: 5px;\n  }\n\n  h3 {\n    font-size: 11px;\n    margin: 0;\n  }\n`;\n\nconst Cards = () => {\n  if (state.players !== undefined) {\n    const players =\n      state.mode === 0\n        ? state.players\n        : state.mode === 1\n        ? state.players.filter((player) => player[4] === \"\uacf5\uaca9\uc218\")\n        : state.mode === 2\n        ? state.players.filter((player) => player[4] === \"\uc218\ube44\uc218\")\n        : state.mode === 3\n        ? state.players.filter((player) => player[4] === \"\uace8\ud0a4\ud37c\")\n        : null;\n    return (\n      <div className=\"card-list-wrapper\">\n        {players.map((player, idx) => {\n          if (idx > 7) {\n            return null;\n          }\n          return (\n            <Card\n              onClick={() => {\n                State.update({ page: 2 });\n                State.update({\n                  player: {\n                    name: player[1],\n                    address: player[0],\n                    team: player[5],\n                    position: player[4],\n                    birthDate: player[3],\n                    photoUrl: player[7],\n                  },\n                });\n              }}\n            >\n              <div className=\"card-wrapper\">\n                <img src={player[7]}></img>\n                <div className=\"player-info\">\n                  <h1>{player[1]}</h1>\n                  <BSNWrapper>\n                    <h2>10 CRO</h2>\n                    <h3>{player[5]}</h3>\n                  </BSNWrapper>\n                  <PersonalWrapper>\n                    <h2>{player[4]}</h2>\n                    <h3>{player[3]}</h3>\n                  </PersonalWrapper>\n                </div>\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n    );\n  }\n};\n\nconst PlayListWrapper = styled.div`\n  .playlist-label {\n    margin-bottom: 40px;\n  }\n  .card-list-wrapper {\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 40px;\n    gap: 15px;\n  }\n`;\n\nconst SelectableButton = styled.button`\n  width: 110px;\n  height: 50px;\n  border: solid 1px #39324D;\n  border-radius: 30px;\n  background-color: #39324D;\n  color: #fff;\n\n  ${({ mode }) => {\n    return mode === state.mode\n      ? `\n      border: solid 1px #fff;\n      background-color: #fff;\n      color: #39324D;\n    `\n      : ``;\n  }}\n`;\n\nconst DetailPageWrapper = styled.div`\n    hr {\n        border-color: #fff;\n        opacity: 1\n    }\n\n    .plan-content-wrapper {\n        color: #000;\n    }\n\n    .nav-back {\n      padding: 15px;\n      font-size: 24px;\n      margin-bottom: 40px;\n      cursor: pointer;\n    }\n\n    .detail-card-wrapper {\n      display: flex;\n      justify-content: center;\n      margin-bottom: 40px;\n    }\n    `;\n\nreturn (\n  <>\n    {state.page === 0 ? (\n      <PlayListWrapper className=\"playlist-wrapper\">\n        <h1 className=\"playlist-label\">\ubaa8\ub450\uac00 \ud56b\ud55c \uc120\uc218</h1>\n        <SelectableButton\n          mode={0}\n          onClick={(_) => {\n            State.update({ mode: 0 });\n          }}\n        >\n          \uc804\uccb4\ubcf4\uae30\n        </SelectableButton>\n        <SelectableButton\n          mode={1}\n          onClick={(_) => {\n            State.update({ mode: 1 });\n          }}\n        >\n          \uacf5\uaca9\uc218\n        </SelectableButton>\n        <SelectableButton\n          mode={2}\n          onClick={(_) => {\n            State.update({ mode: 2 });\n          }}\n        >\n          \uc218\ube44\uc218\n        </SelectableButton>\n        <SelectableButton\n          mode={3}\n          onClick={(_) => {\n            State.update({ mode: 3 });\n          }}\n        >\n          \uace8\ud0a4\ud37c\n        </SelectableButton>\n        <Cards />\n      </PlayListWrapper>\n    ) : (\n      <DetailPageWrapper className=\"detail-player-wrapper\">\n        <h1\n          className=\"nav-back\"\n          onClick={() => {\n            State.update({ page: 0 });\n          }}\n        >\n          \ub3cc\uc544\uac00\uae30\n        </h1>\n        <div className=\"detail-card-wrapper\">\n          <Card>\n            <div className=\"card-wrapper\">\n              <img src={state.player.photoUrl}></img>\n              <div className=\"player-info\">\n                <h1>{state.player.name}</h1>\n                <BSNWrapper>\n                  <h2>10 CRO</h2>\n                  <h3>{state.player.team}</h3>\n                </BSNWrapper>\n                <PersonalWrapper>\n                  <h2>{state.player.position}</h2>\n                  <h3>{state.player.birthDate}</h3>\n                </PersonalWrapper>\n              </div>\n            </div>\n          </Card>\n        </div>\n        <Widget\n          src={`idknwhoru.near/widget/SWF.2023.grit.Player`}\n          props={{ player: state.player }}\n        />\n        <Widget\n          src={`idknwhoru.near/widget/SWF.2023.grit.Donate`}\n          props={{ player: state.player }}\n        />\n      </DetailPageWrapper>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/idknwhoru.near/widget/SWF.2023.grit.PlayerList", "fact_widget_deployments_id": "b2cf4fca80dc558b677445f0887ef677", "inserted_timestamp": "2023-08-01T21:23:15.404Z", "modified_timestamp": "2023-08-01T21:23:15.404Z", "__row_index": 40}