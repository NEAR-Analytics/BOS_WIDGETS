{"tx_hash": "E3iYVGrJMh2mLR23X441Y4Azx5eMD4MABCeGKdiH6QqF", "action_id_social": "FUxugbLNTEMtq7QNZzHtJr2wXVmxqaUHVnyGh9fEu8cf-0-widget", "block_id": 97791816, "block_timestamp": "2023-07-31T21:47:58.039Z", "signer_id": "idknwhoru.near", "widget_name": "SWF.2023.grit.Player", "source_code": "const player = props.player;\nconst list = [1, 10, 100];\n\nconst cronosContractAddress = \"0xCf10F98bA9044175a828462e991F48f01aF9BB73\";\n\nconst cronosContractABI = [\n  {\n    type: \"function\",\n    stateMutability: \"payable\",\n    outputs: [],\n    name: \"donate\",\n    inputs: [{ type: \"string\", name: \"player\", internalType: \"string\" }],\n  },\n];\n\nconst selectPrice = (price) => {\n  State.update({\n    price,\n  });\n};\n\nconst donate = (_) => {\n  const price = ethers.utils.parseEther(state.price.toString()).toString();\n\n  console.log(price);\n  const cronosContract = new ethers.Contract(\n    cronosContractAddress,\n    cronosContractABI,\n    Ethers.provider().getSigner()\n  );\n\n  cronosContract.donate(player, { value: price });\n};\n\nif (Ethers.provider()) {\n  const signer = Ethers.provider().getSigner();\n  signer\n    .getAddress()\n    .then((address) => {\n      State.update({ address });\n    })\n    .catch((err) => {\n      console.log({ err });\n    });\n}\n\nconst Card = styled.div`\n    width: 150px;\n    height: 200px;\n    border: solid 1px #bbb;\n    cursor: pointer;\n    background-color: ${(cardProps) =>\n      cardProps.price === state.price ? \"#bbb\" : \"#fff\"}\n`;\n\nconst Cards = () => {\n  if (player !== undefined) {\n    return (\n      <div style={{ display: \"flex\" }}>\n        {list.map((price) => (\n          <Card\n            price={price}\n            onClick={(_) => {\n              selectPrice(price);\n            }}\n          >\n            {price} CRO\n          </Card>\n        ))}\n      </div>\n    );\n  }\n};\n\nreturn (\n  <>\n    <Web3Connect connectLabel=\"Connect Wallet\" />\n    <h1>{player}</h1>\n    <button onClick={donate}>\ud6c4\uc6d0\ud558\uae30</button>\n    <Cards />\n  </>\n);\np;\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/idknwhoru.near/widget/SWF.2023.grit.Player", "fact_widget_deployments_id": "261c950bfa14c50d080d7580f312414b", "inserted_timestamp": "2023-07-31T23:14:30.643Z", "modified_timestamp": "2023-07-31T23:14:30.643Z", "__row_index": 0}