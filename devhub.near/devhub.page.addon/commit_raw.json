{"tx_hash": "65pRnmRzeRC53myqM7NmGn2rPKq3YC6HyA3NQQZ3YiM5", "action_id_social": "E7CRhGsGdHh91ChV45LmyoABz3gQjeX2sTZdNQnt8YQA-0-widget", "block_id": 122114121, "block_timestamp": "2024-06-27T15:36:57.421Z", "signer_id": "devhub.near", "widget_name": "devhub.page.addon", "source_code": "const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 0 1rem;\n\n  @media screen and (max-width: 960px) {\n    padding: 0 1rem;\n  }\n`;\n\nconst Content = styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow: auto;\n`;\n\nconst SettingsButton = styled.button`\n  position: absolute;\n  top: -100px;\n  right: 10px;\n\n  background-color: #fff;\n  display: flex;\n  padding: 14px 16px;\n  align-items: center;\n  gap: 16px;\n  width: 50px;\n  height: 50px;\n\n  border-radius: 4px;\n  border: 1px solid #00ec97;\n\n  z-index: 10;\n\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  &:hover {\n    transform: translateY(2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  }\n\n  &:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n`;\n\nconst CenteredMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${(p) => p.height ?? \"100%\"};\n`;\n\nconst { addon, permissions, handle, addonView, setAddonView } = props;\n\nconst { getAllAddons, setCommunityAddon } = VM.require(\n  \"devhub.near/widget/core.adapter.devhub-contract\"\n);\n\nif (!getAllAddons || !setCommunityAddon) {\n  return <p>Loading modules...</p>;\n}\n\nconst availableAddons = getAllAddons();\n\nlet addonMatch = null; // If availableAddons is not an array, set addonMatch to null\nif (\n  Array.isArray(availableAddons) &&\n  availableAddons !== null &&\n  availableAddons !== undefined\n) {\n  addonMatch = availableAddons.find((it) => it.id === addon.addon_id);\n}\n\nif (!addonMatch) {\n  return (\n    <CenteredMessage height={\"384px\"}>\n      <h2>Addon with id: \"{addon.addon_id}\" not found.</h2>\n    </CenteredMessage>\n  );\n}\n\nconst config = JSON.parse(addon.parameters || \"null\");\n\nconst ButtonRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst BannerWrapper = styled.div`\n  background-color: #ffd2d2;\n  .text-sm {\n    font-size: 13px;\n  }\n`;\n\nif (\"devhub.near\" !== \"devhub.near\") {\n  addonMatch.configurator_widget = addonMatch.configurator_widget.replace(\n    \"devhub.near/\",\n    \"devhub.near/\"\n  );\n  addonMatch.view_widget = addonMatch.view_widget.replace(\n    \"devhub.near/\",\n    \"devhub.near/\"\n  );\n}\n\nreturn (\n  <Container>\n    {permissions.can_configure && addonMatch.configurator_widget !== \"\" && (\n      <SettingsButton\n        onClick={() =>\n          setAddonView(addonView === \"configure\" ? \"viewer\" : \"configure\")\n        }\n        aria-label={\n          addonView === \"configure\"\n            ? \"Close configuration\"\n            : \"Open configuration\"\n        }\n      >\n        {addonView === \"configure\" ? (\n          <span\n            className=\"bi bi-x\"\n            data-testid=\"configure-addon-button-x\"\n          ></span>\n        ) : (\n          <span\n            className=\"bi bi-gear\"\n            data-testid=\"configure-addon-button\"\n          ></span>\n        )}\n      </SettingsButton>\n    )}\n    {permissions.can_configure && config === null ? (\n      <BannerWrapper className=\"d-flex gap-3 align-items-center mb-4 p-3 rounded-3\">\n        <div>\n          <i class=\"bi bi-exclamation-triangle-fill\"></i>\n        </div>\n        <div>\n          <div className=\"fw-bold\">Addon Misconfiguration</div>\n          <div className=\"text-sm\">\n            It appears that this addon is missing some required parameters.\n            Please contact a DevHub administrator for assistance.\n          </div>\n        </div>\n      </BannerWrapper>\n    ) : null}\n    <Content>\n      {addonView === \"configure\" ? (\n        <Widget\n          src={addonMatch.configurator_widget}\n          props={{\n            ...config,\n            data: config,\n            onSubmit: (data) => {\n              setCommunityAddon({\n                handle,\n                addon: {\n                  ...addon,\n                  parameters: JSON.stringify(data),\n                },\n              });\n            },\n            handle, // this is temporary prop drilling until kanban and github are migrated\n            permissions,\n            communityAddonId: addon.id,\n          }}\n        />\n      ) : (\n        <Widget\n          src={addonMatch.view_widget}\n          props={{\n            ...config,\n            data: config,\n            handle,\n            permissions,\n            transactionHashes: props.transactionHashes,\n            communityAddonId: addon.id,\n            setAddonView,\n          }}\n        />\n      )}\n    </Content>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devhub.near/widget/devhub.page.addon", "fact_widget_deployments_id": "a9e531a25b50ee37f10710795f4ea9a9", "inserted_timestamp": "2024-06-27T16:54:28.525Z", "modified_timestamp": "2024-06-27T16:54:28.525Z", "__row_index": 15}