{"tx_hash": "65pRnmRzeRC53myqM7NmGn2rPKq3YC6HyA3NQQZ3YiM5", "action_id_social": "E7CRhGsGdHh91ChV45LmyoABz3gQjeX2sTZdNQnt8YQA-0-widget", "block_id": 122114121, "block_timestamp": "2024-06-27T15:36:57.421Z", "signer_id": "devhub.near", "widget_name": "devhub.entity.addon.blogv2.Page", "source_code": "const { href } = VM.require(\"devhub.near/widget/core.lib.url\") || {\n  href: () => {},\n};\nconst httpbin = fetch(`https://httpbin.org/headers`);\n\nconst { getCommunity } = VM.require(\n  \"devhub.near/widget/core.adapter.devhub-contract\"\n) || {\n  getCommunity: () => {},\n};\nconst imagelink =\n  \"https://ipfs.near.social/ipfs/bafkreiajzvmy7574k7mp3if6u53mdukfr3hoc2kjkhjadt6x56vqhd5swy\";\n\nconst { data, onEdit, community: handle, isAllowedToEdit } = props;\n\nconst {\n  category,\n  title,\n  description,\n  subtitle,\n  publishedAt: date,\n  content,\n  author,\n  communityAddonId,\n} = data;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  padding: 0 3rem;\n  margin-bottom: 2rem;\n  position: relative;\n  ${category &&\n  `\n    span.category {\n      color: ${\n        category.toLowerCase() === \"news\"\n          ? \"#F40303\"\n          : category.toLowerCase() === \"guide\"\n          ? \"#004BE1\"\n          : category.toLowerCase() === \"reference\" && \"#FF7A00\"\n      };\n      font-size: 1.5rem;\n      font-style: normal;\n      font-weight: 700;\n      line-height: 20px; /* 125% */\n      text-transform: uppercase;\n    }\n    `}\n\n  div.date {\n    color: #818181;\n    font-size: 1rem;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 20px; /* 125% */\n    margin: 1.5rem 0;\n    width: 100%;\n  }\n\n  h1 {\n    color: #151515;\n    font-size: 3.5rem;\n    font-style: normal;\n    font-weight: 700;\n    line-height: 100%; /* 88px */\n    margin: 1.5rem 0;\n  }\n\n  p.subtitle {\n    color: #555;\n    font-size: 1.5rem;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 110%; /* 35.2px */\n    margin: 0;\n  }\n\n  .edit-icon {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    cursor: pointer;\n  }\n\n  .share-icon {\n    position: absolute;\n    top: 25px;\n    right: 55px;\n    cursor: pointer;\n  }\n\n  @media screen and (max-width: 768px) {\n    padding: 0 1rem;\n\n    span.category {\n      font-size: 0.75rem;\n    }\n\n    h1 {\n      font-size: 2rem;\n    }\n\n    p.subtitle {\n      font-size: 1rem;\n    }\n  }\n`;\n\nconst BackgroundImage = styled.img`\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  margin-bottom: 1rem;\n`;\n\nif (!handle) {\n  return <div>Community handle not found</div>;\n}\n\nconst community = getCommunity({ handle: handle });\n\nlet communityConfig = (community.addons || []).find(\n  (addon) => addon.id === communityAddonId\n);\n\nif (communityConfig === undefined) {\n  return <div>Community addon not found</div>;\n}\nconst parameters = JSON.parse(communityConfig.parameters || {}) || {};\n\n// Make sure only the categories that are configured in the settings are displayed.\nlet categoryIsOptionInSettings = true;\nlet categoriesInSettings = (parameters?.categories || []).map((c) => c.value);\nif (\n  categoriesInSettings.length > 0 &&\n  !categoriesInSettings.includes(category) &&\n  category !== \"\" &&\n  category !== null\n) {\n  categoryIsOptionInSettings = false;\n}\n\nconst options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\nconst formattedDate = new Date(date).toLocaleString(\"en-US\", options);\n\nreturn (\n  <>\n    <BackgroundImage src={imagelink} />\n    <Container>\n      <Widget\n        src=\"devhub.near/widget/devhub.components.molecule.ShareButton\"\n        props={{\n          className: \"share-icon\",\n          size: \"35px\",\n          postType: \"blog\",\n          externalLink: href({\n            gateway: httpbin?.body?.headers?.Origin.slice(8) ?? \"near.social\",\n            widgetSrc: \"devhub.near/widget/app\",\n            params: {\n              page: \"blogv2\",\n              community: community.handle,\n              id: data.id,\n            },\n          }),\n        }}\n      />\n      {isAllowedToEdit && (\n        <div className=\"edit-icon\" onClick={onEdit}>\n          <div class=\"bi bi-pencil-square\" style={{ fontSize: \"30px\" }}></div>\n        </div>\n      )}\n      {category &&\n        parameters.categoriesEnabled === \"enabled\" &&\n        categoryIsOptionInSettings && (\n          <span className=\"category\" data-testid=\"blog-category\">\n            {category}\n          </span>\n        )}\n      <h1 data-testid=\"blog-title\">{title}</h1>\n      <p className=\"subtitle\">{subtitle}</p>\n      <div className=\"d-flex flex-row justify-content-between date\">\n        {author && parameters.authorEnabled !== \"disabled\" && (\n          <div data-testid=\"blog-author\">{author}</div>\n        )}\n        <div data-testid=\"blog-date\">{formattedDate}</div>\n      </div>\n      <p>{description}</p>\n      <Widget\n        src={\"devhub.near/widget/devhub.components.molecule.MarkdownViewer\"}\n        props={{ text: content }}\n      />\n    </Container>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devhub.near/widget/devhub.entity.addon.blogv2.Page", "fact_widget_deployments_id": "b98bceb5a8ebd6c68b1b0885d1a471b5", "inserted_timestamp": "2024-06-27T16:54:28.525Z", "modified_timestamp": "2024-06-27T16:54:28.525Z", "__row_index": 0}