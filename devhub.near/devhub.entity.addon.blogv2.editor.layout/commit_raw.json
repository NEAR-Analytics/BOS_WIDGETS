{"tx_hash": "65pRnmRzeRC53myqM7NmGn2rPKq3YC6HyA3NQQZ3YiM5", "action_id_social": "E7CRhGsGdHh91ChV45LmyoABz3gQjeX2sTZdNQnt8YQA-0-widget", "block_id": 122114121, "block_timestamp": "2024-06-27T15:36:57.421Z", "signer_id": "devhub.near", "widget_name": "devhub.entity.addon.blogv2.editor.layout", "source_code": "const {\n  BlogOverview,\n  data: processedBlogData,\n  Content,\n  onSubmit,\n  BlogPostSettings,\n  selectedBlog,\n} = props;\n\nconst [selectedItem, setSelectedItem] = useState(\n  selectedBlog ? selectedBlog : null\n);\nconst [selectedItemChanged, setSelectedItemChanged] = useState(false);\n\nconst [showScreen, setShowScreen] = useState(\n  selectedBlog ? \"editor\" : \"overview\"\n); // overview, editor, settings\n\nconst openBlogPostSettings = () => {\n  setShowScreen(true);\n};\n\nconst [isSwitchBlogModalOpen, setIsSwitchBlogModalOpen] = useState(false);\n\n// This function checks for unsaved changes and shows a modal if there are any\nconst checkForUnsavedChanges = (item) => {\n  const unsavedChanges = selectedItemChanged;\n  // If the user has edited show the confirm modal otherwise just switch\n  if (unsavedChanges) {\n    setIsSwitchBlogModalOpen(item);\n  } else {\n    handleItemClick(item);\n  }\n};\n\n// This function\nconst handleItemClick = (item) => {\n  if (item) {\n    setSelectedItem(item);\n    setShowScreen(\"editor\");\n  } else {\n    setSelectedItem(null);\n  }\n  setSelectedItemChanged(false);\n};\n\nconst goBack = () => {\n  setSelectedItem(null);\n  setShowScreen(\"overview\");\n  setSelectedItemChanged(false);\n};\n\nconst postHogHref = \"https://eu.posthog.com/project/20896\";\n\nreturn (\n  <div style={{ width: \"100%\", height: \"100%\" }}>\n    {showScreen === \"settings\" ? (\n      <BlogPostSettings onHideSettings={() => setShowScreen(\"overview\")} />\n    ) : (\n      <>\n        {showScreen === \"editor\" ? null : (\n          <div className=\"flex items-center justify-between w-100 mb-4\">\n            <div className=\"text-xl font-bold\">Blog Posts</div>\n            <div className=\"flex items-end justify-end gap-x-3\">\n              <Link\n                className=\"rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm\"\n                href={postHogHref}\n                target=\"_blank\"\n                style={{ backgroundColor: \"rgb(104, 112, 118)\" }}\n              >\n                Analytics\n              </Link>\n\n              <Widget\n                src={\n                  \"devhub.near/widget/devhub.components.molecule.BlogControl\"\n                }\n                props={{\n                  title: \"Settings\",\n                  color: \"rgb(104, 112, 118)\",\n                  onClick: () => setShowScreen(\"settings\"),\n                  testId: \"settings-button\",\n                  icon: \"bi-gear-fill\",\n                }}\n              />\n              <Widget\n                src={\n                  \"devhub.near/widget/devhub.components.molecule.BlogControl\"\n                }\n                props={{\n                  title: \"New Blog Post\",\n                  onClick: () => {\n                    handleItemClick(\"new\");\n                    setShowScreen(\"editor\");\n                  },\n                  icon: \"bi-plus-circle-fill\",\n                  testId: \"new-blog-post-button\",\n                }}\n              />\n            </div>\n          </div>\n        )}\n        <div\n          className=\"template\"\n          style={{ display: \"flex\", width: \"100%\", height: \"100%\" }}\n        >\n          <div\n            className=\"left-panel\"\n            style={{\n              width: showScreen === \"editor\" ? \"20%\" : \"100%\",\n            }}\n          >\n            <BlogOverview\n              selectedItem={selectedItem}\n              handleItemClick={checkForUnsavedChanges}\n              hideColumns={showScreen === \"editor\"}\n            />\n            <Widget\n              src={\n                \"devhub.near/widget/devhub.entity.addon.blogv2.editor.ConfirmModal\"\n              }\n              props={{\n                isOpen: isSwitchBlogModalOpen,\n                onCancelClick: () => setIsSwitchBlogModalOpen(false),\n                onConfirmClick: () => {\n                  handleItemClick(isSwitchBlogModalOpen);\n                  setIsSwitchBlogModalOpen(false);\n                },\n                title: \"Are you sure you want to continue?\",\n                content: \"Unsaved changes will be lost.\",\n                confirmLabel: \"Continue\",\n                cancelLabel: \"Cancel\",\n                buttonRoot: \"btn-danger\",\n              }}\n            />\n          </div>\n          {showScreen === \"editor\" && (\n            <div\n              className=\"right-panel\"\n              style={{ flex: 1, width: 0, overflow: \"scroll\" }}\n              key={selectedItem.id}\n            >\n              <Content\n                data={selectedItem}\n                onCancel={goBack}\n                setSelectedItemChanged={setSelectedItemChanged}\n              />\n            </div>\n          )}\n        </div>\n      </>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devhub.near/widget/devhub.entity.addon.blogv2.editor.layout", "fact_widget_deployments_id": "a5ae529998b5291165c8e42805496b36", "inserted_timestamp": "2024-06-27T16:54:28.525Z", "modified_timestamp": "2024-06-27T16:54:28.525Z", "__row_index": 1}