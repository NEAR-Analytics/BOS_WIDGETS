{"tx_hash": "bk6SaSkzTPt8hZediG4kMUpKozV3TZ2w4fkccFyuvjP", "action_id_social": "BHTx9UyYV5gKDoopogAttpbe1rurkgAYrdv2RJbWHW3D-0-widget", "block_id": 104356635, "block_timestamp": "2023-10-28T02:19:20.446Z", "signer_id": "taein.near", "widget_name": "NYC.OpenData.Communities", "source_code": "const data = fetch(\"https://data.cityofnewyork.us/resource/knr6-vurn.json\");\n\nif (!data) {\n  return <p>Loading...</p>;\n}\n\nconst [latestAccident, setLatestAccident] = useState({});\n\nuseEffect(() => {\n  if (data && data.length) {\n    let latest = data[0];\n    for (let i = 1; i < data.length; i++) {\n      if (data[i].date > latest.date) {\n        latest = data[i];\n      }\n    }\n    setLatestAccident(latest);\n  }\n}, [data]);\n\nconst Container = styled.div`\n  margin: 20px;\n  padding: 20px;\n  border: 1px solid #ccc;\n  height: 220px; /* \uc608\uc2dc\ub85c 400px\uc744 \uc0ac\uc6a9\ud588\uc73c\ub098 \uc6d0\ud558\ub294 \ub192\uc774\ub85c \uc870\uc808 \uac00\ub2a5\ud569\ub2c8\ub2e4. */\n  overflow: hidden;\n`;\n\nconst OrganizationName = styled.h2`\n  font-size: 1.5rem;\n`;\n\nconst Mission = styled.div`\n  margin-top: 10px;\n`;\n\nconst VolunteerProgramDescription = styled.p`\n  margin-top: 10px;\n`;\n\nconst Address = styled.p`\n  margin-top: 10px;\n`;\n\nconst Website = styled.a`\n  margin-top: 10px;\n  display: block;\n`;\n\nconst boroughFrequency = {};\n\nObject.entries(data).forEach(([key, org]) => {\n  if (boroughFrequency[org.borough]) {\n    boroughFrequency[org.borough]++;\n  } else {\n    boroughFrequency[org.borough] = 1;\n  }\n});\n\nconst formatDate = (isoString) => {\n  const date = new Date(isoString);\n  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(\n    2,\n    \"0\"\n  )}-${String(date.getDate()).padStart(2, \"0\")}`;\n};\n\nconst OrganizationCard = ({ organization, index }) => {\n  return (\n    <>\n      <Container>\n        <div key={index}>\n          Area\n          <OrganizationName>{organization.borough}</OrganizationName>\n          <Mission\n            dangerouslySetInnerHTML={{ __html: formatDate(organization.date) }}\n          />\n          <VolunteerProgramDescription>\n            {formatDate(organization.date)}\n          </VolunteerProgramDescription>\n          <h6>Reason</h6>\n          <Address>{organization.contributing_factors}</Address>\n          <Website\n            href={organization.website.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {organization.website.url}\n          </Website>\n        </div>\n      </Container>\n    </>\n  );\n};\n\nconst renderItem = (a, index) => {\n  return (\n    <div key={JSON.stringify(a)}>\n      <OrganizationCard organization={a} index={index} />\n    </div>\n  );\n};\n\nreturn (\n  <div>\n    <img\n      src=\"https://www.empirecenter.org/wp-content/uploads/2023/03/Lower-Manhattan-skyline.jpg\"\n      alt=\"Description\"\n      style={{ width: \"100%\", display: \"block\" }}\n    />\n\n    {/* \uc0c1\ub2e8\ubc14 */}\n    <div\n      style={{\n        backgroundColor: \"black\",\n        height: \"50px\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      The Number of Car Accidents in New York City\n    </div>\n\n    {/* \ud1b5\uacc4 \uc815\ubcf4 */}\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        padding: \"20px\",\n      }}\n    >\n      <div\n        style={{ width: \"45%\", border: \"1px solid #e0e0e0\", padding: \"10px\" }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            marginBottom: \"20px\",\n          }}\n        >\n          <span>Top Accidents Area</span>\n          <span style={{ color: \"green\" }}>New York City</span>\n        </div>\n        <div style={{ fontSize: \"24px\", marginBottom: \"10px\" }}>Manhattan</div>\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n          <span style={{ color: \"blue\" }}>Counts</span>\n          <span style={{ color: \"red\" }}>Latest</span>\n        </div>\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n          <span>103</span>\n          <span>2022-12-02</span>\n        </div>\n      </div>\n\n      {/* Total Savings */}\n      <div\n        style={{ width: \"45%\", border: \"1px solid #e0e0e0\", padding: \"20px\" }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            marginBottom: \"20px\",\n          }}\n        >\n          <span>Latest Accident</span>\n          <span style={{ color: \"green\" }}>2022-12-02</span>\n        </div>\n        <div style={{ fontSize: \"24px\", marginBottom: \"10px\" }}>Manhattan</div>\n        <h6>Reason</h6>\n        vehicle 2 not paying attention\n        {/* Bar chart representation (simplified) */}\n      </div>\n    </div>\n\n    <div\n      style={{\n        backgroundColor: \"black\",\n        height: \"50px\",\n        color: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      Car Accident History\n    </div>\n\n    <Widget\n      src=\"efiz.near/widget/ItemFeed\"\n      props={{ items: data.body || [], renderItem }}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/taein.near/widget/NYC.OpenData.Communities", "fact_widget_deployments_id": "7491e3f025e520cbc2e8ae6f11efb59d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}