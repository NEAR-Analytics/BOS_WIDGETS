{"tx_hash": "BWUN1ehudQqy2wdeqbW3oSL8HtxYSAhCqDqcKRCLENpF", "action_id_social": "EdjEbPTWud6iXmC1KQZsAkDi9abuHXXoauTX4P4y9Hee-0-widget", "block_id": 111554585, "block_timestamp": "2024-01-28T21:22:25.500Z", "signer_id": "ankit2866.near", "widget_name": "newcalender", "source_code": "const events = props.events || [];\r\nconst dateToView = props.date || new Date();\r\n\r\nconst srcData = `\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>\r\n    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>\r\n    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.js'></script>\r\n    <script>\r\n      document.addEventListener('DOMContentLoaded', function() {\r\n        const calendarEl = document.getElementById('calendar')\r\n        const calendar = new FullCalendar.Calendar(calendarEl, {\r\n          titleFormat: { year: 'numeric', month: 'long', },\r\n          themeSystem: 'bootstrap5',\r\n          initialView: 'dayGridMonth',\r\n          editable: true,\r\n          firstDay: 1,\r\n          buttonText: {\r\n            month: \"Month\",\r\n            list: \"List\",\r\n          },\r\n          customButtons: {\r\n            filterBy: {\r\n              text: 'Filter by',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"filter\"}), '*');\r\n              }\r\n            },\r\n            addEvent: {\r\n              text: '',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"add-event\"}), '*');\r\n              }\r\n            },\r\n            // Add a custom button here\r\n            customButton: {\r\n              text: 'Custom Button',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"custom-button\"}), '*');\r\n              }\r\n            }\r\n          },\r\n          expandRows: true,\r\n          headerToolbar: {\r\n            start: 'title prev,next dayGridMonth list', // will normally be on the left. if RTL, will be on the right\r\n            center: '',\r\n            // end: 'timeGridDay list' \r\n            end: 'filterBy addEvent customButton' \r\n          },\r\n          navLinks: true,\r\n          events: ${JSON.stringify(events)},\r\n          eventClick: function(info) {\r\n            info.jsEvent.preventDefault(); // don't let the browser navigate\r\n            // Post the event details to the parent window\r\n            window.parent.postMessage(JSON.stringify({ handler: \"event-click\", data: info.event }), '*');\r\n          },\r\n\r\n          // Render the custom button with an icon\r\n          viewDidMount: function () {\r\n            var addEvent = document.querySelector('.fc-addEvent-button');\r\n            addEvent.innerHTML = 'Add Event <i class=\"bi bi-plus-circle-fill\" style=\"color: white; margin-left: 2px;\"></i>';\r\n        \r\n          }\r\n        })\r\n        calendar.render()\r\n        calendar.gotoDate(new Date(${JSON.stringify(dateToView)}))\r\n      })\r\n    </script>\r\n  </head>\r\n  <body>\r\n    <div id='calendar'></div>\r\n  </body>\r\n</html>\r\n`;\r\n\r\nreturn (\r\n  <>\r\n    <iframe\r\n      srcDoc={srcData}\r\n      onMessage={(data) => {\r\n        const dataObj = JSON.parse(data);\r\n        switch (dataObj.handler) {\r\n          case \"filter\": {\r\n            if (props.handleFilter) {\r\n              props.handleFilter();\r\n            }\r\n            break;\r\n          }\r\n          case \"add-event\": {\r\n            if (props.handleAddEvent) {\r\n              props.handleAddEvent();\r\n            }\r\n            break;\r\n          }\r\n          case \"event-click\": {\r\n            if (props.handleEventClick) {\r\n              props.handleEventClick(dataObj.data);\r\n            }\r\n            break;\r\n          }\r\n          // Handle the new custom button action\r\n          case \"custom-button\": {\r\n            if (props.handleCustomButton) {\r\n              props.handleCustomButton();\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }}\r\n      style={{\r\n        height: \"100vh\",\r\n        width: \"100%\",\r\n      }}\r\n    />\r\n  </>\r\n);\r\n", "metadata": {"fork_of": "itexpert120-contra.near/widget/Calendar@101479070"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ankit2866.near/widget/newcalender", "fact_widget_deployments_id": "1b2922a85d3626265d3a3909cf6b1f45", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}