{"tx_hash": "65sVFaqwewpW4gXhaVqLq4Bw3Pj767STVrqWw6ibcK6r", "action_id_social": "BLS333Vpnbw9YMW5QFbdtGHNPLdCZvWbJtvAKP35eCv5-0-widget", "block_id": 104249841, "block_timestamp": "2023-10-26T14:04:03.962Z", "signer_id": "magicbuild.near", "widget_name": "export-button", "source_code": "State.init({\r\n  cMethod: props.cMethod,\r\n  widgetName: props.widgetName || `MagicBuild-widget-form-${Date.now()}`,\r\n  clicked: false,\r\n  export: false,\r\n});\r\nconst onSwitchChangeArgExport = (fIndex) => {\r\n  const abiMethod = state.cMethod;\r\n  abiMethod[fIndex].export = !abiMethod[fIndex].export;\r\n  State.update({ cMethod: abiMethod });\r\n  State.update({ clicked: false });\r\n  State.update({ export: false });\r\n};\r\nconst onInputChangeWidgetName = ({ target }) => {\r\n  State.update({ widgetName: target.value.replaceAll(\" \", \"-\") });\r\n  State.update({ clicked: false });\r\n  State.update({ export: false });\r\n};\r\n\r\nconst openModal = () => {\r\n  State.update({ clicked: false });\r\n  State.update({ export: false });\r\n};\r\nconst exportForm = () => {\r\n  if (!state.clicked) {\r\n    State.update({ clicked: true });\r\n    const abi = {\r\n      schema_version: \"0.3.0\",\r\n      address: props.contractAddress,\r\n      metadata: {\r\n        name: \"\",\r\n        version: \"0.1.0\",\r\n        authors: [\"\"],\r\n      },\r\n      body: {\r\n        functions: [],\r\n      },\r\n    };\r\n\r\n    const abiMethod = state.cMethod;\r\n    abiMethod.forEach((item) => {\r\n      abi.body.functions.push(item);\r\n    });\r\n    const exportListData = Social.get(\r\n      `${context.accountId}/magicbuild/exportList`\r\n    );\r\n    const exporttList = JSON.parse(exportListData) || [];\r\n    const isExist = false;\r\n    exporttList.forEach((item, index) => {\r\n      if (item.widgetName == state.widgetName) {\r\n        exporttList[index].widgetName = state.widgetName;\r\n        isExist = true;\r\n      }\r\n    });\r\n    if (!isExist) {\r\n      exporttList.push({ widgetName: state.widgetName });\r\n    }\r\n\r\n    const data = {\r\n      widget: {\r\n        [state.widgetName]: {\r\n          \"\":\r\n            \"const user = context.accountId;\\r\\nconst props = \" +\r\n            JSON.stringify(abi).replaceAll(\"\\\\\", \"\") +\r\n            \" \\r\\n\\r\\nreturn (\\r\\n  <>\\r\\n    <Widget src={'magicbuild.near/widget/widget'} props={props} />\\r\\n  </>\\r\\n);\\r\\n\",\r\n        },\r\n      },\r\n      widgetList: exporttList,\r\n    };\r\n    Social.set(data, {\r\n      force: true,\r\n      onCommit: () => {\r\n        State.update({ export: true });\r\n      },\r\n      onCancel: () => {},\r\n    });\r\n  }\r\n};\r\nreturn (\r\n  <>\r\n    <label></label>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/magicbuild.near/widget/export-button", "fact_widget_deployments_id": "7693cad2abf4506c12987782e5b24c98", "inserted_timestamp": "2023-10-26T15:51:17.725Z", "modified_timestamp": "2023-10-26T15:51:17.725Z", "__row_index": 23}