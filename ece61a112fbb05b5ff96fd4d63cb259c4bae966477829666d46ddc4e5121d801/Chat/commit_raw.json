{"tx_hash": "24Pv19HsBM6NqToaVgR5qadaqBNeu7sCjKULyJkFbmQ8", "action_id_social": "HuLRwZJ3rWh1ev5HYapq41cYvFJjWfagbAb8JwkfKPNZ-0-widget", "block_id": 98990776, "block_timestamp": "2023-08-17T05:19:56.700Z", "signer_id": "ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801", "widget_name": "Chat", "source_code": "const contract =\n  'ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801';\n\nState.init({\n  message: '',\n});\n\nconst messages = Near.view(contract, 'get_messages', { limit: 3 });\n\nconst Message = styled.div`\n  display: flex;\n  gap: 1.2em;\n`;\n\nconst SendControls = styled.div`\n  display: flex;\n  gap: 1em;\n  margin: 0.5em;\n`;\n\nconst sendMessage = () => {\n  if (state.message.length != 0) {\n    Near.call(contract, 'send', {\n      text: state.message,\n    });\n  }\n};\n\nreturn (\n  <>\n    <pre>\n      {JSON.stringify(\n        Social.index('post', 'main', {\n          accountId: 'nectar.near',\n        }),\n        null,\n        2,\n      )}\n    </pre>\n    <pre>{JSON.stringify(Social.get(`mob.near/widget/**`), null, 2)}</pre>\n    {messages.reverse().map((message) => (\n      <Message>\n        <Widget\n          src=\"calebjacob.near/widget/AccountProfile\"\n          props={{\n            accountId: message.author,\n          }}\n        />\n        <Widget\n          src=\"andyh.near/widget/TimeAgo\"\n          props={{\n            blockHeight: message.block_height,\n          }}\n        />\n        <p>{message.text}</p>\n      </Message>\n    ))}\n    <SendControls>\n      <input\n        type=\"text\"\n        onInput={(e) => State.update({ message: e.target.value })}\n        value={state.message}\n      />\n      <button\n        onClick={() => {\n          sendMessage();\n        }}\n      >\n        Send\n      </button>\n    </SendControls>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801/widget/Chat", "fact_widget_deployments_id": "13b16b0ad664cc6b37464347d0067ecd", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}