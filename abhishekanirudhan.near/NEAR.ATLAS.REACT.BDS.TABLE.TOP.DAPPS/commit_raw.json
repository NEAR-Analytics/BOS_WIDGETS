{"tx_hash": "8uGhjv3YHh4svdMRCyp6Rv6M4kAE29Loq7j2NbaYPM3p", "action_id_social": "G9EKDQ6VhR9FYmgeV33QfPPonSmiSMHse34N9rRX8AdY-0-widget", "block_id": 99542904, "block_timestamp": "2023-08-24T10:32:50.193Z", "signer_id": "abhishekanirudhan.near", "widget_name": "NEAR.ATLAS.REACT.BDS.TABLE.TOP.DAPPS", "source_code": "// Monthly Active Accounts Example\nlet rawData = fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/fc7361ab-5b57-445d-b4b9-e5bccd8a5699/data/latest\",\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\n// data.body = data.body.sort((a, b) => new Date(a.MONTH) - new Date(b.MONTH));\n\nlet Style = styled.div`\n\n          `;\n\nlet nodes = rawData.body || [];\n\n//const sub_widget_map = {\n//  \"Play Ember\": \"https://nearatlas.com/#/y3k.near/widget/WAU_PlayEmber\",\n//};\n\nfunction formatPercentNew(text) {\n  let number = parseFloat(text);\n  return <span className=\"text-white\">{number}%</span>;\n}\n\nfunction formatNumber(num) {\n  return (\n    <span className=\"text-white\">\n      {num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")}\n    </span>\n  );\n}\n\nfunction formatNumberDecimal(text) {\n  let number = parseInt(text);\n  return (\n    <span className=\"text-white\">\n      {number.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")}\n    </span>\n  );\n}\n\nfunction formatCell(text) {\n  return (\n    <a\n      href={\n        \"https://nearatlas.com/#/abhishekanirudhan.near/widget/NEART.ATLAS.BDS_DETAILED_PROJECT_DASHBOARD?project_name=\" +\n        text\n      }\n      className=\"text-warning text-wrap \"\n    >\n      {text}\n    </a>\n  );\n}\n\nfunction formatText(text) {\n  let number = parseFloat(text);\n  if (number < 0) {\n    return <span className=\"text-danger\">{number}%</span>;\n  } else if (number > 0) {\n    return <span className=\"text-success\">{number}%</span>;\n  } else {\n    return <span className=\"text-warning\">{number}%</span>;\n  }\n}\n\nconst data = {\n  nodes: nodes,\n};\n\nconst COLUMNS = [\n  {\n    label: <p className=\"text-center text-white text-wrap\">Project</p>,\n    renderCell: (item) => formatCell(item[\"Contract Address\"]),\n    sort: { sortKey: \"ContractAddress\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">Past 30 Days</p>,\n    renderCell: (item) => formatNumber(item[\"Past 30 Days\"]),\n    sort: { sortKey: \"Past 30 Days\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">Last Month</p>,\n    renderCell: (item) => formatNumber(item[\"30-60 Days Ago\"]),\n    sort: { sortKey: \"30-60 Days Ago\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">M/M</p>,\n    renderCell: (item) => formatText(item[\"M/M\"]),\n    sort: { sortKey: \"M/M\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">New MAAs</p>,\n    renderCell: (item) => formatNumber(item[\"New MAAs\"]),\n    sort: { sortKey: \"New MAAs\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">M2 Retention</p>,\n    renderCell: (item) => formatPercentNew(item[\"M2 Retention\"]),\n    sort: { sortKey: \"M2 Retention\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">Average DAU</p>,\n    renderCell: (item) => formatNumberDecimal(item[\"Daily Average\"]),\n    sort: { sortKey: \"Daily Average\" },\n  },\n\n  {\n    label: <p className=\"text-center text-white text-wrap \">Stickiness</p>,\n    renderCell: (item) => formatPercentNew(item[\"DAU / MAU\"]),\n    sort: { sortKey: \"DAU / MAU\" },\n  },\n  {\n    label: (\n      <p className=\"text-center text-white text-wrap \">Transactions (30d)</p>\n    ),\n    renderCell: (item) => formatPercentNew(item[\"Txns 30 Days\"]),\n    sort: { sortKey: \"Txns 30 Days\" },\n  },\n  {\n    label: <p className=\"text-center text-white text-wrap \">Avg Tx per MAU</p>,\n    renderCell: (item) => formatPercentNew(item[\"Avg Tx per MAU\"]),\n    sort: { sortKey: \"Avg Tx per MAU\" },\n  },\n  {\n    label: (\n      <p className=\"text-center text-white text-wrap \">Total Transactions</p>\n    ),\n    renderCell: (item) => formatPercentNew(item[\"Total Txns\"]),\n    sort: { sortKey: \"Total Txns\" },\n  },\n  {\n    label: (\n      <p className=\"text-center text-white text-wrap \">Total Fee Generated</p>\n    ),\n    renderCell: (item) => formatPercentNew(item[\"Total Fee Generated\"]),\n    sort: { sortKey: \"Total Fee Generated\" },\n  },\n  {\n    label: (\n      <p className=\"text-center text-white text-wrap \">Total Gas Consumed</p>\n    ),\n    renderCell: (item) => formatPercentNew(item[\"Gas Consumed\"]),\n    sort: { sortKey: \"Gas Consumed\" },\n  },\n];\nconst sortFns = {\n  ContractAddress: (array) =>\n    array.sort((a, b) =>\n      a[\"Contract Address\"].localeCompare(b[\"Contract Address\"])\n    ),\n  \"Past 30 Days\": (array) =>\n    array.sort((a, b) => a[\"Past 30 Days\"] - b[\"Past 30 Days\"]),\n  \"30-60 Days Ago\": (array) =>\n    array.sort((a, b) => a[\"30-60 Days Ago\"] - b[\"30-60 Days Ago\"]),\n  \"M/M\": (array) => array.sort((a, b) => a[\"M/M\"] - b[\"M/M\"]),\n  \"New MAAs\": (array) => array.sort((a, b) => a[\"New MAAs\"] - b[\"New MAAs\"]),\n  \"M2 Retention\": (array) =>\n    array.sort((a, b) => a[\"M2 Retention\"] - b[\"M2 Retention\"]),\n  \"Daily Average\": (array) =>\n    array.sort((a, b) => a[\"Daily Average\"] - b[\"Daily Average\"]),\n  \"DAU / MAU\": (array) => array.sort((a, b) => a[\"DAU / MAU\"] - b[\"DAU / MAU\"]),\n};\n\nreturn (\n  <div className=\"text-bg-dark rounded-4 mb-12\">\n    {data !== null ? (\n      <div Style={{ \"min-width\": \"780px\" }} className=\"bg-dark\">\n        <BasicTable columns={COLUMNS} data={data} sortFns={sortFns} />\n      </div>\n    ) : (\n      <div>Loading ...</div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/abhishekanirudhan.near/widget/NEAR.ATLAS.REACT.BDS.TABLE.TOP.DAPPS", "fact_widget_deployments_id": "3e0abeb13efebba821a5ea66f02fd0fc", "inserted_timestamp": "2023-08-24T14:25:54.689Z", "modified_timestamp": "2023-08-24T14:25:54.689Z", "__row_index": 2}