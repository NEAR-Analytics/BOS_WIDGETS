{"tx_hash": "41FP92k5quwUzWKKwaSECnbvaAA5Jmjt8dJzzJF4BswT", "action_id_social": "7ihCo2AKQVDoTGigwnJmasa8uqfs7jGCY62WPz7Cgub-0-widget", "block_id": 100714209, "block_timestamp": "2023-09-09T05:41:27.809Z", "signer_id": "lord1.near", "widget_name": "table-pagination", "source_code": "if (!props.data || !props.columns) {\r\n  return \"column and data props are required.\";\r\n}\r\nState.init({ currentPage: 1, searchValue: \"\" });\r\nconst data = props.data || [];\r\nconst rowsCount = props.rowsCount || null;\r\nconst themeColor = props.themeColor;\r\nconst handleSearch = (event) => {\r\n  const value = event.target.value;\r\n  State.update({ searchValue: value });\r\n};\r\nconst handlePagination = () => {\r\n  if (!rowsCount) return { table: data };\r\n  const currentPage = state.currentPage;\r\n  const totalPages = Math.ceil(data.length / rowsCount);\r\n  const currentTableData = data.slice(\r\n    (currentPage - 1) * rowsCount,\r\n    rowsCount * currentPage\r\n  );\r\n  const buttons = Array(totalPages).fill(0);\r\n  buttons[currentPage - 1] = 1;\r\n  return { buttons, table: currentTableData };\r\n};\r\nconst Table = styled.table`\r\n  --bs-table-color: ${themeColor?.table_pagination?.table_color};\r\n  --bs-table-bg: ${themeColor?.table_pagination?.table_bg};\r\n  --bs-table-border-color: ${themeColor?.table_pagination?.table_border_color};\r\n  --bs-table-accent-bg: ${themeColor?.table_pagination?.table_accent_bg};\r\n  --bs-table-striped-color: ${themeColor?.table_pagination?.table_striped_color};\r\n  --bs-table-striped-bg: ${themeColor?.table_pagination?.table_striped_bg};\r\n  --bs-table-hover-color: ${themeColor?.table_pagination?.table_hover_color};\r\n  --bs-table-hover-bg:${themeColor?.table_pagination?.table_hover_bg};\r\n  --bs-table-hover-bg:${themeColor?.table_pagination?.columntextcolor};\r\n\r\n`;\r\nconst onHandelId = (id) => {\r\n  let customId = \"\";\r\n  if (id.length > 15) {\r\n    customId += id.substring(0, 3);\r\n    customId += \"...\";\r\n    customId += id.substring(id.length - 3);\r\n    return customId;\r\n  } else {\r\n    return id;\r\n  }\r\n};\r\n\r\nreturn (\r\n  <div className=\"table-responsive\">\r\n    <Table\r\n      className={`table table-hover table-striped table-borderless ${props.className}`}\r\n    >\r\n      <thead>\r\n        <tr>\r\n          {props.columns.map((th) => (\r\n            <th key={th.title} className=\"col-1\" scope=\"col\">\r\n              <div>\r\n                {th.description ? (\r\n                  <OverlayTrigger\r\n                    placement={th.position || \"top\"}\r\n                    overlay={<Tooltip>{th.description}</Tooltip>}\r\n                  >\r\n                    <span>{th.title}</span>\r\n                  </OverlayTrigger>\r\n                ) : (\r\n                  <span>{th.title}</span>\r\n                )}\r\n              </div>\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {props.data.length > 0 &&\r\n          handlePagination()\r\n            .table.filter((row) =>\r\n              Object.values(row).some((value) =>\r\n                value.toString().includes(state.searchValue)\r\n              )\r\n            )\r\n            .map((row, i) => {\r\n              return (\r\n                <tr key={row.key}>\r\n                  {props.columns.map((td) => {\r\n                    const key = td.key ? row[td.key] : i + 1;\r\n                    return (\r\n                      <td\r\n                        style={{\r\n                          color:\r\n                            td.colors ||\r\n                            themeColor?.table_pagination?.columntextcolor,\r\n                        }}\r\n                      >\r\n                        {td.link === \"yes\" ? (\r\n                          <a\r\n                            className=\"d-inline-block\"\r\n                            target=\"_blank\"\r\n                            href={`${td.beforehref}${key}${td.afterhref}`}\r\n                            style={{\r\n                              \"text-decoration\": \"none\",\r\n                            }}\r\n                          >\r\n                            {td.heyperlink === \"yes\" ? (\r\n                              `${onHandelId(key)}`\r\n                            ) : (\r\n                              <svg\r\n                                width=\"20\"\r\n                                height=\"20\"\r\n                                viewBox=\"0 0 20 20\"\r\n                                fill=\"none\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                              >\r\n                                <path\r\n                                  d=\"M12.9167 5.25001L12.9167 1.75001M12.9167 1.75001H9.41674M12.9167 1.75001L7.66675 7M6.50008 1.75H5.21675C4.23666 1.75 3.74661 1.75 3.37226 1.94074C3.04298 2.10852 2.77527 2.37623 2.60749 2.70552C2.41675 3.07986 2.41675 3.56991 2.41675 4.55V9.45C2.41675 10.4301 2.41675 10.9201 2.60749 11.2945C2.77527 11.6238 3.04298 11.8915 3.37226 12.0593C3.74661 12.25 4.23666 12.25 5.21675 12.25H10.1167C11.0968 12.25 11.5869 12.25 11.9612 12.0593C12.2905 11.8915 12.5582 11.6238 12.726 11.2945C12.9167 10.9201 12.9167 10.4301 12.9167 9.45V8.16667\"\r\n                                  stroke=\"#806ce1\"\r\n                                  stroke-width=\"2.5\"\r\n                                  stroke-linecap=\"round\"\r\n                                  stroke-linejoin=\"round\"\r\n                                />\r\n                              </svg>\r\n                            )}\r\n                          </a>\r\n                        ) : (\r\n                          key\r\n                        )}\r\n                      </td>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              );\r\n            })}\r\n      </tbody>\r\n    </Table>\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Search...\"\r\n      onChange={handleSearch}\r\n      style={{\r\n        width: \"20%\",\r\n        height: \"30px\",\r\n        borderRadius: \"50px\",\r\n        \"margin-left\": \"2px\",\r\n      }}\r\n    />\r\n\r\n    {!props.rowsCount ? (\r\n      \"\"\r\n    ) : (\r\n      <div className=\"py-4\">\r\n        <div>\r\n          <ul className=\"pagination pagination-sm gap-2 justify-content-center\">\r\n            {props.data.length > 0 &&\r\n              handlePagination().buttons.map((btn, i) => {\r\n                return (\r\n                  <li key={i} className=\"page-item\">\r\n                    <button\r\n                      onClick={() => State.update({ currentPage: i + 1 })}\r\n                      className=\"page-link btn\"\r\n                      style={{\r\n                        borderColor:\r\n                          themeColor?.table_pagination?.btn_border ?? \"#000\",\r\n                        color:\r\n                          themeColor?.table_pagination?.btn_color ?? \"#000\",\r\n                        backgroundColor: btn\r\n                          ? themeColor?.table_pagination?.btn_bg_active ??\r\n                            \"gray\"\r\n                          : themeColor?.table_pagination?.btn_bg ??\r\n                            \"transparent\",\r\n                      }}\r\n                    >\r\n                      {i + 1}\r\n                    </button>\r\n                  </li>\r\n                );\r\n              })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// const props = {\r\n//   data: [],\r\n//   columns: [\r\n//     { title: \"id\" }, //if key does not provided , rows will be ascending numbers\r\n//     { title: \"title\", key: \"key in data\" ,description:\"here is a\",position:\"top/right/buttom/left\",\r\n//    link: \"yes\",\r\n//      beforehref: \"https://near.social/mob.near/widget/ProfilePage?accountId=\",\r\n//      afterhref: \"\",\r\n//      colors: \"green\"},\r\n\r\n//   ],\r\n//   rowsCount: 2, // if zero or null , the whole table will be render\r\n//   className: \"table-bordered\",\r\n//   themeColor: {\r\n//     table_pagination: {\r\n//       table_bg: \"rgb(25,33,50)\",\r\n//       table_color: \"rgb(255,255,255)\",\r\n//       table_border_color: \"\",\r\n//       table_accent_bg: \"\",\r\n//       table_striped_color: \"rgb(255,255,255)\",\r\n//       table_striped_bg: \"\",\r\n//       table_hover_color: \"rgb(255,255,255)\",\r\n//       table_hover_bg: \"\",\r\n//       btn_border: \"#fff\",\r\n//       btn_bg: \"rgba(49, 62, 89,0.5)\",\r\n//       btn_bg_active: \"rgb(25,33,50)\",\r\n//       btn_color: \"#fff\",\r\n//       columntextcolor: \"\"\r\n//     },\r\n//   },\r\n// };\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/table-pagination", "fact_widget_deployments_id": "e1097597be5745c53a477b477c250e87", "inserted_timestamp": "2023-09-09T07:38:32.466Z", "modified_timestamp": "2023-09-09T07:38:32.466Z", "__row_index": 26}