{"tx_hash": "ALJRPxn3NnYBc2mxAQ5iwA9Hm2cMUA3SvzvHyfYJVFhy", "action_id_social": "EW2bBn8oXTe72vFFJEmf6gwZCmFaZMnTCV8BgjXkkkhk-0-widget", "block_id": 100705963, "block_timestamp": "2023-09-09T02:51:39.396Z", "signer_id": "lord1.near", "widget_name": "table-pagination", "source_code": "if (!props.data || !props.columns) {\n  return \"column and data props are required.\";\n}\nState.init({ currentPage: 1, searchValue: \"\" });\nconst data = props.data || [];\nconst rowsCount = props.rowsCount || null;\nconst themeColor = props.themeColor;\nconst handleSearch = (event) => {\n  const value = event.target.value;\n  State.update({ searchValue: value });\n};\nconst handlePagination = () => {\n  if (!rowsCount) return { table: data };\n  const currentPage = state.currentPage;\n  const totalPages = Math.ceil(data.length / rowsCount);\n  const currentTableData = data.slice(\n    (currentPage - 1) * rowsCount,\n    rowsCount * currentPage\n  );\n  const buttons = Array(totalPages).fill(0);\n  buttons[currentPage - 1] = 1;\n  return { buttons, table: currentTableData };\n};\nconst Table = styled.table`\n  --bs-table-color: ${themeColor?.table_pagination?.table_color};\n  --bs-table-bg: ${themeColor?.table_pagination?.table_bg};\n  --bs-table-border-color: ${themeColor?.table_pagination?.table_border_color};\n  --bs-table-accent-bg: ${themeColor?.table_pagination?.table_accent_bg};\n  --bs-table-striped-color: ${themeColor?.table_pagination?.table_striped_color};\n  --bs-table-striped-bg: ${themeColor?.table_pagination?.table_striped_bg};\n  --bs-table-hover-color: ${themeColor?.table_pagination?.table_hover_color};\n  --bs-table-hover-bg:${themeColor?.table_pagination?.table_hover_bg};\n  --bs-table-hover-bg:${themeColor?.table_pagination?.columntextcolor};\n\n`;\nreturn (\n  <div className=\"table-responsive\">\n    <Table\n      className={`table table-hover table-striped table-borderless ${props.className}`}\n    >\n      <thead>\n        <tr>\n          {props.columns.map((th) => (\n            <th key={th.title} className=\"col-1\" scope=\"col\">\n              <div>\n                {th.description ? (\n                  <OverlayTrigger\n                    placement={th.position || \"top\"}\n                    overlay={<Tooltip>{th.description}</Tooltip>}\n                  >\n                    <span>{th.title}</span>\n                  </OverlayTrigger>\n                ) : (\n                  <span>{th.title}</span>\n                )}\n              </div>\n            </th>\n          ))}\n        </tr>\n      </thead>\n\n      <tbody>\n        {props.data.length > 0 &&\n          handlePagination()\n            .table.filter((row) =>\n              Object.values(row).some((value) =>\n                value.toString().includes(state.searchValue)\n              )\n            )\n            .map((row, i) => {\n              return (\n                <tr key={row.project}>\n                  {props.columns.map((td) => {\n                    const key = td.key ? row[td.key] : i + 1;\n                    return (\n                      <td\n                        style={{\n                          color:\n                            td.colors ||\n                            themeColor?.table_pagination?.columntextcolor,\n                        }}\n                      >\n                        {td.link === \"yes\" ? (\n                          <a\n                            href={`${td.beforehref}${row.project}${td.afterhref}`}\n                            style={{\n                              \"text-decoration\": \"none\",\n                            }}\n                          >\n                            {row.project}\n                          </a>\n                        ) : (\n                          row.project\n                        )}\n                      </td>\n                    );\n                  })}\n                </tr>\n              );\n            })}\n      </tbody>\n    </Table>\n    <input\n      type=\"text\"\n      placeholder=\"Search...\"\n      onChange={handleSearch}\n      style={{\n        width: \"20%\",\n        height: \"30px\",\n        borderRadius: \"50px\",\n        \"margin-left\": \"2px\",\n      }}\n    />\n\n    {!props.rowsCount ? (\n      \"\"\n    ) : (\n      <div className=\"py-4\">\n        <div>\n          <ul className=\"pagination pagination-sm gap-2 justify-content-center\">\n            {props.data.length > 0 &&\n              handlePagination().buttons.map((btn, i) => {\n                return (\n                  <li key={i} className=\"page-item\">\n                    <button\n                      onClick={() => State.update({ currentPage: i + 1 })}\n                      className=\"page-link btn\"\n                      style={{\n                        borderColor:\n                          themeColor?.table_pagination?.btn_border ?? \"#000\",\n                        color:\n                          themeColor?.table_pagination?.btn_color ?? \"#000\",\n                        backgroundColor: btn\n                          ? themeColor?.table_pagination?.btn_bg_active ??\n                            \"gray\"\n                          : themeColor?.table_pagination?.btn_bg ??\n                            \"transparent\",\n                      }}\n                    >\n                      {i + 1}\n                    </button>\n                  </li>\n                );\n              })}\n          </ul>\n        </div>\n      </div>\n    )}\n  </div>\n);\n\n// const props = {\n//   data: [],\n//   columns: [\n//     { title: \"id\" }, //if key does not provided , rows will be ascending numbers\n//     { title: \"title\", key: \"key in data\" ,description:\"here is a\",position:\"top/right/buttom/left\",\n//    link: \"yes\",\n//      beforehref: \"https://near.social/mob.near/widget/ProfilePage?accountId=\",\n//      afterhref: \"\",\n//      colors: \"green\"},\n\n//   ],\n//   rowsCount: 2, // if zero or null , the whole table will be render\n//   className: \"table-bordered\",\n//   themeColor: {\n//     table_pagination: {\n//       table_bg: \"rgb(25,33,50)\",\n//       table_color: \"rgb(255,255,255)\",\n//       table_border_color: \"\",\n//       table_accent_bg: \"\",\n//       table_striped_color: \"rgb(255,255,255)\",\n//       table_striped_bg: \"\",\n//       table_hover_color: \"rgb(255,255,255)\",\n//       table_hover_bg: \"\",\n//       btn_border: \"#fff\",\n//       btn_bg: \"rgba(49, 62, 89,0.5)\",\n//       btn_bg_active: \"rgb(25,33,50)\",\n//       btn_color: \"#fff\",\n//       columntextcolor: \"\"\n//     },\n//   },\n// };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/table-pagination", "fact_widget_deployments_id": "e9ae70ac3a7dd913f65bd2f6f3fc2be0", "inserted_timestamp": "2023-09-09T04:39:42.754Z", "modified_timestamp": "2023-09-09T04:39:42.754Z", "__row_index": 23}