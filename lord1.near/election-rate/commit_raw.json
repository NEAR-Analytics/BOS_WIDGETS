{"tx_hash": "EaZmbj5CsE3QHiLPzWV83qGEt2zwrErA1S8iU1fgb6F4", "action_id_social": "CRQvM4fBWA6bG8cjh57UqWAWyoyxYqfoqLRxUWoK1nyn-0-widget", "block_id": 101483929, "block_timestamp": "2023-09-19T15:32:59.506Z", "signer_id": "lord1.near", "widget_name": "election-rate", "source_code": "const themeColor = props.themeColor;\r\nconst generaltheme = {\r\n  height: \"160px\",\r\n  align: \"center\",\r\n  description:\r\n    \"What percentage of the ballots in each household were converted into votes? For each voter, there are 15 ballots in HOM, 7 ballots in COA, 15 ballots in TC, and 1 ballot in BP.\",\r\n  brand: \"Participantion Rate\",\r\n  fontsize: \"100\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\nconst theme1 = {\r\n  height: \"150px\",\r\n  align: \"center\",\r\n  description: \"House Of Merit\",\r\n  brand: \"HOM\",\r\n  fontsize: \"100\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\nconst theme2 = {\r\n  height: \"150px\",\r\n  align: \"center\",\r\n  description: \"Council Of Advisors\",\r\n  brand: \"COA\",\r\n  fontsize: \"100\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\nconst theme3 = {\r\n  height: \"150px\",\r\n  align: \"center\",\r\n  description: \"Transparency Commission\",\r\n  brand: \"TC\",\r\n  fontsize: \"100\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\nconst theme4 = {\r\n  height: \"150px\",\r\n  align: \"center\",\r\n  description: \"Budget Package .\",\r\n  brand: \"BD\",\r\n  fontsize: \"10\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\n\r\nconst Right = styled.div`\r\n  padding: 2px;\r\n  margin-bottom: 10px;\r\n  border-radius: 8px;\r\n`;\r\n\r\nconst H5 = styled.h5`\r\n  color:${themeColor.election?.textColor};\r\n  text-align: center;\r\n`;\r\nconst ChartContainer = styled.div`\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    transition: transform 0.5s;\r\n  }\r\n`;\r\nlet data = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/805aa65d-7ace-401c-8f1b-fb6c82f730bb/data/latest\",\r\n  {\r\n    subscribe: true,\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"*/*\",\r\n    },\r\n  }\r\n);\r\nconst datas = data.body;\r\n\r\nconst WidgetComponent = ({ label, voted, total }) => (\r\n  <div className=\"col-md-12\">\r\n    <Right className=\"col\">\r\n      <H5>{label}</H5>\r\n      <div className=\"d-flex justify-content-center\">\r\n        <ChartContainer>\r\n          <Widget\r\n            src=\"lord1.near/widget/pie-percentage\"\r\n            props={{\r\n              themeColor,\r\n              voted: `${voted}`,\r\n              total: `${total}`,\r\n              percent: 50,\r\n            }}\r\n          />\r\n        </ChartContainer>\r\n      </div>\r\n    </Right>\r\n  </div>\r\n);\r\n\r\nconst renderWidgets = (datas, labels) => {\r\n  return labels.map((label) => (\r\n    <div className=\"col-md-6 col-lg-3\">\r\n      <WidgetComponent\r\n        label={label}\r\n        voted={datas[0][`${label.toLowerCase()}`]}\r\n        total={datas[0][`${label.toLowerCase()}_rate`]}\r\n      />\r\n    </div>\r\n  ));\r\n};\r\n55;\r\nconst renderHomWidgets = (datas, labels) => {\r\n  return labels.map((label) => (\r\n    <div className=\"col-md-3 col-xl-2\">\r\n      <div className=\"col-md-12\">\r\n        <Right className=\"col\">\r\n          <div className=\"d-flex justify-content-center\">\r\n            <ChartContainer>\r\n              <Widget\r\n                src=\"lord1.near/widget/pie-percentage\"\r\n                props={{\r\n                  themeColor,\r\n                  voted: `${datas[0][`${label.toLowerCase()}`]}`,\r\n                  total: `${datas[0].singers}`,\r\n                  description: `${label.toLowerCase().split(\"_\")[1]}`,\r\n                  percent: 10,\r\n                }}\r\n              />\r\n            </ChartContainer>\r\n          </div>\r\n        </Right>\r\n      </div>\r\n    </div>\r\n  ));\r\n};\r\n\r\nconst topLabels = [\"HOM\", \"COA\", \"TC\", \"BP\"];\r\nconst homLabels = [\"hom_og\", \"hom_vibes\", \"hom_regens\", \"hom_fractal\"];\r\nconst coaLabels = [\"coa_og\", \"coa_vibes\", \"coa_regens\", \"coa_fractal\"];\r\nconst tcLabels = [\"tc_og\", \"tc_vibes\", \"tc_regens\", \"tc_fractal\"];\r\nconst bpLabels = [\"bp_og\", \"bp_vibes\", \"bp_regens\", \"bp_fractal\"];\r\n\r\nreturn (\r\n  <div style={{ backgroundColor: themeColor.page_bg }}>\r\n    <div\r\n      style={{ backgroundColor: themeColor?.sbt_info?.section_bg }}\r\n      className=\"shadow-sm rounded-4\"\r\n    >\r\n      <Widget src=\"lord1.near/widget/header-dynamic\" props={generaltheme} />\r\n      <div className=\"row\">{renderWidgets(datas, topLabels)}</div>\r\n    </div>\r\n\r\n    <div style={{ width: \"100%\", height: \"85px\" }}></div>\r\n    <div\r\n      style={{ backgroundColor: themeColor?.sbt_info?.card_bg }}\r\n      className=\"shadow-sm rounded-4 \"\r\n      style={{ \"padding-left\": \"1.5%\", \"padding-right\": \"1.5%\" }}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            {renderHomWidgets(datas, homLabels)}\r\n            <div className=\"order-first order-xl-last col-xl-4 \">\r\n              <Widget src=\"lord1.near/widget/header-dynamic\" props={theme1} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      style={{ backgroundColor: themeColor?.sbt_info?.card_bg }}\r\n      className=\"shadow-sm rounded-4 \"\r\n      style={{ \"padding-left\": \"1.5%\", \"padding-right\": \"1.5%\" }}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            {renderHomWidgets(datas, coaLabels)}\r\n            <div className=\"order-first order-xl-last col-xl-4 \">\r\n              <Widget src=\"lord1.near/widget/header-dynamic\" props={theme2} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      style={{ backgroundColor: themeColor?.sbt_info?.card_bg }}\r\n      className=\"shadow-sm rounded-4 \"\r\n      style={{ \"padding-left\": \"1.5%\", \"padding-right\": \"1.5%\" }}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            {renderHomWidgets(datas, tcLabels)}\r\n            <div className=\"order-first order-xl-last col-xl-4 \">\r\n              <Widget src=\"lord1.near/widget/header-dynamic\" props={theme3} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      style={{ backgroundColor: themeColor?.sbt_info?.card_bg }}\r\n      className=\"shadow-sm rounded-4 \"\r\n      style={{ padding: \"1.5%\", \"padding-right\": \"1.5%\" }}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            {renderHomWidgets(datas, bpLabels)}\r\n            <div className=\"order-first order-xl-last col-xl-4 \">\r\n              <Widget src=\"lord1.near/widget/header-dynamic\" props={theme4} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Widget\r\n      src=\"lord1.near/widget/election-rate-chart\"\r\n      props={{ themeColor }}\r\n    />\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/election-rate", "fact_widget_deployments_id": "195f8482ba71bc8e024b3ab08f4d8634", "inserted_timestamp": "2023-09-19T17:30:25.847Z", "modified_timestamp": "2023-09-19T17:30:25.847Z", "__row_index": 0}