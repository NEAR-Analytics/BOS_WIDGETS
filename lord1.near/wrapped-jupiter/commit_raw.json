{"tx_hash": "8MmstN8s5aoWtQCctanwyYcKgLijfJnMkG6BCmD7TzJd", "action_id_social": "8DKBmCijdyFX5ZWQZ2fWYaJqZU6gbjPZoSt3MCXdA17U-0-widget", "block_id": 109411882, "block_timestamp": "2024-01-02T14:45:16.497Z", "signer_id": "lord1.near", "widget_name": "wrapped-jupiter", "source_code": "const themeColor = props.themeColor;\r\nconst API_KEY = \"6d48c4c0-eb41-4e4b-ae4d-ba1148f01fb8\";\r\n\r\nconst general_theme = {\r\n  height: \"110px\",\r\n  align: \"center\",\r\n  description: \"Explore the status of your activity.\",\r\n  brand: \"Jupiter Wrapped\",\r\n  fontsize: \"100\",\r\n  fontweight: \"25px\",\r\n  afterbrand: \"\ud83c\udf10\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\n\r\n//----------------------------------------------------------------------------------\r\n//tabs ######\r\nconst tabs = {\r\n  transaction: \"Transaction\",\r\n};\r\nconst setTab = (tab) => State.update({ tab });\r\n// ----------------------\r\nState.init({\r\n  singer: \"\",\r\n  interval: \"week\",\r\n  isLoading: false,\r\n  searchedSinger: null,\r\n  searchedInterval: null,\r\n  tab: tabs.transaction,\r\n  result: {},\r\n  error: [],\r\n});\r\n//---------------------------------------------------------------------------------------\r\n\r\nconst inputHandler = ({ target }) => {\r\n  const singer = target.value.trim();\r\n  State.update({ singer: singer });\r\n};\r\n\r\nconst selectHandler = ({ target }) => {\r\n  const interval = target.value.toLowerCase();\r\n  State.update({ interval });\r\n};\r\n//------------------------------------------------------------------------------------------------\r\n\r\nconst handleSearchedSinger = () => {\r\n  if (!state.singer.length) {\r\n    State.update({ error: [...state.error, \"please insert an address\"] });\r\n    return;\r\n  }\r\n  if (\r\n    state.searchedSinger === state.singer &&\r\n    state.searchedInterval === state.interval\r\n  ) {\r\n    State.update({\r\n      error: [\r\n        ...state.error,\r\n        \"please insert new address or select new interval\",\r\n      ],\r\n    });\r\n    return;\r\n  }\r\n  State.update({\r\n    searchedSinger: state.singer,\r\n    searchedInterval: state.interval,\r\n    result: {},\r\n    isLoading: true,\r\n  });\r\n  setTimeout(() => {\r\n    State.update({ isLoading: false });\r\n  }, 10000);\r\n};\r\n//-------------------------------------------------------------------------------------------------\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\n// error managment #######################\r\nif (state.error.length > 0) {\r\n  function hide() {\r\n    const errors = state.error;\r\n    errors.shift();\r\n    if (errors.length > 0) setTimeout(hide, 2500);\r\n    State.update({ error: errors });\r\n  }\r\n  setTimeout(hide, 2500);\r\n}\r\n// ui elements ##################################\r\n// tabs container --------------------------------------------\r\n\r\nconst Container = styled.div`\r\n  && {\r\n    text-align: left;\r\n  }\r\n  .tabContent {\r\n    display: inline-flex;\r\n    align-items: left;\r\n    background: rgba(26, 46, 51, 0.25);\r\n    border: 1px solid rgba(255, 255, 255, 0.3);\r\n    border-radius: 10px;\r\n    padding: 3px 4px;\r\n    list-style-type: none;\r\n    margin: 0 auto;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n  .tab-item .active {\r\n    background: #304352;\r\n  }\r\n  .tab-item button {\r\n    background-color: transparent;\r\n    border-radius: 8px;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    color: #fff;\r\n    height: 30px;\r\n    padding: 0 22px;\r\n    border: none;\r\n  }\r\n`;\r\n//--------------------\r\nconst Input = styled.input`\r\n  flex-grow: 4 !important;\r\n  color: ${themeColor?.search_sbt?.input_text_color};\r\n  background-color: ${themeColor?.search_sbt?.input_bg};\r\n  &:hover {\r\n    background-color: ${themeColor?.search_sbt?.input_bg_hover};\r\n  }\r\n  &:focus {\r\n    background-color: ${themeColor?.search_sbt?.input_bg};\r\n    color: ${themeColor?.search_sbt?.input_text_color};\r\n    border: 1px solid ${themeColor?.search_sbt?.input_border};\r\n  }\r\n  &:disabled {\r\n    background-color: ${themeColor?.search_sbt?.input_bg_hover};\r\n    color: ${themeColor?.search_sbt?.input_text_color};\r\n    border: 1px solid ${themeColor?.search_sbt?.input_border};\r\n  }\r\n  &::placeholder {\r\n    color: ${themeColor?.search_sbt?.input_text_color};\r\n  }\r\n  &:placeholder-shown {\r\n    opacity: 0.5;\r\n  }\r\n`;\r\nconst Dropdown = styled.select`\r\n  cursor: pointer;\r\n  color: ${themeColor?.search_sbt?.input_text_color};\r\n  background-color: ${themeColor?.search_sbt?.input_bg};\r\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e\");\r\n  &:hover {\r\n    background-color: ${themeColor?.search_sbt?.input_bg_hover};\r\n  }\r\n  &:focus {\r\n    background-color: ${themeColor?.search_sbt?.input_bg};\r\n    color: ${themeColor?.search_sbt?.input_text_color};\r\n    border: 1px solid ${themeColor?.search_sbt?.input_border};\r\n  }\r\n  &:disabled {\r\n    background-color: ${themeColor?.search_sbt?.input_bg_hover};\r\n    color: ${themeColor?.search_sbt?.input_text_color};\r\n    border: 1px solid ${themeColor?.search_sbt?.input_border};\r\n    cursor: default;\r\n  }\r\n`;\r\nconst Button = styled.button`\r\n  color: ${themeColor?.search_sbt?.search_btn_text};\r\n  font-size: 16px;\r\n  padding: 0.5rem 1rem;\r\n  font-weight: 400;\r\n  background-color: ${themeColor?.search_sbt?.search_btn_bg};\r\n  &:hover {\r\n    background-color: ${themeColor?.search_sbt?.search_btn_bg_hover};\r\n  }\r\n  border: 1px solid ${themeColor?.search_sbt?.search_btn_bg};\r\n  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.02);\r\n  min-height: calc(1.5em + 1rem + 2px);\r\n  border-radius: 40px;\r\n  line-height: 29px;\r\n  letter-spacing: 0.01em;\r\n`;\r\n\r\nconst Transaction = (\r\n  <div\r\n    className=\"w-100\"\r\n    style={{ display: state.tab === tabs.transaction ? \"\" : \"none\" }}\r\n  >\r\n    <Widget\r\n      src=\"lord1.near/widget/wrapped-transaction-jupiter\"\r\n      props={{\r\n        themeColor,\r\n        singer: state.searchedSinger,\r\n        interval: state.searchedInterval,\r\n        API_KEY,\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n\r\nreturn (\r\n  <div\r\n    style={{ backgroundColor: themeColor.page_bg }}\r\n    className=\"container-fluid py-2 rounded-4\"\r\n  >\r\n    <div className=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n      {state.error.length > 0 &&\r\n        state.error.map((er) => (\r\n          <div\r\n            key={er}\r\n            className=\"toast show align-items-center text-bg-danger border-0\"\r\n            role=\"alert\"\r\n            aria-live=\"assertive\"\r\n            aria-atomic=\"true\"\r\n          >\r\n            <div className=\"d-flex\">\r\n              <div className=\"toast-body\">{er}</div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n    </div>\r\n\r\n    <div\r\n      className=\"shadow-sm  rounded-4\"\r\n      style={{ background: themeColor?.search_sbt?.section_bg }}\r\n    >\r\n      <Widget src=\"lord1.near/widget/header-dynamic\" props={general_theme} />\r\n    </div>\r\n    <div className=\"search py-4\">\r\n      <div className=\"row\">\r\n        <div className=\"col-sm-8 mb-3\">\r\n          <div className=\"input-group gap-2\">\r\n            <Input\r\n              onBlur={inputHandler}\r\n              defaultValue={state.singer}\r\n              disabled={state.isLoading}\r\n              type=\"input\"\r\n              className=\"form-control form-control-lg rounded-4 rounded-end\"\r\n              id=\"address\"\r\n              placeholder=\"Solana Address:\"\r\n            />\r\n            <Dropdown\r\n              onChange={selectHandler}\r\n              value={state.interval}\r\n              disabled={state.isLoading}\r\n              className=\"form-select rounded-4 rounded-start mw-25\"\r\n            >\r\n              <option value=\"day\">Day</option>\r\n              <option selected value=\"week\">\r\n                Week\r\n              </option>\r\n              <option value=\"month\">Month</option>\r\n              <option value=\"year\">Year</option>\r\n            </Dropdown>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center col-sm-4 col-md-auto\">\r\n          <Button\r\n            disabled={state.isLoading}\r\n            onClick={handleSearchedSinger}\r\n            className=\"btn-lg\"\r\n            type=\"button\"\r\n          >\r\n            {state.isLoading ? (\r\n              <div className=\"text-center px-4\">\r\n                <div className=\"spinner-border spinner-border-sm\" role=\"status\">\r\n                  <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              \"search\"\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      {state.searchedSinger && (\r\n        <>\r\n          <div className=\"w-100 d-flex justify-content-center mb-2\">\r\n            <Container>\r\n              <ul className=\"tabContent\">\r\n                {Object.values(tabs).map((tab) => (\r\n                  <li key={tab} className=\"tab-item\">\r\n                    <button\r\n                      className={`${state.tab === tab ? \"active\" : \"\"}`}\r\n                      aria-current=\"page\"\r\n                      onClick={() => setTab(tab)}\r\n                    >\r\n                      {tab}\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </Container>\r\n          </div>\r\n          <div className=\"w-100\">\r\n            <div>{Transaction}</div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/wrapped-jupiter", "fact_widget_deployments_id": "3ae5a2ede4efb0a545436cea17ea0b18", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}