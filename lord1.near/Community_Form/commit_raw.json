{"tx_hash": "AvJn4B5CrvYQ4hxm9FndoD1xHa9Tcy7Bx8Tnn6AkRmb6", "action_id_social": "Gir3PNghdiVzb5iqzZUvAaz8ReUh7gCiSvL35Gbmg7Uv-0-widget", "block_id": 109897349, "block_timestamp": "2024-01-08T11:59:33.645Z", "signer_id": "lord1.near", "widget_name": "Community_Form", "source_code": "const themeColor = props.themeColor;\n\nconst projecttheme = {\n  height: \"130px\",\n  align: \"center\",\n  description: \"Submit your Information to power your community\",\n  brand: \"Regional Communities\",\n  fontsize: \"40px\",\n  fontweight: \"40px\",\n  afterbrand: \"Form\",\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\n  fontbrand: \" Arial, sans-serif\",\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\n  fontsubtitle: \" Arial, sans-serif\",\n  background:\n    themeColor?.dynamic_header?.background ||\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  gap: 3em;\n  padding-bottom: 3em;\n`;\n\nconst Header = styled.h1`\n  font-style: normal;\n  font-weight: 700;\n  font-size: 2em;\n  line-height: 1.4em;\n  text-align: center;\n  color: #000000;\n`;\n\nconst Form = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 60%;\n  gap: 1em;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n`;\n\nState.init({\n  blockchain: null,\n  blockchainError: \"\",\n  contract_address: \"\",\n  contract_addressError: \"\",\n  protocol: \"\",\n  protocolError: \"\",\n  contract_name: \"\",\n  contract_nameError: \"\",\n  label: null,\n  labelError: \"\",\n  sublabel: null,\n  sublabelError: \"\",\n  discord: \"\",\n  discordError: \"\",\n  accountsWithPermissions: [],\n  accountsWithPermissionsIsFetched: false,\n});\n\nif (!state.accountsWithPermissionsIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"debug_get_permissions\",\n    { account_id: context.accountId },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      accountsWithPermissions: data\n        .map(([info]) => info)\n        .filter((info) => \"AccountId\" in info)\n        .map(({ AccountId }) => AccountId),\n      accountsWithPermissionsIsFetched: true,\n    })\n  );\n}\n\nconst validateForm = () => {\n  return (\n    state.contract_address &&\n    state.contract_addressError === \"\" &&\n    state.blockchain &&\n    state.blockchainError === \"\" &&\n    state.label &&\n    state.labelError === \"\" &&\n    state.sublabel &&\n    state.sublabelError === \"\" &&\n    state.protocol &&\n    state.protocolError === \"\" &&\n    state.contract_name &&\n    state.contract_nameError === \"\" &&\n    (!state.discord || state.discordError === \"\")\n  );\n};\nlet chain = (\n  <Widget\n    src={`lord1.near/widget/Dropdown`}\n    props={{\n      label: \"Select a Regional Communities *\",\n      placeholder: \" \",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      options: [\n        { text: \"Near Brasil\", value: \"nearbrasil.near\" },\n        { text: \"Near T\u00fcrkiye\", value: \"nearinturkiye.near\" },\n        { text: \"Near Korea DAO\", value: \"coineasydao.near\" },\n        { text: \"Near Ukraine Guild\", value: \"nearukraineguild.near\" },\n        { text: \"NEAR\u4e2d\u6587\u793e\u533a\ud83c\udd5d\", value: \"nearchinese.near\" },\n        { text: \"NEAR Indonesia\", value: \"indonesiaguild.near\" },\n        { text: \"NEAR HAUSA\", value: \"nearhausa.near\" },\n        { text: \"NEAR DACH\", value: \"dach.near\" },\n        { text: \"NEAR Vietnam Hub\", value: \"nearvietnamhub.near\" },\n        { text: \"Tnesociety\", value: \"tne_society.near\" },\n        { text: \"NEAR_Arabic\", value: \"neararabia.near\" },\n        { text: \"NEAR India\", value: \"nearindiahub.near\" },\n        { text: \"NEAR Protocol German\", value: \"near-deutsch.near\" },\n        { text: \"NEAR Nigeria\", value: \"near-nigeria.near\" },\n        { text: \"Near Fran\u00e7ais\", value: \"near_french.near\" },\n        { text: \"San Francisco\", value: \"sfdao.near\" },\n        { text: \"NEAR Balkans\", value: \"nearbalkans.near\" },\n        { text: \"Near India\", value: \"near-india.near\" },\n        { text: \"NEAR Vietnam Official\", value: \"vietnamnearofficial.near\" },\n        { text: \"NEAR Toronto\", value: \"near-toronto-rc.near\" },\n        { text: \"Near Africa Gamers\", value: \"near_africa_gamers.near\" },\n        {\n          text: \"NEAR Kenya\",\n          value:\n            \"0d8d0a961728f0fd8eb9513176a5c630edf59c4bde1c7e9315744f20336706e7\",\n        },\n        { text: \"Near Espa\u00f1ol\", value: \"nearspanish.near\" },\n        {\n          text: \"Near Protocol T\u00fcrkiye\",\n          value: \"nearprotocol-turkiye.sputnik-dao.near\",\n        },\n        { text: \"NearNigeriaGamers\", value: \"near-nigeria-gamers.near\" },\n        { text: \"NEAR Tanzania \", value: \"neartz.near\" },\n      ],\n      dev: state.blockchain,\n      update: (blockchain) => State.update({ blockchain }),\n      setError: (blockchainError) => State.update({ blockchainError }),\n      error: state.blockchainError,\n    }}\n  />\n);\nlet address = (\n  <Widget\n    src={`lord1.near/widget/Text`}\n    props={{\n      label: \"Paste your wallet address *\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"address.near\",\n      value: state.contract_address,\n      onChange: (contract_address) => State.update({ contract_address }),\n      validate: () => {\n        if (state.contract_address.length < 5) {\n          State.update({\n            contract_addressError: \"Name must be at least 5 characters\",\n          });\n          return;\n        }\n\n        if (state.contract_address.length > 100) {\n          State.update({\n            contract_addressError: \"Name must be less than 100 characters\",\n          });\n          return;\n        }\n\n        State.update({ contract_addressError: \"\" });\n      },\n      error: state.contract_addressError,\n    }}\n  />\n);\nlet protocols = (\n  <Widget\n    src={`lord1.near/widget/Text`}\n    props={{\n      label: \"Twitter handel *\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"@Twitter_handel\",\n      value: state.protocol,\n      onChange: (protocol) => State.update({ protocol }),\n      validate: () => {\n        if (state.protocol.length < 2) {\n          State.update({\n            protocolError: \"Name must be at least 2 characters\",\n          });\n          return;\n        }\n\n        if (state.protocol.length > 100) {\n          State.update({\n            protocolError: \"Name must be less than 100 characters\",\n          });\n          return;\n        }\n\n        State.update({ protocolError: \"\" });\n      },\n      error: state.protocolError,\n    }}\n  />\n);\n\nlet name = (\n  <Widget\n    src={`lord1.near/widget/Text`}\n    props={{\n      label: \"Telegram handel *\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"@Telegram_handel\",\n      value: state.contract_name,\n      onChange: (contract_name) => State.update({ contract_name }),\n      validate: () => {\n        if (state.contract_name.length < 5) {\n          State.update({\n            contract_nameError: \"Name must be at least 5 characters\",\n          });\n          return;\n        }\n\n        if (state.contract_name.length > 100) {\n          State.update({\n            contract_nameError: \"Name must be less than 100 characters\",\n          });\n          return;\n        }\n\n        State.update({ contract_nameError: \"\" });\n      },\n      error: state.contract_nameError,\n    }}\n  />\n);\n\nlet labels = (\n  <Widget\n    src={`lord1.near/widget/Dropdown`}\n    props={{\n      label: \"Your Role *\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"\",\n      options: [\n        { text: \"Community Member\", value: \"member\" },\n        { text: \"Contributor\", value: \"contributor\" },\n        { text: \"Head of the community\", value: \"community_leader\" },\n      ],\n      dev: state.label,\n      update: (label) => State.update({ label }),\n      setError: (labelError) => State.update({ labelError }),\n      error: state.labelError,\n    }}\n  />\n);\nlet sublabels = (\n  <Widget\n    src={`lord1.near/widget/Dropdown`}\n    props={{\n      label: \"How did you hear about your community *\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"\",\n      options: [\n        {\n          text: \"Twitter\",\n          value: \"twitter\",\n        },\n        { text: \"Telegram\", value: \"telegram\" },\n        { text: \"Medium\", value: \"medium\" },\n        { text: \"Discord\", value: \"discord\" },\n      ],\n      dev: state.sublabel,\n      update: (sublabel) => State.update({ sublabel }),\n      setError: (sublabelError) => State.update({ sublabelError }),\n      error: state.sublabelError,\n    }}\n  />\n);\nlet discords = (\n  <Widget\n    src={`lord1.near/widget/Text`}\n    props={{\n      label: \"Discord Handle\",\n      placeholdercolor: themeColor?.form?.placeholdercolor,\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\n      inputcolor: themeColor?.form?.inputcolor,\n      labelcolor: themeColor?.form?.labelcolor,\n      placeholder: \"@Discord_handle\",\n      value: state.discord,\n      onChange: (discord) => State.update({ discord }),\n      validate: () => {\n        if (state.discord.length < 2) {\n          State.update({\n            discordError: \"Name must be at least 2 characters\",\n          });\n          return;\n        }\n\n        if (state.discord.length > 20) {\n          State.update({\n            discordError: \"Name must be less than 20 characters\",\n          });\n          return;\n        }\n\n        State.update({ discordError: \"\" });\n      },\n      error: state.discordError,\n    }}\n  />\n);\nif (!state.likeSound) {\n  State.update({\n    commitSound:\n      \"https://ipfs.near.social/ipfs/bafkreibtharj3v5z5hntvxpc5vrbfqenee4qk6kixnwuqljbq3ofpaxncq\",\n  });\n  new Audio(state.likeSound);\n}\nreturn (\n  <div\n    className=\"my-4 shadow-sm  rounded-4\"\n    style={{ background: themeColor?.sbt_area?.section_bg }}\n  >\n    <div className=\"row g-4 w-100 pb-2 mx-0\">\n      <div className=\"col-12\">\n        <div\n          style={{ background: themeColor?.sbt_area?.card_bg }}\n          className=\"shadow-sm rounded-4 \"\n        >\n          <Widget src=\"lord1.near/widget/header-dynamic\" props={projecttheme} />\n\n          <Container>\n            <Form>\n              {chain}\n              {address}\n              {protocols}\n              {name}\n              {labels}\n              {sublabels}\n              {discords}\n              <FormFooter>\n                <Widget\n                  src={`contribut3.near/widget/Buttons.Green`}\n                  props={{\n                    disabled: !validateForm(),\n                    onClick: () => {\n                      if (!validateForm()) return;\n                      const sound = new Audio(state.commitSound);\n                      sound.play();\n                      Social.set({\n                        index: JSON.stringify({\n                          value: {\n                            gateway: \"flipside_gateway\",\n                            method: \"community_form\",\n                            blockchain: state.blockchain.value,\n                            contract_address: state.contract_address,\n                            protocol: state.protocol,\n                            contract_name: state.contract_name,\n                            label_type: state.label.value,\n                            label_subtype: state.sublabel.value,\n                            discord_handle: state.discord,\n                          },\n                        }),\n                      });\n                    },\n                    text: (\n                      <>\n                        <svg\n                          width=\"17\"\n                          height=\"18\"\n                          viewBox=\"0 0 17 18\"\n                          fill=\"none\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <path\n                            d=\"M2.875 16.5V12.75M2.875 5.25V1.5M1 3.375H4.75M1 14.625H4.75M9.25 2.25L7.94937 5.63165C7.73786 6.18157 7.6321 6.45653 7.46765 6.68781C7.32189 6.8928 7.1428 7.07189 6.93781 7.21765C6.70653 7.3821 6.43157 7.48786 5.88165 7.69937L2.5 9L5.88165 10.3006C6.43157 10.5121 6.70653 10.6179 6.93781 10.7824C7.1428 10.9281 7.32189 11.1072 7.46765 11.3122C7.6321 11.5435 7.73786 11.8184 7.94937 12.3684L9.25 15.75L10.5506 12.3684C10.7621 11.8184 10.8679 11.5435 11.0324 11.3122C11.1781 11.1072 11.3572 10.9281 11.5622 10.7824C11.7935 10.6179 12.0684 10.5121 12.6184 10.3006L16 9L12.6184 7.69937C12.0684 7.48786 11.7935 7.3821 11.5622 7.21765C11.3572 7.07189 11.1781 6.8928 11.0324 6.68781C10.8679 6.45653 10.7621 6.18157 10.5506 5.63165L9.25 2.25Z\"\n                            stroke=\"#11181C\"\n                            stroke-width=\"1.66667\"\n                            stroke-linecap=\"round\"\n                            stroke-linejoin=\"round\"\n                          />\n                        </svg>\n                        Submit Form\n                      </>\n                    ),\n                  }}\n                />\n              </FormFooter>\n            </Form>\n          </Container>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/Community_Form", "fact_widget_deployments_id": "20320edb8862ec47c447f0d1d39bfbb0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}