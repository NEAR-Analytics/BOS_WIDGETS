{"tx_hash": "HETrPRBgECBNZuLb9tboVrHLnBncr73x4eZe1zMyUS6t", "action_id_social": "5g51KKXPTf146EstCY3kf5DPCkKyTV7jQ1ZScSnydGXm-0-widget", "block_id": 109978035, "block_timestamp": "2024-01-09T11:30:26.974Z", "signer_id": "lord1.near", "widget_name": "Leaderboard-member", "source_code": "const themeColor = props.themeColor;\r\n\r\nconst projecttheme = {\r\n  height: \"130px\",\r\n  align: \"center\",\r\n  description: \"Based on current month\",\r\n  brand: \"Member'\",\r\n  fontsize: \"40px\",\r\n  fontweight: \"40px\",\r\n  afterbrand: \"Monthly Status\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\nconst projectthemes = {\r\n  height: \"130px\",\r\n  align: \"center\",\r\n  description: \"community accounts (in total)\",\r\n  brand: \"Member'\",\r\n  fontsize: \"40px\",\r\n  fontweight: \"40px\",\r\n  afterbrand: \"Status \",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\n\r\nconst queryHashes = [\r\n  { id: 1, hash: \"6e8a7751-4dff-4b7f-9edf-b35aa7ea4b3c\" }, //members-30days\r\n  { id: 2, hash: \"82762826-ee41-4cb1-8b55-5aef9b48d560\" }, //members-total-2\r\n];\r\n\r\nState.init({\r\n  light: true,\r\n  data: [],\r\n  isLoading: true,\r\n  error: [],\r\n});\r\n\r\nconst formatNumber = (num) => {\r\n  if ((num ?? NaN) === NaN) return \"-\";\r\n  if (num >= 1000000000) {\r\n    return (num / 1000000000).toFixed(1).replace(/\\.0$/, \"\") + \"b\";\r\n  }\r\n  if (num >= 1000000) {\r\n    return (num / 1000000).toFixed(1).replace(/\\.0$/, \"\") + \"m\";\r\n  }\r\n  if (num >= 1000) {\r\n    return (num / 1000).toFixed(1).replace(/\\.0$/, \"\") + \"k\";\r\n  }\r\n  return num.toFixed(4);\r\n};\r\n\r\nconst handleData = () => {\r\n  const data = {};\r\n  const errors = [];\r\n  queryHashes.forEach(({ hash, id }) => {\r\n    const result = fetchData(hash);\r\n    if (result.error) errors.push(`hash${id} : ${result.error}`);\r\n    data[`hash${id}`] = {\r\n      ...result,\r\n      id,\r\n    };\r\n  });\r\n\r\n  if (Object.values(data).every((d) => !d.isLoading)) {\r\n    State.update({\r\n      data: data,\r\n      error: [...state.error, ...errors],\r\n      isLoading: false,\r\n    });\r\n  }\r\n};\r\n\r\nconst fetchData = (hash) => {\r\n  const data = fetch(\r\n    `https://api.flipsidecrypto.com/api/v2/queries/${hash}/data/latest`,\r\n    {\r\n      subscribe: true,\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"*/*\",\r\n      },\r\n    }\r\n  );\r\n  const result = {\r\n    data: (data && data.body) || null,\r\n    error: (data && !data.ok && (data.status || data.error)) || null,\r\n    isLoading: !data && !error,\r\n  };\r\n  return result;\r\n};\r\n\r\nif (state.isLoading) {\r\n  handleData();\r\n}\r\n\r\nif (state.error.length > 0) {\r\n  function hide() {\r\n    const errors = state.error;\r\n    errors.shift();\r\n    if (errors.length > 0) setTimeout(hide, 2500);\r\n    State.update({ error: errors });\r\n  }\r\n  setTimeout(hide, 2500);\r\n}\r\n\r\nreturn (\r\n  <div className=\"container-fluid py-2\">\r\n    <div className=\"pl-2\">\r\n      <div\r\n        className=\"my-4 shadow-sm  rounded-4\"\r\n        style={{ background: themeColor?.sbt_area?.section_bg }}\r\n      >\r\n        <Widget src=\"lord1.near/widget/header-dynamic\" props={projecttheme} />\r\n        <div className=\"row g-4 w-100 pb-2 mx-0\">\r\n          <div className=\"col-12\">\r\n            <div\r\n              style={{ background: themeColor?.sbt_area?.card_bg }}\r\n              className=\"shadow-sm rounded-2 overflow-auto\"\r\n            >\r\n              <Widget\r\n                src=\"lord1.near/widget/table-pagination\"\r\n                props={{\r\n                  themeColor: { table_pagination: themeColor.table_pagination },\r\n                  data: state.data?.hash1?.data,\r\n                  columns: [\r\n                    {\r\n                      title: \"Profile\",\r\n                      key: \"signer\",\r\n                      profile: \"yes\",\r\n                    },\r\n                    {\r\n                      title: \"User\",\r\n                      key: \"signer\",\r\n                    },\r\n                    {\r\n                      title: \"Role\",\r\n                      key: \"role\",\r\n                      colors: \"#8b76f3\",\r\n                    },\r\n                    {\r\n                      title: \"Community\",\r\n                      key: \"community\",\r\n                      colors: \"#8b76f3\",\r\n                    },\r\n                    {\r\n                      title: \"Active days\",\r\n                      key: \"active_days\",\r\n                      description: \"Number of days the user has been active\",\r\n                    },\r\n                    {\r\n                      title: \"Transactions\",\r\n                      key: \"transactions\",\r\n                      description: \"Total number of user' transactions\",\r\n                    },\r\n                    {\r\n                      title: \"Volume\",\r\n                      key: \"volume\",\r\n                      description: \"Total volume of user transactions (Near)\",\r\n                    },\r\n                    {\r\n                      title: \"Avg Volume\",\r\n                      key: \"avg_volume_per_trx\",\r\n                      description: \"Average volume of user transactions (Near)\",\r\n                    },\r\n                    {\r\n                      title: \"Project\",\r\n                      key: \"project\",\r\n                      description:\r\n                        \"The number of projects that the user has interacted with.\",\r\n                    },\r\n                    {\r\n                      title: \"Contract\",\r\n                      key: \"contract\",\r\n                      description:\r\n                        \"The number of contracts that the user has interacted with.\",\r\n                    },\r\n                    {\r\n                      title: \"Social\",\r\n                      key: \"social\",\r\n                      description:\r\n                        \"Total number of user' social transactions such as like, post, and etc.\",\r\n                    },\r\n                    {\r\n                      title: \"Widget\",\r\n                      key: \"widget\",\r\n                      description:\r\n                        \"The number of widgets that the user has created.\",\r\n                    },\r\n                  ],\r\n                  rowsCount: 10,\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"my-4 shadow-sm  rounded-4\"\r\n        style={{ background: themeColor?.sbt_area?.section_bg }}\r\n      >\r\n        <Widget src=\"lord1.near/widget/header-dynamic\" props={projectthemes} />\r\n        <div className=\"row g-4 w-100 pb-2 mx-0\">\r\n          <div className=\"col-12\">\r\n            <div\r\n              style={{ background: themeColor?.sbt_area?.card_bg }}\r\n              className=\"shadow-sm rounded-2 overflow-auto\"\r\n            >\r\n              <Widget\r\n                src=\"lord1.near/widget/table-pagination\"\r\n                props={{\r\n                  themeColor: { table_pagination: themeColor.table_pagination },\r\n                  data: state.data?.hash2?.data,\r\n                  columns: [\r\n                    {\r\n                      title: \"Profile\",\r\n                      key: \"signer\",\r\n                      profile: \"yes\",\r\n                    },\r\n                    {\r\n                      title: \"User\",\r\n                      key: \"signer\",\r\n                    },\r\n                    {\r\n                      title: \"Role\",\r\n                      key: \"role\",\r\n                      colors: \"#8b76f3\",\r\n                    },\r\n                    {\r\n                      title: \"Community\",\r\n                      key: \"community\",\r\n                      colors: \"#8b76f3\",\r\n                    },\r\n                    {\r\n                      title: \"First date\",\r\n                      key: \"min_time\",\r\n                      description: \"first day of activity\",\r\n                    },\r\n                    {\r\n                      title: \"Last date\",\r\n                      key: \"max_time\",\r\n                      description: \"last day of activity\",\r\n                    },\r\n                    {\r\n                      title: \"Active days\",\r\n                      key: \"active_days\",\r\n                      description: \"Number of days the user has been active\",\r\n                    },\r\n                    {\r\n                      title: \"Active months\",\r\n                      key: \"active_month\",\r\n                      description: \"Number of months the user has been active\",\r\n                    },\r\n                    {\r\n                      title: \"Active years\",\r\n                      key: \"active_year\",\r\n                      description: \"Number of years the user has been active\",\r\n                    },\r\n                    {\r\n                      title: \"Transactions\",\r\n                      key: \"transactions\",\r\n                      description: \"Total number of user' transactions\",\r\n                      round: \"yes\",\r\n                    },\r\n                    {\r\n                      title: \"Volume\",\r\n                      key: \"volume\",\r\n                      description: \"Total volume of user transactions (Near)\",\r\n                      round: \"yes\",\r\n                    },\r\n                    {\r\n                      title: \"Avg Volume\",\r\n                      key: \"avg_volume_per_trx\",\r\n                      description: \"Average volume of user transactions (Near)\",\r\n                    },\r\n                    {\r\n                      title: \"Project\",\r\n                      key: \"project\",\r\n                      description:\r\n                        \"The number of projects that the user has interacted with.\",\r\n                    },\r\n\r\n                    {\r\n                      title: \"Social\",\r\n                      key: \"social\",\r\n                      description:\r\n                        \"Total number of user' social transactions such as like, post, and etc.\",\r\n                    },\r\n                    {\r\n                      title: \"Widget\",\r\n                      key: \"widget\",\r\n                      description:\r\n                        \"The number of widgets that the user has created.\",\r\n                    },\r\n                  ],\r\n                  rowsCount: 10,\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n        {state.error.length > 0 &&\r\n          state.error.map((er) => (\r\n            <div\r\n              className=\"toast show align-items-center text-bg-danger border-0\"\r\n              role=\"alert\"\r\n              aria-live=\"assertive\"\r\n              aria-atomic=\"true\"\r\n            >\r\n              <div className=\"d-flex\">\r\n                <div className=\"toast-body\">{er}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/lord1.near/widget/Leaderboard-member", "fact_widget_deployments_id": "7921524d71f117465328dae9961b44c6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}