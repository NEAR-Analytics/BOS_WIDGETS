{"tx_hash": "2kRKWmGxdMD3YheFqQWSYG7bRHPou8TWc2nbL8QWwXYL", "action_id_social": "5MRvMfmsnShGNSPraF7xReTRe4QqqhaVNtpmkCz3ppDJ-0-widget", "block_id": 110550940, "block_timestamp": "2024-01-16T13:35:43.766Z", "signer_id": "rambo-dev.near", "widget_name": "Test_CreateTemplateModal", "source_code": "const { Avatar, Button, InputField, TextEditor } = VM.require(\r\n  \"buildhub.near/widget/components\"\r\n);\r\n\r\nconst { Modal } = VM.require(\"rambo-dev.near/widget/ModalComponent\");\r\n\r\nconst FiltersSection = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst ModalContainer = styled.div`\r\n  width: 552px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px 0;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst SaveTemplateWrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst TextareaWrapper = styled.div`\r\n  display: grid;\r\n  vertical-align: top;\r\n  align-items: center;\r\n  position: relative;\r\n  align-items: stretch;\r\n\r\n  textarea {\r\n    display: flex;\r\n    align-items: center;\r\n    transition: all 0.3s ease;\r\n  }\r\n\r\n  textarea::placeholder {\r\n    padding-top: 4px;\r\n    font-size: 20px;\r\n  }\r\n\r\n  textarea:focus::placeholder {\r\n    font-size: inherit;\r\n    padding-top: 0px;\r\n  }\r\n\r\n  &::after,\r\n  textarea,\r\n  iframe {\r\n    width: 100%;\r\n    min-width: 1em;\r\n    height: unset;\r\n    min-height: 3em;\r\n    font: inherit;\r\n    margin: 0;\r\n    resize: none;\r\n    background: none;\r\n    appearance: none;\r\n    border: 0px solid #eee;\r\n    grid-area: 1 / 1;\r\n    overflow: hidden;\r\n    outline: none;\r\n  }\r\n\r\n  iframe {\r\n    padding: 0;\r\n  }\r\n\r\n  textarea:focus,\r\n  textarea:not(:empty) {\r\n    border-bottom: 1px solid #eee;\r\n    min-height: 5em;\r\n  }\r\n\r\n  &::after {\r\n    content: attr(data-value) \" \";\r\n    visibility: hidden;\r\n    white-space: pre-wrap;\r\n  }\r\n  &.markdown-editor::after {\r\n    padding-top: 66px;\r\n    font-family: monospace;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst MarkdownEditor = `\r\n  html {\r\n    background: #23242b;\r\n  }\r\n\r\n  * {\r\n    border: none !important;\r\n  }\r\n\r\n  .rc-md-editor {\r\n    background: #4f5055;\r\n    border-top: 1px solid #4f5055 !important;\r\n    border-radius: 8px;\r\n  }\r\n\r\n  .editor-container {\r\n    background: #4f5055;\r\n  }\r\n  \r\n  .drop-wrap {\r\n    top: -110px !important;\r\n    border-radius: 0.5rem !important;\r\n  }\r\n\r\n  .header-list {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  textarea {\r\n    background: #23242b !important;\r\n    color: #fff !important;\r\n\r\n    font-family: sans-serif !important;\r\n    font-size: 1rem;\r\n\r\n    border: 1px solid #4f5055 !important;\r\n    border-top: 0 !important;\r\n    border-radius: 0 0 8px 8px;\r\n  }\r\n\r\n  .rc-md-navigation {\r\n    background: #23242b !important;\r\n    border: 1px solid #4f5055 !important;\r\n    border-top: 0 !important;\r\n    border-bottom: 0 !important;\r\n    border-radius: 8px 8px 0 0;\r\n  \r\n    i {\r\n      color: #cdd0d5;\r\n    }\r\n  }\r\n\r\n  .editor-container {\r\n    border-radius: 0 0 8px 8px;\r\n  }\r\n\r\n  .rc-md-editor .editor-container .sec-md .input {\r\n    overflow-y: auto;\r\n    padding: 8px !important;\r\n    line-height: normal;\r\n    border-radius: 0 0 8px 8px;\r\n  }\r\n`;\r\n\r\nconst MarkdownPreview = styled.div`\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5,\r\n  h6 {\r\n    font-size: 16px !important;\r\n  }\r\n  @media (max-width: 767px) {\r\n    font-size: 15px !important;\r\n    h1,\r\n    h2,\r\n    h3,\r\n    h4,\r\n    h5,\r\n    h6 {\r\n      font-size: 15px !important;\r\n    }\r\n  }\r\n\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5,\r\n  h6,\r\n  strong,\r\n  b {\r\n    font-weight: 500 !important;\r\n  }\r\n  ol,\r\n  ul,\r\n  dl {\r\n    margin-bottom: 0.5rem;\r\n    white-space: inherit;\r\n  }\r\n  p {\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  hr {\r\n    display: none;\r\n  }\r\n  img {\r\n    border-radius: var(--bs-border-radius-lg);\r\n    max-height: 40em;\r\n  }\r\n  th {\r\n    min-width: 5em;\r\n  }\r\n\r\n  .table > :not(caption) > * > * {\r\n    padding: 0.3rem;\r\n  }\r\n\r\n  * {\r\n    color: #b6b6b8 !important;\r\n  }\r\n\r\n  a {\r\n    color: #0d6efd !important;\r\n\r\n    &:hover {\r\n      color: #0a58ca !important;\r\n    }\r\n  }\r\n`;\r\n\r\nState.init({\r\n  templateTitle: \"\",\r\n  templateContent: \"# Hello World\",\r\n  isOpen: false,\r\n});\r\n\r\nfunction onOpen() {\r\n  State.update({\r\n    isOpen: true,\r\n  });\r\n}\r\n\r\nfunction onClose() {\r\n  State.update({\r\n    isOpen: false,\r\n  });\r\n}\r\n\r\nfunction onSaveTemplate(title, content) {\r\n  const existentTemplates = Storage.get(\"postTemplates\");\r\n\r\n  if (existentTemplates === null) {\r\n    Storage.set(\"postTemplates\", [\r\n      {\r\n        title,\r\n        content,\r\n      },\r\n    ]);\r\n  } else {\r\n    const alreadyExistsTemplate = existentTemplates.filter((template) => {\r\n      return template.title === title;\r\n    })[0];\r\n    if (alreadyExistsTemplate !== undefined) {\r\n      const allButExistent = existentTemplates.filter((template) => {\r\n        return template.title !== title;\r\n      });\r\n\r\n      Storage.set(\"postTemplates\", [\r\n        ...allButExistent,\r\n        {\r\n          title,\r\n          content,\r\n        },\r\n      ]);\r\n    } else {\r\n      Storage.set(\"postTemplates\", [\r\n        ...existentTemplates,\r\n        {\r\n          title,\r\n          content,\r\n        },\r\n      ]);\r\n    }\r\n  }\r\n  onClose();\r\n}\r\n\r\nreturn (\r\n    <Modal\r\n      open={state.isOpen}\r\n      key=\"create\"\r\n      onOpen={onOpen}\r\n      onClose={onClose}\r\n      toggle={<Button variant=\"primary\">Add New</Button>}\r\n    >\r\n      <ModalContainer>\r\n        <InputField\r\n          key=\"templateTitleInput\"\r\n          label=\"Title\"\r\n          placeholder=\"Name your template\"\r\n          value={state.templateTitle}\r\n          onChange={(e) => {\r\n            State.update({\r\n              templateTitle: e.target.value,\r\n            });\r\n          }}\r\n        />\r\n\r\n        <TextareaWrapper\r\n          className=\"markdown-editor\"\r\n          data-value={\"templateContent\"}\r\n          key={\"templateContent\"}\r\n        >\r\n          <Widget\r\n            src=\"mob.near/widget/MarkdownEditorIframe\"\r\n            props={{\r\n              initialText: templateContent,\r\n              embedCss: MarkdownEditor,\r\n              onChange: (v) => {\r\n                State.update({\r\n                  templateContent: v,\r\n                });\r\n              },\r\n            }}\r\n          />\r\n        </TextareaWrapper>\r\n\r\n        <SaveTemplateWrapper>\r\n          <Dialog.Trigger asChild>\r\n            <Button\r\n              disabled={isValidTemplateToCreate}\r\n              onClick={() => {\r\n                onSaveTemplate(state.templateTitle, state.templateContent);\r\n              }}\r\n              variant=\"primary\"\r\n            >\r\n              Save Template\r\n            </Button>\r\n          </Dialog.Trigger>\r\n        </SaveTemplateWrapper>\r\n      </ModalContainer>\r\n    </Modal>\r\n  );\r\n}\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rambo-dev.near/widget/Test_CreateTemplateModal", "fact_widget_deployments_id": "248642cce31b22c7315b98b9e34405eb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}