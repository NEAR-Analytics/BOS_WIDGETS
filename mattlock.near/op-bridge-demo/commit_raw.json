{"tx_hash": "FNZQiXq4fXMvEpGm7CQPDWN9J6d2z9XPVLWhYVVjaPcD", "action_id_social": "CXKKtEm39EYChePhSJH3QqRpSJPoeCwugisCKF94nySY-0-widget", "block_id": 111894495, "block_timestamp": "2024-02-02T01:02:32.668Z", "signer_id": "mattlock.near", "widget_name": "op-bridge-demo", "source_code": "/*\n\nTODO\n[x] store all abis in gist\n[x] use a block range op sepolia RPC (blockpi) for subsequent calls after tenderly\n[x] get balances for eth on all networks\n[] clean up network contracts and remove top level contract addresses and contract instances\n[] clean up withdraw and deposits, only get proof data when user clicks something?\n[] add erc20 deposit for usdc\n[] add erc20 withdrawal for usdc\n...\n[] update bridge UI to pass in explorer links mapped to network\n[] add ability to prove and claim withdrawals to bridge-ui\n*/\n\nconst L1StandardBridgeProxy = `0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1`;\nconst L2StandardBridge = \"0x4200000000000000000000000000000000000010\";\nconst ETH_ADDR = \"0x0000000000000000000000000000000000000000\";\nconst DEFAULT_AMOUNT_ETH = \"0.01\";\nconst DEFAULT_AMOUNT = ethers.utils.parseUnits(DEFAULT_AMOUNT_ETH, 18);\nconst L2_OUTPUT_ORACLE_CONTRACT = `0x90E9c4f8a994a250F6aEfd61CAFb4F2e895D458F`;\nconst L1_OPTIMISM_PORTAL_CONTRACT = `0x16Fc5058F25648194471939df75CF27A2fdC48BC`;\nconst HASH_ZERO =\n  \"0x0000000000000000000000000000000000000000000000000000000000000000\";\nconst L2_L1_MESSAGE_PASSER_CONTRACT = `0x4200000000000000000000000000000000000016`;\nconst ETH_WITHDRAWAL_TARGET = `0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000`;\n\nconst OP_SEPOLIA_CHAIN_ID = 11155420;\nconst SEPOLIA_CHAIN_ID = 11155111;\nconst ETH_CHAIN_ID = 1;\nconst OP_CHAIN_ID = 10;\nconst VALID_CHAIN_ID = [\n  ETH_CHAIN_ID,\n  OP_CHAIN_ID,\n  SEPOLIA_CHAIN_ID,\n  OP_SEPOLIA_CHAIN_ID,\n];\nconst depositDisabledMsg =\n  \"For deposits, please switch to Ethereum mainnet or Sepolia testnet.\";\nconst withdrawDisabledMsg =\n  \"For withdrawals, please switch to OP mainnet or OP Sepolia testnet.\";\n\nconst tokens = {\n  eth: {\n    icon: \"https://assets.coingecko.com/coins/images/279/standard/ethereum.png?1696501628\",\n    decimals: 18,\n  },\n  // usdc: {\n  //   icon: \"https://assets.coingecko.com/coins/images/6319/standard/usdc.png?1696506694\",\n  //   decimals: 6,\n  // },\n};\n\n// state\nconst defaultDeposit = {\n  network: {\n    id: \"l1\",\n    name: \"Ethereum\",\n  },\n  assets: [\n    {\n      id: \"eth\",\n      name: \"ETH\",\n      selected: true,\n      balance: \"0.00\",\n    },\n  ],\n};\nconst defaultWithdraw = {\n  network: {\n    id: \"l2\",\n    name: \"Optimism\",\n  },\n  assets: [\n    {\n      id: \"eth\",\n      name: \"ETH\",\n      selected: true,\n      balance: \"0.00\",\n    },\n  ],\n};\nif (!state.initialized) {\n  console.log(\"INITIALIZED\");\n  initState({\n    initLogs: false,\n    initialized: true,\n    deposit: defaultDeposit,\n    withdraw: defaultWithdraw,\n    amount: \"0.0\",\n    deposits: [],\n    withdrawals: [],\n    ethDeposits: [],\n    ethWithdrawals: [],\n    tokens: [],\n    tab: \"deposit\",\n  });\n  return \"\";\n}\n\n// rpc providers\n\nconst opSepoliaProvider = new ethers.providers.JsonRpcProvider(\n  `https://optimism-sepolia.gateway.tenderly.co`\n);\nconst opSepoliaProviderRange = new ethers.providers.JsonRpcProvider(\n  `https://optimism-sepolia.blockpi.network/v1/rpc/public`\n);\nconst opSepoliaProviderOG = new ethers.providers.JsonRpcProvider(\n  `https://sepolia.optimism.io`\n);\nconst sepoliaProvider = new ethers.providers.JsonRpcProvider(\n  `https://ethereum-sepolia.publicnode.com`\n);\nconst sepoliaProviderFilter = new ethers.providers.JsonRpcProvider(\n  `https://sepolia.gateway.tenderly.co`\n);\n\n// functional\n\nconst sender = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (!state.chainId) {\n  Ethers.provider()\n    .getNetwork()\n    .then(({ chainId }) => {\n      let network = \"incorrect\";\n      if (chainId === SEPOLIA_CHAIN_ID || chainId === OP_SEPOLIA_CHAIN_ID) {\n        network = \"testnet\";\n      }\n      if (chainId === ETH_CHAIN_ID || chainId === OP_CHAIN_ID) {\n        network = \"mainnet\";\n      }\n      console.log(\"chainId\", chainId, network);\n\n      const L1ExplorerLink = `https://${\n        network === \"testnet\" ? \"sepolia.\" : \"\"\n      }etherscan.io/tx/`;\n      const L2ExplorerLink = `https://${\n        network === \"testnet\" ? \"sepolia-optimism.\" : \"optimistic\"\n      }etherscan.io/tx/`;\n\n      State.update({ chainId, network, L1ExplorerLink, L2ExplorerLink });\n    })\n    .catch((e) => {\n      console.log(e);\n    });\n  return \"\";\n}\nconst { chainId, network } = state;\n\nif (!network) {\n  return \"\";\n}\n\nif (!VALID_CHAIN_ID.includes(chainId)) {\n  return (\n    <p>\n      {chainId} Please switch to Ethereum or Optimism mainnet; or Sepolia or OP\n      Sepolia\n    </p>\n  );\n}\n\n// TODO UPDATE contracts and mainnet providers\nconst contracts = {\n  mainnet: {\n    l1Provider: ethereumProvider,\n    l2Provider: zksyncProvider,\n    bridge: {\n      L1ETHBridgeProxy: \"0x32400084C286CF3E17e7B677ea9583e60a000324\",\n      L1ERC20BridgeProxy: \"0x57891966931Eb4Bb6FB81430E6cE0A03AAbDe063\",\n      L2ERC20Bridge: \"0x11f943b2c77b743AB90f4A0Ae7d5A4e7FCA3E102\",\n    },\n    eth: {\n      decimals: 18,\n      deposit: \"0x32400084C286CF3E17e7B677ea9583e60a000324\",\n      withdraw: \"0x000000000000000000000000000000000000800A\",\n    },\n  },\n  testnet: {\n    l1Provider: sepoliaProvider,\n    l2Provider: opSepoliaProviderOG,\n    bridge: {\n      L1ERC20BridgeProxy: \"0x927DdFcc55164a59E0F33918D13a2D559bC10ce7\",\n      L2ERC20Bridge: \"0x00ff932A6d70E2B8f1Eb4919e1e09C1923E7e57b\",\n    },\n    eth: {\n      deposit: \"0x1908e2BF4a88F91E4eF0DC72f02b8Ea36BEa2319\",\n      withdraw: \"0x000000000000000000000000000000000000800A\",\n      decimals: 18,\n    },\n  },\n};\n\n// fetch abis\n\nconst L2StandardBridgeAbi = fetch(\n  \"https://gist.githubusercontent.com/mattlockyer/4ecda9c3b707fe7e3328c9d2da9ce3a1/raw/1eae7c74e2d44df2067a1929bb8a3b2647926fde/L2StandardBridge.json\"\n);\n\nconst L1StandardBridgeProxyAbi = fetch(\n  \"https://gist.githubusercontent.com/mattlockyer/b5ddd8070db7479b527674b14b928c4d/raw/39c570a8c53c980482c44502680d0ed3c39e7848/L1StandardBridgeProxy.json\"\n);\n\nconst L2OutputOracleAbi = fetch(\n  \"https://gist.githubusercontent.com/mattlockyer/8f8d9bc4442150d425811ee15c7565de/raw/5ca76848e0febc52fe6d872926b8b3ad2c754664/L2OutputOracle.json\"\n);\n\nconst L1OptimismPortalAbi = fetch(\n  \"https://gist.githubusercontent.com/mattlockyer/186c53a813484225b0e0ed682c4673e4/raw/43be17194b0e4f4dc3611780c8a9a6c8cd12218b/OptimismPortal.json\"\n);\n\n// wait for abi to load\nif (\n  !L2StandardBridgeAbi.ok ||\n  !L1StandardBridgeProxyAbi.ok ||\n  !L2OutputOracleAbi.ok ||\n  !L1OptimismPortalAbi.ok\n) {\n  return \"\";\n}\n\nconst L2StandardBridgeContract = new ethers.Contract(\n  L2StandardBridge,\n  L2StandardBridgeAbi.body,\n  opSepoliaProvider\n);\nconst L2StandardBridgeAbiIface = new ethers.utils.Interface(\n  L2StandardBridgeAbi.body\n);\n\nconst L1StandardBridgeProxyContract = new ethers.Contract(\n  L1StandardBridgeProxy,\n  L1StandardBridgeProxyAbi.body,\n  sepoliaProviderFilter\n);\nconst L1StandardBridgeProxyIface = new ethers.utils.Interface(\n  L1StandardBridgeProxyAbi.body\n);\n\n// get logs\n\nif (sender && chainId && !state.initLogs) {\n  State.update({ initLogs: true });\n\n  function getEthWithdrawals() {\n    const ethWithdrawals = [];\n\n    L2StandardBridgeContract.queryFilter(\n      L2StandardBridgeContract.filters.WithdrawalInitiated(\n        undefined,\n        undefined,\n        sender\n      )\n    ).then((events) => {\n      console.log(\"withdrawal events\", events);\n\n      // todo use diff RPC for block range calls to OP sepolia\n\n      let withdrawalMessages = 0;\n      const withdrawalMessagesTarget = events.length;\n\n      events\n        .sort((a, b) => b.blockNumber - a.blockNumber)\n        .forEach((event) => {\n          const { args, blockNumber, transactionHash } = event;\n\n          const messagePasserAbi = [\n            \"event MessagePassed (uint256 indexed nonce, address indexed sender, address indexed target, uint256 value, uint256 gasLimit, bytes data, bytes32 withdrawalHash)\",\n          ];\n\n          const messagePasserContract = new ethers.Contract(\n            L2_L1_MESSAGE_PASSER_CONTRACT,\n            messagePasserAbi,\n            opSepoliaProviderRange\n          );\n\n          messagePasserContract\n            .queryFilter(\n              messagePasserContract.filters.MessagePassed(\n                undefined,\n                undefined,\n                \"0x5086d1eEF304eb5284A0f6720f79403b4e9bE294\",\n                undefined,\n                undefined,\n                undefined,\n                undefined\n              ),\n              blockNumber - 150,\n              blockNumber\n            )\n            .then((events) => {\n              const event = events.filter(\n                ({ data }) => data.indexOf(sender.substring(2)) > -1\n              )[0];\n\n              withdrawalMessages++;\n              console.log(\n                \"withdrawal message\",\n                withdrawalMessages,\n                blockNumber,\n                event\n              );\n\n              const [\n                messageNonce,\n                sender,\n                target,\n                value,\n                minGasLimit,\n                message,\n                withdrawalHash,\n              ] = event.args;\n\n              let withdrawal = {\n                blockNumber,\n                transactionHash,\n                messageNonce,\n                sender,\n                target,\n                value,\n                minGasLimit,\n                message,\n                withdrawalHash,\n              };\n\n              ethWithdrawals.push(withdrawal);\n\n              if (withdrawalMessages === withdrawalMessagesTarget) {\n                State.update({\n                  ethWithdrawals,\n                });\n              }\n\n              // Testing if Withdrawal is Proven\n\n              // const opPortalAbi = [\n              //   \"event WithdrawalProven (bytes32 indexed, withdrawalHash, address indexed from, address indexed to)\",\n              // ];\n\n              // const l1Contract = new ethers.Contract(\n              //   L1_OPTIMISM_PORTAL_CONTRACT,\n              //   opPortalAbi,\n              //   sepoliaProvider\n              // );\n\n              // l1Contract\n              //   .queryFilter(\n              //     l1Contract.filters.WithdrawalProven(\n              //       undefined,\n              //       undefined,\n              //       sender\n              //     ),\n              //     blockNumber - 150,\n              //     blockNumber\n              //   )\n              //   .then((events) => {\n              //     console.log(\"proving withdrawal\", events);\n              //   });\n            });\n        });\n    });\n  }\n\n  function getEthDeposits() {\n    L1StandardBridgeProxyContract.queryFilter(\n      L1StandardBridgeProxyContract.filters.ETHDepositInitiated(\n        sender,\n        sender,\n        undefined,\n        undefined\n      )\n    ).then((events) => {\n      console.log(\"deposit events\", events);\n      State.update({\n        ethDeposits: events,\n      });\n    });\n  }\n\n  getEthWithdrawals();\n  getEthDeposits();\n  return \"\";\n}\n\nconst isMainnet = chainId === 1 || chainId === 10;\nconst isOPGoerli = chainId === 420;\nconst isGoerli = chainId === 5;\n\nfunction handleDepositEth() {\n  const encodedData = L1StandardBridgeProxyIface.encodeFunctionData(\n    \"depositETH(uint32, bytes)\",\n    [200000, []]\n  );\n\n  Ethers.provider()\n    .getSigner()\n    .sendTransaction({\n      to: L1StandardBridgeProxy,\n      data: encodedData,\n      value: DEFAULT_AMOUNT,\n      gasLimit,\n    })\n    .then((tx) => {\n      consle.log(\"tx:\", tx);\n    })\n    .catch((e) => {\n      console.log(\"bridge error:\", e);\n    });\n}\n\nfunction handleDeposit(data) {\n  console.log(\"handleDeposit\", data);\n  State.update({ isLoading: true, log: undefined, explorerLink: undefined });\n\n  if (data.assetId === \"eth\") {\n    return handleDepositEth(data);\n  }\n}\n\nfunction handleWithdrawalInitiating() {\n  console.log(\"withdraw\");\n\n  const encodedData = L2StandardBridgeAbiIface.encodeFunctionData(\n    \"withdraw(address, uint256, uint32, bytes)\",\n    [ETH_WITHDRAWAL_TARGET, DEFAULT_AMOUNT, 0, []]\n  );\n\n  console.log(\"encoded\", encodedData);\n\n  Ethers.provider()\n    .getSigner()\n    .sendTransaction({\n      to: L2StandardBridge,\n      data: encodedData,\n      value: DEFAULT_AMOUNT,\n      gasLimit,\n    })\n    .then((tx) => {\n      consle.log(\"tx:\", tx);\n    })\n    .catch((e) => {\n      console.log(\"bridge error:\", e);\n    });\n}\n\nconst getMessageBedrockOutput = (l2BlockNumber, callback) => {\n  const contract = new ethers.Contract(\n    L2_OUTPUT_ORACLE_CONTRACT,\n    L2OutputOracleAbi.body,\n    goerliProvider\n  );\n\n  contract\n    .getL2OutputIndexAfter(l2BlockNumber)\n    .then((l2OutputIndex) => {\n      console.log(\"l2OutputIndex:\", l2OutputIndex.toString());\n\n      contract\n        .getL2Output(l2OutputIndex.toString())\n        .then((proposal) => {\n          console.log(\"proposal data:\", proposal);\n\n          callback({\n            outputRoot: proposal[0],\n            l1Timestamp: proposal[1].toNumber(),\n            l2BlockNumber: proposal[2].toNumber(),\n            l2OutputIndex: l2OutputIndex.toNumber(),\n          });\n        })\n        .catch((e) => {\n          console.log(\"view error 2:\", e);\n        });\n    })\n    .catch((e) => {\n      console.log(\"view error 1:\", e);\n    });\n};\n\nconst hashLowLevelMessage = (withdrawal) => {\n  const types = [\n    \"uint256\",\n    \"address\",\n    \"address\",\n    \"uint256\",\n    \"uint256\",\n    \"bytes\",\n  ];\n  const encoded = ethers.utils.defaultAbiCoder.encode(types, [\n    withdrawal.messageNonce,\n    withdrawal.sender,\n    withdrawal.target,\n    withdrawal.value,\n    withdrawal.minGasLimit,\n    withdrawal.message,\n  ]);\n  return ethers.utils.keccak256(encoded);\n};\n\nconst hashMessageHash = (messageHash) => {\n  const data = ethers.utils.defaultAbiCoder.encode(\n    [\"bytes32\", \"uint256\"],\n    [ethers.utils.hexlify(messageHash), HASH_ZERO]\n  );\n  return ethers.utils.keccak256(data);\n};\n\nconst getBedrockMessageProof = (l2BlockNumber, slot, callback) => {\n  opSepoliaProviderOG\n    .send(\"eth_getProof\", [\n      L2_L1_MESSAGE_PASSER_CONTRACT,\n      [slot],\n      l2BlockNumber,\n    ])\n    .then((proof) => {\n      const stateTrieProof = {\n        accountProof: proof.accountProof,\n        storageProof: proof.storageProof[0].proof,\n        storageValue: Big(parseInt(proof.storageProof[0].value)),\n        storageRoot: proof.storageHash,\n      };\n      console.log(\"stateTrieProof\", stateTrieProof);\n\n      opSepoliaProvider\n        .send(\"eth_getBlockByNumber\", [l2BlockNumber, false])\n        .then((block) => {\n          console.log(\"block\", block);\n\n          callback({\n            outputRootProof: {\n              version: HASH_ZERO,\n              stateRoot: block.stateRoot,\n              messagePasserStorageRoot: stateTrieProof.storageRoot,\n              latestBlockhash: block.hash,\n            },\n            withdrawalProof: stateTrieProof.storageProof,\n          });\n        });\n    });\n};\n\nconst handleWithdrawalProve = (which) => {\n  const withdrawal = state.ethWithdrawals[which];\n  console.log(\"handleWithdrawalProve\", withdrawal);\n\n  getMessageBedrockOutput(withdrawal.blockNumber, (output) => {\n    console.log(\"getMessageBedrockOutput:\", output);\n    const hash = hashLowLevelMessage(withdrawal);\n    console.log(\"hash\", hash);\n    const messageSlot = hashMessageHash(hash);\n    console.log(\"messageSlot\", messageSlot);\n    const l2BlockNumber = ethers.utils.hexlify(output.l2BlockNumber);\n    console.log(\"l2BlockNumber\", l2BlockNumber);\n\n    getBedrockMessageProof(l2BlockNumber, messageSlot, (proof) => {\n      const args = [\n        [\n          withdrawal.messageNonce,\n          withdrawal.sender,\n          withdrawal.target,\n          withdrawal.value,\n          withdrawal.minGasLimit,\n          withdrawal.message,\n        ],\n        output.l2OutputIndex,\n        [\n          proof.outputRootProof.version,\n          proof.outputRootProof.stateRoot,\n          proof.outputRootProof.messagePasserStorageRoot,\n          proof.outputRootProof.latestBlockhash,\n        ],\n        proof.withdrawalProof,\n      ];\n\n      console.log(\"proof args:\", args);\n\n      if (!isGoerli) {\n        return State.update({\n          console: \"switch to Goerli to sign the proof\",\n        });\n      }\n\n      const contract = new ethers.Contract(\n        L1_OPTIMISM_PORTAL_CONTRACT,\n        L1OptimismPortalAbi.body,\n        Ethers.provider().getSigner()\n      );\n\n      contract\n        .proveWithdrawalTransaction(...args)\n        .then((tx) => {\n          console.log(\"tx output:\", tx);\n        })\n        .catch((e) => {\n          console.log(\"error\", e);\n        });\n    });\n  });\n};\n\nconst handleWithdrawalClaim = (which) => {\n  const withdrawal = state.ethWithdrawals[which];\n  console.log(\"handleWithdrawalProve\", withdrawal);\n\n  const args = [\n    withdrawal.messageNonce,\n    withdrawal.sender,\n    withdrawal.target,\n    withdrawal.value,\n    withdrawal.minGasLimit,\n    withdrawal.message,\n  ];\n\n  const contract = new ethers.Contract(\n    L1_OPTIMISM_PORTAL_CONTRACT,\n    proofAbi,\n    Ethers.provider().getSigner()\n  );\n\n  contract\n    .finalizeWithdrawalTransaction(args)\n    .then((tx) => {\n      console.log(\"tx output:\", tx);\n    })\n    .catch((e) => {\n      console.log(\"error\", e);\n    });\n};\n\nconst tab = !state.tab || state.tab === \"deposit\" ? \"deposit\" : \"withdraw\";\nconst clone = (o) => JSON.parse(JSON.stringify(o));\nconst { deposit, withdraw } = state;\n\n// balances\n\nconst getTokenBalance = (sender, isL1, tokenAddress, decimals, callback) => {\n  if (!sender) return;\n  const encodedData = erc20IFace.encodeFunctionData(\"balanceOf\", [sender]);\n  const provider = isL1\n    ? contracts[network].l1Provider\n    : contracts[network].l2Provider;\n\n  provider\n    .call({\n      to: tokenAddress,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      if (rawBalance === \"0x\") {\n        return callback(0);\n      }\n      const receiverBalanceHex = erc20IFace.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n      const balance = Big(receiverBalanceHex.toString())\n        .div(Big(10).pow(decimals))\n        .toFixed(2)\n        .replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\");\n\n      callback(balance);\n    });\n};\n\nif (sender && !state.balancesUpdated) {\n  // l1\n  contracts[network].l1Provider.getBalance(sender).then((balance) => {\n    const cloned = clone(deposit || defaultDeposit);\n    const formatted = ethers.utils.formatUnits(balance);\n    cloned.assets[0].balance = formatted.substring(\n      0,\n      formatted.indexOf(\".\") + 5\n    );\n    State.update({ deposit: cloned });\n  });\n\n  //l2;\n  contracts[network].l2Provider.getBalance(sender).then((balance) => {\n    const cloned = clone(withdraw || defaultWithdraw);\n    const formatted = ethers.utils.formatUnits(balance);\n    cloned.assets[0].balance = formatted.substring(\n      0,\n      formatted.indexOf(\".\") + 5\n    );\n    State.update({ withdraw: cloned });\n  });\n\n  State.update({ balancesUpdated: true });\n  return \"\";\n}\n\n// end functional\n\nif (!sender) {\n  return (\n    <div className=\"w3button\">\n      <Web3Connect connectLabel=\"Connect to a wallet\" />\n    </div>\n  );\n}\n\n// bridge-ui functions\n\nconst onAction = (data) => {\n  if (!data.amount) return;\n  if (data.action === \"deposit\") handleDeposit(data);\n  if (data.action === \"withdraw\") handleWithdraw(data);\n};\n\nconst onTabChange = (tab) => {\n  let log = null;\n\n  const depositDisabled =\n    tab === \"deposit\" &&\n    (chainId === OP_CHAIN_ID || chainId === OP_SEPOLIA_CHAIN_ID);\n  const withdrawDisabled =\n    tab === \"withdraw\" &&\n    (chainId === ETHEREUM_CHAIN_ID || chainId === SEPOLIA_CHAIN_ID);\n\n  if (depositDisabled) {\n    log = depositDisabledMsg;\n  }\n  if (withdrawDisabled) {\n    log = withdrawDisabledMsg;\n  }\n\n  State.update({\n    deposit: clone(withdraw),\n    withdraw: clone(deposit),\n    depositDisabled,\n    withdrawDisabled,\n    tab,\n    log,\n  });\n};\n\nconst allWithdrawals = [...state.ethWithdrawals];\nconst allDeposits = [...state.ethDeposits];\n\nreturn (\n  <>\n    <Widget\n      src=\"mattlock.near/widget/bridge-ui\"\n      props={{\n        ...state,\n        onTabChange,\n        onAction,\n        title: \"opBridge\",\n        tokens,\n        allDeposits,\n        allWithdrawals,\n      }}\n    />\n\n    <>\n      <button onClick={handleDepositETH}>\n        Deposit {DEFAULT_AMOUNT_ETH} ETH to L2\n      </button>\n      <br />\n      <br />\n      <p>To initiate a withdraw, switch to OP Goerli network</p>\n\n      {state.ethWithdrawals.length === 0 && <h3>Loading ETH Withdrawals</h3>}\n      {!isGoerli && <p>To prove ethWithdrawals switch to ETH Goerli</p>}\n      {state.ethWithdrawals.map(({ transactionHash }, i) => {\n        return (\n          <>\n            <br />\n            <br />\n            <p>TX hash: {transactionHash}</p>\n            <button onClick={() => handleWithdrawalProve(i)}>\n              Prove Withdrawal\n            </button>\n            <button onClick={() => handleWithdrawalClaim(i)}>\n              Claim Withdrawal\n            </button>\n          </>\n        );\n      })}\n    </>\n\n    <>\n      <button onClick={handleWithdrawalInitiating}>\n        Initiate Withdrawal of {DEFAULT_AMOUNT_ETH} ETH on L2\n      </button>\n      <br />\n      <br />\n      <p>\n        To make a deposit, or prove a withdraw, switch to ETH Goerli network\n      </p>\n    </>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mattlock.near/widget/op-bridge-demo", "fact_widget_deployments_id": "6951609dc23c756b3d3d04bc75e90c13", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 23}