{"tx_hash": "8HNSpg9CS7u5eiSTpTUVrC713GsiUqxDzo5VRjqB76jr", "action_id_social": "4fru7SCHsfrGBCib6i7bA8N861zAnLirLt7LKx5vQ5Qp-0-widget", "block_id": 114922571, "block_timestamp": "2024-03-18T00:50:10.194Z", "signer_id": "socializer.near", "widget_name": "Dashboard", "source_code": "const Owner = \"socializer.near\";\nconst accountId = context.accountId;\nconst API_URL = \"http://localhost:3000/api\";\n\nconst changePage = props?.changePage || (() => {});\nconst page = props?.page || \"\";\n\nconst columns = [\n  {\n    title: \"Project/User\",\n    key: \"accountId\",\n    description: \"Project/User\",\n    width: 20,\n    project: true,\n  },\n  {\n    title: \"Near Social  Post\",\n    key: \"social\",\n    description: \"Near Social  Post\",\n    width: 40,\n    align: \"left\",\n  },\n  {\n    title: \"Ends In\",\n    key: \"endsin\",\n    description: \"Ends In\",\n    width: 15,\n    align: \"left\",\n  },\n  {\n    title: \"Reward\",\n    key: \"reward\",\n    description: \"Reward\",\n    width: 8,\n    align: \"left\",\n  },\n  {\n    title: \"Total Rewards\",\n    key: \"total_reward\",\n    description: \"Total Rewards\",\n    width: 10,\n    align: \"left\",\n  },\n  {\n    title: \"Status\",\n    key: \"status\",\n    description: \"Status\",\n    width: 10,\n    align: \"center\",\n    button: true,\n  },\n  {\n    title: \"Engage Link\",\n    key: \"post_link\",\n    description: \"Engage Link\",\n    width: 10,\n    align: \"center\",\n    link: true,\n  },\n];\n\nconst tableData = [\n  {\n    user: \"Near Degens1\",\n    avatar:\n      \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n    social: \"Have you seen our monthly stats? With over 45 clien...\",\n    endsin: \"Ends in 1hr 10m 50s\",\n    reward: \"1 Near\",\n    total_rewards: \"10 Near\",\n    status: \"live\",\n    engage: \"link\",\n  },\n  {\n    user: \"Near Degens2\",\n    avatar:\n      \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n    social: \"Have you seen our monthly stats? With over 45 clien...\",\n    endsin: \"Ends in 1hr 10m 50s\",\n    reward: \"1 Near\",\n    total_rewards: \"10 Near\",\n    status: \"live\",\n    engage: \"\",\n  },\n  {\n    user: \"Near Degens3\",\n    avatar:\n      \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n    social: \"Have you seen our monthly stats? With over 45 clien...\",\n    endsin: \"Ends in 1hr 10m 50s\",\n    reward: \"1 Near\",\n    total_rewards: \"10 Near\",\n    status: \"live\",\n    engage: \"\",\n  },\n  {\n    user: \"Near Degens4\",\n    avatar:\n      \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n    social: \"Have you seen our monthly stats? With over 45 clien...\",\n    endsin: \"Ends in 1hr 10m 50s\",\n    reward: \"1 Near\",\n    total_rewards: \"10 Near\",\n    status: \"live\",\n    engage: \"link\",\n  },\n  {\n    user: \"Near Degens5\",\n    avatar:\n      \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n    social: \"Have you seen our monthly stats? With over 45 clien...\",\n    endsin: \"Ends in 1hr 10m 50s\",\n    reward: \"1 Near\",\n    total_rewards: \"10 Near\",\n    status: \"live\",\n    engage: \"link\",\n  },\n];\n\nconst options = [\n  {\n    text: \"Ended\",\n    value: 1,\n  },\n  {\n    text: \"Claimed\",\n    value: 2,\n  },\n  {\n    text: \"Unclaimed\",\n    value: 3,\n  },\n];\n\nState.init({\n  loaded: false,\n  campaigns: [],\n  error: \"\",\n});\n\nconst MainComponent = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background: #FAFAFA;\n  flex-direction: column;\n`;\n\nconst TableComponent = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 13px;\n`;\n\nconst HeadComponent = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 32px;\n`;\n\nconst TitleComponent = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  gap: 32px;\n`;\n\nconst FilterContent = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n\nconst TitleContent = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  gap:14px;\n`;\n\nconst SearchInput = styled.input`\n  border-radius: 10px;\n  padding: 14px 48px 14px 28px;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: normal;\n  letter-spacing: -0.12px;\n`;\n\nconst Button = styled.button`\n  display: inline-flex;\n  padding: 12px 24px;\n  align-items: flex-start;\n  gap: 10px;\n  border-radius: 6px;\n  background: var(--Dark, #121212); \n  color: var(--light_95, #F3F3F3);\n  text-align: center;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: capitalize;\n  line-height: normal;\n`;\n\nconst SearchIcon = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    style={{ position: \"absolute\", right: 28 }}\n  >\n    <g clip-path=\"url(#clip0_1_3884)\">\n      <path\n        d=\"M9.58329 17.5C13.9555 17.5 17.5 13.9556 17.5 9.58334C17.5 5.21108 13.9555 1.66667 9.58329 1.66667C5.21104 1.66667 1.66663 5.21108 1.66663 9.58334C1.66663 13.9556 5.21104 17.5 9.58329 17.5Z\"\n        stroke=\"#595959\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M18.3333 18.3333L16.6666 16.6667\"\n        stroke=\"#595959\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_1_3884\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nconst getCampaignData = () => {\n  return asyncFetch(API_URL + `/campaign?accountId=${accountId}`).then(\n    (res) => {\n      if (res.ok) {\n        const { error, data } = res.body;\n        if (error) State.update({ loaded: true, error });\n        State.update({\n          loaded: true,\n          campaigns: data,\n        });\n      } else {\n        State.update({\n          loaded: true,\n          error: res.error,\n        });\n      }\n    }\n  );\n};\n\nif (!state.loaded) getCampaignData();\n\nif (!state.loaded) return <Widget src={`${Owner}/widget/preload`} />;\n\nreturn (\n  <MainComponent>\n    <HeadComponent>\n      <TitleComponent>\n        <FilterContent>\n          <div\n            style={{\n              position: \"relative\",\n              display: \"flex\",\n              alignItems: \"center\",\n            }}\n          >\n            <SearchInput placeholder=\"Search\" />\n            <SearchIcon />\n          </div>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 21,\n            }}\n          >\n            <Widget\n              props={{\n                noLabel: true,\n                placeholder: \"Live-Campaigns\",\n                options,\n              }}\n              src={`${Owner}/widget/Select`}\n            />\n            <Button\n              onClick={() => {\n                changePage(\"new_campaigns\");\n              }}\n            >\n              {\"+ Create New Campaigns\"}\n            </Button>\n          </div>\n        </FilterContent>\n        <TitleContent>\n          <h4 style={{ margin: 0 }}>Live Campaigns</h4>\n          <p style={{ fontSize: 14, margin: 0 }}>\n            {`The list of Near Social Posts are offering rewards`}\n          </p>\n          {state.error && (\n            <p style={{ fontSize: 14, margin: 0, color: \"red\" }}>\n              {state.error}\n            </p>\n          )}\n        </TitleContent>\n      </TitleComponent>\n    </HeadComponent>\n    <TableComponent>\n      <Widget\n        src={`${Owner}/widget/table-pagination`}\n        props={{\n          themeColor: { table_pagination: themeColor.table_pagination },\n          data: state.campaigns,\n          columns,\n          rowsCount: 4,\n        }}\n      />\n    </TableComponent>\n  </MainComponent>\n);\n", "metadata": {"fork_of": "socializer.near/widget/Dashboard@114922132"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/socializer.near/widget/Dashboard", "fact_widget_deployments_id": "172e7c7c8f25a1513fd645c7c4dbb59c", "inserted_timestamp": "2024-03-18T02:31:38.464Z", "modified_timestamp": "2024-03-18T02:31:38.464Z", "__row_index": 13}