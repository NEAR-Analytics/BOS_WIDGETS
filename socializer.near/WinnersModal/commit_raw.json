{"tx_hash": "AwZJ9NGgApwgwn5CoG6YyjUPmfeuhJFYKMW2e7Zybp4V", "action_id_social": "9hwwQkyipZn1xboyYs61iZ5yNEU892BC2c3gmRCxfTXZ-0-widget", "block_id": 116538741, "block_timestamp": "2024-04-10T12:09:49.573Z", "signer_id": "socializer.near", "widget_name": "WinnersModal", "source_code": "const accountId = context.accountId;\nif (!accountId) return;\n\nconst API_URL = props.API_URL || \"http://localhost:3000\";\n\nconst { onClose, data } = props;\n\nState.init({\n  error: \"\",\n  winners: [],\n  loading: true,\n});\n\nconst ModalOverlay = styled.div`\n  background: white;\n  position: absolute;\n  right: 0px;\n  border-radius: 3px;\n  border: 1px solid;\n  display: flex;\n  flex-direction: column;\n  z-index: 100;\n  width: 400px;\n  height: 100%;\n  @media (max-width: 510px) {\n    right: 10px;\n    top: 54px;\n    width: 96%;\n  }\n`;\n\nconst ModalContent = styled.div`\n  padding: 20px;\n  width: 100%;\n  color: black;\n  border-radius: 4px;\n  display: flex;\n  flex-direction: column;\n  gap:1px;\n  & p{\n    margin: 0\n  }\n`;\n\nconst ModalAction = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 15px 40px;\n`;\n\nconst ModalTitle = styled.h4`\n  color: black;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0\n`;\n\nconst Button = styled.button`\n  padding: 8px 20px;\n  background-color:#121212;\n  color: white;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  width: 150px;\n  &:hover {\n    background-color: grey;\n    color: #191a1a;\n  }\n  &:active {\n    background-color: grey;\n    color: #191a1a;\n  }\n`;\n\nconst PostLink = styled.a`\n  padding: 8px 20px;\n  background-color:#121212;\n  color: white;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  width: 150px;\n  &:hover {\n    background-color: grey;\n    color: #191a1a;\n  }\n  &:active {\n    background-color: grey;\n    color: #191a1a;\n  }\n`;\n\nconst TextField = styled.input`\npadding: 10px 15px;\nfont-size: 16px;\nborder-radius: 6px;\nborder: 2px solid rgb(255, 255, 255);\nbackground-color: #191a1a;\n`;\n\nconst getWinners = () => {\n  State.update({ error: \"\", loading: true });\n  asyncFetch(API_URL + `/api/campaign/winners?id=${data._id}`).then((res) => {\n    if (res.ok) {\n      const { error, data } = res.body;\n      if (error) State.update({ error, loading: false });\n      else if (data && data.length) {\n        const listData = data.map((obj) => {\n          if (obj.accountId.length > 30) {\n            const firstPart = obj.accountId.slice(0, 5);\n            const remainingPart = obj.accountId.slice(-5);\n            obj.accountId = `${firstPart} ... ${remainingPart}`;\n          }\n          return obj;\n        });\n        State.update({\n          winners: listData,\n          loaded: true,\n          loading: false,\n        });\n      }\n    }\n  });\n};\n\nif (!state.loaded) getWinners();\n\nreturn (\n  <ModalOverlay>\n    <ModalContent>\n      <button\n        style={{\n          width: 40,\n          position: \"absolute\",\n          right: 19,\n          background: \"unset\",\n          borderColor: \"white\",\n          color: \"black\",\n        }}\n        onClick={() => onClose(\"\")}\n      >\n        X\n      </button>\n      <ModalTitle>{`Winners of Campaign ${data.id}`}</ModalTitle>\n      <hr />\n\n      <div\n        className=\"d-flex\"\n        style={{ flexDirection: \"column\", gap: 25, padding: 10 }}\n      >\n        {state.winners.map((item, i) => {\n          //   const profile = Social.getr(`${item.accountId}/profile`);\n          //   return <p>{`${i + 1}) ${profile.name || item.accountId} `}</p>;\n          return <p>{`${i + 1}) ${item.accountId} `}</p>;\n        })}\n      </div>\n    </ModalContent>\n  </ModalOverlay>\n);\n", "metadata": {"fork_of": "socializer.near/widget/WinnersModal@116056002"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/socializer.near/widget/WinnersModal", "fact_widget_deployments_id": "ec7f084b97b922d15f4f249f4d01aa25", "inserted_timestamp": "2024-04-10T13:40:59.984Z", "modified_timestamp": "2024-04-10T13:40:59.984Z", "__row_index": 5}