{"tx_hash": "8dCrvYdBnxGAabQPWq9qiYKaQFTCc5vigcKEmiedGo2V", "action_id_social": "BUV4bz83ryGRBSXXTT64CDFcQJe2ueZ8vdFCvajoY9FV-0-widget", "block_id": 100297198, "block_timestamp": "2023-09-03T10:56:10.482Z", "signer_id": "cuongdcdev.near", "widget_name": "IframeEmbedExternal", "source_code": "props.src = \"http://localhost\";\nif (!props.src) {\n  return (\n    <>\n      Plz set url first! (Also make sure the site allows embedded in an iframe)\n    </>\n  );\n}\nconst Css = styled.b`\nhtml {overflow: auto};\niframe {\n    margin: 0px;\n    padding: 0px;\n    height: 100%;\n    min-height: 5000px;\n    border: none;\n    display: block;\n    width: 100%;\n    border: none;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\n.DialogOverlay {\n  background-color: rgba(0, 0, 0, 0.68);\n  position: fixed;\n  inset: 0;\n  animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1);\n}\n\n.DialogContent {\n  background-color: white;\n  border-radius: 6px;\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 90vw;\n  max-width: 450px;\n  max-height: 450px;\n  // height: 450px;\n  max-height: 85vh;\n  padding: 25px;\n  animation: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);\n}\n.DialogContent:focus {\n  outline: none;\n}\n\n.DialogDescription {\n  margin: 10px 0 20px;\n  color: var(--mauve11);\n  font-size: 15px;\n  line-height: 1.5;\n}\n\n@keyframes overlayShow {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes contentShow {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -48%) scale(0.5);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n`;\n\nState.init({\n  opened: false,\n});\n\nreturn (\n  <>\n    <Css>\n      <Dialog.Root open={state.opened}>\n        <Dialog.Overlay className=\"DialogOverlay\" />\n        <Dialog.Content className=\"DialogContent\">\n          <Dialog.Description className=\"DialogDescription\">\n            <a href={state.url} className=\"link-primary\" target=\"_blank\">\n              Click here to open the link\n              <p className=\"fw-light fst-italic text-truncate\">\n                <small>{state.url}</small>\n              </p>\n            </a>\n          </Dialog.Description>\n          <div>\n            <a\n              className=\"btn btn-outline-primary btn-sm px-4\"\n              href={state.url}\n              target=\"_blank\"\n            >\n              Open Link\n            </a>\n            <a\n              aria-label=\"Close\"\n              className=\"btn mx-2 btn-outline-dark btn-sm\"\n              onClick={() => {\n                State.update({ opened: false });\n              }}\n            >\n              Close\n            </a>\n          </div>\n        </Dialog.Content>\n      </Dialog.Root>\n\n      <iframe\n        src={props.src}\n        onMessage={(rs) => {\n          State.update({ opened: true, url: rs.url, rs: rs });\n        }}\n        message={{ iframeDisableLink: true }}\n        frameborder=\"0\"\n        marginheight=\"0\"\n        marginwidth=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        scrolling=\"auto\"\n      ></iframe>\n    </Css>\n  </>\n);\n", "metadata": {"description": "# Embed website + allow open link in a new tab\n\n![iframe embed](https://ipfs.near.social/ipfs/bafkreihrmur7dhenzcdjxbrv2dc6blp4rlxv3464taanjkf4vdtqibne2a)\n\n### Step1: Embed  the js script to the site \nThis allow the website can post message to #NEAR #BOS so the link can be opened externally.\n```\n<script>\n\twindow.addEventListener(\"message\", function(event) {\n\t  var links = document.querySelectorAll(\"a\");\n\t  for( var i = 0; i < links.length ; i++ ){\n\t      links[i].addEventListener(\"click\" , function(e){\n\t        if(event.data.iframeDisableLink){\n\t          e.preventDefault();\n\t        }\n\t       //post url to the parent window (#BOS in this case)\n\t      window.parent.postMessage({\n\t        url: this.href \n\t      }, \"*\");\n\t    });\t\n\t  }\n\t});\n</script>\n```\nLearn more about how it works here: https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage \n### Step2: Using the Widget\nreplace `YOUR_URL_HERE` with the actual website\n```\n  <Widget\n    src=\"cuongdcdev.near/widget/IframeEmbedExternal\"\n    props={{\n      src: \"YOUR_URL_HERE\",\n    }}\n  ></Widget>\n```", "image": {"ipfs_cid": "bafkreidnpcvotse6rtwgftc5v67yu5skumsdi4cybpidz5neoiln77euby"}, "name": "Iframe Embed External", "tags": {"app": "", "component": "", "iframe": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cuongdcdev.near/widget/IframeEmbedExternal", "fact_widget_deployments_id": "1a9bf1757618e7528a16fab5eed61f8e", "inserted_timestamp": "2023-09-03T12:41:15.955Z", "modified_timestamp": "2023-09-03T12:41:15.955Z", "__row_index": 1}