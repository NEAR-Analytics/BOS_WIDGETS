{"tx_hash": "CKYgSmcmaqmGxex4QUc9RYAVyiUX2i8pRUFBfTqvZTzk", "action_id_social": "7dgp5SDLuFmbcCtKevi7anYWXLMeK2Y9W89zcEbefDzf-0-widget", "block_id": 101341018, "block_timestamp": "2023-09-17T16:56:27.874Z", "signer_id": "cuongdcdev.near", "widget_name": "BOSFeedback", "source_code": "const feedbackEndpoint = props.endpoint\n  ? props.endpoint\n  : \"https://test1.sctuts.com\";\nconst projectName = props.projectName ? props.projectName : \"uncategorized\";\n\nconst thankyou = props.thankyou\n  ? props.thankyou\n  : \"Your feedback was sent! Thanks!\";\nconst errorMsg = props.errorMsg\n  ? props.errorMsg\n  : \"Something wrong,plz try again\";\nconst formTitle = props.txtTitle ? props.txtTitle : \"Feedback or support form\";\nconst userWalletAddr = context.accountId;\nconst txtContact = props.txtContact\n  ? props.txtContact\n  : \"Contact address (optional)\";\nconst txtFeedback = props.txtFeedback ? props.txtFeedback : \"Feedback message\";\n\nconst creatorId = \"cuongdcdev.testnet\";\n\nconst Css = styled.b`\n  .DialogOverlay {\n    background-color: rgba(0, 0, 0, 0.68);\n    position: fixed;\n    inset: 0;\n    animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1);\n    z-index:1111;\n\n  }\n  \n  .DialogContent {\n    background-color: white;\n    border-radius: 6px;\n    box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 90vw;\n    max-width: 450px;\n    max-height: 450px;\n    // height: 450px;\n    max-height: 85vh;\n    padding: 25px;\n    animation: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);\n    z-index:2222;\n\n  }\n  .DialogContent:focus {\n    outline: none;\n  }\n  \n  .DialogDescription {\n    margin: 10px 0 20px;\n    color: var(--mauve11);\n    font-size: 15px;\n    line-height: 1.5;\n  }\n  \n  .closeBtn{\n    position: absolute;\n    right: 0;\n    top: 10px;\n  }\n\n  @keyframes overlayShow {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  \n  @keyframes contentShow {\n    from {\n      opacity: 0;\n      transform: translate(-50%, -48%) scale(0.5);\n    }\n    to {\n      opacity: 1;\n      transform: translate(-50%, -50%) scale(1);\n    }\n  }\n  `;\n\nState.init({\n  opened: props.autoOpen,\n  feedbackSent: false,\n  showMsg: false,\n});\n\nconst onChangeValue = (t, v) => {\n  State.update({\n    [t]: v,\n  });\n};\n\nconst submitFeedback = () => {\n  if (state.fFeedback && state.fFeedback.length > 1) {\n    console.log(\"Submit feedback: \", state);\n\n    State.update({\n      showMsg: false,\n    });\n\n    //submit user feedback\n    asyncFetch(feedbackEndpoint + \"/wp-json/bosfb/v1/new\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        wallet_addr: userWalletAddr,\n        contact_addr: state.fContact,\n        message: state.fFeedback,\n        project_name: projectName,\n      }),\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n    })\n      .then((res) => {\n        if (res.ok) {\n          State.update({\n            feedbackSent: true,\n            showMsg: thankyou,\n          });\n        } else {\n          State.update({\n            feedbackSent: false,\n            showMsg: errorMsg,\n          });\n        }\n      })\n      .catch((res) => {\n        console.log(\"Error response: \", res);\n      });\n\n    //end submit feedback\n  } else {\n    State.update({\n      showMsg: \"Please fill the feedback form!\",\n    });\n  }\n};\n\nreturn (\n  <>\n    <Css>\n      <Dialog.Root open={state.opened}>\n        <Dialog.Overlay className=\"DialogOverlay\" />\n        <Dialog.Content className=\"DialogContent\">\n          <h6> {formTitle}</h6>\n\n          <div className=\"DialogBody\">\n            <a\n              aria-label=\"Close\"\n              className=\"btn btn-lg closeBtn\"\n              onClick={() => {\n                State.update({ opened: false });\n              }}\n            >\n              <i class=\"bi bi-x-circle-fill\"></i>\n            </a>\n\n            {/* feedback form  */}\n\n            {!state.feedbackSent && (\n              <div className=\"feedback-wrap\">\n                <div className=\"form-outline mb-2\">\n                  <textarea\n                    className=\"form-control\"\n                    rows=\"4\"\n                    placeholder={txtFeedback}\n                    onChange={(e) => {\n                      onChangeValue(\"fFeedback\", e.target.value);\n                    }}\n                  ></textarea>\n                </div>\n\n                {/* <!-- Email input --> */}\n                <div className=\"form-outline mb-2\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    onChange={(e) => {\n                      onChangeValue(\"fContact\", e.target.value);\n                    }}\n                    placeholder={txtContact}\n                  />\n                </div>\n\n                <button\n                  className=\"btn btn-primary btn-sm px-4\"\n                  onClick={(e) => {\n                    console.log(\"submit\");\n                    submitFeedback();\n                  }}\n                >\n                  Send\n                </button>\n              </div>\n            )}\n\n            {state.showMsg && (\n              <>\n                <p className=\"text text-danger\">{state.showMsg}</p>\n              </>\n            )}\n            {/* close feedback form  */}\n          </div>\n        </Dialog.Content>\n      </Dialog.Root>\n    </Css>\n\n    {/* btn float */}\n    <button\n      className=\"btn btn-secondary btn-outline\"\n      style={{\n        borderRadius: \"100%\",\n        width: props.size ? props.size : \"3em\",\n        height: props.size ? props.size : \"3em\",\n        position: \"fixed\",\n        right: 5,\n        bottom: 10,\n        zIndex: 999,\n        display: state.opened ? \"none\" : \"block\",\n      }}\n      onClick={() => {\n        State.update({\n          opened: state.opened ? false : true,\n          feedbackSent: false,\n          showMsg: false,\n        });\n      }}\n    >\n      <i className=\"bi bi-question-square\"></i>\n    </button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cuongdcdev.near/widget/BOSFeedback", "fact_widget_deployments_id": "04fa95ae009e2853a45c5b24e2d6be6b", "inserted_timestamp": "2023-09-17T18:41:12.882Z", "modified_timestamp": "2023-09-17T18:41:12.882Z", "__row_index": 5}