{"tx_hash": "67u4h34Eya8QdhG5vyDrGZUZjhM7eENh1MgvNGXA5wMS", "action_id_social": "NsXLPkU8anWq5WoYUuLGNxVBQrCEnRZDSDw9CUMGxCC-0-widget", "block_id": 107300435, "block_timestamp": "2023-12-06T18:29:12.540Z", "signer_id": "eduohe.near", "widget_name": "Analytics.Snoopy", "source_code": "const fetchResult = fetch(\n  \"https://storage.googleapis.com/databricks-near-query-runner/output/total_fast_auth_by_date.json\"\n);\n\nif (!fetchResult) {\n  return \"Loading data...\";\n}\nif (!fetchResult.ok) {\n  return \"Failed to fetch data\";\n}\n\nconst parsed = JSON.parse(fetchResult.body);\nconst dataset = parsed.data\n  .sort((a, b) => a.start_of_the_week - b.start_of_the_week)\n  .map((row) => ({\n    \"Total Fast Auth Accounts\": row.total_fast_auth_acounts,\n    Date: new Date(row.start_of_the_week).toISOString().substring(0, 10),\n  }));\n\nconst colsToShow = [\"Total Fast Auth Accounts\"];\nconst definition = {\n  title: {\n    text: \"Bar: Fast Auth Accounts by Date\",\n    subtext: `Executed by NEAR Data Platform at ${new Date(\n      parsed.executed_at\n    ).toLocaleString()}`,\n  },\n  tooltip: {\n    trigger: \"axis\",\n  },\n  legend: {\n    data: colsToShow,\n    top: \"50\",\n  },\n  grid: {\n    left: \"3%\",\n    right: \"4%\",\n    bottom: \"3%\",\n    top: \"100\",\n    containLabel: true,\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {},\n    },\n  },\n  xAxis: {\n    type: \"category\",\n    boundaryGap: false,\n    data: dataset.map((r) => r.Date),\n  },\n  yAxis: {\n    type: \"value\",\n  },\n  series: colsToShow.map((col) => ({\n    name: col,\n    type: \"bar\",\n    data: dataset.map((r) => r[col]),\n  })),\n};\n\nconst definition2 = {\n  title: {\n    text: \"Line: Fast Auth Accounts by Date 2nd chart\",\n    subtext: `Executed by NEAR Data Platform at ${new Date(\n      parsed.executed_at\n    ).toLocaleString()}`,\n  },\n  tooltip: {\n    trigger: \"axis\",\n  },\n  legend: {\n    data: colsToShow,\n    top: \"50\",\n  },\n  grid: {\n    left: \"3%\",\n    right: \"4%\",\n    bottom: \"3%\",\n    top: \"100\",\n    containLabel: true,\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {},\n    },\n  },\n  xAxis: {\n    type: \"category\",\n    boundaryGap: false,\n    data: dataset.map((r) => r.Date),\n  },\n  yAxis: {\n    type: \"value\",\n  },\n  series: colsToShow.map((col) => ({\n    name: col,\n    type: \"line\",\n    data: dataset.map((r) => r[col]),\n  })),\n};\n\nreturn (\n  <div>\n    <Widget src={`nearpavel.near/widget/EChart`} props={{ definition }} />\n    <Widget\n      src={`nearpavel.near/widget/EChart`}\n      props={{ definition: definition2 }}\n    />\n  </div>\n);\n", "metadata": {"fork_of": "eduohe.near/widget/Analytics.Snoopy@107300096"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/eduohe.near/widget/Analytics.Snoopy", "fact_widget_deployments_id": "3789fdd60b3065907d1d3b720908138f", "inserted_timestamp": "2023-12-06T20:32:57.011Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}