{"tx_hash": "FbCp7qxRhm7LGQcU9AhpC6jpT6mAkfbxunrM9sE1W7b8", "action_id_social": "4cqGnoAFNp57KX3kt51joYBA84ZoNktZmGdG8J4roGzs-0-widget", "block_id": 108280896, "block_timestamp": "2023-12-18T21:46:46.273Z", "signer_id": "coolmouse.near", "widget_name": "Keystone.Signers.Index", "source_code": "// constants\n\nconst abi = [\n  // signer(pos: uint256)\n  {\n    inputs: [\n      {\n        name: \"pos\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"signer\",\n    outputs: [\n      {\n        name: \"\",\n        type: \"address\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  // signer_count()\n  {\n    inputs: [],\n    name: \"signer_count\",\n    outputs: [\n      {\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n];\nconst keystoneAddress = \"0xe8E8ED169DcAFD00C3C8Cc26Df4E273b14060d4e\"; // Bitkub Chain Mainnet\n\n// states\n\nState.init({\n  page: [],\n  pageNum: 1,\n  pageSize: 20,\n});\n\n// lifecycle hooks\n\n/**\n * onMounted\n */\nuseEffect(() => {\n  if (Ethers.provider()) {\n    const iface = new ethers.utils.Interface(abi);\n    const encodedData = iface.encodeFunctionData(\"signer_count\", []);\n    Ethers.provider()\n      .call({\n        data: encodedData,\n        to: keystoneAddress,\n      })\n      .then((rawSignerCount) => {\n        const countHex = iface.decodeFunctionResult(\n          \"signer_count\",\n          rawSignerCount\n        );\n        let signers = [];\n        for (let i = 0; i < parseInt(countHex.toString()); i++) {\n          const encodedData = iface.encodeFunctionData(\"signer\", [i]);\n          Ethers.provider()\n            .call({\n              data: encodedData,\n              to: keystoneAddress,\n            })\n            .then((rawSigner) => {\n              const signerHex = iface.decodeFunctionResult(\"signer\", rawSigner);\n              signers.push(signerHex.toString());\n            })\n            .catch(console.error);\n        }\n        State.update({ page: signers });\n      })\n      .catch(console.error);\n  }\n}, []);\n\n// styles\n\nconst KeystoneContent = styled.div`\n  h1, h2, h3, h4, h5 {\n    margin: 0;\n  }\n  ol, ul, menu {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  .breadcrumbs {\n    max-width: 100%;\n    overflow-x: auto;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }\n  .breadcrumbs > ul, .breadcrumbs > ol {\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    min-height: min-content;\n  }\n  .breadcrumbs > ul > li, .breadcrumbs > ol > li {\n    display: flex;\n    align-items: center;\n  }\n  .breadcrumbs > ul > li + ::before, .breadcrumbs > ol > li + ::before {\n    content: \"\";\n    margin-left: 0.5rem;\n    margin-right: 0.75rem;\n    display: block;\n    height: 0.375rem;\n    width: 0.375rem;\n    transform: matrix(0.707107, 0.707107, -0.707107, 0.707107, 0, 0);\n    opacity: 0.4;\n    border-top: 1px solid;\n    border-right: 1px solid;\n    background-color: transparent;\n  }\n  .breadcrumbs > ul > li > a, .breadcrumbs > ol > li > a {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n  }\n  .mx-20 {\n    margin-left: 5rem;\n    margin-right: 5rem;\n  }\n  .overflow-x-auto {\n    overflow-x: auto;\n  }\n  .pt-4 {\n    padding-top: 1rem;\n  }\n  .text-lg {\n    font-size: 1.125rem;\n    line-height: 1.75rem;\n  }\n  .w-full {\n    width: 100%;\n  }\n`;\n\nreturn (\n  <>\n    <Widget src=\"coolmouse.near/widget/Keystone.Navbar\" />\n    <KeystoneContent>\n      <div className=\"overflow-x-auto mx-20 pt-4\">\n        <div className=\"text-lg breadcrumbs\">\n          <ul>\n            <li>\n              <Link href={\"/coolmouse.near/widget/Keystone.Index\"}> Home </Link>\n            </li>\n            <li>Signers</li>\n          </ul>\n        </div>\n        <table className=\"w-full text-center\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>Address</th>\n              <th></th>\n            </tr>\n          </thead>\n          {loading ? (\n            <tbody className=\"animate-pulse space-x-4\">\n              {[...Array(state.pageSize).keys()].map((index) => (\n                <tr key={index}>\n                  {index % 3 != 0 && (\n                    <td className=\"py-3\" colSpan={index % 3}>\n                      <div className=\"h-3 bg-slate-300 rounded\"></div>\n                    </td>\n                  )}\n                  <td className=\"py-3\" colSpan={3 - (index % 3)}>\n                    <div className=\"h-3 bg-slate-300 rounded\"></div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          ) : (\n            <tbody>\n              {state.page.map((signer, index) => (\n                <tr className=\"cursor-pointer transition duration-200 hover:scale-y-110 hover:scale-x-[0.99] hover\">\n                  <td className=\"px-0 font-bold\">\n                    {(state.pageNum - 1) * state.pageSize + index + 1}\n                  </td>\n                  <td>{signer}</td>\n                  <td></td>\n                </tr>\n              ))}\n            </tbody>\n          )}\n          <tfoot>\n            <tr>\n              <th></th>\n              <th>Address</th>\n              <th></th>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </KeystoneContent>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/coolmouse.near/widget/Keystone.Signers.Index", "fact_widget_deployments_id": "649e171a6331612f490e02c0201a0035", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}