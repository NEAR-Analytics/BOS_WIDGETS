{"tx_hash": "7RVyBHFyWrrZUwJT6jjTLxhVPz9YZf8Kg5pHJdgn9afS", "action_id_social": "B4ZQVcWPJeJdjxzdLzLxTEeoa1sWBrAkELCFhw83Wjaz-0-widget", "block_id": 96462020, "block_timestamp": "2023-07-14T15:21:03.075Z", "signer_id": "2b37d6181e8f5757c38b5fc7454e11ae1a3eee4cc1ca69c26fb1678dd30fddd6", "widget_name": "AfroShareTemplate", "source_code": null, "metadata": null, "branch": {"draft": {"": "let { address, tokenId } = props;\nState.init({\n  loading: false,\n  showLogin: true,\n  token: {},\n  error: null,\n  signer: null,\n});\n\nconst alchemyApiKey = props.alchemyApiKey || \"docs-demo\";\n\nconst loadNFT = () => {\n  State.update({ loading: true });\n  const options = { method: \"GET\", headers: { accept: \"application/json\" } };\n  const nfts = fetch(\n    `https://eth-goerli.g.alchemy.com/nft/v2/${alchemyApiKey}/getNFTsForCollection?contractAddress=${address}&withMetadata=true&startToken=${tokenId}&limit=1`,\n    options\n  );\n  console.log(\"nft\", nfts);\n  if (nfts.status === 403) {\n    State.update({ error: \"Please add an Alchemy API key\" });\n  } else {\n    State.update({ error: \"\" });\n  }\n  State.update({ token: nfts.body.nfts[0] });\n  console.log(\"state.token\", state.token);\n  State.update({ loading: false });\n\n  const signer = Ethers.send(\"eth_requestAccounts\")[0];\n  console.log(\"signer\", signer);\n  if (!signer) {\n    State.update({ error: \"Please login first\", showLogin: true });\n    return;\n  } else {\n    State.update({ error: \"\", signer: signer });\n  }\n};\n\nconst loginButton = (\n  <Web3Connect\n    className=\"FormSubmitContainer\"\n    connectLabel={web3connectLabel}\n    onConnect={(provider) => {\n      console.log(\"provider\", provider);\n      State.update({ provider });\n    }}\n  />\n);\n\nloadNFT();\n\nreturn (\n  <div className=\"EventDetail container card shadow my-5 p-5\">\n    <h1 className=\"text-center mb-3\">AfroShare</h1>\n    <p className=\"text-center mb-3\">\n      Afroshare allows you to easily share your Afropolitan NFT by renting it to\n      others.\n    </p>\n    {state.loading && (\n      <>\n        <p className=\"text-primary\">Loading NFT details...</p>\n        <div class=\"progress\">\n          <div\n            class=\"progress-bar progress-bar-striped progress-bar-animated\"\n            role=\"progressbar\"\n            aria-valuenow=\"100\"\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            style={{ width: \"100%\" }}\n          ></div>\n        </div>\n      </>\n    )}\n    {state.token && (\n      <>\n        <h3 className=\"text-center mb-3\">{state.token.title}</h3>\n        <div className=\"container\">\n          <div className=\"card shadow-sm\">\n            <img\n              src={state.token.media[0].gateway}\n              width={300}\n              alt={state.token.title}\n            />\n            <div className=\"card-body\">\n              <p className=\"card-text\">\n                <a\n                  href={`https://testnets.opensea.io/assets/goerli/${address}/${tokenId}`}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  View NFT on Opensea\n                </a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </>\n    )}\n    {state.error && <p className=\"text-danger\">{state.error}</p>}\n    {state.showLogin && (\n      <>\n        <hr />\n        {loginButton}\n      </>\n    )}\n    // <hr />\n    //{\" \"}\n    <Widget\n      src=\"tomiwa1a1.near/widget/RentNFT\"\n      props={{\n        alchemyApiKey: \"uB5QD-LyGRGbOa5--7aWs-dyqxjb3z24\",\n        address: \"0x8842da19ef17d1a10875e0ebddb6981e178b90d2\",\n        tokenId: 108,\n      }}\n    />\n    <hr />\n    <Widget\n      src=\"tomiwa1a1.near/widget/TokenGate\"\n      props={{\n        alchemyApiKey: \"uB5QD-LyGRGbOa5--7aWs-dyqxjb3z24\",\n        address: \"0x8842da19ef17d1a10875e0ebddb6981e178b90d2\",\n        tokenId: 108,\n      }}\n    />\n    <hr />\n    <Widget\n      src=\"tomiwa1a1.near/widget/TransferNFT\"\n      props={{\n        alchemyApiKey: \"uB5QD-LyGRGbOa5--7aWs-dyqxjb3z24\",\n        address: \"0x8842da19ef17d1a10875e0ebddb6981e178b90d2\",\n        tokenId: 108,\n      }}\n    />\n  </div>\n);\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/2b37d6181e8f5757c38b5fc7454e11ae1a3eee4cc1ca69c26fb1678dd30fddd6/widget/AfroShareTemplate", "fact_widget_deployments_id": "e59cc5f566409fa3b024e9039841003a", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 3}