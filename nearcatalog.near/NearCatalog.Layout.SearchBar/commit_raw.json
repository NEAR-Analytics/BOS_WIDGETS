{"tx_hash": "9knmPK3DpHygNYo7V66sLxn2KKQFaaWDuU99aV7Xzxbk", "action_id_social": "E48bcM1ViHVtxrJkBVHYg4v6HQ5NMhogGQ6xjbu9dsdS-0-widget", "block_id": 107698667, "block_timestamp": "2023-12-11T18:34:26.760Z", "signer_id": "nearcatalog.near", "widget_name": "NearCatalog.Layout.SearchBar", "source_code": "\nconst componentPath = props.componentPath;\n\nState.init({\n    rs: false,\n    kw: \"\",\n    loading: false,\n    searching: false,\n});\n\nfunction delayedSearch(kw) {\n    if (state.searching) {\n        clearTimeout(state.searching);\n    }\n    State.update({\n        searching: setTimeout(() => {\n            if (kw.length >= 3) {\n                asyncFetch(\"https://nearcatalog.sctuts.com/wp-json/nearcatalog/v1/search?kw=\" + kw).then(res => {\n                    console.log(res);\n                    State.update({\n                        rs: res.body ,\n                        kw: kw,\n                        loading: false,\n                    });\n                    console.log(\"search results: \", state.rs);\n                });\n            }\n        }, 1000)\n    });\n    if(typeof state.searching === \"function\") state.searching();\n}\nreturn (\n    <>\n        <div id=\"bos-search-input\" class=\"input-group\">\n            <input class=\"form-control \" type=\"text\" placeholder=\"\ud83d\udd2d \ud83d\udd0d Explore NEAR\" onChange={(e) => {\n                let kw = e.target.value ? e.target.value.trim().toLowerCase() : \"\";\n                State.update({ kw: kw, loading: true });\n                delayedSearch(kw);\n            }} />\n        </div>\n\n        <div className=\"search-result-content overflow-auto\">\n            {\n                state.rs && Object.keys(state.rs).map((e) => {\n                    let p = state.rs[e];\n                    return (<a className=\"near-item-sm\" title={p.profile.name} href={`/${componentPath}.Project?id=${e}`}>\n                        <div className=\"tile-icon\"><img src={p.profile.image?.url || \"https://learnnear.club/wp-content/uploads/2021/09/lnc-profile-desktop-150x150.png\"}\n                            title={`${p.profile.name} - ${p.profile.tagline}`} /></div>\n                        <div className=\"tile-content\">\n                            <h2 className=\"tile-title\" title={`${p.profile.name} - ${p.profile.tagline}`}>{p.profile.name}</h2>\n                        </div>\n                    </a>)\n                })\n            }\n\n            {\n                !state.rs && state.kw.length > 0 && !state.loading && <>\ud83d\ude48Not found, maybe you should submit the project\ud83d\ude4f</>\n            }\n        </div>\n    </>\n)\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcatalog.near/widget/NearCatalog.Layout.SearchBar", "fact_widget_deployments_id": "3c35aaf07a32650350d186f9fd863c83", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}