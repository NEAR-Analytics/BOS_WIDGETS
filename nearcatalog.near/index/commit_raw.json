{"tx_hash": "9fxqamsCVCLDSaYz8CtbYBgYpQEuTYx7MWx8YKqUu78N", "action_id_social": "6MsZuMCseNFZvHUBgRDLWRbdEsNHGGrcUs5WPUu9RCP8-0-widget", "block_id": 117924986, "block_timestamp": "2024-04-30T03:24:37.690Z", "signer_id": "nearcatalog.near", "widget_name": "Index", "source_code": "const owner = \"nearcatalog.near\";\nconst componentPath = `${owner}/widget/NearCatalog`;\nconst indexer = \"https://nearcatalog.xyz/wp-json/nearcatalog/v1\";\nconst defaultImg = \"https://learnnear.club/wp-content/uploads/2021/09/lnc-profile-desktop-150x150.png\";\n\nconst projects = {};\nlet router = \"home\";\nconst query = \"\";\n\nlet widgetSrc = \"\";\nlet widgetProps = {};\n\nif (props?.bookmark) {\n    router = \"bookmark\";\n} else if (props?.cat.length > 0) {\n    router = \"category\"\n} else if (props?.id) {\n    router = \"project\";\n}\n\nfunction loadingScreen(){\n    return <>\ud83d\udc40\ud83d\udcd7~~</>;\n}\n\nconsole.log(\"router: \", router);\n\nswitch (router) {\n    case \"project\":\n        query = fetch(indexer + \"/project?pid=\"+props.id);\n        if (!query || !query.body) {\n            return loadingScreen();\n        }\n        widgetSrc = `${componentPath}.Project`;\n        widgetProps = {\n            id: props.id,\n            project: query.body,\n        }\n        break;\n\n    case \"category\":\n        query = fetch(indexer + \"/projects-by-category?cid=\" + props.cat);\n        projects = query.body;\n        if (!query) {\n            return loadingScreen();\n        }\n        widgetSrc = `${componentPath}.Layout.AppGrid`;\n        widgetProps = {\n            cat: props.cat\n        }\n        break;\n\n    case \"bookmark\":\n        widgetSrc = `${componentPath}.Layout.AppGrid`;\n        widgetProps = {\n            bookmark: true,\n        }\n        projects = Storage.get(\"nearcatalogBookmark\", componentPath + \".Project\");\n        break;\n\n    default:\n        //home router \n        query = fetch(indexer + \"/projects\");\n        if (!query || !query.body) {\n            return loadingScreen();\n        }\n        projects = query.body;\n        widgetSrc = `${componentPath}.Layout.AppGrid`;\n        break;\n\n}\n\nlet p = {\n    ...{\n        componentPath,\n        indexPath: owner + \"/widget/Index\",\n        owner,\n        indexer,\n        projects,\n        defaultImg,\n        router\n    }, ...widgetProps\n};\nconsole.log(\"final props\", p);\nreturn (\n    <div key={router} >\n        <Widget src={widgetSrc} props={p} />    \n    </div>\n);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcatalog.near/widget/Index", "fact_widget_deployments_id": "23f34a1f1f51ff09d88c51168d4283e7", "inserted_timestamp": "2024-04-30T04:40:21.988Z", "modified_timestamp": "2024-04-30T04:40:21.988Z", "__row_index": 17}