{"tx_hash": "HkiRp7NJqrsdgUwnwGiVvnYAr2E9oKMR3DjNyoFjxuiR", "action_id_social": "HYFsWNAc9cSX1t6qU71JofyFpE8qqYmMhmZvwKuGzoMg-0-widget", "block_id": 118356671, "block_timestamp": "2024-05-06T09:23:13.153Z", "signer_id": "megha19.near", "widget_name": "near-prpsls-bos.components.rfps.TimelineConfigurator", "source_code": "/*\nLicense: MIT\nAuthor: devhub.near\nHomepage: https://github.com/NEAR-DevHub/near-prpsls-bos#readme\n*/\n/* INCLUDE: \"includes//common.jsx\" */\nconst REPL_DEVHUB = \"devhub.near\";\nconst REPL_INFRASTRUCTURE_COMMITTEE = \"megha19.near\";\nconst REPL_INFRASTRUCTURE_COMMITTEE_CONTRACT = \"truedove38.near\";\nconst REPL_RPC_URL = \"https://rpc.mainnet.near.org\";\nconst REPL_NEAR = \"near\";\nconst RFPImage =\n  \"https://ipfs.near.social/ipfs/bafkreicbygt4kajytlxij24jj6tkg2ppc2dw3dlqhkermkjjfgdfnlizzy\";\n\nconst TIMELINE_STATUS = {\n  ACCEPTING_SUBMISSIONS: \"ACCEPTING_SUBMISSIONS\",\n  EVALUATION: \"EVALUATION\",\n  PROPOSAL_SELECTED: \"PROPOSAL_SELECTED\",\n  CANCELLED: \"CANCELLED\",\n};\n/* END_INCLUDE: \"includes//common.jsx\" */\n\nconst stepsArray = [1, 2, 3];\nconst timeline = props.timeline;\nconst disabled = props.disabled;\nconst setTimeline = props.setTimeline ?? (() => {});\n\nconst TimelineStatusOptions = [\n  {\n    label: \"Accepting Submissions\",\n    value: { status: TIMELINE_STATUS.ACCEPTING_SUBMISSIONS },\n  },\n  {\n    label: \"Evaluation\",\n    value: {\n      status: TIMELINE_STATUS.EVALUATION,\n    },\n  },\n  {\n    label: \"Proposal Selected\",\n    value: {\n      status: TIMELINE_STATUS.PROPOSAL_SELECTED,\n    },\n  },\n  {\n    label: \"Cancelled\",\n    value: {\n      status: TIMELINE_STATUS.CANCELLED,\n    },\n  },\n];\n\nconst Container = styled.div`\n  .circle-lg {\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    border: 1px solid grey;\n  }\n\n  .green-fill {\n    background-color: rgb(4, 164, 110) !important;\n    border-color: rgb(4, 164, 110) !important;\n    color: white !important;\n  }\n\n  .yellow-fill {\n    border-color: #ff7a00 !important;\n  }\n\n  .vertical-line {\n    width: 2px;\n    height: 85px;\n    background-color: lightgrey;\n  }\n\n  @media screen and (max-width: 970px) {\n    .vertical-line {\n      height: 70px !important;\n    }\n  }\n\n  @media screen and (max-width: 570px) {\n    .vertical-line {\n      height: 65px !important;\n    }\n  }\n`;\nconst selectedTimelineStatusIndex = useMemo(\n  () =>\n    TimelineStatusOptions.findIndex((i) => i.value.status === timeline.status),\n  [timeline]\n);\n\nconst TimelineItems = ({ title, children, value, values }) => {\n  const indexOfCurrentItem = TimelineStatusOptions.findIndex((i) =>\n    Array.isArray(values)\n      ? values.includes(i.value.status)\n      : value === i.value.status\n  );\n  let color = \"transparent\";\n  let statusIndex = selectedTimelineStatusIndex;\n  // index 2,3 is of decision\n  if (selectedTimelineStatusIndex === 3) {\n    statusIndex = 2;\n  }\n  if (statusIndex === indexOfCurrentItem) {\n    color = \"#FEF6EE\";\n  }\n  if (statusIndex > indexOfCurrentItem) {\n    color = \"#EEFEF0\";\n  }\n  // cancelled\n  if (\n    statusIndex === 2 &&\n    (values ?? []).includes(TIMELINE_STATUS.CANCELLED) &&\n    timeline.status === TIMELINE_STATUS.CANCELLED\n  ) {\n    color = \"#F4F4F4\";\n  }\n\n  return (\n    <div\n      className=\"p-2 rounded-3\"\n      style={{\n        backgroundColor: color,\n      }}\n    >\n      <div className=\"h6 text-black\"> {title}</div>\n      <div className=\"text-sm\">{children}</div>\n    </div>\n  );\n};\n\nreturn (\n  <Container className=\"d-flex flex-column gap-2\">\n    {!disabled && (\n      <div className=\"d-flex flex-column gap-2\">\n        <h6 className=\"mb-0\">Status</h6>\n        <Widget\n          src={`${REPL_INFRASTRUCTURE_COMMITTEE}/widget/near-prpsls-bos.components.molecule.DropDown`}\n          props={{\n            options: TimelineStatusOptions,\n            selectedValue: TimelineStatusOptions.find(\n              (i) => i.value.status === timeline.status\n            ),\n            onUpdate: (v) => {\n              setTimeline({ status: v.value.status });\n            },\n          }}\n        />\n      </div>\n    )}\n    <div className=\"d-flex gap-3 mt-2\">\n      <div className=\"d-flex flex-column mt-4\">\n        {stepsArray.map((_, index) => {\n          const indexOfCurrentItem = index;\n          let color = \"\";\n          let statusIndex = selectedTimelineStatusIndex;\n          // index 2,3 is of decision\n          if (selectedTimelineStatusIndex === 3) {\n            statusIndex = 2;\n          }\n          const current = statusIndex === indexOfCurrentItem;\n          const completed =\n            statusIndex > indexOfCurrentItem ||\n            timeline.status === TIMELINE_STATUS.PROPOSAL_SELECTED ||\n            timeline.status === TIMELINE_STATUS.CANCELLED;\n          return (\n            <div className=\"d-flex flex-column align-items-center gap-1\">\n              <div\n                className={\n                  \"circle-lg \" +\n                  (completed && \" green-fill \") +\n                  (current && !completed && \" yellow-fill \")\n                }\n              >\n                {completed && (\n                  <div\n                    className=\"d-flex justify-content-center align-items-center\"\n                    style={{ height: \"120%\" }}\n                  >\n                    <i class=\"bi bi-check\"></i>\n                  </div>\n                )}\n              </div>\n              {index !== stepsArray.length - 1 && (\n                <div\n                  className={\n                    \"vertical-line \" +\n                    (completed && \" green-fill \") +\n                    (current && \" yellow-fill \")\n                  }\n                ></div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n      <div className=\"d-flex flex-column gap-3\">\n        <TimelineItems\n          title=\"1) Accepting Submissions\"\n          value={TIMELINE_STATUS.ACCEPTING_SUBMISSIONS}\n        >\n          <div>During this stage, the RFP is still open for submissions.</div>\n        </TimelineItems>\n        <TimelineItems title=\"2) Evaluation\" value={TIMELINE_STATUS.EVALUATION}>\n          <div>\n            This RFP is closed for submissions. All submitted proposals are\n            under review.\n          </div>\n        </TimelineItems>\n        <TimelineItems\n          title=\"3) Decision\"\n          values={[\n            TIMELINE_STATUS.PROPOSAL_SELECTED,\n            TIMELINE_STATUS.CANCELLED,\n          ]}\n        >\n          <div className=\"d-flex flex-column gap-2\">\n            <div>Sponsor makes a final decision:</div>\n            <Widget\n              src={`${REPL_INFRASTRUCTURE_COMMITTEE}/widget/near-prpsls-bos.components.molecule.RadioButton`}\n              props={{\n                value: \"\",\n                label: <div className=\"fw-bold\">Proposal Selected</div>,\n                disabled: disabled,\n                isChecked:\n                  timeline.status === TIMELINE_STATUS.PROPOSAL_SELECTED,\n                onClick: (v) => {\n                  if (v) {\n                    setTimeline({\n                      status: TIMELINE_STATUS.PROPOSAL_SELECTED,\n                    });\n                  }\n                },\n              }}\n            />\n            <Widget\n              src={`${REPL_INFRASTRUCTURE_COMMITTEE}/widget/near-prpsls-bos.components.molecule.RadioButton`}\n              props={{\n                value: \"\",\n                disabled: disabled,\n                label: <div className=\"fw-bold\">RFP Cancelled</div>,\n                isChecked: timeline.status === TIMELINE_STATUS.CANCELLED,\n                onClick: (v) => {\n                  if (v) {\n                    setTimeline({\n                      status: TIMELINE_STATUS.CANCELLED,\n                    });\n                  }\n                },\n              }}\n            />\n          </div>\n        </TimelineItems>\n      </div>\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/near-prpsls-bos.components.rfps.TimelineConfigurator", "fact_widget_deployments_id": "a3e8f389ff15e13143b4c2bcb2ec273b", "inserted_timestamp": "2024-05-06T10:40:50.150Z", "modified_timestamp": "2024-05-06T10:40:50.150Z", "__row_index": 1}