{"tx_hash": "4QWMmx64XRQt9wyWf1wax6Si7oYvd3EX8nHTEjGfpqak", "action_id_social": "FuCcHUF8qsfYtwZCGpbwZExaLVeyN5gfyH5uPN56pjJG-0-widget", "block_id": 111351654, "block_timestamp": "2024-01-26T10:04:45.933Z", "signer_id": "megha19.near", "widget_name": "DAO.Settings.PolicySettings", "source_code": "const { formState, hasPermission, daoId } = props;\n\nconst [policyState, setPolicyState] = useState(formState);\nconst [selectedTab, setSelectedTab] = useState(\"Groups\");\n\nconst handleProposal = () => {\n  const deposit = formState.policy.proposal_bond;\n  const gas = 200000000000000;\n\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"Update policy\",\n          kind: {\n            ChangePolicy: policyState\n          }\n        }\n      },\n      gas: gas,\n      deposit: deposit\n    }\n  ]);\n};\n\nconst Footer = () => {\n  return (\n    <div className=\"d-flex justify-content-end mt-4\">\n      <Widget\n        src=\"nearui.near/widget/Input.Button\"\n        props={{\n          children: (\n            <>\n              <i class=\"bi bi-check-lg\"></i> Propose changes\n            </>\n          ),\n          variant: \"info \" + (!hasPermission && \"disabled\"),\n          size: \"lg\",\n          onClick: () => handleProposal(),\n          buttonProps: {\n            type: \"submit\"\n          }\n        }}\n      />\n    </div>\n  );\n};\n\nconst tabs = {\n  Groups: {\n    name: \"Groups\",\n    component: (\n      <Widget\n        src={`megha19.near/widget/CreateDAO.Step4`}\n        props={{\n          formState: policyState,\n          updateParentState: (data) => setPolicyState(data),\n          isConfigScreen: true,\n          renderFooter: (data) => <></>\n        }}\n      />\n    )\n  },\n  Permissions: {\n    name: \"Proposal and Voting Permissions\",\n    component: (\n      <Widget\n        src={`megha19.near/widget/CreateDAO.Step5`}\n        props={{\n          formState: policyState,\n          updateParentState: (data) => setPolicyState(data),\n          renderFooter: (data) => <></>\n        }}\n      />\n    )\n  }\n};\n\nconst tabContent = tabs[selectedTab].component;\n\nreturn (\n  <div style={{ marginTop: 30 }}>\n    <Widget\n      src={`megha19.near/widget/DAO.Layout.Tabs`}\n      props={{\n        tabs: tabs,\n        tab: selectedTab,\n        update: (state) => setSelectedTab(state.tab),\n        allowHref: false\n      }}\n    />\n    <div style={{ marginTop: \"-25px\" }}>{tabContent}</div>\n    <Footer />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/DAO.Settings.PolicySettings", "fact_widget_deployments_id": "c27e144bcb3fd0d6d8b2477717401b6d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}