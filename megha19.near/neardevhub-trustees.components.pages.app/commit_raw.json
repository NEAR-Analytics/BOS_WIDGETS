{"tx_hash": "F1hbjPPowarKuXWb7o1fKdk9RqEf6CfABNdGriRZRBTg", "action_id_social": "3TfiAaHtv9pNk1G2oyhD2sxk8rjz94jNJ24wtYQ46NF3-0-widget", "block_id": 113234744, "block_timestamp": "2024-02-20T17:59:13.932Z", "signer_id": "megha19.near", "widget_name": "neardevhub-trustees.components.pages.app", "source_code": "/*\nLicense: MIT\nAuthor: devhub.near\nHomepage: https://github.com/NEAR-DevHub/neardevhub-treasury-dashboard.git#readme\n*/\n/* INCLUDE: \"includes//common.jsx\" */\nconst REPL_TREASURY_CONTRACT = \"treasurydevhub.near\";\nconst REPL_TREASURY = \"megha19.near\";\n// \"dashboard.treasury-devdao.near\";\nconst REPL_DEVHUB = \"devhub.near\";\n// devhub.near;\nconst REPL_PROPOSAL_CONTRACT =\n  \"713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c\";\nconst REPL_NEAR = \"near\";\n/* END_INCLUDE: \"includes//common.jsx\" */\n\nconst { tab, accountType, ...passProps } = props;\n\nconst tabKeys = {\n  TRUSTEES: \"trustees\",\n  MODERATORS: \"moderators\",\n};\n\nconst councilInfo = Near.view(REPL_TREASURY_CONTRACT, \"get_policy\");\nconst [selectedTab, setSelectedTab] = useState(accountType ?? tabKeys.TRUSTEES);\nconst [isTrustee, setIsTrustee] = useState(false);\nconst [isModerator, setIsModerator] = useState(false);\n\nif (councilInfo === null) {\n  return <></>;\n}\n\nif (context.accountId) {\n  if (Array.isArray(councilInfo.roles)) {\n    councilInfo.roles.map((item) => {\n      // trustees or moderators\n      if (item.name === tabKeys.TRUSTEES) {\n        setIsTrustee(item.kind.Group.includes(context.accountId));\n      }\n      if (item.name === tabKeys.MODERATORS) {\n        setIsModerator(item.kind.Group.includes(context.accountId));\n      }\n    });\n  }\n}\n\nconst Theme = styled.div`\n  position: fixed;\n  inset: 73px 0px 0px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n  padding-top: calc(-1 * var(--body-top-padding));\n  background: #f4f4f4;\n`;\n\nconst ContentContainer = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  padding-top: 1rem;\n  padding-inline: 1.5rem;\n\n  .tab-content {\n    min-height: 50vh;\n  }\n\n  .bold {\n    font-weight: 600;\n  }\n`;\n\nconst Tabs = styled.div`\n  border-top: 0.5px solid #b3b3b3;\n  .bg-grey {\n    background-color: #ececec;\n  }\n  .cursor {\n    cursor: pointer;\n  }\n\n  .flex-item {\n    flex: 1;\n    padding: 1rem;\n    font-weight: 600;\n    font-size: 18;\n  }\n`;\n\nconst showLoginWindow =\n  (selectedTab === tabKeys.TRUSTEES && !isTrustee) ||\n  (selectedTab === tabKeys.MODERATORS && !isModerator);\n\nreturn (\n  <Theme>\n    <ContentContainer>\n      <Container className=\"pl-5\">\n        <Widget\n          src={`${REPL_TREASURY}/widget/neardevhub-trustees.components.organism.Navbar`}\n          props={{\n            ...passProps,\n          }}\n        />\n        <div className=\"h3 bold\">DevDAO Dashboard</div>\n        <div className=\"mt-3\">\n          {showLoginWindow ? (\n            <Widget\n              src={`${REPL_TREASURY}/widget/neardevhub-trustees.components.trustee.Login`}\n              props={{ ...passProps, setIsTrustee }}\n            />\n          ) : (\n            <div className=\"mt-2\">\n              <Tabs>\n                <div className=\"d-flex w-100 cursor\">\n                  <div\n                    className={\n                      \"flex-item \" +\n                      (selectedTab === tabKeys.TRUSTEES ? \"\" : \"bg-grey\")\n                    }\n                    onClick={() => setSelectedTab(tabKeys.TRUSTEES)}\n                  >\n                    Trustees\n                  </div>\n                  <div\n                    className={\n                      \"flex-item \" +\n                      (selectedTab === tabKeys.MODERATORS ? \"\" : \"bg-grey\")\n                    }\n                    onClick={() => setSelectedTab(tabKeys.MODERATORS)}\n                  >\n                    Moderators\n                  </div>\n                </div>\n                <div className=\"tab-content\">\n                  {selectedTab === tabKeys.TRUSTEES ? (\n                    <Widget\n                      src={`${REPL_TREASURY}/widget/neardevhub-trustees.components.trustee.Dashboard`}\n                      props={{ ...passProps, setIsTrustee, tab }}\n                    />\n                  ) : (\n                    <Widget\n                      src={`${REPL_TREASURY}/widget/neardevhub-trustees.components.moderator.Dashboard`}\n                      props={{ ...passProps, setIsTrustee, tab }}\n                    />\n                  )}\n                </div>\n              </Tabs>\n            </div>\n          )}\n        </div>\n      </Container>\n      <Widget\n        src={`${REPL_TREASURY}/widget/neardevhub-trustees.components.organism.Footer`}\n        props={{\n          ...passProps,\n        }}\n      />\n    </ContentContainer>\n  </Theme>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/neardevhub-trustees.components.pages.app", "fact_widget_deployments_id": "c933d26ad4b3ba2a972daede6c0579db", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}