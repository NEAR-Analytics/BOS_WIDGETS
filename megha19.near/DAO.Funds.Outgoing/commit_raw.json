{"tx_hash": "4QWMmx64XRQt9wyWf1wax6Si7oYvd3EX8nHTEjGfpqak", "action_id_social": "FuCcHUF8qsfYtwZCGpbwZExaLVeyN5gfyH5uPN56pjJG-0-widget", "block_id": 111351654, "block_timestamp": "2024-01-26T10:04:45.933Z", "signer_id": "megha19.near", "widget_name": "DAO.Funds.Outgoing", "source_code": "// DRAFT\n\nconst fetcher = props.fether ?? {};\nconst daoId = props.daoId;\n\nconst outgoing = fetcher[\"outgoing_near\"](daoId);\n\nif (!outgoing.body) {\n    return (\n        <div>\n            <Widget src=\"nearui.near/widget/Feedback.Spinner\" />\n        </div>\n    );\n}\n\nconst colors = props.colors ?? [\n    \"#4498E0\",\n    \"#FFD50D\",\n    \"#F29BC0\",\n    \"#82E299\",\n    \"#F19D38\"\n];\n\n// Organize the data\nconst data = outgoing.body.slice(0, 20).map((d) => parseFloat(d.amount));\nconst labels = outgoing.body.slice(0, 20).map((d) => {\n    if (d.receiver.length > 20) {\n        return d.receiver.slice(0, 19) + \"...\";\n    }\n    return d.receiver;\n});\n\n// fill the rest of colors if balanceData.length > colors.length\nif (data.length > colors.length) {\n    for (let i = colors.length; i < data.length; i++) {\n        colors.push(\"#\" + Math.floor(Math.random() * 16777215).toString(16));\n    }\n}\n\n// format to small characters like 200k, 200m, 200b...\nconst formatNumber = (num) => {\n    if (num >= 1000000000) {\n        return (num / 1000000000).toFixed(1).replace(/\\.0$/, \"\") + \"b\";\n    }\n    if (num >= 1000000) {\n        return (num / 1000000).toFixed(1).replace(/\\.0$/, \"\") + \"m\";\n    }\n    if (num >= 1000) {\n        return (num / 1000).toFixed(1).replace(/\\.0$/, \"\") + \"k\";\n    }\n    return num;\n};\n\nconst chartData = {\n    labels: labels,\n    datasets: [\n        {\n            label: \"Total NEAR received\",\n            data: data,\n            backgroundColor: colors,\n            borderWidth: 1\n        }\n    ]\n};\n\nconst chartOptions = {\n    type: \"bar\",\n    options: {\n        indexAxis: \"y\",\n        elements: {\n            bar: {\n                borderWidth: 2\n            }\n        },\n        responsive: true,\n        plugins: {\n            legend: {\n                display: false\n            }\n        }\n    }\n};\n\nreturn (\n    <div\n        style={{\n            width: \"100%\",\n            height: 770\n        }}\n    >\n        <Widget\n            src={`nearui.near/widget/Data.ChartJs`}\n            props={{ chartData, chartOptions }}\n        />\n    </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/DAO.Funds.Outgoing", "fact_widget_deployments_id": "a5744db2f2072abbb52d4a0cd93653f6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}