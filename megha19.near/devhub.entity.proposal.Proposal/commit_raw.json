{"tx_hash": "At5tUjJpmfgBB2aJMTdzrBymQngvf1BCNNCDAira2Xzo", "action_id_social": "BgB733YSgXbUDhv1j4HPvyjkN6TTUH4yyd1zPmwMkzM6-0-widget", "block_id": 113235186, "block_timestamp": "2024-02-20T18:09:13.708Z", "signer_id": "megha19.near", "widget_name": "devhub.entity.proposal.Proposal", "source_code": "const { href } = VM.require(\"megha19.near/widget/core.lib.url\") || {\n  href: () => {},\n};\nconst { readableDate } = VM.require(\n  \"megha19.near/widget/core.lib.common\"\n) || { readableDate: () => {} };\n\nconst accountId = context.accountId;\n/*\n---props---\nprops.id: number;\nprops.timestamp: number; optional\n*/\n\nconst TIMELINE_STATUS = {\n  DRAFT: \"DRAFT\",\n  REVIEW: \"REVIEW\",\n  APPROVED: \"APPROVED\",\n  REJECTED: \"REJECTED\",\n  APPROVED_CONDITIONALLY: \"APPROVED_CONDITIONALLY\",\n  PAYMENT_PROCESSING: \"PAYMENT_PROCESSING\",\n  FUNDED: \"FUNDED\",\n};\n\nconst Container = styled.div`\n  .draft-info-container {\n    background-color: #ecf8fb;\n  }\n\n  .text-sm {\n    font-size: 13px !important;\n  }\n\n  .flex-1 {\n    flex: 1;\n  }\n\n  .flex-3 {\n    flex: 3;\n  }\n\n  .circle {\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    border: 1px solid grey;\n  }\n\n  .green-fill {\n    background-color: rgb(4, 164, 110) !important;\n    border-color: rgb(4, 164, 110) !important;\n    color: white !important;\n  }\n\n  .yellow-fill {\n    border-color: #ff7a00 !important;\n  }\n\n  .vertical-line {\n    width: 2px;\n    height: 190px;\n    background-color: lightgrey;\n  }\n  .vertical-line-sm {\n    width: 2px;\n    height: 85px;\n    background-color: lightgrey;\n  }\n\n  .form-check-input:disabled ~ .form-check-label,\n  .form-check-input[disabled] ~ .form-check-label {\n    opacity: 1;\n  }\n\n  .form-check-input {\n    border-color: black !important;\n  }\n\n  .grey-btn {\n    background-color: #687076;\n    border: none;\n    color: white;\n  }\n\n  .form-check-input:checked {\n    background-color: #04a46e !important;\n    border-color: #04a46e !important;\n  }\n\n  .dropdown-toggle:after {\n    position: absolute;\n    top: 46%;\n    right: 5%;\n  }\n\n  .drop-btn {\n    max-width: none !important;\n  }\n\n  .dropdown-menu {\n    width: 100%;\n  }\n\n  .green-btn {\n    background-color: #04a46e !important;\n    border: none;\n    color: white;\n\n    &:active {\n      color: white;\n    }\n  }\n`;\n\nconst ProposalContainer = styled.div`\n  border: 1px solid lightgrey;\n`;\n\nconst Header = styled.div`\n  position: relative;\n  background-color: #f4f4f4;\n  height: 50px;\n\n  .menu {\n    position: absolute;\n    right: 10px;\n    top: 4px;\n    font-size: 30px;\n  }\n`;\n\nconst Text = styled.p`\n  display: block;\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 400;\n  color: #687076;\n  white-space: nowrap;\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin: -6px -6px 6px;\n`;\n\nconst Avatar = styled.div`\n  width: 40px;\n  height: 40px;\n  pointer-events: none;\n\n  img {\n    object-fit: cover;\n    border-radius: 40px;\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nconst stepsArray = [1, 2, 3, 4, 5];\n\nconst { id, timestamp } = props;\nconst proposal = Near.view(\"713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c\", \"get_proposal\", {\n  proposal_id: parseInt(id),\n});\n\nif (!proposal) {\n  return \"Loading...\";\n}\nif (timestamp && proposal) {\n  proposal.snapshot =\n    proposal.snapshot_history.find((item) => item.timestamp === timestamp) ??\n    proposal.snapshot;\n}\n\nconst { snapshot } = proposal;\n\nconst editorAccountId = snapshot.editor_id;\nconst blockHeight = proposal.social_db_post_block_height;\nconst item = {\n  type: \"social\",\n  path: `713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c/post/main`,\n  blockHeight,\n};\nconst proposalURL = `megha19.near/widget/devhub.entity.proposal.Proposal?id=${proposal.id}&timestamp=${snapshot.timestamp}`;\n\nconst KycVerificationStatus = () => {\n  const isVerified = true;\n  return (\n    <div className=\"d-flex gap-2 align-items-center\">\n      {isVerified ? (\n        <img\n          src=\"https://ipfs.near.social/ipfs/bafkreidqveupkcc7e3rko2e67lztsqrfnjzw3ceoajyglqeomvv7xznusm\"\n          height={40}\n        />\n      ) : (\n        \"Need icon\"\n      )}\n      <div className=\"d-flex flex-column\">\n        <div className=\"h6 mb-0\">KYC Verified</div>\n        <div className=\"text-sm\">Expires on Aug 24, 2024</div>\n      </div>\n    </div>\n  );\n};\n\nconst SidePanelItem = ({ title, children }) => {\n  return (\n    <div className=\"d-flex flex-column gap-2 pb-3 border-bottom\">\n      <div className=\"h6 mb-0\">{title} </div>\n      <div className=\"text-muted\">{children}</div>\n    </div>\n  );\n};\n\nconst proposalStatusOptions = [\n  {\n    label: \"Draft\",\n    value: { status: \"DRAFT\" },\n  },\n  {\n    label: \"Review\",\n    value: {\n      status: \"REVIEW\",\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n  {\n    label: \"Approved\",\n    value: {\n      status: \"APPROVED\",\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n  {\n    label: \"Approved-Conditionally\",\n    value: {\n      status: \"APPROVED_CONDITIONALLY\",\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n  {\n    label: \"Rejected\",\n    value: {\n      status: \"REJECTED\",\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n  {\n    label: \"Payment-processing\",\n    value: {\n      status: \"PAYMENT_PROCESSING\",\n      kyc_verified: false,\n      test_transaction_sent: false,\n      request_for_trustees_created: false,\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n  {\n    label: \"Funded\",\n    value: {\n      status: \"FUNDED\",\n      trustees_released_payment: false,\n      kyc_verified: false,\n      test_transaction_sent: false,\n      request_for_trustees_created: false,\n      sponsor_requested_review: true,\n      reviewer_completed_attestation: false,\n    },\n  },\n];\n\nconst LinkedProposals = () => {\n  const linkedProposalsData = [];\n  snapshot.linked_proposals.map((item) => {\n    const data = Near.view(\"713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c\", \"get_proposal\", {\n      proposal_id: item,\n    });\n    if (data !== null) {\n      linkedProposalsData.push(data);\n    }\n  });\n\n  return (\n    <div className=\"d-flex flex-column gap-3\">\n      {linkedProposalsData.map((item) => (\n        <div className=\"d-flex gap-2\">\n          <Widget\n            src={\"megha19.near/widget/devhub.entity.proposal.Profile\"}\n            props={{\n              accountId: item.snapshot.editor_id,\n            }}\n          />\n          <div className=\"d-flex flex-column\" style={{ maxWidth: 250 }}>\n            <b className=\"text-truncate\">{item.snapshot.name}</b>\n            <div className=\"text-sm text-muted\">\n              created on {readableDate(item.snapshot.timestamp / 1000000)}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst CheckBox = ({ value, isChecked, label }) => {\n  return (\n    <div className=\"d-flex gap-2 align-items-center\">\n      <input\n        class=\"form-check-input\"\n        type=\"checkbox\"\n        value={value}\n        checked={isChecked}\n        disabled={true}\n      />\n      <label class=\"form-check-label text-black\">{label}</label>\n    </div>\n  );\n};\n\nconst RadioButton = ({ value, isChecked, label }) => {\n  return (\n    <div className=\"d-flex gap-2 align-items-center\">\n      <input\n        class=\"form-check-input\"\n        type=\"radio\"\n        value={value}\n        checked={isChecked}\n        disabled={true}\n      />\n      <label class=\"form-check-label text-black\">{label}</label>\n    </div>\n  );\n};\n\nconst tokenMapping = {\n  NEAR: \"NEAR\",\n  USDT: {\n    NEP141: {\n      address: \"usdt.tether-token.near\",\n    },\n  },\n  USDC: {\n    NEP141: {\n      address:\n        \"17208628f84f5d6ad33f0da3bbbeb27ffcb398eac501a31bd6ad2011e36133a1\",\n    },\n  },\n};\n\nfunction findTokenNameByAddress(address) {\n  const foundToken = Object.entries(tokenMapping).find(\n    ([tokenName, tokenData]) => {\n      return (\n        JSON.stringify(tokenMapping[tokenName]) === JSON.stringify(address)\n      );\n    }\n  );\n\n  return foundToken ? foundToken[0] : null;\n}\n\nconst tokenName = findTokenNameByAddress(snapshot.requested_sponsorship_token);\nconst isAllowedToEditProposal = Near.view(\n  \"713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c\",\n  \"is_allowed_to_edit_proposal\",\n  { proposal_id: proposal.id, editor: accountId }\n);\n\nconst isModerator = isAllowedToEditProposal && proposal.author_id !== accountId;\n\nconst editProposalStatus = ({ timeline }) => {\n  const body = {\n    proposal_body_version: \"V0\",\n    name: snapshot.title,\n    description: snapshot.description,\n    category: snapshot.category,\n    summary: snapshot.summary,\n    linked_proposals: snapshot.linked_proposals,\n    requested_sponsorship_amount: snapshot.requested_sponsorship_amount,\n    requested_sponsorship_token: snapshot.requested_sponsorship_token,\n    receiver_account: snapshot.receiver_account,\n    supervisor: snapshot.supervisor,\n    requested_sponsor: snapshot.requested_sponsor,\n    payouts: snapshot.payouts,\n    timeline: timeline,\n  };\n\n  Near.call({\n    contractName: \"713ed9aef61d14ce3dfeb3f5a55dfdf16c407280267e8de96bce0953d0e1af8c\",\n    methodName: \"edit_proposal\",\n    args: {\n      id: proposal.id,\n      labels: snapshot.labels,\n      body: body,\n    },\n    gas: 270000000000000,\n  });\n};\n\nconst [isReviewModalOpen, setReviewModal] = useState(false);\nconst [showTimelineSetting, setShowTimelineSetting] = useState(false);\nconst proposalStatus = proposalStatusOptions.find(\n  (i) => i.value.status === snapshot.timeline.status\n);\nconst [updatedProposalStatus, setUpdatedProposalStatus] =\n  useState(proposalStatus);\n\nconst selectedStatusIndex = useMemo(\n  () =>\n    proposalStatusOptions.findIndex((i) => {\n      return updatedProposalStatus.value.status === i.value.status;\n    }),\n  [updatedProposalStatus]\n);\n\nconst TimelineItems = ({ title, children, value, values }) => {\n  const indexOfCurrentItem = proposalStatusOptions.findIndex((i) =>\n    Array.isArray(values)\n      ? values.includes(i.value.status)\n      : value === i.value.status\n  );\n  let color = \"transparent\";\n  let statusIndex = selectedStatusIndex;\n\n  // index 2,3,4 is of decision\n  if (selectedStatusIndex === 3 || selectedStatusIndex === 2) {\n    statusIndex = 2;\n  }\n  if (statusIndex === indexOfCurrentItem) {\n    color = \"#FEF6EE\";\n  }\n  if (\n    statusIndex > indexOfCurrentItem ||\n    updatedProposalStatus.value.status === TIMELINE_STATUS.FUNDED\n  ) {\n    color = \"#EEFEF0\";\n  }\n  // reject\n  if (statusIndex === 4 && indexOfCurrentItem === 2) {\n    color = \"#FF7F7F\";\n  }\n\n  return (\n    <div\n      className=\"p-2 rounded-3\"\n      style={{\n        backgroundColor: color,\n      }}\n    >\n      <div className=\"h6 text-black\"> {title}</div>\n      <div className=\"text-sm\">{children}</div>\n    </div>\n  );\n};\n\nconst optimisticallyHideItem = (message) => {\n  console.log(message);\n};\nconst resolveHideItem = (message) => {\n  console.log(message);\n};\nconst cancelHideItem = () => {};\n\nconst extractNotifyAccountId = (item) => {\n  if (!item || item.type !== \"social\" || !item.path) {\n    return undefined;\n  }\n  const accountId = item.path.split(\"/\")[0];\n  return `${accountId}/post/main` === item.path ? accountId : undefined;\n};\n\nreturn (\n  <Container className=\"d-flex flex-column gap-2 w-100 mt-4\">\n    <Widget\n      src={\"megha19.near/widget/devhub.entity.proposal.ConfirmReviewModal\"}\n      props={{\n        isOpen: isReviewModalOpen,\n        onCancelClick: () => setReviewModal(false),\n        onReviewClick: () => {\n          setReviewModal(false);\n          editProposalStatus({ timeline: proposalStatusOptions[1].value });\n        },\n      }}\n    />\n    <div className=\"d-flex justify-content-between\">\n      <div className=\"d-flex gap-2 align-items-center h3\">\n        <div>{snapshot.name}</div>\n        <div className=\"text-muted\">#{proposal.id}</div>\n      </div>\n      <div className=\"d-flex gap-2 align-items-center\">\n        <Widget\n          src={\"megha19.near/widget/devhub.entity.proposal.History\"}\n          props={{\n            id: proposal.id,\n            timestamp: snapshot.timestamp,\n          }}\n        />\n        <Widget\n          src=\"near/widget/ShareButton\"\n          props={{\n            postType: \"post\",\n            url: proposalURL,\n          }}\n        />\n        {isAllowedToEditProposal && (\n          <Link\n            to={href({\n              widgetSrc: \"megha19.near/widget/app\",\n              params: {\n                page: \"create-proposal\",\n                id: proposal.id,\n                timestamp: timestamp,\n              },\n            })}\n            style={{ textDecoration: \"none\" }}\n          >\n            <Widget\n              src={\"megha19.near/widget/devhub.components.molecule.Button\"}\n              props={{\n                label: \"Edit\",\n                classNames: { root: \"grey-btn btn-sm\" },\n              }}\n            />\n          </Link>\n        )}\n      </div>\n    </div>\n    <div className=\"d-flex gap-2 align-items-center text-sm border-bottom pb-3\">\n      <Widget\n        src={\"megha19.near/widget/devhub.entity.proposal.StatusTag\"}\n        props={{\n          timelineStatus: snapshot.timeline.status,\n          size: \"sm\",\n        }}\n      />\n      <div>\n        <b>{proposal.author_id} </b> created on{\" \"}\n        {readableDate(snapshot.timestamp / 1000000)}\n      </div>\n    </div>\n    <div className=\"card card-body\">\n      {snapshot.timeline.status === TIMELINE_STATUS.DRAFT &&\n        isAllowedToEditProposal && (\n          <div className=\"draft-info-container p-4 d-flex justify-content-between align-items-center gap-2\">\n            <div>\n              <b>\n                This proposal is in draft mode and open for community comments.\n              </b>\n              <p className=\"text-sm text-muted mt-2\">\n                The author can still refine the proposal and build consensus\n                before sharing it with sponsors. Click \u201cReady for review\u201d when\n                you want to start the official review process. This will lock\n                the editing function, but comments are still open.\n              </p>\n            </div>\n            {isAllowedToEditProposal && (\n              <div style={{ minWidth: \"fit-content\" }}>\n                <Widget\n                  src={\n                    \"megha19.near/widget/devhub.components.molecule.Button\"\n                  }\n                  props={{\n                    label: \"Ready for review\",\n                    classNames: { root: \"grey-btn btn-sm\" },\n                    onClick: () => setReviewModal(true),\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        )}\n      <div className=\"my-4\">\n        <div className=\"d-flex gap-4\">\n          <div className=\"flex-3\">\n            <div className=\"d-flex gap-2 flex-1\">\n              <Widget\n                src={\"megha19.near/widget/devhub.entity.proposal.Profile\"}\n                props={{\n                  accountId: editorAccountId,\n                }}\n              />\n              <ProposalContainer className=\"rounded-2 flex-1\">\n                <Header className=\"d-flex gap-3 align-items-center p-2 px-3\">\n                  {snapshot.editor_id} \uff65{\" \"}\n                  <Widget\n                    src=\"near/widget/TimeAgo\"\n                    props={{\n                      blockHeight,\n                      blockTimestamp: snapshot.timestamp,\n                    }}\n                  />\n                  <div className=\"menu\">\n                    <Widget\n                      src=\"near/widget/Posts.Menu\"\n                      props={{\n                        accountId: editorAccountId,\n                        blockHeight: blockHeight,\n                        parentFunctions: {\n                          optimisticallyHideItem,\n                          resolveHideItem,\n                          cancelHideItem,\n                        },\n                      }}\n                    />\n                  </div>\n                </Header>\n                <div className=\"d-flex flex-column gap-1 p-2 px-3\">\n                  <div className=\"text-muted h6 border-bottom pb-1 mt-3\">\n                    PROPOSAL CATEGORY\n                  </div>\n                  <div>\n                    <Widget\n                      src={\n                        \"megha19.near/widget/devhub.entity.proposal.CategoryDropdown\"\n                      }\n                      props={{\n                        selectedValue: snapshot.category,\n                        disabled: true,\n                      }}\n                    />\n                  </div>\n                  <div className=\"text-muted h6 border-bottom pb-1 mt-3\">\n                    SUMMARY\n                  </div>\n                  <div>{snapshot.summary}</div>\n                  <div className=\"text-muted h6 border-bottom pb-1 mt-3 mb-4\">\n                    DESCRIPTION\n                  </div>\n                  <Widget\n                    src=\"megha19.near/widget/devhub.components.molecule.MarkdownViewer\"\n                    props={{ text: snapshot.description }}\n                  />\n\n                  <div className=\"d-flex gap-2 align-items-center mt-4\">\n                    <Widget\n                      src=\"near/widget/v1.LikeButton\"\n                      props={{\n                        item,\n                      }}\n                    />\n                    <Widget\n                      src=\"near/widget/CommentButton\"\n                      props={{\n                        item,\n                        onClick: () => {},\n                      }}\n                    />\n                    <Widget\n                      src=\"near/widget/CopyUrlButton\"\n                      props={{\n                        url: proposalURL,\n                      }}\n                    />\n                    <Widget\n                      src=\"near/widget/ShareButton\"\n                      props={{\n                        postType: \"post\",\n                        url: proposalURL,\n                      }}\n                    />\n                  </div>\n                </div>\n              </ProposalContainer>\n            </div>\n            <div className=\"border-bottom pb-4 mt-4\">\n              <Widget\n                src={\"megha19.near/widget/devhub.entity.proposal.Comments\"}\n                props={{\n                  item: item,\n                }}\n              />\n            </div>\n            <div className=\"mt-4\">\n              <Widget\n                src={\n                  \"megha19.near/widget/devhub.entity.proposal.ComposeComment\"\n                }\n                props={{\n                  item: item,\n                  notifyAccountId: extractNotifyAccountId(item),\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"d-flex flex-column gap-4 flex-1\">\n            <SidePanelItem title=\"Author\">\n              <Widget\n                src=\"near/widget/AccountProfile\"\n                props={{\n                  accountId: editorAccountId,\n                }}\n              />\n            </SidePanelItem>\n            <SidePanelItem title=\"Verification Status\">\n              <KycVerificationStatus />\n            </SidePanelItem>\n            <SidePanelItem\n              title={\n                \"Linked Proposals \" + `(${snapshot.linked_proposals.length})`\n              }\n            >\n              <LinkedProposals />\n            </SidePanelItem>\n            <SidePanelItem title=\"Funding Ask\">\n              <div className=\"h4 text-black\">\n                {snapshot.requested_sponsorship_amount && (\n                  <>\n                    {snapshot.requested_sponsorship_amount}{\" \"}\n                    {tokenName ?? \"NEAR\"}\n                  </>\n                )}\n              </div>\n            </SidePanelItem>\n            <SidePanelItem title=\"Requested Sponsor\">\n              {snapshot.requested_sponsor && (\n                <Widget\n                  src=\"near/widget/AccountProfile\"\n                  props={{\n                    accountId: snapshot.requested_sponsor,\n                  }}\n                />\n              )}\n            </SidePanelItem>\n            <SidePanelItem title=\"Supervisor\">\n              {snapshot.supervisor && (\n                <Widget\n                  src=\"near/widget/AccountProfile\"\n                  props={{\n                    accountId: snapshot.supervisor,\n                  }}\n                />\n              )}\n            </SidePanelItem>\n            <SidePanelItem title=\"Payouts\">\n              {snapshot.payouts.length > 0 ? (\n                <div>\n                  {snapshot.payouts.map((hash) => {\n                    const link = `https://nearblocks.io/blocks/${hash}`;\n                    return (\n                      <a\n                        href={link}\n                        style={{ textDecoration: \"none\" }}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        {link}\n                      </a>\n                    );\n                  })}\n                </div>\n              ) : (\n                \"No Payouts yet\"\n              )}\n            </SidePanelItem>\n            <SidePanelItem\n              title={\n                <div>\n                  <div className=\"d-flex justify-content-between align-content-center\">\n                    Timeline\n                    {isModerator && (\n                      <div onClick={() => setShowTimelineSetting(true)}>\n                        <i class=\"bi bi-gear\"></i>\n                      </div>\n                    )}\n                  </div>\n                  {showTimelineSetting && (\n                    <div className=\"mt-2 d-flex flex-column gap-2\">\n                      <h6 className=\"mb-0\">Proposal Status</h6>\n                      <Widget\n                        src=\"megha19.near/widget/devhub.components.molecule.DropDown\"\n                        props={{\n                          options: proposalStatusOptions,\n                          selectedValue: updatedProposalStatus,\n                          onUpdate: (v) => {\n                            setUpdatedProposalStatus(v);\n                          },\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n              }\n            >\n              <div className=\"d-flex flex-column gap-3\">\n                <div className=\"d-flex gap-3 mt-2\">\n                  <div className=\"d-flex flex-column\">\n                    {stepsArray.map((_, index) => {\n                      const indexOfCurrentItem = index;\n                      let color = \"\";\n                      let statusIndex = selectedStatusIndex;\n                      // index 2,3,4 is of decision\n                      if (\n                        selectedStatusIndex === 3 ||\n                        selectedStatusIndex === 2 ||\n                        selectedStatusIndex === 4\n                      ) {\n                        statusIndex = 2;\n                      }\n                      if (selectedStatusIndex === 5) {\n                        statusIndex = 3;\n                      }\n                      const current = statusIndex === indexOfCurrentItem;\n                      const completed =\n                        statusIndex > indexOfCurrentItem ||\n                        updatedProposalStatus.value.status ===\n                          TIMELINE_STATUS.FUNDED;\n                      return (\n                        <div className=\"d-flex flex-column align-items-center gap-1\">\n                          <div\n                            className={\n                              \"circle \" +\n                              (completed && \" green-fill \") +\n                              (current && \" yellow-fill \")\n                            }\n                          >\n                            {completed && (\n                              <div\n                                className=\"d-flex justify-content-center align-items-center\"\n                                style={{ height: \"110%\" }}\n                              >\n                                <i class=\"bi bi-check\"></i>\n                              </div>\n                            )}\n                          </div>\n\n                          {index !== stepsArray.length - 1 && (\n                            <div\n                              className={\n                                \"vertical-line\" +\n                                (index === stepsArray.length - 2\n                                  ? \"-sm \"\n                                  : \" \") +\n                                (completed && \" green-fill \") +\n                                (current && \" yellow-fill \")\n                              }\n                            ></div>\n                          )}\n                        </div>\n                      );\n                    })}\n                  </div>\n                  <div className=\"d-flex flex-column gap-3\">\n                    <TimelineItems\n                      title=\"1) Draft\"\n                      value={TIMELINE_STATUS.DRAFT}\n                    >\n                      <div>\n                        Once an author submits a proposal, it is in draft mode\n                        and open for community comments. The author can still\n                        make changes to the proposal during this stage and\n                        submit it for official review when ready.\n                      </div>\n                    </TimelineItems>\n                    <TimelineItems\n                      title=\"2) Review\"\n                      value={TIMELINE_STATUS.REVIEW}\n                    >\n                      <div className=\"d-flex flex-column gap-2\">\n                        Sponsors who agree to consider the proposal may request\n                        attestations from work groups.\n                        <CheckBox\n                          value=\"\"\n                          label=\"Sponsor provides feedback or requests reviews\"\n                          isChecked={\n                            updatedProposalStatus.value.sponsor_requested_review\n                          }\n                        />\n                        <CheckBox\n                          value=\"\"\n                          label=\"Reviewer completes attestations (Optional)\"\n                          isChecked={\n                            updatedProposalStatus.value\n                              .reviewer_completed_attestation\n                          }\n                        />\n                      </div>\n                    </TimelineItems>\n                    <TimelineItems\n                      title=\"3) Decision\"\n                      values={[\n                        TIMELINE_STATUS.APPROVED,\n                        TIMELINE_STATUS.APPROVED_CONDITIONALLY,\n                        TIMELINE_STATUS.REJECTED,\n                      ]}\n                    >\n                      <div className=\"d-flex flex-column gap-2\">\n                        <div>Sponsor makes a final decision:</div>\n                        <RadioButton\n                          value=\"\"\n                          label=\"Approve\"\n                          isChecked={\n                            updatedProposalStatus.value.status ===\n                            TIMELINE_STATUS.APPROVED\n                          }\n                        />\n                        <RadioButton\n                          value=\"\"\n                          label={\n                            <>\n                              Approve - Conditional <br />\n                              <span>\n                                Require follow up from recipient after payment\n                              </span>{\" \"}\n                            </>\n                          }\n                          isChecked={\n                            updatedProposalStatus.value.status ===\n                            TIMELINE_STATUS.APPROVED_CONDITIONALLY\n                          }\n                        />\n                        <RadioButton\n                          value=\"Reject\"\n                          label=\"Reject\"\n                          isChecked={\n                            updatedProposalStatus.value.status ===\n                            TIMELINE_STATUS.REJECTED\n                          }\n                        />\n                      </div>\n                    </TimelineItems>\n                    <TimelineItems\n                      title=\"4) Payment Processing\"\n                      value={TIMELINE_STATUS.PAYMENT_PROCESSING}\n                    >\n                      <div className=\"d-flex flex-column gap-2\">\n                        <CheckBox\n                          value=\"\"\n                          label=\"Sponsor verifies KYC/KYB\"\n                          isChecked={updatedProposalStatus.value.kyc_verified}\n                        />\n                        <CheckBox\n                          value=\"\"\n                          label=\"Sponsor sends test transaction\"\n                          isChecked={\n                            updatedProposalStatus.value.test_transaction_sent\n                          }\n                        />\n                        <CheckBox\n                          value=\"\"\n                          label=\"Sponsor creates funding request from Trustees\"\n                          isChecked={\n                            updatedProposalStatus.value\n                              .request_for_trustees_created\n                          }\n                        />\n                      </div>\n                    </TimelineItems>\n                    <TimelineItems\n                      title=\"5) Funded\"\n                      value={TIMELINE_STATUS.FUNDED}\n                    >\n                      <CheckBox\n                        value=\"\"\n                        label=\"DevDAO Trustee Releases payment\"\n                        isChecked={\n                          updatedProposalStatus.value.status ===\n                          TIMELINE_STATUS.FUNDED\n                        }\n                      />\n                    </TimelineItems>\n                  </div>\n                </div>\n                {showTimelineSetting && (\n                  <div className=\"d-flex gap-2 align-items-center justify-content-end text-sm\">\n                    <Widget\n                      src={\n                        \"megha19.near/widget/devhub.components.molecule.Button\"\n                      }\n                      props={{\n                        label: \"Cancel\",\n                        classNames: {\n                          root: \"btn-outline-danger border-0 shadow-none btn-sm\",\n                        },\n                        onClick: () => {\n                          setShowTimelineSetting(false);\n                          setUpdatedProposalStatus(proposalStatus);\n                        },\n                      }}\n                    />\n                    <Widget\n                      src={\n                        \"megha19.near/widget/devhub.components.molecule.Button\"\n                      }\n                      props={{\n                        label: \"Save\",\n                        classNames: { root: \"green-btn btn-sm\" },\n                        onClick: () => {\n                          editProposalStatus({\n                            timeline: updatedProposalStatus.value,\n                          });\n                        },\n                      }}\n                    />\n                  </div>\n                )}\n              </div>\n            </SidePanelItem>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/devhub.entity.proposal.Proposal", "fact_widget_deployments_id": "47ce62c0fa94e4ae110f9b5bd7e8cf8f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}