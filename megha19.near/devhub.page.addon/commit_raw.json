{"tx_hash": "2TPr7kCWgNHynWKe4Cfa2bw9LeXT9Y625SUq1Hm5x77N", "action_id_social": "Ao9aDgs9zuhqui4hMfSx5RusygDnkTqQcy976j8eDdHZ-0-widget", "block_id": 108325291, "block_timestamp": "2023-12-19T11:25:57.867Z", "signer_id": "megha19.near", "widget_name": "devhub.page.addon", "source_code": "const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 0 1rem;\n\n  @media screen and (max-width: 960px) {\n    padding: 0 1rem;\n  }\n`;\n\nconst Content = styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow: auto;\n`;\n\nconst SettingsButton = styled.button`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n\n  background-color: #fff;\n  display: flex;\n  padding: 14px 16px;\n  align-items: center;\n  gap: 16px;\n  width: 50px;\n  height: 50px;\n\n  border-radius: 4px;\n  border: 1px solid #00ec97;\n\n  z-index: 10;\n\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  &:hover {\n    transform: translateY(2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  }\n\n  &:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n`;\n\nconst CenteredMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${(p) => p.height ?? \"100%\"};\n`;\n\nconst { addon, permissions, handle } = props;\n\nconst { getAllAddons, setCommunityAddon } = VM.require(\n  \"megha19.near/widget/core.adapter.devhub-contract\"\n);\n\nif (!getAllAddons || !setCommunityAddon) {\n  return <p>Loading modules...</p>;\n}\n\nconst availableAddons = getAllAddons();\n\nconsole.log(availableAddons);\n\nconst addonMatch = (availableAddons ?? []).find(\n  (it) => it.id === addon.addon_id\n);\n\nif (!addonMatch) {\n  return (\n    <CenteredMessage height={\"384px\"}>\n      <h2>Addon with id: \"{addon.addon_id}\" not found.</h2>\n    </CenteredMessage>\n  );\n}\n\nconst config = JSON.parse(addon.parameters || \"null\");\n\nconst ButtonRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst [view, setView] = useState(props.view || \"viewer\");\n\nconst checkFullyRefactored = (addon_id) => {\n  switch (addon_id) {\n    case \"kanban\":\n      // case \"github\":\n      return false;\n    default:\n      return true;\n  }\n};\n\nconst isFullyRefactored = checkFullyRefactored(addon.addon_id);\n\nfunction updateWidgetEndpoint(widgetSrc) {\n  widgetSrc = widgetSrc.replace(\"configurator\", \"Configurator\");\n  return widgetSrc.replace(\"devgovgigs.near\", \"devhub.near\");\n}\n\nreturn (\n  <Container>\n    {isFullyRefactored && // Unfully refactored addons have the configurator built in.\n      // So we hide the header\n      permissions.can_configure && (\n        <SettingsButton\n          onClick={() => setView(view === \"configure\" ? \"view\" : \"configure\")}\n        >\n          {view === \"configure\" ? (\n            <span className=\"bi bi-x\"></span>\n          ) : (\n            <span className=\"bi bi-gear\"></span>\n          )}\n        </SettingsButton>\n      )}\n    <Content>\n      {/* We hide in order to prevent a reload when we switch between two views */}\n      <div className={`${view !== \"configure\" ? \"d-none\" : \"\"}`}>\n        <Widget\n          src={updateWidgetEndpoint(addonMatch.configurator_widget)}\n          props={{\n            ...config,\n            data: config,\n            onSubmit: (data) => {\n              setCommunityAddon({\n                handle,\n                addon: {\n                  ...addon,\n                  parameters: JSON.stringify(data),\n                },\n              });\n            },\n            handle, // this is temporary prop drilling until kanban and github are migrated\n            permissions,\n          }}\n        />\n      </div>\n      <div className={`${view === \"configure\" ? \"d-none\" : \"\"}`}>\n        <Widget\n          src={updateWidgetEndpoint(addonMatch.view_widget)}\n          props={{\n            ...config,\n            data: config,\n            // temporary prop drilling\n            handle,\n            permissions,\n          }}\n        />\n      </div>\n    </Content>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/devhub.page.addon", "fact_widget_deployments_id": "76b93eab1fac24f20779bda31b0fa59f", "inserted_timestamp": "2023-12-19T13:52:29.897Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}