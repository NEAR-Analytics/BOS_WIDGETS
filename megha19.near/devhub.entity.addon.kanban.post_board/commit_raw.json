{"tx_hash": "QJkFHn7AUvETegionXrxTMgzqpx9jD4kzhtR1eihGei", "action_id_social": "EyDwLmBWbPTyZtL5GhAJr1YNHjQVuYBUFXediyifY8Ko-0-widget", "block_id": 109304921, "block_timestamp": "2024-01-01T08:07:36.273Z", "signer_id": "megha19.near", "widget_name": "devhub.entity.addon.kanban.post_board", "source_code": "const { getPostsByLabel } = VM.require(\n  \"megha19.near/widget/core.adapter.devhub-contract\"\n);\ngetPostsByLabel || (getPostsByLabel = () => {});\n\nconst postTagsToIdSet = (tags) => {\n  return new Set(\n    (tags ?? [])?.map((tag) => getPostsByLabel({ label: tag }) ?? []).flat(1)\n  );\n};\n\nconst configToColumnData = ({ columns, tags }) =>\n  Object.entries(columns).reduce((registry, [columnId, column]) => {\n    const postIds = (getPostsByLabel({ label: column.tag }) ?? []).reverse();\n    return {\n      ...registry,\n      [columnId]: {\n        ...column,\n        postIds:\n          tags.required.length > 0\n            ? postIds.filter(\n                (postId) =>\n                  postTagsToIdSet(tags.required).has(postId) &&\n                  !postTagsToIdSet(tags.excluded).has(postId)\n              )\n            : postIds,\n      },\n    };\n  }, {});\n\nconst KanbanPostBoard = ({ metadata, payload }) => {\n  const columns = Object.entries(configToColumnData(payload) ?? {}).map(\n    ([columnId, column]) => (\n      <div className=\"col-3\" key={`column-${columnId}-view`}>\n        <div className=\"card rounded-4\">\n          <div\n            className={[\n              \"card-body d-flex flex-column gap-3 p-2\",\n              \"border border-2 border-secondary rounded-4\",\n            ].join(\" \")}\n          >\n            <span className=\"d-flex flex-column py-1\">\n              <h6 className=\"card-title h6 d-flex align-items-center gap-2 m-0\">\n                {column.title}\n\n                <span className=\"badge rounded-pill bg-secondary\">\n                  {column.postIds.length}\n                </span>\n              </h6>\n\n              <p class=\"text-secondary m-0\">{column.description}</p>\n            </span>\n\n            <div class=\"d-flex flex-column gap-2\">\n              {column.postIds?.map((postId) => (\n                <Widget\n                  src={`megha19.near/widget/devhub.entity.addon.${metadata.ticket.type}`}\n                  props={{ metadata: { id: postId, ...metadata.ticket } }}\n                  key={postId}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  );\n\n  return (\n    <div>\n      <div className=\"d-flex flex-column align-items-center gap-2 py-4\">\n        <h5 className=\"h5 d-inline-flex gap-2 m-0\">\n          <span>{metadata?.title}</span>\n        </h5>\n\n        <p className=\"m-0 py-1 text-secondary text-center\">\n          {metadata?.description}\n        </p>\n      </div>\n      <div className=\"d-flex gap-3 w-100\" style={{ overflowX: \"auto\" }}>\n        <div\n          className={[\n            \"d-flex align-items-center justify-content-center w-100 text-black-50 opacity-50\",\n            columns.length === 0 ? \"\" : \"d-none\",\n          ].join(\" \")}\n          style={{ height: 384 }}\n        >\n          No columns were created so far.\n        </div>\n\n        {columns}\n      </div>\n    </div>\n  );\n};\n\nreturn KanbanPostBoard(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/devhub.entity.addon.kanban.post_board", "fact_widget_deployments_id": "02c1853dad79b833d5b9701a9c083bfd", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 12}