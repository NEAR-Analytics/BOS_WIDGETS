{"tx_hash": "BgVpfNs7UWX57zANTr3tQFzBG9vQg9b2RkqmBj6VgrmU", "action_id_social": "51DV2VMvEEnUdJBVVFeA7dBHKoscCGirm2MsP8t5R7wP-0-widget", "block_id": 119339613, "block_timestamp": "2024-05-20T10:59:26.215Z", "signer_id": "megha19.near", "widget_name": "near-prpsls-bos.components.admin.AccountsEditor", "source_code": "/*\nLicense: MIT\nAuthor: devhub.near\nHomepage: https://github.com/NEAR-DevHub/near-prpsls-bos#readme\n*/\n/* INCLUDE: \"includes/common.jsx\" */\nconst REPL_DEVHUB = \"devhub.near\";\nconst REPL_INFRASTRUCTURE_COMMITTEE = \"megha19.near\";\nconst REPL_INFRASTRUCTURE_COMMITTEE_CONTRACT = \"truedove38.near\";\nconst REPL_RPC_URL = \"https://rpc.mainnet.near.org\";\nconst REPL_NEAR = \"near\";\nconst RFP_IMAGE =\n  \"https://ipfs.near.social/ipfs/bafkreicbygt4kajytlxij24jj6tkg2ppc2dw3dlqhkermkjjfgdfnlizzy\";\n\nconst RFP_FEED_INDEXER_QUERY_NAME =\n  \"polyprogrammist_near_devhub_objects_s_rfps_with_latest_snapshot\";\n\nconst RFP_INDEXER_QUERY_NAME =\n  \"polyprogrammist_near_devhub_objects_s_rfp_snapshots\";\n\nconst PROPOSAL_FEED_INDEXER_QUERY_NAME =\n  \"polyprogrammist_near_devhub_objects_s_proposals_with_latest_snapshot\";\n\nconst PROPOSAL_QUERY_NAME =\n  \"polyprogrammist_near_devhub_objects_s_proposal_snapshots\";\nconst RFP_TIMELINE_STATUS = {\n  ACCEPTING_SUBMISSIONS: \"ACCEPTING_SUBMISSIONS\",\n  EVALUATION: \"EVALUATION\",\n  PROPOSAL_SELECTED: \"PROPOSAL_SELECTED\",\n  CANCELLED: \"CANCELLED\",\n};\n\nconst PROPOSAL_TIMELINE_STATUS = {\n  DRAFT: \"DRAFT\",\n  REVIEW: \"REVIEW\",\n  APPROVED: \"APPROVED\",\n  REJECTED: \"REJECTED\",\n  CANCELED: \"CANCELLED\",\n  APPROVED_CONDITIONALLY: \"APPROVED_CONDITIONALLY\",\n  PAYMENT_PROCESSING: \"PAYMENT_PROCESSING\",\n  FUNDED: \"FUNDED\",\n};\n\nconst QUERYAPI_ENDPOINT = `https://near-queryapi.api.pagoda.co/v1/graphql`;\n\nasync function fetchGraphQL(operationsDoc, operationName, variables) {\n  return asyncFetch(QUERYAPI_ENDPOINT, {\n    method: \"POST\",\n    headers: { \"x-hasura-role\": `polyprogrammist_near` },\n    body: JSON.stringify({\n      query: operationsDoc,\n      variables: variables,\n      operationName: operationName,\n    }),\n  });\n}\n\nconst CANCEL_RFP_OPTIONS = {\n  CANCEL_PROPOSALS: \"CANCEL_PROPOSALS\",\n  UNLINK_PROPOSALS: \"UNLINK_PROPOSALSS\",\n  NONE: \"NONE\",\n};\n\nfunction parseJSON(json) {\n  if (typeof json === \"string\") {\n    try {\n      return JSON.parse(json);\n    } catch (error) {\n      return json;\n    }\n  } else {\n    return json;\n  }\n}\n\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\n\nconst PROPOSALS_APPROVED_STATUS_ARRAY = [\n  PROPOSAL_TIMELINE_STATUS.APPROVED,\n  PROPOSAL_TIMELINE_STATUS.APPROVED_CONDITIONALLY,\n  PROPOSAL_TIMELINE_STATUS.PAYMENT_PROCESSING,\n  PROPOSAL_TIMELINE_STATUS.FUNDED,\n];\n/* END_INCLUDE: \"includes/common.jsx\" */\n\nconst { data, setList, validate, invalidate } = props;\n\nconst [newItem, setNewItem] = useState(\"\");\n\nconst handleAddItem = () => {\n  if (validate(newItem)) {\n    setList([...data.list, newItem]);\n    setNewItem(\"\");\n  } else {\n    return invalidate();\n  }\n};\n\nconst handleDeleteItem = (index) => {\n  const updatedData = [...data.list];\n  updatedData.splice(index, 1);\n  setList(updatedData);\n};\n\nconst Item = styled.div`\n  padding: 10px;\n  margin: 5px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: 10px;\n`;\n\nreturn (\n  <>\n    {data.list.map((item, index) => (\n      <Item key={index}>\n        <div className=\"flex-grow-1\">\n          <Widget\n            src={`${REPL_DEVHUB}/widget/devhub.components.molecule.Input`}\n            props={{\n              className: \"flex-grow-1\",\n              value: item,\n              skipPaddingGap: true,\n              placeholder: data.placeholder,\n              inputProps: {\n                prefix: data.prefix,\n                disabled: true,\n              },\n            }}\n          />\n        </div>\n        <button\n          className=\"btn btn-outline-danger\"\n          onClick={() => handleDeleteItem(index)}\n        >\n          <i className=\"bi bi-trash-fill\" />\n        </button>\n      </Item>\n    ))}\n    {data.list.length < data.maxLength && (\n      <Item>\n        <div className=\"flex-grow-1\">\n          <Widget\n            src={`${REPL_INFRASTRUCTURE_COMMITTEE}/widget/near-prpsls-bos.components.molecule.AccountInput`}\n            props={{\n              onUpdate: (value) => setNewItem(value),\n              value: newItem,\n              placeholder: data.placeholder,\n            }}\n          />\n        </div>\n        <button\n          className=\"btn btn-success add-member\"\n          onClick={handleAddItem}\n          disabled={newItem === \"\"}\n          data-testid=\"add-to-list\"\n        >\n          <i className=\"bi bi-plus\" />\n        </button>\n      </Item>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/near-prpsls-bos.components.admin.AccountsEditor", "fact_widget_deployments_id": "8ba5203f6de8c650718ab5ed2d38c20b", "inserted_timestamp": "2024-05-20T12:58:45.841Z", "modified_timestamp": "2024-05-20T12:58:45.841Z", "__row_index": 6}