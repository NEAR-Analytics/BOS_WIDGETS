{"tx_hash": "9Eug8dGUgshoaAxy5zs4EUBPRDLhWijWdwzc1SpmxWMj", "action_id_social": "BNCWToe5qZ6PKUBqDKEegPoSRrNccoGe4249Q9BEAQcY-0-widget", "block_id": 119335326, "block_timestamp": "2024-05-20T09:35:35.455Z", "signer_id": "megha19.near", "widget_name": "components.molecule.Compose", "source_code": "import {\n  REPL_INFRASTRUCTURE_COMMITTEE,\n  REPL_NEAR,\n  REPL_DEVHUB,\n} from \"@/includes/common\";\n\nconst EmbeddCSS = `\n  .CodeMirror {\n   margin-inline:10px;\n   border-radius:5px;\n  }\n\n  .editor-toolbar {\n    border: none !important;\n  }\n`;\n\nconst Wrapper = styled.div`\n  .nav-link {\n    color: inherit !important;\n  }\n\n  .card-header {\n    padding-bottom: 0px !important;\n  }\n`;\n\nconst Compose = ({\n  data,\n  onChange,\n  autocompleteEnabled,\n  placeholder,\n  height,\n  embeddCSS,\n  showProposalIdAutoComplete,\n  onChangeKeyup,\n  handler,\n}) => {\n  State.init({\n    data: data,\n    selectedTab: \"editor\",\n    autoFocus: false,\n  });\n\n  useEffect(() => {\n    if (typeof onChange === \"function\") {\n      onChange(state.data);\n    }\n  }, [state.data]);\n\n  useEffect(() => {\n    // for clearing editor after txn approval/ showing draft state\n    if (data !== state.data || handler !== state.handler) {\n      State.update({ data: data, handler: handler });\n    }\n  }, [data, handler]);\n\n  return (\n    <Wrapper>\n      <div className=\"card\">\n        <div className=\"card-header\" style={{ position: \"relative\" }}>\n          <div>\n            <ul class=\"nav nav-tabs\">\n              <li class=\"nav-item\">\n                <button\n                  class={`nav-link ${\n                    state.selectedTab === \"editor\" ? \"active\" : \"\"\n                  }`}\n                  onClick={() =>\n                    State.update({ selectedTab: \"editor\", autoFocus: true })\n                  }\n                >\n                  Write\n                </button>\n              </li>\n              <li class=\"nav-item\">\n                <button\n                  class={`nav-link ${\n                    state.selectedTab === \"preview\" ? \"active\" : \"\"\n                  }`}\n                  onClick={() => State.update({ selectedTab: \"preview\" })}\n                >\n                  Preview\n                </button>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        {state.selectedTab === \"editor\" ? (\n          <>\n            <Widget\n              src={`${REPL_INFRASTRUCTURE_COMMITTEE}/widget/near-prpsls-bos.components.molecule.SimpleMDE`}\n              props={{\n                data: { handler: state.handler, content: state.data },\n                onChange: (content) => {\n                  State.update({ data: content, handler: \"update\" });\n                },\n                placeholder: placeholder,\n                height,\n                embeddCSS: embeddCSS || EmbeddCSS,\n                showAutoComplete: autocompleteEnabled,\n                showProposalIdAutoComplete: showProposalIdAutoComplete,\n                autoFocus: state.autoFocus,\n                onChangeKeyup: onChangeKeyup,\n              }}\n            />\n          </>\n        ) : (\n          <div className=\"card-body\">\n            <Widget\n              src={`${REPL_DEVHUB}/widget/devhub.components.molecule.MarkdownViewer`}\n              props={{\n                text: state.data,\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </Wrapper>\n  );\n};\n\nreturn Compose(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/megha19.near/widget/components.molecule.Compose", "fact_widget_deployments_id": "0b406bf8aee0ff8e5a1cfc49d54a6870", "inserted_timestamp": "2024-05-20T10:52:48.743Z", "modified_timestamp": "2024-05-20T11:50:20.468Z", "__row_index": 3}