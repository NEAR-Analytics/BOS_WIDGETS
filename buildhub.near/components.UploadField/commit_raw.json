{"tx_hash": "YP72EMQc9ZMAh4CVVbu4oufWfC2CSLfTzUwiKvQUpav", "action_id_social": "H1R1mxR55rXq5P5WHPjKNYrSGKiMdvdiHN2uymnXprYc-0-widget", "block_id": 121619019, "block_timestamp": "2024-06-20T21:42:31.004Z", "signer_id": "buildhub.near", "widget_name": "components.UploadField", "source_code": "const [img, setImg] = useState(\"\");\nconst [msg, setMsg] = useState(\"Upload\");\nconst uploadFile = (files) => {\n  setMsg(\"Uploading...\");\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body: files[0],\n  })\n    .catch((e) => {\n      console.error(e);\n      setMsg(\"Failed to upload\");\n    })\n    .then((res) => {\n      setImg(res.body.cid);\n      if (props.onChange) {\n        props.onChange({\n          ipfs_cid: res.body.cid,\n        });\n      }\n    });\n};\nconst UploadContainer = styled.div`\n  display: flex;\n  max-width: 390px;\n  min-height: 200px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 24px;\n  border-radius: 16px;\n  border: 1px dashed var(--stroke-color, rgba(255, 255, 255, 0.2));\n  background: ${(props) =>\n    props.background ? \"var(--bg-2, #23242B)\" : \"var(--bg-1, #000000)\"};\n  p {\n    color: var(--font-color, #fff);\n    text-align: center;\n    /* Body/Medium-16px */\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n    margin: 0;\n  }\n  p.secondary {\n    color: var(--font-muted-color, #cdd0d5);\n    text-align: center;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 16px; /* 133.333% */\n  }\n  i {\n    color: var(--font-color, #fff);\n    font-size: 2rem;\n  }\n`;\nconst Button = styled.div`\n  .btn {\n    all: unset;\n    display: inline-flex;\n    padding: 10px 20px;\n    justify-content: center;\n    align-items: center;\n    gap: 4px;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    line-height: normal;\n    font-family: \"Poppins\", sans-serif;\n    transition: all 300ms;\n    background: var(--button-outline-bg, transparent);\n    color: var(--button-outline-color, #fff);\n    color: ${props.theme === \"light\" ? \"black\" : \"\"};\n    border: 1px solid var(--stroke-color, rgba(255, 255, 255, 0.2));\n    &:hover:not(:disabled) {\n      background: var(--button-outline-hover-bg, rgba(255, 255, 255, 0.2));\n      cursor: pointer;\n    }\n  }\n`;\nconst ButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n`;\nconst UploadedImage = styled.img`\n  height: 40px;\n  width: 40px;\n  border-radius: 16px;\n`;\nreturn (\n  <UploadContainer background={background}>\n    <i class=\"bi bi-cloud-upload\"></i>\n    <div className=\"d-flex flex-column gap-2\">\n      <p>Choose a file or drag & drop it here.</p>\n      <p className=\"secondary\">JPEG, PNG, PDF, and MP4 formats, up to 50 MB.</p>\n    </div>\n    <ButtonContainer>\n      <Button>\n        <Files\n          multiple={false}\n          accepts={[\"image/*\"]}\n          clickable\n          className=\"btn btn-outline-primary\"\n          onChange={(f) => uploadFile(f)}\n        >\n          {img ? \"Replace\" : \"Upload File\"}\n        </Files>\n      </Button>\n      {img ? (\n        <UploadedImage\n          src={`https://ipfs.near.social/ipfs/${img}`}\n          alt=\"Image Preview\"\n        />\n      ) : props.image ? (\n        <Widget\n          src=\"mob.near/widget/Image\"\n          loading=\"\"\n          props={{ image: props.image, style: { height: 40, width: 40 } }}\n        />\n      ) : (\n        \"\"\n      )}\n    </ButtonContainer>\n  </UploadContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/components.UploadField", "fact_widget_deployments_id": "bca06f9e1f757dc22e0dd8ff19dffde4", "inserted_timestamp": "2024-06-20T22:54:09.280Z", "modified_timestamp": "2024-06-20T23:54:31.353Z", "__row_index": 2}