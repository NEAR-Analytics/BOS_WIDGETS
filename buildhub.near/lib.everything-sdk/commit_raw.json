{"tx_hash": "4uWLw3RFfmxSjmyqNCtJy7WU41qpXcctxZ23rMcPRyxo", "action_id_social": "HMF43djp6oSZ36g1TAJsodXK3QcUWdas4evBrZhJtUPW-0-widget", "block_id": 113903304, "block_timestamp": "2024-03-01T20:19:45.544Z", "signer_id": "buildhub.near", "widget_name": "lib.everything-sdk", "source_code": "function flattenObject(data, app, type) {\n  let paths = [];\n\n  Object.entries(data).forEach(([accountName, accountData]) => {\n    if (accountData.hasOwnProperty(app)) {\n      const testData = accountData[app];\n      if (testData.hasOwnProperty(type)) {\n        const thingData = testData[type];\n        Object.entries(thingData).forEach(([key]) => {\n          paths.push(`${accountName}/${app}/${type}/${key}`);\n        });\n      }\n    }\n  });\n\n  return paths;\n}\n\nfunction fetchThings(app, type) {\n  const rawKeys = Social.keys(`*/${app}/${type}/*`, \"final\", {\n    return_type: \"BlockHeight\",\n  });\n\n  if (!rawKeys) {\n    return \"\";\n  }\n\n  const flattenedKeys = flattenObject(rawKeys, app, type);\n\n  let things = [];\n  flattenedKeys.forEach((key) =>\n    things.push({\n      ...JSON.parse(Social.get(key, \"final\")),\n      key,\n    }),\n  );\n\n  return things;\n}\n\nreturn { fetchThings };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/lib.everything-sdk", "fact_widget_deployments_id": "c0c1ccf11f66da8ca18456cb3d7b6c63", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}