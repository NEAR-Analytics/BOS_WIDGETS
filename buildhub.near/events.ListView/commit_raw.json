{"tx_hash": "CwEk2kWWK7SwrUzJqpnPkFhRq72UuwPqUj2diuoX5kZF", "action_id_social": "2bkGmYse1ovpoJczmqd8ghsZytPmv1SYJz8HPF9gMBs1-0-widget", "block_id": 112631448, "block_timestamp": "2024-02-11T20:01:22.985Z", "signer_id": "buildhub.near", "widget_name": "events.ListView", "source_code": "const { Button, Hashtag } = VM.require(\"buildhub.near/widget/components\") || {\n  Button: () => <></>,\n  Hashtag: () => <></>,\n};\n\nconst events = props.events ?? [];\nconst currentDate = props.currentDate;\n\nif (!events || !currentDate) {\n  return \"\";\n}\n\nconst currentMonthEvents = events.filter((event) => {\n  const eventDate = new Date(event.start);\n  return eventDate.getMonth() === currentDate.getMonth();\n});\n\nconst categorizedEvents = currentMonthEvents.reduce((result, event) => {\n  const eventDate = new Date(event.start)\n    .toLocaleDateString(\"en-us\", {\n      day: \"numeric\",\n      month: \"short\",\n    })\n    .split(\" \")\n    .reverse()\n    .join(\" \"); // Format date as a string\n  result[eventDate] = result[eventDate] || [];\n  result[eventDate].push(event);\n  return result;\n}, {});\n\nconst EventsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n`;\n\nconst StyledEvent = styled.div`\n  border-radius: 16px;\n  background: #23242b;\n  display: flex;\n  padding: 24px;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-start;\n  gap: 24px;\n\n  color: var(--font-color, #fff);\n\n  h4,\n  p {\n    margin: 0;\n  }\n\n  h4 {\n    /* H4/Large */\n    font-size: 18px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 160%; /* 28.8px */\n  }\n\n  p {\n    /* Body/16px */\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 170%; /* 27.2px */\n  }\n\n  .cover-image {\n    img {\n      width: 40px;\n      height: 40px;\n      object-fit: cover;\n      border-radius: 8px;\n    }\n  }\n`;\n\nconst formatStartTime = (time) => {\n  const date = new Date(time);\n  const options = {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    timeZoneName: \"short\",\n  };\n\n  return date.toLocaleString(\"en-US\", options);\n};\n\nconst dateKeys = Object.keys(categorizedEvents);\n\nreturn (\n  <EventsContainer>\n    {!dateKeys.length && <p className=\"text-white\">No events this month</p>}\n    {dateKeys.map((date, i) => (\n      <div className=\"d-flex gap-5\">\n        <h3 className=\"flex-shrink-0 text-white\" style={{ minWidth: 65 }}>\n          <div className=\"d-flex gap-3 align-items-center\">\n            {date.split(\" \").map((it, i) => (\n              <span\n                style={{\n                  fontSize: i === 0 ? \"24px\" : \"16px\",\n                  color:\n                    i === 0\n                      ? \"var(--text-color, #fff)\"\n                      : \"var(--white-50, #CDD0D5)\",\n                }}\n              >\n                {it}\n              </span>\n            ))}\n          </div>\n        </h3>\n        <div className=\"w-100 d-flex flex-column gap-3\">\n          {categorizedEvents[date].map((event, i) => {\n            const hashtags =\n              event?.extendedProps?.hashtags.map((it) => {\n                if (it.customOption) {\n                  return it.hashtags;\n                }\n                return it;\n              }) ?? [];\n            const organizers =\n              event?.extendedProps?.organizers.map((it) => {\n                if (it.customOption) {\n                  return it.organizer;\n                }\n                return it;\n              }) ?? [];\n\n            const organizer = organizers[0];\n            const organizerProfile = Social.getr(`${organizer}/profile`);\n\n            const startTime = formatStartTime(event.start);\n\n            return (\n              <StyledEvent key={`event-${i}`}>\n                <div className=\"d-flex align-items-center justify-content-between w-100\">\n                  <div className=\"d-flex align-items-center gap-2 flex-wrap\">\n                    {hashtags.map((tag) => (\n                      <Hashtag key={tag}>{tag}</Hashtag>\n                    ))}\n                  </div>\n                  <span>{startTime}</span>\n                </div>\n                <div className=\"d-flex gap-3\">\n                  <div className=\"cover-image\">\n                    <Widget\n                      src=\"mob.near/widget/Image\"\n                      props={{\n                        image: event.extendedProps.cover,\n                        fallbackUrl:\n                          \"https://ipfs.near.social/ipfs/bafkreibas66y6ewop5ix2n6mgybpjz6epg7opqvcplmm5jw4jlhdik5nhe\",\n                      }}\n                    />\n                  </div>\n                  <div>\n                    <h4>{event.title}</h4>\n                    <Markdown text={event.description} />\n                  </div>\n                </div>\n                <div className=\"d-flex align-items-center flex-wrap gap-3\">\n                  <span className=\"d-flex align-items-center gap-1\">\n                    <Widget\n                      src=\"mob.near/widget/Image\"\n                      loading=\"\"\n                      props={{\n                        image: organizerProfile.image,\n                        fallbackUrl:\n                          \"https://ipfs.near.social/ipfs/bafkreibas66y6ewop5ix2n6mgybpjz6epg7opqvcplmm5jw4jlhdik5nhe\",\n                        style: {\n                          width: 24,\n                          height: 24,\n                          borderRadius: 12,\n                          objectFit: \"cover\",\n                        },\n                      }}\n                    />\n                    {organizerProfile.name ?? \"No name profile\"}\n                  </span>\n                  <span className=\"d-flex align-items-center gap-1\">\n                    <i className=\"bi bi-geo-alt\"></i>\n                    {event?.extendedProps?.location}\n                  </span>\n                </div>\n                <div>\n                  <Button\n                    href={`https://${event?.url}`}\n                    target=\"_blank\"\n                    variant=\"primary\"\n                  >\n                    Join Now\n                  </Button>\n                </div>\n              </StyledEvent>\n            );\n          })}\n        </div>\n      </div>\n    ))}\n  </EventsContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/events.ListView", "fact_widget_deployments_id": "41e487f96751dd14e8827fff29f8e1cc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}