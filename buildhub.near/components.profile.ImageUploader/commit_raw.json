{"tx_hash": "CV8Cs7DdaXkJWPnjPMVt2nqmQUZXXQhHchrhRk52GCwj", "action_id_social": "CVemaBbpRuNAeYvqtXmzV7zVjATVeFeeK3dbU5uTZ18E-0-widget", "block_id": 117392570, "block_timestamp": "2024-04-22T16:24:25.287Z", "signer_id": "buildhub.near", "widget_name": "components.profile.ImageUploader", "source_code": "const [img, setImg] = useState(null);\nconst [msg, setMsg] = useState(\"Replace\");\nconst uploadFile = (files) => {\n  setMsg(\"Uploading...\");\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body: files[0],\n  })\n    .catch((e) => {\n      console.error(e);\n      setMsg(\"Failed to upload\");\n    })\n    .then((res) => {\n      setImg(res.body.cid);\n      setMsg(\"Replace\");\n      props.setImage({\n        ipfs_cid: res.body.cid,\n      });\n    });\n};\nreturn (\n  <>\n    {img ? (\n      <img src={`https://ipfs.near.social/ipfs/${img}`} alt=\"Image Preview\" />\n    ) : (\n      <Widget\n        src=\"mob.near/widget/Image\"\n        loading=\"\"\n        props={{ image: props.image }}\n      />\n    )}\n    <Files\n      multiple={false}\n      accepts={[\"image/*\"]}\n      clickable\n      className=\"text-white\"\n      style={{ cursor: \"pointer\" }}\n      onChange={(f) => uploadFile(f)}\n    >\n      {msg}\n    </Files>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/components.profile.ImageUploader", "fact_widget_deployments_id": "a51e916943afc87e186d7e3041800803", "inserted_timestamp": "2024-04-22T18:38:50.728Z", "modified_timestamp": "2024-04-22T18:38:50.728Z", "__row_index": 3}