{"tx_hash": "2D7DA7RvtMhdHsqMGj21pqt6J6gE8pon5ctj7CV1NhXB", "action_id_social": "2dednauqPtTaZ33Qu3oJ5j9agk7MFdgBmwrGRbXXNeBa-0-widget", "block_id": 111942190, "block_timestamp": "2024-02-02T15:47:46.313Z", "signer_id": "buildhub.near", "widget_name": "components.profile.ImageUploader", "source_code": "const [img, setImg] = useState(null);\nconst [msg, setMsg] = useState(\"Replace\");\n\nconst uploadFile = (files) => {\n  setMsg(\"Uploading...\");\n\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body: files[0],\n  })\n    .catch((e) => {\n      console.error(e);\n      setMsg(\"Failed to upload\");\n    })\n    .then((res) => {\n      setImg(res.body.cid);\n      setMsg(\"Replace\");\n      props.setImage({\n        ipfs_cid: res.body.cid,\n      });\n    });\n};\n\nreturn (\n  <>\n    {img ? (\n      <img src={`https://ipfs.near.social/ipfs/${img}`} />\n    ) : (\n      <Widget\n        src=\"mob.near/widget/Image\"\n        loading=\"\"\n        props={{ image: props.image }}\n      />\n    )}\n    <Files\n      multiple={false}\n      accepts={[\"image/*\"]}\n      clickable\n      className=\"text-white\"\n      style={{ cursor: \"pointer\" }}\n      onChange={(f) => uploadFile(f)}\n    >\n      {msg}\n    </Files>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/components.profile.ImageUploader", "fact_widget_deployments_id": "ef1cbf601257ae00c2676c597a87602a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}