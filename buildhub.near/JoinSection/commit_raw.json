{"tx_hash": "3apsm9Ubr1YYx8mAUE7bEZducMC9zi7Y4BSLPCxPsuUm", "action_id_social": "BtZQPFkvdTZNVZpMDiKLJtNRY8dfakwawd8mfNtDcr1c-0-widget", "block_id": 111911959, "block_timestamp": "2024-02-02T06:03:46.908Z", "signer_id": "buildhub.near", "widget_name": "JoinSection", "source_code": "const [isMember, setIsMember] = useState(false);\n\nif (!context.accountId) {\n  return \"Login to continue...\";\n}\n\nconst JoinContainer = styled.div`\n  padding: 3rem;\n  background-color: #0b0c14;\n  color: #fff;\n  height: 100%;\n\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Card = styled.div`\n  display: flex;\n  max-width: 500px;\n  width: 100%;\n  max-height: 550px;\n  padding: 80px 24px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 40px;\n\n  border-radius: 32px;\n  background: var(--bg-2, #23242b);\n\n  img {\n    width: auto;\n    height: 54px;\n  }\n\n  h1 {\n    color: var(--white-100, #fff);\n    text-align: center;\n\n    /* H1/small */\n    font-size: 2rem;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 100%; /* 32px */\n  }\n`;\n\nconst CTASection = styled.div`\n  display: flex;\n  padding: 24px;\n  flex-direction: column;\n  align-items: center;\n  gap: 24px;\n  align-self: stretch;\n\n  h3 {\n    color: var(--white-50, rgba(255, 255, 255, 0.7));\n    text-align: center;\n\n    /* H3/Small */\n    font-size: 20px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 140%; /* 28px */\n  }\n\n  a,\n  button {\n    all: unset;\n    display: flex;\n    padding: 10px 20px;\n    justify-content: center;\n    align-items: center;\n    gap: 4px;\n\n    &:hover {\n      text-decoration: none;\n      color: #000 !important;\n      cursor: pointer;\n      background: var(--Yellow, #ffaf51);\n    }\n\n    border-radius: 8px;\n    background: var(--Yellow, #ffaf51);\n\n    color: var(--black-100, #000);\n\n    /* Other/Button_text */\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n  }\n\n  span.pending {\n    display: flex;\n    padding: 4px 12px;\n    justify-content: center;\n    align-items: center;\n    gap: 4px;\n\n    border-radius: 8px;\n    border: 1px solid rgba(81, 182, 255, 0.2);\n    background: rgba(81, 182, 255, 0.2);\n\n    color: var(--Blue, #51b6ff);\n\n    /* Other/Button_text */\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n  }\n\n  span.joined {\n    display: flex;\n    padding: 4px 12px;\n    justify-content: center;\n    align-items: center;\n    gap: 4px;\n\n    border-radius: 8px;\n    border: 1px solid rgba(81, 255, 234, 0.2);\n    background: rgba(81, 255, 234, 0.2);\n\n    color: var(--Sea-Blue, #51ffea);\n\n    /* Other/Button_text */\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n  }\n`;\n\nconst userWidgets = Social.keys(`${context.accountId}/widget/**`) || [];\nconst daoId = \"build.sputnik-dao.near\";\nconst accountId = context.accountId;\n\n// get DAO policy, deposit, and group\nconst policy = Near.view(daoId, \"get_policy\");\n\nif (policy === null) {\n  return \"\";\n}\nconst alreadyJoinedRolesNames = [\"community\", \"council\"];\n\nconst deposit = policy.proposal_bond;\n\nconst group = policy.roles\n  .filter((role) => alreadyJoinedRolesNames.includes(role.name))\n  .map((role) => {\n    return role.kind.Group;\n  });\n\nconst accounts = new Set(group[0].concat(group[1]));\n\nconst isCommunityOrCouncilMember = accounts.has(accountId);\n\nconst proposalId = Near.view(daoId, \"get_last_proposal_id\") - 1;\n\n// get data from last proposal\nconst proposal = Near.view(daoId, \"get_proposal\", {\n  id: proposalId,\n});\n\nif (proposal === null) {\n  return \"\";\n}\n\nconst canJoin =\n  accountId && accountId !== proposal.proposer && !isCommunityOrCouncilMember;\n\nconst groupMembers = group.join(\", \");\n\nconst checkMembership = (groupMembers) => {\n  if (groupMembers.indexOf(accountId) !== -1) {\n    return setIsMember(true);\n  }\n};\n\nconst validMember = checkMembership(groupMembers);\n\nconst CreateSomethingView = (props) => {\n  return (\n    <JoinContainer>\n      <Card>\n        {\" \"}\n        <img src=\"https://ipfs.near.social/ipfs/bafkreihbwho3qfvnu4yss3eh5jrx6uxhrlzdgtdjyzyjrpa6odro6wdxya\" />\n        <h1>\n          Designed to connect and empower builders in a multi-chain ecosystem\n        </h1>\n        <CTASection>\n          {userWidgets.length === 0 ? (\n            <>\n              <h3>In order to join Build DAO, you need to create a widget</h3>\n              <Link href=\"/edit\">\n                Create Something{\" \"}\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"16\"\n                  height=\"17\"\n                  viewBox=\"0 0 16 17\"\n                  fill=\"none\"\n                >\n                  <path\n                    d=\"M10.7809 7.83327L7.2049 4.25726L8.1477 3.31445L13.3332 8.49993L8.1477 13.6853L7.2049 12.7425L10.7809 9.1666H2.6665V7.83327H10.7809Z\"\n                    fill=\"black\"\n                  />\n                </svg>\n              </Link>\n            </>\n          ) : (\n            <Widget\n              src=\"buildhub.near/widget/components.buttons.Connect\"\n              props={{\n                joinBtnChildren: (\n                  <>\n                    Join Build DAO{\" \"}\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"17\"\n                      viewBox=\"0 0 16 17\"\n                      fill=\"none\"\n                    >\n                      <path\n                        d=\"M10.7809 7.83327L7.2049 4.25726L8.1477 3.31445L13.3332 8.49993L8.1477 13.6853L7.2049 12.7425L10.7809 9.1666H2.6665V7.83327H10.7809Z\"\n                        fill=\"black\"\n                      />\n                    </svg>\n                  </>\n                ),\n                className: \"custom-button\",\n                showActivity: true,\n              }}\n            />\n          )}{\" \"}\n        </CTASection>\n      </Card>\n    </JoinContainer>\n  );\n};\n\nreturn <CreateSomethingView {...props} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildhub.near/widget/JoinSection", "fact_widget_deployments_id": "cdd143f93eb9344a23c5b429c33f8445", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}