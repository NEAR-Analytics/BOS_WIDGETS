{"tx_hash": "Db5iWyZiXKFFcLVXMUmxqbhcsDwdi4bCyxMNJ49ixvzU", "action_id_social": "5g5ZQccE2scYP1HX4fpHNcfMTFv4edJLEDwygb8TCvd8-0-widget", "block_id": 99637341, "block_timestamp": "2023-08-25T16:20:37.315Z", "signer_id": "paywall.near", "widget_name": "PaywallDapplet-Overlay", "source_code": "/**\n * We use buyerAccountId instead of accountId because it's reserved parameter in embeded pages\n * https://github.com/near/near-discovery/blob/dc58aa1c8ef5d4c0a5e19839230148009834088a/src/pages/embed/%5BaccountId%5D/widget/%5BcomponentName%5D.tsx#L16\n */\nconst { buyerAccountId } = props;\n\nconst Wrapper = styled.div`\n  .main-container {\n    padding: 15px;\n    background: #f5f5f5;\n\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n      Helvetica, Arial, sans-serif;\n\n    height: calc(100vh - 14px);\n    width: 100%;\n    gap: 10px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .top-description {\n    font-size: 14px;\n    font-weight: 400;\n    line-height: 21px;\n    color: #747376;\n  }\n\n  .content-container {\n    display: grid;\n    grid-template-columns: 1fr;\n    padding: 10px;\n    gap: 10px;\n    align-self: stretch;\n    border-radius: 10px;\n    border: 1px solid #e3e3e3;\n  }\n\n  .content-card {\n    background-color: #fff;\n    border-radius: 4px;\n    padding: 10px;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n\n  .content-container-id {\n    color: #919191;\n    font-size: 12px;\n  }\n`;\n\nconst Header = () => (\n  <div className=\"top-description\">\n    The Paywall Dapplet seamlessly integrates with Twitter, utilizing the NEAR\n    Protocol and NEAR BOS to display paid content, a solution developed during\n    the Web3 Hackfest 2023 hackathon.\n  </div>\n);\n\nif (!buyerAccountId) {\n  return (\n    <Wrapper>\n      <div className=\"main-container\">\n        <Header />\n        <div className=\"top-description\">Connect your wallet</div>\n      </div>\n    </Wrapper>\n  );\n}\n\nconst purchases = buyerAccountId\n  ? Near.view(\n      \"app.paywall.near\",\n      \"purchases\",\n      {\n        account_id: buyerAccountId,\n      },\n      \"final\",\n      true\n    )\n  : false;\n\nif (purchases === null) {\n  return (\n    <Wrapper>\n      <div className=\"main-container\">\n        <Header />\n      </div>\n    </Wrapper>\n  );\n}\n\nif (purchases.length === 0) {\n  return (\n    <Wrapper>\n      <div className=\"main-container\">\n        <Header />\n        <div className=\"top-description\">No purchases</div>\n      </div>\n    </Wrapper>\n  );\n}\n\nreturn (\n  <Wrapper>\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"content-container\">\n        {purchases.map((contentId) => (\n          <div className=\"content-card\">\n            <Widget\n              key={contentId}\n              src={`paywall.near/widget/PaywallDapplet-Content`}\n              props={{\n                accountId: buyerAccountId,\n                contentId: contentId,\n                basic: true,\n              }}\n            />\n            <div className=\"content-container-id\">id: {contentId}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/paywall.near/widget/PaywallDapplet-Overlay", "fact_widget_deployments_id": "7819bb95347ac8294cb9d406cc261d43", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}