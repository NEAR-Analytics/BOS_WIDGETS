{"tx_hash": "5grcCLfb4xJpcNKWBTUQJQsBRF2RT2XSj5FS18R8xuH4", "action_id_social": "5P49idHsiQnY5kBCQCSDdjDUFDBtv4xnTUp7DUtVxtta-0-widget", "block_id": 95656093, "block_timestamp": "2023-07-04T03:54:53.949Z", "signer_id": "sking.near", "widget_name": "EasyPoll.CreatePoll.Step2Question", "source_code": "const widgetOwner = \"sking.near\";\nconst id = props.id;\nconst onDelete = props.onDelete;\nconst onMoveUp = props.onMoveUp;\nconst onMoveDown = props.onMoveDown;\nconst onQuestionFieldChange = props.onQuestionFieldChange;\nconst question = props.question;\n\nconst validationConfig = {\n  question: {\n    required: true,\n    minLength: 4,\n    maxLength: 400,\n  },\n};\n\nconst onValidate = (field, value, setError) => {\n  const options = validationConfig[field];\n\n  if (options.required) {\n    if (!value || value === \"\" || value.length < 1) {\n      return setError(\"This field is required\");\n    }\n  }\n\n  if (options.minLength) {\n    if (value.length < options.minLength) {\n      return setError(\n        `Input is too short. Minimum length is ${options.minLength} characters.`\n      );\n    }\n  }\n\n  if (options.maxLength) {\n    if (value.length > options.maxLength) {\n      return setError(\n        `Input is too long. Maximum length is ${options.maxLength} characters.`\n      );\n    }\n  }\n\n  if (options.custom) {\n    const customError = options.custom(value);\n    if (customError) {\n      return setError(customError);\n    }\n  }\n\n  setError(null);\n};\n\nconst Container = styled.div`\n  background: #f4f7f7;\n  padding: 16px;\n  border-radius: 12px;\n  box-shadow: rgba(0, 0, 0, 0.05) 0px 6px 24px 0px,\n    rgba(0, 0, 0, 0.08) 0px 0px 0px 1px;\n`;\n\nconst IconButton = styled.div`\n  font-size: 18px;\n  padding: 5px;\n  transition: all 100ms ease;\n  color: #000;\n\n  &.danger {\n    color: red;\n  }\n\n  &.danger:hover {\n    color: red;\n  }\n\n  &:hover {\n    color: #4f46e5;\n    transform: scale(1.3);\n  }\n`;\n\nreturn (\n  <Container className=\"d-flex gap-3 flex-column\">\n    <div className=\"d-flex gap-3 mb-2\">\n      <h4 className=\"me-auto\">Question {id + 1}</h4>\n      <IconButton role=\"button\" title=\"Move Up\" onClick={onMoveUp}>\n        <i class=\"bi bi-chevron-up\"></i>\n      </IconButton>\n      <IconButton role=\"button\" title=\"Move Down\" onClick={onMoveDown}>\n        <i class=\"bi bi-chevron-down\"></i>\n      </IconButton>\n      <IconButton\n        className=\"danger\"\n        role=\"button\"\n        title=\"Delete Question\"\n        onClick={onDelete}\n      >\n        <i class=\"bi bi-x-lg\"></i>\n      </IconButton>\n    </div>\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.Inputs.Text`}\n      props={{\n        label: \"Title*\",\n        placeholder: \"Enter Your Question (Markdown Supported)\",\n        value: question.question.value,\n        error: question.question.error,\n        onChange: (v) => onQuestionFieldChange(id, \"question\", \"value\", v),\n        validate: () =>\n          onValidate(\"question\", question.question.value, (e) =>\n            onQuestionFieldChange(id, \"question\", \"error\", e)\n          ),\n        inputProps: {\n          minLength: 4,\n          maxLength: 400,\n          required: true,\n        },\n        textarea: true,\n      }}\n    />\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.Inputs.Image`}\n      props={{\n        label: \"Image\",\n        value: question.imageIPFS.value,\n        error: question.imageIPFS.error,\n        onChange: (v) => onQuestionFieldChange(id, \"imageIPFS\", \"value\", v),\n      }}\n    />\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.Inputs.QuestionType`}\n      props={{\n        label: \"Question Type*\",\n        value: question.questionType.value,\n        error: question.questionType.error,\n        onChange: (v) => onQuestionFieldChange(id, \"questionType\", \"value\", v),\n      }}\n    />\n    {(question.questionType.value === \"1\" ||\n      question.questionType.value === \"2\") && (\n      <Widget\n        src={`${widgetOwner}/widget/EasyPoll.Inputs.Options`}\n        props={{\n          label: \"Answer Options*\",\n          value: question.choicesOptions.value,\n          error: question.choicesOptions.error,\n          onChange: (v) => {\n            console.log(v);\n            onQuestionFieldChange(id, \"choicesOptions\", \"value\", v);\n          },\n          placeholder: \"\",\n        }}\n      />\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sking.near/widget/EasyPoll.CreatePoll.Step2Question", "fact_widget_deployments_id": "5b0d87633fde17dd8609b05ed7113779", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}