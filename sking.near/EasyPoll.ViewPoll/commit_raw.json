{"tx_hash": "5grcCLfb4xJpcNKWBTUQJQsBRF2RT2XSj5FS18R8xuH4", "action_id_social": "5P49idHsiQnY5kBCQCSDdjDUFDBtv4xnTUp7DUtVxtta-0-widget", "block_id": 95656093, "block_timestamp": "2023-07-04T03:54:53.949Z", "signer_id": "sking.near", "widget_name": "EasyPoll.ViewPoll", "source_code": "State.init({\n  showQuestionsByThisUser: false,\n  poll: {},\n  polls: [{}],\n  profile: {},\n  pollsByThisCreator: [{}],\n  answers: [{}],\n});\n\nif (!props.blockHeight) {\n  return \"Prop block height wasn't provided\";\n}\n\nconst widgetOwner = \"sking.near\";\nconst indexVersion = props.indexVersion ?? \"3.2.0\";\nconst canOperate = props.canOperate;\nconst whitelist = props.whitelist;\nconst tabs = props.tabs;\n\nlet questionBlockHeight = Number(props.blockHeight);\n\nconst polls =\n  !props.previewInfo &&\n  Social.index(\"poll_question\", `question-v${indexVersion}`);\nif (JSON.stringify(polls) != JSON.stringify(state.polls)) {\n  State.update({ polls: polls });\n}\n\nif (!state.polls) {\n  return \"Loading\";\n} else {\n  const poll =\n    props.previewInfo ??\n    state.polls.find((q) => q.blockHeight == questionBlockHeight);\n\n  if (JSON.stringify(poll) != JSON.stringify(state.poll)) {\n    State.update({ poll: poll });\n  }\n\n  if (!state.poll) {\n    return \"Loading... \";\n  }\n}\n\nlet profile = Social.getr(`${state.poll.accountId}/profile`);\n\nif (JSON.stringify(profile) != JSON.stringify(state.profile)) {\n  State.update({ profile: profile });\n}\n\n// if (!profile) {\n//   return \"Loading\";\n// }\n\nlet pollsByThisCreator = Social.index(\n  \"poll_question\",\n  `question-v${indexVersion}`,\n  {\n    accountId: state.poll.accountId,\n  }\n);\n\nif (\n  JSON.stringify(pollsByThisCreator) != JSON.stringify(state.pollsByThisCreator)\n) {\n  State.update({ pollsByThisCreator: pollsByThisCreator });\n}\n\nif (!state.pollsByThisCreator) {\n  return \"Loading\";\n}\n\nreturn (\n  <>\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.PollDetails`}\n      props={{\n        poll: state.poll,\n        profile,\n        widgetOwner,\n        blockHeight: questionBlockHeight,\n        questionsByCreator,\n        indexVersion,\n        whitelist,\n        href: tabs.VIEW_POLL.href + questionBlockHeight,\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sking.near/widget/EasyPoll.ViewPoll", "fact_widget_deployments_id": "3cd325f44c4cc49085072329321b2dc9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}