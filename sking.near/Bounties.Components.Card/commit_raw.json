{"tx_hash": "3QzpyKNNwNLCytBJb7jnExVCVAxhuWfnbsaetXf7H1kQ", "action_id_social": "4f9JjYAQK93a1Sb9ZfeANXKsMd4LKubmzE2AvMK6abUH-0-widget", "block_id": 91393380, "block_timestamp": "2023-05-08T16:48:20.262Z", "signer_id": "sking.near", "widget_name": "Bounties.Components.Card", "source_code": "// Static\n\nconst widgetAuthor = props.widgetAuthor || \"sking.near\";\nconst UIKingWidgetAuthor = props.UIKingWidgetAuthor || \"sking.near\";\n\nconst createdAt = new Date(props.createdAt).toLocaleDateString(\"en-US\", {\n  month: \"long\",\n  day: \"numeric\",\n  year: \"numeric\",\n});\nconst deadline = new Date(props.deadline).toLocaleDateString(\"en-US\", {\n  month: \"long\",\n  day: \"numeric\",\n  year: \"numeric\",\n});\n\nconst status = props.status;\n\nfunction removeMarkdown(md, maxLength) {\n  const regex =\n    /[_*~#`\\-+\\\\]+|\\[(.*?)\\]\\(.*?\\)|\\!\\[(.*?)\\]\\(.*?\\)|\\n(#+|\\d+\\.|\\*|\\-|\\+)\\s/g;\n  const nmd = md.replace(regex, \"$1$2\");\n  return nmd.slice(0, maxLength);\n}\n\nconst description = props.description ?? \"\";\nconst shortDescription = removeMarkdown(description, 200);\n\n// Styles\nconst GigCard = styled.div`\n  color: #1b1b18;\n  position: relative;\n  background: white;\n  transition: all 0.1s ease-in;\n  width: 100%;\n  border: 1px solid #e6e6e6;\n  border-bottom: none;\n\n  &:last-child {\n    border-bottom: 1px solid #e6e6e6;\n  }\n\n  ${state.is_expanded\n    ? `\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    box-shadow: none;\n    z-index: 100;\n    border-left: none;\n    border-radius: 2rem;\n    margin: auto;\n    margin-bottom: 2rem;\n  `\n    : `    \n    cursor: pointer;\n\n    &:hover {\n      text-decoration: none;\n      color: #1b1b18;\n      background: #f8faff;\n    }\n  `}\n\n  hr {\n    margin: 0;\n    border-color: #a1a9ba;\n  }\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 16px 36px;\n  margin-right: auto;\n  margin-left: auto;\n`;\n\nconst ItemsRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 30px;\n  flex-wrap: wrap;\n`;\n\nconst TagsList = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  margin-bottom: 16px;\n  flex-wrap: wrap;\n`;\n\n// State\n\nState.init({ is_expanded: false });\n\n// functions\n\nconst handleExpandToggle = (is_expanded) => {\n  State.update({ is_expanded: is_expanded });\n  window.scrollTo(0, 0);\n};\n\n// renderer\nconsole.log(props);\nreturn (\n  <GigCard>\n    {state.is_expanded && (\n      <Container>\n        <Widget\n          src={`${widgetAuthor}/widget/Bounties.Components.CardHeader`}\n          props={{\n            widgetAuthor: widgetAuthor,\n            UIKingWidgetAuthor: UIKingWidgetAuthor,\n            onBack: () => handleExpandToggle(false),\n          }}\n        />\n      </Container>\n    )}\n    {state.is_expanded && <hr />}\n    <Container onClick={() => handleExpandToggle(true)}>\n      {props.title && (\n        <Widget\n          src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n          props={{ text: props.title, variant: \"bigHeader\" }}\n        />\n      )}\n      <ItemsRow>\n        <div>\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: \"Created by\",\n              variant: \"tinyHeader\",\n            }}\n          />\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: props.creator,\n              variant: \"label\",\n            }}\n          />\n        </div>\n        <div>\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: \"Created at\",\n              variant: \"tinyHeader\",\n            }}\n          />\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: createdAt,\n              variant: \"label\",\n            }}\n          />\n        </div>\n        <div>\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: \"Status\",\n              variant: \"tinyHeader\",\n            }}\n          />\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: status,\n              variant: \"label\",\n            }}\n          />\n        </div>\n      </ItemsRow>\n      <div>\n        <Widget\n          src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n          props={{\n            text: \"Description\",\n            variant: \"tinyHeader\",\n          }}\n        />\n\n        {!props.description && <p>No description provided</p>}\n        {!state.is_expanded && description !== \"\" && (\n          <p>\n            {shortDescription}\n            <a href=\"#expand\">Read more</a>\n          </p>\n        )}\n        {state.is_expanded && description !== \"\" && (\n          <Markdown text={description} />\n        )}\n      </div>\n      <ItemsRow>\n        {props.skills && (\n          <div>\n            <Widget\n              src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n              props={{\n                text: \"Skills\",\n                variant: \"tinyHeader\",\n              }}\n            />\n            <TagsList>\n              {props.skills.map((skill) => (\n                <Widget\n                  src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n                  props={{\n                    text: skill,\n                    variant: \"label\",\n                  }}\n                />\n              ))}\n            </TagsList>\n          </div>\n        )}\n        {props.experienceLevel && (\n          <div>\n            <Widget\n              src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n              props={{\n                text: \"Experience Level\",\n                variant: \"tinyHeader\",\n              }}\n            />\n            <Widget\n              src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n              props={{\n                text: props.experienceLevel,\n                variant: \"label\",\n              }}\n            />\n          </div>\n        )}\n      </ItemsRow>\n      <ItemsRow>\n        <div>\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: \"Deadline\",\n              variant: \"tinyHeader\",\n            }}\n          />\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: deadline,\n              variant: \"importantText\",\n            }}\n          />\n        </div>\n        <div>\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Text`}\n            props={{\n              text: \"Bounty\",\n              variant: \"tinyHeader\",\n            }}\n          />\n          <Widget\n            src={`${UIKingWidgetAuthor}/widget/KingUI.Price`}\n            props={{\n              amount: props.bounty,\n              size: \"medium\",\n            }}\n          />\n        </div>\n      </ItemsRow>\n    </Container>\n    {state.is_expanded && <hr />}\n    {state.is_expanded && (\n      <Container>\n        <Widget\n          src={`${widgetAuthor}/widget/Bounties.Components.CardProposals`}\n          props={{\n            widgetAuthor: widgetAuthor,\n            UIKingWidgetAuthor: UIKingWidgetAuthor,\n            proposals: props.proposals,\n          }}\n        />\n      </Container>\n    )}\n  </GigCard>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sking.near/widget/Bounties.Components.Card", "fact_widget_deployments_id": "be9ebdc6f0ee6354e977024da5d12f28", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}