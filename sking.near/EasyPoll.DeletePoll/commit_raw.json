{"tx_hash": "8cDanA9UEirvS3BB8xStHTrb4fKf7N138uHFdjNNDp6q", "action_id_social": "4nLb4B7ExgKXF2uqwRxY9SJrUGQV4gumZi7nVsgjW2Fg-0-widget", "block_id": 96050452, "block_timestamp": "2023-07-09T06:52:22.411Z", "signer_id": "sking.near", "widget_name": "EasyPoll.DeletePoll", "source_code": "const widgetOwner = widgetOwner ?? \"sking.near\";\nconst blockHeight = props.blockHeight ?? \"final\";\nconst tabs = props.tabs;\nconst src = props.src;\n\nState.init({});\n\nconsole.log(\"aa\", src.split(\"/\"));\nconst onDelete = () => {\n  const [accountId, key, type, uid] = src.split(\"/\");\n\n  const commit = {\n    [key]: {\n      [type]: { [uid]: null },\n    },\n  };\n\n  State.update({ commitLoading: true });\n  Social.set(commit, {\n    force: true,\n    onCommit: () => {\n      State.update({ commitLoading: false, committed: true });\n    },\n    onCancel: () => {\n      State.update({ commitLoading: false });\n    },\n  });\n};\n\nconst Container = styled.div`\n  border-radius: 21px;\n  padding: 24px;\n  box-shadow: rgba(0, 0, 0, 0.1) -4px 9px 25px -6px;\n  max-width: 860px;\n  margin: auto;\n  width: 100%;\n  background: #fafbfb;\n`;\n\nif (state.committed) {\n  return (\n    <Container\n      className=\"text-center d-flex flex-column align-items-center\"\n      style={{\n        padding: \"60px 12px\",\n        color: \"#dc3545\",\n      }}\n    >\n      <i\n        className=\"bi bi-trash\"\n        style={{\n          fontSize: 60,\n        }}\n      />\n      <span\n        style={{\n          fontWeight: \"bold\",\n          fontsize: 15,\n          color: \"#dc3545\",\n        }}\n      >\n        Deleted Successfully!\n      </span>\n      <a\n        href={`#/${widgetOwner}/widget/EasyPoll`}\n        className=\"text-decoration-none\"\n      >\n        <Widget\n          src=\"rubycop.near/widget/NDC.StyledComponents\"\n          props={{\n            Button: {\n              text: \"Take Me Home\",\n              icon: <i className=\"bi bi-house\" />,\n              className:\n                \"d-flex primary flex-row-reverse  mt-4 gap-2 align-items-center\",\n              onClick: onSubmit,\n            },\n          }}\n        />\n      </a>\n    </Container>\n  );\n}\n\nif (state.commitLoading) {\n  return (\n    <Container\n      className=\"text-center\"\n      style={{\n        padding: \"60px 12px\",\n      }}\n    >\n      <Widget\n        src={`sking.near/widget/Common.Spinner`}\n        props={{\n          color1: \"#ffd50d\",\n          color2: \"#4f46e5\",\n        }}\n      />\n      <span\n        style={{\n          fontWeight: \"bold\",\n          fontsize: 15,\n          color: \"#4f46e5\",\n          textAlign: \"center\",\n        }}\n      >\n        Deleting...\n      </span>\n    </Container>\n  );\n}\n\nreturn (\n  <div className=\"d-flex p-2 gap-3 flex-column\">\n    <h3>Are you sure you wanna delete this poll?</h3>\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.PollCard`}\n      props={{\n        src: src,\n        blockHeight: blockHeight,\n        href: tabs.VIEW_POLL.href(src, p.blockHeight),\n        editHref: tabs.EDIT_POLL.href(src, p.blockHeight),\n        deleteHref: tabs.DELETE_POLL.href(src, p.blockHeight),\n      }}\n    />\n    <div className=\"d-flex gap-4 justify-content-end\">\n      <a\n        href={`#/${widgetOwner}/widget/EasyPoll`}\n        className=\"text-decoration-none\"\n      >\n        <Widget\n          src=\"rubycop.near/widget/NDC.StyledComponents\"\n          props={{\n            Button: {\n              text: \"No, Take Me Home\",\n              icon: <i className=\"bi bi-house\" />,\n              className:\n                \"d-flex primary flex-row-reverse  mt-3 gap-2 align-items-center\",\n              onClick: () => {},\n            },\n          }}\n        />\n      </a>\n      <Widget\n        src=\"rubycop.near/widget/NDC.StyledComponents\"\n        props={{\n          Button: {\n            text: \"Yes, Delete It\",\n            icon: <i className=\"bi bi-trash\" />,\n            className:\n              \"d-flex mt-3 gap-2  flex-row-reverse align-items-center bg-danger text-white\",\n            onClick: onDelete,\n          },\n        }}\n      />\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sking.near/widget/EasyPoll.DeletePoll", "fact_widget_deployments_id": "2756f63b4d0fcd61ebb3b86a1b97c806", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}