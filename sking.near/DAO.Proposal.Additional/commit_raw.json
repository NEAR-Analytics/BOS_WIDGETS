{"tx_hash": "73PgoVcmiKgCHh16pi4coFiTapVGDUo1bhrvQR4xnEDw", "action_id_social": "2oc61Gxt8rcZ7W9qbm47faaSQyCphpxY3CVqj2dWEeX9-0-widget", "block_id": 93133933, "block_timestamp": "2023-05-31T12:46:28.626Z", "signer_id": "sking.near", "widget_name": "DAO.Proposal.Additional", "source_code": "const daoId = props.daoId ?? \"multi.sputnik-dao.near\";\nconst proposal = props.proposal && JSON.parse(JSON.stringify(props.proposal));\nconst accountId = context.accountId;\n\nconst totalVoters = Object.keys(proposal?.votes || {}).length || 0;\n\nconst item = {\n  type: \"dao_proposal_comment\",\n  path: `${daoId}/proposal/main`,\n  proposal_id: proposal.id + \"-beta\",\n};\nconst comments = Social.index(\"comment\", item);\nconst totalComments = comments?.length || 0;\n\nState.init({\n  activeTab: state.activeTab ?? undefined,\n});\n\nconst TabsStyled = styled.div`\n  ul {\n    list-style: none;\n    padding: 0;\n    display: flex;\n    flex-direction: row;\n    gap: 1em;\n    margin: 0;\n  }\n  button {\n    background: #f1f1f1;\n    padding: 0.5em 1em;\n    font-size: 0.9rem;\n    font-weight: 600;\n    border-radius: 25px;\n    color: #687076;\n    transition: 200ms ease-out;\n    border: none;\n    display: flex;\n    align-items: center;\n\n    &:hover {\n      color: #11181c;\n      background: #e1e1e1;\n    }\n\n    &.active {\n      background: #11181c;\n      color: #e1e1e1;\n    }\n\n    label {\n      background: #e1e1e1;\n      color: #11181c;\n      border-radius: 50%;\n      padding: 0.25em 0.5em;\n      margin-left: 0.5em;\n      font-size: 0.75rem;\n      font-weight: 600;\n      cursor: inherit;\n      min-width: 24px;\n      height: 24px;\n    }\n\n    i {\n      color: inherit;\n      margin-right: 0.5em;\n    }\n  }\n`;\n\nconst onTabChange = (tab) => {\n  if (state.activeTab === tab) return State.update({ activeTab: undefined });\n  State.update({ activeTab: tab });\n};\n\nconst Tabs = () => {\n  return (\n    <TabsStyled>\n      <ul>\n        <li>\n          <button\n            className={\"Comments\" === state.activeTab ? \"active\" : \"\"}\n            onClick={() => onTabChange(\"Comments\")}\n          >\n            <i className=\"bi bi-chat-left-text\"></i>\n            Comments\n            <label>{totalComments}</label>\n          </button>\n        </li>\n        <li>\n          <button\n            className={\"Voters\" === state.activeTab ? \"active\" : \"\"}\n            onClick={() => onTabChange(\"Voters\")}\n          >\n            <i className=\"bi bi-people\"></i>\n            Voters\n            <label>{totalVoters}</label>\n          </button>\n        </li>\n      </ul>\n    </TabsStyled>\n  );\n};\n\nconst Wrapper = styled.div`\n  width: 100%;\n`;\n\nreturn (\n  <>\n    <Tabs />\n    <Wrapper>\n      {state.activeTab === \"Comments\" && (\n        <Widget\n          src=\"sking.near/widget/DAO.Proposal.Comments\"\n          props={{\n            daoId: daoId,\n            proposalId: proposal.id,\n            commentsCount: totalComments,\n          }}\n        />\n      )}\n      {state.activeTab === \"Voters\" && (\n        <Widget\n          src=\"sking.near/widget/DAO.Proposal.Voters\"\n          props={{\n            votes: proposal.votes,\n          }}\n        />\n      )}\n    </Wrapper>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sking.near/widget/DAO.Proposal.Additional", "fact_widget_deployments_id": "4ee5ed7f8aadf59be504b8c31f4e0a93", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}