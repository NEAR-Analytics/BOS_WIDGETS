{"tx_hash": "355Wc9fzdNyXZreLKqsAT241uQpcNWbuLi8iUdmTQCF6", "action_id_social": "9AEkxURp3QnZLCk7mFpCpDTATHW1SwALjDrT8cUr5a1a-0-widget", "block_id": 111039934, "block_timestamp": "2024-01-22T13:49:43.447Z", "signer_id": "root.near", "widget_name": "Multisig.RequestItem", "source_code": "const contract_id = props.contract_id;\nconst request_id = props.request_id;\n\nconst request = Near.view(contract_id, \"get_request\", { request_id });\nconst confirmations = Near.view(contract_id, \"get_confirmations\", {\n  request_id,\n});\n\nconsole.log(request, confirmations);\n\nlet repr = [];\nfor (let i = 0; i < request.actions.length; ++i) {\n  const action = request.actions[i];\n  switch (action.type) {\n    case \"Transfer\":\n      {\n        let deposit = new Big(action.deposit).div(new Big(10).pow(24));\n        repr.push(`Transfer ${deposit} N`);\n      }\n      break;\n    case \"FunctionCall\":\n      {\n        let args = JSON.parse(atob(action.args));\n        let gas = new Big(action.gas).div(new Big(10).pow(12));\n        let deposit = new Big(action.deposit).div(new Big(10).pow(24));\n        const metadata = Near.view(request.receiver_id, \"ft_metadata\", {});\n        console.log(args);\n        if (action.method_name === \"ft_transfer\") {\n          repr.push(\n            `Transfer ${new Big(args.amount).div(\n              new Big(10).pow(metadata.decimals)\n            )} of ${request.receiver_id} token to ${args.receiver_id}`\n          );\n        } else {\n          repr.push(\n            `Call ${request.receiver_id}'s method ${action.method_name}(${args}) with ${deposit} N deposit and ${gas} Tgas`\n          );\n        }\n      }\n      break;\n    default:\n      repr.push(JSON.stringify(action));\n      break;\n  }\n}\n\nconsole.log(JSON.stringify(repr));\n\nfunction onConfirm() {\n  Near.call(contract_id, \"confirm\", { request_id: request_id });\n}\n\nfunction onDelete() {\n  Near.call(contract_id, \"delete_request\", { request_id: request_id });\n}\n\nreturn (\n  <div>\n    <p>{repr}</p>\n    <p>Confirmed by: {confirmations}</p>\n    <p>\n      <button onClick={onConfirm}>Confirm</button>\n      <button onClick={onDelete}>Delete</button>\n    </p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/root.near/widget/Multisig.RequestItem", "fact_widget_deployments_id": "847db57e0b0e2c16960f759362357dbc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}