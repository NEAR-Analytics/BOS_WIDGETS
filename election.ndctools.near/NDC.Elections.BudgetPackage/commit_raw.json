{"tx_hash": "8TANvruRRM774eQmWWy4uPBfY49Mf6ScnvspGpaWQ8th", "action_id_social": "4y8werTavmxBhYc4WtPiv28tTTvL6qPviAt1UycNqFvS-0-widget", "block_id": 99812680, "block_timestamp": "2023-08-27T23:59:37.000Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.BudgetPackage", "source_code": "const {\n  id,\n  typ,\n  seats,\n  electionContract,\n  registryContract,\n  isIAmHuman,\n  myVotes,\n} = props;\n\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n  verifyHuman: \"nomination.ndctools.near/widget/NDC.VerifyHuman\",\n};\n\nconst H4 = styled.h4`\n  margin-bottom: 0;\n`;\n\nconst H3 = styled.h3`\n  margin-bottom: 0;\n`;\n\nconst Container = styled.div`\n  position: relative:\n  font-family: Avenir;\n  font-size: 16px;\n`;\n\nconst Info = styled.i`\n  font-size: 12px;\n  margin: 0 !important;\n`;\n\nconst CandidatesContainer = styled.div`\n  overflow-y: scroll;\n  max-height: 490px;\n  width: 100%;\n`;\n\nconst StickyContainer = styled.div`\n  position: \"fixed\",\n  left: 0;\n  bottom: 0;\n  height: 60px;\n  width: 100%;\n`;\n\nconst Icon = styled.i`\n  font-size: 14px;\n`;\n\nconst CastVotesSection = styled.div`\n  background: #fdfeff;\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  padding: 16px;\n\n  @media (max-width: 400px) {\n    flex-direction: column;\n  }\n\n  .wrapper {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  button {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  h3,\n  h4 {\n    margin: 0 3px;\n  }\n\n  h3 {\n    font-weight: 900;\n  }\n\n  .text-secondary {\n    margin: 0 10px;\n  }\n\n  &.not-verified {\n    h4 {\n      font-size: 16px;\n      margin: 0 0 5px 0;\n      font-weight: 600;\n    }\n\n    h5 {\n      margin: 0;\n      font-size: 12px;\n    }\n  }\n`;\n\nconst Section = styled.div`\n  gap: 8px;\n  margin-bottom: 10px;\n`;\n\nconst ActionSection = styled.div`\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n`;\n\nconst currentUser = context.accountId;\nconst alreadyVotedForHouse = () => myVotes.some((voter) => voter.house === typ);\nconst myVotesForHouse = () => myVotes.filter((vote) => vote.house === typ);\n\nconst handleVote = (value) =>\n  Near.call(\n    electionContract,\n    \"vote\",\n    { prop_id: id, vote: [] },\n    \"70000000000000\",\n    150000000\n  );\n\nState.init({\n  availableVotes: seats - myVotesForHouse().length,\n});\n\nconst CastVotes = () => (\n  <CastVotesSection className=\"d-flex align-items-center justify-content-between gap-3\">\n    <div className=\"wrapper\">\n      <div className=\"d-flex align-items-end\">\n        <H3>{alreadyVotedForHouse() ? 0 : state.availableVotes}</H3>\n        <span>/</span>\n        <H4>{seats}</H4>\n        <span className=\"text-secondary\">votes left</span>\n      </div>\n      <Info className=\"text-secondary\">\n        <i class=\"bi bi-info-circle\"></i>\n        {alreadyVotedForHouse() && (\n          <span>You're already accepted budget package</span>\n        )}\n      </Info>\n    </div>\n    <ActionSection className=\"d-flex gap-2\">\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Yes\",\n            className: \"primary success justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-up\" />,\n            onClick: () => handleVote(\"yes\"),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"No\",\n            className: \"primary danger justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-down\" />,\n            onClick: () => handleVote(\"no\"),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Abstain\",\n            className: \"justify-content-center\",\n            icon: <i className=\"bi bi-x-lg\" />,\n            onClick: () => handleVote(\"abstain\"),\n          },\n        }}\n      />\n    </ActionSection>\n  </CastVotesSection>\n);\n\nconst Content = () => (\n  <small>\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n    tempor incididunt ut labore et dolore magna aliqua. Sed viverra ipsum nunc\n    aliquet bibendum enim. Congue mauris rhoncus aenean vel elit scelerisque\n    mauris pellentesque pulvinar. Venenatis a condimentum vitae sapien. Pretium\n    vulputate sapien nec sagittis. In eu mi bibendum neque egestas congue. Quis\n    ipsum suspendisse ultrices gravida dictum fusce ut. Eu sem integer vitae\n    justo. Arcu risus quis varius quam quisque id diam. Cursus in hac habitasse\n    platea dictumst. Ullamcorper eget nulla facilisi etiam dignissim. Blandit\n    cursus risus at ultrices mi tempus imperdiet nulla. Posuere ac ut consequat\n    semper viverra nam libero justo laoreet. Nulla at volutpat diam ut\n    venenatis. Mauris pharetra et ultrices neque ornare aenean. Augue ut lectus\n    arcu bibendum at varius vel. Ultrices vitae auctor eu augue ut lectus arcu.\n    Nascetur ridiculus mus mauris vitae. Nunc faucibus a pellentesque sit amet\n    porttitor eget dolor morbi. Laoreet non curabitur gravida arcu ac tortor\n    dignissim convallis aenean. Tincidunt id aliquet risus feugiat in ante metus\n    dictum. A cras semper auctor neque vitae tempus quam pellentesque nec. Proin\n    libero nunc consequat interdum varius sit amet. Netus et malesuada fames ac\n    turpis egestas. Quis ipsum suspendisse ultrices gravida dictum fusce. Dictum\n    sit amet justo donec enim diam vulputate. Morbi tristique senectus et netus.\n    Elementum integer enim neque volutpat ac tincidunt. Dictumst quisque\n    sagittis purus sit amet volutpat. Eros donec ac odio tempor orci dapibus\n    ultrices in. Viverra accumsan in nisl nisi scelerisque. Pellentesque\n    habitant morbi tristique senectus et netus et. Vitae elementum curabitur\n    vitae nunc sed velit. Ut placerat orci nulla pellentesque dignissim enim\n    sit. Nulla aliquet porttitor lacus luctus accumsan tortor. Elit ullamcorper\n    dignissim cras tincidunt lobortis feugiat vivamus at augue. Neque convallis\n    a cras semper auctor. Non odio euismod lacinia at quis risus. Maecenas\n    pharetra convallis posuere morbi. Ipsum dolor sit amet consectetur\n    adipiscing elit pellentesque habitant. Facilisi morbi tempus iaculis urna id\n    volutpat lacus laoreet. Feugiat pretium nibh ipsum consequat nisl vel\n    pretium. Pretium fusce id velit ut tortor pretium viverra. Ultrices dui\n    sapien eget mi proin sed libero enim. Diam quis enim lobortis scelerisque\n    fermentum. Magna ac placerat vestibulum lectus mauris ultrices eros. Sed\n    tempus urna et pharetra pharetra massa massa ultricies. Consectetur a erat\n    nam at lectus urna duis convallis convallis. Iaculis nunc sed augue lacus\n    viverra vitae congue eu consequat. Mauris pharetra et ultrices neque ornare.\n    Tincidunt tortor aliquam nulla facilisi cras fermentum odio. Augue ut lectus\n    arcu bibendum at varius vel pharetra vel. Nunc sed augue lacus viverra vitae\n    congue eu consequat. Pulvinar sapien et ligula ullamcorper malesuada proin\n    libero nunc. Sit amet consectetur adipiscing elit pellentesque habitant\n    morbi tristique senectus. Etiam dignissim diam quis enim lobortis\n    scelerisque. Sed elementum tempus egestas sed sed risus pretium. Sit amet\n    massa vitae tortor condimentum lacinia quis. At risus viverra adipiscing at\n    in tellus. Iaculis eu non diam phasellus vestibulum lorem. Facilisis gravida\n    neque convallis a cras. Porta lorem mollis aliquam ut porttitor leo. Quisque\n    sagittis purus sit amet volutpat consequat mauris nunc. Et odio pellentesque\n    diam volutpat commodo sed egestas. Aliquet eget sit amet tellus cras\n    adipiscing. Vitae semper quis lectus nulla at volutpat diam ut. Pharetra\n    magna ac placerat vestibulum lectus. Mi in nulla posuere sollicitudin. Lorem\n    dolor sed viverra ipsum. Faucibus turpis in eu mi. Pulvinar mattis nunc sed\n    blandit libero. Id leo in vitae turpis massa. Elit pellentesque habitant\n    morbi tristique senectus et netus et malesuada. Vestibulum lectus mauris\n    ultrices eros in cursus turpis massa tincidunt. Dolor sit amet consectetur\n    adipiscing elit. Platea dictumst quisque sagittis purus sit amet volutpat\n    consequat mauris. Ultricies mi quis hendrerit dolor magna. Diam sit amet\n    nisl suscipit adipiscing bibendum est ultricies. Nunc vel risus commodo\n    viverra maecenas accumsan. Pretium vulputate sapien nec sagittis aliquam.\n    Pharetra diam sit amet nisl suscipit adipiscing bibendum est. Scelerisque\n    eleifend donec pretium vulputate. Elementum integer enim neque volutpat ac\n    tincidunt vitae. Felis donec et odio pellentesque diam. Facilisi cras\n    fermentum odio eu feugiat pretium nibh. Maecenas ultricies mi eget mauris\n    pharetra et. Leo duis ut diam quam nulla porttitor massa id neque. Pretium\n    fusce id velit ut tortor pretium viverra suspendisse potenti. Massa enim nec\n    dui nunc mattis enim. Mauris pharetra et ultrices neque ornare aenean\n    euismod. Lorem ipsum dolor sit amet consectetur. Sit amet venenatis urna\n    cursus eget. Porttitor eget dolor morbi non arcu risus quis varius. Nulla\n    pharetra diam sit amet. Placerat in egestas erat imperdiet sed euismod.\n    Morbi tristique senectus et netus et. Morbi quis commodo odio aenean sed.\n    Fringilla urna porttitor rhoncus dolor purus non enim. Enim tortor at auctor\n    urna nunc id cursus metus aliquam. Donec massa sapien faucibus et molestie\n    ac. Vestibulum lectus mauris ultrices eros in cursus turpis massa tincidunt.\n    Et malesuada fames ac turpis egestas integer eget aliquet nibh. Urna\n    molestie at elementum eu facilisis. Elit sed vulputate mi sit amet mauris\n    commodo quis imperdiet. Pellentesque diam volutpat commodo sed egestas\n    egestas fringilla phasellus faucibus. Leo urna molestie at elementum eu\n    facilisis sed odio. Tortor dignissim convallis aenean et tortor. Tellus in\n    hac habitasse platea dictumst vestibulum rhoncus est. Etiam dignissim diam\n    quis enim lobortis scelerisque fermentum. Eget velit aliquet sagittis id\n    consectetur purus. Sit amet purus gravida quis blandit turpis cursus. Duis\n    tristique sollicitudin nibh sit amet commodo nulla facilisi nullam. Arcu\n    vitae elementum curabitur vitae nunc sed velit dignissim. Lorem ipsum dolor\n    sit amet consectetur adipiscing elit duis tristique. Auctor eu augue ut\n    lectus arcu. Sem et tortor consequat id. Eget est lorem ipsum dolor. A\n    pellentesque sit amet porttitor eget dolor morbi non. Egestas sed sed risus\n    pretium quam vulputate dignissim suspendisse in. Ac feugiat sed lectus\n    vestibulum mattis ullamcorper velit sed ullamcorper. Erat velit scelerisque\n    in dictum non consectetur a. At augue eget arcu dictum. Malesuada fames ac\n    turpis egestas maecenas pharetra convallis. Scelerisque in dictum non\n    consectetur a erat. Aliquam purus sit amet luctus venenatis lectus magna.\n    Nisi scelerisque eu ultrices vitae auctor. Ut venenatis tellus in metus\n    vulputate eu scelerisque felis imperdiet. Quam nulla porttitor massa id\n    neque aliquam vestibulum. Dictum sit amet justo donec enim diam. Nulla\n    pharetra diam sit amet nisl suscipit adipiscing bibendum. Ornare massa eget\n    egestas purus viverra. At erat pellentesque adipiscing commodo elit at\n    imperdiet dui accumsan. Est pellentesque elit ullamcorper dignissim cras\n    tincidunt lobortis feugiat vivamus. Adipiscing elit pellentesque habitant\n    morbi tristique senectus et netus. Porta lorem mollis aliquam ut porttitor\n    leo. Id leo in vitae turpis massa sed elementum tempus. Tincidunt nunc\n    pulvinar sapien et ligula ullamcorper. Tellus mauris a diam maecenas sed\n    enim ut sem. Elit eget gravida cum sociis. Ullamcorper velit sed ullamcorper\n    morbi tincidunt. Et netus et malesuada fames ac turpis egestas integer.\n    Mauris pharetra et ultrices neque ornare. Scelerisque varius morbi enim\n    nunc. Ante metus dictum at tempor. Varius quam quisque id diam vel quam\n    elementum pulvinar. Sed tempus urna et pharetra pharetra massa massa\n    ultricies. Interdum velit euismod in pellentesque massa placerat duis\n    ultricies. Morbi tincidunt augue interdum velit. Eget gravida cum sociis\n    natoque penatibus. Eu turpis egestas pretium aenean pharetra. Nibh mauris\n    cursus mattis molestie a iaculis at. Eget velit aliquet sagittis id\n    consectetur purus ut faucibus. Etiam sit amet nisl purus in mollis nunc sed\n    id. At risus viverra adipiscing at in. Risus feugiat in ante metus.\n  </small>\n);\n\nreturn (\n  <Container>\n    <h1>Budget Package</h1>\n    <CandidatesContainer>\n      <Content />\n      <a href=\"https://bafkreidwdxocdkfsv6srynw7ipnogfuw76fzncmxd5jv7furbsn5cp4bz4.ipfs.nftstorage.link/\">\n        View Budget Package\n        <i className=\"ml-2 bi bi-box-arrow-up-right\" />\n      </a>\n    </CandidatesContainer>\n\n    <div>\n      {isIAmHuman ? (\n        <CastVotes />\n      ) : (\n        <Widget\n          src={widgets.verifyHuman}\n          props={{\n            title: \"Want to vote?\",\n            description: \"Click on Verify as a Human to proceed.\",\n          }}\n        />\n      )}\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.BudgetPackage", "fact_widget_deployments_id": "99d8ce07ef1cbda4050ad5a972499af2", "inserted_timestamp": "2023-08-28T01:52:49.355Z", "modified_timestamp": "2023-08-28T01:52:49.355Z", "__row_index": 26}