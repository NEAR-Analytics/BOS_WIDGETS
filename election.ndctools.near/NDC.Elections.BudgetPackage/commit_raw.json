{"tx_hash": "9wSrChhJKu6cH4gD35tsvUjbVSJawhrFy1mo62J9V8xs", "action_id_social": "J5ftnSaAaHy5Kk3s2FFX5YJegk6ZTWG8B62GBJFVyh7q-0-widget", "block_id": 99651509, "block_timestamp": "2023-08-25T20:49:15.741Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.BudgetPackage", "source_code": "const {\n  id,\n  typ,\n  seats,\n  electionContract,\n  registryContract,\n  isIAmHuman,\n  myVotes,\n} = props;\n\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n  verifyHuman: \"nomination.ndctools.near/widget/NDC.VerifyHuman\",\n};\n\nconst H4 = styled.h4`\n  margin-bottom: 0;\n`;\n\nconst H3 = styled.h3`\n  margin-bottom: 0;\n`;\n\nconst Container = styled.div`\n  position: relative:\n  font-family: Avenir;\n  font-size: 16px;\n`;\n\nconst Info = styled.i`\n  font-size: 12px;\n  margin: 0 !important;\n`;\n\nconst CandidatesContainer = styled.div`\n  overflow-y: scroll;\n  max-height: 490px;\n  width: 100%;\n`;\n\nconst StickyContainer = styled.div`\n  position: \"fixed\",\n  left: 0;\n  bottom: 0;\n  height: 60px;\n  width: 100%;\n`;\n\nconst Icon = styled.i`\n  font-size: 14px;\n`;\n\nconst CastVotesSection = styled.div`\n  background: #fdfeff;\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  padding: 16px;\n\n  @media (max-width: 400px) {\n    flex-direction: column;\n  }\n\n  .wrapper {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  button {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  h3,\n  h4 {\n    margin: 0 3px;\n  }\n\n  h3 {\n    font-weight: 900;\n  }\n\n  .text-secondary {\n    margin: 0 10px;\n  }\n\n  &.not-verified {\n    h4 {\n      font-size: 16px;\n      margin: 0 0 5px 0;\n      font-weight: 600;\n    }\n\n    h5 {\n      margin: 0;\n      font-size: 12px;\n    }\n  }\n`;\n\nconst Section = styled.div`\n  gap: 8px;\n  margin-bottom: 10px;\n`;\n\nconst ActionSection = styled.div`\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n`;\n\nconst currentUser = context.accountId;\nconst alreadyVotedForHouse = () => myVotes.some((voter) => voter.house === typ);\nconst myVotesForHouse = () => myVotes.filter((vote) => vote.house === typ);\n\nconst handleVote = (value) =>\n  Near.call(\n    electionContract,\n    \"vote\",\n    { prop_id: id },\n    \"70000000000000\",\n    2000000000000000000000\n  );\n\nState.init({\n  availableVotes: seats - myVotesForHouse().length,\n});\n\nconst CastVotes = () => (\n  <CastVotesSection className=\"d-flex align-items-center justify-content-between gap-3\">\n    <div className=\"wrapper\">\n      <div className=\"d-flex align-items-end\">\n        <H3>{alreadyVotedForHouse() ? 0 : state.availableVotes}</H3>\n        <span>/</span>\n        <H4>{seats}</H4>\n        <span className=\"text-secondary\">votes left</span>\n      </div>\n      <Info className=\"text-secondary\">\n        <i class=\"bi bi-info-circle\"></i>\n        {alreadyVotedForHouse() && (\n          <span>You're already accepted budget package</span>\n        )}\n      </Info>\n    </div>\n    <ActionSection className=\"d-flex gap-2\">\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Yes\",\n            className: \"primary success justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-up\" />,\n            onClick: () => handleVote(0),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Abstain\",\n            className: \"secondary dark justify-content-center\",\n            onClick: () => handleVote(2),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"No\",\n            className: \"primary danger justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-down\" />,\n            onClick: () => handleVote(1),\n          },\n        }}\n      />\n    </ActionSection>\n  </CastVotesSection>\n);\n\nconst Content = () => (\n  <>\n    <h5>NEAR Digital Collective Fair Voting Policy</h5>\n    <p>\n      <b>I. Preamble The NEAR Digital</b>\n    </p>\n    <p>\n      Collective (\u201cNDC\u201d) is dedicated to creating a fair, transparent, and\n      decentralized voting mechanism for its community. We believe in the power\n      of our community, and we aim to transition governance in a way that values\n      every voice and contribution. As part of our commitment, we have created\n      this Fair Voting Policy (\u201cPolicy\u201d), which outlines our principles and\n      procedures. By casting your vote, you agree to adhere to and respect the\n      terms and policies outlined in this document.{\" \"}\n    </p>\n    <p>\n      The purpose of this Policy is to ensure that all voting processes within\n      the NDC are carried out in a manner that respects democratic principles,\n      promotes equal participation, and maintains transparency and\n      accountability, in alignment with our goal to transition towards\n      decentralized, community-driven governance.{\" \"}\n    </p>\n    <p>\n      This Policy applies to all eligible voters in the NDC and encompasses all\n      voting processes, including but not limited to elections, nominations,\n      general votes, veto votes and motions\n    </p>\n    <p>\n      <b>II. The Election Integrity Council</b>\n    </p>\n    <p>\n      The Election Integrity Council is an independent body of individuals with\n      a clear mandate to oversee the first ever NDC election. It is composed of\n      sharp minded individuals who do not run for a position in the election and\n      have shown great value to NEAR and its Ecosystem. Members will be\n      appointed through both the OG SBT holder group and the NDC Legal Working\n      Group. The Election Integrity Council will be responsible for the\n      enforcement of this Policy, prevent and investigate electoral fraud and\n      take action when breaches of this Policy have been detected.\n    </p>\n  </>\n);\n\nreturn (\n  <Container>\n    <h1>Budget Package</h1>\n    <CandidatesContainer>\n      <Content />\n      <a href=\"https://bafkreidwdxocdkfsv6srynw7ipnogfuw76fzncmxd5jv7furbsn5cp4bz4.ipfs.nftstorage.link/\">\n        View Budget Package profileData\n        <i className=\"ml-2 bi bi-box-arrow-up-right\" />\n      </a>\n    </CandidatesContainer>\n\n    <div>\n      {isIAmHuman ? (\n        <CastVotes />\n      ) : (\n        <Widget\n          src={widgets.verifyHuman}\n          props={{\n            title: \"Want to vote?\",\n            description: \"Click on Verify as a Human to proceed.\",\n          }}\n        />\n      )}\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.BudgetPackage", "fact_widget_deployments_id": "b349120a85afcce3f47ee457213ddeda", "inserted_timestamp": "2023-08-25T22:41:39.647Z", "modified_timestamp": "2023-08-25T22:41:39.647Z", "__row_index": 52}