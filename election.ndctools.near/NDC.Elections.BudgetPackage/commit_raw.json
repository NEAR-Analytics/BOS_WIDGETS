{"tx_hash": "EB2y4uTXgf4QaWd5wWJz3eS9ZgidRkRj2mwhFz9zmcdZ", "action_id_social": "Hdk56MwgGgZV3KE9L55dzpzqLEF7hMoqYjgSheaaMdwK-0-widget", "block_id": 99988172, "block_timestamp": "2023-08-30T07:43:47.931Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.BudgetPackage", "source_code": "const {\n  id,\n  typ,\n  seats,\n  electionContract,\n  registryContract,\n  isIAmHuman,\n  myVotes,\n} = props;\n\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n  verifyHuman: \"nomination.ndctools.near/widget/NDC.VerifyHuman\",\n};\n\nconst H4 = styled.h4`\n  margin-bottom: 0;\n`;\n\nconst H3 = styled.h3`\n  margin-bottom: 0;\n`;\n\nconst Container = styled.div`\n  position: relative:\n  font-family: Avenir;\n  font-size: 16px;\n`;\n\nconst Info = styled.i`\n  font-size: 12px;\n  margin: 0 !important;\n`;\n\nconst CandidatesContainer = styled.div`\n  overflow-y: scroll;\n  max-height: 490px;\n  width: 100%;\n`;\n\nconst StickyContainer = styled.div`\n  position: \"fixed\",\n  left: 0;\n  bottom: 0;\n  height: 60px;\n  width: 100%;\n`;\n\nconst Icon = styled.i`\n  font-size: 14px;\n`;\n\nconst CastVotesSection = styled.div`\n  background: #fdfeff;\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  padding: 16px;\n\n  @media (max-width: 400px) {\n    flex-direction: column;\n  }\n\n  .wrapper {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  button {\n    @media (max-width: 400px) {\n      width: 100%;\n    }\n  }\n\n  h3,\n  h4 {\n    margin: 0 3px;\n  }\n\n  h3 {\n    font-weight: 900;\n  }\n\n  .text-secondary {\n    margin: 0 10px;\n  }\n\n  &.not-verified {\n    h4 {\n      font-size: 16px;\n      margin: 0 0 5px 0;\n      font-weight: 600;\n    }\n\n    h5 {\n      margin: 0;\n      font-size: 12px;\n    }\n  }\n`;\n\nconst Section = styled.div`\n  gap: 8px;\n  margin-bottom: 10px;\n`;\n\nconst ActionSection = styled.div`\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n`;\n\nconst currentUser = context.accountId;\nconst alreadyVotedForHouse = () => myVotes.some((voter) => voter.house === typ);\nconst myVotesForHouse = () => myVotes.filter((vote) => vote.house === typ);\n\nconst handleVote = (value) =>\n  Near.call(\n    electionContract,\n    \"vote\",\n    { prop_id: id, vote: [value] },\n    \"110000000000000\"\n  );\n\nState.init({\n  availableVotes: seats - myVotesForHouse().length,\n});\n\nconst CastVotes = () => (\n  <CastVotesSection className=\"d-flex align-items-center justify-content-between gap-3\">\n    <div className=\"wrapper\">\n      <div className=\"d-flex align-items-end\">\n        <H3>{alreadyVotedForHouse() ? 0 : state.availableVotes}</H3>\n        <span>/</span>\n        <H4>{seats}</H4>\n        <span className=\"text-secondary\">votes left</span>\n      </div>\n      <Info className=\"text-secondary\">\n        <i class=\"bi bi-info-circle\"></i>\n        {alreadyVotedForHouse() && (\n          <span>You're already accepted budget package</span>\n        )}\n      </Info>\n    </div>\n    <ActionSection className=\"d-flex gap-2\">\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Yes\",\n            className: \"primary success justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-up\" />,\n            onClick: () => handleVote(\"yes\"),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"No\",\n            className: \"primary danger justify-content-center\",\n            icon: <i className=\"bi bi-hand-thumbs-down\" />,\n            onClick: () => handleVote(\"no\"),\n          },\n        }}\n      />\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Button: {\n            text: \"Abstain\",\n            className: \"primary justify-content-center\",\n            icon: <i className=\"bi bi-x-lg\" />,\n            onClick: () => handleVote(\"abstain\"),\n          },\n        }}\n      />\n    </ActionSection>\n  </CastVotesSection>\n);\n\nconst BudgetText = styled.p`\n  line-height: 16px;\n  font-size: 12px;\n  text-align: justify;\n`;\n\nconst Content = () => (\n  <div>\n    <BudgetText>\n      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Velit laoreet id donec\n      ultrices. Fringilla ut morbi tincidunt augue interdum velit euismod in\n      pellentesque. Venenatis tellus in metus vulputate eu scelerisque felis.\n      Eleifend quam adipiscing vitae proin sagittis nisl. Pellentesque id nibh\n      tortor id aliquet. Sit amet luctus venenatis lectus magna fringilla urna\n      porttitor. Quis auctor elit sed vulputate mi sit amet mauris. Massa sapien\n      faucibus et molestie ac. Turpis cursus in hac habitasse platea dictumst\n      quisque sagittis purus. Nisl purus in mollis nunc. Massa sed elementum\n      tempus egestas sed sed risus pretium quam. Pretium nibh ipsum consequat\n      nisl vel. Nullam non nisi est sit amet facilisis. Blandit volutpat\n      maecenas volutpat blandit aliquam etiam. Vehicula ipsum a arcu cursus\n      vitae congue. Ut lectus arcu bibendum at varius vel. Turpis tincidunt id\n      aliquet risus feugiat in ante.\n      <br />\n      <br />\n      Dolor morbi non arcu risus quis varius. Tortor dignissim convallis aenean\n      et tortor at risus viverra. Purus ut faucibus pulvinar elementum integer\n      enim neque volutpat ac. Nullam eget felis eget nunc. Risus commodo viverra\n      maecenas accumsan lacus vel facilisis. Id neque aliquam vestibulum morbi\n      blandit. Lacus laoreet non curabitur gravida arcu ac tortor. Morbi non\n      arcu risus quis varius. Ut lectus arcu bibendum at varius vel pharetra.\n      Vel eros donec ac odio tempor orci dapibus. Placerat orci nulla\n      pellentesque dignissim enim sit amet venenatis urna. Vulputate ut pharetra\n      sit amet aliquam id. Molestie at elementum eu facilisis sed.\n      <br />\n      <br />\n      Aenean pharetra magna ac placerat vestibulum lectus mauris ultrices eros.\n      Donec ac odio tempor orci dapibus. Ultrices tincidunt arcu non sodales\n      neque sodales. Cursus vitae congue mauris rhoncus aenean vel. Et ligula\n      ullamcorper malesuada proin libero nunc consequat interdum varius. Quis\n      lectus nulla at volutpat diam ut venenatis tellus in. Pellentesque nec nam\n      aliquam sem et tortor consequat id porta. Nunc eget lorem dolor sed\n      viverra. Id velit ut tortor pretium. Porta lorem mollis aliquam ut\n      porttitor leo. Morbi tincidunt augue interdum velit euismod in\n      pellentesque. Dictum at tempor commodo ullamcorper a lacus vestibulum sed\n      arcu. Vel orci porta non pulvinar neque laoreet suspendisse. Consequat ac\n      felis donec et odio pellentesque diam volutpat commodo. Arcu cursus\n      euismod quis viverra. Pellentesque eu tincidunt tortor aliquam nulla\n      facilisi cras. Facilisis mauris sit amet massa vitae tortor condimentum\n      lacinia quis. Feugiat vivamus at augue eget arcu dictum varius duis at.\n      Mauris augue neque gravida in fermentum et sollicitudin ac. Iaculis nunc\n      sed augue lacus. Ipsum dolor sit amet consectetur adipiscing elit ut.\n      Magnis dis parturient montes nascetur. Hac habitasse platea dictumst\n      vestibulum rhoncus est. Ultrices vitae auctor eu augue. Vitae congue eu\n      consequat ac. Viverra maecenas accumsan lacus vel facilisis volutpat est\n      velit egestas. Hendrerit dolor magna eget est lorem. Nunc vel risus\n      commodo viverra maecenas accumsan lacus vel. Cras fermentum odio eu\n      feugiat pretium nibh ipsum. Quam quisque id diam vel quam elementum\n      pulvinar etiam.\n      <br />\n      <br />\n      Nulla malesuada pellentesque elit eget gravida cum sociis natoque. Cras\n      sed felis eget velit aliquet sagittis. Mollis nunc sed id semper risus in\n      hendrerit. Nullam eget felis eget nunc lobortis mattis aliquam faucibus\n      purus. Turpis tincidunt id aliquet risus feugiat in ante. Egestas dui id\n      ornare arcu odio ut sem nulla. Velit sed ullamcorper morbi tincidunt\n      ornare massa. Suspendisse in est ante in nibh mauris cursus mattis.\n      Suspendisse in est ante in nibh mauris. Elementum sagittis vitae et leo\n      duis ut diam quam. Gravida dictum fusce ut placerat orci nulla\n      pellentesque. Diam ut venenatis tellus in. Ipsum consequat nisl vel\n      pretium lectus. Enim tortor at auctor urna nunc id cursus metus. Sed\n      turpis tincidunt id aliquet risus feugiat in ante. A scelerisque purus\n      semper eget duis at.\n      <br />\n      <br />\n      Non sodales neque sodales ut etiam sit amet nisl. Arcu vitae elementum\n      curabitur vitae. Ac turpis egestas maecenas pharetra. Massa tempor nec\n      feugiat nisl pretium fusce id. Pharetra et ultrices neque ornare aenean\n      euismod elementum nisi. Augue neque gravida in fermentum et. Morbi\n      tristique senectus et netus et malesuada fames. Arcu cursus euismod quis\n      viverra. Sit amet dictum sit amet. Odio eu feugiat pretium nibh.\n      <br />\n      <br />\n      Ornare suspendisse sed nisi lacus sed viverra tellus. Feugiat in ante\n      metus dictum at tempor. Diam sollicitudin tempor id eu nisl nunc mi ipsum\n      faucibus. Aliquet nibh praesent tristique magna. Tempus imperdiet nulla\n      malesuada pellentesque elit. Luctus venenatis lectus magna fringilla.\n      Vitae tempus quam pellentesque nec nam aliquam. Laoreet suspendisse\n      interdum consectetur libero id faucibus nisl tincidunt. Quis commodo odio\n      aenean sed adipiscing diam donec adipiscing. Sed lectus vestibulum mattis\n      ullamcorper velit sed. Condimentum mattis pellentesque id nibh tortor id\n      aliquet lectus. Nisi lacus sed viverra tellus. Luctus accumsan tortor\n      posuere ac ut consequat semper viverra nam. In pellentesque massa placerat\n      duis ultricies lacus sed turpis tincidunt. Sed augue lacus viverra vitae\n      congue. Posuere morbi leo urna molestie at. Risus nullam eget felis eget\n      nunc.\n      <br />\n      <br />\n      Ultrices eros in cursus turpis massa. Et molestie ac feugiat sed lectus.\n      Nisi scelerisque eu ultrices vitae auctor. Lobortis mattis aliquam\n      faucibus purus in. Dictum non consectetur a erat nam. Interdum velit\n      euismod in pellentesque massa. Arcu cursus vitae congue mauris rhoncus.\n      Ridiculus mus mauris vitae ultricies. Donec ultrices tincidunt arcu non\n      sodales neque sodales ut etiam. Sit amet volutpat consequat mauris nunc.\n      Quam viverra orci sagittis eu volutpat odio. Amet luctus venenatis lectus\n      magna fringilla urna porttitor. Risus nec feugiat in fermentum posuere\n      urna nec tincidunt. Ornare quam viverra orci sagittis eu volutpat odio\n      facilisis. Pretium quam vulputate dignissim suspendisse. Leo duis ut diam\n      quam nulla. Velit sed ullamcorper morbi tincidunt.\n      <br />\n      <br />\n      Cras sed felis eget velit aliquet sagittis id. Nunc id cursus metus\n      aliquam eleifend. Lectus quam id leo in. Consequat mauris nunc congue nisi\n      vitae suscipit tellus mauris a. Donec enim diam vulputate ut pharetra sit\n      amet aliquam. Velit euismod in pellentesque massa placerat duis ultricies.\n      Dolor magna eget est lorem ipsum dolor sit amet. Odio morbi quis commodo\n      odio aenean sed adipiscing. Elementum nisi quis eleifend quam adipiscing.\n      Condimentum mattis pellentesque id nibh tortor. Egestas congue quisque\n      egestas diam in arcu cursus. A diam maecenas sed enim ut sem viverra\n      aliquet.\n      <br />\n      <br />\n      Tortor at risus viverra adipiscing at in. Nisl rhoncus mattis rhoncus\n      urna. Odio facilisis mauris sit amet massa vitae. Mattis pellentesque id\n      nibh tortor id aliquet lectus proin. Nunc sed blandit libero volutpat sed\n      cras ornare arcu dui. Consectetur adipiscing elit pellentesque habitant\n      morbi. Donec pretium vulputate sapien nec sagittis aliquam malesuada\n      bibendum arcu. Eget aliquet nibh praesent tristique magna sit amet purus.\n      Massa massa ultricies mi quis hendrerit dolor magna. Pulvinar sapien et\n      ligula ullamcorper malesuada proin libero. Dolor sit amet consectetur\n      adipiscing elit duis tristique sollicitudin nibh. Sit amet purus gravida\n      quis blandit turpis cursus. Ut sem viverra aliquet eget sit amet tellus\n      cras.\n    </BudgetText>\n  </div>\n);\n\nreturn (\n  <Container>\n    <h1>Budget Package</h1>\n    <a href=\"https://bafkreidwdxocdkfsv6srynw7ipnogfuw76fzncmxd5jv7furbsn5cp4bz4.ipfs.nftstorage.link/\">\n      View Budget Package\n      <i className=\"ml-2 bi bi-box-arrow-up-right\" />\n    </a>\n    <CandidatesContainer>\n      <Content />\n    </CandidatesContainer>\n\n    <div>\n      {isIAmHuman ? (\n        <CastVotes />\n      ) : (\n        <Widget\n          src={widgets.verifyHuman}\n          props={{\n            title: \"Want to vote?\",\n            description: \"Click on Verify as a Human to proceed.\",\n          }}\n        />\n      )}\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.BudgetPackage", "fact_widget_deployments_id": "7236d09a6bf0114f7bc94c449dbb352f", "inserted_timestamp": "2023-08-30T09:30:31.516Z", "modified_timestamp": "2023-08-30T09:30:31.516Z", "__row_index": 13}