{"tx_hash": "fCh4JVBV9JxcZkQXR4BWGnC92cr1QtzLdtcR3PTVvL2", "action_id_social": "J3taSvZvdTpETKyCfjJ1u5G68w9AeyphimThLf4R33u4-0-widget", "block_id": 100442375, "block_timestamp": "2023-09-05T11:16:12.198Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.Header", "source_code": "const { startTime, endTime, type, isWhistleblower, cooldown, defaultTitle } =\n  props;\n\nState.init({\n  days: \"-\",\n  hours: \"-\",\n  minutes: \"-\",\n  seconds: \"-\",\n  title: \"\",\n});\n\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n};\n\nconst formatTime = (time) => (time < 10 ? `0${time}` : time);\n\nconst timer = setInterval(() => {\n  const now = new Date().getTime();\n  const start = new Date(parseInt(startTime)).getTime();\n  const end = new Date(parseInt(endTime)).getTime();\n  const cooldown = new Date(parseInt(endTime)).getTime() + cooldown;\n  let title = \"\";\n  console.log(props);\n  console.log(now);\n  console.log(cooldown);\n\n  let diff;\n  if (now < start)\n    diff = new Date(parseInt(start)).getTime() - new Date().getTime();\n  else if (now > start && now < end)\n    diff = new Date(parseInt(end)).getTime() - new Date().getTime();\n  else if (now > end && now < cooldown) diff = cooldown - now;\n  else diff = 0;\n\n  let days = Math.floor(diff / (1000 * 60 * 60 * 24));\n  let hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  let minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n  let seconds = Math.floor((diff % (1000 * 60)) / 1000);\n\n  if (now < start) title = <>Time before {type} starts</>;\n  else if (now > start && now < end)\n    title =\n      type === \"Nomination\" ? (\n        <>TIME LEFT TO NOMINATE - ELECTIONS START SEPT 8</>\n      ) : (\n        <>Time remaining in current {type}</>\n      );\n  else {\n    title = (\n      <>\n        {type} {defaultTitle ?? \"is ended\"}\n      </>\n    );\n    days = 0;\n    hours = 0;\n    minutes = 0;\n    seconds = 0;\n  }\n\n  State.update({\n    days: days,\n    hours: hours,\n    minutes: minutes,\n    seconds: seconds,\n    title: title,\n  });\n\n  clearInterval(timer);\n}, 1000);\n\nconst Logo = styled.img`\n  width: 60px;\n  margin: ${(props) => (props.mobile ? \"0 10px 0 0\" : \"0 20px 0 10px\")};\n`;\n\nconst H1 = styled.h1`\n  font-size: ${(props) => (props.mobile ? \"30px\" : \"40px\")};\n  font-weight: 500;\n  margin-bottom: 0;\n  text-transform: capitalize;\n`;\n\nconst H6 = styled.h6`\n  font-size: 12px;\n  font-weight: 400;\n  margin-right: 32px;\n  margin-bottom: 0;\n  line-height: 1.5;\n  align-items: center;\n  letter-spacing: 0.16em;\n  text-transform: uppercase;\n  width: ${(props) => (props.mobile ? \"100%\" : \"130px\")};\n`;\n\nconst Timer = styled.div`\n  .time {\n    font-size: 48px;\n    font-weight: 800;\n    color: #ffd50d;\n    width: 100px;\n    line-height: 1;\n  }\n  small {\n    margin-bottom: 0;\n    align-items: center;\n  }\n`;\n\nconst TimerContainer = styled.div`\n  .time {\n    font-size: 48px;\n    font-weight: 700;\n    color: #ffd50d;\n    width: 100px;\n    line-height: 1;\n  }\n  small {\n    margin-bottom: 0;\n    align-items: center;\n  }\n`;\n\nconst SmallTimerContainer = styled.div`\n  background: #ffd50d;\n\n  .time {\n    font-size: 36px;\n    font-weight: 700;\n    color: #000;\n    width: 70px;\n    line-height: 1;\n  }\n  small {\n    margin-bottom: 0;\n    align-items: center;\n    color: grey;\n  }\n`;\n\nconst Info = styled.div`\n  background: #ffd50d;\n`;\n\nconst TitleContainer = ({ mobile }) => (\n  <>\n    <Logo\n      mobile={mobile}\n      src=\"https://pbs.twimg.com/profile_images/1622941553839816707/nmf3MWw1_400x400.jpg\"\n    />\n    <H1 mobile={mobile}>NDC {type}s</H1>\n  </>\n);\n\nconst TimerContent = ({ mobile }) => {\n  const TimeSlot = ({ time, title, mobile }) => (\n    <div className={`${mobile ? \"text-center\" : \"\"}`}>\n      <div className=\"time\">{formatTime(time)}</div>\n      <small>{title}</small>\n    </div>\n  );\n\n  return (\n    <>\n      <H6 mobile={mobile} className={`${mobile ? \"m-0 mb-3 text-center\" : \"\"}`}>\n        {state.title}\n      </H6>\n      <Timer className=\"d-flex\" mobile={mobile}>\n        <TimeSlot title=\"days\" time={state.days} />\n        <TimeSlot title=\"hours\" time={state.hours} />\n        <TimeSlot title=\"minutes\" time={state.minutes} />\n        <TimeSlot title=\"seconds\" time={state.seconds} />\n      </Timer>\n    </>\n  );\n};\n\nconst InfoBlock = ({ mobile }) => (\n  <Info\n    className={`py-2 d-flex justify-content-center align-items-center gap-2 ${\n      mobile ? \"\" : \"rounded-bottom\"\n    }`}\n  >\n    <b className={`mb-0 ${mobile ? \"w-50\" : \"\"}`}>\n      {isWhistleblower ? (\n        <>LEARN ABOUT THE WHISTLEBLOWER BOUNTY PROGRAM</>\n      ) : (\n        <>NDC NOMINATION AND ELECTION EDUCATION</>\n      )}\n    </b>\n    <div>\n      <Widget\n        src={widgets.styledComponents}\n        props={{\n          Link: {\n            text: \"Learn More\",\n            size: \"sm\",\n            className: \"primary dark\",\n            href: isWhistleblower\n              ? \"https://medium.com/@neardigitalcollective/introducing-ndc-whistleblower-bounty-program-d4fe1b9fc5a0\"\n              : \"https://pages.near.org/blog/ndc-v1-governance-elections-faq\",\n          },\n        }}\n      />\n    </div>\n  </Info>\n);\n\nreturn (\n  <div>\n    <div className=\"d-none d-lg-flex flex-column\">\n      <div className=\"p-4 bg-black text-white d-lg-flex rounded-top justify-content-between align-items-center\">\n        <div className=\"d-flex align-items-center\">\n          <TitleContainer />\n        </div>\n        <TimerContainer className=\"d-flex align-items-center\">\n          <TimerContent />\n        </TimerContainer>\n      </div>\n      <InfoBlock />\n    </div>\n    <div className=\"d-md-flex d-lg-none d-xl-none\">\n      <div className=\"row\">\n        <div className=\"d-flex bg-black align-items-center justify-content-center bg-black text-white\">\n          <TitleContainer mobile />\n        </div>\n        <SmallTimerContainer className=\"d-flex flex-column p-3 align-items-center justify-content-between\">\n          <TimerContent mobile />\n        </SmallTimerContainer>\n        <InfoBlock mobile />\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.Header", "fact_widget_deployments_id": "09269031dd1b34ae342e4f8635c20416", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}