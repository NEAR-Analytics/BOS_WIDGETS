{"tx_hash": "QAEuxurrt4t6GdbM6hZtZh15AVsjt3JvVqZ5DGCGVg9", "action_id_social": "3oUaLtR5FYoPKdkBzEupEpFwvTizKzsNJ31S7nAmHUwM-0-widget", "block_id": 100624763, "block_timestamp": "2023-09-08T00:13:56.890Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.Statistic", "source_code": "const { electionContract } = props;\n\nconst BLACKLISTED_COUNT = 911;\n\nconst Chart = styled.div`\n  width: 150px;\n  aspect-ratio: 1;\n  position: relative;\n  display: inline-grid;\n  place-content: center;\n  margin: 5px;\n  font-size: 25px;\n  font-weight: bold;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    border-radius: 50%;\n    inset: 0;\n    background: ${(props) =>\n      `conic-gradient(#4ba6ee, calc(${props.voted}*1%), #d4e5f4 0)`};\n    -webkit-mask: radial-gradient(\n      farthest-side,\n      #0000 calc(99% - 15px),\n      #000 calc(100% - 15px)\n    );\n    mask: radial-gradient(\n      farthest-side,\n      #0000 calc(99% - 15px),\n      #000 calc(100% - 15px)\n    );\n  }\n\n  span {\n    font-weight: 800;\n    font-size: 32px;\n    line-height: 120%;\n    color: #4ba6ee;\n  }\n`;\n\nconst H5 = styled.h5`\n  margin-top: 10px;\n  b {\n    font-weight: 800;\n  }\n  small {\n    font-weight: 400;\n    font-size: 14px;\n  }\n`;\n\nconst registryContract = \"registry.i-am-human.near\";\nconst apiKey = \"36f2b87a-7ee6-40d8-80b9-5e68e587a5b5\";\n\nState.init({\n  total: 0,\n  voted: 0,\n});\n\nconst total = Near.view(\"registry.i-am-human.near\", \"sbt_supply\", {\n  issuer: \"fractal.i-am-human.near\",\n});\n\nState.update({ total: total - BLACKLISTED_COUNT });\n\nasyncFetch(\n  `https://api.pikespeak.ai/election/total-voters?contract=${electionContract}`,\n  { headers: { \"x-api-key\": apiKey } }\n).then((resp) => {\n  if (resp.body)\n    State.update({ voted: resp.body, total: total - BLACKLISTED_COUNT });\n});\n\nconst percent = state.total > 0 ? (state.voted / state.total) * 100 : 0;\n\nreturn (\n  <div>\n    <Chart voted={percent}>\n      <span>{percent.toFixed(1)}%</span>\n    </Chart>\n    <H5>\n      <b>{state.voted}</b>/<small>{state.total} Humans Voted</small>\n    </H5>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.Statistic", "fact_widget_deployments_id": "1e7a8ae71d1fe1a5e688f101c7cdb22a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}