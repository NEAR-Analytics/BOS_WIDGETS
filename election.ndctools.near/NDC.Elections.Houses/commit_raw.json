{"tx_hash": "9xGCGUidGRpxZSDxdd1myeeFCabCgXccpD8TpgRAgSKR", "action_id_social": "2MVXMV6Vq9jTU49Ede7UVJVrGkXbFvVN2z5qKdfG9F1J-0-widget", "block_id": 100610842, "block_timestamp": "2023-09-07T19:52:34.208Z", "signer_id": "election.ndctools.near", "widget_name": "NDC.Elections.Houses", "source_code": "let { houses, ids, electionContract, selectedHouse, votesLeft, urlProps } =\n  props;\nids = ids ?? [1, 2, 3, 4];\n\nState.init({ houses: houses ?? [] });\n\n// for nominations (only 3 houses to display)\nif (!houses && electionContract) {\n  const contractHouses = [\n    Near.view(electionContract, \"proposal\", { prop_id: ids[0] }),\n    Near.view(electionContract, \"proposal\", { prop_id: ids[1] }),\n    Near.view(electionContract, \"proposal\", { prop_id: ids[2] }),\n  ];\n\n  State.update({ houses: contractHouses });\n}\n\nconst housesMapping = {\n  CouncilOfAdvisors: {\n    title: \"Council Of Advisors\",\n    src: \"https://bafkreidejnek5zzwlhd3lxnr7s3tvtrgul6jobfpikbs7zjkpuovxdz7je.ipfs.nftstorage.link\",\n  },\n  HouseOfMerit: {\n    title: \"House of Merit\",\n    src: \"https://bafkreihoomeeaeyqerqftn3n7yb2jrnmqtpwgpsl3xpelek6qmly3qzob4.ipfs.nftstorage.link\",\n  },\n  TransparencyCommission: {\n    title: \"Transparency Commission\",\n    src: \"https://bafkreihcog3rs2gj4wgwfixk6yqir7k3csyaqiqwcvm2gedlh6dlvr7ik4.ipfs.nftstorage.link\",\n  },\n  SetupPackage: {\n    title: \"Budget Package\",\n    src: \"https://ipfs.near.social/ipfs/bafkreicljooupjpwmdlja2ocjg3sljvknlq5iriahqbqiwob635l2vszqa\",\n  },\n};\n\nconst Loader = () => (\n  <span\n    className=\"spinner-grow spinner-grow-sm me-1\"\n    role=\"status\"\n    aria-hidden=\"true\"\n  />\n);\n\nconst Small = styled.small`\n  margin-top: 10px;\n  font-weight: 400;\n`;\n\nconst H6 = styled.h6`\n  margin-top: 5px;\n  margin-bottom: 0;\n`;\n\nconst ImgContainer = styled.div`\n  margin-right: 20px;\n\n  img {\n    border-radius: 50%;\n    height: 40px;\n    max-height: \"40px\";\n  }\n`;\n\nconst CompletedIcon = styled.i`\n  border-radius: 50%;\n  padding-bottom: 0;\n  color: #239f28;\n  background: #cee9cf;\n\n  &:before {\n    vertical-align: -0.2rem;\n  }\n`;\n\nconst ItemContainer = styled.a`\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n  background: ${(props) => (props.selected ? \"#4BA6EE\" : \"#fff\")};\n  color: ${(props) => (props.selected ? \"white\" : \"inherit\")};\n  text-decoration: none;\n\n  &:hover {\n    text-decoration: none;\n    color: ${(props) => (props.selected ? \"#fff\" : \"#000\")};\n    background: ${(props) => (props.selected ? \"#4BA6EE\" : \"#fff\")};\n    box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.05);\n  }\n`;\n\nconst buildURL = (houseId) => {\n  const arr = [];\n  if (!urlProps) return \"\";\n\n  if (urlProps.ids) arr.push(`ids=${urlProps.ids}`);\n  if (urlProps.election_contract)\n    arr.push(`election_contract=${urlProps.election_contract}`);\n  if (urlProps.registry_contract)\n    arr.push(`registry_contract=${urlProps.registry_contract}`);\n  arr.push(`house=${houseId}`);\n\n  return \"?\" + arr.join(\"&\");\n};\n\nconst HouseItem = ({ house }) => (\n  <ItemContainer\n    className=\"d-flex p-3 px-4 align-items-center mb-3 justify-content-between\"\n    href={buildURL(house.id)}\n    selected={selectedHouse === house.id}\n  >\n    <div className=\"d-flex align-items-center\">\n      <ImgContainer>\n        <img\n          src={housesMapping[house.typ].src}\n          alt={housesMapping[house.typ].title}\n        />\n      </ImgContainer>\n      <div>\n        <H6>{housesMapping[house.typ].title}</H6>\n        {votesLeft && (\n          <Small>\n            {votesLeft(house)} / {house.seats} votes left\n          </Small>\n        )}\n      </div>\n    </div>\n    {votesLeft && (\n      <div>\n        {votesLeft(house) < house.seats && (\n          <CompletedIcon\n            className=\"bi bi-check-circle fs-5\"\n            selected={selectedHouse === house.id}\n          />\n        )}\n      </div>\n    )}\n  </ItemContainer>\n);\n\nreturn (\n  <div>\n    {state.houses.map((house) => (\n      <HouseItem house={house} />\n    ))}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/election.ndctools.near/widget/NDC.Elections.Houses", "fact_widget_deployments_id": "d6a55ccb6b56c2e268652c5fd4b106b0", "inserted_timestamp": "2023-09-07T21:44:16.102Z", "modified_timestamp": "2023-09-07T21:44:16.102Z", "__row_index": 16}