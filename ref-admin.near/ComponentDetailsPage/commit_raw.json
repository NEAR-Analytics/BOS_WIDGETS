{"tx_hash": "EENxZMMZBKbhM3UsLQUuRamb7yqGtyv3s31fgEBD9t31", "action_id_social": "HahtNYQQ6qzHDTZ7ohVadWYQTDC13LWr58GdF3JxwYU8-0-widget", "block_id": 91386649, "block_timestamp": "2023-05-08T14:39:56.481Z", "signer_id": "ref-admin.near", "widget_name": "ComponentDetailsPage", "source_code": "State.init({\n  copiedShareUrl: false,\n  selectedTab: props.tab ?? \"source\",\n});\n\nif (props.tab && props.tab !== state.selectedTab) {\n  State.update({\n    selectedTab: props.tab,\n  });\n}\n\nconst src = props.src;\nconst [accountId, widget, widgetName] = src.split(\"/\");\nconst existsData = Social.keys(`${accountId}/widget/${widgetName}`);\nconst exists = !existsData || Object.keys(existsData).length > 0;\nconst code = Social.get(`${accountId}/widget/${widgetName}`);\nconst data = Social.get(`${accountId}/widget/${widgetName}/**`);\nconst metadata = data.metadata;\nconst tags = Object.keys(metadata.tags || {});\nconst detailsUrl = `#/ref-admin.near/widget/ComponentDetailsPage?src=${src}`;\nconst shareUrl = `https://alpha.near.org${detailsUrl}`;\n\nconst dependencyMatch =\n  code && code.matchAll(/<Widget[\\s\\S]*?src=.*?\"(.+)\"[\\s\\S]*?\\/>/g);\nlet dependencySources = [...(dependencyMatch || [])]\n  .map((r) => r[1])\n  .filter((r) => !!r);\ndependencySources = dependencySources.filter(\n  (r, i) => dependencySources.indexOf(r) === i && r !== \"(.+)\"\n);\n\nconst sourceCode = `\n\\`\\`\\`jsx\n${code}\n\\`\\`\\`\n`;\n\nconst Wrapper = styled.div`\n  padding-bottom: 48px;\n`;\n\nconst SummaryWrapper = styled.div`\n  margin-bottom: 32px;\n`;\n\nconst Tabs = styled.div`\n  display: flex;\n  height: 54px;\n  overflow: auto;\n  scroll-behavior: smooth;\n\n  @media (max-width: 900px) {\n    background: #f8f9fa;\n    border-top: 1px solid #eceef0;\n    margin: 0 -12px 48px;\n\n    > * {\n      flex: 1;\n    }\n  }\n`;\n\nconst TabsButton = styled.a`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  font-weight: 600;\n  font-size: 16px;\n  padding: 0 12px;\n  position: relative;\n  color: ${(p) => (p.selected ? \"#fff\" : \"rgba(255,255,255,0.5)\")};\n  background: none;\n  border: none;\n  outline: none;\n  text-align: center;\n  text-decoration: none !important;\n  margin-right: 40px;\n\n  &:hover {\n    color: #fff;\n  }\n\n  &::after {\n    content: \"\";\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 4px;\n    background: #00ffd1;\n  }\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr) 336px;\n  gap: 64px;\n\n  background: #15272b;\n  box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.5);\n  border-radius: 16px;\n\n  @media (max-width: 995px) {\n    grid-template-columns: 1fr;\n    gap: 24px;\n  }\n  .codeArea {\n    > pre > div {\n      background: transparent !important;\n    }\n  }\n  .aboutArea {\n    padding: 10px 20px;\n    color: #fff;\n  }\n`;\n\nconst PreviewContent = styled.div`\n  gap: 64px;\n  margin-top: 12px;\n  background: #15272b;\n  box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.5);\n  border-radius: 16px;\n`;\n\nconst Sidebar = styled.div`\n  padding: ${(p) => (p.area == \"about\" ? \"10px\" : \"\")};\n  border-left: 2px solid #1e373d;\n  .dependenciesArea {\n    padding: 20px 28px;\n  }\n  > div {\n    padding-bottom: 32px;\n    border-bottom: 1px solid rgba(48, 67, 82, 0.5);\n    margin-bottom: 32px;\n    p {\n      color: #fff;\n    }\n\n    &:last-child {\n      padding-bottom: 0;\n      border-bottom: none;\n      margin-bottom: 0;\n    }\n  }\n\n  @media (max-width: 995px) {\n    padding-bottom: 32px;\n    border-bottom: 1px solid #eceef0;\n    grid-row: 1;\n  }\n`;\n\nconst SmallTitle = styled.h3`\n  font-weight: 500;\n  font-size: 16px;\n  color: #fff;\n  margin-bottom: 32px;\n  text-transform: uppercase;\n\n  @media (max-width: 770px) {\n    margin-bottom: 16px;\n  }\n`;\n\nconst TextLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #0091ff;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 15px;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")};\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n\n  i {\n    margin-right: 4px;\n  }\n`;\n\nconst Dependency = styled.div`\n  margin-bottom: 24px;\n  p {\n    color: #fff !important;\n  }\n`;\n\nconst HistoryContainer = styled.div`\n  > div > h1,\n  > div > .input-group.mb-3 {\n    display: none;\n  }\n`;\n\nif (!exists) {\n  return (\n    <>\n      <Text bold>Error</Text>\n      <Text>Could not find: {src}</Text>\n    </>\n  );\n}\n\nreturn (\n  <Wrapper>\n    <SummaryWrapper>\n      <Widget\n        src=\"ref-admin.near/widget/ComponentSummary\"\n        props={{\n          primaryAction: \"open\",\n          size: \"large\",\n          showTags: false,\n          src,\n          istemplate: props.istemplate,\n        }}\n      />\n    </SummaryWrapper>\n\n    <Tabs>\n      <TabsButton\n        href={`${detailsUrl}&tab=preview&istemplate=${props.istemplate}`}\n        selected={state.selectedTab === \"preview\"}\n      >\n        Preview\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=about&istemplate=${props.istemplate}`}\n        selected={state.selectedTab === \"about\"}\n      >\n        About\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=source&istemplate=${props.istemplate}`}\n        selected={state.selectedTab === \"source\"}\n      >\n        Source\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=history&istemplate=${props.istemplate}`}\n        selected={state.selectedTab === \"history\"}\n      >\n        History\n      </TabsButton>\n    </Tabs>\n\n    {state.selectedTab === \"preview\" && (\n      <PreviewContent>\n        <Widget\n          src={src}\n          props={{\n            ...props,\n            hideBanner: true,\n          }}\n        ></Widget>\n      </PreviewContent>\n    )}\n\n    {state.selectedTab === \"about\" && (\n      <Content>\n        <div class=\"aboutArea\">\n          {metadata.description ? (\n            <Markdown text={metadata.description} />\n          ) : (\n            <Text>This component has no description.</Text>\n          )}\n        </div>\n\n        <Sidebar area=\"about\">\n          {(tags.includes(\"Coming Soon\") || tags.includes(\"coming-soon\")) && (\n            <div>\n              <Widget src=\"adminalpha.near/widget/waitList\" />\n            </div>\n          )}\n\n          <div>\n            <SmallTitle>Developer</SmallTitle>\n            <Widget\n              src=\"adminalpha.near/widget/AccountProfile\"\n              props={{\n                accountId: accountId,\n              }}\n            />\n          </div>\n\n          {tags.length > 0 && (\n            <div>\n              <SmallTitle>Tags</SmallTitle>\n              <Widget\n                src=\"adminalpha.near/widget/Tags\"\n                props={{\n                  tags,\n                }}\n              />\n            </div>\n          )}\n\n          {metadata.linktree?.website && (\n            <div>\n              <SmallTitle>Website</SmallTitle>\n              <TextLink\n                href={`https://${metadata.linktree.website}`}\n                target=\"_blank\"\n              >\n                {metadata.linktree.website}\n                <i className=\"bi bi-box-arrow-up-right\"></i>\n              </TextLink>\n            </div>\n          )}\n\n          <div>\n            <Text small>\n              <i className=\"bi bi-clock\"></i>\n              Last updated\n              <Widget\n                src=\"mob.near/widget/TimeAgo\"\n                props={{ keyPath: `${accountId}/widget/${widgetName}` }}\n              />{\" \"}\n              ago.\n            </Text>\n          </div>\n        </Sidebar>\n      </Content>\n    )}\n\n    {state.selectedTab === \"source\" && (\n      <Content>\n        <div class=\"codeArea\">\n          <Markdown text={sourceCode} />\n        </div>\n        <Sidebar>\n          <div class=\"dependenciesArea\">\n            <SmallTitle>Dependencies ({dependencySources.length})</SmallTitle>\n            {dependencySources.length === 0 && (\n              <Text>This component has no dependencies.</Text>\n            )}\n            {dependencySources.map((source) => (\n              <Dependency key={source}>\n                <Widget\n                  src=\"adminalpha.near/widget/ComponentProfile\"\n                  props={{ src: source }}\n                />\n              </Dependency>\n            ))}\n          </div>\n        </Sidebar>\n      </Content>\n    )}\n\n    {state.selectedTab === \"history\" && (\n      <HistoryContainer>\n        <Widget\n          src=\"ref-admin.near/widget/WidgetHistory\"\n          props={{ widgetPath: src }}\n        />\n      </HistoryContainer>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ref-admin.near/widget/ComponentDetailsPage", "fact_widget_deployments_id": "e3f401b7399c50b5a6da83bcafd2b116", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}