{"tx_hash": "GQrXCqNiWkEvEtd4GuhYnmBCx4FQzxsbuUwUWkZCfQk5", "action_id_social": "4657UwnctVpx9XdMYa7RmTr2rinobbZAQzwxDgHvjezd-0-widget", "block_id": 100964391, "block_timestamp": "2023-09-12T14:16:02.614Z", "signer_id": "contribut3.near", "widget_name": "Invites.AdminList", "source_code": "const ownerId = \"contribut3.near\";\nconst search = props.search ?? \"\";\n\nState.init({\n  projects: null,\n  projectsIsFetched: false,\n  vendors: null,\n  vendorsIsFetched: false,\n});\n\nif (!state.projectsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_admin_projects\",\n    { account_id: context.accountId },\n    \"final\",\n    false,\n  ).then((projects) => State.update({ projects, projectsIsFetched: true }));\n}\n\nif (!state.vendorsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_admin_vendors\",\n    { account_id: context.accountId },\n    \"final\",\n    false,\n  ).then((vendors) => State.update({ vendors, vendorsIsFetched: true }));\n}\n\nif (!state.projectsIsFetched || !state.vendorsIsFetched) {\n  return <>Loading...</>;\n}\n\nconst notifications = [...new Set([...state.projects, ...state.vendors])]\n  .reduce((allNotifications, accountId) => {\n    const notificationsForAccount = Social.index(\"inbox\", accountId, {\n      order: \"desc\",\n      subscribe: true,\n    });\n\n    if (!notificationsForAccount) {\n      return allNotifications;\n    }\n\n    return [...allNotifications, ...notificationsForAccount];\n  }, [])\n  .filter(({ value }) => value.type === \"project/invite\")\n  .sort((a, b) => b.blockHeight - a.blockHeight);\n\n// if (!state.itemsIsFetched) {\n//   if (!context.accountId) {\n//     State.update({ items: [], itemsIsFetched: true });\n//   } else {\n//     Near.asyncView(\n//       ownerId,\n//       \"get_admin_vendors\",\n//       { account_id: context.accountId },\n//       \"final\",\n//       false\n//     ).then((items) => State.update({ items, itemsIsFetched: true }));\n//\n//     return <>Loading...</>;\n//   }\n// }\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75em 0.95em;\n  gap: 0.75em;\n  width: 100%;\n  background: #f9fafb;\n  border-bottom: 1px solid #eaecf0;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #475467;\n`;\n\nconst Name = styled.div`\n  width: 55%;\n`;\n\nconst Other = styled.div`\n  text-align: center;\n  width: 15%;\n`;\n\nconst Container = styled.div`\n  .cont {\n    width: 100% !important;\n  }\n`;\n\nreturn (\n  <Container>\n    <Header>\n      <Name>Name</Name>\n      <Other>Admins</Other>\n      <Other>Created</Other>\n      <Other>Status</Other>\n    </Header>\n    <Widget\n      src={`${ownerId}/widget/List`}\n      props={{\n        full: true,\n        filter: () => {},\n        items: notifications,\n        createItem: (notification) => (\n          <Widget\n            src={`${ownerId}/widget/Invites.AdminCard`}\n            props={{ notification }}\n          />\n        ),\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Invites.AdminList", "fact_widget_deployments_id": "7fc073b66f98ec50552f80fb14c23c6e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}