{"tx_hash": "GQrXCqNiWkEvEtd4GuhYnmBCx4FQzxsbuUwUWkZCfQk5", "action_id_social": "4657UwnctVpx9XdMYa7RmTr2rinobbZAQzwxDgHvjezd-0-widget", "block_id": 100964391, "block_timestamp": "2023-09-12T14:16:02.614Z", "signer_id": "contribut3.near", "widget_name": "Claim.Card", "source_code": "const ownerId = \"contribut3.near\";\n\nState.init({\n  claim: null,\n  claimIsFetched: false,\n});\n\nif (!state.claimIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_claim\",\n    { project_id: props.projectId, account_id: props.accountId },\n    \"final\",\n    false,\n  ).then((claim) => State.update({ claim, claimIsFetched: true }));\n  return <>Loading...</>;\n}\n\nconst acceptClaim = () => {\n  Near.call({\n    contractName: ownerId,\n    methodName: \"accept_claim\",\n    args: {\n      project_id: props.projectId,\n      account_id: props.accountId,\n    },\n  });\n};\n\nconst rejectClaim = () => {\n  Near.call({\n    contractName: ownerId,\n    methodName: \"reject_claim\",\n    args: {\n      project_id: props.projectId,\n      account_id: props.accountId,\n    },\n  });\n};\n\nconst accepted = \"Accepted\" in state.claim;\nconst rejected = \"Rejected\" in state.claim;\nconst timestamp = accepted\n  ? state.claim.Accepted\n  : rejected\n  ? state.claim.Rejected\n  : state.claim.Sent.timestamp;\nconst message = accepted\n  ? \"Accepted\"\n  : rejected\n  ? \"Rejected\"\n  : state.claim.Sent.message;\n\nconst date = new Date(Number(timestamp.substring(0, timestamp.length - 6)));\n\nconst dateString = date.toLocaleString();\n\nconst Details = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 0.5em 0px 0px;\n  gap: 0.125em;\n  flex: none;\n  align-self: stretch;\n  flex-grow: 0;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n`;\n\nconst body = (\n  <>\n    <Details>\n      <Row>\n        <Widget\n          src={`${ownerId}/widget/Project.Icon`}\n          props={{ accountId: props.projectId, size: \"3em\" }}\n        />\n        <Widget\n          src={`${ownerId}/widget/NameAndAccount`}\n          props={{\n            accountId: props.projectId,\n            // name: state.profile.name,\n            nameSize: \".95em\",\n            accountSize: \".75em\",\n          }}\n        />\n      </Row>\n      <b>claimed by</b>\n      <Row>\n        <Widget\n          src={`${ownerId}/widget/Vendor.Icon`}\n          props={{ accountId: props.accountId, size: \"2em\" }}\n        />\n        <Widget\n          src={`${ownerId}/widget/NameAndAccount`}\n          props={{\n            accountId: props.accountId,\n            // name: state.profile.name,\n            nameSize: \".95em\",\n            accountSize: \".75em\",\n          }}\n        />\n      </Row>\n      <Row>on {dateString}</Row>\n    </Details>\n    <Widget\n      src={`${ownerId}/widget/DescriptionArea`}\n      props={{ description: message }}\n    />\n  </>\n);\n\nconst Footer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst footer =\n  accepted || rejected ? (\n    <></>\n  ) : (\n    <Footer>\n      <Widget\n        src={`${ownerId}/widget/Buttons.Green`}\n        props={{ text: \"Accept\", onClick: acceptClaim }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Buttons.Red`}\n        props={{ text: \"Reject\", onClick: rejectClaim }}\n      />\n    </Footer>\n  );\n\nreturn <Widget src={`${ownerId}/widget/Card`} props={{ footer, body }} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Claim.Card", "fact_widget_deployments_id": "16e0bf63e33960d66a302937c4195e99", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}