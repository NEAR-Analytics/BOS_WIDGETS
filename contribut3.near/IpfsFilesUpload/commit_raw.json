{"tx_hash": "Emq9t5rMXf11fLBB82BaBVve3rBotQsTxHrS9HjGeX89", "action_id_social": "BCpKfJUC4tCXqEwLn7v8AbPJ1fmT3u41mkPqpSssDHD6-0-widget", "block_id": 90413085, "block_timestamp": "2023-04-25T17:30:50.011Z", "signer_id": "contribut3.near", "widget_name": "IpfsFilesUpload", "source_code": "const fileAccept = props.fileAccept || \"*\";\nconst fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\n\nif (!props.update) return \"Update function is required\";\n\nState.init({\n  uploading: false,\n  cid: null,\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nreturn (\n  <div>\n    {state.cid ?\n      <a href={ipfsUrl(state.cid)} download>Your file</a>\n      : <></>}\n    <Files\n      multiple={false}\n      accepts={[fileAccept]}\n      minFileSize={1}\n      clickable\n      className=\"btn btn-outline-primary\"\n      onChange={(files) => {\n        if (!files) return;\n\n        const [body] = files;\n\n        State.update({ uploading: true, cid: null });\n        asyncFetch(\n          \"https://ipfs.near.social/upload\",\n          {\n            method: \"POST\",\n            headers: { Accept: \"application/json\" },\n            body,\n          }\n        ).then(\n          ({ body: { cid } }) => {\n            State.update({ cid, uploading: false });\n            props.update(cid);\n          }\n        );\n      }}\n    >\n      {state.uploading\n        ? \"Uploading\"\n        : state.cid\n          ? \"Replace\"\n          : buttonText}\n    </Files>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/IpfsFilesUpload", "fact_widget_deployments_id": "c4c1d96a33b5f354933799c5ee8d1d9f", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 16}