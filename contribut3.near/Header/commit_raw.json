{"tx_hash": "8bt9VEbxBTfsWHMQd5JkeFFcZm6jagyCr2BEEgwX7JAN", "action_id_social": "DkKvMaSXnkQyQMCiswHYri74t62vfMVgsjhvjiXZaZN5-0-widget", "block_id": 97453680, "block_timestamp": "2023-07-27T12:45:43.782Z", "signer_id": "contribut3.near", "widget_name": "Header", "source_code": "const ownerId = \"contribut3.near\";\n\nState.init({\n  exists: false,\n  project: false,\n  balance: 0,\n  profileIsFetched: false,\n});\n\nif (!state.profileIsFetched) {\n  if (!context.accountId) {\n    State.update({\n      profileIsFetched: true,\n    });\n  } else {\n    Near.asyncView(\n      ownerId,\n      \"check_is_project\",\n      { account_id: context.accountId },\n      \"final\",\n      false\n    ).then((profileExists) => {\n      if (profileExists) {\n        asyncFetch(\n          `https://api-op3o.onrender.com/data/credits/projects/${context.accountId}/balance`\n        ).then(({ body, ok }) => {\n          State.update({\n            balance: ok ? body : 0,\n            project: true,\n            exists: true,\n            profileIsFetched: true,\n          });\n        });\n      } else {\n        Near.asyncView(\n          ownerId,\n          \"check_is_vendor\",\n          { account_id: context.accountId },\n          \"final\",\n          false\n        ).then((contributorExists) => {\n          if (contributorExists) {\n            asyncFetch(\n              `https://api-op3o.onrender.com/data/credits/vendors/${context.accountId}/balance`\n            ).then(({ body, ok }) => {\n              State.update({\n                balance: ok ? body : 0,\n                project: false,\n                exists: true,\n                profileIsFetched: true,\n              });\n            });\n          } else {\n            State.update({\n              exists: false,\n              profileIsFetched: true,\n            });\n          }\n        });\n      }\n    });\n  }\n}\n\nconst Header = styled.div`\n  display: flex;\n  padding: 0 0 0.75rem 0;\n  justify-content: space-between;\n  align-items: center;\n  align-self: stretch;\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n\n  & > a {\n    width: 10rem;\n  }\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-start;\n  gap: 1rem;\n`;\n\nconst GreyButton = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  align-self: stretch;\n`;\n\nconst GreyContent = styled.div`\n  display: flex;\n  padding: 0.4375rem 1rem 0.4375rem 1rem;\n  align-items: center;\n  width: 100%;\n  gap: 0.5rem;\n  align-self: stretch;\n  border-radius: 3.125rem;\n  border: 1px solid var(--ui-elements-light, #eceef0);\n  background: var(--background-light, #fafafa);\n  color: var(--ui-elements-black, #000);\n  text-align: center;\n  font-family: Inter;\n  font-size: 0.875rem;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 142%; /* 1.2425rem */\n  letter-spacing: 0.00875rem;\n\n  & > span {\n    color: var(--ui-elements-black, #000);\n    leading-trim: both;\n    text-edge: cap;\n    font-family: \"Mona Sans\";\n    font-size: 0.875rem;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 142%; /* 1.2425rem */\n    letter-spacing: 0.00875rem;\n  }\n\n  & > b {\n    color: var(--ui-elements-black, #000);\n    leading-trim: both;\n    text-edge: cap;\n    font-family: \"Mona Sans\";\n    font-size: 0.875rem;\n    font-style: normal;\n    font-weight: 700;\n    line-height: 142%;\n    letter-spacing: 0.00875rem;\n  }\n\n  & > svg {\n    transform: translateY(-1px);\n  }\n\n  & > a {\n    color: var(--ui-elements-black, #000);\n    text-decoration: none;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    &:hover,\n    &:focus,\n    &:active {\n      text-decoration: none;\n      color: var(--ui-elements-black, #000);\n    }\n  }\n`;\n\nconst profileIcon = (\n  <Widget\n    src={`${ownerId}/widget/Project.Icon`}\n    props={{ accountId: context.accountId, size: \"1.5em\" }}\n  />\n);\n\nreturn (\n  <Header>\n    <Link href={`/${ownerId}/widget/Index?tab=home`}>\n      <Widget src={`${ownerId}/widget/Logo`} />\n    </Link>\n    <Actions>\n      {state.exists ? (\n        <>\n          <GreyButton>\n            <GreyContent>\n              <span>Credits:</span>\n              <b>{state.balance} NHZN</b>\n              <Widget\n                src={`${ownerId}/widget/Tooltip`}\n                props={{\n                  content:\n                    \"Horizon credits are accepted forms of payments by Horizon-approved Service Providers\",\n                }}\n              />\n            </GreyContent>\n          </GreyButton>\n          <GreyButton>\n            <GreyContent>\n              <Link\n                href={`/${ownerId}/widget/Index?tab=${\n                  state.project ? \"project\" : \"contributor\"\n                }&accountId=${context.accountId}`}\n              >\n                {profileIcon} Your profile\n              </Link>\n            </GreyContent>\n          </GreyButton>\n        </>\n      ) : (\n        <Widget src={`${ownerId}/widget/Buttons.Onboard`} />\n      )}\n    </Actions>\n  </Header>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Header", "fact_widget_deployments_id": "d55dc3ec62b1ba2e13027ba0bc72ff11", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 47}