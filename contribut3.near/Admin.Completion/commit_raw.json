{"tx_hash": "HQQc45gvsEMPyPpsxcQvtWiNLMZudXcvjit5KiKtRM1R", "action_id_social": "8L3ZxKdWRRCiHdUZsnTiah5QsXwVgxqUcyj8hkUpzyPN-0-widget", "block_id": 96293985, "block_timestamp": "2023-07-12T10:57:49.991Z", "signer_id": "contribut3.near", "widget_name": "Admin.Completion", "source_code": "const ownerId = \"contribut3.near\";\nconst urlPrefix = \"https://api-op3o.onrender.com/data\";\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  border-top: 1px solid #eaeaea;\n\n  &:first-child {\n    border-top: none;\n  }\n\n  & > div:first-child {\n    border-right: 1px solid #eaeaea;\n    width: 75%;\n    background: #f8f8f8;\n  }\n\n  & > div:last-child {\n    font-weight: 600;\n    width: 25%;\n    text-align: right;\n  }\n\n  & > div {\n    padding: 8px 16px;\n  }\n`;\n\nconst Table = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  width: 100%;\n  border: 1px solid #eaeaea;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\n/** @type {{url: string; render(data: any):JSX.Element}[]} */\nconst data = [\n  // {\n  //   url: \"projects/completion\",\n  //   render: (data) => {\n  //     const avg = Number(data.avg).toLocaleString(\"en-US\", {\n  //       style: \"percent\",\n  //       minimumFractionDigits: 2,\n  //     });\n  //\n  //     return (\n  //       <Row>\n  //         <div>Completion:</div>\n  //         <div>{avg}</div>\n  //       </Row>\n  //     );\n  //   },\n  // },\n  {\n    url: \"metrics?above=100\",\n    render: ({ average, completed }) => {\n      const avg = Number(average).toLocaleString(\"en-US\", {\n        style: \"percent\",\n        minimumFractionDigits: 2,\n      });\n\n      return (\n        <>\n          <Row>\n            <div>Avarage completion</div>\n            <div>{avg}</div>\n          </Row>\n          <Row>\n            <div>Count of projects with completed profiles</div>\n            <div>{completed}</div>\n          </Row>{\" \"}\n        </>\n      );\n    },\n    fallback: (loader) => {\n      <>\n        <Row>\n          <div>Avarage completion</div>\n          <div>{loader}</div>\n        </Row>\n        <Row>\n          <div>Count of projects with completed profiles</div>\n          <div>{loader}</div>\n        </Row>\n      </>;\n    },\n  },\n  {\n    url: \"metrics?above=90\",\n    render: ({ completed }) => {\n      return (\n        <Row>\n          <div>Count of projects with 90% completed profiles</div>\n          <div>{completed}</div>\n        </Row>\n      );\n    },\n    fallback: (loader) => {\n      <>\n        <Row>\n          <div>Count of projects with 90% completed profiles</div>\n          <div>{loader}</div>\n        </Row>\n      </>;\n    },\n  },\n  {\n    url: \"metrics/counts\",\n    render: (data) => {\n      return (\n        <>\n          {Object.keys(data).map((key) => {\n            const value = data[key];\n\n            return (\n              <Row key={key}>\n                <div>Number of {key}</div>\n                <div>{value}</div>\n              </Row>\n            );\n          })}\n        </>\n      );\n    },\n    fallback: (loader) => {\n      <>\n        <Row>\n          <div>Number of projects</div>\n          <div>{loader}</div>\n        </Row>\n        <Row>\n          <div>Number of vendors</div>\n          <div>{loader}</div>\n        </Row>\n        <Row>\n          <div>Number of requests</div>\n          <div>{loader}</div>\n        </Row>\n        <Row>\n          <div>Number of proposals</div>\n          <div>{loader}</div>\n        </Row>\n        <Row>\n          <div>Number of contributions</div>\n          <div>{loader}</div>\n        </Row>\n      </>;\n    },\n  },\n  {\n    url: \"metrics/average/fulfillment\",\n    render: (data) => (\n      <Row>\n        <div>Avarage days to fulfillment</div>\n        <div>{data}</div>\n      </Row>\n    ),\n    fallback: (loader) => (\n      <Row>\n        <div>Avarage days to fulfillment</div>\n        <div>{loader}</div>\n      </Row>\n    ),\n  },\n  {\n    url: \"metrics/average/project/transactions\",\n    render: (data) => (\n      <Row>\n        <div>Avarage number of transactions per project</div>\n        <div>\n          {Number(data).toLocaleString(\"en-US\", {\n            maximumFractionDigits: 2,\n          })}\n        </div>\n      </Row>\n    ),\n    fallback: (loader) => (\n      <Row>\n        <div>Avarage number of transactions per project</div>\n        <div>{loader}</div>\n      </Row>\n    ),\n  },\n  {\n    url: \"metrics/average/project/requests\",\n    render: (data) => (\n      <Row>\n        <div>Avarage number of requests per project</div>\n        <div>\n          {Number(data).toLocaleString(\"en-US\", {\n            maximumFractionDigits: 2,\n          })}\n        </div>\n      </Row>\n    ),\n    fallback: (loader) => (\n      <Row>\n        <div>Avarage number of requests per project</div>\n        <div>{loader}</div>\n      </Row>\n    ),\n  },\n  {\n    url: \"metrics/average/project/mau\",\n    render: (data) => (\n      <Row>\n        <div>Avarage MAU per project</div>\n        <div>\n          {Number(data.average_without_max).toLocaleString(\"en-US\", {\n            maximumFractionDigits: 2,\n          })}\n        </div>\n      </Row>\n    ),\n    fallback: (loader) => (\n      <Row>\n        <div>Avarage MAU per project</div>\n        <div>{loader}</div>\n      </Row>\n    ),\n  },\n];\n\nreturn (\n  <Table>\n    {data.map(({ url, render, fallback }) => (\n      <Widget\n        src={`${ownerId}/widget/Layout.Fetcher`}\n        props={{ url: `${urlPrefix}/${url}`, render, fallback }}\n      />\n    ))}\n  </Table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Admin.Completion", "fact_widget_deployments_id": "6f2edad3c085de8e15e357b2229385aa", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}