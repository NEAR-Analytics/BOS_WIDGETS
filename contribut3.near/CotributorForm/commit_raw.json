{"tx_hash": "9ziLwkhMvBLbSWgbxm1cMdoWLovjvizzpzHaBCDZoJvr", "action_id_social": "DfDU35c5RuX3fYYLUhPgFXk5d67DtBCeMbzmAERJPXod-0-widget", "block_id": 88784657, "block_timestamp": "2023-04-04T07:43:10.679Z", "signer_id": "contribut3.near", "widget_name": "CotributorForm", "source_code": "const ownerId = \"contribut3.near\";\nconst accountId = props.accountId ?? \"\";\nconst kind = props.kind ? [{ name: props.kind }] : [];\nconst startDate = props.startDate ?? \"\";\nconst allContributionTypes = (\n  Near.view(ownerId, \"get_contribution_types\", {}, \"final\", true) ?? []\n).map((name) => ({ name }));\n\nconst convertType = (contributionType) => {\n  if (allContributionTypes.some(({ name }) => name === contributionType.name)) {\n    return contributionType.name;\n  }\n\n  return { Other: contributionType.name };\n};\n\nState.init({\n  contributionTypes: [],\n  skills: [],\n  resume: \"\",\n});\n\nconst contributionTypesInput = (\n  <div className=\"col-lg-12 mb-2\">\n    <label htmlFor=\"contribution-types\">Contribution types:</label>\n    <Typeahead\n      id=\"contribution-types\"\n      labelKey=\"name\"\n      onChange={(contributionTypes) => State.update({ contributionTypes })}\n      options={allContributionTypes}\n      placeholder=\"Development, Investment, Legal...\"\n      selected={state.contributionTypes}\n      positionFixed\n      multiple\n      allowNew\n    />\n  </div>\n);\n\nconst skillsInput = (\n  <div className=\"col-lg-12 mb-2\">\n    <label htmlFor=\"skills\">Skills:</label>\n    <Typeahead\n      id=\"skills\"\n      labelKey=\"name\"\n      onChange={(skills) => State.update({ skills })}\n      options={[]}\n      placeholder=\"Rust, JavaScript, React...\"\n      selected={state.skills}\n      positionFixed\n      multiple\n      allowNew\n    />\n  </div>\n);\n\nconst resumeInput = (\n  <div className=\"col-lg-12  mb-2\">\n    <label htmlFor=\"Resume\">Resume:</label>\n    <textarea\n      id=\"Resume\"\n      value={state.resume}\n      type=\"text\"\n      rows={6}\n      className=\"form-control\"\n      onChange={(event) => State.update({ resume: event.target.value })}\n    />\n  </div>\n);\n\nconst onSubmit = () => {\n  const args = {\n    contribution_types: state.contributionTypes.map((t) => convertType(t)),\n    skills: state.skills.map(({ name }) => name),\n    resume: state.resume,\n  };\n\n  Near.call(ownerId, \"register\", args, \"30000000000000\", \"1\");\n};\n\nconst header = <div className=\"card-header\">Register as a contributor</div>;\n\nconst body = (\n  <div className=\"card-body\">\n    <div className=\"row\">\n      {contributionTypesInput}\n      {skillsInput}\n      {resumeInput}\n    </div>\n\n    <a className=\"btn btn-primary mb-2\" onClick={onSubmit}>\n      Submit\n    </a>\n  </div>\n);\n\nconst footer = (\n  <div className=\"card-footer\">\n    Preview:\n    <Widget\n      src={`${ownerId}/widget/Contributor`}\n      props={{\n        isPreview: true,\n        accountId: context.accountId,\n        contributor: {\n          contribution_types: state.contributionTypes.map((t) =>\n            convertType(t)\n          ),\n          skills: state.skills.map(({ name }) => name),\n          resume: state.resume,\n        },\n      }}\n    />\n  </div>\n);\n\nreturn (\n  <div className=\"card\">\n    {header}\n    {body}\n    {footer}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/CotributorForm", "fact_widget_deployments_id": "1e0dc3b4356ba47322e28213faecd3a8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}