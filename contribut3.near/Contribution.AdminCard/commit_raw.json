{"tx_hash": "5VdV88ePTL1aXmmtZkFrUqSKnCRPFAwynos7kHkV2C3J", "action_id_social": "FF1pirGNFSSanQQmW1g8is64j33bhFsR554y9wHnCvLE-0-widget", "block_id": 97520952, "block_timestamp": "2023-07-28T09:39:48.363Z", "signer_id": "contribut3.near", "widget_name": "Contribution.AdminCard", "source_code": "const ownerId = \"contribut3.near\";\nconst projectId = props.projectId;\nconst cid = props.cid;\nconst vendorId = props.vendorId;\n\nconst getDate = (timestamp) => {\n  const timestampString = `${timestamp}`;\n  return new Date(\n    Number(timestampString.substring(0, 13))\n  ).toLocaleDateString();\n};\n\nState.init({\n  contribution: null,\n  contributionIsFetched: false,\n  request: null,\n  requestIsFetched: false,\n  proposal: null,\n  proposalIsFetched: false,\n});\n\nif (!state.contributionIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_contribution\",\n    { project_id: projectId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((contribution) =>\n    State.update({ contribution, contributionIsFetched: true })\n  );\n  asyncFetch(\"https://api-op3o.onrender.com/transactions/all\").then(\n    ({ body: txs }) => {\n      const tx = txs.find((tx) => {\n        return (\n          tx.method_name === \"add_contribution\" &&\n          tx.args.project_id === projectId &&\n          tx.args.cid === cid &&\n          tx.args.vendor_id === vendorId\n        );\n      });\n      State.update({ created_at: tx.timestamp });\n    }\n  );\n}\n\nif (!state.requestIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_request\",\n    { account_id: projectId, cid },\n    \"final\",\n    false\n  ).then((request) => State.update({ request, requestIsFetched: true }));\n}\n\nif (!state.proposalIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_proposal\",\n    { project_id: projectId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((proposal) => State.update({ proposal, proposalIsFetched: true }));\n}\n\nif (\n  !state.contributionIsFetched ||\n  !state.requestIsFetched ||\n  !state.proposalIsFetched\n) {\n  return <>Loading...</>;\n}\n\nconst active =\n  typeof state.contribution.status === \"string\" ||\n  !(\"Completed\" in state.contribution.status);\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 1rem;\n  align-self: stretch;\n  width: 100%;\n`;\n\nconst Main = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 0.625rem;\n  align-self: stretch;\n`;\n\nconst Bottom = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n  align-self: stretch;\n  flex-wrap: wrap;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 0.65rem;\n  align-self: stretch;\n`;\n\nconst Time = styled.div`\n  color: var(--gray-true-500, #737373);\n  font-family: Inter;\n  font-size: 0.75rem;\n  font-style: normal;\n  font-weight: 400;\n  line-height: normal;\n`;\n\nconst Title = styled.h3`\n  color: var(--ui-elements-dark, #11181c);\n  font-family: \"Mona Sans\";\n  font-size: 1rem;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 140%; /* 1.4rem */\n  cursor: pointer;\n\n  & > a {\n    color: inherit;\n\n    &:hover,\n    &:focus,\n    &:active {\n      text-decoration: none;\n    }\n  }\n`;\n\nconst Status = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  color: var(--success-500, #12b76a);\n  font-family: Inter;\n  font-size: 0.75rem;\n  font-style: normal;\n  font-weight: 500;\n  line-height: normal;\n\n  &.closed {\n    color: var(--error-500, #f43f5e);\n  }\n`;\n\nconst Description = styled.p`\n  color: var(--gray-900, #101828);\n  font-family: Inter;\n  font-size: 0.875rem;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.25rem; /* 142.857% */\n  letter-spacing: 0.00875rem;\n`;\n\nconst Detail = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  color: var(--ui-elements-gray, #7e868c);\n  font-family: Inter;\n  font-size: 0.75rem;\n  font-style: normal;\n  font-weight: 500;\n  line-height: normal;\n\n  & > a {\n    color: inherit;\n    display: flex;\n    align-items: center;\n    gap: 0.375rem;\n    cursor: pointer;\n\n    &:hover,\n    &:focus,\n    &:active {\n      text-decoration: none;\n    }\n  }\n`;\n\nreturn (\n  <Container>\n    <Main>\n      <Header>\n        <Time>{getDate(state.created_at)}</Time>\n        <Title>\n          <Link\n            href={`/${ownerId}/widget/Index?tab=contribution&projectId=${projectId}&vendorId=${vendorId}&cid=${cid}`}\n          >\n            {state.request.title}\n          </Link>\n        </Title>\n        <Status className={active ? \"open\" : \"closed\"}>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"7\"\n            height=\"7\"\n            viewBox=\"0 0 7 7\"\n            fill=\"none\"\n          >\n            <circle cx=\"3.5\" cy=\"3.5\" r=\"3.5\" fill=\"currentColor\" />\n          </svg>\n          {active ? \"Active\" : \"Completed\"}\n        </Status>\n      </Header>\n      <Description>{state.request.description}</Description>\n    </Main>\n    <Bottom>\n      <Detail>\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 18 18\"\n          fill=\"none\"\n        >\n          <path\n            d=\"M3 15.75L3 3M3 9.75H8.55C8.97004 9.75 9.18006 9.75 9.34049 9.66825C9.48161 9.59635 9.59635 9.48161 9.66825 9.34049C9.75 9.18006 9.75 8.97004 9.75 8.55V3.45C9.75 3.02996 9.75 2.81994 9.66825 2.65951C9.59635 2.51839 9.48161 2.40365 9.34049 2.33175C9.18006 2.25 8.97004 2.25 8.55 2.25H4.2C3.77996 2.25 3.56994 2.25 3.40951 2.33175C3.26839 2.40365 3.15365 2.51839 3.08175 2.65951C3 2.81994 3 3.02996 3 3.45V9.75ZM9.75 3.75H14.55C14.97 3.75 15.1801 3.75 15.3405 3.83175C15.4816 3.90365 15.5963 4.01839 15.6683 4.15951C15.75 4.31994 15.75 4.52996 15.75 4.95V10.05C15.75 10.47 15.75 10.6801 15.6683 10.8405C15.5963 10.9816 15.4816 11.0963 15.3405 11.1683C15.1801 11.25 14.97 11.25 14.55 11.25H10.95C10.53 11.25 10.3199 11.25 10.1595 11.1683C10.0184 11.0963 9.90365 10.9816 9.83175 10.8405C9.75 10.6801 9.75 10.47 9.75 10.05V3.75Z\"\n            stroke=\"currentColor\"\n            stroke-width=\"1.35\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          />\n        </svg>\n        {getDate(state.proposal.end_date)}\n      </Detail>\n      <Detail>\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 18 18\"\n          fill=\"none\"\n        >\n          <path\n            d=\"M4.5 8.25V11.25M13.5 6.75V9.75M12.75 3C14.5865 3 15.5799 3.28107 16.0741 3.49908C16.1399 3.52812 16.1728 3.54263 16.2678 3.63328C16.3247 3.68761 16.4287 3.84705 16.4554 3.92107C16.5 4.04455 16.5 4.11205 16.5 4.24706V12.3084C16.5 12.9899 16.5 13.3307 16.3978 13.5059C16.2938 13.6841 16.1936 13.7669 15.999 13.8354C15.8076 13.9027 15.4215 13.8285 14.6491 13.6801C14.1085 13.5762 13.4674 13.5 12.75 13.5C10.5 13.5 8.25 15 5.25 15C3.41347 15 2.42015 14.7189 1.92591 14.5009C1.86009 14.4719 1.82718 14.4574 1.7322 14.3667C1.67526 14.3124 1.57134 14.153 1.5446 14.0789C1.5 13.9554 1.5 13.8879 1.5 13.7529L1.5 5.69164C1.5 5.01006 1.5 4.66928 1.60221 4.49411C1.70618 4.31592 1.80644 4.23309 2.00104 4.16461C2.19235 4.09729 2.57853 4.17149 3.35087 4.31989C3.89146 4.42376 4.53261 4.5 5.25 4.5C7.5 4.5 9.75 3 12.75 3ZM10.875 9C10.875 10.0355 10.0355 10.875 9 10.875C7.96447 10.875 7.125 10.0355 7.125 9C7.125 7.96447 7.96447 7.125 9 7.125C10.0355 7.125 10.875 7.96447 10.875 9Z\"\n            stroke=\"currentColor\"\n            stroke-width=\"1.35\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          />\n        </svg>\n        {state.request.source === \"Credits\"\n          ? `${state.contribution.price} NHZN`\n          : `$${state.contribution.price}`}\n      </Detail>\n      <Detail>\n        <Link\n          href={`/${orgName}/widget/Index?tab=vendor&accountId=${vendorId}`}\n        >\n          <Widget\n            src={`${ownerId}/widget/Project.Icon`}\n            props={{ accountId: vendorId, size: \"1.875em\" }}\n          />\n          <Widget\n            src={`${ownerId}/widget/NameAndAccount`}\n            props={{\n              accountId: vendorId,\n              nameSize: \"0.875em\",\n            }}\n          />\n        </Link>\n      </Detail>\n    </Bottom>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Contribution.AdminCard", "fact_widget_deployments_id": "5287f242ca6cd822314fdb36dc0c7ea5", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 5}