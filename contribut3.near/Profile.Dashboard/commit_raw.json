{"tx_hash": "ECH418ymhDcCNpPAXji4R83bgrNJMN1xmF31q2nhWTf", "action_id_social": "FKPNH2GWh6zZwdC777p6pXHvua1dyav2mpFuH3av61Fe-0-widget", "block_id": 101029592, "block_timestamp": "2023-09-13T11:14:31.767Z", "signer_id": "contribut3.near", "widget_name": "Profile.Dashboard", "source_code": "const ownerId = \"contribut3.near\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  width: 100%;\n  gap: 1.61rem;\n`;\n\nconst Credits = styled.b`\n  display: flex;\n  padding: 0.4375rem 0.75rem;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  border-radius: 3.125rem;\n  border: 1px solid var(--ui-elements-light, #eceef0);\n  background: var(--secondary-secondary-pressed, #7269e1);\n  color: var(--ui-elements-white, #fff);\n  leading-trim: both;\n  text-edge: cap;\n  font-family: \"Mona Sans\";\n  font-size: 0.875rem;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 142%; /* 1.2425rem */\n  letter-spacing: 0.00875rem;\n`;\n\nconst createCard = ({ title, link, tooltipText, content }) => (\n  <Widget\n    src={`${ownerId}/widget/Profile.DashboardCard`}\n    props={{ title, link, tooltipText, content }}\n  />\n);\n\n/** @type {{ title: React.ReactNode; tooltipText: React.ReactNode; content: React.ReactNode; }} */\nconst cards = [\n  {\n    title: <h4>Profile progress</h4>,\n    tooltipText: \"Profile progress\",\n    content: <Widget src={`${ownerId}/widget/Profile.Checklist`} />,\n  },\n  {\n    title: (\n      <>\n        <h4>Credit balance</h4>\n        <Credits>{state.credits} NHZN</Credits>\n      </>\n    ),\n    tooltipText: \"Credit balance\",\n    content: <Widget src={`${ownerId}/widget/Profile.Credits`} />,\n  },\n  {\n    title: <h4>Inbox</h4>,\n    tooltipText: \"Inbox\",\n    content: <Widget src={`${ownerId}/widget/Profile.Inbox`} />,\n  },\n  {\n    title: <h4>Your requests</h4>,\n    tooltipText: \"Requests\",\n    content: <Widget src={`${ownerId}/widget/Profile.Requests`} />,\n    link:\n      state.requests > 0\n        ? {\n            text: \"View all\",\n            href: \"requests\",\n          }\n        : undefined,\n  },\n  {\n    title: <h4>Your contracts</h4>,\n    tooltipText: \"Contracts\",\n    content: <Widget src={`${ownerId}/widget/Profile.Contracts`} />,\n    link:\n      state.contracts > 0\n        ? {\n            text: \"View all\",\n            href: \"contracts\",\n          }\n        : undefined,\n  },\n];\n\nState.init({\n  requests: 0,\n  requestsIsFetched: false,\n  contracts: 0,\n  contractsIsFetched: false,\n  inbox: Social.index(\"inbox\", context.accountId, {\n    order: \"desc\",\n    subscribe: true,\n  }),\n  credits: 0,\n  creditsIsFetched: false,\n});\n\nif (!state.requestsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project_requests\",\n    { account_id: context.accountId },\n    \"final\",\n    false,\n  ).then((requests) => {\n    State.update({ requests: requests.length, requestsIsFetched: true });\n  });\n}\n\nif (!state.contractsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project_contributions\",\n    { account_id: context.accountId },\n    \"final\",\n    false,\n  ).then((contracts) => {\n    State.update({ contracts: contracts.length, contractsIsFetched: true });\n  });\n}\n\nif (!state.creditsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project\",\n    { account_id: context.accountId },\n    \"final\",\n    false,\n  ).then((project) => {\n    State.update({\n      credits: project.credit_balance ?? 0,\n      creditsIsFetched: true,\n    });\n  });\n}\n\nreturn <Container>{cards.map(createCard)}</Container>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Profile.Dashboard", "fact_widget_deployments_id": "2845afb3657ca815f707a1247ab71d55", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}