{"tx_hash": "Q5QraYsc3NZtukkGrX2RgLxp73sJwrULVFdjzen2gwk", "action_id_social": "8cxjVTEMAtLSd42GRkagpe56NVztnVUmpmmfktdxeY4H-0-widget", "block_id": 122371334, "block_timestamp": "2024-07-01T05:45:15.088Z", "signer_id": "bos.forum.potlock.near", "widget_name": "widget.components.molecule.Compose", "source_code": "const EmbeddCSS = `\n  .CodeMirror {\n   margin-inline:10px;\n   border-radius:5px;\n  }\n  .editor-toolbar {\n    border: none !important;\n  }\n`;\nconst Wrapper = styled.div`\n  .nav-link {\n    color: inherit !important;\n  }\n  .card-header {\n    padding-bottom: 0px !important;\n  }\n`;\nconst Compose = ({\n  data,\n  onChange,\n  autocompleteEnabled,\n  placeholder,\n  height,\n  embeddCSS,\n  showProposalIdAutoComplete,\n  onChangeKeyup,\n  handler,\n}) => {\n  State.init({\n    data: data,\n    selectedTab: \"editor\",\n    autoFocus: false,\n  });\n  useEffect(() => {\n    if (typeof onChange === \"function\") {\n      onChange(state.data);\n    }\n  }, [state.data]);\n  useEffect(() => {\n    // for clearing editor after txn approval/ showing draft state\n    if (data !== state.data || handler !== state.handler) {\n      State.update({ data: data, handler: handler });\n    }\n  }, [data, handler]);\n  return (\n    <Wrapper>\n      <div className=\"card\">\n        <div className=\"card-header\" style={{ position: \"relative\" }}>\n          <div>\n            <ul class=\"nav nav-tabs\">\n              <li class=\"nav-item\">\n                <button\n                  class={`nav-link ${\n                    state.selectedTab === \"editor\" ? \"active\" : \"\"\n                  }`}\n                  onClick={() =>\n                    State.update({ selectedTab: \"editor\", autoFocus: true })\n                  }\n                >\n                  Write\n                </button>\n              </li>\n              <li class=\"nav-item\">\n                <button\n                  class={`nav-link ${\n                    state.selectedTab === \"preview\" ? \"active\" : \"\"\n                  }`}\n                  onClick={() => State.update({ selectedTab: \"preview\" })}\n                >\n                  Preview\n                </button>\n              </li>\n            </ul>\n          </div>\n        </div>\n        {state.selectedTab === \"editor\" ? (\n          <>\n            <Widget\n              src={`bos.forum.potlock.near/widget/components.molecule.SimpleMDE`}\n              props={{\n                data: { handler: state.handler, content: state.data },\n                onChange: (content) => {\n                  State.update({ data: content, handler: \"update\" });\n                },\n                placeholder: placeholder,\n                height,\n                embeddCSS: embeddCSS || EmbeddCSS,\n                showAutoComplete: autocompleteEnabled,\n                showProposalIdAutoComplete: showProposalIdAutoComplete,\n                autoFocus: state.autoFocus,\n                onChangeKeyup: onChangeKeyup,\n              }}\n            />\n          </>\n        ) : (\n          <div className=\"card-body\">\n            <Widget\n              src={`devhub.near/widget/devhub.components.molecule.MarkdownViewer`}\n              props={{\n                text: state.data,\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </Wrapper>\n  );\n};\nreturn Compose(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.forum.potlock.near/widget/widget.components.molecule.Compose", "fact_widget_deployments_id": "7c863db02e7b8c279bf4186d48a61bc1", "inserted_timestamp": "2024-07-01T06:54:47.770Z", "modified_timestamp": "2024-07-01T06:54:47.770Z", "__row_index": 0}