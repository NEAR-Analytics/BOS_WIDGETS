{"tx_hash": "CV2Y31HzVMaeVdvaZWMpkWPxePEBF5BQLKdCi9iqCLRP", "action_id_social": "4ZSP6EzEmB5EePnAXPVw8zfqkd7D6esEgakuMyVJtzL6-0-widget", "block_id": 126818496, "block_timestamp": "2024-08-29T12:19:21.250Z", "signer_id": "bos.forum.potlock.near", "widget_name": "app", "source_code": "/**\n * This is the main entry point for the RFP application.\n * Page route gets passed in through params, along with all other page props.\n */\nconst { page, ...passProps } = props;\n// Import our modules\nconst { AppLayout } = VM.require(\n  `bos.forum.potlock.near/widget/components.template.AppLayout`\n);\nif (!AppLayout) {\n  return <p>Loading modules...</p>;\n}\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 72px 64px;\n  @media screen and (max-width: 768px) {\n    padding: 0;\n  }\n`;\nconst ProfileImg = styled.div`\n  width: 120px;\n  height: 120px;\n  background-color: #e9ecef;\n  border-radius: 50%;\n  position: relative;\n  margin: 0 auto;\n  overflow: hidden;\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n  input {\n    display: none;\n  }\n`;\nconst ProfileImgOverlay = styled.label`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: white;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  svg {\n    fill: #7b7b7b;\n    width: 20px;\n    height: 20px;\n  }\n`;\nconst AddMember = styled.div`\n  margin-top: 10px;\n  text-align: center;\n`;\nconst FormSection = styled.div`\n  margin-bottom: 40px;\n  label {\n    font-weight: 500;\n    color: #333;\n  }\n  textarea,\n  input,\n  select {\n    margin-top: 8px;\n    margin-bottom: 8px;\n  }\n`;\nconst Sidebar = styled.div`\n  padding: 20px;\n  border-radius: 8px;\n`;\nconst SidebarTitle = styled.h5`\n  font-size: 16px;\n  margin-bottom: 20px;\n  color: #333;\n`;\nconst ConsentSection = styled.div`\n  margin-top: 30px;\n  .form-check-label {\n    font-size: 14px;\n  }\n`;\nconst ButtonPrimary = styled.button`\n  padding: 10px 20px;\n  border-radius: 30px;\n  font-size: 16px;\n  background-color: #007bff;\n  border: none;\n  color: white;\n`;\nconst ButtonSecondary = styled.button`\n  padding: 10px 20px;\n  border-radius: 30px;\n  font-size: 16px;\n  color: #007bff;\n  border: 1px solid #007bff;\n  background-color: white;\n`;\nconst DescriptionField = styled.textarea`\n  min-height: 250px;\n`;\nState.init({\n  projectName: \"\",\n  category: \"AI-PGF\",\n  publicGoodReason: \"\",\n  description: \"\",\n  author: context.accountId,\n  walletAddress: \"\",\n  repo1: \"\",\n  repo2: \"\",\n  website: \"\",\n  twitter: \"\",\n  telegram: \"\",\n  github: \"\",\n  termsConditions: false,\n  codeConduct: false,\n});\nconst handleInputChange = (field, value) => {\n  State.update({ [field]: value });\n};\nconst handleSubmit = () => {\n  if (!state.termsConditions || !state.codeConduct) {\n    alert(\"Please agree to the terms and conditions and code of conduct.\");\n    return;\n  }\n  const body = {\n    proposal_body_version: \"V1\",\n    linked_rfp: linkedRfp?.value,\n    category: \"AI PGF\",\n    name: state.projectName,\n    description: description,\n    summary: state.publicGoodReason,\n    linked_proposals: [],\n    requested_sponsorship_usd_amount: \"0\",\n    requested_sponsorship_paid_in_currency: \"USDC\",\n    receiver_account: state.walletAddress,\n    requested_sponsor: \"impact.sputnik-dao.near\",\n    timeline: { status: \"DRAFT\" },\n  };\n  const args = {\n    labels: [],\n    body: body,\n  };\n  Near.call([\n    {\n      contractName: \"forum.potlock.near\",\n      methodName: \"add_proposal\",\n      args: args,\n      gas: 270000000000000,\n      deposit: \"100000000000000000000000\",\n    },\n  ]);\n};\n// CSS styles to be used across the app.\n// Define fonts here, as well as any other global styles.\nconst Theme = styled.div`\n  a {\n    color: inherit;\n  }\n  background-color: white;\n  .attractable {\n    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\n    transition: box-shadow 0.6s;\n    &:hover {\n      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n    }\n  }\n`;\nif (!page) {\n  // If no page is specified, we default to the feed page TEMP\n  page = \"proposals\";\n}\n// This is our navigation, rendering the page based on the page parameter\nfunction Page() {\n  let registrants = Near.view(\n    `lists.potlock.near`,\n    \"get_registrations_for_list\",\n    {\n      list_id: 1,\n    }\n  );\n  const potlockRegistrants =\n    registrants && registrants.map((item) => item.registrant_id);\n  const routes = page.split(\".\");\n  switch (routes[0]) {\n    case \"rfps\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.rfps.Feed`}\n          props={passProps}\n        />\n      );\n    }\n    case \"rfp\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.rfps.Rfp`}\n          props={passProps}\n        />\n      );\n    }\n    case \"create-rfp\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.rfps.Editor`}\n          props={passProps}\n        />\n      );\n    }\n    case \"create-proposal\": {\n      return (\n        <>\n          {context.accountId &&\n          !potlockRegistrants?.includes(context?.accountId) ? (\n            <Widget\n              src={`old.potlock.near/widget/Project.CreateForm`}\n              props={{ ...passProps }}\n            />\n          ) : (\n            <Widget\n              src={`bos.forum.potlock.near/widget/components.proposals.Editor`}\n              props={{ ...passProps }}\n            />\n          )}\n        </>\n      );\n    }\n    case \"ideas\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.proposals.Feed`}\n          props={passProps}\n        />\n      );\n    }\n    case \"proposals\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.proposals.Feed`}\n          props={passProps}\n        />\n      );\n    }\n    case \"proposal\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.proposals.Proposal`}\n          props={passProps}\n        />\n      );\n    }\n    case \"admin\": {\n      return (\n        <Widget\n          src={`bos.forum.potlock.near/widget/components.pages.admin`}\n          props={passProps}\n        />\n      );\n    }\n    default: {\n      // TODO: 404 page\n      return <p>404</p>;\n    }\n  }\n}\nreturn (\n  <Theme>\n    <AppLayout page={page}>\n      <Page />\n    </AppLayout>\n  </Theme>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.forum.potlock.near/widget/app", "fact_widget_deployments_id": "e52b2cf3973cc0ee2127c2362843c1ab", "inserted_timestamp": "2024-08-29T13:55:18.255Z", "modified_timestamp": "2024-08-31T19:26:00.638Z", "__row_index": 0}