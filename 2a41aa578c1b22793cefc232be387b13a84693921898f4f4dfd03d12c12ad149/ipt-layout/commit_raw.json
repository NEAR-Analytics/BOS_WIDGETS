{"tx_hash": "Fn6AKkULfxgHTFTbtC9yGNt1tEgKKLLkhw3P5kxvTgRb", "action_id_social": "6c91a44niV89LHXmf7hEZjYdo9Bpfm16uf4qrBFUujbS-0-widget", "block_id": 99737676, "block_timestamp": "2023-08-26T23:43:23.371Z", "signer_id": "2a41aa578c1b22793cefc232be387b13a84693921898f4f4dfd03d12c12ad149", "widget_name": "ipt-layout", "source_code": "const { contractAddress, signer } = props;\n\nif (!contractAddress) {\n  return \"Contract address is missing\";\n}\n\nif (!signer) {\n  return \"Not connected!\";\n}\n\nconst nearAccount =\n  \"2a41aa578c1b22793cefc232be387b13a84693921898f4f4dfd03d12c12ad149\";\nconst createGAWidgetSrc = `${nearAccount}/widget/ipt-giveaway`;\nconst listGAWidgetSrc = `${nearAccount}/widget/ipt-giveaway-list`;\n\nState.init({\n  activeLink: \"dashboard\",\n  address: null,\n  balance: null,\n});\n\nconst updateState = (value, field) => {\n  State.update({\n    ...state,\n    [field]: value,\n  });\n};\n\n// CSS\nconst Header = styled.div`\n  padding: 18px 15px;\n  background: #151718;\n\n  display: flex;\n  justify-content: end;\n\n  .web3-connect {\n    font-size: 13px;\n    font-weight: bold;\n\n    display: grid;\n    place-content: center;\n\n    background: #262626;\n    border-radius: 5px;\n    border: 0;\n\n    color: white;\n    transition: all 300ms ease-in-out;\n    &:hover {\n      background: #262626;\n      opacity: 0.5;\n    }\n    &:active {\n      background: #262626 !important;\n    }\n  }\n`;\n\nconst SideBar = styled.div`\n    display: flex!important;\n    flex-direction: column!important;\n    flex-shrink: 0!important;\n    padding: 1rem!important;\n--bs-text-opacity: 1;\n    color: rgba(var(--bs-white-rgb),var(--bs-text-opacity))!important;\n    --bs-bg-opacity: 1;\n    background-color: rgba(var(--bs-dark-rgb),var(--bs-bg-opacity))!important;\n`;\n\nconst Layout = styled.div`\n    display: flex;\n    flex-wrap: nowrap;\n    height: 100vh;\n    height: -webkit-fill-available;\n    max-height: 100vh;\n    overflow-x: auto;\n    overflow-y: hidden;\n`;\n\n// position: fixed;\n// top: 0;\n// right: 0;\n// left: 0;\n// bottom: 0;\n\nconst ContentWrapper = styled.div`\n    flex-grow: 1;\n`;\n\nconst GapDivider = styled.div`\n    flex-shrink: 0;\n    width: 0;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, .1);\n    box-shadow: inset 0 0.5em 1.5em rgba(0, 0, 0, .1), inset 0 0.125em 0.5em rg\n`;\n\n// Define\nconst menuList = [\n  {\n    id: \"dashboard\",\n    icon: \"bi-house-fill\",\n    label: \"Dashboard\",\n  },\n  {\n    id: \"create-giveaway\",\n    icon: \"bi-gift-fill\",\n    label: \"Create Giveaway\",\n  },\n  {\n    id: \"list-giveaways\",\n    icon: \"bi-list-ul\",\n    label: \"List Giveaway\",\n  },\n];\n\nconsole.log(\"signer props\", JSON.parse(signer));\n\nif (Ethers.provider()) {\n  const signer = Ethers.provider().getSigner();\n\n  console.log(\"signer info\", signer);\n\n  signer.getAddress().then((address) => {\n    updateState(address, \"address\");\n\n    Ethers.provider()\n      .getBalance(address)\n      .then((balance) => {\n        updateState(balance.toString(), \"balance\");\n      });\n  });\n}\n\nconst isLoggedIn = () => {\n  return !!state.address;\n};\n\nconst renderHeader = () => {\n  return (\n    <Header>\n      {!!state.balance && (\n        <div class=\"me-3\">\n          <span class=\"badge h-100 text-bg-dark d-flex align-items-center\">\n            <i class=\"bi bi-coin me-2\" /> {state.balance}\n          </span>\n        </div>\n      )}\n      {!!state.address && (\n        <div class=\"me-3\">\n          <span class=\"badge h-100 text-bg-dark d-flex align-items-center\">\n            <i class=\"bi bi-wallet2 me-2\" /> {state.address}\n          </span>\n        </div>\n      )}\n      <Web3Connect\n        className=\"web3-connect\"\n        connectLabel=\"Connect Wallet\"\n        onTriggerChange={() => {\n          console.log(\"Connect change\");\n        }}\n      />\n    </Header>\n  );\n};\n\nconst renderSidebar = () => {\n  return (\n    <SideBar>\n      <div class=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none\">\n        <span class=\"fs-4\">Impetus</span>\n      </div>\n      <hr />\n      <ul class=\"nav nav-pills flex-column mb-auto\">\n        {menuList.map((menu) => (\n          <li class=\"nav-item mb-2\" key={menu.id}>\n            <button\n              class={`nav-link text-start w-100 ${\n                state.activeLink === menu.id ? \"active\" : \"text-white\"\n              }`}\n              aria-current=\"page\"\n              onClick={() => updateState(menu.id, \"activeLink\")}\n            >\n              <i class={`bi ${menu.icon}`} /> {menu.label}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </SideBar>\n  );\n};\n\nconst renderDashboard = () => {\n  return (\n    <div class=\"px-4 py-5 my-5 text-center\">\n      <h1 class=\"display-5 fw-bold\">Impetus Network</h1>\n      <div class=\"col-lg-6 mx-auto\">\n        <p class=\"lead mb-4\">\n          Quickly design and customize responsive mobile-first sites with\n          Bootstrap, the world\u2019s most popular front-end open source toolkit,\n          featuring Sass variables and mixins, responsive grid system, extensive\n          prebuilt components, and powerful JavaScript plugins.\n        </p>\n        <div class=\"justify-content-sm-center\">\n          <div class=\"input-group mb-3\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"Wallet address\"\n            />\n            <button class=\"btn btn-primary\" type=\"button\" id=\"claimTokenBtn\">\n              Claim\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst renderContent = () => {\n  return (\n    <ContentWrapper>\n      {renderHeader()}\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-12 pt-4\">\n            {state.activeLink === \"dashboard\" && renderDashboard()}\n\n            {state.activeLink === \"create-giveaway\" && (\n              <>\n                {isLoggedIn() ? (\n                  <Widget\n                    src={createGAWidgetSrc}\n                    props={{\n                      contractAddress:\n                        \"0x0000000000000000000000000000000000000805\",\n                      chainIdIPT: 322,\n                      rpcUrl: \"https://testnet.impetus.network\",\n                    }}\n                  />\n                ) : (\n                  \"Please login with your wallet\"\n                )}\n              </>\n            )}\n\n            {state.activeLink === \"list-giveaways\" && (\n              <>\n                {isLoggedIn() ? (\n                  <Widget src={listGAWidgetSrc} />\n                ) : (\n                  \"Please login with your wallet\"\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </ContentWrapper>\n  );\n};\n\nreturn (\n  <Layout>\n    {renderSidebar()}\n    <GapDivider />\n    {renderContent()}\n  </Layout>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/2a41aa578c1b22793cefc232be387b13a84693921898f4f4dfd03d12c12ad149/widget/ipt-layout", "fact_widget_deployments_id": "8fdf4231a0e4d18e2f5e73a7ed4e8697", "inserted_timestamp": "2023-08-27T01:41:29.224Z", "modified_timestamp": "2023-08-27T01:41:29.224Z", "__row_index": 7}