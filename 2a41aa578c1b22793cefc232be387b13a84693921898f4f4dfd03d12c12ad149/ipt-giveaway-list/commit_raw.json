{"tx_hash": "9njoS85TB78zkT3U5ehum5iGwdULxcS925cEGVaromzr", "action_id_social": "623TSQoXJK3d8dB1WoU1FMZLan8b9SiUXvAzCUspMQG8-0-widget", "block_id": 99717236, "block_timestamp": "2023-08-26T17:24:37.458Z", "signer_id": "2a41aa578c1b22793cefc232be387b13a84693921898f4f4dfd03d12c12ad149", "widget_name": "ipt-giveaway-list", "source_code": null, "metadata": null, "branch": {"draft": {"": "const mockData = [\n  {\n    id: \"1\",\n    name: \"Sunil Joshi\",\n    startTime: \"Fri Aug 18 2023 17:47:18 GMT+0700 (Indochina Time)\",\n    endTime: \"Fri Aug 18 2023 17:48:18 GMT+0700 (Indochina Time)\",\n    assetType: \"TOKEN\",\n    rewardToken: \"BTC\",\n    rewardTokenAmount: 1000,\n  },\n  {\n    id: \"2\",\n    name: \"Sunil Joshi\",\n    startTime: \"Fri Aug 18 2023 17:47:18 GMT+0700 (Indochina Time)\",\n    endTime: \"Fri Aug 18 2023 17:48:18 GMT+0700 (Indochina Time)\",\n    assetType: \"NFT\",\n    nftID: \"2345\",\n  },\n  {\n    id: \"3\",\n    name: \"Sunil Joshi\",\n    startTime: \"Fri Aug 18 2023 17:47:18 GMT+0700 (Indochina Time)\",\n    endTime: \"Fri Aug 18 2023 17:48:18 GMT+0700 (Indochina Time)\",\n    assetType: \"TOKEN\",\n    rewardToken: \"ETH\",\n    rewardTokenAmount: 100000,\n  },\n  {\n    id: \"4\",\n    name: \"Sunil Joshi\",\n    startTime: \"Fri Aug 18 2023 17:47:18 GMT+0700 (Indochina Time)\",\n    endTime: \"Fri Aug 18 2023 17:48:18 GMT+0700 (Indochina Time)\",\n    assetType: \"TOKEN\",\n    rewardToken: \"IPT\",\n    rewardTokenAmount: 1000000000,\n  },\n  {\n    id: \"5\",\n    name: \"Sunil Joshi\",\n    startTime: \"Mon Aug 28 2023 17:47:18 GMT+0700 (Indochina Time)\",\n    endTime: \"Mon Aug 28 2023 17:48:18 GMT+0700 (Indochina Time)\",\n    assetType: \"NFT\",\n    nftID: \"12345235\",\n  },\n];\n\nState.init({\n  listData: [],\n});\n\nState.update({\n  ...state,\n  listData: mockData,\n});\n\nconst isAfter = (date, dateToCompare) => {\n  const date1 = date.getTime();\n  const date2 = dateToCompare.getTime();\n\n  return date2 < date1;\n};\n\nconst data = () => {\n  asyncFetch(\"https://graphql.impetus.network/graphql\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      query: `{\n  giveAwayCreateds(limit: 10, orderBy: index_DESC) {\n    start\n    end\n    giveAwayParticipateds {\n      who\n    }\n  }\n}`,\n    }),\n  }).then((x) => {\n    console.log(x);\n    State.update({\n      ...state,\n      listData: x,\n    });\n  });\n};\ndata();\n\nconst isBefore = (date, dateToCompare) => {\n  const date1 = date.getTime();\n  const date2 = dateToCompare.getTime();\n\n  return date2 > date1;\n};\n\nconst isEnded = (endTime) => {\n  return isAfter(new Date(), new Date(endTime));\n};\n\nconst isHappening = (startTime, endTime) => {\n  return (\n    isAfter(new Date(), new Date(startTime)) &&\n    isBefore(new Date(), new Date(endTime))\n  );\n};\n\nconst isNotRunning = (startTime) => {\n  return isBefore(new Date(), new Date(startTime));\n};\n\nconst renderBadge = (startTime, endTime) => {\n  let badgeLabel = \"\";\n  let badgeColor = \"\";\n\n  if (isHappening(startTime, endTime)) {\n    badgeLabel = \"GA is running\";\n    badgeColor = \"text-bg-success\";\n  } else if (isNotRunning(startTime)) {\n    badgeLabel = \"GA not started\";\n    badgeColor = \"text-bg-primary\";\n  } else if (isEnded(endTime)) {\n    badgeLabel = \"GA has ended\";\n    badgeColor = \"text-bg-secondary\";\n  }\n\n  return (\n    <span class={`badge rounded-pill mt-3 ${badgeColor}`}>{badgeLabel}</span>\n  );\n};\n\nconst giveAwayAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"uint32\",\n        name: \"index\",\n        type: \"uint32\",\n      },\n    ],\n    name: \"claimReward\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"string\",\n        name: \"name\",\n        type: \"string\",\n      },\n      {\n        internalType: \"uint32\",\n        name: \"startBlock\",\n        type: \"uint32\",\n      },\n      {\n        internalType: \"uint32\",\n        name: \"endBlock\",\n        type: \"uint32\",\n      },\n      {\n        internalType: \"uint8\",\n        name: \"kycStatus\",\n        type: \"uint8\",\n      },\n      {\n        internalType: \"uint8\",\n        name: \"randomType\",\n        type: \"uint8\",\n      },\n      {\n        internalType: \"uint8\",\n        name: \"assetType\",\n        type: \"uint8\",\n      },\n      {\n        internalType: \"uint32\",\n        name: \"assetId\",\n        type: \"uint32\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"amount\",\n        type: \"uint256\",\n      },\n      {\n        internalType: \"uint32\",\n        name: \"maxJoin\",\n        type: \"uint32\",\n      },\n    ],\n    name: \"createGiveaway\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint32\",\n        name: \"index\",\n        type: \"uint32\",\n      },\n    ],\n    name: \"participate\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\n\nconst participate = () => {\n  const giveaway = new ethers.Contract(\n    contractAddress,\n    giveAwayAbi,\n    Ethers.provider().getSigner()\n  );\n\n  giveaway\n    .participate(\n      1 // giveaway index\n    )\n    .then((transactionHash) => {\n      console.log(\"transactionHash is \" + transactionHash);\n    });\n};\n\nconst renderListItem = ({\n  id,\n  name,\n  startTime,\n  endTime,\n  assetType,\n  rewardToken,\n  rewardTokenAmount,\n  nftID,\n}) => {\n  return (\n    <div class=\"card h-100\">\n      <div class=\"card-header\">\n        <h5 class=\"card-title mt-2 mb-3\">{name}</h5>\n        <h6 class=\"card-subtitle\">\n          <small>Reward type: {assetType}</small>\n        </h6>\n        {renderBadge(startTime, endTime)}\n      </div>\n      <div class=\"card-body\">\n        <div class=\"d-flex flex-column flex-md-row w-100 justify-content-between align-items-center\">\n          <div class=\"fw-semibold\">\n            <small>{assetType === \"TOKEN\" ? \"Reward Amount\" : \"NFT id\"}</small>\n          </div>\n          <div class=\"text-end\">\n            <small>\n              {assetType === \"TOKEN\"\n                ? `${rewardTokenAmount} ${rewardToken}`\n                : nftID}\n            </small>\n          </div>\n        </div>\n        <hr class=\"my-2\" />\n        <div class=\"d-flex flex-column flex-md-row w-100 justify-content-between align-items-center card-text\">\n          <div class=\"fw-semibold\">\n            <small>Start time</small>\n          </div>\n          <div class=\"text-end\">\n            <small>\n              {new Date(startTime).toLocaleDateString()}\n              <br />\n              {new Date(startTime).toLocaleTimeString()}\n            </small>\n          </div>\n        </div>\n        <hr class=\"my-2\" />\n        <div class=\"d-flex flex-column flex-md-row w-100 justify-content-between align-items-center card-text\">\n          <div class=\"fw-semibold\">\n            <small>End time</small>\n          </div>\n          <div class=\"text-end\">\n            <small>\n              {new Date(endTime).toLocaleDateString()}\n              <br />\n              {new Date(endTime).toLocaleTimeString()}\n            </small>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-footer text-center\">\n        <button\n          class={`btn btn-${isEnded(endTime) ? \"secondary\" : \"success\"} w-100`}\n          disabled={isEnded(endTime)}\n        >\n          {isEnded(endTime) ? \"Ended\" : \"Join Giveaway\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nreturn (\n  <div class=\"container\">\n    <div class=\"row\">\n      {state.listData.map((item) => (\n        <div key={item.id} class=\"col-xs-12 col-sm-6 col-md-4 mb-4\">\n          {renderListItem(item)}\n        </div>\n      ))}\n    </div>\n  </div>\n);\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/2a41aa578c1b22793cefc232be387b13a84693921898f4f4dfd03d12c12ad149/widget/ipt-giveaway-list", "fact_widget_deployments_id": "050f1f7602ada7a6d56cebffc8cebede", "inserted_timestamp": "2023-08-26T19:23:14.563Z", "modified_timestamp": "2023-08-26T19:23:14.563Z", "__row_index": 12}