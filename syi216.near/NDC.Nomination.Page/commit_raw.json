{"tx_hash": "5ZAsDgCzdi9fWBoSQHxf9NLnzp9KoY1pu1ijaoLF8vvT", "action_id_social": "F4f1QVV4mi15SybLW8ev7c4MmMU4BQf5kdskZ5tU7wvT-0-widget", "block_id": 95337958, "block_timestamp": "2023-06-29T23:34:26.759Z", "signer_id": "syi216.near", "widget_name": "NDC.Nomination.Page", "source_code": "// TODO: Should be grabbed from contract side\nconst contractProps = {\n  houses: [\n    {\n      id: 2,\n      typ: \"CouncileOfAdvisors\",\n      ref_link: \"example.com\",\n      start: 1689820065441,\n      end: 1690820065441,\n      quorum: 100,\n      voters_num: 150,\n      seats: 10,\n      result: [],\n    },\n    {\n      id: 3,\n      typ: \"HouseOfMerit\",\n      title: \"House Of Merit\",\n      ref_link: \"example.com\",\n      start: 1685820065441,\n      end: 1696820065441,\n      quorum: 100,\n      voters_num: 150,\n      seats: 10,\n      result: [\n        [\"zomland.near\", 150],\n        [\"asfsdfsfdfddfsdfdfsdfdf.near\", 150],\n        [\"blabla.near\", 10],\n        [\"rubycop.near\", 50],\n      ],\n    },\n    {\n      id: 4,\n      typ: \"TransparancyCommision\",\n      ref_link: \"example.com\",\n      start: 1655820065441,\n      end: 165820065441,\n      quorum: 100,\n      voters_num: 150,\n      seats: 10,\n      result: [],\n    },\n  ],\n};\n\nconst { houses } = contractProps;\n\nconsole.log(houses);\nconst electionContract = \"elections-v2.gwg.testnet\";\nconst registryContract = \"registry-unstable.i-am-human.testnet\";\nconst ndcOrganization = \"test\";\n\n// TODO: Should be grabbed from indexer\nconst humanVoted = 800;\nconst totalHumal = 1000;\n\nconst myVotes = [\n  { candidateId: \"zomland.near\", time: 1686820065441, typ: \"House Of Merit\" },\n  {\n    candidateId: \"rubycop.near\",\n    time: 1686820065441,\n    typ: \"Councile Of Advisors\",\n  },\n  {\n    candidateId: \"blabla.near\",\n    time: 1686820065441,\n    typ: \"Transparancy Commision\",\n  },\n];\n\nconst widgets = {\n  header: \"syi216.near/widget/NDC.Nomination.Header\",\n  houses: \"rubycop.near/widget/NDC.Elections.Houses\",\n  candidates: \"rubycop.near/widget/NDC.Elections.Candidates\",\n  statistic: \"rubycop.near/widget/NDC.Elections.Statistic\",\n  activities: \"rubycop.near/widget/NDC.Elections.Activities\",\n};\n\nState.init({\n  selectedHouse: houses[0].id,\n  start: true,\n  house: \"CouncilOfAdvisors\",\n  nominations: [],\n});\nState.init({});\n//\n\nfunction handleNominations(data) {\n  State.update({ nominations: data });\n}\nfunction testPikespeak() {\n  asyncFetch(\n    `https://api.pikespeak.ai/nominations/house-nominations?house=${state.house}`,\n    {\n      headers: {\n        \"x-api-key\": \"36f2b87a-7ee6-40d8-80b9-5e68e587a5b5\",\n      },\n    }\n  ).then((res) => {\n    console.log(res.body);\n    State.update({ nominations: res.body });\n    let info = Social.getr(\"syi216.near/profile\");\n    console.log(info);\n  });\n}\n\nif (state.start) {\n  testPikespeak(\"\");\n  State.update({\n    start: false,\n  });\n}\n\nconst handleSelect = (item) => {\n  switch (item.id) {\n    case 2:\n      console.log(\"CouncilOfAdvisors\");\n      State.update({ house: \"CouncilOfAdvisors\" });\n      testPikespeak(state.house);\n      break;\n    case 3:\n      console.log(\"HouseOfMerit\");\n      State.update({ house: \"HouseOfMerit\" });\n      testPikespeak(state.house);\n      break;\n    case 4:\n      State.update({ house: \"TransparencyCommission\" });\n      testPikespeak(state.house);\n      console.log(\"TransparencyCommission\");\n      break;\n  }\n  State.update({ selectedHouse: item.id });\n};\n\nconst Container = styled.div`\n  padding: 30px 0;\n`;\n\nconst ActivityContainer = styled.div`\n  overflow-y: scroll;\n`;\n\nconst Left = styled.div`\n  padding: 20px;\n  background: #F8F8F9;\n  border-radius: 8px;\n`;\n\nconst Center = styled.div`\n`;\n\nconst Right = styled.div`\n  padding: 20px;\n  margin-bottom: 20px;\n  background: #F8F8F9;\n  border-radius: 8px;\n`;\n\nconst H5 = styled.h5`\n  margin-bottom: 20px;\n`;\n\nconst Toolbar = styled.div`\nmargin: 32px 0 0 0;\ndisplay: flex;\nwidth: 66%;\nalign-items: flex-start;\ngap: 20px;\n`;\n\nconst FilterBar = styled.div`\ndisplay: flex;\npadding: 12px 16px;\nalign-items: center;\ngap: 8px;\nflex: 1 0 0;\nborder-radius: 8px;\nbackground: #F8F8F9;\n`;\n\nconst SearchIcon = styled.img`\nwidth: 14px;\nheight: 14px;\n`;\n\nconst LabelFile = styled.div`\ndisplay: flex;\npadding: 12px;\nalign-items: flex-start;\ngap: 12px;\nflex: 1 0 0;\nborder-radius: 8px;\nborder: 1px solid #D0D6D9;\nbackground: #FFF;\n`;\n\nconst InputSearch = styled.input`\ncolor: #828688;\nfont-size: 12px;\nwidth: 100%;\nfont-family: Avenir;\nfont-weight: 500;\nline-height: 120%;\nborder: 0px;\n`;\n\nreturn (\n  <div>\n    {contractProps.houses.map((group) => (\n      <>\n        {group.id === state.selectedHouse && (\n          <Widget\n            key={i}\n            src={widgets.header}\n            props={{\n              startTime: group.start,\n              endTime: group.end,\n              type: \"Nomination\",\n            }}\n          />\n        )}\n      </>\n    ))}\n    <Toolbar>\n      <FilterBar>\n        <LabelFile>\n          <SearchIcon\n            src=\"https://apricot-straight-eagle-592.mypinata.cloud/ipfs/QmUgE9Cgge5VRgQB1VYxMaAjJWgzmXUzMcPSTwQ8ZfLJqz?_gl=1*xfjfsk*_ga*MzkyOTE0Mjc4LjE2ODY4NjgxODc.*_ga_5RMPXG14TE*MTY4NzkxMTcwOS41LjAuMTY4NzkxMTcxNi41My4wLjA.\"\n            alt=\"pic\"\n          ></SearchIcon>\n          <InputSearch placeholder=\"Search by candidate name and affiliation\"></InputSearch>\n        </LabelFile>\n      </FilterBar>\n    </Toolbar>\n    <Container className=\"d-flex row\">\n      <Left className=\"col-lg\">\n        <H5>Houses</H5>\n        <Widget\n          src={widgets.houses}\n          props={{\n            selectedHouse: state.selectedHouse,\n            houses: houses,\n            handleSelect: (item) => handleSelect(item),\n          }}\n        />\n      </Left>\n      <Center className=\"col-lg-8 p-2 p-md-3 d-flex flex-row flex-wrap justify-content-center gap-4\">\n        {state.nominations.map((data) => {\n          return <Widget src={\"syi216.near/widget/NDC.nomination.card\"} />;\n        })}\n      </Center>\n    </Container>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/syi216.near/widget/NDC.Nomination.Page", "fact_widget_deployments_id": "ff98da95c8a321bd28e375f5feac0553", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 126}