{"tx_hash": "Pqrby3AhE9eQwy2o2nTyGz3fH2dPtfPraqvKfWLgCfM", "action_id_social": "949NZMoF9FYrsrV8WJzXs5hqtVboYkiGoSVhTJ9DV1kN-0-widget", "block_id": 126930781, "block_timestamp": "2024-08-30T23:53:38.898Z", "signer_id": "syi216.near", "widget_name": "EjemploContratoGit", "source_code": "//We declare the states of the actions and information of the git repository\r\nconst [account, setAccount] = useState(undefined);\r\nconst [gitData, setGitData] = useState(undefined);\r\nconst [activeAction, setActiveAction] = useState(\"start\");\r\nconst [gitContract, setGitContract] = useState(\"\");\r\nconst [isGitContract, setIsGitContract] = useState(false);\r\nconst [isCollab, setIsCollab] = useState(false);\r\nconst [inputData, setInputData] = useState(\"\");\r\nconst [branches, setBranches] = useState([]);\r\nconst [collaborators, setCollaborators] = useState([]);\r\nconst [branchSelect, setBranchSelect] = useState(undefined);\r\nconst [collabSelect, setCollabSelect] = useState(undefined);\r\nconst [owner, setOwner] = useState(\"\");\r\nconst [isExpanded, setIsExpanded] = useState(\"\");\r\n\r\nconst toggleIsExpanded = (id) => {\r\n  setIsExpanded(isExpanded == id ? \"\" : id);\r\n};\r\n\r\nconst ownerCheck = (data, account) => {\r\n  setIsCollab(data.includes(account));\r\n};\r\n\r\n//We define the Git Repository contract metadata\r\nconst contractData =\r\n  \"000200010000000000010500000001090000000000000000010c000000b11554000850646563656e7472616c697a65645f6769745f696f3c496e69745265706f50726f6772616d00000801146f776e657204011c4163746f7249640001106e616d65100118537472696e67000004082c677072696d6974697665731c4163746f724964000004000801205b75383b2033325d000008000003200000000c000c0000050300100000050200140850646563656e7472616c697a65645f6769745f696f485265706f416374696f6e526571756573747300011c1852656e616d650400100118537472696e67000000304372656174654272616e63680400100118537472696e670001003052656e616d654272616e6368040018014452656e616d654272616e6368496e7075740002003044656c6574654272616e636804001c014444656c6574654272616e6368496e7075740003001050757368040020012450757368496e7075740004003c416464436f6c6c61626f7261746f72040004011c4163746f7249640005004844656c657465436f6c6c61626f7261746f72040004011c4163746f72496400060000180850646563656e7472616c697a65645f6769745f696f4452656e616d654272616e6368496e70757400000801086964100118537472696e670001106e616d65100118537472696e6700001c0850646563656e7472616c697a65645f6769745f696f4444656c6574654272616e6368496e70757400000401246272616e63685f6964100118537472696e670000200850646563656e7472616c697a65645f6769745f696f2450757368496e70757400000801246272616e63685f6964100118537472696e6700011068617368100118537472696e670000240850646563656e7472616c697a65645f6769745f696f4c5265706f416374696f6e526573706f6e73657300011c1852656e616d6504010c6d7367100118537472696e67000000304372656174654272616e636804010c6d7367100118537472696e670001003052656e616d654272616e636804010c6d7367100118537472696e670002003044656c6574654272616e636804010c6d7367100118537472696e67000300105075736804010c6d7367280118436f6d6d69740004003c416464436f6c6c61626f7261746f7204010c6d7367100118537472696e670005004844656c657465436f6c6c61626f7261746f7204010c6d7367100118537472696e6700060000280850646563656e7472616c697a65645f6769745f696f18436f6d6d697400001001086964100118537472696e670001146f776e657204011c4163746f72496400011068617368100118537472696e67000128637265617465645f61742c010c75363400002c0000050600300850646563656e7472616c697a65645f6769745f696f1c50726f6772616d00001401146f776e657204011c4163746f7249640001106e616d65100118537472696e6700013c757365725f70726f6772616d5f696404011c4163746f724964000130636f6c6c61626f7261746f7234016842547265654d61703c4163746f7249642c204163746f7249643e0001206272616e6368657340016042547265654d61703c537472696e672c204272616e63683e000034042042547265654d617008044b01040456010400040038000000380000023c003c0000040804040040042042547265654d617008044b0110045601440004004c000000440850646563656e7472616c697a65645f6769745f696f184272616e636800001801086964100118537472696e670001146f776e657204011c4163746f7249640001106e616d65100118537472696e6700011c636f6d6d69747348012c5665633c436f6d6d69743e000128637265617465645f61742c010c753634000128757064617465645f61742c010c75363400004800000228004c00000250005000000408104400\";\r\n\r\n//The HTML elements with styles that will be used in the component are declared\r\nconst App = styled.div`\r\n  --margin-app: clamp(16px, 4vw, 24px);\r\n  --h-footer: 60px;\r\n  --bg-card: rgb(25, 25, 25, .9);\r\n  --primary: #0fffc7;\r\n  --gradient: linear-gradient(to right, #22463d, #00f0b8);\r\n\r\n  display: grid;\r\n  place-items: center;\r\n  place-content: center;\r\n  min-height: calc(100dvh - var(--h-footer));\r\n  background: linear-gradient(to top right, #fff, #f5f5f7);\r\n\r\n  .wrapper {\r\n    background: var(--bg-card);\r\n    border-radius: .3rem;\r\n    padding: 40px 30px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-width: 500px;\r\n\r\n    span {\r\n      color: #fff\r\n    }\r\n  }\r\n\r\n  ::-moz-selection { /* Code for Firefox */\r\n    background: #ccf0e7;\r\n  }\r\n  \r\n  ::selection {\r\n    background: #ccf0e7;\r\n  }\r\n\r\n  .space-between {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n`,\r\n  Input = styled.div`\r\n    display: flex;\r\n    gap: 10px;\r\n    border-radius: .75rem;\r\n    padding: 5px;\r\n    background: #fff;\r\n    box-shadow: 0 0 10px -5px rgb(0,0,0,.4);\r\n\r\n    input {\r\n      background: var(--gradient);\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n      display: inline-block;\r\n      border: none;\r\n      height: 40px;\r\n      font-size: 24px;\r\n      font-weight: 500;\r\n      padding-right: 0;\r\n      margin: 5px;\r\n      \r\n      &::placeholder {\r\n        font-size: 24px;\r\n      }\r\n      \r\n      &:focus {\r\n        box-shadow: none;\r\n      }\r\n    }\r\n  `,\r\n  Btn = styled.button`\r\n    display: inlin-block;\r\n    background: var(--primary);\r\n    border: none;\r\n    border-radius: .7rem;\r\n    font-weight: 600;\r\n    padding-inline: 10px;\r\n    min-height: 45px;\r\n\r\n    :hover {\r\n      opacity: .9;\r\n      filter: grayscale(0.5);\r\n    }\r\n  `,\r\n  Footer = styled.div`\r\n  position: absolute;\r\n  bottom: -30px;\r\n  left: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: var(--h-footer);\r\n  background: var(--primary);\r\n\r\n  a {\r\n    color: #000;\r\n    background: #fff;\r\n    padding: 10px 30px;\r\n    border-radius: .75rem;\r\n    translate: 0 -20px;\r\n    box-shadow: 0 0 10px -5px rgb(0,0,0,.4);\r\n  }\r\n  \r\n  #vara-icon {\r\n    width: 50px;\r\n    height: 50px;\r\n  }\r\n`;\r\nconst collapseContent = styled.div`\r\n{\r\n  transition-property: height;\r\n  transition-duration: 200ms;\r\n  overflow: hidden;\r\n  background-color: #f2f2f2;\r\n}\r\n`;\r\n\r\nconst collapseHeader = styled.div`\r\n{\r\n background-color: #424242;\r\n}\r\n`;\r\n\r\n//Interface menu code section\r\nconst gitActionsMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">Actions</h4>\r\n    <div className=\"mb-4 d-flex flex-column gap-4 align-items-center\">\r\n      <Btn\r\n        style={{ width: \"348px\" }}\r\n        onClick={() => setActiveAction(\"pushData\")}\r\n      >\r\n        Push Data\r\n      </Btn>\r\n      <Btn\r\n        style={{ width: \"348px\" }}\r\n        onClick={() => setActiveAction(\"viewBranches\")}\r\n      >\r\n        View Branches\r\n      </Btn>\r\n      <div className=\"d-flex flex-row gap-2\">\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"createBranch\")}\r\n        >\r\n          Create Branch\r\n        </Btn>\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"deleteBranch\")}\r\n        >\r\n          Delete Branch\r\n        </Btn>\r\n      </div>\r\n      <div className=\"d-flex flex-row gap-2\">\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"addCollaborator\")}\r\n        >\r\n          Add Collaborator\r\n        </Btn>\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"deleteCollaborator\")}\r\n        >\r\n          Delete Collaborator\r\n        </Btn>\r\n      </div>\r\n      <div className=\"d-flex flex-row gap-2\">\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"renameRepo\")}\r\n        >\r\n          Rename Repo\r\n        </Btn>\r\n        <Btn\r\n          style={{ width: \"170px\" }}\r\n          onClick={() => setActiveAction(\"renameBranch\")}\r\n        >\r\n          Rename Branch\r\n        </Btn>\r\n      </div>\r\n      <Btn\r\n        style={{ width: \"348px\" }}\r\n        onClick={() => {\r\n          setAccount(undefined);\r\n          setGitData(undefined);\r\n          setActiveAction(\"start\");\r\n          setGitContract(\"\");\r\n          setIsGitContract(false);\r\n          setIsCollab(false);\r\n          setInputData(\"\");\r\n          setBranches([]);\r\n          setCollaborators([]);\r\n          setBranchSelect(undefined);\r\n          setCollabSelect(undefined);\r\n          setOwner(\"\");\r\n          setIsExpanded(\"\");\r\n        }}\r\n      >\r\n        Go Back\r\n      </Btn>\r\n    </div>\r\n  </>\r\n);\r\n\r\n//Code section of the create branch menu\r\nconst createBranchMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">Create Branch</h4>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Branch name</h5>\r\n      <Input>\r\n        <input\r\n          value={inputData}\r\n          onChange={(e) => setInputData(e.target.value)}\r\n        />\r\n      </Input>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for create branch is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { CreateBranch: inputData },\r\n              118156152120,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setInputData(\"\");\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Save Branch\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Code section of the add collaborator menu\r\nconst addCollaboratorMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">\r\n      Add Collaborator\r\n    </h4>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Collaborator wallet</h5>\r\n      <Input>\r\n        <input\r\n          value={inputData}\r\n          onChange={(e) => setInputData(e.target.value)}\r\n        />\r\n      </Input>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for add collaborator is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { AddCollaborator: inputData },\r\n              118156152120,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setInputData(\"\");\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Add Collaborator\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Code section of the rename repository menu\r\nconst renameRepoMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">\r\n      Rename Repository\r\n    </h4>\r\n    <p className=\"text-light m-0 text-center mb-2\">\r\n      It will take some time for the information update to be reflected.\r\n    </p>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Repository name</h5>\r\n      <Input>\r\n        <input\r\n          value={inputData}\r\n          onChange={(e) => setInputData(e.target.value)}\r\n        />\r\n      </Input>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for rename repo is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { Rename: inputData },\r\n              118156152120,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setInputData(\"\");\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Save Name\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Menu code section delete branch\r\nconst deleteBranchMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">Delete Branch</h4>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Select Branch</h5>\r\n      <select onChange={(e) => setBranchSelectelect(e.target.value)}>\r\n        <option value={null} selected disabled>\r\n          Select a branch\r\n        </option>\r\n        {branches.map((data) => {\r\n          return <option value={data.id}>{data.name}</option>;\r\n        })}\r\n      </select>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for delete branch is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { DeleteBranch: { branch_id: branchSelect } },\r\n              117525470340,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setBranchSelect(undefined);\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Delete Branch\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Code section of the menu delete collaborator\r\nconst deleteCollaboratorMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">\r\n      Delete Collaborator\r\n    </h4>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Select Collaborator</h5>\r\n      <select onChange={(e) => setCollabSelect(e.target.value)}>\r\n        <option value={null} selected disabled>\r\n          Select a collaborator\r\n        </option>\r\n        {collaborators.map((data) => {\r\n          return (\r\n            <option value={data}>\r\n              {data.substr(0, 12) + \"...\" + data.substr(-12, 12)}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for delete collaborator is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { DeleteCollaborator: collabSelect },\r\n              117525470340,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setCollabSelect(undefined);\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Delete Collaborator\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Code section of the menu rename branch\r\nconst renameBranchMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">Rename Branch</h4>\r\n    <div className=\"mb-2 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Select a Branch</h5>\r\n      <select onChange={(e) => setBranchSelectelect(e.target.value)}>\r\n        <option value={null} selected disabled>\r\n          Select a branch\r\n        </option>\r\n        {branches.map((data) => {\r\n          return <option value={data.id}>{data.name}</option>;\r\n        })}\r\n      </select>\r\n    </div>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Branch name</h5>\r\n      <Input>\r\n        <input\r\n          value={inputData}\r\n          onChange={(e) => setInputData(e.target.value)}\r\n        />\r\n      </Input>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for rename branch is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { RenameBranch: { id: branchSelect, name: inputData } },\r\n              117525470340,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setInputData(\"\");\r\n              setBranchSelect(undefined);\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Rename Branch\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n\r\n//Push data menu code section\r\nconst pushDataMenu = (\r\n  <>\r\n    <h4 className=\"text-light m-0 text-center fw-bold mb-2\">Push Data</h4>\r\n    <div className=\"mb-2 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Select a Branch</h5>\r\n      <select onChange={(e) => setBranchSelect(e.target.value)}>\r\n        <option value={null} selected disabled>\r\n          Select a branch\r\n        </option>\r\n        {branches.map((data) => {\r\n          return <option value={data.id}>{data.name}</option>;\r\n        })}\r\n      </select>\r\n    </div>\r\n    <div className=\"mb-4 d-flex flex-column\">\r\n      <h5 className=\"text-light m-0 mb-3\">Write the hash of your code</h5>\r\n      <Input>\r\n        <input\r\n          value={inputData}\r\n          onChange={(e) => setInputData(e.target.value)}\r\n        />\r\n      </Input>\r\n    </div>\r\n    <VaraNetwork.Interaction\r\n      trigger={({ signTransaction }) => (\r\n        <Btn\r\n          className=\"mb-2\"\r\n          onClick={() => {\r\n            //The signTransaction for push data is declared\r\n            signTransaction(\r\n              gitContract,\r\n              contractData,\r\n              { Push: { branch_id: branchSelect, hash: inputData } },\r\n              117525470340,\r\n              0\r\n            );\r\n            setTimeout(() => {\r\n              setActiveAction(\"transaction\");\r\n              setInputData(\"\");\r\n              setBranchSelect(undefined);\r\n            }, \"4000\");\r\n          }}\r\n        >\r\n          Save Data\r\n        </Btn>\r\n      )}\r\n    />\r\n    <Btn onClick={() => setActiveAction(\"start\")}>Cancel</Btn>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/syi216.near/widget/EjemploContratoGit", "fact_widget_deployments_id": "af2342768a632d1250262aa2e17ca7f7", "inserted_timestamp": "2024-08-31T01:18:42.181Z", "modified_timestamp": "2024-08-31T02:16:51.234Z", "__row_index": 1}