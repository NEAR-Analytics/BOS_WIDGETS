{"tx_hash": "6focrAWzDsQ8pM9srrKswBMdiDNZAQXZAjQSSr3X3x4j", "action_id_social": "5mTHScTCvfMc8c9312BemBiqkEKRh5wPxRSer4SVfdQ1-0-widget", "block_id": 113311625, "block_timestamp": "2024-02-21T21:16:48.398Z", "signer_id": "syi216.near", "widget_name": "Ejemplo-API-Pokemon", "source_code": "//Declaracion de los state iniciales\r\nconst [pokemonId, setPokemonId] = useState(1);\r\n// const [pokemonList, setPokemonList] = useState(null);\r\nconst [pokemonData, setPokemonData] = useState(null);\r\n\r\n//Obtencion de datos de la API guardando la info en cache\r\nconst pokemonList = fetch(\r\n  \"https://pokeapi.co/api/v2/pokemon/?offset=0&limit=50\"\r\n).body.results;\r\n\r\n//Obtencion de datos de la API guardandolo solo en el state\r\n// useEffect(() => {\r\n//   console.log(\"carga data\");\r\n//   asyncFetch(\"https://pokeapi.co/api/v2/pokemon/?offset=0&limit=50\").then(\r\n//     (res) => {\r\n//       setPokemonList(res.body.results);\r\n//     }\r\n//   );\r\n// }, []);\r\n\r\n//Obtencion de datos de API cargando informacion nueva mediante trigger\r\nuseEffect(() => {\r\n  asyncFetch(\"https://pokeapi.co/api/v2/pokemon/\" + pokemonId + \"/\").then(\r\n    (res) => {\r\n      setPokemonData({\r\n        name: res.body.name,\r\n        img: res.body.sprites.front_default,\r\n      });\r\n    }\r\n  );\r\n}, [pokemonId]);\r\n\r\nreturn (\r\n  <>\r\n    <div class=\"text-center\">\r\n      <h2 class=\"my-3\">Ejemplo obtener informacion API</h2>\r\n      <div class=\"border border-3 rounded my-4\">\r\n        <h3>Informacion de pokemon</h3>\r\n        {pokemonData != null && (\r\n          <div class=\"my-3\">\r\n            <h4 class=\"text-capitalize\">{pokemonData.name}</h4>\r\n            <img style={{ width: 200, height: 200 }} src={pokemonData.img} />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <h3>Listado pokemon</h3>\r\n        <div>\r\n          <table class=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">No. pokemon</th>\r\n                <th scope=\"col\">Nombre</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {pokemonList != null &&\r\n                pokemonList.map((data, key) => {\r\n                  return (\r\n                    <tr\r\n                      onClick={() => {\r\n                        setPokemonId(key + 1);\r\n                      }}\r\n                      class={key + 1 == pokemonId && \"table-active\"}\r\n                    >\r\n                      <th scope=\"row\">{key + 1}</th>\r\n                      <td class=\"text-capitalize\">{data.name}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/syi216.near/widget/Ejemplo-API-Pokemon", "fact_widget_deployments_id": "94d121902f24790f10cb6e4bf140a2b4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}