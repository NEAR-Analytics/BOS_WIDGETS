{"tx_hash": "6QnUMHXJNgHbuqGbt6PxCmdqBG6PYCkWbfNtvbCzvdd7", "action_id_social": "Ggp4uBMZo4wLJ5JF4JxJDnuiNYCvmbgiNfFBestz5Xuy-0-widget", "block_id": 92921913, "block_timestamp": "2023-05-28T18:06:13.733Z", "signer_id": "jgdev.near", "widget_name": "gigs-board.pages.localstate", "source_code": "const WrapperWidget = ({ children, id, storageType }) => {\r\n    // This function handles the state change for the children widgets\r\n    const handleStateChange = (key, value) => {\r\n      // Use the unique identifier to create a unique storage key\r\n      const storageKey = `${id}_${key}`;\r\n  \r\n      if (storageType === \"local\") {\r\n        // Update the local storage with the new state\r\n        localStorage.setItem(storageKey, JSON.stringify(value));\r\n      } else if (storageType === \"sync\") {\r\n        // Update the sync storage with the new state\r\n        // Replace this with the appropriate API call for your sync storage\r\n        syncStorage.setItem(storageKey, JSON.stringify(value));\r\n      }\r\n    };\r\n  \r\n    // This function initializes the state of the children widgets\r\n    const initState = (key, defaultValue) => {\r\n      // Use the unique identifier to create a unique storage key\r\n      const storageKey = `${id}_${key}`;\r\n  \r\n      let storedValue;\r\n      if (storageType === \"local\") {\r\n        storedValue = localStorage.getItem(storageKey);\r\n      } else if (storageType === \"sync\") {\r\n        // Retrieve the value from sync storage\r\n        // Replace this with the appropriate API call for your sync storage\r\n        storedValue = syncStorage.getItem(storageKey);\r\n      }\r\n  \r\n      if (storedValue) {\r\n        return JSON.parse(storedValue);\r\n      }\r\n      return defaultValue;\r\n    };\r\n  \r\n    // Render the children widgets and pass the state management functions as props\r\n    return React.Children.map(children, (child) =>\r\n      React.cloneElement(child, { handleStateChange, initState })\r\n    );\r\n  };", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgdev.near/widget/gigs-board.pages.localstate", "fact_widget_deployments_id": "ef01eedc10be0a38cc14ca32b5629e2c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}