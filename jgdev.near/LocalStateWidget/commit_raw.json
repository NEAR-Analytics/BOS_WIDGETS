{"tx_hash": "J4Nmy5DS9NtmBe3V3GmwjpzFRzLJjxjeZETHuQp8mqq6", "action_id_social": "EXz379AuQpLVPX9bRDLL9HsukWoWjyRgtKXX7pLDL7jb-0-widget", "block_id": 93704854, "block_timestamp": "2023-06-08T02:24:37.790Z", "signer_id": "jgdev.near", "widget_name": "LocalStateWidget", "source_code": "const WrapperWidget = ({ children, id, storageType }) => {\r\n  // This function handles the state change for the children widgets\r\n  const handleStateChange = (key, value) => {\r\n    // Use the unique identifier to create a unique storage key\r\n    const storageKey = `${id}_${key}`;\r\n\r\n    if (storageType === \"local\") {\r\n      // Update the local storage with the new state\r\n      Storage.set.map(storageKey, JSON.stringify(value));\r\n    }\r\n  };\r\n\r\n  // This function initializes the state of the children widgets\r\n  const initState = (key, defaultValue) => {\r\n    // Use the unique identifier to create a unique storage key\r\n    const storageKey = `${id}_${key}`;\r\n\r\n    let storedValue;\r\n    if (storageType === \"local\") {\r\n      storedValue = Storage.get.map(storageKey);\r\n    }\r\n\r\n    if (storedValue) {\r\n      return JSON.parse(storedValue);\r\n    }\r\n    return defaultValue;\r\n  };\r\n\r\n  // Render the children widgets and pass the state management functions as props\r\n  // return React.Children.map(children, (child) =>\r\n  //   React.cloneElement(child, { handleStateChange, initState })\r\n  // );\r\n  console.log(React.cloneElement);\r\n\r\n  return children.map((child) => child);\r\n};\r\n\r\n// This function handles the state change for the children widgets\r\nconst handleStateChange = (key, value) => {\r\n  // Use the unique identifier to create a unique storage key\r\n  const storageKey = `${key}`;\r\n\r\n  // if (storageType === \"local\") {\r\n  // Update the local storage with the new state\r\n  Storage.set(storageKey, JSON.stringify(value));\r\n  // }\r\n};\r\n\r\n// This function initializes the state of the children widgets\r\nconst initializeState = (key, defaultValue) => {\r\n  // Use the unique identifier to create a unique storage key\r\n  const storageKey = `${key}`;\r\n\r\n  let storedValue;\r\n  // if (storageType === \"local\") {\r\n  storedValue = Storage.get(storageKey);\r\n  // }\r\n\r\n  if (storedValue) {\r\n    return JSON.parse(storedValue);\r\n  }\r\n  return defaultValue;\r\n};\r\n\r\nState.init({ name: \"\" });\r\nState.update({ name: initializeState(\"name\", \"\") });\r\nreturn (\r\n  <div className=\"col-lg-12  mb-2\">\r\n    Name:\r\n    <input\r\n      type=\"text\"\r\n      value={state.name}\r\n      onChange={(event) => {\r\n        console.log(\"aaaaaa\");\r\n        State.update({ name: event.target.value });\r\n        handleStateChange(\"name\", event.target.value);\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgdev.near/widget/LocalStateWidget", "fact_widget_deployments_id": "7b5eacd2d946172fe8b89c2e7608c4d0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}