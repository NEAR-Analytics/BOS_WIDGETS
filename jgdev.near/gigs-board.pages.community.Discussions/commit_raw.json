{"tx_hash": "BcYe9d89evL3vjVgdMnwpbvibpPbNXySho5zk1qFTWu8", "action_id_social": "8jUgEYkCNyTF1npBCbQmHvbFhY773i4jcLadCZxM2aWT-0-widget", "block_id": 94645739, "block_timestamp": "2023-06-20T22:27:53.588Z", "signer_id": "jgdev.near", "widget_name": "gigs-board.pages.community.Discussions", "source_code": "/* INCLUDE: \"common.jsx\" */\r\nconst nearDevGovGigsContractAccountId =\r\n  props.nearDevGovGigsContractAccountId ||\r\n  (context.widgetSrc ?? \"devgovgigs.near\").split(\"/\", 1)[0];\r\n\r\nconst nearDevGovGigsWidgetsAccountId =\r\n  props.nearDevGovGigsWidgetsAccountId ||\r\n  (context.widgetSrc ?? \"devgovgigs.near\").split(\"/\", 1)[0];\r\n\r\nfunction widget(widgetName, widgetProps, key) {\r\n  widgetProps = {\r\n    ...widgetProps,\r\n    nearDevGovGigsContractAccountId: props.nearDevGovGigsContractAccountId,\r\n    nearDevGovGigsWidgetsAccountId: props.nearDevGovGigsWidgetsAccountId,\r\n    referral: props.referral,\r\n  };\r\n\r\n  return (\r\n    <Widget\r\n      src={`${nearDevGovGigsWidgetsAccountId}/widget/gigs-board.${widgetName}`}\r\n      props={widgetProps}\r\n      key={key}\r\n    />\r\n  );\r\n}\r\n\r\nfunction href(widgetName, linkProps) {\r\n  linkProps = { ...linkProps };\r\n\r\n  if (props.nearDevGovGigsContractAccountId) {\r\n    linkProps.nearDevGovGigsContractAccountId =\r\n      props.nearDevGovGigsContractAccountId;\r\n  }\r\n\r\n  if (props.nearDevGovGigsWidgetsAccountId) {\r\n    linkProps.nearDevGovGigsWidgetsAccountId =\r\n      props.nearDevGovGigsWidgetsAccountId;\r\n  }\r\n\r\n  if (props.referral) {\r\n    linkProps.referral = props.referral;\r\n  }\r\n\r\n  const linkPropsQuery = Object.entries(linkProps)\r\n    .filter(([_key, nullable]) => (nullable ?? null) !== null)\r\n    .map(([key, value]) => `${key}=${value}`)\r\n    .join(\"&\");\r\n\r\n  return `/#/${nearDevGovGigsWidgetsAccountId}/widget/gigs-board.pages.${widgetName}${\r\n    linkPropsQuery ? \"?\" : \"\"\r\n  }${linkPropsQuery}`;\r\n}\r\n/* END_INCLUDE: \"common.jsx\" */\r\n\r\n/* INCLUDE: \"shared/mocks\" */\r\nconst communities = {\r\n  \"zero-knowledge\": {\r\n    overviewId: 397,\r\n    eventsId: 401,\r\n\r\n    icon: \"https://ipfs.near.social/ipfs/bafkreiajwq6ep3n7veddozji2djv5vviyisabhycbweslvpwhsoyuzcwi4\",\r\n\r\n    cover:\r\n      \"https://ipfs.near.social/ipfs/bafkreihgxg5kwts2juldaeasveyuddkm6tcabmrat2aaq5u6uyljtyt7lu\",\r\n\r\n    title: \"Zero Knowledge\",\r\n    desc: \"Building a zero knowledge ecosystem on NEAR.\",\r\n    telegram: \"NearZeroKnowledge\",\r\n  },\r\n\r\n  protocol: {\r\n    overviewId: 412,\r\n    eventsId: 413,\r\n\r\n    icon: \"https://ipfs.near.social/ipfs/bafkreidpitdafcnhkp4uyomacypdgqvxr35jtfnbxa5s6crby7qjk2nv5a\",\r\n\r\n    cover:\r\n      \"https://ipfs.near.social/ipfs/bafkreicg4svzfz5nvllomsahndgm7u62za4sib4mmbygxzhpcl4htqwr4a\",\r\n\r\n    title: \"Protocol\",\r\n    desc: \"Supporting the ongoing innovation of the NEAR Protocol.\",\r\n\r\n    integrations: {\r\n      github: {\r\n        boards: {\r\n          \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\": {\r\n            id: \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\",\r\n\r\n            columns: {\r\n              \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\": {\r\n                id: \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\",\r\n\r\n                description:\r\n                  \"NEPs that need a moderator review or author revision.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"S-draft\"],\r\n                title: \"\ud83d\udcc4 Draft\",\r\n              },\r\n\r\n              \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\": {\r\n                description:\r\n                  \"NEPS that need a review by Subject Matter Experts.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"S-review\"],\r\n                title: \"\ud83d\udc40 Review\",\r\n                id: \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\",\r\n              },\r\n\r\n              \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\": {\r\n                description:\r\n                  \"NEPS in the final review stage that need the work group voting indications.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"S-voting\"],\r\n                title: \"\u2714 Voting\",\r\n                id: \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\",\r\n              },\r\n\r\n              \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"S-approved\"],\r\n                title: \"\u2705 Approved NEPs\",\r\n                id: \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\",\r\n              },\r\n\r\n              \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group or NEP moderators.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"A-NEP-GrammarFix\"],\r\n                title: \"\ud83d\udd27 Approved Fixes\",\r\n                id: \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\",\r\n              },\r\n\r\n              \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\": {\r\n                description:\r\n                  \"NEPs that were retracted by the author or had no activity for over two months.\",\r\n\r\n                labelSearchTerms: [\"WG-protocol\", \"S-retracted\"],\r\n                title: \"\u274c RETRACTED\",\r\n                id: \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\",\r\n              },\r\n            },\r\n\r\n            dataTypesIncluded: { Issue: false, PullRequest: true },\r\n            description: \"Latest NEAR Enhancement Proposals by status\",\r\n            repoURL: \"https://github.com/near/NEPs\",\r\n            ticketState: \"all\",\r\n            title: \"NEAR Protocol NEPs\",\r\n          },\r\n        },\r\n      },\r\n    },\r\n\r\n    telegram: \"NEAR_Protocol_Community_Group\",\r\n  },\r\n\r\n  tooling: {\r\n    overviewId: 416,\r\n    eventsId: 417,\r\n\r\n    icon: \"https://ipfs.near.social/ipfs/bafkreie2eaj5czmpfe6pe53kojzcspgozebdsonffwvbxtpuipnwahybvi\",\r\n\r\n    cover:\r\n      \"https://ipfs.near.social/ipfs/bafkreiehzr7z2fhoqqmkt3z667wubccbch6sqtsnvd6msodyzpnf72cszy\",\r\n\r\n    title: \"Tooling\",\r\n    desc: \"Supporting the ongoing innovation of tooling.\",\r\n\r\n    integrations: {\r\n      github: {\r\n        boards: {\r\n          \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\": {\r\n            id: \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\",\r\n\r\n            columns: {\r\n              \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\": {\r\n                id: \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\",\r\n\r\n                description:\r\n                  \"NEPs that need a moderator review or author revision.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"S-draft\"],\r\n                title: \"\ud83d\udcc4 Draft\",\r\n              },\r\n\r\n              \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\": {\r\n                description:\r\n                  \"NEPS that need a review by Subject Matter Experts.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"S-review\"],\r\n                title: \"\ud83d\udc40 Review\",\r\n                id: \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\",\r\n              },\r\n\r\n              \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\": {\r\n                description:\r\n                  \"NEPS in the final review stage that need the work group voting indications.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"S-voting\"],\r\n                title: \"\u2714 Voting\",\r\n                id: \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\",\r\n              },\r\n\r\n              \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"S-approved\"],\r\n                title: \"\u2705 Approved NEPs\",\r\n                id: \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\",\r\n              },\r\n\r\n              \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group or NEP moderators.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"A-NEP-GrammarFix\"],\r\n                title: \"\ud83d\udd27 Approved Fixes\",\r\n                id: \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\",\r\n              },\r\n\r\n              \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\": {\r\n                description:\r\n                  \"NEPs that were retracted by the author or had no activity for over two months.\",\r\n\r\n                labelSearchTerms: [\"WG-tools\", \"S-retracted\"],\r\n                title: \"\u274c RETRACTED\",\r\n                id: \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\",\r\n              },\r\n            },\r\n\r\n            dataTypesIncluded: { Issue: false, PullRequest: true },\r\n            description: \"Latest NEAR Enhancement Proposals by status\",\r\n            repoURL: \"https://github.com/near/NEPs\",\r\n            ticketState: \"all\",\r\n            title: \"NEAR Tooling NEPs\",\r\n          },\r\n        },\r\n      },\r\n    },\r\n\r\n    telegram: \"NEAR_Tools_Community_Group\",\r\n  },\r\n\r\n  \"contract-standards\": {\r\n    overviewId: 414,\r\n    eventsId: 415,\r\n\r\n    icon: \"https://ipfs.near.social/ipfs/bafkreiepgdnu7soc6xgbyd4adicbf3eyxiiwqawn6tguaix6aklfpir634\",\r\n\r\n    cover:\r\n      \"https://ipfs.near.social/ipfs/bafkreiaowjqxds24fwcliyriintjd4ucciprii2rdxjmxgi7f5dmzuscey\",\r\n\r\n    title: \"Contract Standards\",\r\n    desc: \"Coordinating the contribution to the NEAR dapp standards.\",\r\n\r\n    integrations: {\r\n      github: {\r\n        boards: {\r\n          \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\": {\r\n            id: \"18855b9c9f2-216091d-6484800b-42593f54-6102b48a\",\r\n\r\n            columns: {\r\n              \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\": {\r\n                id: \"18855f4a93e-76a9b704-14c3ebdb-1e6c0f05-22653630\",\r\n\r\n                description:\r\n                  \"NEPs that need a moderator review or author revision.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"S-draft\"],\r\n                title: \"\ud83d\udcc4 Draft\",\r\n              },\r\n\r\n              \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\": {\r\n                description:\r\n                  \"NEPS that need a review by Subject Matter Experts.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"S-review\"],\r\n                title: \"\ud83d\udc40 Review\",\r\n                id: \"18877dc932c-c309c28--4b95e909--220e9bbb--51ff54c9\",\r\n              },\r\n\r\n              \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\": {\r\n                description:\r\n                  \"NEPS in the final review stage that need the work group voting indications.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"S-voting\"],\r\n                title: \"\u2714 Voting\",\r\n                id: \"18877dd71e5-47d177b8-5505178-640a5937--17968e87\",\r\n              },\r\n\r\n              \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"S-approved\"],\r\n                title: \"\u2705 Approved NEPs\",\r\n                id: \"18877e14753--5b0ca250-1edea464-523fd579--5ebde527\",\r\n              },\r\n\r\n              \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\": {\r\n                description:\r\n                  \"NEPS that were reviewed and approved by a work group or NEP moderators.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"A-NEP-GrammarFix\"],\r\n                title: \"\ud83d\udd27 Approved Fixes\",\r\n                id: \"18877e2f94c-4cc0ff57--1fb016c6--39ce0459-23922e81\",\r\n              },\r\n\r\n              \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\": {\r\n                description:\r\n                  \"NEPs that were retracted by the author or had no activity for over two months.\",\r\n\r\n                labelSearchTerms: [\"WG-contract-standards\", \"S-retracted\"],\r\n                title: \"\u274c RETRACTED\",\r\n                id: \"18877e40c46--76d23f4d-578f24a8--2cfcd190--74aa77be\",\r\n              },\r\n            },\r\n\r\n            dataTypesIncluded: { Issue: false, PullRequest: true },\r\n            description: \"Latest NEAR Enhancement Proposals by status\",\r\n            repoURL: \"https://github.com/near/NEPs\",\r\n            ticketState: \"all\",\r\n            title: \"NEAR Contract Standards NEPs\",\r\n          },\r\n        },\r\n      },\r\n    },\r\n\r\n    telegram: \"nearnft\",\r\n  },\r\n};\r\n/* END_INCLUDE: \"shared/mocks\" */\r\n\r\nif (!props.label) {\r\n  return (\r\n    <div class=\"alert alert-danger\" role=\"alert\">\r\n      Error: label is required\r\n    </div>\r\n  );\r\n}\r\n\r\nconst label = props.label;\r\n\r\nconst discussionRequiredPosts =\r\n  Near.view(nearDevGovGigsContractAccountId, \"get_posts_by_label\", {\r\n    label,\r\n  }) ?? [];\r\n\r\nconst community = communities[props.label];\r\n\r\nconst SearchResults = (\r\n  <div style={{ display: \"none\" }}>\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        {widget(\"components.post.DiscussionFeed\", {\r\n          query: \"your-query-string\",\r\n        })}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst onMention = (accountId) => (\r\n  <span key={accountId} className=\"d-inline-flex\" style={{ fontWeight: 500 }}>\r\n    <Widget\r\n      src=\"neardevgov.near/widget/ProfileLine\"\r\n      props={{\r\n        accountId: accountId.toLowerCase(),\r\n        hideAccountId: true,\r\n        tooltip: true,\r\n      }}\r\n    />\r\n  </span>\r\n);\r\n\r\nconst LabelsDisplay = (\r\n  <div className=\"d-flex flex-wrap gap-2 mb-2\">\r\n    {tags.length > 0 && (\r\n      <div>\r\n        {tags.map((tag, i) => (\r\n          <span\r\n            key={i}\r\n            className=\"me-1 mb-1 fw-light badge border border-secondary text-bg-light\"\r\n          >\r\n            #{tag}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    )}\r\n    <div className=\"collapse public-tags\">\r\n      <Widget src=\"mob.near/widget/PublicTags\" props={{ accountId }} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst Discussions = (\r\n  <div class=\"row\">\r\n    <div class=\"col-md-8\">\r\n      {widget(\"components.layout.Controls\", {\r\n        labels: discussionsRequiredLabels,\r\n      })}\r\n      <div className=\"row mb-2\">\r\n        <div className=\"col\">\r\n          <small className=\"text-muted\">\r\n            Required label:\r\n            <a href={href(\"Feed\", { label })} key={label}>\r\n              <span\r\n                className=\"badge text-bg-grey me-1\"\r\n                style={{\r\n                  color: \"black\",\r\n                  fontSize: \"1.3em\",\r\n                  boxShadow: \"0px 1px 3px rgba(0, 0, 0, 0.2)\",\r\n                }}\r\n              >\r\n                {label}\r\n              </span>\r\n            </a>\r\n          </small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    {widget(\"components.layout.Controls\", {\r\n      labels: label,\r\n    })}\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        {discussionRequiredPosts.map((postId) =>\r\n          widget(\"components.posts.DiscussionFeed\", { id: postId }, postId)\r\n        )}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nreturn widget(\"components.community.Layout\", {\r\n  label: props.label,\r\n  tab: \"Discussions\",\r\n  children: (\r\n    <div class=\"row\">\r\n      <div class=\"col-md-9\">\r\n        <div\r\n          className=\"row align-items-center d-flex justify-content-between\"\r\n          style={{ marginTop: \"18px\" }}\r\n        >\r\n          <div className=\"col-auto\">\r\n            <div className=\"d-flex align-items-center\">\r\n              <small className=\"text-muted\" style={{ fontSize: \"1.15em\" }}>\r\n                Required tag:\r\n              </small>\r\n              <a href={href(\"Feed\", { label })} key={label}>\r\n                <span\r\n                  className=\"badge ms-1\"\r\n                  style={{\r\n                    color: \"rgba(0, 0, 0, 0.7)\",\r\n                    fontSize: \"1em\",\r\n                    fontWeight: \"normal\",\r\n                    padding: \"0.2em 0.5em\",\r\n                    border: \"1px solid rgba(0, 80, 80, 0.2)\",\r\n                  }}\r\n                >\r\n                  {label}\r\n                </span>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-auto aspect-ratio-square\">\r\n            {widget(\"components.layout.Controls\", {\r\n              labels: discussionsRequiredLabels,\r\n            })}\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <div class=\"row\">\r\n          <div class=\"col\">\r\n            {discussionRequiredPosts.map((postId) =>\r\n              widget(\r\n                \"components.posts.DiscussionFeed\",\r\n                { id: postId, collapsed: true },\r\n                postId\r\n              )\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-3 container-fluid\">\r\n        <Widget\r\n          src={`${nearDevGovGigsWidgetsAccountId}/widget/gigs-board.pages.community.Sidebar`}\r\n          props={{\r\n            metadata: metadata,\r\n            accountId: accountId,\r\n            widgetName: widgetName,\r\n            label: props.label,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  ),\r\n});\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgdev.near/widget/gigs-board.pages.community.Discussions", "fact_widget_deployments_id": "ee8039911db649e4cf0ac58e5c5cb7c4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}