{"tx_hash": "4qaXJSR66Sic2jA3HKeDsz43ztMCE4rhjzhEC6d3RYH8", "action_id_social": "8sRh9Two91fcLrJ3nirT9v8ZcrQshP2K7Th46NjRw1rJ-0-widget", "block_id": 118714290, "block_timestamp": "2024-05-11T15:13:01.309Z", "signer_id": "vinkosa.near", "widget_name": "collectionlist", "source_code": "const initialData = JSON.parse(\n  Social.get(\"vinkosa.near/collectionList/**\").data\n);\nconsole.log(initialData);\n\nconst EditableList = () => {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    setData(initialData);\n  }, [initialData]);\n\n  const handleNameChange = (id, newName) => {\n    setData((prevData) =>\n      prevData.map((item) =>\n        item.id === id ? { ...item, name: newName } : item\n      )\n    );\n  };\n\n  const handleAmountChange = (id, newAmount) => {\n    setData((prevData) =>\n      prevData.map((item) =>\n        item.id === id ? { ...item, amountOwed: newAmount } : item\n      )\n    );\n  };\n\n  const toggleEdit = (id) => {\n    setData((prevData) =>\n      prevData.map((item) =>\n        item.id === id ? { ...item, editable: !item.editable } : item\n      )\n    );\n  };\n\n  const getTotalAmountOwed = () => {\n    return data.reduce((total, person) => total + person.amountOwed, 0);\n  };\n\n  const handleAddRow = () => {\n    const newId = data.length > 0 ? data[data.length - 1].id + 1 : 1;\n    setData([...data, { id: newId, name: \"\", amountOwed: 0, editable: true }]);\n  };\n\n  const handleRemoveRow = (id) => {\n    setData(data.filter((item) => item.id !== id));\n  };\n\n  const handleSubmit = () => {\n    console.log(\"Form submitted!\");\n    Social.set({ collectionList: { data } });\n  };\n\n  return (\n    <>\n      <h2>Collection List</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Name</th>\n            <th>Amount Owed</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((person, index) => (\n            <tr key={person.id}>\n              <td>{index + 1}</td>\n              <td>\n                {person.editable ? (\n                  <input\n                    type=\"text\"\n                    value={person.name}\n                    onChange={(e) =>\n                      handleNameChange(person.id, e.target.value)\n                    }\n                  />\n                ) : (\n                  person.name\n                )}\n              </td>\n              <td>\n                {person.editable ? (\n                  <input\n                    type=\"number\"\n                    value={person.amountOwed}\n                    onChange={(e) =>\n                      handleAmountChange(person.id, parseFloat(e.target.value))\n                    }\n                  />\n                ) : (\n                  `$${person.amountOwed}`\n                )}\n              </td>\n              <td>\n                <button onClick={() => toggleEdit(person.id)}>\n                  {person.editable ? \"Save\" : \"Edit\"}\n                </button>\n                <button onClick={() => handleRemoveRow(person.id)}>\n                  Remove\n                </button>\n              </td>\n            </tr>\n          ))}\n          <tr>\n            <td colSpan=\"2\">\n              <b>Total</b>:\n            </td>\n            <td>\n              <b>${getTotalAmountOwed()}</b>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <button onClick={handleAddRow}>Add Row</button>\n      <button onClick={handleSubmit}>Submit</button>\n    </>\n  );\n};\n\nreturn EditableList();\n", "metadata": {"fork_of": "vinkosa.near/widget/collectionlist@118713569"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/vinkosa.near/widget/collectionlist", "fact_widget_deployments_id": "7e1464494badd90a0a63ca12a555f313", "inserted_timestamp": "2024-05-11T16:40:26.052Z", "modified_timestamp": "2024-05-14T15:45:11.318Z", "__row_index": 0}