{"tx_hash": "4FUBjspNpbB2e8tGmdZLkHT5iZhRiL4mspstNJgSYJaF", "action_id_social": "EGYE1VSLgCrjPB6WVu99F6WQa57AuESAJZGHcs4G68o1-0-widget", "block_id": 102057004, "block_timestamp": "2023-09-27T07:53:32.931Z", "signer_id": "cpassport.near", "widget_name": "Passport.Home.Main", "source_code": "const accountId = props?.accountId ?? context?.accountId;\n\nState.init({\n  tokenId: {},\n  hasFetched: {},\n});\n\nconst phillipines = {\n  series: \"224\",\n  country: \"Phillipines\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeih7fmsubhl2inkboy3ngkpoirffgbygyn6gg6pkthd5pvikyxrum4\",\n};\n\nconst india = {\n  series: \"225\",\n  country: \"India\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeiaqolijobdczeeihfx2gcqfc4hxxy54pnrym5ujm45yndbinfuqfu\",\n};\n\nconst brazil = {\n  series: \"226\",\n  country: \"Brazil\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeib57ef23gpshvn7nv4ux7gypoevx4weblc3a2vpgb3n25u5qvxieq\",\n};\n\nconst unitedStates = {\n  series: \"227\",\n  country: \"United States\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeih5pggkqxka6wxdlcimei6ghn6opuroxkvknirmpfc3xedsub5dta\",\n};\n\nconst antiqua = {\n  series: \"228\",\n  country: \"Antiqua\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeid2t5czk6q6at2t4nbczp3tf3acxu2nw3sz4bxte7z6yg5m37sw6a\",\n};\n\nconst nigerea = {\n  series: \"229\",\n  country: \"Nigerea\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeiaalp75q2bjwzjyatxyuwmhpxcyrlvye6bbioenrfrvqbsypyz6om\",\n};\n\nconst portugal = {\n  series: \"230\",\n  country: \"Portugal\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeiewfpsywztby7id634y7iox3icdkge5ptu3spgd3efeilrst64gh4\",\n};\n\nconst canada = {\n  series: \"231\",\n  country: \"Canada\",\n  image:\n    \"https://ipfs.near.social/ipfs/bafybeibjnx2u3oluxda7snccioccxynlm7mmd2o2ieahbzg6eiv3udd44m\",\n};\n\nconst countryList = [\n  phillipines,\n  india,\n  brazil,\n  unitedStates,\n  antiqua,\n  nigerea,\n  portugal,\n  canada,\n];\n\nfunction fetchTokens(series) {\n  asyncFetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"omni-site\",\n      \"Content-Type\": \"application/json\",\n      \"x-hasura-role\": \"anonymous\",\n    },\n    body: JSON.stringify({\n      query: `\n          query MyQuery {\n            mb_views_nft_tokens(\n              where: { nft_contract_id: { _eq: \"mint.sharddog.near\" } \n               owner: { _eq:\"${accountId}\" } token_id: {_regex: \"^${series}:\"}}\n            ) {\n              owner\n              token_id\n              media\n              base_uri\n              minter\n              metadata_id\n            }\n          }\n        `,\n    }),\n  }).then((res) => {\n    if (res.ok) {\n      const [token] = res.body.data.mb_views_nft_tokens;\n      if (token) {\n        State.update({\n          tokens: { ...state.tokens, [series]: token },\n        });\n      }\n    }\n  });\n}\n\nconst fetchAllTokens = () => {\n  countryList.forEach((item, idx) => {\n    if (state.hasFetched[item.series] !== true) {\n      fetchTokens(item.series);\n      State.update({\n        hasFetched: { ...state.hasFetched, [item.series]: true },\n      });\n    }\n  });\n};\n\nif (Object.keys(state.hasFetched).length !== countryList.length) {\n  fetchAllTokens();\n}\n\nconst DivBackground = styled.div`\n  background-color: #FDF3DD;\n  height: 100vh;\n  display: flex;\n  padding-bottom:20vh;\n  width:100%;\n  align-items:center;\n  justify-content:center;\n`;\n\nconst GridView = styled.div`\n  display: grid;\n  width:100%;\n  margin-top: 20px;\n  grid-template-columns: 50% 40%;\n`;\n\nconst ImageGrid = styled.div`\n    display:grid;\n    grid-template-columns: repeat(4,1fr);\n`;\n\nreturn (\n  <DivBackground>\n    <div style={{ width: \"100%\", textAlign: \"center\" }}>\n      <h1>AROUND THE WORLD</h1>\n      <GridView>\n        <div>\n          <div style={{ textAlign: \"center\" }}>\n            <>\n              <p style={{ fontSize: 20 }}>Visit with Artists</p>\n              <p style={{ fontSize: 20 }}>Scan the QR Codes</p>\n              <p style={{ fontSize: 20 }}>Collect Stamps</p>\n              <p style={{ fontSize: 20 }}>Unlock Prizes</p>\n            </>\n            <img\n              style={{ width: 100, height: 100 }}\n              src=\"https://media.canva.com/1/image-resize/1/200_200_100_PNG_F/czM6Ly9tZWRpYS1wcml2YXRlLmNhbnZhLmNvbS9OTUl3SS9NQUZ0eXpOTUl3SS8xL3AucG5n?osig=AAAAAAAAAAAAAAAAAAAAAFbF8dXMQkrOUGxos8zLxMfFarQGdgdU54q-5Nqjj3On&exp=1695814320&x-canva-quality=thumbnail&csig=AAAAAAAAAAAAAAAAAAAAAHt8Ci5BdqyqTI14M4EtIAi5wSXrInW0K5ggcNmELSfb\"\n            />\n          </div>\n        </div>\n        <div>\n          <p style={{ fontSize: 25 }}>{accountId}</p>\n          <ImageGrid>\n            {countryList.map((item) => (\n              <div style={{ opacity: state.tokenId[item.series] ? 1 : 0.4 }}>\n                <img style={{ width: 80, height: 80 }} src={item.image} />\n              </div>\n            ))}\n          </ImageGrid>\n        </div>\n      </GridView>\n    </div>\n  </DivBackground>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cpassport.near/widget/Passport.Home.Main", "fact_widget_deployments_id": "d057535f657a0b6fedacf19c687d065d", "inserted_timestamp": "2023-09-27T09:44:56.351Z", "modified_timestamp": "2023-09-27T09:44:56.351Z", "__row_index": 3}