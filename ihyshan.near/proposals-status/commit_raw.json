{"tx_hash": "5UEnfCvWxcmnh5ZziXzXorvTgPMfnuoRNBuV8GjZvqWb", "action_id_social": "FRA6NckReWPBcxPAQzyAuzUPtQa1noXQdBLdbeLVFFrv-0-widget", "block_id": 97854882, "block_timestamp": "2023-08-01T17:29:05.706Z", "signer_id": "ihyshan.near", "widget_name": "proposals-status", "source_code": null, "metadata": null, "branch": {"draft": {"": "const widgetProvider = props.widgetProvider;\nconst account = props.account || \"marketing.sputnik-dao.near\";\nconst apiUrl = `https://api.pikespeak.ai/daos/proposals/status/${account}`;\nconst publicApiKey = \"36f2b87a-7ee6-40d8-80b9-5e68e587a5b5\";\n\nState.init({\n  proposalsStatus: [],\n});\n\nconst order = {\n  proposal_type: 0,\n  InProgress: 1,\n  Approved: 2,\n  Rejected: 3,\n  Expired: 4,\n  Total: 5,\n  ApprovalRate: 6,\n};\nconst columns = state.proposalsStatus.reduce((acc, pS) => {\n  Object.keys(pS).forEach((k) => {\n    if (!acc.find((c) => c.id === k)) {\n      acc.push({\n        id: k,\n        label: k === \"proposal_type\" ? \"Type\" : k,\n      });\n    }\n  });\n  return acc;\n}, []);\nconst orderedColumns = columns.sort((a, b) => order[a.id] - order[b.id]);\n\nconst GenericTable = (\n  <Widget\n    src={`${widgetProvider}/widget/generic_table`}\n    props={{\n      title: `Status stats`,\n      columns: orderedColumns,\n      data: state.proposalsStatus,\n    }}\n  />\n);\n\nconst fetchTransfers = () => {\n  const proposalsStatus = fetch(apiUrl, {\n    mode: \"cors\",\n    headers: {\n      \"x-api-key\": publicApiKey,\n    },\n  });\n  proposalsStatus.body &&\n    State.update({ proposalsStatus: proposalsStatus.body });\n};\nfetchTransfers();\n\nreturn <>{GenericTable}</>;\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/ihyshan.near/widget/proposals-status", "fact_widget_deployments_id": "2d1221f0877a719c5e4f3e4df0820076", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}