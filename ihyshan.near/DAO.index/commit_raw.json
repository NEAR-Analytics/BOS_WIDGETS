{"tx_hash": "7aFUbk7zN8AjqbX9nhv6jNS7kBXGdDpCd1x3Ze2CzjLV", "action_id_social": "AUSA3rQtDxFTS9tDdXoWauoJfnFb5TGwMfqAmbfpzTKk-0-widget", "block_id": 99348529, "block_timestamp": "2023-08-21T21:53:37.962Z", "signer_id": "ihyshan.near", "widget_name": "DAO.index", "source_code": "const widgetOwner = props.widgetOwner ?? \"astraplusplus.ndctools.near\";\r\n\r\nState.init({\r\n  tab: props.tab ?? \"home\",\r\n  accountId: props.accountId ?? context.accountId,\r\n  daoId: props.daoId,\r\n  proposalId: props.proposalId,\r\n});\r\n\r\nconst update = (state) => State.update(state);\r\n\r\nconst constructURL = (paramObj, base) => {\r\n  paramObj = { ...paramObj, page: \"dao\" };\r\n  const baseURL = base ?? `#/${widgetOwner}/widget/index`;\r\n  let params = \"\";\r\n  for (const [key, value] of Object.entries(paramObj)) {\r\n    params += `${key}=${value}&`;\r\n  }\r\n  params = params.slice(0, -1);\r\n  return `${baseURL}?${params}`;\r\n};\r\n\r\nconst tabs = {\r\n  home: {\r\n    name: \"Discussion\",\r\n    widget: \"DAO.Discussion\",\r\n    href: constructURL({ tab: \"home\", daoId: state.daoId }),\r\n  },\r\n  proposals: {\r\n    name: \"Proposals\",\r\n    widget: \"DAO.Proposals.index\",\r\n    href: constructURL({ tab: \"proposals\", daoId: state.daoId }),\r\n  },\r\n  funds: {\r\n    name: \"Fund Flows\",\r\n    widget: \"DAO.Funds.index\",\r\n    href: constructURL({ tab: \"funds\", daoId: state.daoId }),\r\n  },\r\n  members: {\r\n    name: \"Members & Policy\",\r\n    widget: \"DAO.Members.index\",\r\n    href: constructURL({ tab: \"members\", daoId: state.daoId }),\r\n  },\r\n  projects: {\r\n    name: \"Projects\",\r\n    widget: \"DAO.Projects\",\r\n    href: constructURL({ tab: \"projects\", daoId: state.daoId }),\r\n  },\r\n  followers: {\r\n    name: \"Followers\",\r\n    widget: \"DAO.Followers\",\r\n    href: constructURL({ tab: \"followers\", daoId: state.daoId }),\r\n  },\r\n  bounties: {\r\n    name: \"Bounties\",\r\n    widget: \"DAO.Bounties\",\r\n    href: constructURL({ tab: \"bounties\", daoId: state.daoId }),\r\n  },\r\n};\r\n\r\nif (!props.daoId) {\r\n  // TODO: add a proper error screen\r\n  return \"Please provide a DAO ID\";\r\n}\r\n\r\nconst tabContent = (\r\n  <Widget\r\n    src={`${widgetOwner}/widget/${tabs[state.tab || \"home\"].widget}`}\r\n    props={{\r\n      update,\r\n      tab: state.tab,\r\n      accountId: state.accountId,\r\n      daoId: state.daoId,\r\n      proposalId: state.proposalId,\r\n      ...props,\r\n    }}\r\n  />\r\n);\r\n\r\n// To keep our styles  consistent across widgets, let's define them here based on html tags and classes\r\nconst Root = styled.div`\r\n  font-family:\r\n    \"Open Sans\",\r\n    \"Manrope\",\r\n    system-ui,\r\n    -apple-system,\r\n    \"Segoe UI\",\r\n    Roboto,\r\n    \"Helvetica Neue\",\r\n    \"Noto Sans\",\r\n    \"Liberation Sans\",\r\n    Arial,\r\n    sans-serif,\r\n    \"Apple Color Emoji\",\r\n    \"Segoe UI Emoji\",\r\n    \"Segoe UI Symbol\",\r\n    \"Noto Color Emoji\";\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  color: #000;\r\n\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5,\r\n  h6 {\r\n    font-weight: 600;\r\n    letter-spacing: -0.02em;\r\n    margin-bottom: 0.5em;\r\n  }\r\n\r\n  h1 {\r\n    font-size: 28px;\r\n  }\r\n\r\n  h2 {\r\n    font-size: 24px;\r\n  }\r\n\r\n  h3 {\r\n    font-size: 20px;\r\n  }\r\n\r\n  h4 {\r\n    font-size: 16px;\r\n  }\r\n\r\n  h5 {\r\n    font-size: 14px;\r\n  }\r\n\r\n  h6 {\r\n    font-size: 12px;\r\n  }\r\n\r\n  a {\r\n    color: #000;\r\n    text-decoration: none;\r\n    transition: color 0.1s ease-in-out;\r\n  }\r\n\r\n  a:hover {\r\n    color: #4498e0;\r\n  }\r\n\r\n  .ndc-card {\r\n    border-radius: 16px;\r\n    box-shadow:\r\n      rgba(0, 0, 0, 0.1) 0 1px 3px,\r\n      rgba(0, 0, 0, 0.05) 0 1px 20px;\r\n    background-color: #fff;\r\n  }\r\n`;\r\n\r\nreturn (\r\n  <Root className=\"pb-5\">\r\n    <Widget src={`nearui.near/widget/Typography.OpenSansFont`} />\r\n\r\n    <Widget\r\n      src={`${widgetOwner}/widget/DAO.Layout.Header`}\r\n      props={{\r\n        daoId: state.daoId,\r\n      }}\r\n    />\r\n    <div className=\"w-100\">\r\n      <Widget\r\n        src={`${widgetOwner}/widget/DAO.Layout.Tabs`}\r\n        props={{\r\n          tabs: tabs,\r\n          tab: state.tab,\r\n          update,\r\n        }}\r\n      />\r\n      {tabContent}\r\n    </div>\r\n  </Root>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ihyshan.near/widget/DAO.index", "fact_widget_deployments_id": "32e6d439c72539d5021d145531f9afbb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 31}