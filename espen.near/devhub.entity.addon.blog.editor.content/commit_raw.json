{"tx_hash": "Fwv8NPinjzEYmX4co3wUxcDShicGqwNQb3AjZdvSFw2p", "action_id_social": "4CZ8z1KbrbV5P1YCvvxwjkvq9ar31EUUMgW6325pyGye-0-widget", "block_id": 105585205, "block_timestamp": "2023-11-13T05:04:07.587Z", "signer_id": "espen.near", "widget_name": "devhub.entity.addon.blog.editor.content", "source_code": "const { Card } =\n  VM.require(\"${REPL_DEVHUB}/widget/devhub.entity.addon.blog.Card\") ||\n  (() => <></>);\nconst { Page } =\n  VM.require(\"${REPL_DEVHUB}/widget/devhub.entity.addon.blog.Page\") ||\n  (() => <></>);\n\nconst categories = [\n  {\n    label: \"Guide\",\n    value: \"guide\",\n  },\n  {\n    label: \"News\",\n    value: \"news\",\n  },\n  {\n    label: \"Reference\",\n    value: \"reference\",\n  },\n];\n\nconst selectOptions = useMemo(\n  () =>\n    categories.map((it) => ({\n      label: it.label,\n      value: it.value,\n    })),\n  [categories]\n);\n\nconst Banner = styled.div`\n  border-radius: var(--bs-border-radius-xl) !important;\n  height: 100%;\n\n  & > div :not(.btn) {\n    position: absolute;\n    display: none;\n    margin: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n  }\n\n  .btn {\n    padding: 0.5rem 0.75rem !important;\n    min-height: 32;\n    line-height: 1;\n\n    border: none;\n    border-radius: 50px;\n    --bs-btn-color: #ffffff;\n    --bs-btn-bg: #087990;\n    --bs-btn-border-color: #087990;\n    --bs-btn-hover-color: #ffffff;\n    --bs-btn-hover-bg: #055160;\n    --bs-btn-hover-border-color: #055160;\n    --bs-btn-focus-shadow-rgb: 49, 132, 253;\n    --bs-btn-active-color: #ffffff;\n    --bs-btn-active-bg: #055160;\n    --bs-btn-active-border-color: #055160;\n    --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n    opacity: 0.8;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst { data, handle, onSubmit } = props;\n\nconst initialData = data;\n\nconst [content, setContent] = useState(initialData.content || \"\");\nconst [title, setTitle] = useState(initialData.title || \"\");\nconst [subtitle, setSubtitle] = useState(initialData.subtitle || \"\");\nconst [description, setDescription] = useState(initialData.description || \"\");\nconst [author, setAuthor] = useState(initialData.author || \"\");\nconst [previewMode, setPreviewMode] = useState(\"card\"); // \"card\" or \"page\"\nconst [date, setDate] = useState(initialData.date || new Date());\nconst [category, setCategory] = useState(\"guide\");\n\nconst Container = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  padding: 20px;\n  text-align: left;\n`;\n\nconst hasDataChanged = () => {\n  return (\n    content !== initialData.content ||\n    title !== initialData.title ||\n    author !== initialData.author ||\n    subtitle !== initialData.subtitle ||\n    description !== initialData.description ||\n    date !== initialData.date ||\n    category !== initialData.category\n  );\n};\n\nconst handlePublish = () => {\n  onSubmit &&\n    onSubmit(\n      {\n        id: data.id || undefined,\n        title,\n        subtitle,\n        description,\n        date,\n        content,\n        author,\n        category,\n        community: handle,\n      },\n      data.id !== undefined\n    );\n};\n\nfunction Preview() {\n  switch (previewMode) {\n    case \"card\": {\n      return (\n        <Card\n          data={{\n            title,\n            subtitle,\n            description,\n            date,\n            content,\n            author,\n            category,\n            community: handle,\n          }}\n        />\n      );\n    }\n    case \"page\": {\n      return (\n        <Page\n          data={{\n            title,\n            subtitle,\n            description,\n            date,\n            content,\n            author,\n            category,\n            community: handle,\n          }}\n        />\n      );\n    }\n  }\n}\n\nreturn (\n  <Container>\n    <ul className=\"nav nav-tabs\" id=\"editPreviewTabs\" role=\"tablist\">\n      <li className=\"nav-item\" role=\"presentation\">\n        <button\n          className=\"nav-link active\"\n          id=\"edit-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#edit\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"edit\"\n          aria-selected=\"true\"\n        >\n          Edit\n        </button>\n      </li>\n      <li className=\"nav-item\" role=\"presentation\">\n        <button\n          className=\"nav-link\"\n          id=\"preview-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#preview\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"preview\"\n          aria-selected=\"false\"\n        >\n          Preview\n        </button>\n      </li>\n    </ul>\n    <div className=\"tab-content\" id=\"editPreviewTabsContent\">\n      <div\n        className=\"tab-pane show active p-4\"\n        id=\"edit\"\n        role=\"tabpanel\"\n        aria-labelledby=\"edit-tab\"\n      >\n        <Widget\n          src=\"${REPL_DEVHUB}/widget/devhub.entity.addon.blog.editor.form\"\n          props={{\n            title,\n            setTitle,\n            subtitle,\n            setSubtitle,\n            options: selectOptions,\n            category,\n            setCategory,\n            description,\n            setDescription,\n            author,\n            setAuthor,\n            date,\n            setDate,\n            content,\n            setContent,\n          }}\n        />\n        <div\n          className={\"d-flex align-items-center justify-content-end gap-3 mt-4\"}\n        >\n          <Widget\n            src={\"${REPL_DEVHUB}/widget/devhub.components.molecule.Button\"}\n            props={{\n              classNames: { root: \"btn-success\" },\n              disabled: !hasDataChanged(),\n              icon: {\n                type: \"bootstrap_icon\",\n                variant: \"bi-check-circle-fill\",\n              },\n              label: \"Publish\",\n              onClick: handlePublish,\n            }}\n          />\n        </div>\n      </div>\n      <div\n        className=\"tab-pane\"\n        id=\"preview\"\n        role=\"tabpanel\"\n        aria-labelledby=\"preview-tab\"\n        style={{ position: \"relative\" }}\n      >\n        <div style={{ position: \"absolute\", top: 10, right: 0 }}>\n          <Widget\n            // LEGACY\n            src=\"${REPL_DEVHUB_LEGACY}/widget/gigs-board.components.molecule.button-switch\"\n            props={{\n              currentValue: previewMode,\n              key: \"previewMode\",\n              onChange: (e) => setPreviewMode(e.target.value),\n              options: [\n                { label: \"Card\", value: \"card\" },\n                { label: \"Page\", value: \"page\" },\n              ],\n\n              title: \"Preview mode selection\",\n            }}\n          />\n        </div>\n        <div className=\"w-100 h-100 p-4\">\n          <Preview />\n        </div>\n      </div>\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/espen.near/widget/devhub.entity.addon.blog.editor.content", "fact_widget_deployments_id": "de5b7feff0944640aada20184a651486", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 23}