{"tx_hash": "FnY6YMgnqFnhFqd57HmMboxeCBdtDMbCHRXvv1WXymPa", "action_id_social": "Gcg7RZKDhawqx1LzQBtCpyuFk1gMoamqW3TtjQZs25Tm-0-widget", "block_id": 104753565, "block_timestamp": "2023-11-02T09:37:26.904Z", "signer_id": "0xprometheus.near", "widget_name": "cdao-contests", "source_code": "State.init({ contests: [] });\n\nconst CardContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-items: center;\n  margin-top: 20px;\n`;\n\nconst Card = styled.div`\n  width: 200px;\n  height: 200px;\n  margin: 10px;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  cursor: pointer;\n  box-shadow: 10px 10px 30px rgba(120, 100, 1300, 0.2);\n  transition: transform 0.2s ease-in-out;\n\n  /* Zoom out on hover */\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.5);\n    position: relative;\n    transform: scale(0.95);\n  }\n`;\n\nconst CardTitle = styled.h3`\n  font-size: 16px;\n  font-weight: bold;\n  margin-top: 0;\n`;\n\nconst CardDescription = styled.p`\n  font-size: 14px;\n  margin-top: 10px;\n`;\n\nconst CardSubmissionCount = styled.div`\n  font-size: 14px;\n  margin-top: 10px;\n`;\n\nconst CardStatusDot = styled.div`\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: ${(props) => (props.isEnded ? \"red\" : \"green\")};\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\n\nconst CardStatus = styled.div`\n  color: red;\n  font-size: 16px;\n  font-weight: bold;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst CardButton = styled.button`\n  width: 100px;\n  height: 30px;\n  background-color: #000;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  margin-top: 80px;\n  \n`;\n\nconst Summary = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst contests = Near.view(\"cdao-v1.genadrop.near\", \"get_contests\", {\n  subscribe: true,\n});\n\nState.update({\n  contests,\n});\n\nconst isActive = (date) => {\n  let dt = new Date(date * 1000);\n  console.log(\"opera mini v2\", date, dt < Date.now());\n  return dt > Date.now();\n};\n\nreturn (\n  <div>\n    <h1>Contest Summary</h1>\n    <Summary>\n      <p>Total contests: {state.contests.length}</p>\n      <p>\n        Active contests{\" \"}\n        <span style={{ color: \"green\" }}>\n          (\n          {state.contests &&\n            state.contests.filter((contest) =>\n              isActive(contest[1].voting_end_time)\n            ).length}\n          )\n        </span>\n      </p>\n      <p>\n        Ended contests{\" \"}\n        <span style={{ color: \"red\" }}>\n          (\n          {state.contests &&\n            state.contests.filter((x) => !isActive(x[1].voting_end_time))\n              .length}\n          )\n        </span>\n      </p>\n    </Summary>\n    <CardContainer>\n      {state.contests &&\n        state.contests.map((contest) => (\n          <Card key={contest[0]}>\n            <CardStatusDot isEnded={!isActive(contest[1].voting_end_time)} />\n            <CardTitle>{contest[1].title}</CardTitle>\n            <CardSubmissionCount>\n              Submissions: {contest[1].submissions}\n            </CardSubmissionCount>\n            {!isActive(contest[1].voting_end_time) ? (\n              <CardStatus></CardStatus>\n            ) : (\n              \"\"\n            )}\n            <CardButton>View</CardButton>\n          </Card>\n        ))}\n    </CardContainer>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/0xprometheus.near/widget/cdao-contests", "fact_widget_deployments_id": "5558f9dccafb7ec2e3ae712a29f176de", "inserted_timestamp": "2023-11-02T11:35:53.484Z", "modified_timestamp": "2023-11-02T11:35:53.484Z", "__row_index": 6}