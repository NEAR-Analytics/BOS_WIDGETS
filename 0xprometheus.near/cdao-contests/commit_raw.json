{"tx_hash": "Fp7h17aXxD6DA1iiSAmALYuocVNXjKa7EX73rhKG13pJ", "action_id_social": "EDoJ9epuxE6cNkPUNrXyt1NgBDZ65W13Gf8XXEi8SBqQ-0-widget", "block_id": 107434994, "block_timestamp": "2023-12-08T11:58:35.428Z", "signer_id": "0xprometheus.near", "widget_name": "cdao-contests", "source_code": "State.init({ contests: [] });\r\n\r\nconst CardContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst Card = styled.div`\r\n  width: 200px;\r\n  height: 200px;\r\n  margin: 10px;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  box-shadow: 10px 10px 30px rgba(120, 100, 1300, 0.2);\r\n  transition: transform 0.2s ease-in-out;\r\n\r\n  /* Zoom out on hover */\r\n  &:hover {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    position: relative;\r\n    transform: scale(0.95);\r\n  }\r\n`;\r\n\r\nconst CardTitle = styled.h3`\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-top: 0;\r\n`;\r\n\r\nconst CardDescription = styled.p`\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst CardSubmissionCount = styled.div`\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst CardStatusDot = styled.div`\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background-color: ${(props) => (props.isEnded ? \"red\" : \"green\")};\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n`;\r\n\r\nconst CardStatus = styled.div`\r\n  color: red;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst CardButton = styled.button`\r\n  width: 100px;\r\n  height: 30px;\r\n  background-color: #000;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin-top: 80px;\r\n  \r\n`;\r\n\r\nconst Summary = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst contests = Near.view(\"fund-v1.genadrop.near\", \"get_contests\", {\r\n  subscribe: true,\r\n});\r\n\r\nState.update({\r\n  contests,\r\n});\r\nconst isActive = (date) => {\r\n  let dt = new Date(date * 1000);\r\n  console.log(\"opera mini v2\", date, dt < Date.now());\r\n  return dt > Date.now();\r\n};\r\nconst viewContest = (id) => {\r\n  State.update({\r\n    selectedContest: id,\r\n  });\r\n};\r\n\r\nreturn state.selectedContest ? (\r\n  <>\r\n    <Widget\r\n      src=\"0xprometheus.near/widget/contest-detail\"\r\n      props={{ contests: state.selectedContest }}\r\n    />\r\n  </>\r\n) : (\r\n  <div>\r\n    <h1>Contest Summary</h1>\r\n    <Summary>\r\n      <p>Total contests: {state.contests.length}</p>\r\n      <p>\r\n        Active contests{\" \"}\r\n        <span style={{ color: \"green\" }}>\r\n          (\r\n          {state.contests &&\r\n            state.contests.filter((contest) =>\r\n              isActive(contest[1].voting_end_time)\r\n            ).length}\r\n          )\r\n        </span>\r\n      </p>\r\n      <p>\r\n        Ended contests{\" \"}\r\n        <span style={{ color: \"red\" }}>\r\n          (\r\n          {state.contests &&\r\n            state.contests.filter((x) => !isActive(x[1].voting_end_time))\r\n              .length}\r\n          )\r\n        </span>\r\n      </p>\r\n    </Summary>\r\n    <CardContainer>\r\n      {state.contests &&\r\n        state.contests.map((contest) => (\r\n          <Card key={contest[0]}>\r\n            <CardStatusDot isEnded={!isActive(contest[1].voting_end_time)} />\r\n            <CardTitle>{contest[1].title}</CardTitle>\r\n            <CardSubmissionCount>\r\n              Submissions: {contest[1].submissions}\r\n            </CardSubmissionCount>\r\n            {!isActive(contest[1].voting_end_time) ? (\r\n              <CardStatus></CardStatus>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <CardButton onClick={() => viewContest(contest[0])}>\r\n              View\r\n            </CardButton>\r\n          </Card>\r\n        ))}\r\n    </CardContainer>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/0xprometheus.near/widget/cdao-contests", "fact_widget_deployments_id": "7fe6559e88418d38cb890fb42202816b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}