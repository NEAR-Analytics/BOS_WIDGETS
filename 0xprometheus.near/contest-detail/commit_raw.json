{"tx_hash": "E2LuXaWcVZTXR9t278mWmYkyYZ3NtARzZf5UkDECvmfy", "action_id_social": "Af1hUQwa6JijUDT36yE8m6zLsfnWspGb17avzXc7MXCb-0-widget", "block_id": 107434961, "block_timestamp": "2023-12-08T11:57:58.247Z", "signer_id": "0xprometheus.near", "widget_name": "contest-detail", "source_code": "const ArtGalleryContainer = styled.div`\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ArtCardContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap; /* Allow the art cards to wrap to the next row */\r\n  justify-content: center; /* Center the art cards horizontally */\r\n  gap: 20px;\r\n`;\r\n\r\nconst ArtCard = styled.div`\r\n  background-color: #fff;\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  padding: 16px;\r\n  text-align: center;\r\n  width: 300px; /* Set a fixed width for each art card */\r\n\r\n  h2 {\r\n    font-size: 1.5rem;\r\n    margin: 0;\r\n  }\r\n\r\n  p {\r\n    color: #777;\r\n    margin: 8px 0;\r\n  }\r\n\r\n  img {\r\n    max-width: 100%;\r\n    max-height: 100%; /* Ensure images do not exceed their container */\r\n    object-fit: contain; /* Maintain aspect ratio while fitting */\r\n    border-radius: 8px;\r\n  }\r\n\r\n  button {\r\n    margin-top: auto; /* Push the button to the bottom */\r\n  }\r\n}`;\r\n\r\nconst VoteButton = styled.button`\r\n  background-color: #007BFF;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n\r\n  &:hover {\r\n    background-color: #0056b3;\r\n  }\r\n`;\r\n\r\nconst SubmitArtButton = styled.button`\r\n  background-color: #28a745;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 8px 16px;\r\n  margin: 5px 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n\r\n  &:hover {\r\n    background-color: #218838;\r\n  }\r\n`;\r\n\r\nlet arts = [];\r\nif (!arts) {\r\n  return <p>Loading</p>;\r\n}\r\nconst contest_id = props.contests;\r\n\r\nconst contests =\r\n  Near.view(\"fund-v1.genadrop.near\", \"get_contest_arts\", {\r\n    contest_id: contest_id,\r\n    subscribe: true,\r\n  }) || [];\r\n\r\nconst handleVoteClick = (owner) => {\r\n  Near.call(\r\n    \"fund-v1.genadrop.near\",\r\n    \"vote\",\r\n    {\r\n      submission_owner: owner,\r\n      contest_id: contest_id,\r\n    },\r\n    \"300000000000000\",\r\n    \"10000000000000000000000\"\r\n  );\r\n};\r\n\r\nconst handleArtSelection = (nft_data) => {\r\n  console.log(\"details retrieved\", nft_data);\r\n  Near.call(\r\n    \"fund-v1.genadrop.near\",\r\n    \"submit_art\",\r\n    {\r\n      nft_contract_id: nft_data.contractId,\r\n      token_id: nft_data.tokenId.toString(),\r\n      contest_id: contest_id,\r\n    },\r\n    \"75000000000000\",\r\n    \"10000000000000000000000\"\r\n  );\r\n};\r\n\r\nconst toggleArtSelection = () => {\r\n  console.log(\"Long game....\", state.showArtSelection);\r\n  State.update({\r\n    showArtSelection: !state.showArtSelection,\r\n  });\r\n};\r\n\r\nreturn (\r\n  <ArtGalleryContainer>\r\n    <SubmitArtButton onClick={toggleArtSelection}>\r\n      {state.showArtSelection ? \"close arts selection\" : \"Make Art Entry\"}\r\n    </SubmitArtButton>\r\n    {state.showArtSelection && (\r\n      <Widget\r\n        src=\"sainthiago.near/widget/nft-selector\"\r\n        props={{ accountId: context.accountId, onChange: handleArtSelection }}\r\n      />\r\n    )}\r\n    <ArtCardContainer>\r\n      {contests.map((art, index) => (\r\n        <ArtCard key={index}>\r\n          <img\r\n            src={\r\n              art[1].image_url ||\r\n              \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\"\r\n            }\r\n            alt={art[1].title}\r\n          />\r\n          <h2>{art[1].title}</h2>\r\n          <p>By {art[0]}</p>\r\n          <p>{art[1].votes} Votes</p>\r\n          <VoteButton onClick={() => handleVoteClick(art[0])}>Vote</VoteButton>\r\n        </ArtCard>\r\n      ))}\r\n    </ArtCardContainer>\r\n  </ArtGalleryContainer>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/0xprometheus.near/widget/contest-detail", "fact_widget_deployments_id": "3813de0605b8b22337335580390acdfe", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}