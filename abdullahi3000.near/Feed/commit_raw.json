{"tx_hash": "CUbvej9okS1zXHyni32La1ubycR76EqMx2fecVPFicMs", "action_id_social": "D3iDmUBEhu4D58gWxJqywQgHxpjBqVcKSFwaS4PmsbbZ-0-widget", "block_id": 115713578, "block_timestamp": "2024-03-29T11:02:00.288Z", "signer_id": "abdullahi3000.near", "widget_name": "Feed", "source_code": "const { Feed } = VM.require(\"devs.near/widget/Feed\") || {\n  Feed: () => <></>,\n};\nconst { Post, Button } = VM.require(\"abdullahi3000.near/widget/components\") || {\n  Post: () => <></>,\n  Button: () => <></>,\n};\nconst { Header } = VM.require(\"buildhub.near/widget/components.Header\") || {\n  Header: () => <></>,\n};\n\nconst LoginContainer = styled.div`\n  background-color: #23242b;\n  color: #fff;\n\n  width: 100%;\n  height: 16rem;\n  border-radius: 1rem;\n\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  align-items: center;\n  justify-content: center;\n\n  margin-bottom: 1rem;\n`;\n\nconst { name: feedName, template, requiredHashtags, customActions } = props;\n\n// for modals\nconst [item, setItem] = useState(null);\nconst [showProposeModal, setShowProposeModal] = useState(false);\nconst toggleProposeModal = () => {\n  setShowProposeModal(!showProposeModal);\n};\n\nconst modalToggles = {\n  propose: toggleProposeModal,\n};\n\ncustomActions = [\n  {\n    type: \"modal\",\n    icon: \"bi-file-earmark-text\",\n    label: \"Propose\",\n    onClick: (modalToggles) => {\n      const toggle = modalToggles.propose;\n      toggle();\n    },\n  },\n];\n\nreturn (\n  <div key={feedName}>\n    <Header>{feedName} Feed</Header>\n    {/* Modals */}\n    <Widget\n      src=\"buildhub.near/widget/components.modals.CreateProposal\"\n      loading=\"\"\n      props={{\n        showModal: showProposeModal,\n        toggleModal: toggleProposeModal,\n        item: item,\n      }}\n    />\n    {!context.accountId ? ( // if not logged in\n      <LoginContainer>\n        <p>Please login in order to post.</p>\n        <a\n          href={\"https://nearbuilders.org/join\"}\n          style={{ textDecoration: \"none\" }}\n        >\n          <Button variant=\"primary\">Login</Button>\n        </a>\n      </LoginContainer>\n    ) : (\n      context.accountId == \"abdullahi3000.near\" && (\n        <Widget\n          loading={\n            <div\n              className=\"placeholder-glow h-100 w-100\"\n              style={{ height: 400 }}\n            ></div>\n          }\n          src=\"buildhub.near/widget/Compose\"\n          props={{\n            draftKey: feedName,\n            template: template,\n            requiredHashtags: requiredHashtags,\n            feed: { ...props },\n          }}\n        />\n      )\n    )}\n    <Feed\n      index={(requiredHashtags || []).map((it) => ({\n        action: \"hashtag\",\n        key: it,\n        options: {\n          limit: 10,\n          order: \"desc\",\n          subscribe: true,\n        },\n        cacheOptions: {\n          ignoreCache: true,\n        },\n        required: true,\n      }))}\n      Item={(p) => (\n        <>\n          {p.accountId == \"abdullahi3000.near\" && (\n            <Post\n              accountId={p.accountId}\n              blockHeight={p.blockHeight}\n              noBorder={true}\n              currentPath={`/abdullahi3000.near/widget/app?page=feed`}\n              customActions={customActions}\n              modalToggles={modalToggles}\n              setItem={setItem}\n            />\n          )}\n        </>\n      )}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/abdullahi3000.near/widget/Feed", "fact_widget_deployments_id": "95cf752cb831ac6913a233feb013334d", "inserted_timestamp": "2024-03-29T12:35:00.532Z", "modified_timestamp": "2024-03-29T12:35:00.532Z", "__row_index": 62}