{"tx_hash": "CEGzMepo9wtCjNywWUDV7aqLsQhz1NmjDcubVMEECbPi", "action_id_social": "79je6LHnh4tpr8avV6dyQ6JicrJHKn53quGMkZGLL8yD-0-widget", "block_id": 95562678, "block_timestamp": "2023-07-02T22:38:40.432Z", "signer_id": "mattb.near", "widget_name": "NDCDocs.Components.ArticlesList", "source_code": "let { writersAllowed } = props;\n\nconst ARTICLES_ADDRESS = \"ndcWikiArticle\";\nconst ALLOWED_AUTHORS = writersAllowed || [\n  \"neardigitalcollective.near\",\n  \"blaze.near\",\n  \"jlw.near\",\n  \"kazanderdad.near\",\n  \"joep.near\",\n  \"sarahkornfeld.near\",\n  \"yuensid.near\",\n  \"shubham007.near\",\n  \"psalm.near\",\n  \"fiftycent.near\",\n];\nconst ARTICLES_NOT_ALLOWED = [91092435, 91092174, 91051228, 91092223, 91051203];\nconst WIDGET_AUTHOR = \"neardigitalcollective.near\";\n\nState.init({\n  loaded: false,\n});\n\nconst postsIndex =\n  Social.index(ARTICLES_ADDRESS, \"main\", {\n    order: \"desc\",\n    accountId: undefined,\n  }) || [];\n\nconst ARTICLES =\n  postsIndex &&\n  postsIndex\n    .reduce((acc, { accountId, blockHeight }) => {\n      const postData = Social.get(\n        `${accountId}/${ARTICLES_ADDRESS}/main`,\n        blockHeight\n      );\n      const postDataWithBlockHeight = { ...JSON.parse(postData), blockHeight };\n\n      return [...acc, postDataWithBlockHeight];\n    }, [])\n    .filter((article) =>\n      ALLOWED_AUTHORS.some((addr) => addr === article.author)\n    )\n    .filter((article) => !ARTICLES_NOT_ALLOWED.includes(article.blockHeight));\n\nconst FILTERED_ARTICLES =\n  ARTICLES.length &&\n  ARTICLES.reduce((acc, article) => {\n    State.update({ loaded: true });\n\n    if (!acc.some(({ articleId }) => articleId === article.articleId)) {\n      return [...acc, article];\n    } else {\n      return acc;\n    }\n  }, []);\n\nconst getDateLastEdit = (timestamp) => {\n  const date = new Date(Number(timestamp));\n  const dateString = {\n    date: date.toLocaleDateString(),\n    time: date.toLocaleTimeString(),\n  };\n  return dateString;\n};\n\nreturn <div>{state.loaded ? \"Hello World\" : \"Loading...\"}</div>;\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/mattb.near/widget/NDCDocs.Components.ArticlesList", "fact_widget_deployments_id": "7196e5f5da13f3668e84be9cdf6e70a3", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 2}