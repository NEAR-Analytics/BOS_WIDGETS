{"tx_hash": "7ix5wmT8D7Eu6awr6tDqmKzvijKVkBoYhnt1KYfVij6P", "action_id_social": "Bxz1uiTQDF8RunmQDp8ZRoX7uVcpQpE4na1zU8qmcWXj-0-widget", "block_id": 101291368, "block_timestamp": "2023-09-17T00:42:12.435Z", "signer_id": "mattb.near", "widget_name": "TranslationsLib", "source_code": "const TranslationsLib = {\n  translations: {},\n  availableLanguages: null,\n  currentLanguage: null,\n  translationsLoaded: false,\n  load: (url, language) => {\n    TranslationsLib.tryLoadByUrl(url, language);\n    TranslationsLib.tryLoadByRequire(url, language);\n  },\n  setTranslations: (translations, language) => {\n    if (!!translations[language]) {\n      TranslationsLib.translations = translations[language];\n      TranslationsLib.translationsLoaded = true;\n      TranslationsLib.refresh();\n    } else {\n      TranslationsLib.throw(\n        \"Provided translations file is empty or is not an object\"\n      );\n    }\n  },\n  tryLoadByUrl: (url, language) => {\n    if (url.indexOf(\"https://\")) {\n      let data = fetch(url);\n      TranslationsLib.setTranslations(data.body, language);\n    }\n  },\n  tryLoadByRequire: (path, language) => {\n    try {\n      TranslationsLib.setTranslations(VM.require(path), language);\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  throw: (message) => {\n    console.log(message);\n\n  },\n  refresh: () => {\n    if (!!onRefresh && typeof onRefresh === \"function\") {\n      onRefresh(TranslationsLib);\n    }\n  },\n  get: (id, defaultText) => {\n    let translation = id.indexOf(\".\")\n      ? TranslationsLib.getTranslationByBreadcrumb(id)\n      : TranslationsLib.getTranslation(id);\n\n    return translation || defaultText;\n  },\n  getTranslationByBreadcrumb: (breadcrumb) => {\n    let currentPath = {};\n    let result = \"\";\n    breadcrumb.split(\".\").every((part) => {\n      if (part in currentPath) {\n        if (typeof currentPath[part] === \"string\") {\n          result = currentPath[part];\n          return false;\n        } else {\n          currentPath = currentPath[part];\n          return true;\n        }\n      } else if (part in TranslationsLib.translations) {\n        if (typeof TranslationsLib.translations[part] === \"string\") {\n          result = TranslationsLib.translations[part];\n          return false;\n        } else {\n          currentPath = TranslationsLib.translations[part];\n          return true;\n        }\n      }\n    });\n\n    return result;\n  },\n  getTranslation: (id) => {\n    return id in TranslationsLib.translations &&\n      typeof TranslationsLib.translations[id] === \"string\"\n      ? TranslationsLib.translations[id]\n      : \"\";\n  },\n};\n\nreturn TranslationsLib;\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/mattb.near/widget/TranslationsLib", "fact_widget_deployments_id": "8eb01fd79e8916df955dab98e05c3961", "inserted_timestamp": "2023-09-17T02:39:53.023Z", "modified_timestamp": "2023-09-17T02:39:53.023Z", "__row_index": 2}