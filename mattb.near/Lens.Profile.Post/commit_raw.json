{"tx_hash": "AA5z1V37q1maCYsPwG4C6DkXygtVrve6oAbA7RnCe8r", "action_id_social": "FbpUbiss7wazsCXFZBAxFaYyZZQZm3rBD5fGMxzgjzsc-0-widget", "block_id": 96370169, "block_timestamp": "2023-07-13T10:44:47.195Z", "signer_id": "mattb.near", "widget_name": "Lens.Profile.Post", "source_code": "const { postId, post } = props;\nconst DEFAULT_POST_ID = \"0x01-0x02\";\n\nState.init({\n  post: post || null,\n  sdk: null,\n  displayCommentSection: false,\n  comments: [],\n});\n\nif (!state.post && state.sdk) {\n  state.sdk.getPost(postId || DEFAULT_POST_ID).then((payload) => {\n    State.update({ post: payload.body.data.publication });\n  });\n}\n\nif (state.displayCommentSection && state.sdk) {\n  state.sdk.getPostComments(postId || DEFAULT_POST_ID).then((payload) => {\n    console.log(payload.body.data.publications.items);\n    State.update({ comments: payload.body.data.publications.items });\n  });\n}\n\nconst Box = styled.div`\n    display:flex;\n    flex-direction:column;\n    width:100%;\n    max-width:500px;\n    background-color:#F2F2F2;\n    border-radius:20px;\n    border: 3px solid rgba(0,0,0,.05);\n    box-sizing:border-box;\n    padding:1.5rem;\n\n    * {\n        padding:0;\n        margin:0;\n    }\n`;\n\nconst Profile = styled.div`\n    display:flex;\n`;\n\nconst Avatar = styled.div`\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    width:60px;\n    height:60px;\n    border-radius:100%;\n    background-position:center;\n    background-size:cover;\n    background-repeat:no-repeat;\n    background-color:rgba(0,0,0,.05);\n    box-shadow: 0 0 0 3px rgba(0,0,0,.05);\n`;\n\nconst Details = styled.div`\n    display:flex;\n    justify-content:center;\n    flex-direction:column;\n    flex-grow:1;\n    box-sizing:border-box;\n    padding: 0 .7rem;\n    color;#000;\n    opacity:.7;\n    line-height:1.4rem;\n    transition: all .2s;\n\n    &:hover {\n        transition: all .2s;\n        opacity:.9;\n    }\n\n    p.name {\n        font-size:1.3rem;\n        font-weight:bold;\n        letter-spacing:-.5px;\n    }\n\n    p.handle {\n        font-size:.8rem;\n        font-weight:bold;\n        opacity:.7;\n    }\n\n    p.time {\n        font-size:.8rem;\n    }\n`;\n\nconst Post = styled.div`\n    width:100%;\n    height:100%;\n    flex-grow:1;\n    background-color:#fff;\n    border-radius:20px;\n    margin:1.3rem 0;\n    box-sizing:border-box;\n    padding:1rem;\n    color:rgba(0,0,0,.8);\n    word-break:break-words;\n`;\n\nconst Time = styled.div`\n    margin-top:1rem;\n    padding: .8rem 0 0;\n    font-size:.8rem;\n    border-top:1px solid rgba(0,0,0,.1);\n`;\n\nconst Actions = styled.div`\n    display:flex;\n    justify-content:space-between;\n    padding:1.6rem 0 0;\n    text-align:center;\n    border-top: 2px solid rgba(0,0,0,.05);\n\n    p {\n        position:relative;\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        width:calc(30px + 1rem);\n        height:calc(30px + 1rem);\n        font-size:1.2rem;\n        font-weight:bold;\n        padding:1rem;\n        border-radius:100%;\n        background-color:#E6E6E6;\n        color:red;\n        cursor:pointer;\n        border: 2px solid rgba(0,0,0,.05);\n\n        &:hover {\n            img {\n                opacity:.9;\n                transition: all .2s;\n            }\n\n            .tip {\n                opacity:1;\n                transition: all .2s;\n            }\n        }\n\n        .badge {\n            position:absolute;\n            top:0;\n            transform:translateX(calc(50% + 8px));\n            font-size:.7rem;\n            color:#fff;\n            padding: 2px 4px;\n            background-color:#35393C;\n            border-radius:10px;\n            border: 1px solid rgba(0,0,0,.05);\n        }\n\n        .tip {\n            opacity:0;\n            pointer-events:none;\n            display:block;\n            position:absolute;\n            bottom:-85%;\n            font-size:.8rem;\n            color: #fff;\n            background-color:#35393C;\n            padding: 2px 8px;\n            border-radius:5px;\n            font-weight:normal;\n            transition: all .2s;\n        }\n        \n        img {\n            max-height:24px;\n            opacity:.6;\n            transition: all .2s;\n        }\n    }\n`;\n\nconst Comments = styled.div`\n    border-top: 2px solid rgba(0,0,0,.05);\n    margin-top:1.5rem;\n`;\n\nconst Comment = styled.div`\n    width:100%;\n    min-height:100px;\n    margin-top:20px;\n    border-bottom: 2px solid rgba(0,0,0,.05);\n`;\n\nconst Content = styled.div`\n    padding:1rem 0;\n    font-size:.8rem;\n`;\n\nreturn (\n  <>\n    <Widget\n      src=\"mattb.near/widget/LensSDK\"\n      props={{\n        onLoad: (sdk) => State.update({ sdk: sdk }),\n        onRefresh: (sdk) => State.update({ sdk: sdk }),\n        loaded: !!state.sdk,\n      }}\n    />\n\n    {state.sdk && state.post && (\n      <Box>\n        <Profile>\n          <Avatar\n            style={{\n              backgroundImage: `url(\"${state.post.profile.picture.original.url}\")`,\n            }}\n          ></Avatar>\n          <Details>\n            <p class=\"name\">{state.post.profile.name}</p>\n            <p class=\"handle\">@{state.post.profile.handle}</p>\n          </Details>\n        </Profile>\n        <Post>\n          <p>{state.post.metadata.content}</p>\n          <Time>\n            <p>\n              {state.post.createdAt} \u00b7{\" \"}\n              {state.post.appId && `Posted via ${state.post.appId}`}\n            </p>\n          </Time>\n        </Post>\n        <Actions>\n          <p\n            onClick={() =>\n              State.update({\n                displayCommentSection: !state.displayCommentSection,\n              })\n            }\n          >\n            <img src=\"https://ipfs.near.social/ipfs/bafkreihzp4er5k54cqym5tzj6yqo5oftnpfillxshuou6qyjbbap677lyu\" />\n            <span class=\"badge\">{state.post.stats.totalAmountOfComments}</span>\n            <span class=\"tip\">Comment</span>\n          </p>\n          <p>\n            <img src=\"https://ipfs.near.social/ipfs/bafkreihzytwkhu3u6jc7yapsbuwsff33wlltrlcyv2s7h6jqld7qdmfxqm\" />\n            <span class=\"badge\">{state.post.stats.totalAmountOfMirrors}</span>\n            <span class=\"tip\">Mirror</span>\n          </p>\n          <p>\n            <img src=\"https://ipfs.near.social/ipfs/bafkreiag6hlzwic63nonmqon5cdfs6hbw3qzpdvz3nhckfvezcthc3otrq\" />\n            <span class=\"badge\">{state.post.stats.totalAmountOfCollects}</span>\n            <span class=\"tip\">Collect</span>\n          </p>\n          <p>\n            <img src=\"https://ipfs.near.social/ipfs/bafkreieqyco26dt23l4v66ppp3sdh6pei72h4pdirhl7ety6rxpmxdtra4\" />\n            <span class=\"badge\">{state.post.stats.totalUpvotes}</span>\n            <span class=\"tip\">Like</span>\n          </p>\n        </Actions>\n        {state.displayCommentSection && (\n          <Comments>\n            {state.comments.length > 0 &&\n              state.comments.map((comment) => (\n                <Comment>\n                  <Profile>\n                    <Avatar\n                      style={{\n                        backgroundImage: `url(\"${comment.profile.picture.original.url}`,\n                        maxWidth: \"40px\",\n                        maxHeight: \"40px\",\n                      }}\n                    ></Avatar>\n                    <Details>\n                      <p class=\"name\">{comment.profile.name}</p>\n                      <p class=\"handle\">@{comment.profile.handle}</p>\n                    </Details>\n                  </Profile>\n                  <Content>{comment.metadata.content}</Content>\n                </Comment>\n              ))}\n          </Comments>\n        )}\n      </Box>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mattb.near/widget/Lens.Profile.Post", "fact_widget_deployments_id": "573162f90cf1b7a40535b67b06792bae", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}