{"tx_hash": "GysiWMXSY3ofCafT63oqby9mUzqUMEvdxCTxhe2Ujrze", "action_id_social": "C7RGRNyUyHiXFZCem7bJtwVzT2h2h1vyLEKC6GmYd3fv-0-widget", "block_id": 100917867, "block_timestamp": "2023-09-11T23:22:15.720Z", "signer_id": "mattb.near", "widget_name": "NearBox.Views.App", "source_code": "const { MailChain, onMessageSent, onLogout } = props;\nconst WIDGET_OWNER = \"mattb.near\";\n\nState.init({\n  displayMessage: null,\n  writeMessage: false,\n  messages: Storage.privateGet(\"messages\") || [],\n});\n\nconst Main = styled.div`\n    width:100%;\n    height:calc(100vh - 70px);\n    background-color:#fff;\n`;\n\nconst Header = styled.div`\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    padding:.5rem 1rem;\n    box-sizing:border-box;\n    border-top:5px solid #0178D4;\n    background-color:#fff;\n`;\n\nconst Body = styled.div`\n    display:flex;\n    max-width:1080px;\n    margin:0 auto;\n`;\n\nconst Logout = styled.div`\n  display:flex;\n  align-items:center;\n  font-size:.8rem;\n  padding:.5rem 1rem;\n  background-color:#fafafa;\n  border-radius:10px;\n\n  * {\n    opacity:.6;\n    transition: all .2s;\n\n    :hover {\n      opacity:1;\n      transition: all .2s;\n    }\n  }\n\n  p {\n    margin:0;\n    margin-right:.5rem;\n    font-weight:bold;\n  }\n\n  img {\n    cursor:pointer;\n    width:17px;\n    height:17px;\n  }\n`;\n\nconst WriteMessage = styled.div`\n  position:fixed;\n  bottom:0;\n  right:20px;\n`;\n\nconst HeaderWrapper = styled.div`\n  display:flex;\n  justify-content:space-between;\n  align-items:center;\n  width:100%;\n  max-width:1080px;\n  margin: 0 auto;\n  div:first-of-type {\n      transform:scale(.8);\n      transform-origin: center left;\n  }\n`;\n\nreturn (\n  <Main>\n    <Header>\n      <HeaderWrapper>\n      <Widget src={`${WIDGET_OWNER}/widget/NearBox.Components.Logo`} />\n\n      <Logout>\n        {Mailchain.user.address}\n        <p>mattb@mailchain.com</p>\n        <img\n          src=\"https://ipfs.near.social/ipfs/bafkreiem7zs4oxkkgsr2hgret2z2h3fj76kngsbmkdstfijcsyakioklzu\"\n          onClick={() => onLogout({ logged: false })}\n        />\n      </Logout>\n      </HeaderWrapper>\n    </Header>\n    <Body>\n      <Widget\n        src={`${WIDGET_OWNER}/widget/NearBox.Components.Sidebar`}\n        props={{\n          onRefresh: (state) => State.update(state),\n        }}\n      />\n\n      <Widget\n        src={`${WIDGET_OWNER}/widget/NearBox.Components.MessageList`}\n        props={{\n          messages: state.messages,\n          onRefresh: (data) => State.update(data),\n        }}\n      />\n\n      {state.displayMessage && (\n        <Widget\n          src={`${WIDGET_OWNER}/widget/NearBox.Components.ReadMessage`}\n          props={{\n            message: state.displayMessage,\n          }}\n        />\n      )}\n\n      {state.writeMessage && (\n        <WriteMessage>\n          <Widget\n            src={`${WIDGET_OWNER}/widget/NearBox.Components.WriteMessage`}\n            props={{\n              MailChain: MailChain,\n              onMessageSent: (message) => {\n                State.update({\n                  messages: [...state.messages, message],\n                });\n                onMessageSent();\n              },\n              onRefresh: (refresh) => {\n                State.update(refresh);\n              },\n            }}\n          />\n        </WriteMessage>\n      )}\n    </Body>\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mattb.near/widget/NearBox.Views.App", "fact_widget_deployments_id": "a509483851fb4739a722d3220204acfd", "inserted_timestamp": "2023-09-12T01:02:38.285Z", "modified_timestamp": "2023-09-12T01:02:38.285Z", "__row_index": 16}