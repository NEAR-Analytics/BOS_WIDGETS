{"tx_hash": "3HYZUBq1UjosjWJQbkYeBMANeEwudrUowsKdwVESCiF2", "action_id_social": "H1H9s68dWCYUKLKuViuYnyP96QMje9tTgdFd1KwBHfb5-0-widget", "block_id": 108109831, "block_timestamp": "2023-12-16T19:08:11.004Z", "signer_id": "chris-x.near", "widget_name": "AirStorage", "source_code": "const buttonText = props.buttonText || \"Upload a file\";\n\nState.init({\n  uploading: false,\n  cid: null,\n  filename: null,\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nreturn (\n  <>\n    <h1>AirStorage</h1>\n    <h1>AirStorage3</h1>\n    <div>\n      <Files\n        multiple={false}\n        accepts={[\n          \"image/*\",\n          \"video/*\",\n          \"audio/*\",\n          \"font/*\",\n          \"application/*\",\n          \"font/*\",\n        ]}\n        minFileSize={1}\n        clickable\n        className=\"btn btn-outline-primary\"\n        onChange={(files) => {\n          if (!files || !files.length) return;\n\n          const [body] = files;\n\n          State.update({ uploading: true, cid: null });\n          asyncFetch(\"https://ipfs.near.social/add\", {\n            method: \"POST\",\n            headers: { Accept: \"application/json\" },\n            body,\n          }).then(({ body: { cid } }) => {\n            State.update({ cid, filename: body.name, uploading: false });\n            // props.update(cid);\n          });\n        }}\n      >\n        {state.uploading ? \"Uploading\" : state.cid ? \"Replace\" : buttonText}\n      </Files>\n    </div>\n    <div>\n      {state.cid ? (\n        <>\n          <h3>File Uploaded</h3>\n          <a>{state.filename}</a>\n          <a> | CID : {state.cid} | </a>\n          <a href={ipfsUrl(state.cid)} target={\"_blank\"}>\n            Link\n          </a>\n        </>\n      ) : (\n        <></>\n      )}\n\n      <h3>My Files</h3>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chris-x.near/widget/AirStorage", "fact_widget_deployments_id": "0c57c6dc9d723b64d1b38c88022342c0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}