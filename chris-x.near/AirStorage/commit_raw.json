{"tx_hash": "DakU9MZkJJJeVjXXjTdUtpBJbY1vULvoonX7fTkRSn1a", "action_id_social": "GBoYNQAsGwKzmhiXU6ZwqBTDYc1cabWiHyLQYUZfkKQK-0-widget", "block_id": 107614159, "block_timestamp": "2023-12-10T17:14:07.287Z", "signer_id": "chris-x.near", "widget_name": "AirStorage", "source_code": "// const fileAccept = props.fileAccept || \"*\";\n// const fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\n\n// if (!props.update) return \"Update function is required\";\n\nState.init({\n  uploading: false,\n  cid: null,\n  filename: null,\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nreturn (\n  <>\n    <div>\n      <Files\n        multiple={false}\n        accepts={[\n          \"image/*\",\n          \"video/*\",\n          \"audio/*\",\n          \"font/*\",\n          \"application/*\",\n          \"font/*\",\n        ]}\n        minFileSize={1}\n        clickable\n        className=\"btn btn-outline-primary\"\n        onChange={(files) => {\n          if (!files || !files.length) return;\n\n          const [body] = files;\n\n          State.update({ uploading: true, cid: null });\n          asyncFetch(\"https://ipfs.near.social/add\", {\n            method: \"POST\",\n            headers: { Accept: \"application/json\" },\n            body,\n          }).then(({ body: { cid } }) => {\n            State.update({ cid, filename: body.name, uploading: false });\n            // props.update(cid);\n          });\n        }}\n      >\n        {state.uploading ? \"Uploading\" : state.cid ? \"Replace\" : buttonText}\n      </Files>\n    </div>\n    <div>\n      <h1>File Uploaded</h1>\n      {state.cid ? (\n        <a href={ipfsUrl(state.cid)} download>\n          {state.filename} | CID : {state.cid}\n        </a>\n      ) : (\n        <></>\n      )}\n    </div>\n  </>\n);\n", "metadata": {"description": "## version. 1\n- upload any file type", "name": "AirStorage", "tags": {"bos-gg": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chris-x.near/widget/AirStorage", "fact_widget_deployments_id": "8fdc699c35399bdd6730575752010258", "inserted_timestamp": "2023-12-10T19:19:52.628Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}