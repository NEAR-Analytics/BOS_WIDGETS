{"tx_hash": "4R43vvYz1KbGMoXBSXUpTCBzRZnmP5fkcewb3nWmJZp8", "action_id_social": "5yr5ew2hQvUkPHrUWVwyyFRoD7mxFSiauFsiVt1h5Efe-0-widget", "block_id": 104677869, "block_timestamp": "2023-11-01T09:50:54.398Z", "signer_id": "jgodwill.near", "widget_name": "CPlanet.ProfileImage", "source_code": "const accountId = props.accountId ?? context.accountId;\r\nconst className = props.className ?? \"profile-image d-inline-block\";\r\nconst style = props.style ?? { width: \"3em\", height: \"3em\" };\r\nconst imageStyle = props.imageStyle ?? { objectFit: \"cover\" };\r\nconst imageClassName = props.imageClassName ?? \"rounded w-100 h-100\";\r\nconst thumbnail = props.thumbnail ?? \"thumbnail\";\r\n\r\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\r\n\r\nconst name = profile.name || \"No-name profile\";\r\nconst image = profile.image;\r\nconst title = props.title ?? `${name} @${accountId}`;\r\nconst tooltip =\r\n  props.tooltip && (props.tooltip === true ? title : props.tooltip);\r\nconst fast = props.fast || (!props.profile && !!accountId);\r\nif (accountId !== state.accountId) {\r\n  State.update({\r\n    fastImageUrl: `https://i.near.social/magic/${\r\n      thumbnail || \"large\"\r\n    }/https://near.social/magic/img/account/${accountId}`,\r\n    accountId,\r\n  });\r\n}\r\nconst fallbackUrl =\r\n  \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\";\r\n\r\nconst inner = fast ? (\r\n  <div className={className} style={style} key={state.fastImageUrl}>\r\n    <img\r\n      className={imageClassName}\r\n      style={imageStyle}\r\n      src={state.fastImageUrl}\r\n      alt={title}\r\n      onError={() => {\r\n        if (state.fastImageUrl !== fallbackUrl) {\r\n          State.update({\r\n            fastImageUrl: fallbackUrl,\r\n          });\r\n        }\r\n      }}\r\n    />\r\n  </div>\r\n) : (\r\n  <div className={className} style={style} key={JSON.stringify(image)}>\r\n    <Widget\r\n      loading={\r\n        <div\r\n          className={`d-inline-block ${imageClassName}`}\r\n          style={imgWrapperStyle}\r\n        />\r\n      }\r\n      src=\"mob.near/widget/Image\"\r\n      props={{\r\n        image,\r\n        alt: title,\r\n        className: imageClassName,\r\n        style: imageStyle,\r\n        thumbnail,\r\n        fallbackUrl,\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n\r\nreturn props.tooltip ? (\r\n  <Widget\r\n    loading={inner}\r\n    src=\"jgodwill.near/widget/CPlanet.Profile.N.OverlayTrigger\"\r\n    props={{ accountId, children: inner }}\r\n  />\r\n) : (\r\n  inner\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgodwill.near/widget/CPlanet.ProfileImage", "fact_widget_deployments_id": "c0778f9cd5e490d12e8c1ba5eb160583", "inserted_timestamp": "2023-11-01T11:44:23.726Z", "modified_timestamp": "2023-11-01T11:44:23.726Z", "__row_index": 2}