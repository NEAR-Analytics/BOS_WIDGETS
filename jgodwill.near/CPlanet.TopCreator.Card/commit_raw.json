{"tx_hash": "C9d68FWfwLHC97rmdtp1TeKnsfn2tirY5i6dV2hvXGqG", "action_id_social": "8GaFTM66ajGUVeXXtk6bMngz1tgMD51z5RLocoLPHYUQ-0-widget", "block_id": 104773848, "block_timestamp": "2023-11-02T15:57:23.548Z", "signer_id": "jgodwill.near", "widget_name": "CPlanet.TopCreator.Card", "source_code": "// const daoId = props.daoId ?? \"dao.near\";\nconst accountId = props.accountId ?? context.accountId;\nconst tooltip =\n  props.tooltip && (props.tooltip === true ? title : props.tooltip);\nif (!accountId) {\n  return \"Account ID not provided\";\n}\n\nconst CardRoot = styled.div`\n    width: 315px;\n    // width: 100%;\n    height: fit-content;\n    border: 1px solid #EFEFEF;\n    border-radius: 8px;\n    background: #FFF;\n    overflow: hidden;\n    box-shadow: 2px 2px 12px 0px rgba(0, 0, 0, 0.05);\n    margin-bottom: 20px;\n    display: flex;\n    flex-direction: column;\n    *{\n      font-family: Helvetica Neue; \n    }\n    &>a{\n      text-decoration: none;\n    }\n`;\nconst Top = styled.div`\n    height: 72.195px;\n   > img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n    position: relative;\n    width: 100%;\n    background: black;\n    div {\n      position: absolute;\n      top: 40px;\n      left: 10px;;\n      img {\n        width: 66px;\n        height: 66px;\n        object-fit: cover;\n        flex-shrink: 0;\n        border-radius: 50%;\n        border 1px solid #fff;\n      }\n    }\n`;\n\nconst Bottom = styled.div`\n    h1 {\n        overflow: hidden;\n        color: #000;\n        text-overflow: ellipsis;\n        whitespace: nowrap;\n        font-family: Helvetica Neue;\n        font-size: 24px;\n        font-style: normal;\n        font-weight: 700;\n        line-height: normal;\n        text-transform: uppercase;\n    }\n`;\n\nconst ImageProfile = styled.div`\n  img {\n    position: absolute;\n    width: 66px;\n    height: 66px;\n    flex-shrink: 0;\n    border: 1px solid white;\n    border-radius: 50%;\n    top: 45px;\n    object-fit: cover;\n    background: black;\n    left: 16px;\n  }\n`;\n\nconst HeaderText = styled.div`\nmargin-top: 30px;\nborder-right: 1px dashed rgba(0, 0, 0, 0.30);\n    flex: 1;\n    padding: 20px 40px 10px 0px;\n  p {\n    color: #000; \n    font-size: 16px;\n    font-style: normal;\n    font-weight: 700;\n    line-height: 160%; /* 25.6px */ \n  }\n`;\n\nconst CardBody = styled.div`\ndisplay: flex;\npadding: 0 16px;\njustify-content: space-between;\n`;\n\nconst AmountSec = styled.div`\n  flex: 1;\n   margin: 45px 0; \n  &>.nfts {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    // gap: .5rem;\n    *{margin: unset;}\n    .title {\n        color: #000;\n        font-family: Helvetica Neue;\n        font-size: 12px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 160%; /* 19.2px */ \n    }\n    .details{\n      font-size: 12px;\n      font-style: normal;\n      font-weight: 300;\n      line-height: 160%; /* 19.2px */ \n    }\n  }\n`;\n\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\n\nif (profile === null) {\n  return \"Loading\";\n}\n\nconsole.log(profile);\n\nconst shortenLength = 15;\n\nfunction makeAccountIdShorter(accountId) {\n  if (accountId.length > shortenLength) {\n    return accountId.slice(0, shortenLength) + \"...\";\n  }\n  return accountId;\n}\nconst inner = (\n  <a\n    href={`/mob.near/widget/ProfilePage?accountId=${accountId}`}\n    className=\"text-decoration-none\"\n  >\n    <HeaderText>\n      <p>{accountId ? makeAccountIdShorter(accountId) : `Name`}</p>\n    </HeaderText>\n  </a>\n);\n\nconst response = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n  method: \"POST\",\n  headers: {\n    \"mb-api-key\": \"anon\",\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    query: `query counNFTs {\n  mb_views_nft_tokens_aggregate(\n    where: {owner: {_eq: \"${accountId}\"}}\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n`,\n  }),\n});\n\nconst nftCount =\n  response.ok &&\n  response.body.data.mb_views_nft_tokens_aggregate.aggregate.count;\n\n// console.log(fetchedNFTs);\n\nconst s = nftCount > 1 ? \"s\" : \"\";\nreturn (\n  <CardRoot>\n    <Top>\n      <img\n        src={\n          profile.backgroundImage\n            ? `https://ipfs.near.social/ipfs/${profile.backgroundImage.ipfs_cid}`\n            : \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRub7hFLkStCvZiaSeiUGznP4uzqPPcepghhg&usqp=CAU\"\n        }\n        alt=\"\"\n      />\n      <div>\n        <img\n          src={\n            profile.image\n              ? `https://ipfs.near.social/ipfs/${profile.image.ipfs_cid}`\n              : \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRub7hFLkStCvZiaSeiUGznP4uzqPPcepghhg&usqp=CAU\"\n          }\n          alt=\"\"\n        />\n      </div>\n    </Top>\n    <Bottom>\n      <CardBody>\n        {props.tooltip ? (\n          <Widget\n            loading={inner}\n            src=\"jgodwill.near/widget/CPlanet.Profile.N.OverlayTrigger\"\n            props={{ accountId, children: inner }}\n          />\n        ) : (\n          inner\n        )}\n        <AmountSec>\n          <div className=\"nfts\">\n            <p className=\"title\">Created</p>\n            <p className=\"details\">{`${nftCount} NFT${s}`}</p>\n          </div>\n        </AmountSec>\n      </CardBody>\n    </Bottom>\n  </CardRoot>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgodwill.near/widget/CPlanet.TopCreator.Card", "fact_widget_deployments_id": "b6932ba37dbe57e4f1a13c74fb40b409", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}