{"tx_hash": "FF8cCeL6A6wWqLPy8yCoqZEdSwLNwKoktQWFJT3Ci9Fi", "action_id_social": "5uBcXdBDasLktqpSzEc65NdTsFufBz88zpptGimyLCiG-0-widget", "block_id": 104572223, "block_timestamp": "2023-10-30T23:35:21.173Z", "signer_id": "jgodwill.near", "widget_name": "CPlanet.MainPage.Social", "source_code": "const hashtag = props.hashtag;\r\n\r\nif (!state || state.hashtag !== hashtag) {\r\n  State.update({\r\n    feedIndex: hashtag ? 1 : context.accountId ? 0 : 1,\r\n    hashtag,\r\n  });\r\n}\r\n\r\nconst options = [\r\n  {\r\n    title: \"All Posts\",\r\n  },\r\n  {\r\n    title: \"CDAOs Feed\",\r\n  },\r\n  {\r\n    title: \"Following\",\r\n    disabled: !context.accountId,\r\n  },\r\n];\r\n\r\nif (hashtag) {\r\n  options.push({\r\n    title: `#${hashtag}`,\r\n  });\r\n}\r\n\r\nlet accounts = undefined;\r\n\r\nif (state.feedIndex === 2) {\r\n  const graph = Social.keys(`${context.accountId}/graph/follow/*`, \"final\");\r\n  if (graph !== null) {\r\n    accounts = Object.keys(graph[context.accountId].graph.follow || {});\r\n    accounts.push(context.accountId);\r\n  } else {\r\n    accounts = [];\r\n  }\r\n}\r\n\r\nif (state.feedIndex === 1) {\r\n  accounts = [\"creativesdao.sputnik-dao.near\"];\r\n}\r\n\r\nconst CPlanetFont = styled.div`\r\n*, *::before, *::after{\r\n  font-family: Helvetica Neue;\r\n  box-sizing: border-box;\r\n}\r\n`;\r\n\r\nconst Nav = styled.div`\r\n  .nav-pills {\r\n    background: #fbfbfb;\r\n    font-weight: 500;\r\n    --bs-nav-pills-border-radius: 0;\r\n    --bs-nav-link-color: #B0B0B0;\r\n    --bs-nav-pills-link-active-color: #000;\r\n    --bs-nav-pills-link-active-bg: #fbfbfb;\r\n    --bs-nav-link-padding-y: 0.75rem;\r\n    border-bottom: 1px solid #eee;\r\n    padding-top: 3px;\r\n  }\r\n  .nav-link.active {\r\n    border-bottom: 3px solid #000;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .nav-item:hover {\r\n    background: rgba(0, 0, 0, 0.15);\r\n    *{color: #000 !important;}\r\n  }\r\n\r\n  margin: 0 -12px;\r\n`;\r\n\r\nconst SocialWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction:row;\r\n    gap: 1rem;\r\n    .rhs{\r\n        flex:1;\r\n    }\r\n    .mid{\r\n        flex: 3;\r\n    }\r\n`;\r\n\r\nreturn (\r\n  <CPlanetFont>\r\n    <SocialWrapper>\r\n      <div className=\"rhs\">\r\n        <Widget src=\"jgodwill.near/widget/People\" props={{}} />\r\n      </div>\r\n      <div className=\"mid\">\r\n        {context.accountId && (\r\n          <div className=\"mb-3\">\r\n            <Widget\r\n              src=\"jgodwill.near/widget/CPlanet.MainPage.Compose\"\r\n              props={{}}\r\n            />\r\n          </div>\r\n        )}\r\n        <Nav>\r\n          <ul className=\"nav nav-pills nav-fill mb-3\">\r\n            {options.map((option, i) => (\r\n              <li className=\"nav-item\" key={i}>\r\n                <button\r\n                  className={`nav-link ${\r\n                    state.feedIndex === i ? \"active\" : \"\"\r\n                  } ${option.disabled ? \"disabled\" : \"\"}`}\r\n                  aria-disabled={!!option.disabled}\r\n                  onClick={() =>\r\n                    !option.disabled && State.update({ feedIndex: i })\r\n                  }\r\n                >\r\n                  {option.title}\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </Nav>\r\n        {state.feedIndex === 3 ? (\r\n          <Widget src=\"mob.near/widget/Hashtag.Feed\" props={{ hashtag }} />\r\n        ) : (\r\n          <Widget\r\n            src=\"jgodwill.near/widget/CPlanet.MainPage.Feed\"\r\n            props={{ accounts }}\r\n          />\r\n        )}\r\n      </div>\r\n    </SocialWrapper>\r\n  </CPlanetFont>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgodwill.near/widget/CPlanet.MainPage.Social", "fact_widget_deployments_id": "1473f7768eeed23c80c1822874612f1a", "inserted_timestamp": "2023-10-31T01:39:24.188Z", "modified_timestamp": "2023-10-31T01:39:24.188Z", "__row_index": 24}