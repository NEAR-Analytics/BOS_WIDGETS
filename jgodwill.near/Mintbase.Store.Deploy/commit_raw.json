{"tx_hash": "Cp1Sa5gp797GgBS4jBqSqnRyNKXzJokVG3gk28ESmQYs", "action_id_social": "HxSvGS1T9WHvQM92fF49Vg3crzGJLi5Tb5w2DaNGFs7X-0-widget", "block_id": 104035969, "block_timestamp": "2023-10-23T14:06:58.200Z", "signer_id": "jgodwill.near", "widget_name": "Mintbase.Store.Deploy", "source_code": "/**\n * Add error check for contract name\n *\n */\nconst mainnet = props.mainnet ?? true;\nconst contract_id = mainnet ? \"mintbase1.near\" : \"mintspace2.testnet\";\nconst func = \"create_store\";\nconst owner_id = context.accountId;\n\nconst base_uri = \"https://arweave.net\";\nconst reference = null;\nconst reference_hash = null;\nconst spec = \"nft-1.0.0\";\nconst name = props.name ?? null; // or change with state\nconst symbol_name = props.symbol_name ?? null;\nconst icon =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEXUlEQVRYR8VXW4hVVRj+vrX3OYbFNBl2eSsoa8pkxMJmzpGGoIwMY0wwImuCXmKKkiikKayHQIpAwbdAswskBYqJSlANek7TUOPURGKCWdmFkJnsoZnhzNn/F2vcZ9gez2UfEVoP+2Gv///Xt771X4mUq6enpz2Kogck3S2pk+R1ki736iT/kfQzyW/N7PNsNrtvcHDwTBrTbCbU1dV1cxiGGyWtA3BJM/l4f1rSLjPbPDQ0dKyRTl0AS5YsubStre11AP0AwiYHi+SJmJGFCdmypG3T09MDIyMjk7Vs1ASQy+VuIrkbQEezG3vqJfXGTzHhnFtlZttIuoTuUQC9hULheLW98wDkcrnbARwkeWWzw+P9ewCsB/AYgBkz6yW5lmRfUl/SOMmVhUJhJPn/HAD+5gCKLRzubS0AMO59MTa828z2Oud2VF8gBtGdZGIOQPzmX6ehPWk4iqKOIAg+BnCr/y/pJUmnnHPv1WHw6NTU1B0Vn5gDkM/ntwB4NiXtc2KS9kdR1B+G4aMA/pD0kaQHGwDwILcUi8UNs37jPz7UgiD4PoW318Qn6QSA/STbJc2T9EkjAAB8dCwuFos/zgLI5/M7YydqlYBa8vvMbFcTAJ6FncVisY/5fP4KT10LSaYZyFQAAEyHYXitB+BD6N1mVlvYTwsAZraeuVxuR3XMNjpM0mFJW0n+VUfub0mnSS6S5JxznQBeBpDMkBXV7R7AKEkv1HRJGiLpvX0rgHYzGyB5S5yuZ/VJHioUCv25XO4Vn/0AHDCzD51z35DMViWnUf8EEwC8H6RZj5O8Py5M3pF+D4JghZn9lFDeB+AtAF9U/vmw9CBJ3lt1yIQHYIks1gzEapJPSlodJ53xcrncmclkTiUOOwRgM8n9iX8Pk/S+tqqKAWsZgJmddM6971kzs+f9W5P0VbOyZmZmZjyo5yStcc4djKJoE8kxkvNrAWjlCVZLugHAYefcpJmtIzkAIKii7ldJL5jZkTAMF0t6A8CNNeidaMkJAXjqNwLobvZWafYljbYahhcVAIDtrSaiiwpgNhGlSMVjAI5J8m3Xm3FILapD8UKSd9XwiVriZ1Ox36lXjCRtMLPPwjC8s1QqHRgeHv6tu7v7IefcNYkQG8tkMqPlcnmNrylm9q9z7lMAlzXyg7li5IXqlOOvADwN4EsAPoOdLpVKHdlsdm/SCUku8/UdwIo4NzxF8noALzYAcG45jlmobkjelnTc014xRPI+Sa8BWJ4w7lsyH8qVtUfSHpLv1ANwXkPiBWu0ZEeiKOoLgsAzMd+nXTNb7pz7geTsQBLfuIvkqwBWnu3I9ASAZSSfqQOgdkvmhaubUpKboij6IAiCpSSH/aAB4JEqw9+VSqXeTCZzm6Q/nXNXA/A94rxqAA2b0opwjbb8JADfzy8FcFWdW01K8kwtqFdZU7XlCRCpB5M0GQ9A+sGkYrDF0awejgsbzZLW/rfhtPpKTcbzM5J+uZDx/D8+0FUx/4DhyAAAAABJRU5ErkJggg==\";\n// Arguments: {\n//   \"owner_id\": \"bool.testnet\",\n//   \"metadata\": {\n//     \"spec\": \"nft-1.0.0\",\n//     \"name\": \"bos\",\n//     \"symbol\": \"bos\",\n//     \"icon\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEXUlEQVRYR8VXW4hVVRj+vrX3OYbFNBl2eSsoa8pkxMJmzpGGoIwMY0wwImuCXmKKkiikKayHQIpAwbdAswskBYqJSlANek7TUOPURGKCWdmFkJnsoZnhzNn/F2vcZ9gez2UfEVoP+2Gv///Xt771X4mUq6enpz2Kogck3S2pk+R1ki736iT/kfQzyW/N7PNsNrtvcHDwTBrTbCbU1dV1cxiGGyWtA3BJM/l4f1rSLjPbPDQ0dKyRTl0AS5YsubStre11AP0AwiYHi+SJmJGFCdmypG3T09MDIyMjk7Vs1ASQy+VuIrkbQEezG3vqJfXGTzHhnFtlZttIuoTuUQC9hULheLW98wDkcrnbARwkeWWzw+P9ewCsB/AYgBkz6yW5lmRfUl/SOMmVhUJhJPn/HAD+5gCKLRzubS0AMO59MTa828z2Oud2VF8gBtGdZGIOQPzmX6ehPWk4iqKOIAg+BnCr/y/pJUmnnHPv1WHw6NTU1B0Vn5gDkM/ntwB4NiXtc2KS9kdR1B+G4aMA/pD0kaQHGwDwILcUi8UNs37jPz7UgiD4PoW318Qn6QSA/STbJc2T9EkjAAB8dCwuFos/zgLI5/M7YydqlYBa8vvMbFcTAJ6FncVisY/5fP4KT10LSaYZyFQAAEyHYXitB+BD6N1mVlvYTwsAZraeuVxuR3XMNjpM0mFJW0n+VUfub0mnSS6S5JxznQBeBpDMkBXV7R7AKEkv1HRJGiLpvX0rgHYzGyB5S5yuZ/VJHioUCv25XO4Vn/0AHDCzD51z35DMViWnUf8EEwC8H6RZj5O8Py5M3pF+D4JghZn9lFDeB+AtAF9U/vmw9CBJ3lt1yIQHYIks1gzEapJPSlodJ53xcrncmclkTiUOOwRgM8n9iX8Pk/S+tqqKAWsZgJmddM6971kzs+f9W5P0VbOyZmZmZjyo5yStcc4djKJoE8kxkvNrAWjlCVZLugHAYefcpJmtIzkAIKii7ldJL5jZkTAMF0t6A8CNNeidaMkJAXjqNwLobvZWafYljbYahhcVAIDtrSaiiwpgNhGlSMVjAI5J8m3Xm3FILapD8UKSd9XwiVriZ1Ox36lXjCRtMLPPwjC8s1QqHRgeHv6tu7v7IefcNYkQG8tkMqPlcnmNrylm9q9z7lMAlzXyg7li5IXqlOOvADwN4EsAPoOdLpVKHdlsdm/SCUku8/UdwIo4NzxF8noALzYAcG45jlmobkjelnTc014xRPI+Sa8BWJ4w7lsyH8qVtUfSHpLv1ANwXkPiBWu0ZEeiKOoLgsAzMd+nXTNb7pz7geTsQBLfuIvkqwBWnu3I9ASAZSSfqQOgdkvmhaubUpKboij6IAiCpSSH/aAB4JEqw9+VSqXeTCZzm6Q/nXNXA/A94rxqAA2b0opwjbb8JADfzy8FcFWdW01K8kwtqFdZU7XlCRCpB5M0GQ9A+sGkYrDF0awejgsbzZLW/rfhtPpKTcbzM5J+uZDx/D8+0FUx/4DhyAAAAABJRU5ErkJggg==\",\n//     \"base_uri\": \"https://arweave.net\",\n//     \"reference\": null,\n//     \"reference_hash\": null\n//   }\n// }\n\ninitState({\n  name: name,\n  symbol_name: symbol_name,\n  reference: reference,\n  reference_hash: reference_hash,\n});\n\nconst onChangeName = (name) => {\n  State.update({\n    name,\n  });\n  console.log(state.name);\n  console.log(\n    \"matched?\",\n    state.allNFTStores.includes(`${state.name}.mintbase1.near`)\n  );\n};\n\nconst onChangeSymbol = (symbol_name) => {\n  State.update({\n    symbol_name,\n  });\n};\n\nconst deployStore = () => {\n  if (!(state.symbol_name && state.name)) {\n    console.log(\"You need a sybol and name to deploy a storefront on mintbase\");\n    return;\n  }\n  const gas = 200000000000000; // check if gas is correct\n  const deposit = 3500000000000000000000000; // change to 6.5 N\n  Near.call([\n    {\n      contractName: contract_id,\n      methodName: func,\n      args: {\n        owner_id: owner_id,\n        metadata: {\n          spec: spec,\n          name: state.name,\n          symbol: state.symbol_name,\n          icon,\n          icon,\n          base_uri: base_uri,\n          reference: state.reference,\n          reference_hash: state.reference_hash,\n        },\n      },\n      gas: gas,\n      deposit: deposit,\n    },\n  ]);\n};\n\nfunction fetchData() {\n  const response = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `query AllStoresQuery {\n  nft_contracts {\n    id\n    symbol\n  }\n}`,\n    }),\n  });\n\n  State.update({\n    allNFTStores:\n      response && response.body.data.nft_contracts.map((store) => store.id),\n    allSymbols:\n      response && response.body.data.nft_contracts.map((store) => store.symbol),\n  });\n  console.log(\"data\", state.allNFTStores);\n}\n\nfetchData();\nconst Main = styled.div`\n*{\n  font-family: Helvetica Neue;\n  }\n  h1{\n    margin: 2rem 0;\n    font-weight: 600;\n  }\n  display: flex;\n  flex-flow:column nowrap;\n  justify-content:center;\n  align-items: center;\n  button {\n    border: 1px solid black;\n    border-radius: 0;\n    color: white;\n    background: black;\n    text-align: center;\n    display: flex;\n    padding: 7px 20px;\n    cursor: pointer;\n    margin: 10px auto;\n  }\n  button:disabled {\n    background: grey;\n    border: grey;\n    cursor: not-allowed;\n  }\n  button:hover {\n    background: white;\n    color: black;\n    border-color: black;\n  }\n\n  input, .input {\n    border-radius: 32px;\n    flex-shrink: 0;\n    height: 48px;\n    width: 100%;\n    border: 1px solid #B0B0B0;\n    background: #F8F8F8;\n    overflow: hidden;\n    color: #B0B0B0;\n    text-overflow: ellipsis;\n    font-family: Helvetica Neue;\n    font-size: 20px;\n    font-style: normal;\n    font-weight: 400;\n    outline: none;\n    padding: 0 1rem;\n    line-height: 148%; /* 29.6px */\n    :focus{\n      background: #fff;\n      // border-color: #000;\n    }\n}\n    .danger{\n      color: red;\n      border-color: red;\n    }\n`;\nreturn (\n  <Main>\n    <div>\n      <h1>\n        Deploy Store on Mintbase as <i>{owner_id}</i>\n      </h1>\n      <div>\n        Contract Name*:\n        <input\n          type=\"text\"\n          onChange={(e) => onChangeName(e.target.value)}\n          className={`input ${\n            state.allNFTStores &&\n            state.allNFTStores.includes(`${state.name}.mintbase1.near`) &&\n            \"danger\"\n          }`}\n        />\n      </div>\n      <div>\n        Symbol* (max 3 letters):\n        <input\n          type=\"text\"\n          onChange={(e) => onChangeSymbol(e.target.value)}\n          className={`input ${state.symbol_name.length > 3 ? \"danger\" : \"\"}`}\n        />\n      </div>\n      <button\n        onClick={deployStore}\n        disabled={\n          !state.symbol_name ||\n          state.symbol_name.length > 3 ||\n          !state.name ||\n          (state.allNFTStores &&\n            state.allNFTStores.includes(`${state.name}.mintbase1.near`))\n        }\n      >\n        Deploy Store 3.5N\n      </button>\n    </div>\n    <Widget src=\"mintbase.near/widget/PoweredByMintbase\" />\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgodwill.near/widget/Mintbase.Store.Deploy", "fact_widget_deployments_id": "0a0f7ef2bedc7497503c1609ff408c0d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}