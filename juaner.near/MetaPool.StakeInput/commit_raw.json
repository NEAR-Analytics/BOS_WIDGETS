{"tx_hash": "CP31JTCSvN7JJt67idteHz2H5EtPZeudjdwDCpW1rUdw", "action_id_social": "5e5SVHYJ6wNCvnD7DwUyYSXzEg8PoCLCZ3GSyxor5cZ4-0-widget", "block_id": 100862723, "block_timestamp": "2023-09-11T05:44:52.456Z", "signer_id": "juaner.near", "widget_name": "MetaPool.StakeInput", "source_code": "const Container = styled.div`\n  margin-top: 20px;\n  .error {\n    color: #ff61d3;\n  }\n`;\nconst Label = styled.div`\n  font-size: 16px;\n  font-weight: 500;\n  color: #787da1;\n`;\nconst InputWrapper = styled.div`\n  display: flex;\n  border-bottom: 1px solid #787da1;\n  padding: 10px 0px;\n  width: 100%;\n  @media (max-width: 768px) {\n    position: relative;\n  }\n`;\nconst Input = styled.input`\n  padding-left: 8px;\n  color: #fff;\n  outline: none;\n  background-color: transparent;\n  border: none;\n  font-size: 26px;\n  font-weight: 500;\n  height: 30px;\n  width: 100%;\n\n  &::placeholder {\n    color: #787da1;\n  }\n`;\nconst Token = styled.div`\n  flex-shrink: 0;\n  display: flex;\n  @media (max-width: 768px) {\n    position: absolute;\n    right: 0;\n  }\n`;\nconst TokenIcon = styled.img`\n  width: 26px;\n  height: 26px;\n  border-radius: 50%;\n  margin-right: 4px;\n`;\nconst TokenSymbol = styled.div`\n  font-size: 16px;\n  font-weight: 500;\n  color: #787da1;\n`;\nconst ValueWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n  font-weight: 500;\n  color: #787da1;\n  margin-top: 8px;\n`;\nconst BalanceWrapper = styled.div`\n  text-align: right;\n`;\nconst Balance = styled.span`\n  text-decoration: underline;\n`;\nconst ErrorTips = styled.div`\n  font-size: 16px;\n  margin-top: 4px;\n`;\n\nconst {\n  price,\n  amount,\n  balance,\n  token,\n  stakeType,\n  lpToken,\n  isNear,\n  errorTips,\n  balanceLoading,\n  onAmountChange,\n} = props;\n\nconst formatValue = () => {\n  if (!price) return \"-\";\n  const value = Big(price).mul(amount || 0);\n  if (value.lt(0.01)) return value.toPrecision(1);\n  return value.toFixed(2);\n};\n\nconst handleInputChange = (ev) => {\n  if (isNaN(Number(ev.target.value))) return;\n  let error = \"\";\n  if (isNear && Big(ev.target.value || 0).lt(1)) {\n    error = \"at least 1 NEAR.\";\n  }\n  if (ev.target.value && Number(balance) && Big(ev.target.value).gt(balance)) {\n    error = `You don\u2019t have enough ${\n      stakeType === 0 ? token.symbol : lpToken.symbol\n    }.`;\n  }\n  props.onAmountChange?.(ev.target.value, error);\n};\n\nreturn (\n  <Container>\n    <Label>Enter Amount</Label>\n    <InputWrapper>\n      <Input\n        className={errorTips && \"error\"}\n        value={amount}\n        placeholder=\"0\"\n        onChange={handleInputChange}\n      />\n      {stakeType === 0 ? (\n        <Token>\n          <TokenIcon src={token.icon} />\n          <TokenSymbol>{token.symbol}</TokenSymbol>\n        </Token>\n      ) : (\n        <Token>\n          <TokenIcon src={lpToken.icon} />\n          <TokenSymbol>{lpToken.symbol}</TokenSymbol>\n        </Token>\n      )}\n    </InputWrapper>\n    <ValueWrapper>\n      <div>\u2248 ${formatValue()}</div>\n      <BalanceWrapper\n        className={errorTips && \"error\"}\n        onClick={() => {\n          if (balance) props.onAmountChange?.(balance);\n        }}\n      >\n        Balance:{\" \"}\n        <Balance>{balanceLoading ? \"Loading\" : balance || \"-\"}</Balance>\n        {errorTips && <ErrorTips>{errorTips}</ErrorTips>}\n      </BalanceWrapper>\n    </ValueWrapper>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/juaner.near/widget/MetaPool.StakeInput", "fact_widget_deployments_id": "62f0e3585c477900aca2bf03c41d7e33", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}