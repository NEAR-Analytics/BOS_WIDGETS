{"tx_hash": "Fqfn8Yzh6T5PcLNsfdLc3NyN1uMVZuu9CYaYnzJqKyuq", "action_id_social": "4DzFwbYHBxcK3qZTbd5T63sRKUyhJPfic6BpnzUoCa6i-0-widget", "block_id": 99718332, "block_timestamp": "2023-08-26T17:45:16.673Z", "signer_id": "crowdtestify.near", "widget_name": "Tester.Form", "source_code": "const ownerId = \"crowdtestify.near\";\n\nif (!context.accountId) {\n  return (\n    <Widget\n      src={`${ownerId}/widget/InfoSegment`}\n      props={{\n        title: \"Not logged in!\",\n        description: \"You must log in to create a new Tester!\",\n      }}\n    />\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  gap: 3em;\n  padding-bottom: 3em;\n`;\n\nconst Header = styled.h1`\n  font-style: normal;\n  font-weight: 700;\n  font-size: 2em;\n  line-height: 1.4em;\n  text-align: center;\n  color: #000000;\n`;\n\nconst SubHeader = styled.h2`\n  font-style: normal;\n  font-weight: 400;\n  font-size: 0.95em;\n  line-height: 1.25em;\n  text-align: center;\n  color: #101828;\n`;\n\nconst Form = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 60%;\n  gap: 1em;\n`;\n\nconst FormHeader = styled.h3`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  padding: 0px 0px 0.5em;\n  border-bottom: 1px solid #eceef0;\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1.125em;\n  line-height: 1.25em;\n  color: #000000;\n  width: 100%;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n`;\n\nState.init({\n  name: \"\",\n  nameError: \"\",\n  accountId: context.accountId,\n  accountIdError: \"\",\n  skills: [],\n  skillsError: \"\",\n});\n\nconst validateForm = () => {\n  return (\n    state.name &&\n    state.nameError === \"\" &&\n    (!state.skills || state.skillsError === \"\")\n  );\n};\n\nreturn (\n  <Container>\n    <div>\n      <Header>Create new Tester</Header>\n    </div>\n    <Form>\n      <FormHeader>General</FormHeader>\n      <Widget\n        src={`${ownerId}/widget/Inputs.Text`}\n        props={{\n          label: \"Tester name *\",\n          placeholder: \"Enter Tester name\",\n          value: state.name,\n          onChange: (name) => State.update({ name }),\n          validate: () => {\n            if (state.name.length < 3) {\n              State.update({ nameError: \"Name must be at least 3 characters\" });\n              return;\n            }\n\n            if (state.name.length > 100) {\n              State.update({\n                nameError: \"Name must be less than 100 characters\",\n              });\n              return;\n            }\n\n            State.update({ nameError: \"\" });\n          },\n          error: state.nameError,\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Skills`}\n        props={{\n          label: \"Skills\",\n          placeholder: \"Add skills\",\n          value: state.skills,\n          onChange: (skills) =>\n            State.update({\n              skills: skills.map(({ name }) => ({\n                name: name.trim().replaceAll(/\\s+/g, \"-\"),\n              })),\n            }),\n        }}\n      />\n      <FormFooter>\n        <Widget\n          src={`${ownerId}/widget/Buttons.Blue`}\n          props={{\n            disabled: !validateForm(),\n            onClick: () => {\n              if (!validateForm()) return;\n              const transactions = [\n                {\n                  contractName: \"v1.crowdtestify.near\",\n                  methodName: \"register_tester\",\n                  args: {\n                    name: state.accountId,\n                    skills: state.skills.map((skill) => skill.name),\n                  },\n                },\n              ];\n              Near.call(transactions);\n            },\n            text: <>Create Tester</>,\n          }}\n        />\n      </FormFooter>\n    </Form>\n  </Container>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/crowdtestify.near/widget/Tester.Form", "fact_widget_deployments_id": "d9cf5a8c7e62630f4af0f552c0012446", "inserted_timestamp": "2023-08-26T19:35:45.233Z", "modified_timestamp": "2023-08-26T19:35:45.233Z", "__row_index": 5}