{"tx_hash": "2yakUppGABWeh7ujSsjvchxR4oXJyZu2ccfjyaSqgNGN", "action_id_social": "5i95sG78ik7waBnooJE8whG3oBLJNjvKa3grrrXKyYPf-0-widget", "block_id": 111965623, "block_timestamp": "2024-02-02T23:05:06.242Z", "signer_id": "mike.near", "widget_name": "StakingUI.getValidators", "source_code": "const getUniqueValidatorAddresses = (validators1, validators2) => {\n  const allValidators = [...validators1, ...validators2];\n  const uniqueIds = new Set(allValidators.map((v) => v.account_id));\n  return Array.from(uniqueIds);\n};\n\nconst mainnetValidators = {\n  getAddresses: async ({ customRPCEndpoint, debug }) => {\n    customRPCEndpoint = customRPCEndpoint || \"https://rpc.mainnet.near.org\";\n    debug = debug || false;\n\n    return new Promise((resolve, reject) => {\n      try {\n        let uniqueAccountIds = asyncFetch(customRPCEndpoint, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            jsonrpc: \"2.0\",\n            method: \"validators\",\n            params: [null],\n            id: \"mainnet-vals\",\n          }),\n        }).then((data) => {\n          // console.log(\"aloha data\", data);\n          const { current_validators, next_validators } = data.body.result;\n\n          if (debug) {\n            console.log(\"current_validators\", current_validators);\n            console.log(\"next_validators\", next_validators);\n          }\n\n          const uniqueAccountIds = getUniqueValidatorAddresses(\n            current_validators,\n            next_validators\n          );\n\n          if (debug) console.log(\"uniqueAccountIds\", uniqueAccountIds);\n\n          return resolve(uniqueAccountIds);\n        });\n      } catch {\n        console.error(\n          `Could not get list of mainnet validators from ${customRPCEndpoint}`\n        );\n        return reject();\n      }\n    });\n  },\n};\n\nreturn { mainnetValidators };\n", "metadata": {"fork_of": "mike.near/widget/StakingUI.getValidators@111731427"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mike.near/widget/StakingUI.getValidators", "fact_widget_deployments_id": "214c7025d4abd1c58c7cbe66ce648a07", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}