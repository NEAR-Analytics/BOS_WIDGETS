{"tx_hash": "9msA9tHQcuZmaMwBSraQ5CRZ4D9reCHrZFo4tL33UwiQ", "action_id_social": "DtT6T4bnaE3HGguR4bU1p5MNaRJ26td1n8TPps6dj1ow-0-widget", "block_id": 104388543, "block_timestamp": "2023-10-28T13:05:04.268Z", "signer_id": "hack.near", "widget_name": "cityscape", "source_code": "const accountId = context.accountId;\n\nconst initialData = Social.getr(`${accountId}/cityscape`);\n\nconst initialScore = !initialData ? 0 : Number(initialData.cityscape.score);\n\nconst srcData = `\n\n<style>\nhtml,\n\nbody {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: black;\n}\n\n</style>\n\n<script src=\"https://cdn.jsdelivr.net/npm/kaboom@2000.2.10/dist/kaboom.js\"></script>\n<script>\n\nwindow.addEventListener(\"load\", (event) => {\n  init()\n});\n</script>\n<script>\nconst init = () => {\n\nkaboom()\n\nloadSprite(\"character\", \"https://kaboomjs.com/sprites/bean.png\")\nloadSprite(\"ghosty\", \"https://kaboomjs.com/sprites/ghosty.png\")\n\nconst player = add([\n\tsprite(\"character\"),\n\tpos(120, 80),\n])\n\nplayer.onUpdate(() => {\n\tplayer.angle += 120 * dt()\n})\n\nfor (let i = 0; i < 3; i++) {\n\n\tconst x = rand(0, width())\n\tconst y = rand(0, height())\n\n\tadd([\n\t\tsprite(\"ghosty\"),\n\t\tpos(x, y),\n\t])\n\n}\n\ngo(\"game\")\n}\n</script>\n`;\n\nreturn (\n  <>\n    <iframe\n      srcDoc={srcData}\n      onMessage={(data) => {\n        State.update({ ...data });\n\n        const newScore = Number(data.score);\n\n        if (newScore > initialScore) {\n          Social.set({\n            cityscape: {\n              ...data,\n            },\n          });\n        }\n      }}\n      style={{\n        height: \"80vh\",\n        width: \"100%\",\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/cityscape", "fact_widget_deployments_id": "ca41665f7857cfcc8c6b8df598c81a15", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}