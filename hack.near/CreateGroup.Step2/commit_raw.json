{"tx_hash": "BB2RiMEBqG2E9ykaTZdhqcGitH4u8WYUxHpZjA5RHGdG", "action_id_social": "Arjx8hFkTvbWabydbeV7ZZXr11L4bfJskhPzLXUi8HDw-0-widget", "block_id": 100615061, "block_timestamp": "2023-09-07T21:12:27.682Z", "signer_id": "hack.near", "widget_name": "CreateGroup.Step2", "source_code": "const { formState, errors, renderFooter } = props;\nconst { accountId } = context;\n\nState.init({\n  members: { [context.accountId]: \"\" },\n  newMember: \"\",\n});\n\nfunction addMember(newMember) {\n  State.update({\n    members: { ...state.members, [newMember]: \"\" },\n  });\n}\n\nfunction removeMember(memberKey) {\n  const updatedMembers = { ...state.members };\n  delete updatedMembers[memberKey];\n\n  State.update({\n    members: updatedMembers,\n  });\n}\n\nconst finalState = {\n  members: {\n    ...state.members,\n  },\n};\n\nfunction isNearAddress(address) {\n  if (typeof address !== \"string\") {\n    return false;\n  }\n  if (!address.endsWith(\".near\")) {\n    return false;\n  }\n  const parts = address.split(\".\");\n  if (parts.length !== 2) {\n    return false;\n  }\n  if (parts[0].length < 2 || parts[0].length > 32) {\n    return false;\n  }\n  if (!/^[a-z0-9_-]+$/i.test(parts[0])) {\n    return false;\n  }\n  return true;\n}\n\nconst memberId = props.memberId ?? state.newMember;\n\nconst isValid = isNearAddress(memberId);\n\nreturn (\n  <>\n    <h2 className=\"h5 fw-bold\">\n      <span\n        className=\"rounded-circle d-inline-flex align-items-center justify-content-center fw-bolder h5 me-2\"\n        style={{\n          width: \"48px\",\n          height: \"48px\",\n          border: \"1px solid #82E299\",\n        }}\n      >\n        2\n      </span>\n      Membership\n    </h2>\n    <div>\n      <div>\n        <h5>Account ID</h5>\n        <input\n          placeholder=\"<example>.near\"\n          onChange={(e) => State.update({ newMember: e.target.value })}\n        />\n        <div className=\"d-flex align-items-center mt-2\">\n          <button\n            className=\"btn btn-primary m-2\"\n            disabled={!isValid}\n            onClick={() => addMember(state.newMember)}\n          >\n            add\n          </button>\n        </div>\n      </div>\n      <br />\n      <div>\n        <h5>Profiles</h5>\n        {Object.keys(state.members).map((a) => {\n          return (\n            <div className=\"d-flex m-2 p-2 justify-content-between align-items-center\">\n              <div className=\"d-flex align-items-center\">\n                <Widget\n                  src=\"mob.near/widget/Profile\"\n                  props={{ accountId: a }}\n                />\n              </div>\n              <button\n                className=\"btn btn-danger m-1\"\n                disabled={!isNearAddress(a)}\n                onClick={() => removeMember(a)}\n              >\n                remove\n              </button>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n    {renderFooter(finalState)}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/CreateGroup.Step2", "fact_widget_deployments_id": "cc617a871835cf88d6f9ee4f0b94d238", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}