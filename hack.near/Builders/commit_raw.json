{"tx_hash": "DCp5pcveUUNJqeZSsFLBd6CCErwXmypxc1yXXFNDmZqQ", "action_id_social": "9tfgWZrQY68QrGf4zwX6CJ9dqTpMaiseFMcjtddy4Uqv-0-widget", "block_id": 103679827, "block_timestamp": "2023-10-18T19:44:30.943Z", "signer_id": "hack.near", "widget_name": "Builders", "source_code": "const data = Social.keys(\"*/widget\", \"final\", {\n  return_type: \"BlockHeight\",\n});\n\nif (!data) {\n  return \"Loading...\";\n}\n\nState.init({\n  when: 102345888,\n  inverse: false,\n});\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  a {\n    width: 3em;\n    height: 3em;\n    display: inline-block;\n    overflow: hidden;\n\n    > img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n  }\n`;\n\nconst builders = new Set([...Object.keys(data)]);\n\nconst accounts = Object.keys(data)\n  .filter((accountId) => builders.has(accountId))\n  .filter((accountId) => data[accountId].widget > state.when)\n  .map((accountId) => (\n    <a\n      title={accountId}\n      href={`/mob.near/widget/ProfilePage?accountId=${accountId}`}\n    >\n      <img\n        loading=\"lazy\"\n        src={`https://i.near.social/magic/thumbnail/https://near.social/magic/img/account/${accountId}`}\n        alt={accountId}\n      />\n    </a>\n  ));\n\nconst accountsInverse = Object.keys(data)\n  .filter((accountId) => builders.has(accountId))\n  .filter((accountId) => data[accountId].widget < state.when)\n  .map((accountId) => (\n    <a\n      title={accountId}\n      href={`/mob.near/widget/ProfilePage?accountId=${accountId}`}\n    >\n      <img\n        loading=\"lazy\"\n        src={`https://i.near.social/magic/thumbnail/https://near.social/magic/img/account/${accountId}`}\n        alt={accountId}\n      />\n    </a>\n  ));\n\nlet blockHeight = state.when;\n\nconst block = Near.block(blockHeight);\n\nconst timestampNanosec = block.header.timestamp_nanosec;\n\nconst timeMs = parseFloat(timestampNanosec) / 1e6;\nconst date = new Date(timeMs);\n\nreturn (\n  <Wrapper>\n    {state.inverse ? (\n      <div className=\"m-3\">\n        <div className=\"row align-items-center\">\n          <div className=\"col-5\">\n            <h4>{accountsInverse.length} Active Builders</h4>\n            <p>\n              <i class=\"bi bi-clock-history px-2\"></i>\n              before {block && <b>{date.toDateString()}</b>}\n            </p>\n          </div>\n          <div className=\"col-5 mb-2\">\n            <h5>blockHeight:</h5>\n            <input\n              type=\"number\"\n              value={state.when}\n              onChange={(e) => State.update({ when: e.target.value })}\n            />\n          </div>\n          <div className=\"col-2\">\n            <button\n              className=\"btn btn-primary mt-4\"\n              onClick={() => State.update({ inverse: !state.inverse })}\n            >\n              {state.inverse ? \"After\" : \"Before\"}\n            </button>\n          </div>\n        </div>\n        <hr />\n        <div>{accountsInverse}</div>\n      </div>\n    ) : (\n      <div className=\"m-3\">\n        <div className=\"row align-items-center\">\n          <div className=\"col-5\">\n            <h4>{accounts.length} Active Builders</h4>\n            <p>\n              <i class=\"bi bi-clock-history px-2\"></i>\n              after {block && <b>{date.toDateString()}</b>}\n            </p>\n          </div>\n          <div className=\"col-5 mb-2\">\n            <h5>blockHeight:</h5>\n            <input\n              type=\"number\"\n              value={state.when}\n              onChange={(e) => State.update({ when: e.target.value })}\n            />\n          </div>\n          <div className=\"col-2\">\n            <button\n              className=\"btn btn-primary mt-4\"\n              onClick={() => State.update({ inverse: !state.inverse })}\n            >\n              {state.inverse ? \"After\" : \"Before\"}\n            </button>\n          </div>\n        </div>\n\n        <hr />\n        <div>{accounts}</div>\n      </div>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/Builders", "fact_widget_deployments_id": "42daee7b2792e18aa92ab3b016361a1f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}