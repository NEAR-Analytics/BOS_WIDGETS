{"tx_hash": "9odbUAn4LDH1ybWMNef1DZFPjp4avt7Sc8MCkwM2DZEz", "action_id_social": "5bAVXUjbRSEn3Un5vH3q1JUKXWYV3i7XmFRT4J5RDiig-0-widget", "block_id": 118760398, "block_timestamp": "2024-05-12T08:13:57.930Z", "signer_id": "hack.near", "widget_name": "explore.things", "source_code": "const type = props.type || \"type\";\n\nconst [searchTerm, setSearchTerm] = useState(\"\");\nconst [showModal, setShowModal] = useState(false);\nconst [selectedPath, setSelectedPath] = useState(\"\");\n\nconst [object, setObject] = useState(Social.get(`*/${type}/*`, \"final\") || {});\nconst [filteredResults, setFilteredResults] = useState([]);\n\nuseEffect(() => {\n  const things = Object.entries(object);\n  const results = {};\n\n  things.forEach(([creator, detail]) => {\n    const entries = detail.type || {};\n    Object.keys(entries).forEach((id) => {\n      const path = `${creator}/${type}/${id}`;\n      if (path.toLowerCase().includes(searchTerm.toLowerCase())) {\n        if (!results[id]) {\n          results[id] = { count: 0, accounts: new Set() };\n        }\n        results[id].count++;\n        results[id].accounts.add(creator);\n      }\n    });\n  });\n\n  const sortedResults = Object.entries(results).sort(\n    (a, b) => b[1].count - a[1].count\n  );\n\n  setFilteredResults(\n    sortedResults.map(([id, data]) => ({\n      id,\n      accounts: Array.from(data.accounts),\n      count: data.count,\n    }))\n  );\n}, [searchTerm, object]);\n\nconst handleInputChange = (event) => {\n  setSearchTerm(event.target.value);\n};\n\nconst toggleModal = (path) => {\n  setSelectedPath(path);\n  setShowModal(!showModal);\n};\n\nconst Profiles = styled.a`\n    display: inline-block;\n    position: relative;\n    img {\n        object-fit: cover;\n        border-radius: 50%;\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease, box-shadow 0.3s ease;\n    }\n    &:hover img {\n        transform: scale(1.1);\n        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n    }\n`;\n\nreturn (\n  <>\n    <div className=\"m-3\">\n      <div className=\"d-flex flex-row justify-content-between align-items-center\">\n        <h3 className=\"m-1\">Explore</h3>\n        {showModal && (\n          <button className=\"m-2 btn-sm\" onClick={() => toggleModal(\"\")}>\n            Reset\n          </button>\n        )}\n      </div>\n    </div>\n    {showModal ? (\n      <div className=\"m-3\">\n        <Widget\n          src=\"hack.near/widget/explore.view\"\n          props={{ path: selectedPath, showInput: false }}\n        />\n      </div>\n    ) : (\n      <div className=\"m-3\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          placeholder={`\ud83d\udd2d  Search for a type of things...`}\n        />\n        {filteredResults.map(({ id, accounts, count }) => (\n          <div key={id} className=\"m-3 mt-4\">\n            <div className=\"d-flex flex-row justify-content-between align-items-center\">\n              <h5 className=\"mt-1\">\n                <b>{id}</b>\n              </h5>\n              <div className=\"mt-3\">\n                {accounts.map((creator) => (\n                  <Profiles\n                    key={creator}\n                    onClick={() => toggleModal(`${creator}/${type}/${id}`)}\n                  >\n                    <span className=\"d-inline-block\">\n                      <Widget\n                        src=\"mob.near/widget/ProfileImage\"\n                        props={{\n                          accountId: creator,\n                          imageStyle: {\n                            height: \"1.888em\",\n                            width: \"1.888em\",\n                          },\n                          imageClassName: \"\",\n                        }}\n                      />\n                    </span>\n                  </Profiles>\n                ))}\n              </div>\n            </div>\n            <hr />\n          </div>\n        ))}\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/explore.things", "fact_widget_deployments_id": "84c77037df81bbdeb400c3ff710ec56c", "inserted_timestamp": "2024-05-12T09:39:49.427Z", "modified_timestamp": "2024-05-12T09:39:49.427Z", "__row_index": 3}