{"tx_hash": "DhueSzsTiSh8Gu1AJJ4pHvqCFiJB2PewaqwZcSnUB4n8", "action_id_social": "DUxWXKWEpufsk59xvAMKvbA1j73JrFoob2qZD4gtgzTt-0-widget", "block_id": 118761317, "block_timestamp": "2024-05-12T08:34:23.059Z", "signer_id": "hack.near", "widget_name": "explore.things", "source_code": "const type = props.type || \"type\";\n\nconst [searchTerm, setSearchTerm] = useState(\"\");\nconst [showModal, setShowModal] = useState(false);\nconst [selectedPath, setSelectedPath] = useState(\"\");\n\nconst [object, setObject] = useState(Social.get(`*/${type}/*`, \"final\") || {});\nconst [filteredResults, setFilteredResults] = useState([]);\n\nuseEffect(() => {\n  const newResults = {};\n  const things = Object.entries(object);\n\n  things.forEach(([creator, detail]) => {\n    const entries = detail.type || {};\n    Object.keys(entries).forEach((id) => {\n      const path = `${creator}/${type}/${id}`;\n      if (path.includes(searchTerm.toLowerCase())) {\n        if (!newResults[id]) {\n          newResults[id] = { count: 0, accounts: [] };\n        }\n        newResults[id].count++;\n        newResults[id].accounts.push(creator);\n      }\n    });\n  });\n\n  setFilteredResults(\n    Object.entries(newResults).map(([id, data]) => ({\n      id,\n      accounts: data.accounts,\n      count: data.count,\n    }))\n  );\n}, [object, searchTerm]);\n\nconst handleInputChange = (event) => {\n  setSearchTerm(event.target.value);\n};\n\nconst toggleModal = (path) => {\n  setSelectedPath(path);\n  setShowModal(!showModal);\n};\n\nconst Profiles = styled.a`\n    display: inline-block;\n    position: relative;\n    img {\n        object-fit: cover;\n        border-radius: 50%;\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease, box-shadow 0.3s ease;\n    }\n    &:hover img {\n        transform: scale(1.1);\n        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n    }\n`;\n\nreturn (\n  <>\n    <div className=\"m-3\">\n      <div className=\"d-flex flex-row justify-content-between align-items-center\">\n        <h3 className=\"m-1\">Explore</h3>\n        {showModal && (\n          <button className=\"m-2 btn-sm\" onClick={() => toggleModal(\"\")}>\n            Reset\n          </button>\n        )}\n      </div>\n    </div>\n    {showModal ? (\n      <div className=\"m-3\">\n        <Widget\n          src=\"hack.near/widget/explore.view\"\n          props={{ path: selectedPath, showInput: false }}\n        />\n      </div>\n    ) : (\n      <div className=\"m-3\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          placeholder={`\ud83d\udd2d  Search for a type of things...`}\n        />\n        {filteredResults &&\n          filteredResults.map(({ id, accounts, count }) => (\n            <div key={id} className=\"m-3 mt-4\">\n              <div className=\"d-flex flex-row justify-content-between align-items-center\">\n                <h5 className=\"mt-1\">\n                  <b>{id}</b>\n                </h5>\n                <div className=\"mt-3\">\n                  {accounts.map((creator) => (\n                    <Profiles\n                      key={creator}\n                      onClick={() => toggleModal(`${creator}/${type}/${id}`)}\n                    >\n                      <span className=\"d-inline-block\">\n                        <Widget\n                          src=\"mob.near/widget/ProfileImage\"\n                          props={{\n                            accountId: creator,\n                            imageStyle: {\n                              height: \"1.888em\",\n                              width: \"1.888em\",\n                            },\n                            imageClassName: \"\",\n                            tooltip: true,\n                          }}\n                        />\n                      </span>\n                    </Profiles>\n                  ))}\n                </div>\n              </div>\n              <hr />\n            </div>\n          ))}\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/explore.things", "fact_widget_deployments_id": "55318b5ef3b6f9c9b187d8a10d74a6f8", "inserted_timestamp": "2024-05-12T09:39:49.427Z", "modified_timestamp": "2024-05-12T10:38:13.213Z", "__row_index": 5}