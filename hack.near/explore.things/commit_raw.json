{"tx_hash": "24DbiM2wq9dpu5RoCZAodp6rEqCZ7STUscMXTH2oWJvB", "action_id_social": "HJjmCScc1Jz7R8wGRLdydGBcHMU46hyjkrV7gD3ei2nX-0-widget", "block_id": 118793970, "block_timestamp": "2024-05-12T20:44:51.593Z", "signer_id": "hack.near", "widget_name": "explore.things", "source_code": "const type = props.type || \"type\";\n\nconst [searchTerm, setSearchTerm] = useState(\"\");\nconst [showModal, setShowModal] = useState(false);\nconst [selectedPath, setSelectedPath] = useState(\"\");\n\nconst [object, setObject] = useState(Social.get(`*/${type}/*`, \"final\") || {});\nconst [filteredResults, setFilteredResults] = useState([]);\n\nuseEffect(() => {\n  const results = {};\n  Object.entries(object).forEach(([creator, detail]) => {\n    const entries = detail[type] || {};\n    Object.keys(entries).forEach((id) => {\n      const path = `${creator}/${type}/${id}`;\n      if (path.toLowerCase().includes(searchTerm.toLowerCase())) {\n        if (!results[id]) {\n          results[id] = { count: 0, accounts: new Set() };\n        }\n        results[id].count++;\n        results[id].accounts.add(creator);\n      }\n    });\n  });\n\n  setFilteredResults(\n    Object.entries(results)\n      .sort((a, b) => b[1].count - a[1].count)\n      .map(([id, data]) => ({\n        id,\n        accounts: Array.from(data.accounts),\n        count: data.count,\n      }))\n  );\n}, [searchTerm, object]);\n\nconst handleInputChange = (event) => {\n  setSearchTerm(event.target.value);\n};\n\nconst toggleModal = (path) => {\n  setSelectedPath(path);\n  setShowModal(!showModal);\n};\n\nconst Profiles = styled.a`\n    display: inline-block;\n    position: relative;\n    img {\n        object-fit: cover;\n        border-radius: 50%;\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease, box-shadow 0.3s ease;\n    }\n    &:hover img {\n        transform: scale(1.1);\n        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n    }\n`;\n\nreturn (\n  <div className=\"m-3\">\n    <input\n      type=\"text\"\n      value={searchTerm}\n      onChange={handleInputChange}\n      placeholder={`\ud83d\udd2d  Search for a type of things...`}\n    />\n    {showModal ? (\n      <div className=\"m-3 mt-4\">\n        <Widget\n          src=\"hack.near/widget/explore.creators\"\n          props={{ id: selectedPath.split(\"/\").pop() }}\n        />\n        <button className=\"m-2 btn-sm\" onClick={() => toggleModal(\"\")}>\n          Reset\n        </button>\n        <Widget\n          src=\"hack.near/widget/explore.view\"\n          props={{ path: selectedPath, showInput: false }}\n        />\n      </div>\n    ) : (\n      <div className=\"m-3 mt-4\">\n        {filteredResults.map(({ id, accounts, count }) => (\n          <div className=\"d-flex flex-row justify-content-between\">\n            <h5 className=\"mt-2\">\n              <b>{id}</b>\n            </h5>\n            <div>\n              {accounts.map((creator) => (\n                <Profiles\n                  key={creator}\n                  onClick={() => toggleModal(`${creator}/${type}/${id}`)}\n                >\n                  <span className=\"d-inline-block\">\n                    <Widget\n                      src=\"mob.near/widget/ProfileImage\"\n                      props={{\n                        accountId: creator,\n                        imageStyle: {\n                          height: \"38px\",\n                          width: \"38px\",\n                        },\n                        imageClassName: \"\",\n                      }}\n                    />\n                  </span>\n                </Profiles>\n              ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/explore.things", "fact_widget_deployments_id": "48a29f5af6b3337284fd9bef4af2b06d", "inserted_timestamp": "2024-05-12T22:38:43.522Z", "modified_timestamp": "2024-05-12T22:38:43.522Z", "__row_index": 13}