{"tx_hash": "2YuUB6viMsCtYc3bzDMvPVV6ckrxnk5juy3NhiWDwhuT", "action_id_social": "DdqRmRRocdM8qL5xHLizL7ywL7g6i5wzuoKZkoiM1emo-0-widget", "block_id": 106163487, "block_timestamp": "2023-11-20T23:34:18.755Z", "signer_id": "hack.near", "widget_name": "widgets", "source_code": "const data = Social.get(\"*/graph/star/**\", \"final\");\n\nconst starCountsByWidget = {};\n\nObject.keys(data).forEach((user) => {\n  const userData = data[user];\n  const widgetData = userData?.graph?.star;\n\n  if (widgetData) {\n    Object.keys(widgetData).forEach((widgetCreator) => {\n      const widgetList = widgetData[widgetCreator]?.widget;\n\n      if (widgetList) {\n        Object.keys(widgetList).forEach((widgetName) => {\n          const widgetPath = `${widgetCreator}/widget/${widgetName}`;\n\n          if (!starCountsByWidget[widgetPath]) {\n            starCountsByWidget[widgetPath] = 0;\n          }\n\n          if (typeof widgetList[widgetName] !== \"undefined\") {\n            starCountsByWidget[widgetPath]++;\n          }\n        });\n      }\n    });\n  }\n});\n\nconst rankedWidgets = Object.entries(starCountsByWidget)\n  .filter(([widgetName, totalStars]) => typeof totalStars !== \"undefined\")\n  .sort((a, b) => b[1] - a[1]);\n\nreturn (\n  <div>\n    <h3>Top Widgets</h3>\n    <ol>\n      {rankedWidgets.map(([widgetPath, totalStars], index) => {\n        const [widgetCreator, _, widgetName] = widgetPath.split(\"/\");\n        return (\n          <li key={widgetPath}>\n            <a href={`/near/widget/ComponentDetailsPage?src=${widgetPath}`}>\n              {widgetName}\n            </a>{\" \"}\n            ({totalStars} stars) by{\" \"}\n            <Widget\n              src=\"mob.near/widget/N.ProfileLine\"\n              props={{ accountId: widgetCreator, hideAccountId: true }}\n            />\n          </li>\n        );\n      })}\n    </ol>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/widgets", "fact_widget_deployments_id": "0b52e76112a4a491c84245d22d02110c", "inserted_timestamp": "2023-11-21T01:13:47.615Z", "modified_timestamp": "2023-11-21T01:13:47.615Z", "__row_index": 0}