{"tx_hash": "AHP8QTz8qDuGnW5CUGHq1YZkMZUtTbMjPcDmh8GGhJzM", "action_id_social": "8myZ5DJNtusGd6TAwpCvmKAif3Y79g4FotL8g9cZNHzx-0-widget", "block_id": 115741304, "block_timestamp": "2024-03-29T20:57:59.490Z", "signer_id": "hack.near", "widget_name": "passport", "source_code": "const user = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (!user) return <Web3Connect connectLabel=\"Connect\" />;\n\nconst passportDecoderAbi = fetch(\n  \"https://raw.githubusercontent.com/gitcoinco/eas-proxy/main/deployments/abi/GitcoinPassportDecoder.json\"\n);\nif (!passportDecoderAbi.ok) {\n  return \"ERROR\";\n}\nconst [address, setAddress] = useState(user);\nconst [passport, setPassport] = useState(null);\nconst [score, setScore] = useState(null);\nconst [verified, setVerified] = useState(null);\nconst [error, setError] = useState(\"\");\n\nconst contractAddress = \"0x5558D441779Eca04A329BcD6b47830D2C6607769\";\nconst parsedAbi = JSON.parse(passportDecoderAbi.body);\nconst decoderAbi = parsedAbi[\"0x1a4\"];\n\nconst decoder = new ethers.Contract(\n  contractAddress,\n  decoderAbi,\n  Ethers.provider().getSigner()\n);\n\nfunction getPassport() {\n  decoder\n    .getPassport(address)\n    .then((result) => {\n      setPassport(result);\n      setError(\"\");\n    })\n    .catch((error) => {\n      console.error(\"error fetching passport:\", error);\n      setError(\"Failed to retrieve data. Please try with a verified address.\");\n    });\n}\n\nfunction getScore() {\n  decoder\n    .getScore(address)\n    .then((result) => {\n      const integerScore = parseInt(result._hex, 16);\n      const actualScore = integerScore / 10000;\n      setScore(actualScore);\n      setError(\"\");\n    })\n    .catch((error) => {\n      console.error(\"error fetching score:\", error);\n      setError(\"Failed to fetch score. Please try with a verified address.\");\n    });\n}\n\nfunction getStatus() {\n  decoder\n    .isHuman(address)\n    .then((result) => {\n      setVerified(result);\n      setError(\"\");\n    })\n    .catch((error) => {\n      console.error(\"error checking status:\", error);\n      setError(\"Failed to check status. Please try with a verified address.\");\n    });\n}\n\nreturn (\n  <>\n    <div className=\"m-2\">\n      <h3>Gitcoin Passport Decoder</h3>\n      <input\n        type=\"text\"\n        placeholder=\"input Ethereum address\"\n        value={address}\n        onChange={(e) => setAddress(e.target.value)}\n      />\n    </div>\n    <div className=\"m-2\">\n      <button\n        disabled={address === \"\"}\n        className=\"btn btn-primary m-1\"\n        onClick={getStatus}\n      >\n        Check Passport\n      </button>\n      <button\n        disabled={address === \"\"}\n        className=\"btn btn-primary m-1\"\n        onClick={getScore}\n      >\n        Fetch Score\n      </button>\n      <button\n        disabled={address === \"\"}\n        className=\"btn btn-primary m-1\"\n        onClick={getPassport}\n      >\n        Review Data\n      </button>\n      <p className=\"m-1\">{error}</p>\n    </div>\n    <div className=\"m-2\">\n      <p className=\"m-2\">\n        <Widget src=\"hack.near/widget/GitcoinProfile\" props={{ verified }} />\n      </p>\n      {score && (\n        <p className=\"m-2\">\n          <b>Score:</b> {JSON.stringify(score)}\n        </p>\n      )}\n      {passport && (\n        <p className=\"m-2\">\n          <b>Data:</b> {JSON.stringify(passport)}\n        </p>\n      )}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/passport", "fact_widget_deployments_id": "0c6790329a96480a582234ab8d325472", "inserted_timestamp": "2024-03-29T22:34:44.557Z", "modified_timestamp": "2024-03-29T22:34:44.557Z", "__row_index": 6}