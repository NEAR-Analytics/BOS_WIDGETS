{"tx_hash": "DzN21SyTXPsY2EoULBzbkEyjCwKeYANNi8vXtHq96iUf", "action_id_social": "9VXpyEAX9Vq65kUr1DWAh4pVmMuQRhMAbpok8v9Cmdoe-0-widget", "block_id": 117844626, "block_timestamp": "2024-04-29T00:02:03.528Z", "signer_id": "hack.near", "widget_name": "commons.builders", "source_code": "const accountId = props.accountId || context.accountId || \"every.near\";\n\nconst attestations = Social.keys(`*/graph/commons/*`, \"final\", {\n  values_only: true,\n});\n\nif (attestations === null) {\n  return \"\";\n}\n\nconst attestationsCount = {};\nconst buildersSet = new Set();\n\nObject.keys(attestations).forEach((account) => {\n  const buildersData = attestations[account]?.graph?.commons;\n\n  if (buildersData) {\n    Object.keys(buildersData).forEach((builder) => {\n      if (!attestationsCount[builder]) {\n        attestationsCount[builder] = 0;\n      }\n      attestationsCount[builder]++;\n      buildersSet.add(builder);\n    });\n  }\n});\n\nconst rankedBuilders = Array.from(buildersSet).sort((a, b) => {\n  return attestationsCount[b] - attestationsCount[a];\n});\n\nreturn (\n  <div className=\"m-2\">\n    {rankedBuilders.map((builder, i) => (\n      <div key={i} className=\"d-flex border-bottom justify-content-between\">\n        <div className=\"m-1 p-2\">\n          <span>\n            <Widget\n              src=\"mob.near/widget/N.ProfileLine\"\n              props={{\n                accountId: builder,\n              }}\n            />\n          </span>\n          <p className=\"mt-1\">\n            <i>{attestationsCount[builder]} attestations</i>\n          </p>\n        </div>\n        <div className=\"m-1 p-3\">\n          <Widget\n            src=\"hack.near/widget/attest\"\n            props={{ accountId: builder }}\n          />\n        </div>\n      </div>\n    ))}\n  </div>\n);\n", "metadata": {"fork_of": "hack.near/widget/everyone@94017650"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/commons.builders", "fact_widget_deployments_id": "c6eb4dd10215b5e79db23e17bf889ffa", "inserted_timestamp": "2024-04-29T01:59:33.769Z", "modified_timestamp": "2024-04-29T01:59:33.769Z", "__row_index": 0}