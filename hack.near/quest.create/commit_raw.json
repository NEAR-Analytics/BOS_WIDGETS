{"tx_hash": "6gFaWx7HTDcrkvL1qZE4MQSUHzZ4kv7wP8TogjX1BxRd", "action_id_social": "Bgff1K38fDrk4rNHfcb5VMuiFaNjTJLbQKwQgy1fkcyY-0-widget", "block_id": 107399460, "block_timestamp": "2023-12-08T00:59:24.385Z", "signer_id": "hack.near", "widget_name": "quest.create", "source_code": "const type = props.type ?? \"quest\";\n\nfunction generateUID() {\n  return (\n    Math.random().toString(16).slice(2) +\n    Date.now().toString(36) +\n    Math.random().toString(16).slice(2)\n  );\n}\n\nconst questId = props.questId ?? generateUID();\n\nconst composeData = () => {\n  // generate a random id\n  const thingId = questId;\n  const data = {\n    [type]: {\n      [thingId]: {\n        \"\": JSON.stringify({\n          thing,\n        }),\n        metadata: {\n          type,\n        },\n      },\n    },\n    post: {\n      main: JSON.stringify({\n        content: `[+EMBED](https://near.social/${context.accountId}/${type}/${thingId})`,\n      }),\n    },\n    index: {\n      post: JSON.stringify({ key: \"main\", value: { type: \"md\" } }),\n    },\n    // index: {\n    //   every: JSON.stringify({\n    //     key: type,\n    //     value: {\n    //       path: `${context.accountId}/${type}/${thingId}`,\n    //       type,\n    //     },\n    //   }),\n    // },\n  };\n\n  if (state.selectedType === \"efiz.near/type/markdown\") {\n    const notifications = extractTagNotifications(state.thing.text, {\n      type: \"social\",\n      path: `${context.accountId}/thing/${thingId}`,\n    });\n\n    if (notifications.length) {\n      data.index.notify = JSON.stringify(\n        notifications.length > 1 ? notifications : notifications[0]\n      );\n    }\n  }\n\n  if (postThing) {\n    data = postThing(data);\n  }\n  return data;\n};\n\nreturn (\n  <>\n    <CommitButton force data={composeData()}>\n      create\n    </CommitButton>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/quest.create", "fact_widget_deployments_id": "f1de82456e890fed537a74ef675e3f08", "inserted_timestamp": "2023-12-08T02:57:22.098Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}