{"tx_hash": "Dus1aV7QWRKMzuDeytQVmPgYMkMMAxq2uvbXJ5oogZTS", "action_id_social": "ENr3VkuBoBWg2vmXWadH8dGmx1oeUWwCp6nDndxkZ4ab-0-widget", "block_id": 120525111, "block_timestamp": "2024-06-05T23:26:32.485Z", "signer_id": "hack.near", "widget_name": "timer", "source_code": "const { startTime, endTime, type } = props;\n\nState.init({\n  days: \"-\",\n  hours: \"-\",\n  minutes: \"-\",\n  seconds: \"-\",\n  title: \"\",\n});\n\nconst formatTime = (time) => (time < 10 ? `0${time}` : time);\n\nconst timer = setInterval(() => {\n  const now = new Date().getTime();\n  const start = new Date(parseInt(startTime)).getTime();\n  const end = new Date(parseInt(endTime)).getTime();\n\n  const diff = new Date(parseInt(end)).getTime() - new Date().getTime();\n  let days = Math.floor(diff / (1000 * 60 * 60 * 24));\n  let hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  let minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n  let seconds = Math.floor((diff % (1000 * 60)) / 1000);\n\n  if (now < start) {\n    title = <>closed</>;\n  } else if (now > start && now < end) {\n    title = <>open</>;\n  } else {\n    days = 0;\n    hours = 0;\n    minutes = 0;\n    seconds = 0;\n  }\n\n  console.log([days, hours, minutes, seconds]);\n  State.update({\n    days: days,\n    hours: hours,\n    minutes: minutes,\n    seconds: seconds,\n    title: title,\n  });\n\n  clearInterval(timer);\n}, 1000);\n\nconst TimeSlot = styled.div`\n  flex: 1;\n`;\n\nconst Timer = styled.div`\n  font-size: 23px;\n  color: #000;\n  display: flex;\n  width: 290px;\n  padding: 0 20px;\n`;\n\nconst TimerContainer = styled.div`\n  font-size: 19px;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  line-height: 1;\n  padding: 12px;\n`;\n\nconst Time = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  flex: 1;\n`;\n\nconst TimerContent = () => {\n  const TimeSlot = ({ time, title }) => (\n    <div>\n      <div>{formatTime(time)}</div>\n      <small className=\"m-1\">{title}</small>\n    </div>\n  );\n\n  return (\n    <>\n      <Timer className=\"d-flex\">\n        <TimeSlot title=\"days\" time={state.days} />\n        <TimeSlot title=\"hours\" time={state.hours} />\n        <TimeSlot title=\"minutes\" time={state.minutes} />\n        <TimeSlot title=\"seconds\" time={state.seconds} />\n      </Timer>\n    </>\n  );\n};\n\nreturn (\n  <div className=\"p-3 justify-content-between align-items-center\">\n    <TimerContainer className=\"d-flex align-items-center justify-content-center\">\n      <Timer>\n        <TimeSlot>\n          <div>\n            <b>{formatTime(state.days)}</b> d\n          </div>\n        </TimeSlot>\n        <TimeSlot>\n          <div>\n            <b>{formatTime(state.hours)}</b> h\n          </div>\n        </TimeSlot>\n        <TimeSlot>\n          <div>\n            <b>{formatTime(state.minutes)}</b> m\n          </div>\n        </TimeSlot>\n        <TimeSlot>\n          <div>\n            <b>{formatTime(state.seconds)}</b> s\n          </div>\n        </TimeSlot>\n      </Timer>\n    </TimerContainer>\n  </div>\n);\n", "metadata": {"fork_of": "hack.near/widget/countdown@109031860"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/timer", "fact_widget_deployments_id": "92d4f6bbe66c814373cfab6ea003c22d", "inserted_timestamp": "2024-06-06T01:29:24.552Z", "modified_timestamp": "2024-06-06T01:29:24.552Z", "__row_index": 0}