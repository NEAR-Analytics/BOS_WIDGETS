{"tx_hash": "B6kfMAbXYLZ5TxW6uxQaEFX3Qf6EDMgsm1oMuNNmPzsT", "action_id_social": "DeEeQEYRhRKNdgrwQxcwADHQ1ZoJ1ctpLBQEjv4VQ5LG-0-widget", "block_id": 99931626, "block_timestamp": "2023-08-29T13:52:07.390Z", "signer_id": "hack.near", "widget_name": "send", "source_code": "const src = props.src ?? \"devs.near/widget/community\";\nconst update = props.update ?? \"hack.near/widget/community\";\n\nState.init({\n  src,\n  update,\n});\n\nconst source = Social.get(`${state.src}`);\nconst newVersion = Social.get(`${state.update}`);\n\nconst [creatorId, type, name] = src.split(\"/\");\n\nconst handleCreate = () =>\n  Social.set({\n    [`${type}`]: {\n      [`${name}`]: {\n        \"\": `${newVersion}`,\n      },\n    },\n  });\n\nfunction generateUID() {\n  return (\n    Math.random().toString(16).slice(2) +\n    Date.now().toString(36) +\n    Math.random().toString(16).slice(2)\n  );\n}\n\nconst requestId = props.requestId ?? generateUID();\n\nconst data = {\n  graph: {\n    request: {\n      merge: {\n        src: state.src,\n        update: state.update,\n      },\n    },\n  },\n  index: {\n    graph: JSON.stringify({\n      key: \"request\",\n      value: {\n        src: state.src,\n        update: state.update,\n      },\n    }),\n    notify: JSON.stringify({\n      key: creatorId,\n      value: {\n        type: \"merge\",\n        template: \"hack.near/widget/notification\",\n        data: {\n          src: state.src,\n          update: state.update,\n        },\n      },\n    }),\n  },\n};\n\nconst requests = Social.index(\"notify\", context.accountId, {\n  limit: 10,\n  order: \"desc\",\n  subscribe: true,\n});\n\nreturn (\n  <>\n    <h5 className=\"p-1\">original source:</h5>\n    <div className=\"input-group m-1 mb-2\">\n      <input\n        className=\"form-control\"\n        defaultValue={state.src}\n        onChange={(e) => {\n          State.update({\n            src: e.target.value,\n          });\n        }}\n      />\n    </div>\n    <h5 className=\"p-1\">updated version:</h5>\n    <div className=\"input-group m-1 mb-2\">\n      <input\n        className=\"form-control\"\n        defaultValue={state.update}\n        onChange={(e) => {\n          State.update({\n            update: e.target.value,\n          });\n        }}\n      />\n    </div>\n    <CommitButton className=\"btn btn-outline-secondary m-1\" force data={data}>\n      <i className=\"bi bi-git\"></i>\n      Submit\n    </CommitButton>\n    <button className=\"btn btn-outline-secondary m-1\" onClick={handleCreate}>\n      <i className=\"bi bi-stars\"></i>\n      Create\n    </button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/send", "fact_widget_deployments_id": "73e1e2815d69838310dee6e3c086a323", "inserted_timestamp": "2023-08-29T15:26:21.202Z", "modified_timestamp": "2023-08-29T15:26:21.202Z", "__row_index": 0}