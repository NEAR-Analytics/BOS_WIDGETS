{"tx_hash": "9Lj5xs3HsejTHWCeeHrktJhFXYNbnEbCDSoUCzkW8hjn", "action_id_social": "AMRQK5jQhypmPVoyku5n7L83XLKVU19iDuMmFQxnUvA6-0-widget", "block_id": 99325643, "block_timestamp": "2023-08-21T14:39:03.712Z", "signer_id": "hack.near", "widget_name": "NDC.WG.Page", "source_code": "const registryContract = \"registry.i-am-human.near\";\nconst issuer = \"fractal.i-am-human.near\";\n\nconst widgets = {\n  header: \"hack.near/widget/NDC.WG.Header\",\n  card: \"hack.near/widget/NDC.WG.Card\",\n  about: \"hack.near/widget/NDC.WG.About\",\n  styledComponents: \"hack.near/widget/NDC.StyledComponents\",\n  verifyHuman: \"hack.near/widget/NDC.VerifyHuman\",\n  compose: \"hack.near/widget/NDC.WG.Compose\",\n  deleteGroup: \"hack.near/widget/NDC.WG.Delete\",\n};\n\nconst groups = {\n  RC: {\n    title: \"Regional Communities\",\n    creatorId: \"rc-dao.near\",\n    members: [\n      \"abbakaka.near\",\n      \"igboze_builder.near\",\n      \"inspiratibiz.near\",\n      \"james.near\",\n      \"yuenisd.near\",\n    ],\n    daoId: \"rc-dao.sputnik-dao.near\",\n  },\n  NFT: {\n    title: \"Non-Fungible Tokens\",\n    creatorId: \"nearnftwg.near\",\n    members: [\"aescobar.near\", \"krikkraktrak.near\", \"nearversedao.near\"],\n    daoId: \"nearnftwg.sputnik-dao.near\",\n  },\n  DeFi: {\n    title: \"Decentralized Finance\",\n    creatorId: \"defindc.near\",\n    groupId: \"DeFi\",\n    members: [\"ntare.near\"],\n    daoId: \"defi-ndc.sputnik-dao.near\",\n  },\n  AI: {\n    title: \"Artificial Intelligence\",\n    creatorId: \"ai-dao.near\",\n    members: [\"damboy22.near\"],\n    daoId: \"ai-dao.sputnik-dao.near\",\n  },\n  Gaming: {\n    title: \"Gaming\",\n    creatorId: \"haenko.near\",\n    members: [\"haenko.near\", \"dazo_gaming.near\", \"jeffgold.near\"],\n  },\n  Events: {\n    title: \"Events\",\n    creatorId: \"neardigitalcollective.near\",\n    members: [\"ogruss.near\"],\n  },\n  FDAO: {\n    title: \"Freelancers\",\n    creatorId: \"freelancerdao.near\",\n    members: [\n      \"blaze.near\",\n      \"fiftycent.near\",\n      \"atrox1382.near\",\n      \"robert.near\",\n      \"kazanderdad.near\",\n    ],\n    daoId: \"freelancerdao.sputnik-dao.near\",\n  },\n  NRC: {\n    title: \"Research\",\n    creatorId: \"research-collective.near\",\n    members: [\"chloe.near\", \"earnestetim.near\", \"xvii.near\"],\n    daoId: \"research-collective.sputnik-dao.near\",\n  },\n  ReFi: {\n    title: \"Regenerative Finance\",\n    creatorId: \"nearrefi.near\",\n    members: [\n      \"earnestetim.near\",\n      \"liight.near\",\n      \"trophy001.near\",\n      \"skyempire.near\",\n      \"ndcplug.near\",\n      \"ntare.near\",\n      \"wolfwood.near\",\n    ],\n    daoId: \"refi.sputnik-dao.near\",\n  },\n  Aurora: {\n    title: \"Aurora\",\n    creatorId: \"ac-dao.near\",\n    members: [\"whendacha.near\", \"techdir.near\", \"johanga.near\"],\n    daoId: \"aurora-community-dao.sputnik-dao.near\",\n  },\n  Tech: {\n    title: \"Technology\",\n    creatorId: \"neardigitalcollective.near\",\n    members: [\"robert.near\", \"jlw.near\", \"blaze.near\"],\n    daoId: \"ndc-techwg.sputnik-dao.near\",\n  },\n  GWG: {\n    title: \"Governance\",\n    creatorId: \"govworkinggroup.near\",\n    members: [\n      \"yuensid.near\",\n      \"fiftycent.near\",\n      \"atrox1382.near\",\n      \"robert.near\",\n      \"kazanderdad.near\",\n    ],\n    daoId: \"gwg.sputnik-dao.near\",\n  },\n};\n\nState.init({\n  selectedGroup: \"RegionalCommunities\",\n  start: true,\n  sbt: false,\n  og: false,\n  groupId: \"\",\n  originGroups: [],\n  notFound: \"There are no active work groups at the moment.\",\n  loading: false,\n});\n\nconst getVerifiedHuman = () => {\n  const isHuman = Near.view(registryContract, \"is_human\", {\n    account: context.accountId,\n  });\n  const ogTokens = Near.view(registryContract, \"sbt_tokens\", {\n    issuer,\n  });\n\n  State.update({\n    og: ogTokens.some((sbt) => sbt.owner === context.accountId),\n    sbt: isHuman[0][1].length > 0,\n  });\n};\n\nconst getGroupData = (group) => Social.get(`${daoId}/groups/${group}`);\n\n// const handleSelect = (item) => {\n//   switch (item.id) {\n//     case 1:\n//       getGroupData(\"RegionalCommunties\");\n//       break;\n//     case 2:\n//       getGroupData(\"NFT\");\n//       break;\n//     case 3:\n//       getGroupData(\"Gaming\");\n//       break;\n//     case 4:\n//       getGroupData(\"Tech\");\n//       break;\n//     case 5:\n//       getGroupData(\"ReFi\");\n//       break;\n//   }\n//   State.update({ selectedGroup: item.id });\n// };\n\nif (state.start) {\n  getVerifiedHuman();\n  getGroupData(\"RegionalCommunities\");\n\n  State.update({ start: false });\n}\n\nconst widget = {\n  styledComponents: \"hack.near/widget/NDC.StyledComponents\",\n};\n\nconst Header = styled.div`\n  background: black;\n`;\n\nconst Container = styled.div`\n  padding: 30px 0;\n  margin: 0;\n`;\n\nconst ActivityContainer = styled.div`\n  overflow-y: scroll;\n`;\n\nconst Left = styled.div`\n  padding: 20px;\n  background: #f8f8f9;\n  border-radius: 8px;\n`;\n\nconst Center = styled.div``;\n\nconst H5 = styled.h5`\n  margin-bottom: 20px;\n`;\n\nconst ButtonNominateContainer = styled.div`\n  padding: 16px;\n  border-radius: 8px;\n  background: #f8f8f9;\n`;\n\nconst Filter = styled.div`\n  margin-top: 32px;\n\n  @media only screen and (max-width: 1061px) {\n    flex-direction: column;\n  }\n`;\n\nconst Toolbar = styled.div`\n  margin-left: 20px;\n  @media only screen and (max-width: 1061px) {\n    margin: 10px 0 0 0;\n  }\n`;\n\nreturn (\n  <>\n    <div>\n      <Header className=\"d-flex p-3 px-4 align-items-center rounded justify-content-between\">\n        <Widget\n          src=\"mob.near/widget/Image\"\n          props={{\n            image: {\n              url: \"https://pbs.twimg.com/profile_images/1622941553839816707/nmf3MWw1_400x400.jpg\",\n            },\n            alt: \"ndc\",\n            style: {\n              height: \"42px\",\n              objectFit: \"cover\",\n            },\n            fallbackUrl:\n              \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n          }}\n        />\n        {isVerified ? (\n          <Widget\n            src={widget.styledComponents}\n            props={{\n              Link: {\n                text: \"Verify as Human\",\n                href: \"https://i-am-human.app/\",\n              },\n            }}\n          />\n        ) : (\n          <Toolbar>\n            {props.createdGroup ? (\n              <Widget\n                src={widget.styledComponents}\n                props={{\n                  Button: {\n                    className: \"danger primary\",\n                    text: \"Delete Work Group\",\n                    onClick: () => State.update({ showModalDelete: true }),\n                    icon: <i class=\"bi bi-trash\"></i>,\n                  },\n                }}\n              />\n            ) : (\n              <Widget\n                src={widget.styledComponents}\n                props={{\n                  Button: {\n                    text: \"Create Work Group\",\n                    onClick: () => State.update({ showModal: true }),\n                    icon: <i class=\"bi bi-plus-lg\"></i>,\n                  },\n                }}\n              />\n            )}\n          </Toolbar>\n        )}\n      </Header>\n      <Container className=\"d-flex row justify-content-between w-100\">\n        <Left className=\"col-lg mb-3\">\n          <H5>Learning Together</H5>\n          <Widget\n            src={widgets.about}\n            props={{\n              selectedGroup: state.selectedGroup,\n              handleSelect: (item) => handleSelect(item),\n            }}\n          />\n          <div>\n            {!state.sbt ? (\n              <div className=\"mt-5\">\n                <Widget\n                  src={widgets.verifyHuman}\n                  props={{\n                    title: \"Get Verified To Create a Work Group\",\n                    small: true,\n                  }}\n                />\n              </div>\n            ) : (\n              <div className=\"mt-5\">\n                <Toolbar>\n                  {props.createdGroup ? (\n                    <Widget\n                      src={widget.styledComponents}\n                      props={{\n                        Button: {\n                          className: \"danger primary\",\n                          text: \"Delete Work Group\",\n                          onClick: () =>\n                            State.update({ showModalDelete: true }),\n                          icon: <i class=\"bi bi-trash\"></i>,\n                        },\n                      }}\n                    />\n                  ) : (\n                    <Widget\n                      src={widget.styledComponents}\n                      props={{\n                        Button: {\n                          text: \"Create Work Group\",\n                          onClick: () => State.update({ showModal: true }),\n                          icon: <i class=\"bi bi-plus-lg\"></i>,\n                        },\n                      }}\n                    />\n                  )}\n                </Toolbar>\n              </div>\n            )}\n          </div>\n        </Left>\n        <Center className=\"col-lg-9 px-2 px-md-3 d-flex flex-row flex-wrap\">\n          <h3>NDC Work Groups</h3>\n\n          {Object.values(groups).map((group, i) => (\n            <Widget\n              key={i}\n              src={widgets.card}\n              props={{\n                data: group,\n                registry_contract: registryContract,\n              }}\n            />\n          ))}\n        </Center>\n      </Container>\n    </div>\n\n    <>\n      {state.showModal && (\n        <Widget\n          src={widgets.compose}\n          props={{\n            handleClose: () => State.update({ showModal: false }),\n          }}\n        />\n      )}\n      {state.showModalDelete && (\n        <Widget\n          src={widgets.deleteGroup}\n          props={{\n            group: state.group,\n            handleClose: () => State.update({ showModalDelete: false }),\n          }}\n        />\n      )}\n    </>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/NDC.WG.Page", "fact_widget_deployments_id": "d4da62cf7876bb82723b7d9a2055843d", "inserted_timestamp": "2023-08-21T16:34:51.384Z", "modified_timestamp": "2023-08-21T16:34:51.384Z", "__row_index": 1}