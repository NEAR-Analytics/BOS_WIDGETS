{"tx_hash": "GhnSFvyXp449aPyP7AF262uuddQxG8ZbjAC71GVLvpBb", "action_id_social": "ECUF5uNBQ9WcprmkUkKmSQEw8bUEVMbLYxCyEnM5bUL4-0-widget", "block_id": 100186536, "block_timestamp": "2023-09-01T22:49:52.985Z", "signer_id": "hack.near", "widget_name": "NDC.WG.Page", "source_code": "const daoId = \"hack.near\";\n\nconst registryContract = \"registry.i-am-human.near\";\nconst issuer = \"fractal.i-am-human.near\";\n\nconst widgets = {\n  header: \"hack.near/widget/NDC.WG.Header\",\n  card: \"hack.near/widget/NDC.WG.Card\",\n  about: \"hack.near/widget/NDC.WG.About\",\n  styledComponents: \"hack.near/widget/NDC.StyledComponents\",\n  verifyHuman: \"hack.near/widget/NDC.VerifyHuman\",\n  compose: \"hack.near/widget/NDC.WG.Create\",\n  deleteGroup: \"hack.near/widget/NDC.WG.Delete\",\n};\n\nconst groups = Social.get(`${daoId}/thing/directory`);\n\nif (!groups) {\n  return \"\";\n}\n\nconst groupArray = JSON.parse(groups);\n\n// IAH Verification\nlet human = false;\nconst userSBTs = Near.view(\"registry.i-am-human.near\", \"sbt_tokens_by_owner\", {\n  account: props.accountId ?? context.accountId,\n});\n\nfor (let i = 0; i < userSBTs.length; i++) {\n  if (\"fractal.i-am-human.near\" == userSBTs[i][0]) {\n    human = true;\n  }\n}\n\nconst widget = {\n  styledComponents: \"hack.near/widget/NDC.StyledComponents\",\n};\n\nconst Header = styled.div`\n  background: black;\n`;\n\nconst Container = styled.div`\n  padding: 30px 0;\n  margin: 0;\n`;\n\nconst ActivityContainer = styled.div`\n  overflow-y: scroll;\n`;\n\nconst Left = styled.div`\n  padding: 20px;\n  background: #f8f8f9;\n  border-radius: 8px;\n`;\n\nconst Center = styled.div``;\n\nconst H5 = styled.h5`\n  margin-bottom: 20px;\n`;\n\nconst ButtonNominateContainer = styled.div`\n  padding: 16px;\n  border-radius: 8px;\n  background: #f8f8f9;\n`;\n\nconst Toolbar = styled.div`\n  margin-left: 20px;\n  @media only screen and (max-width: 1061px) {\n    margin: 10px 0 0 0;\n  }\n`;\n\nreturn (\n  <>\n    <div>\n      <Header className=\"d-flex p-3 px-4 align-items-center rounded justify-content-between\">\n        <Widget\n          src=\"mob.near/widget/Image\"\n          props={{\n            image: {\n              url: \"https://pbs.twimg.com/profile_images/1622941553839816707/nmf3MWw1_400x400.jpg\",\n            },\n            alt: \"ndc\",\n            style: {\n              height: \"42px\",\n              objectFit: \"cover\",\n            },\n            fallbackUrl:\n              \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n          }}\n        />\n        {!human ? (\n          <Widget\n            src={widget.styledComponents}\n            props={{\n              Link: {\n                text: \"Verify as Human\",\n                href: \"https://i-am-human.app/\",\n              },\n            }}\n          />\n        ) : (\n          <Toolbar>\n            {props.createdGroup ? (\n              <Widget\n                src={widget.styledComponents}\n                props={{\n                  Button: {\n                    className: \"danger primary\",\n                    text: \"Edit Work Group\",\n                    onClick: () => State.update({ showModal: true }),\n                    icon: <i class=\"bi bi-trash\"></i>,\n                  },\n                }}\n              />\n            ) : (\n              <Widget\n                src={widget.styledComponents}\n                props={{\n                  Button: {\n                    text: \"Create Work Group\",\n                    onClick: () => State.update({ showModal: true }),\n                    icon: <i class=\"bi bi-plus-lg\"></i>,\n                  },\n                }}\n              />\n            )}\n          </Toolbar>\n        )}\n      </Header>\n      <Container className=\"d-flex row justify-content-between w-100\">\n        <Left className=\"col-lg mb-3\">\n          <H5>Learning Together</H5>\n          <Widget src={widgets.about} />\n        </Left>\n        <Center className=\"col-lg-9 px-2 px-md-3 d-flex flex-column\">\n          <h2>NDC Work Groups</h2>\n          <div className=\"d-flex flex-row flex-wrap\">\n            {groupArray.map((group, i) => (\n              <Widget\n                key={i}\n                src={widgets.card}\n                props={{\n                  groupId: group,\n                }}\n              />\n            ))}\n          </div>\n        </Center>\n      </Container>\n    </div>\n\n    <>\n      {state.showModal && (\n        <Widget\n          src={widgets.compose}\n          props={{\n            handleClose: () => State.update({ showModal: false }),\n          }}\n        />\n      )}\n      {state.showModalDelete && (\n        <Widget\n          src={widgets.deleteGroup}\n          props={{\n            group: state.group,\n            handleClose: () => State.update({ showModalDelete: false }),\n          }}\n        />\n      )}\n    </>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/NDC.WG.Page", "fact_widget_deployments_id": "f50f8476bfeb61b30c79580c1572a312", "inserted_timestamp": "2023-09-02T00:43:20.983Z", "modified_timestamp": "2023-09-02T00:43:20.983Z", "__row_index": 9}