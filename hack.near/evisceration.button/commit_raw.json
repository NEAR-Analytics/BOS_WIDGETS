{"tx_hash": "5xWa5K8A6ETP3yDFucJVYMFFcnrCzAh6T7wwghZGJ8fT", "action_id_social": "8nFM8fNkP3oedMWt3wdkLAaAHzdQETeSVBz2iBwhfcSp-0-widget", "block_id": 113956221, "block_timestamp": "2024-03-02T15:45:34.928Z", "signer_id": "hack.near", "widget_name": "evisceration.button", "source_code": "const initialHealth = 888;\nconst accountId = props.accountId ?? context.accountId ?? \"hack.near\";\nconst gameId = props.gameId ?? \"evisceration\";\nconst appId = props.appId ?? \"lumina\";\nconst clicks = Social.index(appId, `${accountId}-${gameId}`, {\n  limit: 888,\n  order: \"desc\",\n});\n\nif (!clicks) {\n  return \"\";\n}\n\nconst totalHits = clicks ? Object.keys(clicks).length : 0;\n\nconst attack = () => {\n  Social.set({\n    index: {\n      [appId]: JSON.stringify({\n        key: `${accountId}-${gameId}`,\n        value: { type: \"click\" },\n      }),\n    },\n  });\n};\n\nconst health = initialHealth - totalHits;\nconst eviscerated = health === 0;\n\nreturn (\n  <div>\n    {!eviscerated ? (\n      <>\n        <div className=\"d-flex flex-row gap-3\">\n          <p>\n            {health} health remaining ({clicks && Object.keys(clicks).length}{\" \"}\n            hit{Object.keys(clicks) > 1 && s})\n          </p>\n        </div>\n        <button\n          style={{ width: \"222px\" }}\n          onClick={attack}\n          className=\"btn btn-danger\"\n        >\n          attack\n        </button>\n      </>\n    ) : (\n      <p>The monster is dead!</p>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/evisceration.button", "fact_widget_deployments_id": "e518e35fc5c8ba1c29e47483274b9c66", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}