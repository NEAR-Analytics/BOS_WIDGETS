{"tx_hash": "AgDHbjVbgrtHn8n4Gt5EcwgTpvXtpTPMpDbSeLRWwp6r", "action_id_social": "48RqD2gkiaPqktcqpfUqMwhD8S6s8ySpS2HcNPrpVi8u-0-widget", "block_id": 113947055, "block_timestamp": "2024-03-02T12:17:32.914Z", "signer_id": "hack.near", "widget_name": "evisceration.button", "source_code": "const initialHealth = 10000;\nconst accountId = props.accountId ?? context.accountId ?? \"hack.near\";\nconst gameId = props.gameId ?? \"evisceration\";\nconst appId = props.appId ?? \"lumina\";\nconst clicks = Social.index(appId, `${accountId}-${gameId}`, {\n  limit: 10000,\n  order: \"desc\",\n});\n\nconst totalHits = clicks ? Object.keys(clicks).length : 0;\n\nconst attack = () => {\n  Social.set({\n    index: {\n      [appId]: JSON.stringify({\n        key: `${accountId}-${gameId}`,\n        value: { type: \"click\" },\n      }),\n    },\n  });\n};\n\nconst health = initialHealth - totalHits;\nconst eviscerated = health === 0;\n\nreturn (\n  <div>\n    {!eviscerated ? (\n      <>\n        <div className=\"d-flex flex-row gap-3\">\n          <p>\n            {health} health remaining ({clicks && Object.keys(clicks).length}{\" \"}\n            hit{Object.keys(clicks) > 1 && s})\n          </p>\n        </div>\n        <button\n          style={{ width: \"222px\" }}\n          onClick={attack}\n          className=\"btn btn-danger\"\n        >\n          attack\n        </button>\n      </>\n    ) : (\n      <p>The monster is dead!</p>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/evisceration.button", "fact_widget_deployments_id": "92945dade918a249b9bb53ab6672e9ff", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}