{"tx_hash": "By6aVkPk3Ce1SLJjVRYWZcexpnSEFunAshSRY4GGBZeZ", "action_id_social": "BQjZAx5G67DGn2PYPEdLVLE81m1CEYF3q2e61ztmUs71-0-widget", "block_id": 113944843, "block_timestamp": "2024-03-02T11:27:03.015Z", "signer_id": "hack.near", "widget_name": "evisceration.button", "source_code": "const initialHealth = 10000;\nconst accountId = props.accountId ?? context.accountId ?? \"hack.near\";\nconst gameId = props.gameId ?? \"evisceration\";\nconst appId = props.appId ?? \"test\";\nconst clicks = Social.index(appId, `${accountId}-${gameId}`, {\n  limit: 10000,\n  order: \"desc\",\n});\n\nconst totalHits = clicks ? Object.keys(clicks).length : 0;\n\nconst attack = () => {\n  Social.set({\n    index: {\n      [appId]: JSON.stringify({\n        key: `${accountId}-${gameId}`,\n        value: { type: \"click\" },\n      }),\n    },\n  });\n};\n\nconst health = initialHealth - totalHits;\nconst eviscerated = health === 0;\n\nreturn (\n  <div>\n    {!eviscerated ? (\n      <>\n        <div className=\"d-flex flex-row gap-3\">\n          <p>\n            {health} health remaining ({clicks && Object.keys(clicks).length}{\" \"}\n            hit{Object.keys(clicks) > 1 && s})\n          </p>\n        </div>\n        <button\n          style={{ width: \"222px\" }}\n          onClick={attack}\n          className=\"btn btn-danger\"\n        >\n          attack\n        </button>\n      </>\n    ) : (\n      <p>The monster is dead!</p>\n    )}\n  </div>\n);\n", "metadata": {"fork_of": "sdks.near/widget/SDKs.Lens.Queries.Profile@111793538"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/evisceration.button", "fact_widget_deployments_id": "ef97cc7ef44cfad3f28653ecd5b758ca", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}