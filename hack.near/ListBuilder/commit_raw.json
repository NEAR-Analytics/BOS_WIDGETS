{"tx_hash": "7f5wteMvLd8MQvYstvTVxKMp1KNistJEyCw6U4W4RxM5", "action_id_social": "JDicB2LNLGQW32Ct1HPSESQSL93mD4LimbXyX47mX85z-0-widget", "block_id": 115633974, "block_timestamp": "2024-03-28T06:50:59.759Z", "signer_id": "hack.near", "widget_name": "ListBuilder", "source_code": "const accountId = props.accountId ?? context.accountId ?? \"every.near\";\n\nconst [newList, setNewList] = useState(\"\");\nconst [activeTab, setActiveTab] = useState(\"explore\");\n\nconst switchTab = (tabName) => {\n  setActiveTab(tabName);\n};\n\nconst [listId, setListId] = useState(1);\nconst [owner, setOwner] = useState(\"\");\nconst [registrant, setRegistrant] = useState(\"\");\n\nconst list = Near.view(\"lists.potlock.near\", \"get_list\", {\n  list_id: listId,\n});\n\nconst lists = Near.view(\"lists.potlock.near\", \"get_lists\", {\n  from_index: 0,\n  limit: 100,\n});\n\nconst listsByOwner = Near.view(\"lists.potlock.near\", \"get_lists_for_owner\", {\n  owner_id: owner,\n});\n\nconst listsByRegistrant = Near.view(\n  \"lists.potlock.near\",\n  \"get_lists_for_registrant\",\n  {\n    registrant_id: registrant,\n  }\n);\n\nconst upvotesByList = Near.view(\"lists.potlock.near\", \"get_upvotes_for_list\", {\n  list_id: listId,\n  from_index: 0,\n  limit: 100,\n});\n\nconst upvotesByAccount = Near.view(\n  \"lists.potlock.near\",\n  \"get_upvoted_lists_for_account\",\n  {\n    account_id: accountId,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst registration = Near.view(\"lists.potlock.near\", \"get_registration\", {\n  registration_id: 1,\n});\n\nconst registrationsByList = Near.view(\n  \"lists.potlock.near\",\n  \"get_registrations_for_list\",\n  {\n    list_id: listId,\n    status,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst registrationsByRegistrant = Near.view(\n  \"lists.potlock.near\",\n  \"get_registrations_for_registrant\",\n  {\n    registrant_id: registrant,\n    status,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst isRegistered = Near.view(\"lists.potlock.near\", \"is_registered\", {\n  list_id: listId,\n  account_id: registrant,\n  required_status, // defaults to Approved\n});\n\nconst metadata = Near.view(\n  \"lists.potlock.near\",\n  \"get_contract_source_metadata\"\n);\n\nconst handleNew = () =>\n  Near.call(\"lists.potlock.near\", \"new\", {\n    version: \"1.0.0\",\n    commit_hash: \"7937ed404ce9090ad9bb9a116d494a1297111a7b\",\n    link: \"https://github.com/PotLock/core\",\n  });\n\nconst createList = () =>\n  Near.call(\"lists.potlock.near\", \"create_list\", {\n    name: newList.name,\n    description: newList.description,\n    cover_image_url: newList.backgroundImage,\n    admins: newList.admins,\n    default_registration_status: newList.defaultStatus,\n    admin_only_registrations: newList.adminOnly,\n  });\n\nconst updateList = () =>\n  Near.call(\"lists.potlock.near\", \"update_list\", {\n    list_id: listId,\n    name: newList.name,\n    description: newList.description,\n    cover_image_url: newList.backgroundImage,\n    remove_cover_image: remove,\n    default_registration_status: newList.defaultStatus,\n    admin_only_registrations: newList.adminOnly,\n  });\n\nconst deleteList = () =>\n  Near.call(\"lists.potlock.near\", \"delete_list\", {\n    list_id: listId,\n  });\n\nconst upvote = () =>\n  Near.call(\"lists.potlock.near\", \"upvote\", {\n    list_id: listId,\n  });\n\nconst removeUpvote = () =>\n  Near.call(\"lists.potlock.near\", \"remove_upvote\", {\n    list_id: listId,\n  });\n\nconst changeOwner = () =>\n  Near.call(\"lists.potlock.near\", \"owner_change_owner\", {\n    list_id: listId,\n    new_owner_id: newOwner,\n  });\n\nconst addAdmins = () =>\n  Near.call(\"lists.potlock.near\", \"owner_add_admins\", {\n    list_id: listId,\n    admins: newAdmins,\n  });\n\nconst removeAdmins = () =>\n  Near.call(\"lists.potlock.near\", \"owner_remove_admins\", {\n    list_id: listId,\n    admins: newAdmins,\n  });\n\nconst clearAdmins = () =>\n  Near.call(\"lists.potlock.near\", \"owner_clear_admins\", {\n    list_id: listId,\n  });\n\nreturn (\n  <div className=\"m-2\">\n    <div className=\"d-flex flex-row justify-content-between\">\n      <div className=\"m-2\">\n        <h3>\n          <a\n            style={{ color: \"#000\", textDecoration: \"none\" }}\n            href=\"https://github.com/PotLock/core/tree/main/contracts/lists\"\n          >\n            <b>List Builder</b>\n          </a>\n        </h3>\n        <button\n          className={`btn btn-sm btn-dark m-1 ${\n            activeTab === \"explore\" ? \"active\" : \"\"\n          }`}\n          onClick={() => switchTab(\"explore\")}\n        >\n          Explore\n        </button>\n        <button\n          className={`btn btn-sm btn-dark m-1 ${\n            activeTab === \"create\" ? \"active\" : \"\"\n          }`}\n          onClick={() => switchTab(\"create\")}\n        >\n          Create\n        </button>\n      </div>\n      <div className=\"m-3\">\n        <a\n          href=\"https://app.potlock.org\"\n          style={{ color: \"#000\", textDecoration: \"none\" }}\n        >\n          <Widget\n            src=\"mob.near/widget/Profile.ShortInlineBlock\"\n            props={{ accountId: \"potlock.near\" }}\n          />\n        </a>\n      </div>\n    </div>\n    <br />\n    {activeTab === \"create\" && (\n      <div className=\"m-2 mb-3\">\n        <Widget src=\"hack.near/widget/list.create\" />\n      </div>\n    )}\n    {activeTab === \"explore\" && (\n      <div className=\"m-2 mb-3\">\n        <Widget src=\"hack.near/widget/lists.explore\" />\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/ListBuilder", "fact_widget_deployments_id": "1f7a79b07be74064c3aa7e644d6b31e3", "inserted_timestamp": "2024-03-28T08:29:43.910Z", "modified_timestamp": "2024-03-28T08:29:43.910Z", "__row_index": 0}