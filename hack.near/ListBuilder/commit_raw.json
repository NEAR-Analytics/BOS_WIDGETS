{"tx_hash": "9hs1phzUZz1AXefUB2vPjARXNGC7ttaYVCK9Xm8YUK97", "action_id_social": "28CcaYgCZbFxWuscnGeGxGcVHVn9ZweQFYkeaTtkUXPs-0-widget", "block_id": 115612116, "block_timestamp": "2024-03-27T23:28:57.732Z", "signer_id": "hack.near", "widget_name": "ListBuilder", "source_code": "const accountId = props.accountId ?? context.accountId ?? \"every.near\";\n\nconst [listId, setListId] = useState(1);\nconst [owner, setOwner] = useState(\"\");\nconst [registrant, setRegistrant] = useState(\"\");\n\nconst list = Near.view(\"lists.potlock.near\", \"get_list\", {\n  list_id: listId,\n});\n\nconst lists = Near.view(\"lists.potlock.near\", \"get_lists\", {\n  from_index: 0,\n  limit: 100,\n});\n\nconst listsByOwner = Near.view(\"lists.potlock.near\", \"get_lists_for_owner\", {\n  owner_id: owner,\n});\n\nconst listsByRegistrant = Near.view(\n  \"lists.potlock.near\",\n  \"get_lists_for_registrant\",\n  {\n    registrant_id: registrant,\n  }\n);\n\nconst upvotesByList = Near.view(\"lists.potlock.near\", \"get_upvotes_for_list\", {\n  list_id: listId,\n  from_index: 0,\n  limit: 100,\n});\n\nconst upvotesByAccount = Near.view(\n  \"lists.potlock.near\",\n  \"get_upvoted_lists_for_account\",\n  {\n    account_id: accountId,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst registration = Near.view(\"lists.potlock.near\", \"get_registration\", {\n  registration_id: 1,\n});\n\nconst registrationsByList = Near.view(\n  \"lists.potlock.near\",\n  \"get_registrations_for_list\",\n  {\n    list_id: listId,\n    status,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst registrationsByRegistrant = Near.view(\n  \"lists.potlock.near\",\n  \"get_registrations_for_registrant\",\n  {\n    registrant_id: registrant,\n    status,\n    from_index: 0,\n    limit: 100,\n  }\n);\n\nconst isRegistered = Near.view(\"lists.potlock.near\", \"is_registered\", {\n  list_id: listId,\n  account_id: registrant,\n  required_status, // defaults to Approved\n});\n\nreturn (\n  <>\n    <div className=\"m-2\">\n      <div className=\"d-flex flex-row justify-content-between\">\n        <div className=\"m-2\">\n          <h3>\n            <b>List Builder</b>\n          </h3>\n          \u21b3\n          <a href=\"https://github.com/PotLock/core/tree/main/contracts/lists\">\n            view README on GitHub\n          </a>\n        </div>\n        <div className=\"m-3\">\n          <a\n            href=\"https://app.potlock.org\"\n            style={{ color: \"#000\", textDecoration: \"none\" }}\n          >\n            <Widget\n              src=\"mob.near/widget/Profile.ShortInlineBlock\"\n              props={{ accountId: \"potlock.near\" }}\n            />\n          </a>\n        </div>\n      </div>\n      <br />\n      <div className=\"m-2\">\n        <div className=\"mt-2 mb-3\">\n          <h5>\n            <i>Sample</i>\n          </h5>\n        </div>\n        <div>\n          <Widget src=\"hack.near/widget/list.card\" props={{ listId: 1 }} />\n        </div>\n        <br />\n        <div>\n          <h4>\n            <b>Explore Lists</b>\n          </h4>\n          <b className=\"m-1\">Filter by Owner</b>\n          <div className=\"m-2\">\n            <input\n              type=\"text\"\n              placeholder=\"<example>.near\"\n              value={owner}\n              onChange={(e) => setOwner(e.target.value)}\n            />\n          </div>\n          <b className=\"m-1\">Filter by Registrant</b>\n          <div className=\"m-2\">\n            <input\n              type=\"text\"\n              placeholder=\"<example>.near\"\n              value={registrant}\n              onChange={(e) => setRegistrant(e.target.value)}\n            />\n          </div>\n        </div>\n        <div>\n          {listsByOwner.length > 0 ? (\n            <div className=\"m-3\">\n              {listsByOwner.map((list, i) => (\n                <div key={i}>\n                  <Widget\n                    src=\"hack.near/widget/list.card\"\n                    props={{ listId: list.id }}\n                  />\n                </div>\n              ))}\n            </div>\n          ) : listsByRegistrant.length > 0 ? (\n            <div className=\"m-3\">\n              {listsByRegistrant.map((list, i) => (\n                <div key={i}>\n                  <Widget\n                    src=\"hack.near/widget/list.card\"\n                    props={{ listId: list.id }}\n                  />\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"m-3\">\n              {lists.map((list, i) => (\n                <div key={i}>\n                  <Widget\n                    src=\"hack.near/widget/list.card\"\n                    props={{ listId: list.id }}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  </>\n);\n", "metadata": {"fork_of": "devs.near/widget/app@112732770"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/ListBuilder", "fact_widget_deployments_id": "ffdc2e303142b4098bb8dd65be8db270", "inserted_timestamp": "2024-03-28T00:44:31.333Z", "modified_timestamp": "2024-03-28T01:51:48.122Z", "__row_index": 0}