{"tx_hash": "8fGcG5afmMmUanCT1FaEUDr3UTUXVQoAeDBeV4jj74cW", "action_id_social": "FzS5k6YpAqbjSZbSxiATFLzLesGJEh5tzxT65FS2yrki-0-widget", "block_id": 100629228, "block_timestamp": "2023-09-08T01:39:30.215Z", "signer_id": "hack.near", "widget_name": "CreateGroup.Form", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nState.init({\n  step: 0,\n  form: initialFormState,\n  errors: null,\n});\n\nfunction generateUID() {\n  return (\n    Math.random().toString(16).slice(2) +\n    Date.now().toString(36) +\n    Math.random().toString(16).slice(2)\n  );\n}\n\nconst groupId = props.groupId ?? generateUID();\n\nconst handleStepComplete = (value) => {\n  if (state.step === 3) {\n    const finalAnswers = {\n      ...state.form,\n      ...value,\n    };\n\n    State.update({\n      step: state.step,\n      form: finalAnswers,\n    });\n    handleFormComplete(finalAnswers);\n    return;\n  }\n  State.update({\n    step: state.step + 1,\n    form: {\n      ...state.form,\n      ...value,\n    },\n  });\n};\n\nfunction handleFormComplete(value) {\n  Social.set({\n    thing: {\n      [groupId]: {\n        description:\n          typeof value.description === \"string\" ? value.description : \"\",\n      },\n    },\n    graph: {\n      [groupId]: {\n        ...state.members,\n      },\n    },\n  });\n}\n\nconst steps = [\n  {\n    title: \"Basics\",\n    active: state.step === 0,\n    icon: state.step > 0 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 0 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Membership\",\n    active: state.step === 1,\n    icon: state.step > 1 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 1 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Create\",\n    active: state.step === 2,\n    icon: state.step > 2 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 2 ? \"active-outline\" : undefined,\n  },\n];\n\nreturn (\n  <>\n    <h1 className=\"h3 fw-bold mb-4\">Create Group</h1>\n    <Widget\n      src={`nearui.near/widget/Navigation.Steps`}\n      props={{\n        steps: steps,\n        onClick: (i) => {\n          if (i > state.step) return;\n          State.update({\n            step: i,\n          });\n        },\n      }}\n    />\n    <Widget\n      src={`hack.near/widget/CreateGroup.Step${state.step + 1}`}\n      props={{\n        formState: state.form,\n        onComplete: handleStepComplete,\n        errors: state.errors,\n        renderFooter: (stepState, otherProps) => (\n          <Widget\n            src={`hack.near/widget/CreateGroup.Footer`}\n            props={{\n              isLast: state.step >= steps.length - 1,\n              hasPrevious: state.step > 0,\n              onNext: () => {\n                handleStepComplete(stepState);\n              },\n              onPrevious: () => {\n                State.update({\n                  step: state.step - 1,\n                });\n              },\n              onReset: () => {\n                State.update({\n                  step: 0,\n                  form: initialFormState,\n                  errors: null,\n                });\n              },\n              ...otherProps,\n            }}\n          />\n        ),\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/CreateGroup.Form", "fact_widget_deployments_id": "514bf0e50acdca615843ee60e7a57308", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}