{"tx_hash": "HZm3ZX2JhEAYFauWJCpafxsjM9MAZMKdRzwxC3kVvSY9", "action_id_social": "6EyxsYc61g6m9um1aAqXf1kJyQ2D7qgCvSWgkmLQTCZj-0-widget", "block_id": 107088913, "block_timestamp": "2023-12-03T20:02:07.688Z", "signer_id": "hack.near", "widget_name": "tag.editor", "source_code": "// adapted from the `PublicTagEditor` widget by zavodil.near\n\nconst creatorId = props.creatorId ?? \"hack.near\";\nconst namespace = props.namespace ?? \"widget\";\nconst thingId = props.thingId ?? \"every\";\nconst accountId = context.accountId;\nconst debug = props.debug ?? false;\n\nif (!accountId) {\n  return (\n    <>\n      <h3>Tags</h3>\n      <p>Please connect your NEAR account :)</p>\n    </>\n  );\n}\n\nState.init({ path });\n\nconst tags = Social.getr(`*/graph/context/${state.path}/tags/**`, \"final\");\n\nconst pattern = `*/graph/context/*/*/*/tags/*`;\n\nreturn (\n  <div className=\"row\">\n    <div className=\"col-lg-6\">\n      <div>\n        <h4>Tag Editor</h4>\n      </div>\n      <div className=\"mb-2\">\n        Source Path:\n        <input\n          type=\"text\"\n          value={state.path}\n          onChange={(event) =>\n            State.update({ path: event.target.value.toLowerCase() })\n          }\n        />\n      </div>\n      <div className=\"mb-2\" style={{ minHeight: \"62px\" }}>\n        {tags !== null ? (\n          <Widget\n            src={\"mob.near/widget/MetadataEditor\"}\n            props={{\n              initialMetadata: tags,\n              onChange: (tags) => {\n                State.update({ tags });\n              },\n              options: {\n                tags: {\n                  label: \"Tags\",\n                  pattern,\n                  placeholder: \"dev, art, gov, edu, social, near\",\n                },\n              },\n            }}\n          />\n        ) : (\n          \"Loading...\"\n        )}\n      </div>\n      <div className=\"mb-2\">\n        <CommitButton\n          disabled={tags === null}\n          data={{\n            graph: {\n              context: {\n                [creatorId]: {\n                  [namespace]: {\n                    [thingId]: {\n                      tags: state.tags,\n                    },\n                  },\n                },\n              },\n            },\n          }}\n        >\n          Save\n        </CommitButton>\n\n        <button\n          class=\"btn btn-outline-secondary m-2\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#collapseExample\"\n          aria-expanded=\"false\"\n          aria-controls=\"collapseExample\"\n        >\n          Guide\n        </button>\n      </div>\n\n      <div className=\"collapse\" id=\"collapseExample\">\n        <div class=\"card card-body\">\n          <h5>Best Practices:</h5>\n          <ul>\n            <li>Keep tags concise and simple</li>\n            <li>Put \"-\" (dash) instead of a space</li>\n            <li>English words recommended</li>\n            <li>Do not create unnecessary tags</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div className=\"col-lg-6\">\n      <div>\n        <h4>Preview</h4>\n        <br />\n      </div>\n      <div className=\"mb-2 card\">\n        <div className=\"card-body\">\n          <div className=\"text-truncate mb-2\">\n            <Widget\n              src=\"hack.near/widget/thing.block\"\n              props={{ creatorId, namespace, thingId }}\n            />\n          </div>\n          <Widget\n            src=\"hack.near/widget/tags\"\n            props={{\n              path: state.path,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/tag.editor", "fact_widget_deployments_id": "e180fc5b2088738f6c226ab5b2f6b3db", "inserted_timestamp": "2023-12-03T21:39:18.229Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 3}