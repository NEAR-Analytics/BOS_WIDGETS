{"tx_hash": "9iSookaKB2KBbjREgT9emWv2yVxcY5ai8Q3cf9fUYZT", "action_id_social": "2QrDf98ttq8Wuhpum4qAz4YvcVdB289Jhm58ht4XjL9i-0-widget", "block_id": 114834321, "block_timestamp": "2024-03-16T15:54:09.376Z", "signer_id": "hack.near", "widget_name": "Agreement", "source_code": "const ownerId = \"hack.near\";\n\nState.init({\n  signature: true,\n  isFetched: false,\n  agreement: true,\n});\n\nif (context.accountId && !state.isFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    {\n      keys: [\n        `${context.accountId}/profile/builder`,\n        `${context.accountId}/index/agreement`,\n      ],\n    },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      signature: data[context.accountId]?.profile?.builder === \"true\",\n      agreement:\n        data[context.accountId]?.index?.agreement &&\n        data[context.accountId]?.index?.agreement.length > 0,\n      isFetched: true,\n    })\n  );\n}\n\nconst showAgreement = !state.signature && state.agreement;\n\nreturn (\n  <>\n    <Widget src={`${ownerId}/widget/Support`} />\n    <Widget\n      src={`${ownerId}/widget/AgreementModal`}\n      props={{\n        open: showAgreement,\n        accept: () =>\n          Social.set(\n            { profile: { builder: true } },\n            {\n              onCommit: () => {\n                State.update({ signature: true });\n              },\n            }\n          ),\n      }}\n    />\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Widget src={`${ownerId}/widget/AgreementPage`} />\n    </div>\n  </>\n);\n", "metadata": {"fork_of": "potlock.near/widget/Index@111776888"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/Agreement", "fact_widget_deployments_id": "d9442380cd423533467bfe01e8fb1245", "inserted_timestamp": "2024-03-16T17:25:58.846Z", "modified_timestamp": "2024-03-16T17:25:58.846Z", "__row_index": 0}