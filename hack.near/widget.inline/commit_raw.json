{"tx_hash": "5r2har4qGk4x7pfsr9Qj7fE3R2JEg4QF1jaZMYvVWp4j", "action_id_social": "EjYLUDQxMioNDVn2yJxMGqYyz4hxjCb2BvRxmxuLXM9P-0-widget", "block_id": 96184993, "block_timestamp": "2023-07-11T00:47:16.679Z", "signer_id": "hack.near", "widget_name": "widget.inline", "source_code": "const daoId = props.daoId ?? \"build.sputnik-dao.near\";\nconst code = props.code;\n\nconst policy = Near.view(daoId, \"get_policy\");\n\nconst deposit = policy.proposal_bond;\n\nconst widgetPath = props.widgetPath ?? \"mob.near/widget/WidgetSource\";\nconst [accountId, widget, widgetName] = widgetPath.split(\"/\");\n\nconst blockHeight = props.blockHeight;\nconst metadata = props.metadata ?? Social.getr(`${widgetPath}/metadata`);\nconst renderTag = props.renderTag;\n\nconst name = metadata.name ?? widgetName;\nconst image = metadata.image;\n\nconst item = {\n  type: \"dev\",\n  path: widgetPath,\n  blockHeight,\n};\n\nconst widget_args = JSON.stringify({\n  data: {\n    [daoId]: {\n      widget: {\n        [`${widgetName}`]: {\n          \"\": `${code}`,\n        },\n      },\n    },\n  },\n});\n\nconst proposal_args = Buffer.from(widget_args, \"utf-8\").toString(\"base64\");\n\nconst handleProposal = () => {\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"update widget\",\n          kind: {\n            FunctionCall: {\n              receiver_id: \"social.near\",\n              actions: [\n                {\n                  method_name: \"set\",\n                  args: proposal_args,\n                  deposit: \"50000000000000000000000\",\n                  gas: \"30000000000000\",\n                },\n              ],\n            },\n          },\n        },\n      },\n      deposit: deposit,\n      gas: \"219000000000000\",\n    },\n  ]);\n};\n\nconst handleCreate = () =>\n  Social.set({\n    widget: {\n      [`${widgetName}`]: {\n        \"\": `${code}`,\n        metadata: {\n          tags: {\n            build: \"\",\n          },\n        },\n      },\n    },\n  });\n\nreturn (\n  <div className=\"card\" style={{ borderRadius: \"12px\" }}>\n    <div className=\"row py-3\">\n      <div className=\"m-auto text-center\" style={{ maxWidth: \"12em\" }}>\n        <div\n          className=\"d-inline-block mb-2\"\n          style={{ width: \"7em\", height: \"7em\" }}\n        >\n          <Widget\n            src=\"mob.near/widget/Image\"\n            props={{\n              image,\n              className: \"w-100 h-100 shadow\",\n              style: { objectFit: \"cover\", borderRadius: \"12px\" },\n              thumbnail: false,\n              fallbackUrl:\n                \"https://ipfs.near.social/ipfs/bafkreido7gsk4dlb63z3s5yirkkgrjs2nmyar5bxyet66chakt2h5jve6e\",\n              alt: widgetName,\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"col-5\">\n        <div className=\"m-1 mb-3 text-truncate\">\n          <Widget\n            src=\"mob.near/widget/ProfileLine\"\n            props={{ accountId, link: props.profileLink }}\n          />\n        </div>\n        <div className=\"m-1 position-relative\">\n          <h5 className=\"card-title\">{name}</h5>\n          <div className=\"text-truncate mb-1\">\n            <a className=\"stretched-link\" href={`#/${widgetPath}`}>\n              <i className=\"bi bi-box-arrow-up-right text-secondary me-1\" />\n              {widgetPath}\n            </a>\n          </div>\n        </div>\n        <div className=\"card-text\">\n          <a\n            href={`#/mob.near/widget/WidgetSource?src=${widgetPath}`}\n            className=\"btn btn-sm btn-outline-secondary border-0\"\n            target=\"_blank\"\n          >\n            <i className=\"bi bi-code me-1\"></i>source\n          </a>\n          <a\n            href={`#/bozon.near/widget/WidgetHistory?widgetPath=${widgetPath}`}\n            className=\"btn btn-sm btn-outline-secondary border-0\"\n            target=\"_blank\"\n          >\n            <i className=\"bi bi-clock me-1\"></i>history\n          </a>\n        </div>\n      </div>\n      <div className=\"col-3 m-2\">\n        <Widget\n          src=\"hack.near/widget/StarButton\"\n          props={{ notifyAccountId, item }}\n        />\n        <div className=\"mt-4\">\n          <small className=\"text-nowrap text-muted ms-auto m-1\">\n            <i className=\"bi bi-hourglass me-1\"></i>\n            <Widget\n              src=\"mob.near/widget/TimeAgo\"\n              props={{ keyPath: widgetPath, now: props.metadata, blockHeight }}\n            />\n          </small>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/widget.inline", "fact_widget_deployments_id": "99604524c1edf76ae62640a31fdb3e6e", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 9}