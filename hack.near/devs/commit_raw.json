{"tx_hash": "CrrSeAsLL6GDAmiq1Q9b8uqueWuptrqxEnF1fibeRFg7", "action_id_social": "3zXHPrwb8BX9k46azKtVNRwYipVLVHBjjb4Av14UaVHj-0-widget", "block_id": 106161557, "block_timestamp": "2023-11-20T23:00:28.460Z", "signer_id": "hack.near", "widget_name": "devs", "source_code": "const data = Social.get(\"*/graph/star/**\", \"final\");\n\nconst starCountsByAccount = {};\n\nObject.keys(data).forEach((user) => {\n  const userData = data[user];\n  const widgetData = userData?.graph?.star;\n\n  if (widgetData) {\n    Object.keys(widgetData).forEach((widgetUser) => {\n      const widgetList = widgetData[widgetUser]?.widget;\n\n      if (widgetList) {\n        Object.keys(widgetList).forEach((widgetName) => {\n          if (!starCountsByAccount[widgetUser]) {\n            starCountsByAccount[widgetUser] = {};\n          }\n\n          if (!starCountsByAccount[widgetUser][widgetName]) {\n            starCountsByAccount[widgetUser][widgetName] = 0;\n          }\n\n          if (\n            typeof starCountsByAccount[widgetUser][widgetName] !== \"undefined\"\n          ) {\n            starCountsByAccount[widgetUser][widgetName]++;\n          }\n        });\n      }\n    });\n  }\n});\n\nconst totalStarsByAccount = {};\nObject.keys(starCountsByAccount).forEach((account) => {\n  const widgets = starCountsByAccount[account];\n  const totalStars = Object.values(widgets).reduce(\n    (acc, stars) => acc + stars,\n    0\n  );\n  totalStarsByAccount[account] = totalStars;\n});\n\nconst rankedAccounts = Object.entries(totalStarsByAccount)\n  .filter(([account, totalStars]) => typeof totalStars !== \"undefined\")\n  .sort((a, b) => b[1] - a[1]);\n\nreturn (\n  <div>\n    <h3>Top Builders</h3>\n    <div className=\"m-2\">\n      {rankedAccounts.map(([account, totalStars], index) => (\n        <div key={account}>\n          <h5>\n            {index + 1}.{\" \"}\n            <a href={`/near/widget/ProfilePage?accountId=${account}`}>\n              {account}\n            </a>{\" \"}\n            ({totalStars} total stars)\n          </h5>\n          <ul className=\"m-3\">\n            {Object.entries(starCountsByAccount[account])\n              .sort((a, b) => b[1] - a[1])\n              .map(([widgetName, widgetStars]) => (\n                <li key={widgetName}>\n                  <a\n                    href={`/near/widget/ComponentDetailsPage?src=${account}/widget/${widgetName}`}\n                  >\n                    {widgetName}\n                  </a>{\" \"}\n                  ({widgetStars}\n                  stars)\n                </li>\n              ))}\n          </ul>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/devs", "fact_widget_deployments_id": "5a373d6ab236372c61af62abf495f399", "inserted_timestamp": "2023-11-21T00:51:42.458Z", "modified_timestamp": "2023-11-21T00:51:42.458Z", "__row_index": 0}