{"tx_hash": "8bztmuVw6fKXdZ9UgdgyoaJxjda2u84qhKhet1atNETH", "action_id_social": "Bi9oVPALoCLfu5djxxttypvbQ3LM9EKTtPGjGGm1Nd9s-0-widget", "block_id": 107474711, "block_timestamp": "2023-12-09T00:00:35.227Z", "signer_id": "hack.near", "widget_name": "every.context", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nlet tag = props.tag ?? \"*\";\n\nState.init({ path: props.path ?? \"every.near/thing/core\" });\n\nconst data = Social.keys(`*/graph/context/*/*/*/tags/${tag}`, \"final\");\n\nif (!data) {\n  return \"Loading...\";\n}\n\nfunction extractThings(data) {\n  const uniqueKeys = new Set();\n  const things = [];\n\n  Object.keys(data).forEach((curatorId) => {\n    const context = data[curatorId]?.graph?.context;\n\n    if (context) {\n      Object.keys(context).forEach((creatorId) => {\n        const namespaces = context[creatorId];\n\n        if (namespaces) {\n          Object.keys(namespaces).forEach((namespace) => {\n            const thingData = namespaces[namespace];\n\n            if (thingData) {\n              Object.keys(thingData).forEach((thingId) => {\n                const key = `${creatorId}-${namespace}-${thingId}`;\n\n                if (!uniqueKeys.has(key)) {\n                  uniqueKeys.add(key); // Add the key to the set\n\n                  things.push(\n                    <div key={key} className=\"m-3 mt- card\">\n                      <div className=\"card-body m-2 p-1 row\">\n                        <div className=\"col m-1 p-2 text-truncate\">\n                          <Widget\n                            src=\"hack.near/widget/thing.block\"\n                            props={{\n                              path: `${creatorId}/${namespace}/${thingId}`,\n                            }}\n                          />\n                        </div>\n                        <div className=\"col m-1 p-1\">\n                          <div className=\"card-body m-2 p-1 row\">\n                            <div className=\"col-9 m-1 \">\n                              <Widget\n                                src=\"hack.near/widget/tags\"\n                                props={{\n                                  path: `${creatorId}/${namespace}/${thingId}`,\n                                }}\n                              />\n                            </div>\n                            <div className=\"col-2 m-1 \">\n                              <Widget\n                                src=\"hack.near/widget/star.button\"\n                                props={{\n                                  path: `${creatorId}/${namespace}/${thingId}`,\n                                }}\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              });\n            }\n          });\n        }\n      });\n    }\n  });\n\n  return things;\n}\n\nconst [creatorId, namespace, thingId] = state.path.split(\"/\");\n\nconst exists = Social.get(state.path);\n\nreturn (\n  <>\n    <div className=\"mb-2 row\">\n      <div className=\"mb-1 col\">\n        <h5 className=\"mt-2 mb-3\">SocialDB path of anything:</h5>\n        <input\n          type=\"text\"\n          value={state.path}\n          onChange={(event) =>\n            State.update({ path: event.target.value.toLowerCase() })\n          }\n        />\n        <br />\n        <div className=\"m-1 d-flex\">\n          <div className=\"m-2\">\n            <button\n              className=\"btn btn-outline-secondary\"\n              type=\"button\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseExample\"\n              aria-expanded=\"false\"\n              aria-controls=\"collapseExample\"\n            >\n              Guide\n            </button>\n          </div>\n          <div className=\"m-2\">\n            <Widget\n              src=\"hack.near/widget/FollowButton\"\n              props={{ accountId: creatorId }}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"mb-2 col\">\n        <Widget\n          src=\"hack.near/widget/meta.editor\"\n          props={{ path: state.path }}\n        />\n      </div>\n      <div className=\"collapse\" id=\"collapseExample\">\n        <div className=\"card card-body m-3\" style={{ background: \"#f8f8f8\" }}>\n          <h5>Good Practices:</h5>\n          <ul>\n            <li>Keep tags concise and simple</li>\n            <li>Use \"-\" instead of spaces</li>\n            <li>English words recommended</li>\n            <li>Don't save irrelevant context</li>\n            <li>Be kind to everyone</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <br />\n\n    {tag !== \"*\" ? (\n      <>\n        <h5 className=\"ms-2\">Filtered by Tag:</h5>\n\n        <h4 className=\"ms-3\">\n          <span className=\"badge rounded-pill bg-primary\">{tag}</span>\n        </h4>\n      </>\n    ) : (\n      <h5 className=\"ms-3\">Every Context</h5>\n    )}\n\n    {extractThings(data)}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/every.context", "fact_widget_deployments_id": "ab85a3153c0a3c8b7c718f66c359b1b5", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}