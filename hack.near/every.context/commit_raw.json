{"tx_hash": "EzbJbri4ZPnmXZqmr29FegKrUy68o47TnhCWRuZm8RvG", "action_id_social": "FSbgQEY9pFRqWiRyM3Lf4Nqmp9Gx6ZwdpwUAtrKHHjnr-0-widget", "block_id": 107470281, "block_timestamp": "2023-12-08T22:42:37.636Z", "signer_id": "hack.near", "widget_name": "every.context", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nconst creatorId = props.creatorId ?? \"every.near\";\nconst namespace = props.namespace ?? \"thing\";\nconst thingId = props.thingId ?? \"core\";\n\nlet tag = props.tag ?? \"*\";\n\nState.init({ path: props.path ?? `${creatorId}/${namespace}/${thingId}` });\n\nconst data = Social.keys(`*/graph/context/*/*/*/tags/${tag}`, \"final\");\n\nif (!data) {\n  return \"Loading...\";\n}\n\nfunction extractThings(data) {\n  const uniqueKeys = new Set();\n  const things = [];\n\n  Object.keys(data).forEach((curatorId) => {\n    const context = data[curatorId]?.graph?.context;\n\n    if (context) {\n      Object.keys(context).forEach((creatorId) => {\n        const namespaces = context[creatorId];\n\n        if (namespaces) {\n          Object.keys(namespaces).forEach((namespace) => {\n            const thingData = namespaces[namespace];\n\n            if (thingData) {\n              Object.keys(thingData).forEach((thingId) => {\n                const key = `${creatorId}-${namespace}-${thingId}`;\n\n                if (!uniqueKeys.has(key)) {\n                  uniqueKeys.add(key); // Add the key to the set\n\n                  things.push(\n                    <div key={key} className=\"m-3 mt- card\">\n                      <div className=\"card-body m-2 p-1 row\">\n                        <div className=\"col m-1 p-2 text-truncate\">\n                          <Widget\n                            src=\"hack.near/widget/thing.block\"\n                            props={{\n                              path: `${creatorId}/${namespace}/${thingId}`,\n                            }}\n                          />\n                        </div>\n                        <div className=\"col m-1 p-1\">\n                          <Widget\n                            src=\"hack.near/widget/tags\"\n                            props={{\n                              path: `${creatorId}/${namespace}/${thingId}`,\n                            }}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              });\n            }\n          });\n        }\n      });\n    }\n  });\n\n  return things;\n}\n\nreturn (\n  <>\n    <div className=\"mb-2 row\">\n      <div className=\"mb-1 col\">\n        <h5 className=\"mt-2 mb-3\">SocialDB Path of Anything:</h5>\n        <input\n          type=\"text\"\n          value={state.path}\n          onChange={(event) =>\n            State.update({ path: event.target.value.toLowerCase() })\n          }\n        />\n        <br />\n        <div className=\"row\">\n          <div className=\"col m-1 \">\n            <Widget\n              src=\"hack.near/widget/star.button\"\n              props={{ path: state.path }}\n            />\n          </div>\n        </div>\n        <div className=\"col-8 m-1 mt-2\">\n          <button\n            className=\"btn btn-outline-secondary d-flex\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#collapseExample\"\n            aria-expanded=\"false\"\n            aria-controls=\"collapseExample\"\n          >\n            Guide\n          </button>\n        </div>\n      </div>\n      <div className=\"mb-2 col\">\n        <Widget\n          src=\"hack.near/widget/meta.editor\"\n          props={{ path: state.path }}\n        />\n      </div>\n      <div className=\"collapse\" id=\"collapseExample\">\n        <div className=\"card card-body m-3\" style={{ background: \"#f8f8f8\" }}>\n          <h5>Best Practices:</h5>\n          <ul>\n            <li>Keep tags concise and simple</li>\n            <li>Use \"-\" instead of spaces</li>\n            <li>English words recommended</li>\n            <li>Don't save irrelevant context</li>\n            <li>Be kind to everyone</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <br />\n\n    {tag !== \"*\" ? (\n      <>\n        <h5 className=\"ms-2\">Filtered by Tag:</h5>\n\n        <h4 className=\"ms-3\">\n          <span className=\"badge rounded-pill bg-primary\">{tag}</span>\n        </h4>\n      </>\n    ) : (\n      <h5 className=\"ms-3\">All Things</h5>\n    )}\n\n    {extractThings(data)}\n\n    {tag !== \"*\" && (\n      <div className=\"mt-3 mb-5\">\n        <a\n          className=\"btn btn-outline-primary\"\n          href=\"/#/hack.near/widget/every.context\"\n        >\n          Every Tag\n        </a>\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/every.context", "fact_widget_deployments_id": "2040b63f0901326574e9dabcafdf2644", "inserted_timestamp": "2023-12-09T00:40:17.073Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}