{"tx_hash": "DtMRzEggX5F8kyBMcVHrRZQBanq5RhDasnfQJXJxvoKd", "action_id_social": "9Gjeq1xad2NScYe4zKP4QGg27ANJorCfVgsmSoJ2zxf8-0-widget", "block_id": 107012730, "block_timestamp": "2023-12-02T18:50:59.602Z", "signer_id": "hack.near", "widget_name": "thing.image", "source_code": "const creatorId = props.creatorID ?? context.accountId;\nconst namespace = props.namespace ?? \"widget\";\nconst thingId = props.thingId ?? \"widgets.rank\";\n\nconst className = props.className ?? \"thing-image d-inline-block\";\nconst style = props.style ?? { width: \"3em\", height: \"3em\" };\nconst imageStyle = props.imageStyle ?? { objectFit: \"cover\" };\nconst imageClassName = props.imageClassName ?? \"rounded-circle w-100 h-100\";\nconst thumbnail = props.thumbnail ?? \"thumbnail\";\n\nconst thing =\n  props.thing ?? Social.getr(`${creatorId}/${namespace}/${thingId}`);\n\nconst name = thing.metadata.name || \"Something\";\nconst image = thing.metadata.image;\nconst title = props.title ?? `${name}`;\nconst fast = props.fast || (!props.thing && !!creatorId);\nif (creatorId !== state.creatorId) {\n  State.update({\n    fastImageUrl: `https://i.near.social/magic/${\n      thumbnail || \"large\"\n    }/https://near.social/magic/img/account/${creatorId}`,\n    creatorId,\n  });\n}\nconst fallbackUrl =\n  \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\";\n\nreturn (\n  <>\n    {fast ? (\n      <div className={className} style={style} key={state.fastImageUrl}>\n        <img\n          className={imageClassName}\n          style={imageStyle}\n          src={state.fastImageUrl}\n          alt={title}\n          onError={() => {\n            if (state.fastImageUrl !== fallbackUrl) {\n              State.update({\n                fastImageUrl: fallbackUrl,\n              });\n            }\n          }}\n        />\n      </div>\n    ) : (\n      <div className={className} style={style} key={JSON.stringify(image)}>\n        <Widget\n          loading={\n            <div\n              className={`d-inline-block ${imageClassName}`}\n              style={imgWrapperStyle}\n            />\n          }\n          src=\"mob.near/widget/Image\"\n          props={{\n            image,\n            alt: title,\n            className: imageClassName,\n            style: imageStyle,\n            thumbnail,\n            fallbackUrl,\n          }}\n        />\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/thing.image", "fact_widget_deployments_id": "c401ca077c19e19454ee5bf531b7d977", "inserted_timestamp": "2023-12-02T20:41:58.556Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 4}