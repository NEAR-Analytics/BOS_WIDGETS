{"tx_hash": "BQCVrRAQtthfahLN5VrsWB7oq3w51mh3aew38AGbkn2n", "action_id_social": "A41W4hq4ct9J77jgYuCCxcaZNYi9AVLYxDaaSa7LeRY5-0-widget", "block_id": 100179919, "block_timestamp": "2023-09-01T20:46:22.133Z", "signer_id": "hack.near", "widget_name": "directory", "source_code": "const creatorId = props.creatorId ?? context.accountId;\n\nif (!creatorId) {\n  return \"\";\n}\n\nState.init({\n  groups: [],\n  newGroup: \"\",\n});\n\nfunction addGroup(newGroup) {\n  state.groups.push(newGroup);\n\n  State.update({\n    groups: state.groups,\n  });\n}\n\nfunction removeGroup(groupKey) {\n  const updatedGroups = state.groups.filter((group) => group !== groupKey);\n\n  State.update({\n    groups: updatedGroups,\n  });\n}\n\nconst handleSave = () => {\n  const data = {\n    thing: {\n      directory: state.groups,\n    },\n  };\n\n  Social.set(data, {\n    onCommit: () => {},\n    onCancel: () => {},\n  });\n};\n\nreturn (\n  <>\n    <div>\n      <h5>Group ID</h5>\n      <input onChange={(e) => State.update({ newGroup: e.target.value })} />\n      <div className=\"d-flex align-items-center mt-2\">\n        <button\n          className=\"btn btn-primary m-2\"\n          onClick={() => addGroup(state.newGroup)}\n        >\n          add\n        </button>\n        {Object.keys(state.groups).length > 0 && (\n          <div className=\"ml-3\">\n            {JSON.stringify(groups) !== JSON.stringify(state.groups) && (\n              <button className=\"btn btn-success m-2\" onClick={handleSave}>\n                save\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n    <hr />\n    <div>\n      <h5>Directory</h5>\n      {state.groups.map((group, i) => {\n        const groupData = Social.get(`${creatorId}/thing/${group}/**`);\n        return (\n          <div className=\"d-flex m-2 p-2 justify-content-between align-items-center\">\n            <Widget\n              key={i}\n              src=\"hack.near/widget/NDC.WG.Card\"\n              props={{\n                data: groupData,\n              }}\n            />\n            <button\n              className=\"btn btn-danger m-1\"\n              onClick={() => removeGroup(group)}\n            >\n              remove\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/directory", "fact_widget_deployments_id": "0933c58e61ac459b17b16c89076c4b2d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}