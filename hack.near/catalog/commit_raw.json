{"tx_hash": "3zcQNCnWKvaMtzTnDC2bk1ufcamGi1TU2Guy74sJAGY7", "action_id_social": "96KRrVT8YQ9GQbN8M8ftsHFE4e18QxwQJ57HdyZGgz6x-0-widget", "block_id": 107014803, "block_timestamp": "2023-12-02T19:33:14.853Z", "signer_id": "hack.near", "widget_name": "catalog", "source_code": "// adapted from the `AllLabels` widget by zavodil.near\n\nconst creatorId = props.creatorId ?? \"hack.near\";\nconst namespace = props.namespace ?? \"widget\";\n\nlet tag = props.tag ?? \"*\";\nconst data = Social.keys(\n  `${creatorId}/${namespace}/*/metadata/tags/${tag}`,\n  \"final\"\n);\n\nif (!data) {\n  return \"Loading...\";\n}\n\nconst things = {};\n\nObject.values(data).forEach((thing) => {\n  const metadata = thing[namespace]?.metadata;\n  const tags = metadata?.tags;\n\n  if (tags) {\n    Object.keys(tags).forEach((tag) => {\n      things[tag] = true;\n    });\n  }\n});\n\nconst allWidgets = Object.keys(things).map((thingId) => {\n  return (\n    <div key={thingId} className=\"mb-2 mt-3 card\">\n      <div className=\"card-body\">\n        <div className=\"text-truncate\">\n          <Widget src=\"hack.near/widget/thing.inline\" props={{ creatorId }} />\n        </div>\n        <Widget src=\"hack.near/widget/tags\" props={{ creatorId, namespace }} />\n      </div>\n    </div>\n  );\n});\n\nreturn (\n  <>\n    <Widget\n      src=\"hack.near/widget/tag.editor\"\n      key={`public-tag-editor-${props.accountId}`}\n      props={{ creatorId }}\n    />\n\n    {tag !== \"*\" && (\n      <h4 className=\"ms-3\">\n        every {namespace} tagged with:{\" \"}\n        <span className=\"badge rounded-pill bg-primary\">{tag}</span>\n      </h4>\n    )}\n\n    {allWidgets}\n    <hr />\n    {tag !== \"*\" && (\n      <>\n        <Widget src=\"hack.near/widget/tag.info\" props={{ tag: tag }} />\n\n        <div className=\"mt-3 mb-5\">\n          <a\n            className=\"btn btn-outline-primary\"\n            href=\"/#/hack.near/widget/catalog\"\n          >\n            All Tags\n          </a>\n        </div>\n      </>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/catalog", "fact_widget_deployments_id": "5709d5f993f9604d0d45a21205b7272b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}