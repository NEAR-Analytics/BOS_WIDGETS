{"tx_hash": "Bmhar85koSdT2ZUNLZEpRwb8msamLZLPphBNkvTxSRP6", "action_id_social": "BHysQdQThEfb9PW9SGeAY6AaPNswTeZktjrJExa4AKH8-0-widget", "block_id": 100599397, "block_timestamp": "2023-09-07T15:59:50.672Z", "signer_id": "hack.near", "widget_name": "community.card", "source_code": "const accountId = props.accountId ?? \"james.near\";\nconst communityId = props.communityId ?? context.accountId;\nconst profile = Social.get(`${communityId}/profile/**`);\n\nif (!profile) {\n  return \"Loading...\";\n}\n\nconst tags = Object.keys(profile.tags);\n\nconst Div = styled.div`\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\n  transition: box-shadow 0.6s;\n\n  &:hover {\n    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n  }\n`;\n\nconst Link = styled.a`\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\n  transition: box-shadow 0.6s;\n\n  &:hover {\n    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n  }\n`;\n\nconst Logo = styled.img`\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\n  transition: box-shadow 0.6s;\n\n  &:hover {\n    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n  }\n`;\n\nconst data = {\n  graph: { [communityId]: { [accountId]: \"\" } },\n  index: {\n    graph: JSON.stringify({\n      key: communityId,\n      value: {\n        type,\n        accountId,\n      },\n    }),\n    notify: JSON.stringify([\n      {\n        key: communityId,\n        value: {\n          type,\n          accountId,\n          message: \"requested to join\",\n        },\n      },\n      {\n        key: accountId,\n        value: {\n          type,\n          communityId,\n          message: \"request submitted\",\n        },\n      },\n    ]),\n  },\n};\n\nconst CommunityCard = ({\n  format,\n  isBannerEnabled,\n  metadata,\n  ...otherProps\n}) => {\n  const renderFormat =\n    format === \"small\" || format === \"medium\" ? format : \"small\";\n\n  const formatSmall = (\n    <Link\n      {...otherProps}\n      className={[\n        \"d-flex flex-shrink-0 p-3\",\n        \"rounded-4 border border-2\",\n        \"text-black text-decoration-none\",\n      ].join(\" \")}\n      style={{\n        background:\n          isBannerEnabled ?? false\n            ? `center / cover no-repeat url(${profile.backgroundImage})`\n            : \"#ffffff\",\n\n        width: 400,\n        height: 110,\n      }}\n    >\n      <div\n        className=\"d-flex align-items-center gap-3 rounded-4 w-100 h-100\"\n        style={{\n          background: \"rgba(255, 255, 255, 0.9)\",\n          backdropFilter: \"blur(4px)\",\n        }}\n      >\n        <div style={{ minWidth: \"42px\" }}>\n          <Widget\n            src=\"mob.near/widget/ProfileImage\"\n            props={{ image: profile.image }}\n          />\n        </div>\n\n        <div className=\"d-flex flex-column justify-content-start w-100\">\n          <div>\n            <h5\n              className=\"h5 m-0 text-nowrap overflow-hidden\"\n              style={{ textOverflow: \"ellipsis\" }}\n            >\n              {profile.name}\n            </h5>\n          </div>\n          <div className=\"d-flex flex-wrap\">\n            {tags.length > 0 &&\n              tags.slice(0, 3).map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"me-1 mt-1 mb-1 fw-light badge border border-secondary text-bg-light\"\n                >\n                  #{tag}\n                </span>\n              ))}\n          </div>\n        </div>\n        <div className=\"ml-auto\">\n          <CommitButton\n            disabled={loading}\n            className=\"btn btn-primary\"\n            data={data}\n          >\n            Join\n          </CommitButton>\n        </div>\n      </div>\n    </Link>\n  );\n\n  const formatMedium = (\n    <Link\n      className=\"card d-flex flex-column flex-shrink-0 text-decoration-none text-reset\"\n      style={{ width: \"42%\", maxWidth: 304 }}\n    >\n      <div\n        className=\"card-img-top w-100\"\n        style={{\n          background: `center / cover no-repeat url(https://ipfs.near.social/ipfs/${profile.backgroundImage.ipfs_cid})`,\n          height: 164,\n        }}\n      />\n\n      <div className=\"d-flex flex-column gap-2 p-3 card-text\">\n        <h5 class=\"h5 m-0\">{profile.name}</h5>\n        <div className=\"d-flex flex-wrap\">\n          {tags.length > 0 &&\n            tags.slice(0, 3).map((tag, i) => (\n              <span\n                key={i}\n                className=\"me-1 mt-1 mb-1 fw-light badge border border-secondary text-bg-light\"\n              >\n                #{tag}\n              </span>\n            ))}\n        </div>\n        <span class=\"text-secondary text-wrap\">{profile.description}</span>\n        <button className=\"btn btn-primary mt-2\" onClick={handleJoin}>\n          Join\n        </button>\n      </div>\n    </Link>\n  );\n\n  return {\n    small: formatSmall,\n    medium: formatMedium,\n  }[renderFormat];\n};\n\nreturn <>{CommunityCard(props)}</>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/community.card", "fact_widget_deployments_id": "9dc3ea06c5816d59a1c5db3615e198cb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}