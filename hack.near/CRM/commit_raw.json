{"tx_hash": "7E9jAKRVtJYHbsyCiJBPY21EjciigVbyHnvq5PJ2sBpr", "action_id_social": "C8tFgY6rYHXtTRrWBbHPyTYsDzjabrqrho85QAYEGspS-0-widget", "block_id": 106778871, "block_timestamp": "2023-11-29T03:02:02.498Z", "signer_id": "hack.near", "widget_name": "CRM", "source_code": "const data = Social.keys(\"*/profile/linktree\", \"final\");\nconst telegram = Social.keys(\"*/profile/linktree/telegram\", \"final\");\nconst github = Social.keys(\"*/profile/linktree/github\", \"final\");\nconst twitter = Social.keys(\"*/profile/linktree/twitter\", \"final\");\nconst website = Social.keys(\"*/profile/linktree/website\", \"final\");\n\nif (!data || !telegram || !github || !twitter || !website) {\n  return \"Loading...\";\n}\n\nconst withData = new Set([...Object.keys(data)]);\nconst withTelegram = new Set([...Object.keys(telegram)]);\nconst withGitHub = new Set([...Object.keys(github)]);\nconst withTwitter = new Set([...Object.keys(twitter)]);\nconst withWebsite = new Set([...Object.keys(website)]);\n\nconst [filterBy, setFilterBy] = useState(withData);\n\nconst profilesPerPage = 10;\n\nconst [currentPage, setCurrentPage] = useState(1);\n\nconst startIndex = (currentPage - 1) * profilesPerPage;\n\nconst endIndex = startIndex + profilesPerPage;\n\nconst displayedProfiles = [...filterBy].slice(startIndex, endIndex);\n\nconst handlePageChange = (page) => {\n  setCurrentPage(page);\n};\n\nconst totalPages = Math.ceil(\n  Object.keys(data).filter((accountId) => filterBy.has(accountId)).length /\n    profilesPerPage\n);\n\nconst accounts = displayedProfiles.map((accountId) => (\n  <div className=\"m-2\" key={accountId}>\n    <hr />\n\n    <Widget src=\"hack.near/widget/profile.linktree\" props={{ accountId }} />\n  </div>\n));\n\nreturn (\n  <div>\n    <h3 className=\"m-2 mb-3\">Near Social Profiles</h3>\n    <div className=\"flex-row m-2\">\n      <Widget src=\"mob.near/widget/People\" />\n    </div>\n    <br />\n    <div className=\"flex-row m-2\">\n      <h5>Filter By Available Linktree Data:</h5>\n      <button\n        onClick={() => setFilterBy(withTwitter)}\n        disabled={filterBy === withTwitter}\n      >\n        Twitter\n      </button>\n      <button\n        onClick={() => setFilterBy(withGitHub)}\n        disabled={filterBy === withGitHub}\n      >\n        GitHub\n      </button>\n      <button\n        onClick={() => setFilterBy(withTelegram)}\n        disabled={filterBy === withTelegram}\n      >\n        Telegram\n      </button>\n      <button\n        onClick={() => setFilterBy(withWebsite)}\n        disabled={filterBy === withWebsite}\n      >\n        Website\n      </button>\n      <button\n        onClick={() => setFilterBy(withData)}\n        disabled={filterBy === withData}\n      >\n        Reset\n      </button>\n    </div>\n    <br />\n    <h5 className=\"m-2 mb-3\">{[...filterBy].length} total</h5>\n    <div className=\"m-2\">{accounts}</div>\n    <div className=\"m-3\">\n      <hr />\n      <button\n        onClick={() => handlePageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n      >\n        Previous Page\n      </button>\n      <button\n        onClick={() => handlePageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n      >\n        Next Page\n      </button>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/CRM", "fact_widget_deployments_id": "02b733b328ed6b19ce86454c6ed04699", "inserted_timestamp": "2023-11-29T04:45:27.912Z", "modified_timestamp": "2023-11-29T04:45:27.912Z", "__row_index": 3}