{"tx_hash": "13WTCBnR2ekX9xfT6MnnfwY4LvbwsxVwXvY52kTD7NLg", "action_id_social": "sbC1fZrqfiEWTU326VoCecaAWReEcUEiLxxSHJQVytx-0-widget", "block_id": 121607790, "block_timestamp": "2024-06-20T18:04:32.497Z", "signer_id": "hack.near", "widget_name": "nai", "source_code": "const [question, setQuestion] = useState(\"\");\n\nconst systemPrompt = `Today is ${new Date()\n  .toISOString()\n  .substring(\n    0,\n    10\n  )}. You are an expert biology teacher. Help students think about complext topics. Provide short answers.`;\n\nconst [prompt, setPrompt] = useState(\"\");\nconst [loading, setLoading] = useState(false);\nconst [response, setResponse] = useState(\"\");\n\nconst [messages, setMessages] = useState([\n  {\n    role: \"assistant\",\n    content: \"Hey! I'm here to help you learn biology.\",\n  },\n]);\n\nconst submitQuestion = () => {\n  setLoading(true);\n  Near.call({\n    contractName: \"gpt4.near\",\n    methodName: \"request\",\n    args: {\n      request: {\n        text: question,\n      },\n    },\n    gas: \"100000000000000\",\n    deposit: \"10000000000000000000000\",\n  });\n  setQuestion(\"\");\n};\n\nconst Wrapper = styled.div`\n.message {\n  border-radius: 2rem;  \n  border: 1px solid rgb(222, 226, 230);\n  padding: 1em;\n  margin-bottom: 1em;\n\n  &.assistant {\n    margin-right: 5em;\n  }\n\n  &.assistant:before {\n    content: \"Bio Tutor\";\n    color: #999;\n  }\n\n  &.user {\n    margin-left: 5em;\n  }\n\n  p:last-child {\n    margin-bottom: 0;\n  }\n}\n`;\n\nreturn (\n  <Wrapper>\n    <h1 className=\"text-center\">Multiversity</h1>\n    <br />\n    <div className=\"mb-3\">\n      <div className=\"input-group\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          style={{\n            borderTopLeftRadius: \"2rem\",\n            borderBottomLeftRadius: \"2rem\",\n          }}\n          value={question}\n          onChange={(e) => setQuestion(e.target.value)}\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\") {\n              submitQuestion();\n            }\n          }}\n          placeholder=\"What is your question?\"\n          autoFocus\n        />\n        <button\n          className=\"btn btn-primary\"\n          style={{\n            borderTopRightRadius: \"2rem\",\n            borderBottomRightRadius: \"2rem\",\n          }}\n          onClick={() => submitQuestion()}\n        >\n          Submit\n        </button>\n      </div>\n    </div>\n    <div className=\"d-flex flex-column-reverse\">\n      <Markdown text={content} />\n      {loading && (\n        <div key=\"loading\" className={`message assistant`}>\n          <div>\n            <span\n              className=\"spinner-grow spinner-grow-sm me-1\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  </Wrapper>\n);\n", "metadata": {"fork_of": "mob.near/widget/Near.AI@107458302"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/nai", "fact_widget_deployments_id": "abf53047f857be1cb59e407633331283", "inserted_timestamp": "2024-06-20T19:54:39.247Z", "modified_timestamp": "2024-06-20T19:54:39.247Z", "__row_index": 0}