{"tx_hash": "9zhNKH3wnqjuLqPYvpQBD1nx2L5Rt1gwnfdskxDbUDya", "action_id_social": "GiZ5k5U38ujL4VZgDjgnnmm38w3sGfJD71Q3Y7j4MFDW-0-widget", "block_id": 104149854, "block_timestamp": "2023-10-25T03:55:40.829Z", "signer_id": "hack.near", "widget_name": "card", "source_code": "const Container = styled.div`\n  .profile-image {\n    width: 120px;\n    height: 120px;\n  }\n\n  @media (max-width: 569px) {\n    .profile-image {\n      width: 160px;\n      height: 160px;\n    }\n  }\n\n  .profile-name {\n    @media (max-width: 569px) {\n      display: none;\n    }\n  }\n`;\n\nconst voteCount = props.voteCount;\n\n// const daoId = props.daoId ?? \"build.sputnik-dao.near\";\n// const policy = Near.view(daoId, \"get_policy\");\n// const deposit = policy.proposal_bond;\n\nconst src = props.src ?? \"devhub.efiz.near/widget/app\";\nconst [accountId, type, thingName] = src.split(\"/\");\n\nconst data = props.data ?? Social.get(`${src}`);\n\nconst blockHeight = props.blockHeight;\nconst metadata = props.metadata ?? Social.getr(`${src}/metadata`);\nconst renderTag = props.renderTag;\n\nconst name = metadata.name ?? thingName;\nconst image = metadata.image;\n\nconst item = {\n  type: \"dev\",\n  path: src,\n  blockHeight,\n};\n\n// const widget_args = JSON.stringify({\n//   data: {\n//     [daoId]: {\n//       widget: {\n//         [`${widgetName}`]: {\n//           \"\": `${code}`,\n//         },\n//       },\n//     },\n//   },\n// });\n\n// const proposal_args = Buffer.from(widget_args, \"utf-8\").toString(\"base64\");\n\n// const handleProposal = () => {\n//   Near.call([\n//     {\n//       contractName: daoId,\n//       methodName: \"add_proposal\",\n//       args: {\n//         proposal: {\n//           description: \"update widget\",\n//           kind: {\n//             FunctionCall: {\n//               receiver_id: \"social.near\",\n//               actions: [\n//                 {\n//                   method_name: \"set\",\n//                   args: proposal_args,\n//                   deposit: \"50000000000000000000000\",\n//                   gas: \"21900000000000\",\n//                 },\n//               ],\n//             },\n//           },\n//         },\n//       },\n//       deposit: deposit,\n//       gas: \"219000000000000\",\n//     },\n//   ]);\n// };\n\nconst handleCreate = () =>\n  Social.set({\n    [type]: {\n      [`${name}`]: {\n        \"\": `${data}`,\n        metadata: {\n          tags: {\n            build: \"\",\n          },\n        },\n      },\n    },\n  });\n\nconst Card = styled.div`\n  position: relative;\n  width: 100%;\n  border-radius: 12px;\n  justify-content: center;\n  background: #fff;\n  border: 1px solid #eceef0;\n  box-shadow: 0px 1px 3px rgba(16, 24, 40, 0.1),\n    0px 1px 2px rgba(16, 24, 40, 0.06);\n  overflow: hidden;\n  padding: 23px;\n`;\n\nconst BuildersLink = styled.a`\n  &:hover {\n    text-decoration: none;\n  }\n`;\n\nreturn (\n  <Card>\n    <div className=\"row justify-content-between\">\n      <div className=\"col-auto\">\n        <div className=\"m-2 mb-3 text-truncate\">\n          <Widget\n            src=\"hack.near/widget/widget.profile\"\n            props={{ accountId, widgetName: name, link: props.profileLink }}\n          />\n        </div>\n        <a\n          href={`#/mob.near/widget/WidgetSource?src=${src}`}\n          className=\"btn btn-sm btn-outline-secondary border-0\"\n          target=\"_blank\"\n        >\n          <i className=\"bi bi-code me-1\"></i>src\n        </a>\n        <a\n          href={`#/bozon.near/widget/WidgetHistory?widgetPath=${src}`}\n          className=\"btn btn-sm btn-outline-secondary border-0\"\n          target=\"_blank\"\n        >\n          <i className=\"bi bi-clock me-1\"></i>history\n        </a>\n        <a\n          href={`#/edit/${src}`}\n          className=\"btn btn-sm btn-outline-secondary border-0\"\n          target=\"_blank\"\n        >\n          <i className=\"bi bi-code-slash me-1\"></i>\n          dev\n        </a>\n      </div>\n      <div className=\"col-auto\">\n        <div className=\"row mt-3\">\n          <div className=\"col-auto m-1\">\n            {context.accountId !== accountId ? (\n              <button\n                disabled={!context.accountId}\n                className=\"btn btn-outline-success\"\n                onClick={handleCreate}\n              >\n                <i className=\"bi bi-infinity me-1\"></i>\n                create\n              </button>\n            ) : (\n              <button\n                disabled={!context.accountId}\n                className=\"btn btn-outline-success\"\n                onClick={handleProposal}\n              >\n                <i className=\"bi bi-git me-1\"></i>\n                push\n              </button>\n            )}\n          </div>\n          <div className=\"col-auto m-1\">\n            <Widget src=\"hack.near/widget/VoteButton\" props={{ src }} />\n            {voteCount && (\n              <VotersLink\n                href={`#/hack.near/widget/star.list?accountId=${accountId}&widgetName=${widgetName}`}\n              >\n                <h5 className=\"text-decoration-none link-dark align-items-center text-muted mt-3\">\n                  {voteCount} voter{voteCount !== 1 && \"s\"}\n                </h5>\n              </VotersLink>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/card", "fact_widget_deployments_id": "88b9c44a8eb85719346801a3c606c288", "inserted_timestamp": "2023-10-25T05:43:35.140Z", "modified_timestamp": "2023-10-25T05:43:35.140Z", "__row_index": 4}