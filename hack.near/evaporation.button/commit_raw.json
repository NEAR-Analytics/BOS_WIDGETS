{"tx_hash": "Fkn2U9DyE3Ys1CEXfMJomPjWNwBGccrsNkEvZHwgJEVp", "action_id_social": "EWNGSMSgGX7zV8uA1hEfoVwEHaw1CPbRL3pYqy9W2YcS-0-widget", "block_id": 113775411, "block_timestamp": "2024-02-28T21:27:04.669Z", "signer_id": "hack.near", "widget_name": "evaporation.button", "source_code": "const initialSunsetTimestamp = 1709159888 * 1000;\nconst accountId = props.accountId ?? context.accountId ?? \"hack.near\";\nconst gameId = props.gameId ?? \"evaporation\";\nconst appId = props.appId ?? \"test\";\nconst clicks = Social.index(appId, `${accountId}-${gameId}`, {\n  limit: 100,\n  order: \"desc\",\n});\n\nconst [sunset, setSunset] = useState(new Date(initialSunsetTimestamp));\n\nconst addMoreTime = () => {\n  Social.set(\n    {\n      index: {\n        [appId]: JSON.stringify({\n          key: `${accountId}-${gameId}`,\n          value: { type: \"click\" },\n        }),\n      },\n    },\n    {\n      force: true,\n    }\n  );\n};\n\nconst now = new Date();\nconst evaporated = now > sunset;\nconst remainingTime = sunset.getTime() - now.getTime();\nconst remainingMinutes = Math.max(Math.floor(remainingTime / (1000 * 60)), 0);\n\nreturn (\n  <div>\n    {!evaporated ? (\n      <>\n        <p>{remainingMinutes} minutes left...</p>\n        <button onClick={addMoreTime} className=\"btn btn-primary\">\n          add time\n        </button>\n      </>\n    ) : (\n      <p>The sun has set... \ud83c\udf07</p>\n    )}\n    <div className=\"mt-3\">\n      <p>{clicks && Object.keys(clicks).length} clicks</p>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/evaporation.button", "fact_widget_deployments_id": "c96b56339c3fefd77a97a10595c8c2d0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}