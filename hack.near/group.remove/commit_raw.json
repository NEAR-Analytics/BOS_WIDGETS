{"tx_hash": "EpzAfHyULF5gc4qwgd8wzrqHShNbAKnEbKoxQDGZDw5H", "action_id_social": "B5JmGKsR26RBLf3v5ffHAuisa4wfZnrsRJ7ZsEsmFbi1-0-widget", "block_id": 100240296, "block_timestamp": "2023-09-02T16:19:57.487Z", "signer_id": "hack.near", "widget_name": "group.remove", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nconst groupId = props.groupId ?? \"6fd36ddf4884flm20pbe91e7b208b88d16\";\n\nconst directory = Social.get(`${accountId}/thing/directory`);\n\nif (!directory) {\n  return \"\";\n}\n\nconst groups = JSON.parse(directory);\n\nState.init({\n  groups,\n  removed: false,\n});\n\nconst checkDirectory = (groups) => {\n  if (groups.indexOf(groupId) === -1) {\n    return State.update({ removed: true });\n  }\n};\n\nconst done = checkDirectory(groups);\n\nfunction removeGroup(groupKey) {\n  const updatedGroups = state.groups.filter((group) => group !== groupKey);\n\n  State.update({\n    groups: updatedGroups,\n  });\n}\n\nconst handleSave = () => {\n  removeGroup(groupId);\n\n  const data = {\n    thing: {\n      directory: state.groups,\n    },\n  };\n\n  Social.set(data);\n};\n\nreturn (\n  <>\n    <span>\n      {done ? (\n        <button\n          disabled={done}\n          className=\"btn btn-success\"\n          onClick={handleSave}\n        >\n          Done\n        </button>\n      ) : (\n        <button\n          disabled={done}\n          className=\"btn btn-success\"\n          onClick={handleSave}\n        >\n          Remove\n        </button>\n      )}\n    </span>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/group.remove", "fact_widget_deployments_id": "1dd889fdba196927abed9d3e44c607fb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}