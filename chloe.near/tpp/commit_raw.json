{"tx_hash": "Vp5imTqMNSMjZLpjzb44JgzsJ9bE8ohVPtYstBonfTS", "action_id_social": "DrynYta5XLygPkYgTExnsuBxoKt3kAKZBXJJ9HyvvoMX-0-widget", "block_id": 101780357, "block_timestamp": "2023-09-23T14:44:56.676Z", "signer_id": "chloe.near", "widget_name": "tpp", "source_code": "const GameButton = styled.button`\n  background: palevioletred;\n  color: white;\n  font-size: 1em;\n  margin: 10px;\n  padding: 0.5em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 10px;\n  &:hover {\n    background: white;\n    color: palevioletred;\n  }\n`;\n\n// Styling for the Wrapper\nconst Wrapper = styled.div`\n  font-family: Arial, sans-serif;\n  text-align: center;\n  margin: 20px;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n`;\n\nfunction initialChainState() {\n  return {\n    chainId: 0,\n    newId: 0,\n  };\n}\n\nState.init(initialChainState());\n\n// Function to fetch and set the current chainId from the network\nfunction getCurrentChainId() {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainData) => {\n      const newId = chainData.chainId;\n      State.update({ chainId, newId });\n    });\n}\n\n// Call the function to set the current chainId\ngetCurrentChainId();\n\n// Function to switch to zkEVM testnet\nfunction switchToTestnet() {\n  Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: \"0x5a2\" }]).then(() => {\n    getCurrentChainId(); // You should call the function to update the chainId\n  });\n}\n\n// Function to switch to zkEVM mainnet\nfunction switchToMainnet() {\n  Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: \"0x44D\" }]).then(() => {\n    getCurrentChainId(); // You should call the function to update the chainId\n  });\n}\n\nif (\n  State.get().chainId === undefined &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((data) => {\n      const chainId = data?.chainId;\n      State.update({ chainId, isChainSupported: true });\n    })\n    .catch((error) => {\n      console.error(\"Failed to get network:\", error);\n    });\n}\n\nreturn (\n  <Wrapper>\n    <div>\n      <h2>Welcome to The People's Place</h2>\n      <p style={{ whiteSpace: \"pre-line\" }}>{accountId}</p>\n      <h1>Current Chain ID: {State.get().newId}</h1>\n      {State.get().newId === 1101 ? (\n        <div>\n          <p>On Polygon zkEVM Mainnet</p>\n          <button onClick={switchToTestnet}>Switch to zkEVM Testnet</button>\n        </div>\n      ) : (\n        <div>\n          {State.get().newId === 1442 ? (\n            <div>\n              <p>On Polygon zkEVM Testnet</p>\n              <button onClick={switchToMainnet}>Switch to zkEVM Mainnet</button>\n            </div>\n          ) : (\n            <div>\n              <p>Please switch to Polygon zkEVM</p>\n              <button onClick={switchToTestnet}>Switch to zkEVM Testnet</button>\n              <button onClick={switchToMainnet}>Switch to zkEVM Mainnet</button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chloe.near/widget/tpp", "fact_widget_deployments_id": "0b11f751a66ac956b5e8c248cd473108", "inserted_timestamp": "2023-09-23T16:39:29.726Z", "modified_timestamp": "2023-09-23T16:39:29.726Z", "__row_index": 13}