{"tx_hash": "ErYPo6MchDKN6AWw81cpAeqn6gU7eFqqMfQFuNGP2gA3", "action_id_social": "PTDLu5AJLJqY94XW8nRqgbJhQwiKGmpCN3feQJ9igBs-0-widget", "block_id": 116244774, "block_timestamp": "2024-04-06T12:29:47.748Z", "signer_id": "parven8.near", "widget_name": "Calender", "source_code": "const events = props.events || [];\r\nconst dateToView = props.date || new Date();\r\n\r\nconst srcData = `\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>\r\n    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>\r\n    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.js'></script>\r\n    <script>\r\n      document.addEventListener('DOMContentLoaded', function() {\r\n        const calendarEl = document.getElementById('calendar')\r\n        const calendar = new FullCalendar.Calendar(calendarEl, {\r\n          titleFormat: { year: 'numeric', month: 'long', },\r\n          themeSystem: 'bootstrap5',\r\n          initialView: 'dayGridMonth',\r\n          editable: true,\r\n          firstDay: 1,\r\n          buttonText: {\r\n            month: \"Month\",\r\n            list: \"List\",\r\n          },\r\n          customButtons: {\r\n            filterBy: {\r\n              text: 'Filter by',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"filter\"}), '*');\r\n              }\r\n            },\r\n            addEvent: {\r\n              text: '',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"add-event\"}), '*');\r\n              }\r\n            },\r\n            customButton: {\r\n              text: 'Custom Button',\r\n              click: function(e) {\r\n                e.preventDefault();\r\n                window.parent.postMessage(JSON.stringify({ handler: \"custom-button\"}), '*');\r\n              }\r\n            }\r\n          },\r\n          expandRows: true,\r\n          headerToolbar: {\r\n            start: 'title prev,next dayGridMonth list', // will normally be on the left. if RTL, will be on the right\r\n            center: '',\r\n            end: 'filterBy addEvent customButton' \r\n          },\r\n          navLinks: true,\r\n          events: ${JSON.stringify(events)},\r\n          eventClick: function(info) {\r\n            info.jsEvent.preventDefault(); // don't let the browser navigate\r\n            window.parent.postMessage(JSON.stringify({ handler: \"event-click\", data: info.event }), '*');\r\n          },\r\n          viewDidMount: function () {\r\n            var addEvent = document.querySelector('.fc-addEvent-button');\r\n            addEvent.innerHTML = 'Add Event <i class=\"bi bi-plus-circle-fill\" style=\"color: white; margin-left: 2px;\"></i>';\r\n          }\r\n        })\r\n        calendar.render()\r\n        calendar.gotoDate(new Date(${JSON.stringify(dateToView)}))\r\n      })\r\n    </script>\r\n    <style>\r\n      /* Add custom styles here */\r\n      body {\r\n        background: linear-gradient(180deg, white);\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 100vh;\r\n        overflow: hidden;\r\n      }\r\n      .footer-img {\r\n        position: absolute;\r\n        bottom: 10px;\r\n        left: 10px;\r\n        width: 100px; /* Adjust size as needed */\r\n        height: auto;\r\n      }\r\n    </style>\r\n  </head>\r\n  <body>\r\n    <div id='calendar'></div>\r\n    <!-- Add the image in the footer -->\r\n    <img class=\"footer-img\" src=\"https://pbs.twimg.com/profile_images/1536928258268090369/hR61y1ae_400x400.jpg\" alt=\"Footer Image\">\r\n    <div id='calendar'></div>\r\n  </body>\r\n</html>\r\n`;\r\n\r\nreturn (\r\n  <>\r\n    <iframe\r\n      srcDoc={srcData}\r\n      onMessage={(data) => {\r\n        const dataObj = JSON.parse(data);\r\n        switch (dataObj.handler) {\r\n          case \"filter\": {\r\n            if (props.handleFilter) {\r\n              props.handleFilter();\r\n            }\r\n            break;\r\n          }\r\n          case \"add-event\": {\r\n            if (props.handleAddEvent) {\r\n              props.handleAddEvent();\r\n            }\r\n            break;\r\n          }\r\n          case \"event-click\": {\r\n            if (props.handleEventClick) {\r\n              props.handleEventClick(dataObj.data);\r\n            }\r\n            break;\r\n          }\r\n          case \"custom-button\": {\r\n            if (props.handleCustomButton) {\r\n              props.handleCustomButton();\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }}\r\n      style={{\r\n        height: \"100vh\",\r\n        width: \"100%\",\r\n        border: \"none\", // Optional: Remove iframe border\r\n      }}\r\n    />\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/parven8.near/widget/Calender", "fact_widget_deployments_id": "ae1b1061429c076b23a1d5791731ef8c", "inserted_timestamp": "2024-04-06T18:51:49.787Z", "modified_timestamp": "2024-04-06T18:51:49.787Z", "__row_index": 1}