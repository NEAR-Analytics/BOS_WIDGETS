{"tx_hash": "GuuY96VYnZ6X2ghV9f5GqxLN4PiYLaoNxbxr9amHhv3H", "action_id_social": "8VfysgAYefSi3jsPw2n5wrXCH4Xt4CoPGY8anj3ynFQm-0-widget", "block_id": 102228766, "block_timestamp": "2023-09-29T14:21:54.115Z", "signer_id": "research-collective.near", "widget_name": "ArtSubmission.chloe", "source_code": "const accountId = context.accountId;\r\n\r\nif (!accountId) {\r\n  return <>Please connect wallet</>;\r\n}\r\n\r\nconst css = `\r\n        h2 {\r\n            color: black;\r\n        }\r\n\r\n        .card {\r\n            background-color: #0056b3;\r\n            border-radius: 10px;\r\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n            padding: 20px;\r\n            text-align: center;\r\n        }\r\n\r\n        .nft-list {\r\n          display: flex;\r\n          flex-wrap: wrap; /* Allow cards to wrap to the next row */\r\n          justify-content: flex-start; /* Start stacking from the left */\r\n        }\r\n\r\n        .nft-card {\r\n          /* Styling for individual NFT cards */\r\n          margin: 25px; /* Add some margin between cards */\r\n          padding: 20px;\r\n          border: 10px solid #ccc;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .selected {\r\n          background-color: #e0e0e0; /* Style for the selected card */\r\n        }\r\n\r\n        .nft-card:hover {\r\n            background-color: black;\r\n        }\r\n\r\n\r\n        .submit-button {\r\n            background-color: #007bff;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 5px;\r\n            padding: 10px 20px;\r\n            cursor: pointer;\r\n            margin-top: 20px;\r\n        }\r\n\r\n        .submit-button:hover {\r\n            background-color: #0056b3;\r\n        }\r\n\r\n        .submitted-count {\r\n            font-size: 1rem;\r\n            margin: 5px;\r\n            background-color: #f0f0f0;\r\n            color: #333;\r\n            padding: 5px 10px;\r\n            border-radius: 5px;\r\n            display: inline-block;\r\n            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\r\n        }\r\n`;\r\n\r\nconst cssFont = fetch(\r\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\r\n).body;\r\n\r\nif (!state.theme) {\r\n  State.update({\r\n    theme: styled.div`\r\n    font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\r\n    ${cssFont}\r\n    ${css}\r\n`,\r\n  });\r\n}\r\n\r\nconst f = fetch(\r\n  `https://api.kitwallet.app/account/${accountId}/likelyNFTsFromBlock`\r\n);\r\n\r\nif (!f.ok) {\r\n  return \"Loading\";\r\n}\r\n\r\nconst allContracts = f.body.list;\r\nconsole.log(\"oun ni\", allContracts);\r\n\r\nconst allNfts = (allContracts) => {\r\n  let nnf = allContracts.map((contractId, i) => {\r\n    let nftts = Near.view(contractId, \"nft_tokens_for_owner\", {\r\n      account_id: accountId,\r\n      from_index: \"0\",\r\n      limit: 200,\r\n    });\r\n    return nftts.map((nftz) => {\r\n      nftz[\"contractId\"] = contractId;\r\n      return nftz;\r\n    });\r\n  });\r\n\r\n  return nnf.flat();\r\n};\r\n\r\nconst Theme = state.theme;\r\n\r\nconst nfts = allNfts(allContracts);\r\n\r\nconsole.log(nfts);\r\n\r\nconst handleNFTClick = (nft) => {\r\n  State.update({\r\n    selectedToken: nft.token_id,\r\n  });\r\n  return;\r\n};\r\n//[\r\n//   {\r\n//     image: \"https://placekitten.com/200/200\",\r\n//     name: \"NFT Name\",\r\n//     description: \"NFT Description\",\r\n//   },\r\n//   {\r\n//     image: \"https://picsum.photos/200\",\r\n//     name: \"NFT Name\",\r\n//     description: \"NFT Description\",\r\n//   },\r\n//   {\r\n//     image: \"https://picsum.photos/200\",\r\n//     name: \"NFT Name\",\r\n//     description: \"NFT Description\",\r\n//   },\r\n// ];\r\n\r\nreturn (\r\n  <Theme>\r\n    <div className=\"card\">\r\n      <h2>Select an NFT</h2>\r\n      <div className=\"submitted-count\">\r\n        {/* Display the submitted count */}\r\n        Submitted Arts: {5}\r\n      </div>\r\n      <div className=\"nft-list\">\r\n        {nfts.map((nft, i) => (\r\n          <a\r\n            key={i}\r\n            className=\"text-decoration-none\"\r\n            onClick={() => handleNFTClick(nft)}\r\n          >\r\n            <Widget\r\n              src=\"mob.near/widget/NftImage\"\r\n              props={{\r\n                nft: { tokenId: nft.token_id, contractId: nft.contractId },\r\n                style: {\r\n                  width: \"10em\",\r\n                  height: \"10em\",\r\n                  objectFit: \"cover\",\r\n                  minWidth: \"10em\",\r\n                  minHeight: \"10em\",\r\n                  maxWidth: \"10em\",\r\n                  maxHeight: \"10em\",\r\n                  overflowWrap: \"break-word\",\r\n                  border:\r\n                    nft.token_id == state.selectedToken\r\n                      ? \"3px solid lightblue\"\r\n                      : \"None\",\r\n                },\r\n                className: \"img-thumbnail\",\r\n                fallbackUrl:\r\n                  \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\r\n                alt: `NFT ${contractId} ${nft.token_id}`,\r\n              }}\r\n            />\r\n          </a>\r\n        ))}\r\n      </div>\r\n      <button className=\"submit-button\" onClick={handleSubmit}>\r\n        Submit\r\n      </button>\r\n    </div>\r\n  </Theme>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/research-collective.near/widget/ArtSubmission.chloe", "fact_widget_deployments_id": "f386a749ac88d69001c93c315d108eda", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}