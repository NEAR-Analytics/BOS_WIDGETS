{"tx_hash": "7Wkg8KNXiCF9yLsjVojhUb5sWTmoMPqyZ8ntu4MvNZD6", "action_id_social": "Gi4cdajt17WRaqCV1cWu6RrXbFArosA3LYMdSmc4BkNW-0-widget", "block_id": 102230347, "block_timestamp": "2023-09-29T14:51:44.435Z", "signer_id": "research-collective.near", "widget_name": "ComponentDetailsPage", "source_code": "State.init({\n  copiedShareUrl: false,\n  selectedTab: props.tab ?? \"about\",\n});\n\nif (props.tab && props.tab !== state.selectedTab) {\n  State.update({\n    selectedTab: props.tab,\n  });\n}\n\nconst src = props.src;\nconst [accountId, widget, widgetName] = src.split(\"/\");\nconst existsData = Social.keys(`${accountId}/widget/${widgetName}`);\nconst exists = !existsData || Object.keys(existsData).length > 0;\nconst code = Social.get(`${accountId}/widget/${widgetName}`);\nconst data = Social.get(`${accountId}/widget/${widgetName}/**`);\nconst metadata = data.metadata;\nconst tags = Object.keys(metadata.tags || {});\nconst detailsUrl = `#/near/widget/ComponentDetailsPage?src=${src}`;\nconst shareUrl = `https://near.org${detailsUrl}`;\n\nconst dependencyMatch =\n  code && code.matchAll(/<Widget[\\s\\S]*?src=.*?\"(.+)\"[\\s\\S]*?\\/>/g);\nlet dependencySources = [...(dependencyMatch || [])]\n  .map((r) => r[1])\n  .filter((r) => !!r);\ndependencySources = dependencySources.filter(\n  (r, i) => dependencySources.indexOf(r) === i && r !== \"(.+)\"\n);\n\nconst sourceCode = `\n\\`\\`\\`jsx\n${code}\n\\`\\`\\`\n`;\n\nconst Wrapper = styled.div`\n  padding-bottom: 48px;\n`;\n\nconst SummaryWrapper = styled.div`\n  margin-bottom: 32px;\n`;\n\nconst Tabs = styled.div`\n  display: flex;\n  height: 48px;\n  border-bottom: 1px solid #eceef0;\n  margin-bottom: 32px;\n  overflow: auto;\n  scroll-behavior: smooth;\n\n  @media (max-width: 1024px) {\n    background: #f8f9fa;\n    border-top: 1px solid #eceef0;\n    margin: 0 -12px 48px;\n\n    > * {\n      flex: 1;\n    }\n  }\n`;\n\nconst TabsButton = styled.a`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  font-weight: 600;\n  font-size: 12px;\n  padding: 0 12px;\n  position: relative;\n  color: ${(p) => (p.selected ? \"#11181C\" : \"#687076\")};\n  background: none;\n  border: none;\n  outline: none;\n  text-align: center;\n  text-decoration: none !important;\n\n  &:hover {\n    color: #11181c;\n  }\n\n  &::after {\n    content: \"\";\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: #59e692;\n  }\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-template-columns: ${(p) =>\n    p.noSidebar ? \"1fr\" : \"minmax(0, 1fr) 336px\"};\n  gap: 64px;\n\n  @media (max-width: 995px) {\n    grid-template-columns: 1fr;\n    gap: 24px;\n  }\n`;\n\nconst Sidebar = styled.div`\n  > div {\n    padding-bottom: 32px;\n    border-bottom: 1px solid #eceef0;\n    margin-bottom: 32px;\n\n    &:last-child {\n      padding-bottom: 0;\n      border-bottom: none;\n      margin-bottom: 0;\n    }\n  }\n\n  @media (max-width: 995px) {\n    padding-bottom: 32px;\n    border-bottom: 1px solid #eceef0;\n    grid-row: 1;\n  }\n`;\n\nconst SmallTitle = styled.h3`\n  color: #687076;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 15px;\n  margin-bottom: 32px;\n  text-transform: uppercase;\n\n  @media (max-width: 770px) {\n    margin-bottom: 16px;\n  }\n`;\n\nconst TextLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #0091ff;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 15px;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")};\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n\n  i {\n    margin-right: 4px;\n  }\n`;\n\nconst Dependency = styled.div`\n  margin-bottom: 24px;\n`;\n\nif (!exists) {\n  return (\n    <>\n      <Text bold>Error</Text>\n      <Text>Could not find: {src}</Text>\n    </>\n  );\n}\n\nreturn (\n  <Wrapper>\n    <SummaryWrapper>\n      <Widget\n        src=\"near/widget/ComponentSummary\"\n        props={{\n          primaryAction: \"open\",\n          size: \"large\",\n          showTags: false,\n          src,\n        }}\n      />\n    </SummaryWrapper>\n\n    <Tabs>\n      <TabsButton\n        href={`${detailsUrl}&tab=about`}\n        selected={state.selectedTab === \"about\"}\n      >\n        About\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=source`}\n        selected={state.selectedTab === \"source\"}\n      >\n        Source\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=history`}\n        selected={state.selectedTab === \"history\"}\n      >\n        History\n      </TabsButton>\n\n      <TabsButton\n        href={`${detailsUrl}&tab=discussion`}\n        selected={state.selectedTab === \"discussion\"}\n      >\n        Discussion\n      </TabsButton>\n    </Tabs>\n\n    {state.selectedTab === \"about\" && (\n      <Content>\n        <div>\n          {metadata.description ? (\n            <Markdown text={metadata.description} />\n          ) : (\n            <Text>This component has no description.</Text>\n          )}\n        </div>\n\n        <Sidebar>\n          {(tags.includes(\"Coming Soon\") || tags.includes(\"coming-soon\")) && (\n            <div>\n              <Widget\n                src=\"near/widget/WaitList\"\n                props={{ formUrl: \"http://eepurl.com/hXyUnf\" }}\n              />\n            </div>\n          )}\n\n          <div>\n            <SmallTitle>Developer</SmallTitle>\n            <Widget\n              src=\"near/widget/AccountProfile\"\n              props={{\n                accountId: accountId,\n              }}\n            />\n          </div>\n\n          {tags.length > 0 && (\n            <div>\n              <SmallTitle>Tags</SmallTitle>\n              <Widget\n                src=\"near/widget/Tags\"\n                props={{\n                  tags,\n                }}\n              />\n            </div>\n          )}\n\n          {metadata.linktree?.website && (\n            <div>\n              <SmallTitle>Website</SmallTitle>\n              <TextLink\n                href={`https://${metadata.linktree.website}`}\n                target=\"_blank\"\n              >\n                {metadata.linktree.website}\n                <i className=\"bi bi-box-arrow-up-right\"></i>\n              </TextLink>\n            </div>\n          )}\n\n          <div>\n            <Text small>\n              <i className=\"bi bi-clock\"></i>\n              Last updated\n              <Widget\n                src=\"mob.near/widget/TimeAgo@97556750\"\n                props={{ keyPath: `${accountId}/widget/${widgetName}` }}\n              />{\" \"}\n              ago.\n            </Text>\n          </div>\n        </Sidebar>\n      </Content>\n    )}\n\n    {state.selectedTab === \"source\" && (\n      <Content>\n        <Markdown text={sourceCode} />\n\n        <Sidebar>\n          <div>\n            <SmallTitle>Dependencies ({dependencySources.length})</SmallTitle>\n\n            {dependencySources.length === 0 && (\n              <Text>This component has no dependencies.</Text>\n            )}\n\n            {dependencySources.map((source) => (\n              <Dependency key={source}>\n                <Widget\n                  src=\"near/widget/ComponentProfile\"\n                  props={{ src: source }}\n                />\n              </Dependency>\n            ))}\n          </div>\n        </Sidebar>\n      </Content>\n    )}\n\n    {state.selectedTab === \"history\" && (\n      <Content noSidebar>\n        <Widget\n          src=\"near/widget/ComponentHistory\"\n          props={{ widgetPath: src }}\n        />\n      </Content>\n    )}\n\n    {state.selectedTab === \"discussion\" && (\n      <Content>\n        <Widget\n          src=\"near/widget/NestedDiscussions\"\n          props={{\n            identifier: src,\n            notifyAccountId: accountId,\n            parentComponent: \"near/widget/ComponentDetailsPage\",\n            parentParams: { tab: \"discussion\", src },\n            highlightComment: props.highlightComment,\n          }}\n        />\n      </Content>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/research-collective.near/widget/ComponentDetailsPage", "fact_widget_deployments_id": "8fad0d0e19c5c2666f556daa94cab2e1", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 12}