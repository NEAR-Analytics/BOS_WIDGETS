{"tx_hash": "3pG6qkviA1w6yYeFWToTK4tCm6EJjbXKNS4nwrkDfKJh", "action_id_social": "DWEzVjj2Nnoy4RGWJEaaqYYKu1TmZgXWg6oyu4bRk3jv-0-widget", "block_id": 110076282, "block_timestamp": "2024-01-10T16:30:02.259Z", "signer_id": "abnakore.near", "widget_name": "VoteChain", "source_code": "// Get accountId\nconst accountId = context.accountId;\n\n// All the votes\nconst [allVotes, setAllVotes] = useState([]);\n\nconst List = styled.div`\nwidth: calc(100vw - 20px);\nheight: 100%;\npadding: 20px 10px;\n\n@media screen and (min-width: 1200px) {\n  width: calc(100vw - 20%);\n}\n`;\n\n// Get all the votes\nconst Data = Social.get(`abnakore.near/votes`);\n\nuseEffect(() => {\n  //   console.log(Data);\n  if (Data === undefined) {\n    // Set the candidate to an empty list if there is no candidate\n    setAllVotes([]);\n  } else {\n    setAllVotes(JSON.parse(Data));\n  }\n  //   console.log(Data, \"\");\n}, [Data === null]);\n\n// Pages that can be reached via the aside tab\nconst [pages, setPage] = useState([\n  {\n    name: \"All Votes\",\n    link: \"https://near.org/abnakore.near/widget/VoteChain\",\n  },\n  {\n    name: \"My Votes\",\n    link: \"https://near.org/abnakore.near/widget/VoteChain?tab=my_votes\",\n  },\n  {\n    name: \"Watchlist\",\n    link: \"https://near.org/abnakore.near/widget/VoteChain?tab=watchlist\",\n  },\n  {\n    name: \"Create New Vote\",\n    type: \"button\",\n    link: \"https://near.org/abnakore.near/widget/CreateVote\",\n  },\n]);\n\n//  Format the date and time (January 7, 2024 at 5:57 PM)\nfunction formatDateTime(dateTimeString) {\n  // Assuming you have a date-time input with the format \"YYYY-MM-DDTHH:mm\" as a string\n  const dateTime = new Date(dateTimeString);\n\n  // Formatting the date and time in 12-hour format\n  const formattedDateTime = dateTime.toLocaleString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    hour12: true, // Set to true for 12-hour format\n  });\n\n  return formattedDateTime;\n}\n\nreturn (\n  <>\n    {accountId ? (\n      <Widget\n        src=\"abnakore.near/widget/Wrapper\"\n        props={{\n          body: (\n            <div className=\"main-body\">\n              <div className=\"body-contents\">\n                <div className=\"two-sides\">\n                  <Widget\n                    src=\"abnakore.near/widget/Aside\"\n                    props={{ objs: pages, active: \"/admin/manage_candidates\" }}\n                  />\n                  <List>\n                    {allVotes.map((vote) => (\n                      <Widget\n                        src=\"abnakore.near/widget/VoteCard\"\n                        props={{\n                          name: vote.name,\n                          desc: vote.desc,\n                          open: formatDateTime(vote.openTime),\n                          close: formatDateTime(vote.closeTime),\n                          voted: vote.voters.includes(accountId),\n                          locked: vote.passcode && true,\n                          no_of_candidates: vote.candidates.length,\n                          style: {},\n                        }}\n                      />\n                    ))}\n                    <Widget\n                      src=\"abnakore.near/widget/VoteCard\"\n                      props={{\n                        name: \"Name\",\n                        desc: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit obcaecati iure rem nulla deleniti accusamus, qui, aut recusandae ut fugiat molestiae dicta asperiores, est aspernatur. Aliquid porro sed neque molestiae!\",\n                        open: \"27-03-2024 2:30PM\",\n                        close: \"27-03-2024 2:30PM\",\n                        no_of_candidates: 10,\n                        voted: true,\n                        locked: false,\n                      }}\n                    />\n                    <Widget\n                      src=\"abnakore.near/widget/VoteCard\"\n                      props={{\n                        name: \"Name\",\n                        desc: \"You can use the slice method along with the spread operator (...) to create a new array containing the first two items.\",\n                        open: \"27-03-2024 2:30PM\",\n                        close: \"27-03-2024 2:30PM\",\n                        no_of_candidates: 10,\n                        voted: false,\n                        locked: true,\n                      }}\n                    />\n                  </List>\n                </div>\n              </div>\n            </div>\n          ),\n        }}\n      />\n    ) : (\n      <Widget src=\"abnakore.near/widget/SignIn.jsx\" props={props} />\n    )}\n  </>\n);\n\n// // Get accountId\n// const accountId = context.accountId;\n\n// // Pages that can be reached via the aside tab\n// const [pages, setPage] = useState([\n//   {\n//     name: \"Home\",\n//     link: \"https://near.org/sandbox#/abnakore.near/widget/AdminHome\",\n//   },\n//   {\n//     name: \"Manage Candidates\",\n//     link: \"https://near.org/sandbox#/abnakore.near/widget/ManageCandidates\",\n//   },\n//   {\n//     name: \"Mange Parties\",\n//     link: \"https://near.org/sandbox#/abnakore.near/widget/ManageParties\",\n//   },\n// ]);\n// return (\n//   <>\n//     {accountId ? (\n//       <Widget\n//         src=\"abnakore.near/widget/Wrapper\"\n//         props={{\n//           body: (\n//             <div className=\"main-body\">\n//               <div className=\"body-contents\">\n//                 <div className=\"two-sides\"></div>\n//                 <Widget\n//                   src=\"abnakore.near/widget/Aside\"\n//                   props={{ objs: pages, active: \"/admin/manage_candidates\" }}\n//                 />\n//                 <div className=\"body-contents\">\n//                   <h1>...</h1>\n//                 </div>\n//               </div>\n//             </div>\n//           ),\n//         }}\n//       />\n//     ) : (\n//       <Widget src=\"abnakore.near/widget/SignIn.jsx\" props={props} />\n//     )}\n//   </>\n// );\n", "metadata": {"fork_of": "abnakore.near/widget/VoteChain@110050469"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/abnakore.near/widget/VoteChain", "fact_widget_deployments_id": "644883dd629b8505323b3409bda270e8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 36}