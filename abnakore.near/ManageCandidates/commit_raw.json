{"tx_hash": "HccKTbiS2MZ9r8TMgpEp73f25AdtAQAMTcXAswKmoukt", "action_id_social": "7KeLnk7cLaW9MnHzuosrCEzeCEF7djzeXWjsNNWJRexQ-0-widget", "block_id": 108135042, "block_timestamp": "2023-12-17T02:25:15.789Z", "signer_id": "abnakore.near", "widget_name": "ManageCandidates", "source_code": "// Pages that can be reached via the aside tab\nconst [pages, setPage] = useState([\n  {\n    name: \"Home\",\n    link: \"https://near.org/sandbox#/abnakore.near/widget/AdminHome\",\n  },\n  {\n    name: \"Manage Candidates\",\n    link: \"https://near.org/sandbox#/abnakore.near/widget/ManageCandidates\",\n  },\n  {\n    name: \"Mange Parties\",\n    link: \"https://near.org/sandbox#/abnakore.near/widget/ManageParties\",\n  },\n]);\n\n// List of candidates and their curresponding number of votes\nconst [candidates, setCandidates] = useState([\n  {\n    id: 1,\n    name: \"Foo\",\n    party: \"APD\",\n    email: \"example@gmail.com\",\n    role: \"President\",\n    votes: 3,\n    rank: 2,\n  },\n  {\n    id: 2,\n    name: \"Bar\",\n    party: \"YMB\",\n    email: \"example@gmail.com\",\n    role: \"President\",\n    votes: 5,\n    rank: 1,\n  },\n  {\n    id: 3,\n    name: \"Baz\",\n    party: \"AAN\",\n    email: \"example@gmail.com\",\n    role: \"President\",\n    votes: 1,\n    rank: 4,\n  },\n  {\n    id: 4,\n    name: \"sass\",\n    party: \"AKA\",\n    email: \"example@gmail.com\",\n    role: \"President\",\n    votes: 2,\n    rank: 3,\n  },\n]);\n\nconst [maxId, setMaxId] = useState(4);\n\n// name and acro\nconst [newCandidate, setNewCandidate] = useState({\n  id: \"\",\n  name: \"\",\n  party: \"\",\n  email: \"\",\n  role: \"\",\n  votes: \"\",\n  rank: \"\",\n});\n\nfunction save() {\n  newCandidate.id = maxId + 1;\n  newCandidate.votes = 0;\n  newCandidate.rank = maxId + 1;\n  setMaxId(maxId + 1);\n  setCandidates((prev) => prev.concat([newCandidate]));\n}\n\n// Social.set({\n//   candidates: [1, 2, \"dog\"],\n// });\n// const accountId = contex.accountId;\n// const Data = Social.get(`${accountId}/candidates`);\n\nreturn (\n  <Widget\n    src=\"abnakore.near/widget/Wrapper.jsx\"\n    props={{\n      body: (\n        <div className=\"main-body\">\n          <Widget\n            src=\"abnakore.near/widget/Aside.jsx\"\n            props={{ objs: pages, active: \"/admin/manage_candidates\" }}\n          />\n          <div className=\"body-contents\">\n            <h1>Manage Candidates</h1>\n            <Widget\n              src=\"abnakore.near/widget/Table.jsx\"\n              props={{\n                headings: [\n                  \"S/N\",\n                  \"Candidate's Name\",\n                  \"Party\",\n                  \"Email\",\n                  \"Role\",\n                  \"Number of votes\",\n                  \"Rank\",\n                ],\n                data: Object.values(candidates.map((c) => Object.values(c))),\n              }}\n            />\n            <div className=\"form\">\n              <div className=\"flex\">\n                <Widget\n                  src=\"abnakore.near/widget/Input.jsx\"\n                  props={{\n                    type: \"text\",\n                    placeholder: \"Full Name\",\n                    required: true,\n                    item: \"name\",\n                    items: newCandidate,\n                    setItem: setNewCandidate,\n                  }}\n                />\n                <Widget\n                  src=\"abnakore.near/widget/Input.jsx\"\n                  props={{\n                    type: \"text\",\n                    placeholder: \"party\",\n                    required: true,\n                    item: \"party\",\n                    items: newCandidate,\n                    setItem: setNewCandidate,\n                  }}\n                />\n              </div>\n              <div className=\"flex\">\n                <Widget\n                  src=\"abnakore.near/widget/Input.jsx\"\n                  props={{\n                    type: \"email\",\n                    placeholder: \"Email\",\n                    required: true,\n                    item: \"email\",\n                    items: newCandidate,\n                    setItem: setNewCandidate,\n                  }}\n                />\n                <Widget\n                  src=\"abnakore.near/widget/Input.jsx\"\n                  props={{\n                    type: \"text\",\n                    placeholder: \"Role\",\n                    required: true,\n                    item: \"role\",\n                    items: newCandidate,\n                    setItem: setNewCandidate,\n                  }}\n                />\n              </div>\n              <CommitButton\n                onCommit={save}\n                data={{ candidates: [newCandidate] }}\n              >\n                Add\n              </CommitButton>\n            </div>\n          </div>\n        </div>\n      ),\n    }}\n  />\n);\n", "metadata": {"fork_of": "abnakore.near/widget/ManageCandidates@108130941"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/abnakore.near/widget/ManageCandidates", "fact_widget_deployments_id": "b4d34dc0fc58ab70cdc206082bec2c8a", "inserted_timestamp": "2023-12-17T04:21:46.854Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}