{"tx_hash": "3rZEFwUEmhgZ1TXPM1VTE86E6G2t2mRih8yiBEz8tjyt", "action_id_social": "6uRKdBiyujfPtnJbPFghJuxo9WBXxA7BGbanuRWmhM9A-0-widget", "block_id": 108478533, "block_timestamp": "2023-12-21T12:15:45.071Z", "signer_id": "abnakore.near", "widget_name": "App.jsx", "source_code": "const [candidate, setCandidate] = useState(0);\nconst [candidates, setCandidates] = useState([\n  { id: 1, name: \"Foo\", votes: 3, rank: 2 },\n  { id: 2, name: \"Bar\", votes: 5, rank: 1 },\n  { id: 3, name: \"Baz\", votes: 1, rank: 4 },\n  { id: 4, name: \"sass\", votes: 2, rank: 3 },\n]);\nconst [state, setState] = useState({\n  show_message: false,\n  show_error_on_dropdown: false,\n});\n\n// Pages that will be displayed in the aside\nconst [pages, setPages] = useState([\n  {\n    name: \"Voting Page\",\n    link: \"https://near.org/sandbox#/abnakore.near/widget/App.jsx\",\n  },\n  {\n    name: \"Result\",\n    link: \"https://near.org/sandbox#/abnakore.near/widget/Result.jsx\",\n  },\n  { name: \"Log out\", link: \"https://near.org/signin\" },\n]);\n\n// Users tht already voted\nconst [voted, setVoted] = useState([1]);\n\n// Functions\nfunction vote() {\n  if (candidate > 0) {\n    // console.log(context.accountId);\n    // console.log(voted);\n    // setCandidates([...candidates]);\n    setState({\n      ...state,\n      show_message: true,\n    });\n    setVoted((prev) => prev.concat([context.accountId]));\n  } else {\n    // Set an error on the dropdown\n    setState({\n      ...state,\n      show_error_on_dropdown: true,\n    });\n  }\n}\n\n// Update the value of the dropdown when changed\nfunction updateDropdown(e) {\n  setCandidate(e.target.value);\n  // Remove the error on the dropdown\n  setState({\n    ...state,\n    show_error_on_dropdown: false,\n  });\n}\n\nconst accountId = context.accountId;\n\nreturn (\n  <>\n    {accountId ? (\n      <Widget\n        src=\"abnakore.near/widget/Wrapper\"\n        props={{\n          body: (\n            <div className=\"main-body\">\n              <div className=\"two-sides\">\n                {/* The Aside bar that helps in quick navigation btw pages */}\n                <Widget\n                  src=\"abnakore.near/widget/Aside\"\n                  props={{ objs: pages, active: \"/\" }}\n                />\n\n                <div className=\"body-contents\">\n                  <i>\n                    <svg\n                      width=\"64px\"\n                      height=\"64px\"\n                      viewBox=\"0 0 24 24\"\n                      fill=\"none\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g>\n                      <g\n                        id=\"SVGRepo_tracerCarrier\"\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                      ></g>\n                      <g id=\"SVGRepo_iconCarrier\">\n                        {\" \"}\n                        <path\n                          d=\"M4 6H20M4 12H20M4 18H20\"\n                          stroke=\"#fefefe\"\n                          stroke-width=\"2\"\n                          stroke-linecap=\"round\"\n                          stroke-linejoin=\"round\"\n                        ></path>{\" \"}\n                      </g>\n                    </svg>\n                  </i>\n                  <h1>VoteChain</h1>\n                  <p\n                    style={{\n                      color: \"green\",\n                      display: voted.includes(context.accountId)\n                        ? \"block\"\n                        : \"none\",\n                    }}\n                  >\n                    You Have Succesfully Voted\n                  </p>\n                  <div className=\"card\">\n                    <div>\n                      <select\n                        disabled={\n                          voted.includes(context.accountId) ? true : false\n                        }\n                        className={`drop-down ${\n                          state.show_error_on_dropdown ? \"error\" : \"\"\n                        }`}\n                        value={candidate}\n                        onChange={updateDropdown}\n                        name=\"candidate\"\n                        required\n                      >\n                        <option className=\"option\" value={0}>\n                          Select Candidate\n                        </option>\n                        {candidates.map((candidate) => (\n                          <option\n                            className=\"option\"\n                            key={candidate.id}\n                            value={candidate.id}\n                          >\n                            {candidate.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    <button\n                      disabled={\n                        voted.includes(context.accountId) ? true : false\n                      }\n                      onClick={vote}\n                    >\n                      Vote\n                    </button>\n\n                    <p\n                      id=\"thanks\"\n                      className={`read-the-docs ${\n                        state.show_message ? \"\" : \"hide\"\n                      }`}\n                    >\n                      Thank you for voting\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ),\n        }}\n      />\n    ) : (\n      <Widget src=\"abnakore.near/widget/SignIn.jsx\" props={props} />\n    )}\n  </>\n);\n", "metadata": {"fork_of": "abnakore.near/widget/App.jsx@108135219"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/abnakore.near/widget/App.jsx", "fact_widget_deployments_id": "8d5c3a091a9887a1a9c9208a3e433a13", "inserted_timestamp": "2023-12-21T14:41:21.492Z", "modified_timestamp": "2023-12-21T15:06:47.638Z", "__row_index": 17}