{"tx_hash": "DKdmgMZ85iciUdHqfRZSSPChF2wABePQeNiJTWxjtJPJ", "action_id_social": "CLy1md67SAL2HsGvGVSoiygYWxDcfAUiaf4dSdnByRHK-0-widget", "block_id": 100693536, "block_timestamp": "2023-09-08T22:48:38.926Z", "signer_id": "yairnava.near", "widget_name": "Rock-Paper-Scissors", "source_code": "const onFinish = props.onFinish;\nconst isModal = props.isModal;\n\nconst Container = styled.div`\n  text-align: center;\n  margin-top: 100px\n`;\n\nconst Choice = styled.div`\n  display: inline-block;\n  cursor: pointer;\n  margin: 10px;\n`;\n\nState.init({\n  finish: false,\n  playerChoice: null,\n  computerChoice: null,\n  roundsWonByPlayer: 0,\n  roundsWonByCPU: 0,\n  currentRound: 1,\n});\n\nconst playGame = (userChoice) => {\n  const choices = [\"rock\", \"paper\", \"scissors\"];\n  const computerChoice = choices[Math.floor(Math.random() * 3)];\n\n  if (userChoice === computerChoice) {\n  } else if (\n    (userChoice === \"rock\" && computerChoice === \"scissors\") ||\n    (userChoice === \"paper\" && computerChoice === \"rock\") ||\n    (userChoice === \"scissors\" && computerChoice === \"paper\")\n  ) {\n    State.update({\n      roundsWonByPlayer: state.roundsWonByPlayer + 1,\n    });\n  } else {\n    State.update({\n      roundsWonByPlayer: state.roundsWonByCPU + 1,\n    });\n  }\n\n  State.update({\n    computerChoice: computerChoice,\n    playerChoice: userChoice,\n  });\n\n  if (state.currentRound + 1 <= 3) {\n    setTimeout(() => {\n      State.update({\n        playerChoice: null,\n        computerChoice: null,\n        currentRound: state.currentRound + 1,\n      });\n    }, \"1500\");\n  } else {\n    setTimeout(() => {\n      State.update({\n        finish: true,\n      });\n    }, \"1500\");\n    setTimeout(() => {\n      if (!isModal) {\n        State.update({\n          finish: false,\n          playerChoice: null,\n          computerChoice: null,\n          roundsWonByPlayer: 0,\n          roundsWonByCPU: 0,\n          currentRound: 1,\n        });\n      } else {\n        onFinish();\n      }\n    }, \"4000\");\n  }\n};\n\nconst getComputerChoiceImg = (option) => {\n  switch (option) {\n    case \"rock\":\n      return \"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/piedra.png\";\n    case \"paper\":\n      return \"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/papel.png\";\n    case \"scissors\":\n      return \"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/tijera.png\";\n  }\n};\n\nreturn (\n  <div\n    style={{\n      width: \"370px\",\n      marginInline: \"auto\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      height: \"308px\",\n      backgroundImage:\n        \"url(https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/gameboyverde.png)\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundSize: \"370px\",\n      backgroundPosition: \"top\",\n    }}\n  >\n    <div style={{ textAlign: \"center\" }}>\n      {!state.finish && state.playerChoice && (\n        <>\n          <Container>\n            <div class=\"row\" style={{ marginTop: \"-25px\" }}>\n              <div class=\"col-12\">\n                <p style={{ color: \"black\" }}>CPU</p>\n              </div>\n              <div class=\"col-12\">\n                <img\n                  style={{\n                    height: \"50px\",\n                    transform: \"rotate(180deg)\",\n                    marginTop: \"-15px\",\n                    marginBottom: \"10px\",\n                    opacity: \"0.8\",\n                  }}\n                  src={getComputerChoiceImg(state.computerChoice)}\n                />\n              </div>\n              <div class=\"col-12\">\n                <img\n                  style={{ height: \"50px\", opacity: \"0.8\" }}\n                  src={getComputerChoiceImg(state.playerChoice)}\n                />\n              </div>\n              <div class=\"col-12\">\n                <p style={{ color: \"black\" }}>Player</p>\n              </div>\n            </div>\n          </Container>\n          <div\n            style={{\n              marginTop: \"3px\",\n              fontSize: \"10px\",\n              fontWeight: \"bold\",\n              color: \"white\",\n            }}\n          >\n            <p>Round: {state.currentRound}</p>\n          </div>\n        </>\n      )}\n      {!state.finish && !state.playerChoice && (\n        <>\n          <Container>\n            <p style={{ color: \"black\" }}>Choose an option</p>\n            <Choice onClick={() => playGame(\"rock\")}>\n              <img\n                style={{ height: \"50px\", opacity: \"0.8\" }}\n                src=\"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/piedra.png\"\n              />\n            </Choice>\n            <Choice onClick={() => playGame(\"paper\")}>\n              <img\n                style={{ height: \"50px\", opacity: \"0.8\" }}\n                src=\"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/papel.png\"\n              />\n            </Choice>\n            <Choice onClick={() => playGame(\"scissors\")}>\n              <img\n                style={{ height: \"50px\", opacity: \"0.8\" }}\n                src=\"https://raw.githubusercontent.com/yaairnaavaa/Burrito-Virtual-Pet/main/tijera.png\"\n              />\n            </Choice>\n          </Container>\n          <div\n            style={{\n              marginTop: \"45px\",\n              fontSize: \"10px\",\n              fontWeight: \"bold\",\n              color: \"white\",\n            }}\n          >\n            <p>Round: {state.currentRound}</p>\n          </div>\n        </>\n      )}\n      {state.finish && (\n        <>\n          <Container style={{ color: \"black\" }}>\n            <p>Player: {state.roundsWonByPlayer} wins</p>\n            <p>CPU: {state.roundsWonByCPU} wins</p>\n            <p style={{ fontWeight: \"bold\" }}>\n              {state.roundsWonByPlayer > state.roundsWonByCPU\n                ? \"You Won!\"\n                : roundsWonByPlayer < roundsWonByComputer\n                ? \"You Lost!\"\n                : \"It's a draw!\"}\n            </p>\n          </Container>\n        </>\n      )}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/yairnava.near/widget/Rock-Paper-Scissors", "fact_widget_deployments_id": "1603d9af30d5325075e2c65d0026c7ff", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}