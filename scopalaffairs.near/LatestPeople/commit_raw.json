{"tx_hash": "8MG2WrGpjL4R1yQkR3dpxPsxbt3fhzc88xVWFmog9ycF", "action_id_social": "21v3Md9VnUrQ5iC53NeibejH5HJfrsNeLvjmbv68DQfR-0-widget", "block_id": 102533005, "block_timestamp": "2023-10-03T15:53:09.423Z", "signer_id": "scopalaffairs.near", "widget_name": "LatestPeople", "source_code": "const accountsData = Social.keys(\"*\", \"final\", {\n  return_type: \"BlockHeight\",\n});\n\nconst accountsWithProfileData = Social.keys(\"*/profile\", \"final\", {\n  return_type: \"BlockHeight\",\n});\n\nconst limit = 5;\nconst totalAccounts = Object.keys(accountsData || {}).length;\nconst totalAccountsWithProfile = Object.keys(\n  accountsWithProfileData || {}\n).length;\n\nlet accounts = Object.entries(accountsWithProfileData || {})\n  .slice(totalAccountsWithProfile - limit, totalAccountsWithProfile)\n  .map((entry) => {\n    return {\n      accountId: entry[0],\n      blockHeight: entry[1].profile,\n    };\n  });\n\naccounts.reverse();\n\nState.init({\n  selectedView: { text: \"Top\", value: \"trending\" },\n});\n\nconst handleViewChange = (option) => {\n  State.update({ selectedView: { value: option.value } });\n};\n\nconst options = [\n  { text: \"Latest\", value: \"latest\" },\n  { text: \"Top\", value: \"trending\" },\n  { text: \"Recommended\", value: \"recommended\" },\n];\n\nconst fromContext = props;\n\nconst FlexContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  gap: 24px;\n`;\n\nconst H2 = styled.h2`\n  font-size: 19px;\n  line-height: 22px;\n  color: #11181c;\n  margin: 0;\n`;\n\nconst LatestPeople = styled.div`\n  display: grid;\n  gap: 18px;\n`;\n\nconst Item = styled.div``;\n\nconst ButtonLink = styled.a`\n  display: block;\n  width: 100%;\n  padding: 8px;\n  height: 32px;\n  background: #fbfcfd;\n  border: 1px solid #d7dbdf;\n  border-radius: 50px;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 15px;\n  text-align: center;\n  cursor: pointer;\n  color: #11181c !important;\n  margin: 0;\n\n  &:hover,\n  &:focus {\n    background: #ecedee;\n    text-decoration: none;\n    outline: none;\n  }\n\n  span {\n    color: #687076 !important;\n  }\n`;\n\nconst Select = styled.div`\n  max-width: 100%;\n`;\n\nreturn (\n  <Wrapper>\n    <FlexContainer>\n      <H2>People</H2>\n      <Select>\n        <Widget\n          src=\"near/widget/Select\"\n          props={{\n            border: \"0px\",\n            noLabel: true,\n            value: state.selectedView,\n            options: options,\n            onChange: handleViewChange,\n          }}\n        />\n      </Select>\n    </FlexContainer>\n    {state.selectedView.value === \"latest\" && (\n      <>\n        <LatestPeople>\n          {accounts.map((account) => (\n            <Item key={account.accountId}>\n              <Widget\n                src=\"near/widget/AccountProfile\"\n                props={{\n                  accountId: account.accountId,\n                  blockHeight: account.blockHeight,\n                }}\n              />\n            </Item>\n          ))}\n        </LatestPeople>\n        <ButtonLink href=\"#/near/widget/PeoplePage\">\n          View All People <span>({totalAccounts})</span>\n        </ButtonLink>\n      </>\n    )}\n    {state.selectedView.value === \"trending\" && (\n      <>\n        <Widget\n          src=\"near/widget/Recommender.Views.TrendingUsersView\"\n          props={{\n            sidebar: true,\n            fromContext: fromContext,\n            gridCols: \"repeat(1, minmax(0, 1fr))\",\n            returnElements: 5,\n          }}\n        />\n      </>\n    )}\n    {state.selectedView.value === \"recommended\" && (\n      <>\n        <Widget\n          src=\"near/widget/Recommender.Views.FriendsOfFriendsView\"\n          props={{\n            sidebar: true,\n            fromContext: fromContext,\n            gridCols: \"repeat(1, minmax(0, 1fr))\",\n            returnElements: 10,\n          }}\n        />\n      </>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/scopalaffairs.near/widget/LatestPeople", "fact_widget_deployments_id": "294c780f0fbb9f7fd9c137539aed2871", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}