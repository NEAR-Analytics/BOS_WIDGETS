{"tx_hash": "FzzdihZeHPrAzLZAt8Loz4WfhtAYxSB6wo9n2oPiMwnB", "action_id_social": "3EXTQw8tp9E4MMAkL2q8YxPtKo6FLLLmo7a1knazxCuh-0-widget", "block_id": 102153737, "block_timestamp": "2023-09-28T14:30:22.015Z", "signer_id": "scopalaffairs.near", "widget_name": "AccountProfileOverlay", "source_code": "const accountId = props.accountId;\nconst profile = props.profile || Social.get(`${accountId}/profile/**`, \"final\");\nconst tags = Object.keys(profile.tags || {});\nconst profileUrl = `#/scopalaffairs.near/widget/ProfilePage?accountId=${accountId}`;\n\nconst handleOnMouseEnter = () => {\n  State.update({ show: true });\n};\nconst handleOnMouseLeave = () => {\n  State.update({ show: false });\n};\n\nState.init({\n  show: false,\n  hasBeenFlagged: false,\n});\n\nconst CardWrapper = styled.div`\n  z-index: 100;\n  padding: 6px;\n`;\n\nconst OverlayTagsWrapper = styled.div`\n  margin-left: 50px;\n`;\n\nconst AvatarCount = styled.div`\n  color: rgb(104, 112, 118);\n  font-size: 14px;\n  font-weight: 300;\n  padding-left: 12px;\n`;\n\nconst RecommendedAvatars = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 12px 0 0;\n`;\n\nconst Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  gap: 12px;\n  width: 275px;\n  border-radius: 12px;\n  z-index: 1070;\n  background: #fff;\n  border: 1px solid #eceef0;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\n  padding: 12px;\n\n  div.layout {\n    margin-left: 63px;\n  }\n`;\n\nconst FollowButtonWrapper = styled.div`\n  width: 100%;\n  div,\n  button {\n    width: 100%;\n  }\n`;\n\nconst contentModerationItem = {\n  type: \"social\",\n  path: profileUrl,\n  reportedBy: context.accountId,\n};\n\nconst handleFollow = (userId) => {\n  console.log(\"remove from list, because followed:\", userId);\n  // callback function\n  // removeListProfileOnFollow(userId);\n};\n\nconst overlay = (\n  <CardWrapper>\n    <Card onMouseEnter={handleOnMouseEnter} onMouseLeave={handleOnMouseLeave}>\n      <div className=\"d-flex align-items-center\">\n        <Widget\n          src=\"scopalaffairs.near/widget/AccountProfile\"\n          props={{ accountId: props.accountId, profile, noOverlay: true }}\n        />\n        {!!context.accountId && context.accountId !== props.accountId && (\n          <Widget\n            src=\"scopalaffairs.near/widget/FlagButton\"\n            props={{\n              item: contentModerationItem,\n              onFlag: () => {\n                State.update({ hasBeenFlagged: true });\n              },\n            }}\n          />\n        )}\n      </div>\n\n      {props.scope === \"friends\" ? (\n        <OverlayTagsWrapper>\n          <Widget\n            className=\"layout\"\n            src=\"scopalaffairs.near/widget/Tags\"\n            props={{ tags, scroll: true }}\n          />\n          <RecommendedAvatars>\n            <Widget\n              src=\"scopalaffairs.near/widget/Recommender.Views.RecommendedAvatars\"\n              props={{\n                avatarSize: \"25px\",\n                becauseYouFollow: props.becauseYouFollow,\n              }}\n            />\n            <AvatarCount>\n              {props.becauseYouFollow.length} friends following\n            </AvatarCount>\n          </RecommendedAvatars>\n        </OverlayTagsWrapper>\n      ) : (\n        <Widget\n          src=\"scopalaffairs.near/widget/Tags\"\n          props={{ tags, scroll: true }}\n        />\n      )}\n\n      {!!context.accountId && context.accountId !== props.accountId && (\n        <FollowButtonWrapper>\n          <Widget\n            src=\"scopalaffairs.near/widget/FollowButton\"\n            props={{\n              accountId: props.accountId,\n              onClick: handleFollow(props.accountId),\n            }}\n          />\n        </FollowButtonWrapper>\n      )}\n    </Card>\n  </CardWrapper>\n);\n\nreturn (\n  <OverlayTrigger\n    show={state.show}\n    trigger={[\"hover\", \"focus\"]}\n    delay={{ show: 250, hide: 300 }}\n    placement={props.placement || \"auto\"}\n    overlay={overlay}\n  >\n    <div\n      className={props.inline ? \"d-inline-flex\" : \"\"}\n      style={{\n        verticalAlign: props.inline ? \"baseline\" : \"\",\n        maxWidth: \"100%\",\n      }}\n      onMouseEnter={handleOnMouseEnter}\n      onMouseLeave={handleOnMouseLeave}\n    >\n      {props.children || \"Hover Me\"}\n\n      {state.hasBeenFlagged && (\n        <Widget\n          src={`scopalaffairs.near/widget/DIG.Toast`}\n          props={{\n            type: \"info\",\n            title: \"Flagged for moderation\",\n            description:\n              \"Thanks for helping our Content Moderators. The item you flagged will be reviewed.\",\n            open: state.hasBeenFlagged,\n            onOpenChange: (open) => {\n              State.update({ hasBeenFlagged: open });\n            },\n            duration: 10000,\n          }}\n        />\n      )}\n    </div>\n  </OverlayTrigger>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/scopalaffairs.near/widget/AccountProfileOverlay", "fact_widget_deployments_id": "915c9302becf14897a5d31fc34f7a96f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}