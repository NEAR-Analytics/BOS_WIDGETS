{"tx_hash": "GjEgPj6jrTJQdjA5movbkLYDyEPq6Wp1b8NBPWJ9h4XW", "action_id_social": "E7mwYTT5n3jwbP9ahXLRv5VfcokW5XAhoMjj66qfnHkR-0-widget", "block_id": 99642827, "block_timestamp": "2023-08-25T18:05:04.799Z", "signer_id": "ndcplug.near", "widget_name": "CommonLibraries.Main", "source_code": "// add better icons and actually populate components\n// pass in props so can keep track of state\n// make it so on click is home tag\n// add number of stars\n// add hover effect\n// make every header also a filter\n// add selecte tab styling\n// search keeps refreshing\n// fix search\n// add leaderboard\n\nconst Card = styled.div`\n  position: relative;\n  width: 100%;\n  border-radius: 12px;\n  justify-content: center;\n  background: #fff;\n  border: 1px solid #eceef0;\n  box-shadow: 0px 1px 3px rgba(16, 24, 40, 0.1),\n    0px 1px 2px rgba(16, 24, 40, 0.06);\n  overflow: hidden;\n  padding: 23px;\n      .join-button-active {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    height: 32px;\n    border-radius: 100px;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 15px;\n    text-align: center;\n    cursor: pointer;\n    background: #000000;\n    border: 1px solid #D7DBDF;\n    color: #ffffff;\n    white-space: nowrap;\n\n    i {\n      display: inline-block;\n      color: #ffffff;\n    }\n  }\n    .join-button {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    height: 32px;\n    border-radius: 100px;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 15px;\n    text-align: center;\n    cursor: pointer;\n    background: #FBFCFD;\n    border: 1px solid #D7DBDF;\n    color: ${props.primary ? \"#006ADC\" : \"#11181C\"} !important;\n    white-space: nowrap;\n\n    &:hover,\n    &:focus {\n      background: #ECEDEE;\n      text-decoration: none;\n      outline: none;\n    }\n\n    i {\n      display: inline-block;\n      color: #7E868C;\n    }\n  }\n`;\n\nconst ownerId = \"manzanal.near\";\n\nconst componentsURL = \"https://raw.githubusercontent.com/NEARBuilders/BOSLibraries/main/library.json\";\nfunction loadComponents() {\n  const res = fetch(componentsURL);\n  return res.body && JSON.parse(res.body);\n}\n\nconst componentList = loadComponents();\nif (!componentList) {\n  return \"\u29d7 Loading Components...\";\n}\nconst filterTag = props.catTab ?? \"home\";\nconst debug = props.debug ?? false;\nconst id = props.id ?? \"\";\n\nState.init({\n  catTab: props.catTab ?? \"home\",\n  id: id,\n  selectedTab: props.catTab || \"home\",\n  accountUrl: `#/ndcplug.near/widget/BOSHACKS.Index?tab=resources&catTab=${state.selectedTab}`,\n});\nconst regAccountUrl = `#/ndcplug.near/widget/BOSHACKS.Index?tab=resources&catTab=`;\nconst updateTab = (tab) => {\n  State.update({\n    selectedTab: tab,\n    accountUrl: `#/ndcplug.near/widget/BOSHACKS.Index?tab=resources&catTab=${tab}`,\n  });\n  //   window.location.href = `${state.accountUrl}`;\n  console.log(\"Tab is: \" + tab);\n  console.log(\"SelectedTab is: \" + state.selectedTab);\n  console.log(\"AccountURL: \" + state.accountUrl);\n};\n\nif (props.catTab && props.catTab !== state.selectedTab) {\n  State.update({\n    selectedTab: props.catTab,\n  });\n}\n\nconst searchComponents = () => {\n  return (\n    <div class=\"mb-4\">\n      <div className=\"mb-2\">\n        <Widget\n          src=\"mob.near/widget/ComponentSearch\"\n          props={{\n            debug: debug,\n            // filterTag: state.selectedTab,\n            placeholder: \"\ud83d\udd0d Search for common components\",\n            limit: 24,\n            onChange: ({ result }) => {\n              State.update({ components: result });\n            },\n          }}\n        />\n      </div>\n      {state.components && (\n        <div className=\"mb-2\">\n          {state.components.map((comp, i) => (\n            <div class=\"mb-2\" key={i}>\n              {false && (\n                <Widget\n                  src=\"mob.near/widget/WidgetMetadata\"\n                  props={{\n                    accountId: comp.accountId,\n                    widgetName: comp.widgetName,\n                    expanded: true,\n                  }}\n                />\n              )}\n              <Widget\n                src=\"ndcplug.near/widget/CommonLibraries.Component.Like\"\n                props={{\n                  widgetPath: `${comp.accountId}/widget/${comp.widgetName}`,\n                }}\n              />\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst renderCategory = (categoryId) => {\n  if (!categoryId || categoryId === \"\") return <></>;\n  const item = componentList.find((i) => i.id == categoryId);\n  return (\n    <div class=\"mt-3\">\n      <div\n        class=\"text fs-5 text-muted mb-1\"\n        href={`${state.accountUrl}`}\n        target=\"_blank\"\n        selected={state.selectedTab === item.id}\n        id={item.id}\n      >\n        {item.category}\n      </div>\n      <div class=\"border border-2 mb-4 rounded\"></div>\n      <div class=\"container\">\n        <div className=\"row \">\n          {item.components.map((comp, i) => (\n            <div class=\"w-100 mb-2\">\n              {false && (\n                <Widget\n                  key={i}\n                  src=\"mob.near/widget/WidgetMetadata\"\n                  props={{\n                    accountId: comp.accountId,\n                    widgetName: comp.widgetName,\n                    expanded: false,\n                  }}\n                />\n              )}\n              <Widget\n                key={i}\n                src=\"ndcplug.near/widget/CommonLibraries.Component.Like\"\n                props={{\n                  widgetPath: `${comp.accountId}/widget/${comp.widgetName}`,\n                }}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst renderHome = () => {\n  return (\n    <>\n      <div class=\"mt-2\">\n        <h4>Libraries</h4>\n        <p class=\"text text-muted \">\n          A curated list of common librairies grouped by categories.\n        </p>\n        <div className=\"mb-3\">\n          {componentList && (\n            <div className=\"mb-6\">\n              {state.selectedTab && state.selectedTab !== \"home\" ? (\n                <> {true && renderCategory(props.catTab)}</>\n              ) : (\n                <>{componentList.map((cat, i) => renderCategory(cat.id))}</>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst onSelect = (selection) => {\n  State.update({ catTab: selection.tab, id: selection.id ? selection.id : \"\" });\n};\n\nconst renderContent = {\n  home: renderHome(),\n  //   searchComponents: searchComponents(),\n  category: renderCategory(), // should pass something here\n}[state.selectedTab];\n\nconst navItems = componentList.map((i) => ({\n  category: i.category,\n  icon: i.icon,\n  id: i.id,\n}));\nreturn (\n  <>\n    <Card>\n      <div class=\"row\">\n        <div class=\"col-md-3\">\n          {false && (\n            <Widget\n              src={`ndcplug.near/widget/CommonLibraries.Navbar`}\n              props={{\n                catTab: state.catTab,\n                onSelect,\n                navItems: componentList.map((i) => ({\n                  category: i.category,\n                  icon: i.icon,\n                  id: i.id,\n                })),\n              }}\n            />\n          )}\n          <div className=\"d-flex flex-column\">\n            <h4 className=\"fs-4 text-nowrap d-flex flex-row align-items-center\">\n              <span>\ud83d\udcda Libraries</span>\n            </h4>\n            <button className=\"nav-link mt-2\" onClick={() => updateTab(\"home\")}>\n              <i className=\"bi-house\" />\n              <span>Home</span>\n            </button>\n            {false && (\n              <button\n                className=\"nav-link mt-2\"\n                onClick={() => updateTab(\"searchComponents\")}\n              >\n                <i className=\"bi-search\" />\n                <span>Search</span>\n              </button>\n            )}\n\n            <hr className=\"border-2\" />\n            {navItems.map((item) => {\n              // console.log(item);\n              return (\n                <a\n                  className={`join-button${\n                    item.id === props.catTab ? \"-active\" : \"\"\n                  }`}\n                  onClick={() => updateTab(item.id)}\n                  href={`${regAccountUrl}${item.id}`}\n                >\n                  {\" \"}\n                  <i className={item.icon} /> <span>{item.category}</span>{\" \"}\n                </a>\n              );\n            })}\n          </div>\n          <hr className=\"border-2\" />\n        </div>\n        <div class=\"col-md-9\">\n          {\" \"}\n          <h2>Component Libraries</h2>\n          <p class=\"text text-muted\">Libraries for building a better BOS.</p>\n          {searchComponents()}\n          {renderHome()}\n          {false && renderContent}\n        </div>\n      </div>\n    </Card>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcplug.near/widget/CommonLibraries.Main", "fact_widget_deployments_id": "281d1582ef4db8a941369fbf082e9fad", "inserted_timestamp": "2023-08-25T19:52:29.735Z", "modified_timestamp": "2023-08-25T19:52:29.735Z", "__row_index": 0}