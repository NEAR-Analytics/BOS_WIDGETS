{"tx_hash": "A38PWeK1pv85hzQRrEyFbBz2NRZrfSHGf7Lrjzf362r4", "action_id_social": "CZGRnoQgjz6j6fD8cK875vKvGPHdjxhkGQVhJ2djGoKS-0-widget", "block_id": 112275463, "block_timestamp": "2024-02-07T02:17:08.307Z", "signer_id": "thalesb.near", "widget_name": "Input", "source_code": "const InputGroup = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n  flex-direction: column;\n  margin-top: 24px;\n`;\n\nconst InputLabel = styled.label`\n  margin-right: 10px;\n  color: #888baf;\n  display: flex;\n  align-self: flex-end;\n  margin-top: 8px;\n`;\n\nconst Input = styled.input`\n  flex: 1;\n  height: 100%;\n  background-color: inherit;\n  text-align: left;\n  border: none;\n  padding: 8px;\n  color: white;\n  font-size: 32px;\n  font-weight: 500;\n  text-align: left;\n\n  width: 100%;\n  transition: box-shadow 0.3s ease;\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Button = styled.button`\n  background-color: ${(props) => props.bgColor || \"#00EC97\"};\n  color: ${(props) => props.color || \"#373a53\"};\n  width: ${(props) => props.width || \"100%\"};\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-top: ${(props) => props.marginTop || 0}px;\n  transition: background-color 0.3s ease, transform 0.2s ease,\n    box-shadow 0.2s ease;\n\n  &:hover,\n  &:focus {\n    opacity: 0.8;\n\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Container = styled.div`\n  background-color: #323345;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px;\n  border-radius: 8px;\n  width: 100%;\n  position: relative;\n\n  &:focus-within {\n    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4);\n  }\n`;\n\nconst Icon = styled.img`\n  width: 48px;\n  height: 48px;\n`;\n\nconst MaxButton = styled.button`\n  background-color: #373a53;\n  color: #fff;\n  border: none;\n  border-radius: 4px;\n  width: 60px;\n  height: 48px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  &:hover {\n    background-color: #2d3045;\n  }\n`;\n\nconst GhostButton = styled.button`\n  margin-top: ${(props) => props.marginTop || 0}px;\n  width: ${(props) => props.width || \"100%\"};\n  background-color: transparent;\n  color: white;\n  border: 1px solid white;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-right: 10px;\n  transition: background-color 0.3s ease, transform 0.2s ease,\n    box-shadow 0.2s ease, opacity 0.2s ease;\n  font-size: 16px;\n  font-weight: 600;\n\n  text-align: center;\n\n  &:hover,\n  &:focus {\n    opacity: 0.8;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &:last-child {\n    margin-right: 0;\n  }\n`;\n\nconst ErrorLabel = styled.span`\n  width: 100%;\n  color: #ff4d4f;\n  text-align: left;\n`;\n\nconst {\n  onConfirm,\n  balance,\n  type,\n  loading,\n  address,\n  decimals,\n  isBaseAsset,\n  isCollateral,\n  selectedItem,\n  min,\n} = props;\n\nconst [inputValue, setInputValue] = useState(\"\");\n\nfunction validateMinimumAmount(value) {\n  if (!props.min) return;\n\n  if (value < min) {\n    return State.update({ error: `Minimum amount is ${props.min}` });\n  } else if (value > balance) {\n    return State.update({ error: `Insufficient balance` });\n  } else {\n    return State.update({ error: \"\" });\n  }\n}\n\nconst handleInputChange = (e) => {\n  setInputValue(e.target.value);\n};\n\nuseEffect(() => {\n  if (!props.min || !inputValue) return;\n\n  validateMinimumAmount(Number(inputValue));\n}, [inputValue, props.balance, props.min]);\n\n//TODO: eu fiz a l\u00f3gica do erro aqui ignorando o do borrow pq eu vi\n// que vc fez uma com error e tal por\u00e9m esse tipo de logica deixa o input\n// muito bugado, mas deixei ai, depois olhamos isso quando o borrow\n//tiver pronto.\nreturn (\n  <InputGroup>\n    <Container\n      //Don't put this logic on the styled components or it will break.\n      style={{\n        border:\n          (inputValue > balance && type !== \"borrow\") || state.error\n            ? \"2px solid #ff4d4f\"\n            : \"2px solid transparent\",\n      }}\n    >\n      <Icon src={selectedItem.image} alt=\"Currency Icon\" />\n      <Input\n        id=\"supply-input\"\n        placeholder=\"0.00\"\n        min={min}\n        value={inputValue}\n        onChange={handleInputChange}\n      />\n      <MaxButton onClick={() => setInputValue(balance)}>MAX</MaxButton>\n    </Container>\n    {inputValue > balance && type !== \"borrow\" && (\n      <ErrorLabel>Insufficient balance!</ErrorLabel>\n    )}\n    {state.error && <ErrorLabel>{state.error}</ErrorLabel>}\n    <InputLabel htmlFor=\"supply-input\">\n      Balance: {balance ? balance : \"0.00\"} {selectedItem.name}\n    </InputLabel>\n    {type === \"withdraw\" ? (\n      <GhostButton\n        marginTop={45}\n        disabled={\n          !(inputValue > 0) ||\n          !balance ||\n          balance === 0 ||\n          state.error ||\n          inputValue > balance\n        }\n        onClick={() => {\n          onConfirm(address, inputValue, decimals, isBaseAsset);\n        }}\n      >\n        {loading ? \"Loading\" : \"Withdraw\"}\n      </GhostButton>\n    ) : (\n      <Button\n        marginTop={24}\n        color={type === \"borrow\" && \"#FFF\"}\n        bgColor={type === \"borrow\" && \"#AA00FA\"}\n        disabled={\n          !(inputValue > 0) ||\n          !balance ||\n          balance === 0 ||\n          state.error ||\n          (inputValue > balance && type !== \"borrow\")\n        }\n        onClick={() =>\n          onConfirm(address, inputValue, decimals, isBaseAsset, isCollateral)\n        }\n      >\n        {type === \"borrow\" ? \"BORROW\" : \"SUPPLY\"}\n      </Button>\n    )}\n  </InputGroup>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thalesb.near/widget/Input", "fact_widget_deployments_id": "35892101e1e586f89635bff0a1cf1813", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}