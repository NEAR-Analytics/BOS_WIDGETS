{"tx_hash": "934dETMPeDmdBFbLCxu9WR4Lu9VwAHZPA2qs1td6ca49", "action_id_social": "EJj7VNUU5vKKi8RG67RQ2pt8oWShvd3eNVMgRvW3UkiK-0-widget", "block_id": 124616241, "block_timestamp": "2024-07-30T15:23:59.341Z", "signer_id": "infrastructure-committee.near", "widget_name": "components.molecule.AccountInput", "source_code": "const value = props.value;\nconst placeholder = props.placeholder;\nconst onUpdate = props.onUpdate;\nconst [account, setAccount] = useState(value);\nconst [showAccountAutocomplete, setAutoComplete] = useState(false);\nconst [isValidAccount, setValidAccount] = useState(true);\nconst AutoComplete = styled.div`\n  margin-top: 1rem;\n`;\nuseEffect(() => {\n  if (value !== account) {\n    setAccount(value);\n  }\n}, [value]);\nuseEffect(() => {\n  if (value !== account) {\n    onUpdate(account);\n  }\n}, [account]);\nuseEffect(() => {\n  const handler = setTimeout(() => {\n    const valid =\n      account.length === 64 ||\n      (account ?? \"\").includes(\".near\") ||\n      (account ?? \"\").includes(\".tg\");\n    setValidAccount(valid);\n    setAutoComplete(!valid);\n  }, 100);\n  return () => {\n    clearTimeout(handler);\n  };\n}, [account]);\nreturn (\n  <div>\n    <Widget\n      src={`devhub.near/widget/devhub.components.molecule.Input`}\n      props={{\n        className: \"flex-grow-1\",\n        value: account,\n        onChange: (e) => {\n          setAccount(e.target.value);\n        },\n        skipPaddingGap: true,\n        placeholder: placeholder,\n        inputProps: {\n          max: 64,\n          prefix: \"@\",\n        },\n      }}\n    />\n    {account && !isValidAccount && (\n      <div style={{ color: \"red\" }} className=\"text-sm mt-1\">\n        Please enter valid account ID\n      </div>\n    )}\n    {showAccountAutocomplete && (\n      <AutoComplete>\n        <Widget\n          src={`devhub.near/widget/devhub.components.molecule.AccountAutocomplete`}\n          props={{\n            term: account,\n            onSelect: (id) => {\n              setAccount(id);\n              setAutoComplete(false);\n            },\n            onClose: () => setAutoComplete(false),\n          }}\n        />\n      </AutoComplete>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/infrastructure-committee.near/widget/components.molecule.AccountInput", "fact_widget_deployments_id": "cb5127f8ba09eac535a7e766849b2eb4", "inserted_timestamp": "2024-07-30T16:56:51.901Z", "modified_timestamp": "2024-07-30T16:56:51.901Z", "__row_index": 2}