{"tx_hash": "7RgJhM3VLGr9BhSYRGCo5M56pz1kitmrZLQbyf8pnj6h", "action_id_social": "8GXBT3GK4QtMvmftCa38HPaKXptJzF33wKmxqcNmEWEQ-0-widget", "block_id": 103791536, "block_timestamp": "2023-10-20T08:10:59.716Z", "signer_id": "e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf", "widget_name": "subirreceta", "source_code": "const contract = \"sazonmx.near\";\r\nconst cssFont = fetch(\r\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\r\n).body;\r\n\r\nconst Main = styled.div`\r\n  display: grid;\r\n  gap: 20px;\r\n  grid-template-columns: 1fr; /* Cambiado a una columna para pantallas peque\u00f1as */\r\n  align-items: start;\r\n\r\n  @media (min-width: 1200px) {\r\n    grid-template-columns: 352px minmax(0, 1fr);\r\n  }\r\n`;\r\n\r\n// Agregar un controlador de eventos al bot\u00f3n de env\u00edo\r\nconst handleSubmit = async () => {\r\n  const name = document.querySelector('input[name=\"name\"]').value;\r\n  const title = document.querySelector('input[name=\"title\"]').value;\r\n  const description = document.querySelector(\r\n    'textarea[name=\"description\"]'\r\n  ).value;\r\n  const imageLink = \"\"; // Debes obtener el enlace de la imagen subida\r\n\r\n  await submitRecipe(name, title, description, imageLink);\r\n  alert(\"Receta enviada correctamente!\");\r\n};\r\n\r\nconst footer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst LogoImage = styled.img`\r\n   /* Hace que la imagen se adapte al contenedor */\r\n  max-width: 10%; /* Establece un tama\u00f1o m\u00e1ximo de 200x200 p\u00edxeles */\r\n  margin-right: 12px;\r\n  margin-top: 1px;\r\n`;\r\nconst LogoImage2 = styled.img`\r\n  width: 100%; /* Asegura que la imagen se adapte al contenedor */\r\n  margin-right: 12px;\r\n  margin-top: 1px; \r\n`;\r\n\r\nconst SidebarWrapper = styled.div`\r\n  position: relative;\r\n  z-index: 5;\r\n  margin-top: -55px;\r\n\r\n  @media (max-width: 900px) {\r\n    margin-top: -40px;\r\n  }\r\n`;\r\n\r\nconst Content = styled.div`\r\n  .post {\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 600;\r\n  font-size: ${(p) => p.size || \"25px\"};\r\n  line-height: 1.2em;\r\n  color: #11181c;\r\n  margin: ${(p) => (p.margin ? \"0 0 24px\" : \"0\")};\r\n  overflow-wrap: anywhere;\r\n`;\r\n\r\nconst Tabs = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap; /* Para manejar m\u00faltiples botones en pantallas peque\u00f1as */\r\n  border-bottom: 1px solid #eceef0;\r\n  overflow: auto;\r\n  scroll-behavior: smooth;\r\n  align-items: center;\r\n\r\n  @media (max-width: 1200px) {\r\n    background: #f8f9fa;\r\n    border-top: 1px solid #eceef0;\r\n    margin: 0 -12px 48px;\r\ne\r\n    > * {\r\n      flex: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst TabsButton = styled.a`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  font-weight: 600;\r\n  font-size: 22px;\r\n  padding: 0 12px;\r\n  position: relative;\r\n  color: ${(p) => (p.selected ? \"#11181C\" : \"#ffffff\")};\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  text-align: center;\r\n  text-decoration: none !important;\r\n\r\n  &:hover {\r\n    color: #5EBDD4;\r\n  }\r\n\r\n  &::after {\r\n    content: \"\";\r\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 3px;\r\n    background: #59e692;\r\n  }\r\n`;\r\n\r\nif (!cssFont) return \"\";\r\n\r\nif (!state.theme) {\r\n  State.update({\r\n    theme: styled.div`\r\n      font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\r\n      ${css}\r\n    `,\r\n  });\r\n}\r\nconst Theme = state.theme;\r\n\r\n// OUTPUT UI\r\n\r\nconst getSender = () => {\r\n  return !state.sender\r\n    ? \"\"\r\n    : state.sender.substring(0, 6) +\r\n        \"...\" +\r\n        state.sender.substring(state.sender.length - 4, state.sender.length);\r\n};\r\n\r\n// subida de imagen\r\n\r\nState.init({ img: null });\r\n\r\nconst uploadFileUpdateState = (body) => {\r\n  asyncFetch(\"https://ipfs.near.social/add\", {\r\n    method: \"POST\",\r\n    headers: { Accept: \"application/json\" },\r\n    body,\r\n  }).then((res) => {\r\n    const cid = res.body.cid;\r\n    State.update({ img: { cid } });\r\n  });\r\n};\r\n\r\nconst filesOnChange = (files) => {\r\n  if (files) {\r\n    State.update({ img: { uploading: true, cid: null } });\r\n    uploadFileUpdateState(files[0]);\r\n  }\r\n};\r\n\r\nconst handleFormSubmit = (e) => {\r\n  e.preventDefault();\r\n};\r\n\r\nconst handleInputChange = (e) => {\r\n  const { name, value } = e.target;\r\n  setFormData({\r\n    ...formData,\r\n    [name]: value,\r\n  });\r\n};\r\n\r\nconst sendTransactionToSmartContract = async (\r\n  name,\r\n  title,\r\n  description,\r\n  imageCID\r\n) => {\r\n  const keyPair = nearAPI.KeyPair.fromString(\"YOUR_PRIVATE_KEY\"); // Reemplaza con tu clave privada\r\n\r\n  const near = await nearAPI.connect({\r\n    deps: { keyStore: new nearAPI.keyStores.InMemoryKeyStore() },\r\n    nodeUrl: \"https://rpc.near.org\",\r\n    networkId: \"maiinet\",\r\n  });\r\n\r\n  const account = await near.account(\"sazonmx.near\"); // Reemplaza con tu ID de cuenta\r\n\r\n  const contract = new nearAPI.Contract(account, \"CONTRACT_ID\", {\r\n    viewMethods: [\"VIEW_METHODS\"], // Lista de m\u00e9todos de consulta si los hay\r\n    changeMethods: [\"CHANGE_METHODS\"], // Lista de m\u00e9todos de cambio si los hay\r\n  });\r\n\r\n  try {\r\n    await contract.METHOD_NAME(\r\n      {\r\n        name,\r\n        title,\r\n        description,\r\n        imageCID,\r\n      },\r\n      300000000000000,\r\n      nearAPI.utils.format.parseNearAmount(\"0.1\")\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Error al enviar la transacci\u00f3n:\", error);\r\n  }\r\n};\r\n\r\nreturn (\r\n  <Theme>\r\n    <div\r\n      className=\"container-fluid py-4\"\r\n      style={{ backgroundColor: \"#9972ad\" }}\r\n    >\r\n      <Tabs>\r\n        <LogoImage\r\n          src=\"https://pbs.twimg.com/profile_images/1714387582786654208/7lKexrWK_400x400.jpg\"\r\n          alt=\"Company Logo\"\r\n        />\r\n        <TabsButton\r\n          href={`sazonmx.near/widget/subirreceta`}\r\n          selected={state.selectedTab === \"home\"}\r\n        >\r\n          Inicio\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"how\"}>\r\n          \u00bfQuienes somos?\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\r\n          Desayuno\r\n        </TabsButton>\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\r\n          Comidas\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\r\n          Cenas\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\r\n          Reposter\u00eda\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"benefits\"}>\r\n          Sube tu receta\r\n        </TabsButton>\r\n\r\n        <TabsButton href={`#`} selected={state.selectedTab === \"Supporters\"}>\r\n          Suscripci\u00f3n\r\n        </TabsButton>\r\n      </Tabs>\r\n\r\n      <div className=\"container-fluid py-4\">\r\n        <LogoImage2\r\n          src=\"https://pbs.twimg.com/profile_banners/1712868201384804352/1697215404/1500x500\"\r\n          alt=\"Imagen de fondo\"\r\n          width=\"120px\"\r\n        />\r\n      </div>\r\n\r\n      <h1> Comparte tu receta</h1>\r\n      <div\r\n        className=\"container\"\r\n        style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\r\n      >\r\n        <div\r\n          className=\"container\"\r\n          style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\r\n        >\r\n          <div\r\n            id=\"comparte\"\r\n            style={{\r\n              padding: \"20px\",\r\n              background: \"#ffffff\",\r\n              borderRadius: \"8px\",\r\n            }}\r\n          >\r\n            <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\r\n              Comparte tu receta\r\n            </h2>\r\n\r\n            <div style={{ marginBottom: \"15px\" }}>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"name\"\r\n                placeholder=\"Nombre\"\r\n                value={formData.name}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: \"15px\" }}>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"title\"\r\n                placeholder=\"T\u00edtulo receta\"\r\n                value={formData.title}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: \"15px\" }}>\r\n              <textarea\r\n                className=\"form-control\"\r\n                name=\"description\"\r\n                placeholder=\"Descripci\u00f3n de la receta\"\r\n                rows=\"4\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <div style={{ marginBottom: \"20px\" }}>\r\n              <div className=\"d-inline-block\">\r\n                <input type=\"file\" name=\"image\" />\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n              Enviar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    {/* fin */}\r\n  </Theme>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf/widget/subirreceta", "fact_widget_deployments_id": "1ca76d33d1c2dc3edb4711ad2b127fe1", "inserted_timestamp": "2023-10-20T10:19:24.320Z", "modified_timestamp": "2023-10-20T10:19:24.320Z", "__row_index": 0}