{"tx_hash": "14QgSyDWqWD1NFePCXM6pwVxoWU3eDMeJ9vu3AJBq7rp", "action_id_social": "CA4baLkX54t4HjNs4Fry6a8jSgtVqcFoeisw9mSfSouB-0-widget", "block_id": 103793373, "block_timestamp": "2023-10-20T08:46:49.070Z", "signer_id": "e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf", "widget_name": "subirreceta", "source_code": "// const contratc = \"dev-1697764823856-92090162270530\";\nconst contract = \"sazonmx.near\";\nconst cssFont = fetch(\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\n).body;\n\nconst Main = styled.div`\n  display: grid;\n  gap: 20px;\n  grid-template-columns: 1fr; /* Cambiado a una columna para pantallas peque\u00f1as */\n  align-items: start;\n\n  @media (min-width: 1200px) {\n    grid-template-columns: 352px minmax(0, 1fr);\n  }\n`;\n\n// Agregar un controlador de eventos al bot\u00f3n de env\u00edo\nconst handleSubmit = async () => {\n  const name = document.querySelector('input[name=\"name\"]').value;\n  const title = document.querySelector('input[name=\"title\"]').value;\n  const description = document.querySelector(\n    'textarea[name=\"description\"]'\n  ).value;\n  const imageLink = \"\"; // Debes obtener el enlace de la imagen subida\n\n  await submitRecipe(name, title, description, imageLink);\n  alert(\"Receta enviada correctamente!\");\n};\n\nconst footer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst LogoImage = styled.img`\n   /* Hace que la imagen se adapte al contenedor */\n  max-width: 10%; /* Establece un tama\u00f1o m\u00e1ximo de 200x200 p\u00edxeles */\n  margin-right: 12px;\n  margin-top: 1px;\n`;\nconst LogoImage2 = styled.img`\n  width: 100%; /* Asegura que la imagen se adapte al contenedor */\n  margin-right: 12px;\n  margin-top: 1px; \n`;\n\nconst SidebarWrapper = styled.div`\n  position: relative;\n  z-index: 5;\n  margin-top: -55px;\n\n  @media (max-width: 900px) {\n    margin-top: -40px;\n  }\n`;\n\nconst Content = styled.div`\n  .post {\n    padding-left: 0;\n    padding-right: 0;\n  }\n`;\n\nconst Title = styled.h1`\n  font-weight: 600;\n  font-size: ${(p) => p.size || \"25px\"};\n  line-height: 1.2em;\n  color: #11181c;\n  margin: ${(p) => (p.margin ? \"0 0 24px\" : \"0\")};\n  overflow-wrap: anywhere;\n`;\n\nconst Tabs = styled.div`\n  display: flex;\n  flex-wrap: wrap; /* Para manejar m\u00faltiples botones en pantallas peque\u00f1as */\n  border-bottom: 1px solid #eceef0;\n  overflow: auto;\n  scroll-behavior: smooth;\n  align-items: center;\n\n  @media (max-width: 1200px) {\n    background: #f8f9fa;\n    border-top: 1px solid #eceef0;\n    margin: 0 -12px 48px;\ne\n    > * {\n      flex: 1;\n    }\n  }\n`;\n\nconst TabsButton = styled.a`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  font-weight: 600;\n  font-size: 22px;\n  padding: 0 12px;\n  position: relative;\n  color: ${(p) => (p.selected ? \"#11181C\" : \"#ffffff\")};\n  background: none;\n  border: none;\n  outline: none;\n  text-align: center;\n  text-decoration: none !important;\n\n  &:hover {\n    color: #5EBDD4;\n  }\n\n  &::after {\n    content: \"\";\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: #59e692;\n  }\n`;\n\nif (!cssFont) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n      font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n      ${css}\n    `,\n  });\n}\nconst Theme = state.theme;\n\n// OUTPUT UI\n\nconst getSender = () => {\n  return !state.sender\n    ? \"\"\n    : state.sender.substring(0, 6) +\n        \"...\" +\n        state.sender.substring(state.sender.length - 4, state.sender.length);\n};\n\n// subida de imagen\n\nState.init({ img: null });\n\nconst uploadFileUpdateState = (body) => {\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body,\n  }).then((res) => {\n    const cid = res.body.cid;\n    State.update({ img: { cid } });\n  });\n};\n\nconst filesOnChange = (files) => {\n  if (files) {\n    State.update({ img: { uploading: true, cid: null } });\n    uploadFileUpdateState(files[0]);\n  }\n};\n\nconst handleFormSubmit = (e) => {\n  e.preventDefault();\n};\n\nconst handleInputChange = (e) => {\n  const { name, value } = e.target;\n  setFormData({\n    ...formData,\n    [name]: value,\n  });\n};\n\nconst sendTransactionToSmartContract = async (\n  name,\n  title,\n  description,\n  imageCID\n) => {\n  const keyPair = nearAPI.KeyPair.fromString(\"YOUR_PRIVATE_KEY\"); // Reemplaza con tu clave privada\n\n  const near = await nearAPI.connect({\n    deps: { keyStore: new nearAPI.keyStores.InMemoryKeyStore() },\n    nodeUrl: \"https://rpc.near.org\",\n    networkId: \"maiinet\",\n  });\n\n  const account = await near.account(\"sazonmx.near\"); // Reemplaza con tu ID de cuenta\n\n  const contract = new nearAPI.Contract(account, \"CONTRACT_ID\", {\n    viewMethods: [\"VIEW_METHODS\"], // Lista de m\u00e9todos de consulta si los hay\n    changeMethods: [\"CHANGE_METHODS\"], // Lista de m\u00e9todos de cambio si los hay\n  });\n\n  try {\n    await contract.METHOD_NAME(\n      {\n        name,\n        title,\n        description,\n        imageCID,\n      },\n      300000000000000,\n      nearAPI.utils.format.parseNearAmount(\"0.1\")\n    );\n  } catch (error) {\n    console.error(\"Error al enviar la transacci\u00f3n:\", error);\n  }\n};\n\nreturn (\n  <Theme>\n    <div\n      className=\"container-fluid py-4\"\n      style={{ backgroundColor: \"#9972ad\" }}\n    >\n      <Tabs>\n        <LogoImage\n          src=\"https://pbs.twimg.com/profile_images/1714387582786654208/7lKexrWK_400x400.jpg\"\n          alt=\"Company Logo\"\n        />\n        <TabsButton\n          href={`https://near.social/e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf/widget/subirreceta`}\n          selected={state.selectedTab === \"home\"}\n        >\n          Inicio\n        </TabsButton>\n\n        <TabsButton href={`#`} selected={state.selectedTab === \"how\"}>\n          \u00bfQuienes somos?\n        </TabsButton>\n\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\n          Desayuno\n        </TabsButton>\n        <TabsButton\n          href={`https://near.social/e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf/widget/galeriaconimg`}\n          selected={state.selectedTab === \"tokens\"}\n        >\n          Comidas\n        </TabsButton>\n\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\n          Cenas\n        </TabsButton>\n\n        <TabsButton href={`#`} selected={state.selectedTab === \"tokens\"}>\n          Reposter\u00eda\n        </TabsButton>\n\n        <TabsButton href={`#`} selected={state.selectedTab === \"benefits\"}>\n          Sube tu receta\n        </TabsButton>\n\n        <TabsButton\n          href={`https://near.social/e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf/widget/subirreceta`}\n          selected={state.selectedTab === \"Supporters\"}\n        >\n          Suscripci\u00f3n\n        </TabsButton>\n      </Tabs>\n\n      <div className=\"container-fluid py-4\">\n        <LogoImage2\n          src=\"https://pbs.twimg.com/profile_banners/1712868201384804352/1697215404/1500x500\"\n          alt=\"Imagen de fondo\"\n          width=\"120px\"\n        />\n      </div>\n      <TabsButton>\n        {!!state.sender ? (\n          <button\n            className=\"\"\n            onClick={() => submitEthers(state.strEther, state.sender)}\n          >\n            <span></span>\n          </button>\n        ) : (\n          <Web3Connect className=\"\" connectLabel=\"Connect Wallet\" />\n        )}\n      </TabsButton>\n      <h1> Comparte tu receta</h1>\n      <div\n        className=\"container\"\n        style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\n      >\n        <div\n          className=\"container\"\n          style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\n        >\n          <div\n            id=\"comparte\"\n            style={{\n              padding: \"20px\",\n              background: \"#ffffff\",\n              borderRadius: \"8px\",\n            }}\n          >\n            <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\n              Comparte tu receta\n            </h2>\n\n            <div style={{ marginBottom: \"15px\" }}>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"name\"\n                placeholder=\"Nombre\"\n                value={formData.name}\n                onChange={handleInputChange}\n              />\n            </div>\n\n            <div style={{ marginBottom: \"15px\" }}>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"title\"\n                placeholder=\"T\u00edtulo receta\"\n                value={formData.title}\n                onChange={handleInputChange}\n              />\n            </div>\n\n            <div style={{ marginBottom: \"15px\" }}>\n              <textarea\n                className=\"form-control\"\n                name=\"description\"\n                placeholder=\"Descripci\u00f3n de la receta\"\n                rows=\"4\"\n              ></textarea>\n            </div>\n\n            <div style={{ marginBottom: \"20px\" }}>\n              <div className=\"d-inline-block\">\n                <input type=\"file\" name=\"image\" />\n              </div>\n            </div>\n\n            <button type=\"submit\" className=\"btn btn-primary btn-block\">\n              Enviar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    {/* fin */}\n  </Theme>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/e6334d18ab20c3ca9bfda37ae34458c44832ad3faced187912fb07f382b05aaf/widget/subirreceta", "fact_widget_deployments_id": "3ea144a6f934c99f4e61c6f11ae251b9", "inserted_timestamp": "2023-10-20T10:41:28.946Z", "modified_timestamp": "2023-10-20T10:41:28.946Z", "__row_index": 2}