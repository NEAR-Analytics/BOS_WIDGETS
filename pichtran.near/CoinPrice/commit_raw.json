{"tx_hash": "97Eugrnno2UL5KmkrByPFAnwtVVuSz4ECdy7ej2sNNPi", "action_id_social": "2uNuNeEnE1qM9NH79rb4goFMDBBxbDdXU29yTcJLcAZg-0-widget", "block_id": 107221547, "block_timestamp": "2023-12-05T17:39:24.924Z", "signer_id": "pichtran.near", "widget_name": "CoinPrice", "source_code": "const DATAPrice = (props) => {\n  const keys = props.keys ?? [\n    \"wrap.near\",\n    \"aurora\",\n    \"2260fac5e5542a773aa44fbcfedf7c193bc2c599.factory.bridge.near\",\n    \"aaaaaa20d9e0e2461697782ef11675f668207961.factory.bridge.near\",\n    \"linear-protocol.near\",\n    \"4691937a7508860f876c9c0a2a617e7d9e945d4b.factory.bridge.near\",\n    \"17208628f84f5d6ad33f0da3bbbeb27ffcb398eac501a31bd6ad2011e36133a1\",\n  ];\n\n  const tokenColors = [\n    \"green\",\n    \"black\",\n    \"orange\",\n    \"red\",\n    \"green\",\n    \"black\",\n    \"blue\",\n  ];\n\n  const tokenImg = [\n    \"https://ipfs.near.social/ipfs/bafkreigy3uyyaianaeohczuys2bvwvfm6c6wtahbn5mwl6do5bk4w2fnni\",\n    \"https://ipfs.near.social/ipfs/bafkreibddakqw35thdstr7vb2zohixpjth4ff26xciu2otxftjbifhnfpa\",\n    \"https://ipfs.near.social/ipfs/bafkreihyafuo35nm3mifpmzsc546vco5bkj243mti3wmgwuzx663rkv7dy\",\n    \"https://ipfs.near.social/ipfs/bafkreihc7fmdrxhzfozf6es5tujsvyqtgfq4nroctgptufmfyzkhrcuham\",\n    \"https://ipfs.near.social/ipfs/bafkreiht5axwgfoptyf2b7o2omyfvdgxwsdtxg4rie3ivknj752ryjyqqy\",\n    \"https://ipfs.near.social/ipfs/bafkreidggzeg2jomuhw5o7b2vqwf4jsgk6fof5dzgcep6kxpqnt6x45i3i\",\n    \"https://ipfs.near.social/ipfs/bafkreihqkrr325occ7g7opo7csdhd7mp2nusfiqit4saa26agwyuc6754a\",\n  ];\n\n  const [prices, setPrices] = useState([]);\n\n  const fetchPrices = () => {\n    let priceData = Near.view(\"priceoracle.near\", \"get_price_data\", {});\n    let assetsData = Near.view(\"oracle-prices.near\", \"get_config\", { keys });\n\n    let priceDataPrepared = [];\n    priceData.prices.map(\n      (data) => (priceDataPrepared[data.asset_id] = data.price)\n    );\n  \n    let newPrices = assetsData.map((asset, index) => {\n      let assetAccountId = asset[0];\n      let assetName = asset[1].token_name;\n      let assetDecimals = asset[1].decimals;\n\n      let assetPrice = priceDataPrepared[assetAccountId];\n      let price = new Big(assetPrice.multiplier).div(\n        new Big(10).pow(assetPrice.decimals - assetDecimals)\n      );\n\n      return (\n        <div\n          class=\"col\"\n          key={assetAccountId}\n          style={{ color: tokenColors[index] }}\n        >\n          <img\n            src={tokenImg[index]}\n            alt={assetName}\n            style={{ width: \"50px\", height: \"50px\", borderRadius: \"50%\" }}\n          />\n          <div>{assetName}</div>\n          <div>${price.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\")}</div>\n        </div>\n      );\n    });\n\n    setPrices(newPrices);\n  };\n\n  useEffect(() => {\n    fetchPrices();\n\n    const intervalId = setInterval(fetchPrices, 10000);\n\n    return () => clearInterval(intervalId);\n  }, []);\n\n  const H5 = styled.h5`\n    font-family: Century Gothic, CenturyGothic, AppleGothic, sans-serif;\n    color: black;\n    \n  `;\n\n  const CoinPrices = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n\n    .col {\n      flex: 1;\n      padding: 10px;\n      text-align: center;\n      border: 3px solid black;\n      border-radius: 5px;\n      margin: 5px; /* Added margin for better spacing */\n    }\n\n    h5 {\n      font-family: Century Gothic, CenturyGothic, AppleGothic, sans-serif;\n      color: black;\n      text-align: center;\n      margin:10px;\n    }\n\n    @media (max-width: 768px) {\n      /* Adjust styles for smaller screens */\n      .col {\n        flex: 1;\n        margin: 5px;\n        width: 100%; /* Full width on smaller screens */\n      }\n    }\n  `;\n\n  return (\n    <CoinPrices class=\"container\">\n      <H5>CoinPrice</H5>\n      <div\n        class=\"row\"\n        style={{\n          border: \"5px solid black\",\n          borderRadius: \"5px\",\n          padding: \"10px\",\n        }}\n      >\n        {prices}\n      </div>\n    </CoinPrices>\n  );\n};\nreturn <DATAPrice />;\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/pichtran.near/widget/CoinPrice", "fact_widget_deployments_id": "152e3dbbfa2211b659774eb6f177ad28", "inserted_timestamp": "2023-12-05T19:38:51.730Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 8}