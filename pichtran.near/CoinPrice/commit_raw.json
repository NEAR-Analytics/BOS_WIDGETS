{"tx_hash": "9bYr7gGLsjLuhpXs2XTejwUwcyeMhUeCHsw31RhTH5QC", "action_id_social": "GoTHBYnRQWxLKncLbvCSxZuQV219w7WkG6KAMZLkfrVm-0-widget", "block_id": 107221622, "block_timestamp": "2023-12-05T17:41:04.486Z", "signer_id": "pichtran.near", "widget_name": "CoinPrice", "source_code": "let keys = props.keys ?? [\r\n  \"wrap.near\",\r\n  \"aurora\",\r\n  \"2260fac5e5542a773aa44fbcfedf7c193bc2c599.factory.bridge.near\",\r\n];\r\n\r\nlet price_data = Near.view(\"priceoracle.near\", \"get_price_data\", {});\r\nlet assets = Near.view(\"oracle-prices.near\", \"get_config\", { keys });\r\n\r\nlet price_data_prepared = [];\r\nprice_data.prices.map(\r\n  (data) => (price_data_prepared[data.asset_id] = data.price)\r\n);\r\nconsole.log(priceData);\r\n\r\nlet prices = assets.map((asset) => {\r\n  let asset_account_id = asset[0];\r\n  let asset_name = asset[1].token_name;\r\n  let asset_decimals = asset[1].decimals;\r\n\r\n  let asset_price = price_data_prepared[asset_account_id];\r\n  let price = new Big(asset_price.multiplier).div(\r\n    new Big(10).pow(asset_price.decimals - asset_decimals)\r\n  );\r\n  return (\r\n    <div class=\"col\">\r\n      {asset_name}: ${price.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\")}\r\n    </div>\r\n  );\r\n});\r\nconst H5 = styled.h5`\r\nfont-family:  Century Gothic, CenturyGothic, AppleGothic, sans-serif.;\r\ncolor:red;\r\n\r\n`;\r\nreturn (\r\n  <div class=\"container\">\r\n    <H5>CoinPrice</H5>\r\n    <div class=\"row\">{prices}</div>\r\n  </div>\r\n);\r\n", "metadata": {"image": {"ipfs_cid": "bafkreievjdzxzgpxdc6anqsafq7pbyh43ostcuthinqa3pje5jrupmh2xa"}, "linktree": {"website": "https://near.social/pichtran.near/widget/CoinPrice"}, "name": "CoinPrice", "tags": {"app": "", "bos": "", "coinprice": "", "oracle": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/pichtran.near/widget/CoinPrice", "fact_widget_deployments_id": "04e7acae6d9a4020c2a9d4b965df9cc5", "inserted_timestamp": "2023-12-05T19:40:02.069Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 3}