{"tx_hash": "GpEsd1zLbpZ6rSvAwmYudr4KZLQJR6bj5DegbGGFzCzP", "action_id_social": "BqrVdmsMm5LmhmrFqS8rrd7h1XEZCDJ78EwTsQVy1Fjq-0-widget", "block_id": 96938464, "block_timestamp": "2023-07-20T20:08:32.276Z", "signer_id": "sayalot.near", "widget_name": "SayALot_FasterArticleEditInputs", "source_code": "//======= Get props =======\r\nconst defaultStateUpdate = (obj) => State.update(obj);\r\nconst stateUpdate = props.stateUpdate ?? defaultStateUpdate;\r\n\r\nconst saveHandler = props.saveHandler;\r\nconst isSaving = props.isSaving;\r\nconst articleTags = props.articleTags ?? [];\r\nconst textAreaInitialText = props.firstTextareaText ?? \"\";\r\nconst isDebug = props.isDebug;\r\n\r\n//======= Initialisation =======\r\n\r\nState.init({ textAreaText: textAreaInitialText });\r\nconst authorForWidget = \"sayalot.near\";\r\n// const authorForWidget =\r\n// \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\r\n\r\n//======= Functions =======\r\n\r\nconst getTagObjectfromArray = (tagArray) => {\r\n  if (!tagArray) return {};\r\n  return tagArray.reduce((acc, value) => ({ ...acc, [value]: \"\" }), {});\r\n};\r\n\r\n//======= Render =======\r\nreturn (\r\n  <>\r\n    {/* === BUTTON - EDIT ARTICLE === */}\r\n    <div className=\"d-flex justify-content-center w-100\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-outline-success mx-1\"\r\n        style={{ minWidth: \"120px\" }}\r\n        onClick={saveHandler}\r\n        onMouseEnter={() =>\r\n          stateUpdate({ note: state.textAreaText, tags: state.tags })\r\n        }\r\n      >\r\n        {isSaving && (\r\n          <div\r\n            className=\"spinner-border text-secondary\"\r\n            style={{ height: \"1rem\", width: \"1rem\" }}\r\n            role=\"status\"\r\n          >\r\n            <span className=\"sr-only\" title=\"Loading...\"></span>\r\n          </div>\r\n        )}\r\n        Save Article\r\n      </button>\r\n\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-outline-danger mx-1\"\r\n        style={{ minWidth: \"120px\" }}\r\n        onClick={() => {\r\n          stateUpdate({\r\n            editArticle: false,\r\n          });\r\n        }}\r\n      >\r\n        Close\r\n      </button>\r\n    </div>\r\n    <hr />\r\n    <div className=\"d-flex gap-2\" style={{ minHeight: \"300px\" }}>\r\n      <div className=\"w-50\">\r\n        <Widget\r\n          src=\"mob.near/widget/MarkdownEditorIframe\"\r\n          props={{\r\n            initialText: state.textAreaText,\r\n            onChange: (textAreaText) => State.update({ textAreaText }),\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"w-50\">\r\n        <Widget\r\n          src={`${authorForWidget}/widget/TagsEditor`}\r\n          props={{\r\n            isDebug,\r\n            initialTagsObject: getTagObjectfromArray(articleTags),\r\n            placeholder: \"Input tags\",\r\n            setTagsObject: (tags) => {\r\n              State.update({ tags });\r\n            },\r\n          }}\r\n        />\r\n\r\n        <Widget\r\n          src=\"mob.near/widget/SocialMarkdown\"\r\n          props={{\r\n            text: state.textAreaText,\r\n            onHashtag: (hashtag) => (\r\n              <span\r\n                key={hashtag}\r\n                className=\"d-inline-flex\"\r\n                style={{ fontWeight: 500 }}\r\n              >\r\n                <a\r\n                  href={\r\n                    isDebug\r\n                      ? `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}&isDebug=true`\r\n                      : `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}`\r\n                  }\r\n                >\r\n                  #{hashtag}\r\n                </a>\r\n              </span>\r\n            ),\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sayalot.near/widget/SayALot_FasterArticleEditInputs", "fact_widget_deployments_id": "b5f78e74f76e6341494dd14411a4a285", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}