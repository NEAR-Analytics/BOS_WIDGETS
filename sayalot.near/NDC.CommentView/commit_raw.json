{"tx_hash": "ExZJC2SRi9sM4J3k262NnJVQDG3LktK3qUL6ocvFeAwT", "action_id_social": "kbj9CfKLeLaVfejJiqGexG4xTdQHrdkPSgUoMXPCvut-0-widget", "block_id": 108491177, "block_timestamp": "2023-12-21T16:22:21.809Z", "signer_id": "sayalot.near", "widget_name": "NDC.CommentView", "source_code": "// NDC.CommentView\r\n\r\nconst {\r\n  widgets,\r\n  data,\r\n  isTest,\r\n  authorForWidget,\r\n  isReply,\r\n  orginalCommentData,\r\n  canLoggedUserCreateComment,\r\n  articleSbts,\r\n  callLibs,\r\n  baseActions,\r\n  sharedCommentId,\r\n  articleToRenderData,\r\n} = props;\r\n\r\nState.init({\r\n  showModal: false,\r\n  hasReply: false,\r\n});\r\n\r\nconst CommentCard = styled.div`\r\n  margin-left: ${isReply ? \"2rem\" : \"0\"};\r\n  display: flex;\r\n  padding: 14px 16px;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  border-radius: \"10px\"};\r\n  background: ${\r\n    sharedCommentId === data.originalComment.value.comment.commentId\r\n      ? \"rgba(194, 205, 255, 0.8)\"\r\n      : \"#fff\"\r\n  };\r\n  width: 100%;\r\n`;\r\n\r\nconst CommentCardHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 8px;\r\n`;\r\n\r\nconst CommentUserContent = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n`;\r\n\r\nconst ProfileImageComment = styled.img`\r\n  width: 20px;\r\n  height: 20px;\r\n  flex-shrink: 0;\r\n  border-radius: 20px;\r\n`;\r\n\r\nconst CommentUser = styled.p`\r\n  color: #000;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  line-height: 120%;\r\n  margin: 0px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst ReplyCounterDiv = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n`;\r\n\r\nconst ReplyIconPurple = styled.img`\r\n  width: 14px;\r\n  height: 14px;\r\n`;\r\n\r\nconst ReplyCounterText = styled.p`\r\n  color: #000;\r\n  font-size: 10px;\r\n  font-weight: 500;\r\n  margin: 0px;\r\n`;\r\n\r\nconst CommentCardContent = styled.p`\r\n  color: #585b5c;\r\n  font-size: 12px;\r\n  line-height: 18px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0px;\r\n`;\r\n\r\nconst CommentCardLowerSection = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 4px;\r\n  width: 100%;\r\n`;\r\n\r\nconst TimestampCommentDiv = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  flex: 1 0 0;\r\n`;\r\n\r\nconst TimestampIconComment = styled.img`\r\n  width: 12px;\r\n  height: 12px;\r\n`;\r\n\r\nconst TimestampTextComment = styled.p`\r\n  color: #000;\r\n  font-size: 10px;\r\n  font-weight: 300;\r\n  margin: 0px;\r\n`;\r\n\r\nconst DeleteCommentButton = styled.button`\r\n  display: flex;\r\n  width: 28px;\r\n  padding: 2px 12px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 6px;\r\n  align-self: stretch;\r\n  border-radius: 4px;\r\n  border: 1px solid #c23f38;\r\n  background: #f1d6d5;\r\n`;\r\n\r\nconst DeleteCommentIcon = styled.img`\r\n  width: 14px;\r\n  height: 14px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst ShareCommentButton = styled.button`\r\n  display: flex;\r\n  width: 28px;\r\n  height: 28px;\r\n  padding: 2px 12px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 6px;\r\n  border-radius: 4px;\r\n  border: solid 1px transparent;\r\n  background-image: linear-gradient(white, white),\r\n    radial-gradient(circle at top left, #9333ea 0%, #4f46e5 100%);\r\n  background-origin: border-box;\r\n  background-clip: padding-box, border-box;\r\n`;\r\n\r\nconst ShareCommentIcon = styled.img`\r\n  width: 14px;\r\n  height: 14px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst ReplyCommentButtonDisabled = styled.div`\r\n  display: flex;\r\n  padding: 2px 12px;\r\n  cursor: not-allowed;\r\n  background: rgb(195, 202, 206);\r\n  color: rgb(130, 134, 136);\r\n  border: 0px;\r\n  align-items: center;\r\n  gap: 6px;\r\n  align-self: stretch;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst ReplyCommentButtonActive = styled.div`\r\n  cursor: pointer;\r\n  display: flex;\r\n  padding: 2px 12px;\r\n  align-items: center;\r\n  gap: 6px;\r\n  align-self: stretch;\r\n  border-radius: 4px;\r\n  background: var(--buttons-yellow-default, #ffd50d);\r\n`;\r\n\r\nconst ReplyCommentText = styled.p`\r\n  color: var(--primary-black, #000);\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  line-height: 24px;\r\n  margin: 0px;\r\n`;\r\n\r\nconst CommentReplySeparator = styled.hr`\r\n  height: 0px;\r\n  margin: 16px 0 16px 0;\r\n  border: 1px solid rgba(208, 214, 217, 1);\r\n`;\r\n\r\nconst ReplyContainer = styled.div`\r\n  display: flex;\r\n  width: 260px;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  margin: 0 0 0 35px;\r\n`;\r\n\r\nconst ReplyHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  align-self: stretch;\r\n`;\r\n\r\nconst ReplyContent = styled.p`\r\n  color: #828688;\r\n  font-size: 12px;\r\n  line-height: 120%;\r\n  margin: 0px;\r\n`;\r\n\r\nconst ReplyLowerSection = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 4px;\r\n`;\r\n\r\nconst ReplyButtonSection = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  gap: 4px;\r\n`;\r\n\r\nconst DeleteReplyButton = styled.button`\r\n  display: flex;\r\n  padding: 2px 12px;\r\n  align-items: center;\r\n  gap: 6px;\r\n  align-self: stretch;\r\n  border-radius: 4px;\r\n  border: 1px solid #c23f38;\r\n  background: #f1d6d5;\r\n`;\r\n\r\nconst DeleteReplyText = styled.p`\r\n  color: #c23f38;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  line-height: 24px;\r\n  margin: 0px;\r\n`;\r\n\r\nconst AnswerContainer = styled.div`\r\n  width: 96%;;\r\n`;\r\n\r\nfunction closeModal() {\r\n  State.update({ showModal: false });\r\n}\r\n\r\nreturn (\r\n  <>\r\n    <CommentCard id={data.originalComment.value.comment.commentId}>\r\n      <CommentCardHeader>\r\n        <CommentUserContent>\r\n          <Widget\r\n            src={widgets.newStyledComponents.Element.User}\r\n            props={{\r\n              accountId: data.originalComment.accountId,\r\n              options: {\r\n                showHumanBadge: true,\r\n                showImage: true,\r\n                showSocialName: true,\r\n                shortenLength: 15,\r\n                size: \"md\",\r\n              },\r\n            }}\r\n          />\r\n        </CommentUserContent>\r\n      </CommentCardHeader>\r\n      <CommentCardContent>\r\n        <Widget\r\n          src={widgets.socialMarkdown}\r\n          props={{ text: data.originalComment.value.comment.text }}\r\n        />\r\n      </CommentCardContent>\r\n      <CommentCardLowerSection>\r\n        <TimestampCommentDiv>\r\n          <i className=\"bi bi-clock\" />\r\n          <TimestampTextComment>\r\n            {new Date(\r\n              data.originalComment.value.comment.timestamp\r\n            ).toDateString()}\r\n          </TimestampTextComment>\r\n        </TimestampCommentDiv>\r\n        <div>\r\n          {state.showModal && (\r\n            <Widget\r\n              src={widgets.addComment}\r\n              props={{\r\n                article: articleToRenderData,\r\n                originalComment: orginalCommentData ?? data,\r\n                widgets,\r\n                isTest,\r\n                replyingTo: data.originalComment.accountId,\r\n                placement: \"bottom\",\r\n                onCloseModal: closeModal,\r\n                callLibs,\r\n                baseActions,\r\n              }}\r\n            />\r\n          )}\r\n          {articleSbts.length > 0 && (\r\n            <>\r\n              <Widget\r\n                src={widgets.newStyledComponents.Input.Button}\r\n                props={{\r\n                  children: (\r\n                    <div className=\"d-flex align-items-center justify-content-center\">\r\n                      <span className=\"mx-1\">Reply</span>\r\n                      <i className=\"bi bi bi-reply\"></i>\r\n                    </div>\r\n                  ),\r\n                  disabled: !canLoggedUserCreateComment,\r\n                  size: \"sm\",\r\n                  className: \"info outline\",\r\n                  onClick: () => {\r\n                    canLoggedUserCreateComment &&\r\n                      State.update({ showModal: true });\r\n                  },\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n        <Widget\r\n          src={widgets.reactions}\r\n          props={{\r\n            widgets,\r\n            isTest,\r\n            authorForWidget,\r\n            elementReactedId: data.originalComment.value.comment.commentId,\r\n            disabled: !canLoggedUserCreateComment,\r\n            callLibs,\r\n            baseActions,\r\n            sbtsNames: articleSbts,\r\n          }}\r\n        />\r\n      </CommentCardLowerSection>\r\n    </CommentCard>\r\n    {!isReply && (\r\n      <>\r\n        {data.answers.length > 0 && (\r\n          <i className=\"bi bi-arrow-return-right\"></i>\r\n        )}\r\n        {data.answers.map((answer) => {\r\n          return (\r\n            <AnswerContainer>\r\n              <Widget\r\n                src={widgets.commentView}\r\n                props={{\r\n                  widgets,\r\n                  data: { originalComment: answer },\r\n                  orginalCommentData: data,\r\n                  isTest,\r\n                  authorForWidget,\r\n                  isReply: true,\r\n                  canLoggedUserCreateComment,\r\n                  articleSbts,\r\n                  callLibs,\r\n                  baseActions,\r\n                  sharedCommentId,\r\n                  articleToRenderData,\r\n                }}\r\n              />\r\n            </AnswerContainer>\r\n          );\r\n        })}\r\n      </>\r\n    )}\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sayalot.near/widget/NDC.CommentView", "fact_widget_deployments_id": "7cd3b467c1d925c4d3b875f8b0a7fa59", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 8}