{"tx_hash": "35L7RhpQXwkqng9tHvgTLkptk6PzdqwArv1suZ4YoAy3", "action_id_social": "GobY2QcDRDUpvvUy5Wu4ypcMov4wfBL1egPJheHHCUCT-0-widget", "block_id": 117008240, "block_timestamp": "2024-04-17T02:45:27.724Z", "signer_id": "blueprints.near", "widget_name": "StarredApplications", "source_code": "const accountId = props.accountId ?? context.accountId;\nconst stars = Social.getr(`${accountId}/graph/star`, \"final\", {\n  withBlockHeight: true,\n});\nconst StorageKey = \"order\";\nconst order = Storage.privateGet(StorageKey);\nconst apps = useMemo(() => {\n  if (stars === null || order === null) {\n    return [];\n  }\n  const starredApps = new Map();\n  const path = [];\n  const buildSrc = (node) => {\n    if (node.hasOwnProperty(\"\")) {\n      starredApps.set(path.join(\"/\"), node[\":block\"]);\n    }\n    Object.entries(node).forEach(([key, value]) => {\n      if (typeof value === \"object\") {\n        path.push(key);\n        buildSrc(value);\n        path.pop();\n      }\n    });\n  };\n  buildSrc(stars ?? {}, [], starredApps);\n  let apps = [...starredApps.entries()];\n  apps.sort((a, b) => b[1] - a[1]);\n  apps = apps.map((a) => a[0]);\n  apps.sort((a, b) => (order?.[a] || 0) - (order?.[b] || 0));\n  Storage.privateSet(\n    StorageKey,\n    Object.fromEntries(apps.map((a, i) => [a, i + 1]))\n  );\n  return apps;\n}, [stars, order]);\nconst renderItem = (widgetSrc) => {\n  const [accountId, _, widgetName] = widgetSrc.split(\"/\");\n  return (\n    <a\n      href={`https://near.social/${widgetSrc}`}\n      target=\"_blank\"\n      className=\"text-decoration-none position-relative\"\n      key={widgetSrc}\n      onClick={() => {\n        order[widgetSrc] = -1;\n        Storage.privateSet(StorageKey, order);\n      }}\n    >\n      <Widget\n        loading={\n          <div\n            className=\"placeholder d-inline-block rounded-3\"\n            style={{ width: \"3em\", height: \"3em\" }}\n          />\n        }\n        src=\"mob.near/widget/WidgetImage\"\n        props={{\n          tooltip: true,\n          accountId,\n          widgetName,\n        }}\n      />\n    </a>\n  );\n};\nconst Container = styled.div`\n  img {\n    box-shadow: 0 4px 6px -1px var(--shadow), 0 2px 4px -2px var(--shadow) !important;\n  }\n`;\nreturn apps.length > 0 ? (\n  <>\n    <Container className=\"d-flex flex-wrap gap-2 placeholder-glow\">\n      {apps.slice(0, props.limit ? parseInt(props.limit) : 24).map(renderItem)}\n    </Container>\n  </>\n) : (\n  \"No Starred Applications\"\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/blueprints.near/widget/StarredApplications", "fact_widget_deployments_id": "e9ce09a680ea338e7338f685c69251e4", "inserted_timestamp": "2024-04-17T04:38:04.126Z", "modified_timestamp": "2024-04-17T04:38:04.126Z", "__row_index": 0}