{"tx_hash": "HHJ8kvwKokuVZNHZQQf54nMdAHnziNDA7AvpF4By48aq", "action_id_social": "BapStyLRhZ3AdUZaG52fGxgphG9SjMEAuM5HfpRG43D3-0-widget", "block_id": 112361864, "block_timestamp": "2024-02-08T05:57:39.919Z", "signer_id": "memiko.near", "widget_name": "mem.Components.OpenPack", "source_code": "const { contractName, isWhitelisted, startDate } = props;\n\nconst OneNear = Big(10).pow(24);\nconst TGas = Big(10).pow(12);\n\nconst [boxAmount, setBoxAmount] = useState(1);\nconst [canMint, setCanMint] = useState(false);\n\nconst repeatInterval = setInterval(() => {\n  setCanMint(startDate <= Date.now());\n  clearInterval(repeatInterval);\n}, 1000);\n\nconst handleMint = () => {\n  if (handleError() || !context.accountId || !canMint) return;\n\n  const data = {\n    contractName,\n    methodName: \"token_mint\",\n    deposit: OneNear.mul(0.25),\n    gas: TGas.mul(275),\n  };\n\n  Near.call(Array(parseInt(boxAmount)).fill(data));\n};\n\nconst handleError = () => {\n  let err = null;\n\n  if (\n    !boxAmount ||\n    isNaN(boxAmount) ||\n    parseInt(boxAmount) < 1 ||\n    parseInt(boxAmount) > 100\n  )\n    err = \"Value should be > 0 and <= 100\";\n\n  return err;\n};\n\nconst MintSection = styled.div`\n  .wrapper {\n    flex-direction: row;\n  }\n\n  .open-btn {\n    background-color: #66a0ff;\n    border-top-right-radius: 12px;\n    border-bottom-right-radius: 12px;\n    font-weight: 600;\n    transition: all 0.2s ease-in-out;\n    color: #fff;\n\n    &:hover {\n      background-color: #5994f5;\n    }\n\n    &:disabled,\n    &.disabled {\n      border: 4px solid #888888;\n      background-color: #999999;\n      opacity: 0.5;\n\n      &:hover {\n        background-color: #999999;\n      }\n    }\n  }\n\n  .open-select {\n    border: 4px solid #66a0ff;\n    border-top-left-radius: 12px;\n    border-bottom-left-radius: 12px;\n    font-weight: 600;\n    color: #000;\n    outline: none;\n\n    &:disabled,\n    &.disabled {\n      border: 4px solid #888888;\n      background-color: #dddddd;\n      opacity: 0.5;\n    }\n  }\n\n  .text-sm {\n    font-size: 0.9rem;\n  }\n`;\n\nreturn (\n  <MintSection className=\"d-flex gap-3 flex-column align-items-center\">\n    <h2>MEM Token Mint</h2>\n    <div\n      className={\"mt-0 mb-3 text-sm text-center\"}\n      style={{ width: \"60%\", margin: \"auto\" }}\n    >\n      Open a pack to randomly receive MEM tokens and possibly one of NEAR\n      memecoins: NEKO, LONK, BLACKDRAGON, LOL, or Shitzu. Join the whitelist for\n      double MEM rewards.\n    </div>\n\n    <div className={\"text-center\"}>\n      <Widget\n        src=\"memiko.near/widget/mem.Components.Countdown\"\n        props={{ startDate: startDate }}\n      />\n    </div>\n\n    {context.accountId ? (\n      <>\n        <div className=\"wrapper d-flex flex-row\">\n          <select\n            value={boxAmount}\n            className={\"px-3 py-2 open-select\"}\n            disabled={!context.accountId || !canMint}\n            onInput={(e) => setBoxAmount(e.target.value)}\n          >\n            <option value=\"1\">1</option>\n            <option value=\"3\">3</option>\n            <option value=\"5\">5</option>\n            <option value=\"10\">10</option>\n            <option value=\"25\">25</option>\n            <option value=\"50\">50</option>\n            <option value=\"75\">75</option>\n            <option value=\"100\">100</option>\n          </select>\n          <button\n            className={`button px-4 py-3 border-0 open-btn ${\n              !canMint || !context.accountId ? \"disabled\" : \"\"\n            }`}\n            onClick={handleMint}\n          >\n            <span>Open MEM Pack{boxAmount > 1 ? \"s\" : \"\"}</span>\n          </button>\n        </div>\n\n        {isWhitelisted ? (\n          <div style={{ color: \"#279b30\", fontSize: \"1.5rem\" }}>\n            \ud83c\udf89 You are WHITELISTED! \ud83c\udf89\n          </div>\n        ) : (\n          <div className={\"text-center mb-1 mt-3\"}>\n            <p\n              className={\"mb-0 pb-0\"}\n              style={{ color: \"#bf0808\", fontSize: \"1.5rem\" }}\n            >\n              \ud83d\ude22 Sorry, you are NOT WHITELISTED \ud83d\ude22\n            </p>\n            <p\n              className={\"mt-0 mb-0 pt-0 text-center\"}\n              style={{ width: \"72%\", margin: \"auto\", color: \"#bf0808\" }}\n            >\n              Open the MEM Packs and share results on Twitter with tag\n              #memAirdropJoin to join MEM Airdrop event.\n            </p>\n          </div>\n        )}\n      </>\n    ) : (\n      <div\n        className={\"text-center\"}\n        style={{ color: \"#bf0808\", fontSize: \"1.5rem\" }}\n      >\n        Please Sign In with your NEAR account to join!\n      </div>\n    )}\n  </MintSection>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/memiko.near/widget/mem.Components.OpenPack", "fact_widget_deployments_id": "f17aaf9ac2457ff65ff1e9087a11a1e7", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}