{"tx_hash": "3bXwKWYTTXVsWoRmpyQKahKRkLKKe9bE1QRz3eWX1sJE", "action_id_social": "B33p6HnqmvqGrrRrVkBKkiX5dLqWrCbJJdDCcKJ5Ljvk-0-widget", "block_id": 110486768, "block_timestamp": "2024-01-15T18:24:19.765Z", "signer_id": "memelol.near", "widget_name": "lol.Pages.Puzzle", "source_code": "const { assets, content, contractName } = props;\nconst { format, Token } = VM.require(`memelol.near/widget/lol.Utils`);\nconst { Snow } = VM.require(`memelol.near/widget/lol.Components.Snow`);\nconst { Navigation } = VM.require(\n  `memelol.near/widget/lol.Components.Navigation`,\n);\nconst { Button } = VM.require(`memelol.near/widget/lol.Components.Button`);\n\nconst Container = styled.div`\n  width: 100%;\n  height: max-content;\n  overflow: hidden;\n`;\n\nconst Section = styled.div`\n  padding: 1rem 3rem;\n  border: 3px solid black;\n  border-radius: 20px;\n  width: 100%;\n  background: ${(props) => props.color};\n  justify-content: center;\n\n  &.banner-img {\n    border-radius: 20px;\n    width: 100%;\n    background-image: url(${assets.banner});\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center;\n  }\n\n  &.notbad-img {\n    border-radius: 20px;\n    width: 100%;\n    height: 100%;\n    background-image: url(${assets.notbad});\n    background-size: 200px 200px;\n    background-position: center;\n  }\n\n  .wrapper {\n    width: 100%;\n    flex-direction: row;\n\n    @media screen and (max-width: 786px) {\n      width: 100%;\n      flex-direction: column;\n    }\n\n    .mint-section {\n      box-shadow: 0px 20px 30px 0px rgba(0, 0, 0, 0.5);\n      width: 100%;\n      max-width: 600px;\n      background: rgb(255 255 255 / 90%);\n      display: flex;\n      flex-direction: column;\n      gap: 2rem;\n      align-items: center;\n      justify-content: center;\n      text-align: center;\n      padding: 2rem;\n      border: 3px solid black;\n      border-radius: 20px;\n      z-index: 2;\n\n      @media screen and (max-width: 786px) {\n        max-width: 100%;\n      }\n\n      &.my-puzzles {\n        max-width: 300px;\n        background: rgb(255 214 255 / 90%);\n\n        @media screen and (max-width: 786px) {\n          max-width: 100%;\n        }\n      }\n\n      .mint-rules {\n        display: flex;\n        flex-direction: column;\n        box-shadow: 0px 20px 30px 0px rgba(0, 0, 0, 0.2);\n        border: 3px solid black;\n        border-radius: 20px;\n        padding: 1.5rem;\n        gap: 0.1rem;\n        text-align: left;\n        background: rgb(148 182 255 / 30%);\n      }\n    }\n  }\n\n  .winners-list {\n    margin: 2rem 0;\n    width: 75%;\n    z-index: 2;\n\n    @media screen and (max-width: 786px) {\n      width: 100%;\n    }\n  }\n\n  .stat {\n    width: 25%;\n    margin: 0;\n    flex-direction: column;\n\n    @media screen and (max-width: 786px) {\n      flex-direction: row;\n      margin: 10px;\n      justify-content: space-between;\n      width: 100%;\n    }\n  }\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n  }\n`;\n\nconst Piece = styled.div`\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border: 3px solid #fff;\n  background-color: ${(p) => (p.filled ? \"transparent\" : \"#fff\")};\n  background-image: url(${(p) =>\n    p.filled\n      ? \"\"\n      : \"https://ipfs.near.social/ipfs/bafkreibvtnvcudgncx3dwx2hnh7xyhbddyagx7tewmrdrq5jcejz5kr7jm\"});\n  background-size: 40px;\n  background-repeat: no-repeat;\n  background-position: 28px;\n`;\n\nconst Overlay = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 18px;\n  padding: 3rem;\n  background-color: ${(props) => props.color};\n\n  @media screen and (max-width: 786px) {\n    padding: 2rem;\n  }\n`;\n\nconst Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 1rem;\n  padding: 25px;\n  background: #fff;\n  text-align: center;\n  border: 3px solid black;\n  border-radius: 20px;\n  box-shadow: 0px 20px 30px 0px rgba(0, 0, 0, 0.25);\n\n  h1 {\n    line-height: 1rem;\n  }\n\n  h3 {\n    width: 100px;\n  }\n\n  .puzzle-img {\n    width: 300px;\n    height: 300px;\n    border-radius: 20px;\n    background: url(${(p) => p.src});\n    background-repeat: no-repeat;\n    background-size: cover;\n  }\n`;\n\nconst PUZZLE_PIECES = 9;\nconst PUZZLE_ROWS = 3;\nconst PUZZLE_COLS = 3;\n\nconst [puzzles, setPuzzles] = useState({\n  puzzles: [],\n});\n\nconst fetchPuzzles = () => {\n  //const puzzles = Near.view(contractName, \"get_user_puzzles\");\n\n  setPuzzles([\n    [\"00\", \"01\", \"03\", \"08\"],\n    [\"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\"],\n    [\"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\"],\n    [],\n    [\"50\", \"52\", \"53\", \"58\"],\n    [],\n    [\"77\"],\n    [],\n    [\"80\", \"82\"],\n  ]);\n};\n\nconst images = [\n  \"https://upload.wikimedia.org/wikipedia/ru/thumb/7/78/Trollface.svg/1280px-Trollface.svg.png\",\n  \"https://i.pinimg.com/736x/dc/3c/36/dc3c366671b195dbe22c14625ef764bb.jpg\",\n  \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQuRnae3eMwO8xKVvOr7UcF55qYJBGfNCOvyA&usqp=CAU\",\n  \"https://e1.pngegg.com/pngimages/118/845/png-clipart-memes-troll-face-thumbnail.png\",\n  \"https://images.freeimages.com/vhq/images/previews/e69/yaoming-meme-129631.png?fmt=webp&w=500\",\n  \"https://ichef.bbci.co.uk/news/976/cpsprodpb/16620/production/_91408619_55df76d5-2245-41c1-8031-07a4da3f313f.jpg\",\n  \"https://ichef.bbci.co.uk/news/976/cpsprodpb/16620/production/_91408619_55df76d5-2245-41c1-8031-07a4da3f313f.jpg\",\n  \"https://e7.pngegg.com/pngimages/865/664/png-clipart-rage-face-troll-face-people-troll-face.png\",\n  \"https://assets.stickpng.com/images/580b585b2edbce24c47b2a2f.png\",\n];\n\nconst canWithdraw = (pieces) => pieces.length === PUZZLE_PIECES;\n\nfetchPuzzles();\n\nreturn (\n  <Container className=\"d-flex flex-column gap-4\">\n    <Navigation />\n    <Section className=\"p-0 position-relative banner-img\">\n      <Overlay color=\"rgb(89 110 255 / 80%)\">\n        <div className=\"wrapper d-flex align-items-center gap-3 justify-content-center\">\n          <div className=\"mint-section\">\n            <h1 className=\"font\">Complete a Puzzle \ud83e\udde9</h1>\n            <div className=\"mint-rules\">\n              <h5>\n                1. Use your <b>$LOL</b> to mint a puzzle piece.\n              </h5>\n              <h5>2. Complete a puzzle.</h5>\n              <h5>3. Withdraw reward.</h5>\n              <h5>4. Share your results.</h5>\n            </div>\n            <Widget\n              src=\"memelol.near/widget/lol.Components.MintBox\"\n              props={{\n                contractName,\n                methodName: \"mint_puzzle\",\n                title: \"Mint Puzzle\",\n                canMint: true,\n              }}\n            />\n          </div>\n        </div>\n        <Snow />\n      </Overlay>\n    </Section>\n\n    <Section className=\"p-0\">\n      <Overlay color=\"rgb(255 242 158 / 90%)\">\n        <div className=\"text-center font mb-5\">\n          <h1>Your Puzzles</h1>\n        </div>\n        <div className=\"d-flex flex-wrap gap-4 justify-content-center\">\n          {puzzles.map((puzzle, i) => (\n            <Card src={images[i]}>\n              <div className=\"d-flex justify-content-center gap-4 flex-column align-items-center\">\n                <div className=\"puzzle-img d-flex flex-column\">\n                  {[...Array(PUZZLE_COLS).keys()].map((col) => (\n                    <div className=\"d-flex\">\n                      {[...Array(PUZZLE_ROWS).keys()].map((row) => (\n                        <Piece\n                          filled={puzzle.includes(\n                            `${i}${PUZZLE_COLS * col + row}`,\n                          )}\n                        />\n                      ))}\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"w-75 d-flex flex-column gap-1\">\n                  <div className=\"d-flex align-items-center justify-content-between\">\n                    <small>Completed:</small>\n                    <b className=\"font\">\n                      {puzzle.length} / {PUZZLE_COLS * PUZZLE_ROWS}\n                    </b>\n                  </div>\n                  <div className=\"d-flex align-items-center justify-content-between\">\n                    <small>Reward:</small>\n                    <Token size={20}>\n                      <h4>100000</h4>\n                    </Token>\n                  </div>\n                </div>\n\n                <Button\n                  className={`button ${\n                    !canWithdraw(puzzle) || !context.accountId ? \"disabled\" : \"\"\n                  }`}\n                  onClick={() => {}}\n                >\n                  <span>Withdraw</span>\n                  <i className=\"bi bi-cash-stack\" />\n                </Button>\n              </div>\n            </Card>\n          ))}\n        </div>\n      </Overlay>\n    </Section>\n\n    <Section\n      className=\"d-flex flex-column align-items-center justify-content-center\"\n      color=\"#efefef\"\n    >\n      <div className=\"text-center font mt-2\">\n        <h1>Puzzle FAQ</h1>\n      </div>\n      <div className=\"d-flex my-4 flex-column w-100 gap-2\">\n        {content.FAQ.puzzle.map((faq, index) => (\n          <Widget\n            src=\"memelol.near/widget/lol.Components.FAQ\"\n            props={{ faq, index }}\n          />\n        ))}\n      </div>\n    </Section>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/memelol.near/widget/lol.Pages.Puzzle", "fact_widget_deployments_id": "7a421d4d02f567c70b926edc03da1ea9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}