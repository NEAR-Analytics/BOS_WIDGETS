{"tx_hash": "2vmhEwDs4Dy8F774RhCfVaoUaPRXKk7myjxSyYXw42TY", "action_id_social": "3YfoohoyUCPKRV5BRvWeTFRE2aMnhPeBaQwnURcADodR-0-widget", "block_id": 97968505, "block_timestamp": "2023-08-03T08:02:16.507Z", "signer_id": "astro.sking.near", "widget_name": "CreateDAO.Step5", "source_code": "const examplePolicy = {\n  roles: [\n    {\n      name: \"council\",\n      kind: { Group: [\"infinity.near\"] },\n      permissions: [\n        \"add_member_to_role:AddProposal\",\n        \"bounty_done:VoteApprove\",\n        \"add_bounty:VoteReject\",\n        \"add_bounty:AddProposal\",\n        \"config:VoteReject\",\n        \"add_bounty:VoteApprove\",\n        \"remove_member_from_role:VoteReject\",\n        \"policy:VoteRemove\",\n        \"transfer:VoteRemove\",\n        \"vote:VoteApprove\",\n        \"upgrade_self:VoteApprove\",\n        \"call:VoteRemove\",\n        \"upgrade_self:AddProposal\",\n        \"upgrade_remote:AddProposal\",\n        \"upgrade_remote:VoteReject\",\n        \"upgrade_remote:VoteApprove\",\n        \"vote:AddProposal\",\n        \"add_member_to_role:VoteReject\",\n        \"bounty_done:VoteReject\",\n        \"call:AddProposal\",\n        \"upgrade_self:VoteRemove\",\n        \"add_bounty:VoteRemove\",\n        \"remove_member_from_role:VoteRemove\",\n        \"config:VoteRemove\",\n        \"call:VoteApprove\",\n        \"add_member_to_role:VoteRemove\",\n        \"policy:AddProposal\",\n        \"add_member_to_role:VoteApprove\",\n        \"policy:VoteApprove\",\n        \"transfer:VoteApprove\",\n        \"config:AddProposal\",\n        \"*:Finalize\",\n        \"remove_member_from_role:VoteApprove\",\n        \"set_vote_token:VoteReject\",\n        \"bounty_done:AddProposal\",\n        \"set_vote_token:AddProposal\",\n        \"policy:VoteReject\",\n        \"set_vote_token:VoteRemove\",\n        \"remove_member_from_role:AddProposal\",\n        \"transfer:VoteReject\",\n        \"transfer:AddProposal\",\n        \"call:VoteReject\",\n        \"upgrade_remote:VoteRemove\",\n        \"upgrade_self:VoteReject\",\n        \"vote:VoteReject\",\n        \"bounty_done:VoteRemove\",\n        \"vote:VoteRemove\",\n        \"set_vote_token:VoteApprove\",\n        \"config:VoteApprove\",\n      ],\n      vote_policy: {},\n    },\n    {\n      name: \"community\",\n      kind: { Group: [\"hack.near\", \"gov.near\"] },\n      permissions: [\n        \"policy:AddProposal\",\n        \"remove_member_from_role:AddProposal\",\n        \"add_bounty:AddProposal\",\n        \"bounty_done:VoteApprove\",\n        \"remove_member_from_role:VoteReject\",\n        \"transfer:VoteApprove\",\n        \"config:VoteReject\",\n        \"upgrade_self:VoteReject\",\n        \"upgrade_self:VoteRemove\",\n        \"config:VoteRemove\",\n        \"upgrade_remote:VoteRemove\",\n        \"vote:AddProposal\",\n        \"vote:VoteApprove\",\n        \"upgrade_self:VoteApprove\",\n        \"bounty_done:AddProposal\",\n        \"set_vote_token:VoteReject\",\n        \"add_bounty:VoteReject\",\n        \"call:AddProposal\",\n        \"add_member_to_role:VoteReject\",\n        \"bounty_done:VoteReject\",\n        \"policy:VoteApprove\",\n        \"vote:VoteReject\",\n        \"*:Finalize\",\n        \"call:VoteRemove\",\n        \"bounty_done:VoteRemove\",\n        \"add_member_to_role:AddProposal\",\n        \"set_vote_token:VoteRemove\",\n        \"set_vote_token:VoteApprove\",\n        \"upgrade_self:AddProposal\",\n        \"add_bounty:VoteRemove\",\n        \"remove_member_from_role:VoteRemove\",\n        \"add_member_to_role:VoteApprove\",\n        \"upgrade_remote:VoteApprove\",\n        \"vote:VoteRemove\",\n        \"policy:VoteRemove\",\n        \"transfer:AddProposal\",\n        \"call:VoteApprove\",\n        \"transfer:VoteReject\",\n        \"transfer:VoteRemove\",\n        \"add_member_to_role:VoteRemove\",\n        \"add_bounty:VoteApprove\",\n        \"config:AddProposal\",\n        \"call:VoteReject\",\n        \"policy:VoteReject\",\n        \"remove_member_from_role:VoteApprove\",\n        \"set_vote_token:AddProposal\",\n        \"config:VoteApprove\",\n        \"upgrade_remote:VoteReject\",\n        \"upgrade_remote:AddProposal\",\n      ],\n      vote_policy: {},\n    },\n    {\n      name: \"all\",\n      kind: \"Everyone\",\n      permissions: [\n        \"policy:AddProposal\",\n        \"set_vote_token:AddProposal\",\n        \"bounty_done:AddProposal\",\n        \"upgrade_self:AddProposal\",\n        \"upgrade_remote:AddProposal\",\n        \"transfer:AddProposal\",\n        \"remove_member_from_role:AddProposal\",\n        \"add_member_to_role:AddProposal\",\n        \"call:AddProposal\",\n        \"vote:VoteApprove\",\n        \"config:AddProposal\",\n        \"vote:VoteRemove\",\n        \"vote:VoteReject\",\n        \"vote:AddProposal\",\n        \"add_bounty:AddProposal\",\n      ],\n      vote_policy: {},\n    },\n  ],\n  default_vote_policy: {\n    weight_kind: \"RoleWeight\",\n    quorum: \"0\",\n    threshold: [1, 2],\n  },\n  proposal_bond: \"100000000000000000000000\",\n  proposal_period: \"604800000000000\",\n  bounty_bond: \"100000000000000000000000\",\n  bounty_forgiveness_period: \"604800000000000\",\n};\n\nconst proposalKinds = {\n  ChangeDAOConfig: {\n    title: \"Change DAO Config\",\n  },\n  ChangeDAOPolicy: {\n    title: \"Change DAO Policy\",\n  },\n  Bounty: {\n    title: \"Bounty\",\n  },\n  BountyDone: {\n    title: \"Bounty Done\",\n  },\n  Transfer: {\n    title: \"Transfer\",\n  },\n  Polls: {\n    title: \"Polls\",\n  },\n  RemoveMembers: {\n    title: \"Remove Members\",\n  },\n  AddMembers: {\n    title: \"Add Members\",\n  },\n  FunctionCall: {\n    title: \"Function Call\",\n  },\n  UpgradeSelf: {\n    title: \"Upgrade Self\",\n  },\n  UpgradeRemote: {\n    title: \"Upgrade Remote\",\n  },\n  SetVoteToken: {\n    title: \"Set Vote Token\",\n  },\n};\n\nconst Table = styled.ul`\n  border-radius: 4px;\n  width: 100%;\n  list-style: none;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  overflow-x: auto;\n  position: relative;\n\n  li {\n    flex: 1;\n    display: grid;\n    grid-template-columns: minmax(100px, 2fr) repeat(\n        auto-fit,\n        minmax(100px, 1fr)\n      );\n    grid-auto-flow: column;\n    grid-auto-columns: minmax(100px, 1fr);\n    max-width: 100%;\n    align-items: center;\n    padding: 16px;\n    justify-items: center;\n    align-items: center;\n    gap: 16px;\n    border-bottom: 1px solid #eee;\n\n    & > *:first-child {\n      justify-self: flex-start;\n      display: block;\n    }\n\n    &:first-child {\n      border-color: #4498e0;\n    }\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  p {\n    font-size: 0.8rem;\n    color: #666;\n    margin: 0;\n  }\n\n  li .label {\n    display: none;\n  }\n\n  .cbx:not(:last-child) {\n    margin-right: 0 !important;\n  }\n\n  @media (max-width: 600px) {\n    li {\n      display: flex;\n      flex-wrap: wrap;\n    }\n    li > div:first-child {\n      margin-bottom: 1rem;\n      flex: 1;\n      min-width: 100%;\n    }\n    li .label {\n      display: block;\n    }\n\n    .cbx:not(:last-child) {\n      margin-right: 6px !important;\n    }\n    .hide-on-mobile {\n      display: none;\n    }\n  }\n`;\n\nconst renderTable = (roles, rows) => {\n  return (\n    <Table>\n      <li className=\"fw-bold\">\n        <span>Actions</span>\n        {roles.map((role) => (\n          <span className=\"hide-on-mobile\">{role}</span>\n        ))}\n      </li>\n      {Object.keys(rows).map((key) => (\n        <li>\n          <div>{rows[key].title}</div>\n          {roles.map((role) => (\n            <Widget\n              src=\"nui.sking.near/widget/Input.Checkbox\"\n              props={{\n                label: role,\n                onChange: (checked) => {},\n              }}\n            />\n          ))}\n        </li>\n      ))}\n    </Table>\n  );\n};\n\nreturn (\n  <div className=\"d-flex flex-column gap-4\">\n    <h2 className=\"h5 fw-bold mb-2\">\n      <span\n        className=\"rounded-circle d-inline-flex align-items-center justify-content-center fw-bolder h5 me-2\"\n        style={{\n          width: \"48px\",\n          height: \"48px\",\n          border: \"1px solid #82E299\",\n        }}\n      >\n        5\n      </span>\n      Proposal and permissions\n    </h2>\n\n    <div>\n      <h3 className=\"h6 fw-bold mb-0\">Proposal creation</h3>\n      <p className=\"text-black-50 fw-light small\">\n        Choose what creation rights you give DAO groups. This can be changed in\n        settings later.\n      </p>\n      {renderTable([\"All\", \"Council\", \"Dev\"], proposalKinds)}\n    </div>\n\n    <div>\n      <h3 className=\"h6 fw-bold mb-0\">Voting Permissions</h3>\n      <p className=\"text-black-50 fw-light small\">\n        Choose what voting permissions you give DAO groups.\n      </p>\n      {renderTable([\"All\", \"Council\", \"Dev\"], proposalKinds)}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astro.sking.near/widget/CreateDAO.Step5", "fact_widget_deployments_id": "cc8a1cb91049b8895c5abfa62ebf6087", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}