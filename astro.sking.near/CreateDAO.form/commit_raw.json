{"tx_hash": "2mgmuMTmECFUk9ap1prZDz25uBDLPqPpgSe6fKSs1jn4", "action_id_social": "oyvTsgfLpWSJQnHKg9DFxJHjGwz5Q4HVYrR8cxMYmiV-0-widget", "block_id": 97968604, "block_timestamp": "2023-08-03T08:04:18.656Z", "signer_id": "astro.sking.near", "widget_name": "CreateDAO.form", "source_code": "const { typeToEmptyData, validateType, types } = props;\n\nconst initialFormState = typeToEmptyData(types[\"astro.sking.near/type/dao\"]);\n\nState.init({\n  step: 0,\n  form: initialFormState,\n  errors: null,\n});\n\nconst handleStepComplete = (value) => {\n  const stepValid = true;\n  Object.keys(value).forEach((key) => {\n    const properties = types[\"astro.sking.near/type/dao\"].properties.find(\n      (p) => p.name === key\n    );\n    const validation = validateType(properties.type, value[key], properties);\n    if (validation) {\n      State.update({\n        errors: {\n          ...state.errors,\n          [key]: validation,\n        },\n      });\n      stepValid = false;\n    } else {\n      State.update({\n        errors: {\n          ...state.errors,\n          [key]: null,\n        },\n      });\n    }\n  });\n\n  if (stepValid) {\n    State.update({\n      step: state.step + 1,\n      form: {\n        ...state.form,\n        ...value,\n      },\n    });\n  }\n};\n\nconst steps = [\n  {\n    title: \"DAO Info & KYC\",\n    active: state.step === 0,\n    icon: state.step > 0 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 0 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Links & Socials\",\n    active: state.step === 1,\n    icon: state.step > 1 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 1 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Cool Down Period\",\n    active: state.step === 2,\n    icon: state.step > 2 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 2 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Add Groups & Members\",\n    active: state.step === 3,\n    icon: state.step > 3 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 3 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"Proposal & Voting Permission\",\n    active: state.step === 4,\n    icon: state.step > 4 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 4 ? \"active-outline\" : undefined,\n  },\n  {\n    title: \"DAO Assets\",\n    active: state.step === 5,\n    icon: state.step > 5 ? <i className=\"bi bi-check2\"></i> : undefined,\n    className: state.step > 5 ? \"active-outline\" : undefined,\n  },\n];\n\nreturn (\n  <>\n    <h1 className=\"h3 fw-bold mb-4\">Create a new DAO</h1>\n    <Widget\n      src={`nui.sking.near/widget/Navigation.Steps`}\n      props={{\n        steps: steps,\n        onClick: (i) => {\n          State.update({\n            step: i,\n          });\n        },\n      }}\n    />\n    <Widget\n      src={`astro.sking.near/widget/CreateDAO.Step${state.step + 1}`}\n      props={{\n        formState: state.form,\n        onComplete: handleStepComplete,\n        errors: state.errors,\n        renderFooter: (stepState) => (\n          <Widget\n            src={`astro.sking.near/widget/CreateDAO.Footer`}\n            props={{\n              isLast: state.step >= steps.length - 1,\n              hasPrevious: state.step > 0,\n              onNext: () => {\n                handleStepComplete(stepState);\n              },\n              onPrevious: () => {\n                State.update({\n                  step: state.step - 1,\n                });\n              },\n            }}\n          />\n        ),\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astro.sking.near/widget/CreateDAO.form", "fact_widget_deployments_id": "1f765349902c6de8329df341b73b0fea", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}