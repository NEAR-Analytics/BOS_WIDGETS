{"tx_hash": "DxzgbjJLPtA9i1ga4yBhu5Y8CyDrsRXDq5eNSDtNcCLt", "action_id_social": "9PRHHwQXjXUvQRKYvsa8P5WnyoJaBCAK5eYpTE389Y7c-0-widget", "block_id": 96889406, "block_timestamp": "2023-07-20T04:50:03.278Z", "signer_id": "astro.sking.near", "widget_name": "DAO.Proposals.Card.MultiVote", "source_code": "const proposal = props.proposal;\nconst isAllowedToVote = props.isAllowedToVote;\nconst daoId = props.daoId;\nconst canVote = props.canVote;\n\nconst STORAGE_KEY = \"proposalsMultiVote\";\nconst STORAGE = Storage.get(STORAGE_KEY);\nconst selectedVote = STORAGE[daoId][proposal.id];\n\nconst handleClick = (e) => {\n  const [proposalId, vote] = e.target.value.split(\",\");\n\n  // using Storage.privateSet instead of State to avoid re-rendering everything\n  // using daoId as key so that the storage doesn't grow indefinitely\n  Storage.set(STORAGE_KEY, {\n    [daoId]: {\n      ...STORAGE[daoId],\n      [proposalId]: vote,\n    },\n  });\n};\n\nconst Wrapper = styled.div`\n  .form-check {\n    padding: 6px 14px;\n    border-radius: 16px;\n    color: #000;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    margin-bottom: 6px;\n    cursor: pointer;\n\n    &.disabled {\n      cursor: not-allowed !important;\n      opacity: 0.7;\n\n      label {\n        cursor: not-allowed !important;\n      }\n    }\n\n    input {\n      margin: 0 !important;\n    }\n\n    label {\n      flex: 1;\n      font-weight: 600;\n      cursor: pointer;\n    }\n\n    &:first-child {\n      background-color: #82e29930;\n\n      &.active {\n        background-color: #82e299;\n      }\n    }\n    &:nth-child(2) {\n      background-color: #ff646430;\n\n      &.active {\n        background-color: #ff6464;\n      }\n    }\n    &:nth-child(3) {\n      background-color: #ffd50d30;\n\n      &.active {\n        background-color: #ffd50d;\n      }\n    }\n  }\n`;\n\nreturn (\n  <Wrapper>\n    {[\"Yes\", \"No\", \"Spam\"].map((option, index) => {\n      return (\n        <div\n          key={index}\n          className={`form-check ${\n            Number(selectedVote) === index ? \"active\" : \"\"\n          } ${!isAllowedToVote[index] ? \"disabled\" : \"\"} ${\n            canVote ? \"\" : \"disabled\"\n          }`}\n        >\n          <input\n            className=\"form-check-input\"\n            type=\"radio\"\n            value={[proposal.id, index]}\n            id={`vote-p-${proposal.id}-${index}`}\n            checked={Number(selectedVote) === index}\n            onClick={handleClick}\n            disabled={!isAllowedToVote[index] || !canVote}\n          />\n          <label\n            className=\"form-check-label\"\n            htmlFor={`vote-p-${proposal.id}-${index}`}\n          >\n            {option}\n          </label>\n        </div>\n      );\n    })}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astro.sking.near/widget/DAO.Proposals.Card.MultiVote", "fact_widget_deployments_id": "61b07433b746db2fcbe2279534c0d470", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}