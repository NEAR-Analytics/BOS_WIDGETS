{"tx_hash": "59RwJLasWDB2nTmCx9hWDQbUiPoHvbV2uBtW5TNVKbAF", "action_id_social": "DQ3BuMLrYrZHxBfL43XXQpuAJvQyGoyQhzjxFsRvbJGi-0-widget", "block_id": 96767276, "block_timestamp": "2023-07-18T14:46:04.392Z", "signer_id": "astro.sking.near", "widget_name": "DAO.Funds.Transactions", "source_code": "const fetcher = props.fether ?? (() => {});\nconst daoId = props.daoId;\nconst widgetOwner = props.widgetOwner ?? \"astro.sking.near\";\nconst config = props.config ?? {\n  limitPerPage: 10,\n  type: \"near\", // near | ft\n};\n\nState.init({\n  currentPage: state.currentPage ?? 0,\n  type: state.type ?? config.type,\n});\n\nconst currentOffset = state.currentPage * config.limitPerPage;\nconst transfers = fetcher[\n  state.type == \"ft\" ? \"ft_transfers\" : \"near_transfers\"\n](\n  daoId,\n  config.limitPerPage,\n  currentOffset,\n  state.type == \"ft\" ? undefined : config.minNearAmount\n);\n\nif (!transfers.body) {\n  // TODO: Add proper loading\n  return \"Loading...\";\n}\n\nconsole.log(\"transfers\", transfers.body);\n\n\nconst Table = styled.div`\n  & > div {\n    padding: 1.61rem 0.61rem;\n    border-bottom: 1px solid #eee;\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  .tx-info {\n    font-size: 14px;\n    color: #999;\n    text-transform: lowercase;\n\n    span:nth-child(1) {\n      color: #000;\n      font-weight: 600;\n      font-size: 16px;\n      max-width: 200px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n`;\n\n\nreturn (\n  <div className=\"ndc-card p-4\">\n    <div className=\"d-flex justify-content-between gap-2\">\n      <h3 className=\"mb-3\">NEAR Transactions</h3>\n      <div>\n        <Widget\n          src=\"nui.sking.near/widget/Input.Select\"\n          props={{\n            options: [\n              {\n                title: \"NEAR\",\n                value: \"near\",\n                default: state.type == \"near\",\n              },\n              {\n                title: \"Fungible Tokens\",\n                value: \"ft\",\n                default: state.type == \"ft\",\n              },\n            ],\n            onChange: (v) => State.update({ type: v }),\n            value: state.type,\n          }}\n        />\n      </div>\n    </div>\n    <Table className=\"d-flex flex-column\">\n      {transfers.body.length == 0 && (\n        <div className=\"text-center\">No transactions found</div>\n      )}\n      {transfers.body.map((transfer) => {\n        return (\n          <Widget\n            src={`${widgetOwner}/widget/DAO.Funds.TransactionLine`}\n            props={{\n              transfer,\n              daoId,\n              type: state.type,\n            }}\n          />\n        );\n      })}\n    </Table>\n    <div className=\"d-flex gap-3 flex-wrap justify-content-center\">\n      <Widget\n        src=\"nui.sking.near/widget/Navigation.PrevNext\"\n        props={{\n          hasPrev: state.currentPage > 0,\n          hasNext: transfers.body.length == config.limitPerPage,\n          onPrev: () => State.update({ currentPage: state.currentPage - 1 }),\n          onNext: () => State.update({ currentPage: state.currentPage + 1 }),\n        }}\n      />\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astro.sking.near/widget/DAO.Funds.Transactions", "fact_widget_deployments_id": "c791d2d70ddf4d456b56a9a6ade6361f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}