{"tx_hash": "DnjCsis1HNSfGXcW2pghx3zpSQjaUHwv4DzCehkaS6z9", "action_id_social": "8vk8mmvk7qAXB47spkV3oRw3zc63S9AJ1YYAQbDTkusi-0-widget", "block_id": 107359343, "block_timestamp": "2023-12-07T12:39:47.839Z", "signer_id": "azbang.near", "widget_name": "ExportAccount", "source_code": "State.init({\n  creds: null,\n  link: null,\n});\n\nconst Page = styled.div`\n    width: 100%;\n    height: 100%;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n`;\n\nconst BlurScreen = styled.div`\n    position: absolute;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    background: rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(10px);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nif (context.accountId == null) {\n  return (\n    <Page>\n      <h2 style={{ width: \"100%\", textAlign: \"center\" }}>Sign in please</h2>\n    </Page>\n  );\n}\n\nconst code = fetch(\n  \"https://nftstorage.link/ipfs/bafybeicgzd7pnlaswyf3xohphkja6x35fyl5icjyyehyj564pgpkxksusu\"\n);\n\nif (code.body != null && state.creds != null) {\n  const script = `\n        <script>\n            window.accountId = \"${state.creds.accountId}\";\n            window.privateKey = \"${state.creds.privateKey}\";\n            window.openLink = (link) => {\n            window.top.postMessage(link, \"*\")\n            }\n\n            window.mockLocalStorage = {\n            setItem: () => {},\n            getItem: () => null,\n            removeItem: () => {}\n            }\n        </script>\n    `;\n\n  return (\n    <Page style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}>\n      <iframe\n        onMessage={(link) => State.update({ link })}\n        style={{ width: \"100%\", maxWidth: \"812px\", height: \"555px\" }}\n        srcDoc={\n          script +\n          code.body\n            .replaceAll(\"window.localStorage\", \"window.mockLocalStorage\")\n            .replaceAll(\"window.location.assing\", \"window.openLink\")\n            .replaceAll(\"window.open\", \"window.openLink\")\n        }\n      />\n\n      {state.link && (\n        <BlurScreen>\n          <a\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href={state.link}\n            style={{ fontSize: 24, textAlign: \"center\" }}\n            onClick={() => State.update({ link: null })}\n          >\n            Open {state.link.split(\"/\")?.[2] || \"link\"} <br /> to export account\n          </a>\n        </BlurScreen>\n      )}\n    </Page>\n  );\n}\n\nreturn (\n  <div\n    style={{\n      width: 480,\n      border: \"1px solid #ccc\",\n      padding: 24,\n      paddingTop: 16,\n      borderRadius: 24,\n      margin: \"25% auto 0\",\n    }}\n  >\n    <h2 style={{ marginTop: 0 }}>Export account</h2>\n    <p>\n      In order to export your account to a new wallet, you need to create a new\n      full access key, which, using the official secure private key transfer\n      protocol, will be exported to one of the possible wallets.\n    </p>\n    <button class=\"btn btn-dark btn-lg\">Create new access key</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/azbang.near/widget/ExportAccount", "fact_widget_deployments_id": "13b8fdd79c6c00f99327998e538f6bff", "inserted_timestamp": "2023-12-07T14:36:29.000Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}