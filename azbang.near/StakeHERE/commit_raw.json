{"tx_hash": "343GCXzS3bL1T2RyY8ooQGxaSRLhEa4d8iRc4nhSosLE", "action_id_social": "BVnkhh9KZSzkJJqvXp1qDvSjGBqwqCmdgAZsy865EdVz-0-widget", "block_id": 86674478, "block_timestamp": "2023-03-06T08:52:17.888Z", "signer_id": "azbang.near", "widget_name": "StakeHERE", "source_code": "State.init({ link: null, width: 0, height: 0 });\n\nif (context.accountId == null) {\n  return <h2 style={{ width: \"100%\", textAlign: \"center\" }}>Sign in please</h2>;\n}\n\nconsole.log(state);\nreturn (\n  <div\n    style={{\n      width: \"100%\",\n      position: \"relative\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      display: \"flex\",\n    }}\n  >\n    <iframe\n      style={{ display: \"none\" }}\n      onMessage={(e) => State.update(e)}\n      srcDoc={`<script>parent.postMessage({ width: window.screen.width, height: window.screen.height }, \"*\")</script>`}\n    />\n\n    <iframe\n      style={{ width: \"100%\", height: state.height - 150 }}\n      src=\"https://my.herewallet.app?stake\"\n      message={{\n        accountId: context.accountId,\n        localStorage: Storage.get(\"localStorage\"),\n      }}\n      onMessage={(e) => {\n        switch (e.action) {\n          case \"saveLocalStorage\":\n            Storage.set(\"localStorage\", e.data);\n            return;\n\n          case \"openLink\":\n            State.update({ link: e.data.link });\n            return;\n\n          case \"signAndSendTransaction\":\n            const call = e.data.actions[0].params;\n            Near.call(\n              e.data.receiverId,\n              call.methodName,\n              call.args,\n              call.gas,\n              call.deposit\n            );\n            return;\n        }\n      }}\n    />\n\n    {state.link && (\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          height: \"100%\",\n          background: \"rgba(255, 255, 255, 0.3\",\n          backdropFilter: \"blur(10px)\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={state.link}\n          style={{ fontSize: 24 }}\n          onClick={() => State.update({ link: null })}\n        >\n          Open link\n        </a>\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/azbang.near/widget/StakeHERE", "fact_widget_deployments_id": "86c06971f1eddd45e2cdc7682c52d8ca", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 6}