{"tx_hash": "8V1dt27ywBEKpNMbiPbue1KpLWBydq47HyZk63nGCMkE", "action_id_social": "J3EatwkaM9fk1qzKWEUz9LQA7Qfc66fDRqsE6cnYkzjP-0-widget", "block_id": 108257014, "block_timestamp": "2023-12-18T14:32:24.115Z", "signer_id": "previewthomas.near", "widget_name": "devhub.entity.community.configuration.BrandingConfigurator", "source_code": "const Banner = styled.div`\n  border-top-left-radius: var(--bs-border-radius-xl) !important;\n  border-top-right-radius: var(--bs-border-radius-xl) !important;\n  height: calc(100% - 100px);\n\n  & > div :not(.btn) {\n    position: absolute;\n    display: none;\n    margin: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n  }\n\n  .btn {\n    padding: 0.5rem 0.75rem !important;\n    min-height: 32;\n    line-height: 1;\n\n    border: none;\n    border-radius: 50px;\n    --bs-btn-color: #ffffff;\n    --bs-btn-bg: #087990;\n    --bs-btn-border-color: #087990;\n    --bs-btn-hover-color: #ffffff;\n    --bs-btn-hover-bg: #055160;\n    --bs-btn-hover-border-color: #055160;\n    --bs-btn-focus-shadow-rgb: 49, 132, 253;\n    --bs-btn-active-color: #ffffff;\n    --bs-btn-active-bg: #055160;\n    --bs-btn-active-border-color: #055160;\n    --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n    opacity: 0.8;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Logo = styled.div`\n  & > div :not(.btn) {\n    position: absolute;\n    display: none;\n    margin: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n  }\n\n  .btn {\n    padding: 0.5rem 0.75rem !important;\n    min-height: 32;\n    line-height: 1;\n\n    border: none;\n    border-radius: 50px;\n    --bs-btn-color: #ffffff;\n    --bs-btn-bg: #087990;\n    --bs-btn-border-color: #087990;\n    --bs-btn-hover-color: #ffffff;\n    --bs-btn-hover-bg: #055160;\n    --bs-btn-hover-border-color: #055160;\n    --bs-btn-focus-shadow-rgb: 49, 132, 253;\n    --bs-btn-active-color: #ffffff;\n    --bs-btn-active-bg: #055160;\n    --bs-btn-active-border-color: #055160;\n    --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n    opacity: 0.8;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst cidToURL = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nconst { data, onSubmit, hasConfigurePermissions, link } = props;\n\nconst initialInput = { banner: null, logo: null };\n\nconst initialValues = {\n  banner: { cid: data.banner_url.split(\"/\").at(-1) },\n  logo: { cid: data.logo_url.split(\"/\").at(-1) },\n};\n\nState.init({\n  input: initialInput,\n});\n\nconst hasUnsubmittedChanges = Object.values(state.input).some(\n  (value) => value !== null\n);\n\nconst isSynced = state.input === initialValues;\n\nif (hasUnsubmittedChanges && !isSynced) {\n  onSubmit({\n    banner_url: cidToURL(state.input.banner?.cid ?? initialValues.banner.cid),\n    logo_url: cidToURL(state.input.logo?.cid ?? initialValues.logo.cid),\n  });\n\n  State.update((lastKnownState) => ({\n    ...lastKnownState,\n    input: initialInput,\n  }));\n}\n\nreturn (\n  <div style={{ height: 280 }}>\n    <Banner\n      alt=\"Community banner preview\"\n      className=\"card-img-top d-flex flex-column justify-content-end align-items-end p-4\"\n      style={{\n        background: `center / cover no-repeat url(${cidToURL(\n          initialValues.banner.cid\n        )})`,\n      }}\n    >\n      {hasConfigurePermissions && (\n        <IpfsImageUpload image={state.input.banner} />\n      )}\n    </Banner>\n    <Logo\n      alt=\"Community logo preview\"\n      className={[\n        \"d-flex flex-column justify-content-center align-items-center\",\n        \"rounded-circle ms-5 border border-4 border-white\",\n      ].join(\" \")}\n      style={{\n        marginTop: -64,\n        width: 128,\n        height: 128,\n\n        background: `center / cover no-repeat url(${cidToURL(\n          initialValues.logo.cid\n        )})`,\n      }}\n    >\n      {hasConfigurePermissions && <IpfsImageUpload image={state.input.logo} />}\n    </Logo>\n\n    <div\n      className=\"card-body p-4\"\n      style={{ marginTop: -64, marginLeft: 180, height: 84 }}\n    >\n      <h5\n        className=\"h5 text-nowrap overflow-hidden\"\n        style={{ textOverflow: \"ellipsis\" }}\n      >\n        {typeof link === \"string\" && link.length > 0 ? (\n          <Link to={link}>{data.name}</Link>\n        ) : (\n          data.name\n        )}\n      </h5>\n\n      <p\n        className=\"card-text text-nowrap overflow-hidden\"\n        style={{ textOverflow: \"ellipsis\" }}\n      >\n        {data.description}\n      </p>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/previewthomas.near/widget/devhub.entity.community.configuration.BrandingConfigurator", "fact_widget_deployments_id": "84baed7cd164ba0cb7b0518777401743", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 28}