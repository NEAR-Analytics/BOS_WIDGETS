{"tx_hash": "9sQ9hDk7VXyJrtr5NGTGEYzejCpK4TWc8WgN5nta4dfs", "action_id_social": "6gXoyU5ucT74QxrpQcxQ4sNiBgBx3ydZNweCEbsC479C-0-widget", "block_id": 108259447, "block_timestamp": "2023-12-18T15:16:08.167Z", "signer_id": "previewthomas.near", "widget_name": "devhub.entity.post.draft", "source_code": "const DRAFT_STATE_STORAGE_KEY = \"POST_DRAFT_STATE\";\nlet is_edit_or_add_post_transaction = false;\nlet transaction_method_name;\n\nif (props.transactionHashes) {\n  const transaction = fetch(\"https://rpc.mainnet.near.org\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      jsonrpc: \"2.0\",\n      id: \"dontcare\",\n      method: \"tx\",\n      params: [props.transactionHashes, context.accountId],\n    }),\n  });\n  transaction_method_name =\n    transaction?.body?.result?.transaction?.actions[0].FunctionCall.method_name;\n\n  is_edit_or_add_post_transaction =\n    transaction_method_name == \"add_post\" ||\n    transaction_method_name == \"edit_post\";\n\n  if (is_edit_or_add_post_transaction) {\n    Storage.privateSet(DRAFT_STATE_STORAGE_KEY, undefined);\n  }\n}\n\nconst onDraftStateChange = (draftState) =>\n  Storage.privateSet(DRAFT_STATE_STORAGE_KEY, JSON.stringify(draftState));\nlet draftState;\ntry {\n  draftState = JSON.parse(Storage.privateGet(DRAFT_STATE_STORAGE_KEY));\n} catch (e) {}\n\nreturn { DRAFT_STATE_STORAGE_KEY, draftState, onDraftStateChange };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/previewthomas.near/widget/devhub.entity.post.draft", "fact_widget_deployments_id": "a0cc9fc4e777578b0d4ae8d857b6a48d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 34}