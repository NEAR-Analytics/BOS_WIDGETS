{"tx_hash": "8WYo51c5HjRR1RysMFWboaWde3pATcnUuSLBWxnqNgNc", "action_id_social": "GkBRFC1FGv786Vne9mGrYNvkY8A64Xw1XD3VmCanWe4f-0-widget", "block_id": 99698855, "block_timestamp": "2023-08-26T11:33:05.772Z", "signer_id": "createit.near", "widget_name": "project.metadata", "source_code": "const { project } = props;\n\nconst widget = (src, props, other) => (\n  <Widget src={src} props={props} {...other} />\n);\n\n\nconst objectDiff = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  const keys = aKeys.concat(bKeys.filter((item) => aKeys.indexOf(item) < 0));\n  const result = {};\n  keys.forEach((key) => {\n    if (Array.isArray(a[key]) && Array.isArray(b[key])) {\n      a[key].forEach((item, index) => {\n        if (item !== b[key][index]) {\n          result[key] = b[key];\n        }\n      });\n    } else if (\n      a[key] &&\n      typeof a[key] === \"object\" &&\n      b[key] &&\n      typeof b[key] === \"object\"\n    ) {\n      result[key] = objectDiff(a[key], b[key]);\n    } else if (a[key] != b[key]) result[key] = b[key];\n  });\n  return result;\n};\n\nconst handleUpdateProject = (new_project) => {\n  const diff = objectDiff(project, new_project);\n  // if no diff, return\n  if (Object.keys(diff).length === 0) return;\n\n  const tags = {};\n  new_project.tags.forEach((tag) => {\n    tags[tag] = \"\";\n  });\n\n  props.handle[\"project\"].update(project.id, {\n    data: {\n      title: new_project.title,\n      logo: new_project.logo,\n      tags: tags,\n      description: new_project.description,\n    },\n  });\n};\n\nreturn widget(\"createit.near/widget/project.form\", {\n  handleCreateProject: handleUpdateProject,\n  defaultProject: project,\n  buttonChildren: \"Update Project\",\n});\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/createit.near/widget/project.metadata", "fact_widget_deployments_id": "dafaa7a4ce39d2f11e55bb50efc89e24", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}