{"tx_hash": "DeZg6E5hh8G2UdNy39fgkFACZpp7iBhvXL7qENKK3sz5", "action_id_social": "36m6GWuY9XPyxgm6kNcQ66wBW7rSbHQr3qUg5Pwievas-0-widget", "block_id": 100022293, "block_timestamp": "2023-08-30T18:43:58.958Z", "signer_id": "devendra116.near", "widget_name": "share_thoughts", "source_code": "const contract =\n  \"ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801\";\n\nState.init({\n  message: \"\",\n  messageLimit: 3, // Initial message limit\n});\n\nlet user_account = context.accountId;\nconst messages = Near.view(contract, \"get_messages\", {\n  limit: state.messageLimit,\n});\n\nconst Message = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5em;\n  background-color: ${({ isSpecial }) =>\n    isSpecial ? \"#e6f7ff\" : \"white\"}; /* Light Blue: #e6f7ff */\n  border: 1px solid #e0e0e0;\n  padding: 1em;\n  border-radius: 8px;\n  margin-bottom: 1em;\n`;\n\nconst MessageContent = styled.p`\n  margin-top: 0.5em;\n`;\n\nconst SendControls = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1em;\n  margin: 0.5em;\n`;\n\nconst loadMoreMessages = () => {\n  State.update({ messageLimit: state.messageLimit + 3 });\n};\n\nconst sendMessage = () => {\n  if (state.message.length !== 0) {\n    Near.call(contract, \"send\", {\n      text: state.message,\n    });\n  }\n};\n\nreturn (\n  <div>\n    <h3 style={{ justifyContent: \"center\", alignItems: \"center\" }}>\n      Share your thoughts with others\n    </h3>\n    <pre>{JSON.stringify(Social.get(`mob.near/widget/**`), null, 2)}</pre>\n    {messages\n      .slice(0, state.messageLimit)\n      .reverse()\n      .map((message) => (\n        <Message key={message.id} isSpecial={message.author === user_account}>\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n            }}\n          >\n            <Widget\n              src=\"calebjacob.near/widget/AccountProfile\"\n              props={{\n                accountId: message.author,\n              }}\n            />\n            <Widget\n              src=\"andyh.near/widget/TimeAgo\"\n              props={{\n                blockHeight: message.block_height,\n              }}\n            />\n          </div>\n          <MessageContent>{message.text}</MessageContent>\n        </Message>\n      ))}\n    {/* {state.messageLimit < messages.length && ( */}\n    <button onClick={loadMoreMessages}>Load More</button>\n    {/* )} */}\n    <SendControls>\n      <input\n        type=\"text\"\n        placeholder=\"Type your message...\"\n        onInput={(e) => State.update({ message: e.target.value })}\n        value={state.message}\n      />\n      <button onClick={sendMessage}>Send</button>\n    </SendControls>\n  </div>\n);\n", "metadata": {"description": "Share your thoughts that you got while cosing or chilling", "image": {"ipfs_cid": "bafkreifnykkjvzm2nz3pwi57cb5gukfjngia5ejyw6c5g4vsc4u2sjwdlq"}, "name": "Share Thoughts"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devendra116.near/widget/share_thoughts", "fact_widget_deployments_id": "8c199e379240cb0a2ff8ef25f954c81c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}