{"tx_hash": "2KkEfSnjCFpbcqNi3Xa9GPRj9FLZ9caAbLe13B5aa14j", "action_id_social": "AW6B9YTTZpSo4hoPDEbZTXy6jXwgFJGh9PiMbP5qP8ZX-0-widget", "block_id": 100017188, "block_timestamp": "2023-08-30T17:04:09.781Z", "signer_id": "merdus.near", "widget_name": "chat", "source_code": "const contract =\n  \"ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801\";\n\nconst messages = Near.view(contract, \"get_messages\");\n\nState.init({ text: \"\", textSize: 13, widgetSize: 10 });\n\nconst onChange = ({ target }) => {\n  State.update({ text: target.value });\n};\n\nconst ChatContainer = styled.div`\n  background-color: #000;\n  color: #fff;\n  border: 1px solid #ccc;\n  padding: 20px;\n  border-radius: 10px;\n  max-width: 600px;\n  margin: 0 auto;\n`;\n\nconst Message = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1.2em;\n`;\n\nconst MessageTextContainer = styled.div`\n  background-color: #355;\n  padding: 8px 12px;\n  border-radius: 10px;\n  font-size: ${state.textSize}px;\n`;\n\nconst WidgetContainer = styled.div`\n  font-size: ${state.widgetSize}px;\n`;\n\nconst sendMessage = () => {\n  const text = state.text;\n  Near.call(contract, \"send\", { text });\n};\n\nconst SendMessageContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-top: 20px;\n`;\n\nconst FontSizeInput = styled.input`\n  width: 40px; /* Adjust the width as needed */\n`;\n\nconst SendMessageButton = styled.button`\n  background-color: green;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  cursor: pointer;\n  border-radius: 5px;\n`;\n\nreturn (\n  <ChatContainer>\n    {messages.map((message) => (\n      <Message key={message.id}>\n        <Widget\n          src=\"calebjacob.near/widget/AccountProfile\"\n          props={{\n            accountId: message.author,\n          }}\n        />\n        <MessageTextContainer>{message.text}</MessageTextContainer>\n        <WidgetContainer>\n          <Widget\n            src=\"andyh.near/widget/TimeAgo\"\n            props={{\n              blockHeight: message.block_height,\n            }}\n          />\n        </WidgetContainer>\n      </Message>\n    ))}\n    <hr />\n    <SendMessageContainer>\n      <input\n        onChange={onChange}\n        type=\"text\"\n        placeholder=\"Type your message...\"\n      />\n      <FontSizeInput\n        type=\"number\"\n        min=\"10\"\n        max=\"40\"\n        value={state.textSize}\n        onChange={(event) =>\n          State.update({ textSize: parseInt(event.target.value) })\n        }\n      />\n      <FontSizeInput\n        type=\"number\"\n        min=\"10\"\n        max=\"40\"\n        value={state.widgetSize}\n        onChange={(event) =>\n          State.update({ widgetSize: parseInt(event.target.value) })\n        }\n      />\n      <SendMessageButton onClick={sendMessage}>Send</SendMessageButton>\n    </SendMessageContainer>\n  </ChatContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/merdus.near/widget/chat", "fact_widget_deployments_id": "03062d89328b6e1ab56317a8257318b2", "inserted_timestamp": "2023-08-30T18:48:30.751Z", "modified_timestamp": "2023-08-30T18:48:30.751Z", "__row_index": 0}