{"tx_hash": "aQuamNwkJ7uf2CXRxxcqePkm1YcQdSEGy4pWDRTjE5H", "action_id_social": "4oysopAmzF5YW95obz7E1frAxQmk4kGjXmyem4wZDNTF-0-widget", "block_id": 108406359, "block_timestamp": "2023-12-20T12:57:37.878Z", "signer_id": "720288545047ae42c47ce521b155241fb760359af60496c46cb74c4358c5870a", "widget_name": "SizeFidld", "source_code": "const {\n  getValue,\n  placeholder,\n  contractSymbol,\n  price,\n  onChange,\n  priceShowDecimals,\n  quantityShowDecimals,\n} = props;\n\nState.init({\n  theme: Storage.privateGet(\"theme\") || \"dark\",\n  inputValue: \"\",\n  activeIndex: 0,\n  value: \"\",\n});\n\nconst dark = {\n  name: \"dark\",\n  baseColor: \"#fff\",\n  appendBgColor: \"#323232\",\n};\nconst light = {\n  name: \"light\",\n  baseColor: \"#000\",\n  appendBgColor: \"#eeefef\",\n};\n\nconst useTheme = (light, dark) => {\n  return state.theme === \"light\" ? light : dark;\n};\n\nconst prependSpan = styled.span`\n  color: ${useTheme(light.baseColor, dark.baseColor)};\n`;\n\nconst appendDiv = styled.div`\n  color: ${useTheme(light.baseColor, dark.baseColor)};\n  height: 26px;\n  min-width: 50px;\n  border-radius: 8px;\n  overflow: hidden;\n  background-color: ${useTheme(light.appendBgColor, dark.appendBgColor)};\n`;\nconst appendUl = styled.ul`\n  display: flex;\n  column-gap: 0.25rem;\n  width: 100%;\n  height: 100%;\n  padding-left: 2px;\n  padding-right: 2px;\n  list-style: none;\n  align-items: center;\n  justify-content: center;\n  .coin-li {\n    height: 20px;\n    font-size: 12px;\n    cursor: pointer;\n    padding-left: 8px;\n    padding-right: 8px;\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &.active {\n      background-color: #617168;\n      color: #fff;\n    }\n  }\n`;\n\nconst prepend = () => {\n  return <prependSpan>Size</prependSpan>;\n};\n\nconst append = () => {\n  const contact = contractSymbol || [\"BTC\", \"USD\"];\n  return (\n    <appendDiv>\n      <appendUl>\n        {contact.map((item, index) => (\n          <li\n            className={`coin-li ${state.activeIndex === index ? \"active\" : \"\"}`}\n            key={index}\n            onClick={() => {\n              const amount = changeCoin();\n              State.update({ activeIndex: index, inputValue: amount });\n            }}\n          >\n            {item}\n          </li>\n        ))}\n      </appendUl>\n    </appendDiv>\n  );\n};\n\nconst usdTotal = (val) => {\n  const total = Big(val)\n    .times(price)\n    .toFixed(priceShowDecimals || 2);\n  return Big(total).valueOf();\n};\n\nconst coinQuantity = (val) => {\n  const quantity = Big(val)\n    .div(price)\n    .toFixed(quantityShowDecimals || 4);\n  return Big(quantity).valueOf();\n};\n\nconst changeCoin = () => {\n  if (state.value && price) {\n    if (state.activeIndex === 0) return usdTotal(state.value);\n    else return coinQuantity(state.value);\n  }\n  return \"0\";\n};\n\nconst amountTotal = (val) => {\n  if (val && price) {\n    if (state.activeIndex === 0) {\n      const total = usdTotal(val);\n      return total;\n    } else {\n      const quantity = coinQuantity(val);\n      const total = Big(quantity)\n        .times(price)\n        .toFixed(priceShowDecimals || 2);\n      return Big(total).valueOf();\n    }\n  }\n  return \"0\";\n};\n\nconst onInputChange = (val) => {\n  State.update({ value: val });\n  const amount = amountTotal(val);\n  onChange && onChange(amount);\n};\n\nreturn (\n  <Widget\n    src=\"720288545047ae42c47ce521b155241fb760359af60496c46cb74c4358c5870a/widget/input\"\n    props={{\n      prepend: prepend(),\n      append: append(),\n      placeholder: placeholder || \"0.00\",\n      onChange: onInputChange,\n      value: state.inputValue,\n    }}\n  />\n);\n", "metadata": {"fork_of": "720288545047ae42c47ce521b155241fb760359af60496c46cb74c4358c5870a/widget/SizeFidld@108388093"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/720288545047ae42c47ce521b155241fb760359af60496c46cb74c4358c5870a/widget/SizeFidld", "fact_widget_deployments_id": "526cf36e368518e9649f980f1c0be2f9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}