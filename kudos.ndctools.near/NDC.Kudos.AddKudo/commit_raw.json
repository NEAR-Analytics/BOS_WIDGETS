{"tx_hash": "Bfsg7YBjgC8ZEoLDfbxBfoKPywaJBxjTVMRt5dtAK2vd", "action_id_social": "G3TznYNGoVrTaLDn1XxVk4rVcGEGY9PmUy6iahAjoUL8-0-widget", "block_id": 98643371, "block_timestamp": "2023-08-12T14:26:02.741Z", "signer_id": "kudos.ndctools.near", "widget_name": "NDC.Kudos.AddKudo", "source_code": "const { onHide, kind } = props;\n\nconst kudosContract = \"kudos.ndctools.near\";\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n};\n\nState.init({\n  receiverId: \"\",\n  message: \"\",\n  img: null,\n  tags: \"\",\n  showAccountAutocomplete: false,\n});\n\nconst Modal = styled.div`\n  position: fixed;\n  display: flex;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.7);\n`;\n\nconst ComponentWrapper = styled.div`\n  position: absolute;\n  width: 100%;\n  z-index: 100;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst ModalContent = styled.div`\n  background: #f8f8f9;\n  margin: 20% auto;\n  padding: 20px;\n  border-radius: 10px;\n  width: 50%;\n\n  @media (max-width: 768px) {\n    width: 90%;\n  }\n\n  .content {\n    margin: 18px 0;\n\n    h6 {\n      margin-bottom: -10px;\n    }\n  }\n`;\n\nconst InputField = styled.div`\n  margin: 20px 0;\n`;\n\nconst Section = styled.div`\n  margin: 12px 0;\n`;\n\nconst handleAddKudo = () => {\n  Near.call(\n    kudosContract,\n    \"give_kudos\",\n    {\n      receiver_id: state.receiverId,\n      message: state.message,\n      icon_cid: state.img.cid,\n      kind,\n      hashtags: state.tags.replace(/\\s/g, \"\").split(\",\"),\n    },\n    \"70000000000000\",\n    100000000000000000000000\n  ).then((data) => onHide());\n};\n\nconst onSelectAutocomplete = (value) => {\n  let text = state.message.replace(/[\\s]{0,1}@[^\\s]*$/, \"\");\n  text = `${text} @${value}`.trim() + \" \";\n\n  State.update({\n    message: text,\n    showAccountAutocomplete: false,\n  });\n};\n\nconst onCloseAutocomplete = () =>\n  State.update({ showAccountAutocomplete: false });\n\nconst handleChange = (e) => {\n  const text = e.target.value;\n  State.update({ message: text });\n\n  if (autoComplete) {\n    const showAccountAutocomplete = /@[\\w][^\\s]*$/.test(text);\n    State.update({ showAccountAutocomplete });\n  }\n};\n\nreturn (\n  <Modal>\n    <ComponentWrapper>\n      <ModalContent>\n        <h4>Give a {kind === \"k\" ? \"Kudo\" : \"Ding\"}</h4>\n        <div className=\"content\">\n          <Section>\n            <Widget\n              src={widgets.styledComponents}\n              props={{\n                Input: {\n                  label: \"NEAR account\",\n                  value: state.receiverId,\n                  handleChange: (e) =>\n                    State.update({ receiverId: e.target.value }),\n                },\n              }}\n            />\n          </Section>\n          <Section>\n            <Widget\n              src={widgets.styledComponents}\n              props={{\n                TextArea: {\n                  label: `Add a ${kind === \"k\" ? \"Kudo\" : \"Ding\"} Description`,\n                  value: state.message,\n                  handleChange,\n                },\n              }}\n            />\n          </Section>\n          <Section>\n            <div className=\"h-25\">\n              <IpfsImageUpload image={state.img} />\n            </div>\n          </Section>\n          <Section>\n            <Widget\n              src={\"mob.near/widget/TagsEditor\"}\n              props={{\n                label: \"Tags\",\n                placeholder: \"Enter tags\",\n                setTagsObject: (tags) =>\n                  State.update({ tags: Object.keys(tags) }),\n              }}\n            />\n          </Section>\n        </div>\n        <div className=\"d-grid gap-3 d-flex align-items-center justify-content-end\">\n          <Widget\n            src={widgets.styledComponents}\n            props={{\n              Button: {\n                text: \"Cancel\",\n                className: \"secondary dark\",\n                onClick: onHide,\n              },\n            }}\n          />\n          <Widget\n            src={widgets.styledComponents}\n            props={{\n              Button: {\n                text: \"Submit\",\n                onClick: handleAddKudo,\n              },\n            }}\n          />\n        </div>\n      </ModalContent>\n    </ComponentWrapper>\n  </Modal>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kudos.ndctools.near/widget/NDC.Kudos.AddKudo", "fact_widget_deployments_id": "d4ae3a445ea40de8b09943bbe99b7cf9", "inserted_timestamp": "2023-08-12T15:33:44.111Z", "modified_timestamp": "2023-08-12T15:33:44.111Z", "__row_index": 2}