{"tx_hash": "93XEtiPh19X3XbXbnvoVz47ELqKnjWozEK4df1wbWGFg", "action_id_social": "GeeDErdJyiHwBzWgM1escCvkCbkn8iGnARFXNBmjmYQF-0-widget", "block_id": 89876225, "block_timestamp": "2023-04-18T15:54:54.687Z", "signer_id": "humanman.near", "widget_name": "YouTubeVideo", "source_code": "function el$($p, $n, $a) {\n  if (!$n && typeof $p == \"string\") return el$(styled.i``, $p);\n  if (!(\"$$typeof\" in $p)) throw new Error(\"Parent is not a react element\");\n  let { withComponent } = $p;\n  return withComponent($n);\n}\n\nfunction extractVideoId(url) {\n  const arr = url.split(/(vi\\/|v%3D|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n  return undefined !== arr[2] ? arr[2].split(/[^\\w-]/i)[0] : arr[0];\n}\n\nlet videoId = props.videoId ?? \"dQw4w9WgXcQ\";\nlet rawVideoId = extractVideoId(videoId);\n\nState.init({\n  videoId,\n  rawVideoId,\n  controls: props.controls ?? true,\n  height: props.height ?? \"50vh\",\n  width: props.width ?? \"50vw\",\n  autoplay: props.autoplay ?? true,\n  view: \"code\",\n});\n\nlet iframe = el$(\"iframe\");\n\nfunction embed() {\n  return (\n    <iframe\n      allow=\"autoplay\"\n      style={{ width: state.width, height: state.height }}\n      src={`https://www.youtube.com/embed/${\n        state.videoId\n      }?enablejsapi=1&autoplay=${Number(state.autoplay)}&controls=${Number(\n        state.controls\n      )}`}\n    ></iframe>\n  );\n}\n\nif (props.dep) return embed();\n\nfunction updateVideoId(url) {\n  State.update({ rawVideoId: url });\n  const arr = url.split(/(vi\\/|v%3D|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n  let videoId = undefined !== arr[2] ? arr[2].split(/[^\\w-]/i)[0] : arr[0];\n  State.update({ videoId });\n}\n\nlet form = el$(\"form\");\n\nreturn (\n  <>\n    <Widget\n      src=\"miraclx.near/widget/FontAwesome\"\n      props={{ code: true, dep: true }}\n    />\n\n    <div class=\"text-center\">\n      <a href=\"#/miraclx.near/widget/YouTubeVideo\">\n        <h1 class=\"display-1\" style={{ \"margin-bottom\": \"0.1rem\" }}>\n          <i class=\"fa-brands fa-youtube text-danger\"></i>\n        </h1>\n      </a>\n      <h4 class=\"text-secondary\">Embed YouTube Videos in Near.Social</h4>\n      <h6>\n        <Widget\n          src=\"miraclx.near/widget/Attribution\"\n          props={{ authors: [\"miraclx.near\"], dep: true }}\n        />\n      </h6>\n    </div>\n\n    <hr />\n\n    <div class=\"input-group mb-3\">\n      <span class=\"input-group-text\" id=\"videoId-label\">\n        <i class=\"fa-solid fa-link\"></i>\n      </span>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        aria-describedby=\"videoId-label\"\n        placeholder=\"YouTube Video ID (ex: dQw4w9WgXcQ)\"\n        value={state.rawVideoId}\n        onChange={(e) => updateVideoId(e.target.value)}\n      />\n    </div>\n    <div class=\"row\">\n      <div class=\"col\">\n        <form>\n          <div class=\"form-check form-check-inline form-switch\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"autoplayCheckbox\"\n              checked={state.autoplay}\n              onChange={(e) => State.update({ autoplay: !state.autoplay })}\n            />\n            <label class=\"form-check-label\" for=\"autoplayCheckbox\">\n              Autoplay\n            </label>\n          </div>\n          <div class=\"form-check form-check-inline form-switch\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              id=\"controlsCheckbox\"\n              checked={state.controls}\n              onChange={(e) => State.update({ controls: !state.controls })}\n            />\n            <label class=\"form-check-label\" for=\"controlsCheckbox\">\n              Controls\n            </label>\n          </div>\n        </form>\n      </div>\n      <div class=\"col\">\n        <div class=\"input-group\">\n          <span class=\"input-group-text\" id=\"widthLabel\">\n            <i class=\"fa-solid fa-left-right\"></i>\n          </span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Width\"\n            aria-label=\"Width\"\n            aria-describedby=\"widthLabel\"\n            value={state.width}\n            onChange={(e) => State.update({ width: e.target.value })}\n          />\n          <span class=\"input-group-text\" id=\"heightLabel\">\n            <i class=\"fa-solid fa-up-down\"></i>\n          </span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Height\"\n            aria-label=\"Height\"\n            aria-describedby=\"heightLabel\"\n            value={state.height}\n            onChange={(e) => State.update({ height: e.target.value })}\n          />\n        </div>\n      </div>\n    </div>\n\n    <hr />\n    <ul class=\"nav nav-pills justify-content-center\" id=\"myTab\" role=\"tablist\">\n      <li class=\"nav-item\" role=\"presentation\">\n        <button\n          class=\"nav-link \"\n          id=\"preview-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#preview\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"preview\"\n          aria-selected={state.view == \"preview\"}\n          onClick={() => State.update({ view: \"preview\" })}\n        >\n          <i class=\"fa-solid fa-video\"></i> Preview\n        </button>\n      </li>\n      <li class=\"nav-item\" role=\"presentation\">\n        <button\n          class=\"nav-link active\"\n          id=\"code-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#code\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"code\"\n          aria-selected={state.view == \"code\"}\n          onClick={() => State.update({ view: \"code\" })}\n        >\n          <i class=\"fa-solid fa-code\"></i> Code\n        </button>\n      </li>\n    </ul>\n    <div class=\"tab-content text-center\" id=\"myTabContent\">\n      <div\n        class=\"tab-pane fade\"\n        id=\"preview\"\n        role=\"tabpanel\"\n        aria-labelledby=\"preview-tab\"\n      >\n        <br />\n        {state.view === \"preview\" ? embed() : <></>}\n      </div>\n      <div\n        class=\"tab-pane fade show active\"\n        id=\"code\"\n        role=\"tabpanel\"\n        aria-labelledby=\"code-tab\"\n      >\n        Import this widget into yours to embed YouTube Videos.\n        <Markdown\n          text={`\\`\\`\\`jsx\n<Widget\n  src=\"miraclx.near/widget/YouTubeVideo\"\n  props={{\n    videoId: \"${state.videoId}\",\n    width: \"${state.width}\", height: \"${state.height}\",\n    autoplay: ${state.autoplay}, controls: ${state.controls},\n    dep: true\n  }}\n/>\n`}\n        />\n      </div>\n    </div>\n  </>\n);\n", "metadata": null, "branch": {"draft": {"": null, "metadata": null}}, "widget_modules_used": null, "widget_url": "https://near.social/#/humanman.near/widget/YouTubeVideo", "fact_widget_deployments_id": "868c2d0e481d62aa14c5e46f7c2af92b", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 0}