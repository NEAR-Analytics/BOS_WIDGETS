{"tx_hash": "CiMjxLr5kGAUcBhAMQoyDhabexbHB2DaMphLY5Uj1nd5", "action_id_social": "FPoVsLHf8vrQkWHMomuY4scBBWgJ78qNCqs8KGfT7aoj-0-widget", "block_id": 108161155, "block_timestamp": "2023-12-17T10:10:47.746Z", "signer_id": "sainy.near", "widget_name": "SupercallBundler", "source_code": "function handleAddCall() {\n  State.update({ calls: [...state.calls, \"\"] });\n}\n\nfunction handleChangeCall(index, value) {\n  State.update({\n    calls: state.calls.map((call, idx) => (index === idx ? value : call)),\n  });\n}\n\nfunction computeCalls() {\n  const abicoder = new ethers.utils.AbiCoder();\n\n  try {\n    const calls = state.calls.map((c, index) => {\n      const payload = Storage.get(`callPayload:${index}`, c);\n      const obj = {\n        target: payload.target,\n        callData: payload.calldata,\n      };\n      const encodedCall = abicoder.encode(\n        [\"tuple(address target, bytes callData)\"],\n        [obj]\n      );\n      return encodedCall;\n    });\n\n    Storage.set(\"calls\", calls);\n  } catch (e) {}\n}\n\nState.init({\n  calls: [],\n});\n\ncomputeCalls();\n\nreturn (\n  <div>\n    <div>Call</div>\n    <div>\n      <div className=\"p-2 rounded border border-1\">Start</div>\n      <div>\n        {state.calls.map((call, index) => (\n          <div key={index}>\n            <div\n              className=\"border-1 border\"\n              style={{ height: 20, width: 1, marginLeft: 20 }}\n            ></div>\n            <div className=\"border-1 border p-2\">\n              <div>\n                <input\n                  placeholder=\"supercall widget\"\n                  onChange={(e) => handleChangeCall(index, e.target.value)}\n                />\n              </div>\n              <div>\n                <Widget src={call} props={{ callId: index.toString() }} />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div>\n        <button onClick={handleAddCall}>+</button>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"fork_of": "sainy.near/widget/SupercallMain@108159733"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainy.near/widget/SupercallBundler", "fact_widget_deployments_id": "dad4c8e647886889660cffce650b6b70", "inserted_timestamp": "2023-12-17T12:22:08.279Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}