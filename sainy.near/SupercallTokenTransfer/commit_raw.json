{"tx_hash": "Hy69EePW63CAdwFMJdni5ByJQLpusVUGoj7fcVo6u7a3", "action_id_social": "Dp7YpBBdtTZKt9TGjmcm8jkujBEdbCoKEC6K6tTXNk4x-0-widget", "block_id": 108146127, "block_timestamp": "2023-12-17T05:45:03.961Z", "signer_id": "sainy.near", "widget_name": "SupercallTokenTransfer", "source_code": "const ERC20_ABI_URL =\n  \"https://gist.githubusercontent.com/veox/8800debbf56e24718f9f483e1e40c35c/raw/f853187315486225002ba56e5283c1dba0556e6f/erc20.abi.json\";\nconst ERC20_ABI = fetch(ERC20_ABI_URL).body;\n\nfunction handleChange(key, value) {\n  State.update({ [key]: value });\n}\n\nfunction buildCall() {\n  try {\n    const iface = new ethers.utils.Interface(ERC20_ABI);\n    const calldata = iface.encodeFunctionData(\"transfer\", [\n      state.to,\n      ethers.utils.parseEther(state.amount),\n    ]);\n    const callPayload = {\n      chain: \"\",\n      target: state.to,\n      calldata: calldata,\n    };\n    Storage.set(\"callPayload\", callPayload);\n\n    State.update({\n      isOk: true,\n    });\n  } catch (e) {\n    console.error(e);\n    State.update({\n      isOk: false,\n    });\n  }\n}\n\nState.init({\n  tokenAddress: \"\",\n  to: \"\",\n  amount: \"0\",\n  isOk: false,\n});\n\nbuildCall();\n\nreturn (\n  <div className=\"border border-1 rounded rounded-md p-2\">\n    <h2>Token Transfer</h2>\n    <div>\n      <p>Token</p>\n      <input onChange={(e) => handleChange(\"tokenAddress\", e.target.value)} />\n    </div>\n    <div>\n      <p>To</p>\n      <input onChange={(e) => handleChange(\"to\", e.target.value)} />\n    </div>\n    <div>\n      <p>Amount</p>\n      <input onChange={(e) => handleChange(\"amount\", e.target.value)} />\n    </div>\n    <div>\n      {state.isOk ? (\n        <span className=\"text-green-400\">Ready</span>\n      ) : (\n        <span className=\"text-red-400\">Not ready</span>\n      )}\n    </div>\n  </div>\n);\n", "metadata": {"fork_of": "sainy.near/widget/Untitled-0@108106872"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainy.near/widget/SupercallTokenTransfer", "fact_widget_deployments_id": "1c5519b315c9655ad20ae57827fa6f64", "inserted_timestamp": "2023-12-17T07:49:39.985Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}