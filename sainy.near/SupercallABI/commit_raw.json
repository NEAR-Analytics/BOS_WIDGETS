{"tx_hash": "G2zaY5n8fXeCU9isexSNWiLcpFFxYzjQnVNokfbZxAi5", "action_id_social": "FPtaHa99MjUyz4pyojEJnjM3NrCezRdERW84p3bPj1gt-0-widget", "block_id": 108296825, "block_timestamp": "2023-12-19T02:30:11.320Z", "signer_id": "sainy.near", "widget_name": "SupercallABI", "source_code": "// ================ USER INPUT ==============================\nconst title = \"UniswapV2Router\";\nconst abiUrl =\n  \"https://gist.githubusercontent.com/veox/8800debbf56e24718f9f483e1e40c35c/raw/f853187315486225002ba56e5283c1dba0556e6f/erc20.abi.json\";\n\n// ================= STYLE ================================\n\nconst Container = styled.div`\n  border-radius: 14px;\n  border: 1px solid #e9ebed;\n  width: 328px;\n  background-color: white;\n`;\n\nconst ContainerContent = styled.div`\n  padding: 18px 22px;\n`;\n\nconst TextHeader = styled.span`\n  color: var(--Text-Primary-Text, #262930);\n  /* p-ui-semibold */\n  font-family: Mona Sans;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 24px; /* 150% */\n`;\n\nconst Divider = styled.div`\n  height: 1px;\n  padding: 0;\n  background: #e5e7eb;\n`;\n\nconst StyleTextTitle = styled.span`\n  color: var(--Text-Secondary-Text, #656973);\n\n  /* body */\n  font-family: Mona Sans;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n`;\n\nconst StyledBoxInput = styled.div`\n  margin-bottom: 10px;\n`;\n\n// ======================================================\n\nconst ABI = fetch(abiUrl).body;\n\nfunction handleChange(key, value) {\n  State.update({ [key]: value });\n}\n\nfunction buildCall() {\n  try {\n    const iface = new ethers.utils.Interface(ABI);\n    const callData = iface.encodeFunctionData(\"transfer\", [\n      state.to,\n      ethers.utils.parseUnits(state.amount, state.decimals),\n    ]);\n    const callPayload = {\n      target: state.token.address,\n      callData: callData,\n    };\n    Storage.set(`callPayload:${props.callId}`, callPayload);\n\n    State.update({\n      isOk: true,\n    });\n  } catch (e) {\n    State.update({\n      isOk: false,\n    });\n  }\n}\n\nState.init({\n  token: null,\n  to: \"\",\n  amount: \"0\",\n  isOk: false,\n});\n\nbuildCall();\n\n// ============================ RENDER =======================\n\nreturn (\n  <Container>\n    <ContainerContent>\n      <TextHeader>{title}</TextHeader>\n    </ContainerContent>\n    <Divider />\n    <ContainerContent>\n      <StyledBoxInput>\n        <StyleTextTitle>Token</StyleTextTitle>\n        <Widget\n          src=\"sainy.near/widget/SelectToken\"\n          props={{\n            onChange: (token) => State.update({ token }),\n            chainId: props.chainId,\n          }}\n        />\n      </StyledBoxInput>\n      <StyledBoxInput>\n        <StyleTextTitle>To</StyleTextTitle>\n        <input\n          placeholder=\"Wallet Address\"\n          style={{ border: \"1px solid #E9EBED\" }}\n          onChange={(e) => handleChange(\"to\", e.target.value)}\n        />\n      </StyledBoxInput>\n      <StyledBoxInput>\n        <StyleTextTitle>Amount</StyleTextTitle>\n        <input\n          placeholder=\"Amount\"\n          style={{ border: \"1px solid #E9EBED\" }}\n          onChange={(e) => handleChange(\"amount\", e.target.value)}\n        />\n      </StyledBoxInput>\n      <Widget src=\"sainy.near/widget/SupercallBase\" props={props} />\n    </ContainerContent>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainy.near/widget/SupercallABI", "fact_widget_deployments_id": "ff34985c4f5cecbb135f758d6e7a921b", "inserted_timestamp": "2023-12-19T04:22:51.015Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}