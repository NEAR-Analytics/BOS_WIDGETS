{"tx_hash": "GrheXYTAmR8TZchtBJ7wGT8NuEebZnQHcktqLjjo5DUf", "action_id_social": "BotxN6ozwKVmSLCtQpbfZNNR79sXbQjvy1YfY1GA9x4F-0-widget", "block_id": 108243080, "block_timestamp": "2023-12-18T10:22:47.294Z", "signer_id": "sainy.near", "widget_name": "SelectToken", "source_code": "State.init({\n  selectedToken: 0,\n});\n\nconst signer = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (ethers !== undefined && signer) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n\n        const tokenList = fetch(\n          `https://raw.githubusercontent.com/SainyTK/token-list/main/src/tokens/${chainIdData.chainId}.json`\n        );\n\n        if (!tokenList.error) {\n          State.update({\n            tokenList: JSON.parse(tokenList.body),\n            isError: false,\n          });\n        } else {\n          State.update({ tokenList: [], isError: true });\n        }\n      }\n    });\n}\n\nif (!signer) {\n  return <Web3Connect />;\n}\n\nif (state.isError) {\n  return <></>;\n}\n\nconst selectedToken = state.tokenList[state.selectedToken];\n\nfunction handleSelect(index) {\n  State.update({ selectedToken: index });\n\n  if (typeof props.onChange === \"function\") {\n    props.onChange(state.tokenList[state.selectedToken]);\n  }\n}\n\nreturn (\n  <div>\n    <div class=\"dropdown\">\n      <button\n        class=\"btn dropdown-toggle border\"\n        type=\"button\"\n        id=\"dropdownMenuButton1\"\n        data-bs-toggle=\"dropdown\"\n        aria-expanded=\"false\"\n      >\n        {selectedToken ? (\n          <span>\n            <img\n              src={selectedToken.logoURI}\n              width={36}\n              height={36}\n              className=\"rounded-full\"\n            />\n            <span>{selectedToken.symbol}</span>\n          </span>\n        ) : (\n          <span>Select a token</span>\n        )}\n      </button>\n      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n        {state.tokenList &&\n          state.tokenList.map((token, index) => (\n            <li key={index} onClick={() => handleSelect(index)}>\n              <div class=\"dropdown-item\" href=\"#\">\n                <img\n                  src={token.logoURI}\n                  width={36}\n                  height={36}\n                  className=\"rounded-full\"\n                />\n                <span>{token.symbol}</span>\n              </div>\n            </li>\n          ))}\n      </ul>\n    </div>\n  </div>\n);\n", "metadata": {"fork_of": "sainy.near/widget/SelectToken@108182452"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainy.near/widget/SelectToken", "fact_widget_deployments_id": "e8457cf80696219dc5237fa29811de7e", "inserted_timestamp": "2023-12-18T12:22:31.993Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}