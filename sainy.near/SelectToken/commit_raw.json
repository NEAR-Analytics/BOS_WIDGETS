{"tx_hash": "D4DdEgPt1AQEEYMW3qbBxxC35coNMy4b5QHMDYB2r9wW", "action_id_social": "AiKp7Sh1wZEMXVEEqXnyj9u2V29c1mEL4Whk9iz1vv87-0-widget", "block_id": 108182210, "block_timestamp": "2023-12-17T16:24:54.984Z", "signer_id": "sainy.near", "widget_name": "SelectToken", "source_code": "State.init({\n  selectedToken: 0,\n});\n\nconst signer = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (state.chainId === undefined && ethers !== undefined && signer) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n\n        const tokenList = fetch(\n          `https://raw.githubusercontent.com/SainyTK/token-list/main/src/tokens/${chainIdData.chainId}.json`\n        );\n\n        if (!tokenList.error) {\n          State.update({\n            tokenList: JSON.parse(tokenList.body),\n            isError: false,\n          });\n        } else {\n          State.update({ tokenList: [], isError: true });\n        }\n      }\n    });\n}\n\nif (!signer || state.isError) {\n  return <></>;\n}\n\nconst selectedToken = state.tokenList[state.selectedToken];\n\nfunction handleSelect(index) {\n  State.update({ selectedToken: index });\n\n  if (typeof props.onChange === \"function\") {\n    props.onChange(state.tokenList[state.selectedToken]);\n  }\n}\n\nreturn (\n  <div>\n    <div class=\"dropdown\">\n      <button\n        class=\"btn dropdown-toggle border\"\n        type=\"button\"\n        id=\"dropdownMenuButton1\"\n        data-bs-toggle=\"dropdown\"\n        aria-expanded=\"false\"\n      >\n        {selectedToken ? (\n          <span>\n            <img\n              src={selectedToken.logoURI}\n              width={36}\n              height={36}\n              className=\"rounded-full\"\n            />\n            <span>{selectedToken.symbol}</span>\n          </span>\n        ) : (\n          <span>Select a token</span>\n        )}\n      </button>\n      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n        {state.tokenList &&\n          state.tokenList.map((token, index) => (\n            <li key={index} onClick={() => handleSelect(index)}>\n              <div class=\"dropdown-item\" href=\"#\">\n                <img\n                  src={token.logoURI}\n                  width={36}\n                  height={36}\n                  className=\"rounded-full\"\n                />\n                <span>{token.symbol}</span>\n              </div>\n            </li>\n          ))}\n      </ul>\n    </div>\n  </div>\n);\n\n//  <option key={index} value={index}>\n//               <img src={token.logoURI} width={36} height={36} />\n//               <span>{token.symbol}</span>\n//             </option>\n// <select className=\"w-10 border rounded p-1 \">\n//   {state.tokenList &&\n//     state.tokenList.map((token, index) => (\n//       <option key={index} value={index}>\n//         <img src={token.logoURI} width={36} height={36} />\n//         <span>{token.symbol}</span>\n//       </option>\n//     ))}\n// </select>\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainy.near/widget/SelectToken", "fact_widget_deployments_id": "87c096b9dece0228cab06eb9378c185d", "inserted_timestamp": "2023-12-17T18:20:33.533Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 1}