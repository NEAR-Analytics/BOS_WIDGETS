{"tx_hash": "HXrqZiLoM7q9GwCUQ8xdd2eG729mEpGGg58L6WdHHaeC", "action_id_social": "3kvChHigYw3h8KZC2u6dqHY58YAYxttkdMd7H1vCiRog-0-widget", "block_id": 122188227, "block_timestamp": "2024-06-28T16:47:34.040Z", "signer_id": "bos.dapplets.near", "widget_name": "WebGuideTest.Main", "source_code": "const twitterConfig = {\n  action: true,\n  chapters: [\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtension\",\n      type: 'infobox',\n      if: { id: \"1694995344461894022\" }, // ToDo: should be another trigger\n      // showChecked: true,\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtension/Welcome\",\n          title: \"You\u2019re entering Mutable Web\",\n          status: [],\n          content: \"\\nMutable Web is a new web3 paradigm that allows anyone to add custom functionality to existing websites and share it with your community\u2014 no matter who owns the website.\\n\\nBecome a co-owner of any website you are use!\\n\\n### Mutation switch\\n\\n![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/onboarding-video-001.webp)\\n\\nYou can switch between website mutations created by different communities.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionNotch\",\n      type: 'callout',\n      placement: 'right',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"notch\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"notch\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionNotch/Notch\",\n          title: \"Mutation switch\",\n          status: [{ info: 'Click on the dropdown box' }],\n          content: \"Mutation switch allows user to choose between application sets.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/1\",\n      type: 'callout',\n      placement: 'right',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"notch\",\n      injectTo: \"recently-used-mutations\",\n      if: { id: { eq: \"recently-used-mutations\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/1/1\",\n          title: \"The list of recently used mutations (1/2)\",\n          status: [],\n          content: \"The current mutation is highlighted with a star. To add a \u201cfavorite\u201d status to a mutation on the current page, simply click on the star. his mutation will become active when you open the website in a new tab.\",\n        },\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/1/2\",\n          title: \"The list of recently used mutations (2/2)\",\n          status: [{ info: 'Click on the dropdown box below' }],\n          content: \"The \u201cTrash\u201d removes the mutation from the \u201cRecentt\u201d list.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/2\",\n      type: 'callout',\n      strategy: 'fixed',\n      placement: 'right',\n      namespace: \"mweb\",\n      contextType: \"notch\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"unused-mutations-title\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/2/1\",\n          title: \"All mutations\",\n          status: [],\n          content: \"This is the list of all available, previously unused mutations.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/3\",\n      type: 'callout',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"notch\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"mutate-button\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionDropdown/3/1\",\n          title: '\"Mutate\" button',\n          status: [],\n          content: 'The \"Mutate\" button allows users to create, fork, and edit mutations.',\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/1\",\n      type: 'callout',\n      placement: 'left',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay\",\n      injectTo: \"mweb-overlay\",\n      if: { id: { eq: \"mweb-overlay\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/1/MutationButton\",\n          title: \"Application panel\",\n          status: [],\n          content: \"Here are the available application settings for the current mutation.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/2\",\n      type: 'callout',\n      placement: 'bottom',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay\",\n      injectTo: \"mutation-icon\",\n      if: { id: { eq: \"mutation-button\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/2/MutationButton\",\n          title: \"Mutation button\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-006.png)\\n\\nThis is the current mutation icon. Click on it to open the Wallet panel. There you can connect your NEAR wallet.\",\n        },\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/2/MutationButton\",\n          title: \"Mutation button\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-007.png)\\n\\n Once your wallet is connected, you can see information about it and disconnect whenever you want.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/3\",\n      type: 'callout',\n      placement: 'bottom',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay-action\",\n      injectTo: \"mweb-overlay-action\",\n      if: { id: { eq: \"web-guide-action-web-guide-test\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/3/Action\",\n          title: \"Action button\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-005.png)\\n\\nYou can always call up this guide again on this page by clicking on this button. It is inserted by the Web Guide application. Other applications can also insert their own quick action buttons nearby.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/4\",\n      type: 'callout',\n      placement: 'left',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay\",\n      injectTo: \"open-apps-button\",\n      if: { id: { eq: \"open-apps-button\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/4/Applications\",\n          title: \"Applications\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-008.png)\\n\\nClick on the button to view the applications of the current mutation. Here you can turn them off and on.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/app/Tipping/1\",\n      type: 'callout',\n      namespace: \"bos.dapplets.near/parser/twitter\",\n      contextType: \"post\",\n      injectTo: \"avatar\",\n      if: { id: { eq: \"1694995344461894022\" } },\n      arrowTo: \"insPoint\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/app/Tipping/1/1\",\n          status: [],\n          title: \"Tipping app\",\n          content: \"If you want to thank the author of the tweet you like...\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/app/Tipping/2\",\n      type: \"callout\",\n      namespace: \"mweb\",\n      contextType: \"injected-widget\",\n      injectTo: \"hidden\",\n      if: {\n        parentContextId: { eq: \"1694995344461894022\" },\n        widgetSrc: { eq: \"bos.dapplets.near/widget/Tipping.Main\" },\n      },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/app/Tipping/2/1\",\n          status: [],\n          title: \"Tipping app\",\n          content: \"... you can send them a tip through our application.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/mutation/EarTrigger\",\n      type: 'callout',\n      namespace: \"mweb\",\n      contextType: \"ear-trigger\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"1694995344461894022\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/mutation/EarTrigger/1\",\n          status: [],\n          title: \"Apps control panel\",\n          content: 'We add the app control panel to each post. You can add widgets to the post or panel to extend the functionality of the site.',\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/mutation/EarTrigger/copy\",\n      type: 'callout',\n      namespace: \"mweb\",\n      contextType: \"ear-trigger\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"1694995344461894022\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/mutation/EarTrigger/copy/1\",\n          status: [],\n          title: \"Apps control panel\",\n          content: '[See other Mutable Web facilities on NEAR Social](https://social.dapplets.org/mob.near/widget/ProfilePage?accountId=dappletsproject.near)',\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n  ],\n}\n\nconst nearSocialConfig = {\n  action: true,\n  chapters: [\n    {\n      id: \"bos.dapplets.near/gateway/MutableWeb\",\n      type: 'infobox',\n      if: { id: \"1694995344461894022\" }, // ToDo: should be another trigger\n      // showChecked: true,\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWeb/Welcome\",\n          title: \"You\u2019re entering Mutable Web\",\n          status: [],\n          content: \"[Mutable Web also runs on Legacy Web2.](https://augm.link/mutate/?t=https%3A%2F%2Ftwitter.com%2FMrConCreator&m=bos.dapplets.near%2Fmutation%2FSandbox) Check its\u2019 Web Guide there!\\n\\nMutable Web is a new web3 paradigm that allows anyone to add custom functionality to existing websites and share them within your community \u2014 no matter who owns the website.\\n\\nBecome the co-owner of any website you are using!\\n\\n### Mutation switch\\n\\n![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/onboarding-008.png)\\n\\nYou can switch between website mutations created by different communities.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebDropdown/1\",\n      type: 'callout',\n      placement: 'right',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-gateway\",\n      injectTo: \"mutation-wrapper\",\n      if: { id: { eq: \"mutation-wrapper\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebDropdown/1/1\",\n          title: \"Mutation switch\",\n          status: [{ info: 'Click on the dropdown box' }],\n          content: \"This is a mutation switcher to select the desired set of applications.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    // {\n    //   id: \"bos.dapplets.near/gateway/MutableWebDropdown/2\",\n    //   type: 'callout',\n    //   strategy: 'fixed',\n    //   placement: 'right',\n    //   namespace: \"mweb\",\n    //   contextType: \"mweb-gateway\",\n    //   injectTo: \"mutations-list\",\n    //   if: { id: { eq: \"mutations-list\" } },\n    //   arrowTo: \"context\",\n    //   pages: [\n    //     {\n    //       id: \"bos.dapplets.near/gateway/MutableWebDropdown/2/1\",\n    //       title: \"All mutations\",\n    //       status: [],\n    //       content: \"Each mutation defines the set of applications. Select it from the list.\",\n    //     },\n    //   ],\n    //   skin: 'META_GUIDE',\n    // },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/1\",\n      type: 'callout',\n      placement: 'left',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay\",\n      injectTo: \"mweb-overlay\",\n      if: { id: { eq: \"mweb-overlay\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/1/MutationButton\",\n          title: \"Application panel\",\n          status: [],\n          content: \"Here are the available application settings for the current mutation.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/3\",\n      type: 'callout',\n      placement: 'bottom',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay-action\",\n      injectTo: \"mweb-overlay-action\",\n      if: { id: { eq: \"web-guide-action-web-guide-test\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/3/Action\",\n          title: \"Action button\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-005.png)\\n\\nYou can always call up this guide again on this page by clicking on this button. It is inserted by the Web Guide application. Other applications can also insert their own quick action buttons nearby.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/4\",\n      type: 'callout',\n      placement: 'left',\n      strategy: 'fixed',\n      namespace: \"mweb\",\n      contextType: \"mweb-overlay\",\n      injectTo: \"open-apps-button\",\n      if: { id: { eq: \"open-apps-button\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/gateway/MutableWebExtensionOverlay/4/Applications\",\n          title: \"Applications\",\n          status: [],\n          content: \"![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-008.png)\\n\\nClick on the button to view the applications of the current mutation. Here you can turn them off and on.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    // {\n    //   id: \"bos.dapplets.near/app/Tipping/1\",\n    //   type: 'callout',\n    //   namespace: \"bos.dapplets.near/parser/near-social-json\",\n    //   contextType: \"post\",\n    //   injectTo: \"avatar\",\n    //   if: { id: { eq: \"dappletsproject.near/119034910\" } },\n    //   arrowTo: \"insPoint\",\n    //   pages: [\n    //     {\n    //       id: \"bos.dapplets.near/app/Tipping/1/1\",\n    //       status: [],\n    //       title: \"Tipping app\",\n    //       content: \"If you want to thank the author of the post you like...\",\n    //     },\n    //   ],\n    //   skin: 'META_GUIDE',\n    // },\n    {\n      id: \"bos.dapplets.near/app/Tipping/2\",\n      type: \"callout\",\n      namespace: \"mweb\",\n      contextType: \"injected-widget\",\n      injectTo: \"hidden\",\n      if: {\n        parentContextId: { eq: \"dappletsproject.near/119034910\" },\n        widgetSrc: { eq: \"bos.dapplets.near/widget/Tipping.Main\" },\n      },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/app/Tipping/2/1\",\n          status: [],\n          title: \"Tipping app\",\n          content: \"If you want to thank the author of the post you like, you can send them a tip through our application.\",\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/mutation/EarTrigger\",\n      type: 'callout',\n      namespace: \"mweb\",\n      contextType: \"ear-trigger\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"dappletsproject.near/119034910\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/mutation/EarTrigger/1\",\n          status: [],\n          title: \"Apps control panel\",\n          content: 'We\u2019ve added a special container to all posts. This allows users to attach widgets that extend the possibilities of Near Social.',\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n    {\n      id: \"bos.dapplets.near/mutation/EarTrigger/copy\",\n      type: 'callout',\n      namespace: \"mweb\",\n      contextType: \"ear-trigger\",\n      injectTo: \"hidden\",\n      if: { id: { eq: \"dappletsproject.near/119034910\" } },\n      arrowTo: \"context\",\n      pages: [\n        {\n          id: \"bos.dapplets.near/mutation/EarTrigger/copy/1\",\n          status: [],\n          title: \"Apps control panel\",\n          content: '[See other Mutable Web facilities on X](https://augm.link/mutate/?t=https%3A%2F%2Ftwitter.com%2FMrConCreator&m=bos.dapplets.near%2Fmutation%2FSandbox)',\n        },\n      ],\n      skin: 'META_GUIDE',\n    },\n  ],\n}\n\nconst nestedCalloutConfig = {\n  chapters: [{\n    id: \"CalloutInCallout\",\n    type: 'callout',\n    namespace: \"mweb\",\n    contextType: \"wg-chapter\",\n    injectTo: \"hidden\",\n    if: { id: { eq: \"bos.dapplets.near/mutation/EarTrigger/copy\" } }, // ID of the last chapter\n    arrowTo: \"context\",\n    pages: [\n      {\n        id: \"CalloutInCallout/1\",\n        status: [],\n        title: \"Web Guides 1/3\",\n        content: 'The WebGuide is also an application. Any user can create a guide to explain a workflow to other users. The WebGuide consists of callouts pointing to UI elements (original or embedded by other applications).',\n      },\n      {\n        id: \"CalloutInCallout/2\",\n        status: [],\n        title: \"Web Guides 2/3\",\n        content: '![](https://raw.githubusercontent.com/dapplets/bos-components/main/assets/webguide-004.png)\\n\\nWeb Guides can consist of several chapters.',\n      },\n      {\n        id: \"CalloutInCallout/3\",\n        status: [],\n        title: \"Web Guides 3/3\",\n        content: 'Use the buttons to navigate through the Web Guide.',\n      },\n    ],\n  }]\n}\n\n// ToDo: move to a smart contract\nconst guideConfigByLinkId = {\n  // production (bos.dapplets.near/mutation/sandbox)\n  '9a6537b6efbb98ad4c12ef747c7e29e9': twitterConfig,\n  '8a1ca0a9eb03ce2725db7a553a9bcab7': nearSocialConfig,\n  \"5c105a6a05975423d39a1e0d9447a22d\": nestedCalloutConfig,\n  '84998d899f0b75b6ca47197c66baf3ca': nestedCalloutConfig, // twitter\n  \n  // testing (bos.dapplets.near/mutation/testing2)\n  'b3777e928bd7ce9ad30eb636857a1853': twitterConfig,\n  '114a78557d9044ff8c6e0177bcbe690a': nearSocialConfig,\n  '0b492fd62c72d7ad87c7658e2b3a4f1e': nestedCalloutConfig,\n}\n\nconst OverlayTriggerWrapper = styled.div`\n  display: flex;\n  z-index: 500;\n\n  .OverlayTrigger {\n    position: absolute;\n    background: #db504a;\n    border: 1px solid #db504a;\n    width: 6px;\n    height: 49px;\n    right: -6px;\n    top: 10px;\n    border-radius: 0px 4px 4px 0px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-sizing: border-box;\n    z-index: 79;\n  }\n`\n\nconst guideConfig = guideConfigByLinkId[props.link.id]\n\nconst [showApp, setShowApp] = useState(true)\nconst [chapterCounter, setChapterCounter] = useState(0)\nconst [pageCounter, setPageCounter] = useState(0)\n\nif (\n  !guideConfig\n  || !guideConfig.chapters?.length\n  || !guideConfig.chapters[0].pages?.length\n) return <></>\n\nconst handleClose = () => {\n  setShowApp(false)\n}\n\nconst handleAction = () => {\n  setShowApp((val) => !val)\n  setChapterCounter(0)\n  setPageCounter(0)\n}\n\nconst handleChapterDecrement = () => {\n  if (chapterCounter !== 0) {\n    setChapterCounter((val) => val - 1)\n    setPageCounter(\n      guideConfig.chapters[chapterCounter - 1]?.pages?.length\n        ? guideConfig.chapters[chapterCounter - 1]?.pages?.length - 1\n        : 0\n    )\n  }\n}\n\nconst handleChapterIncrement = () => {\n  setChapterCounter((val) => Math.min(val + 1, guideConfig.chapters.length - 1))\n  setPageCounter(0)\n}\n\nconst handleClickPrev = () => {\n  if (!pageCounter) {\n    handleChapterDecrement()\n  } else {\n    setPageCounter((val) => val - 1)\n  }\n}\n\nconst handleClickNext = () => {\n  if (pageCounter === guideConfig.chapters[chapterCounter]?.pages?.length - 1) {\n    handleChapterIncrement()\n  } else {\n    setPageCounter((val) => val + 1)\n  }\n}\n\nconst ChapterWrapper = (props) => {\n  const currentChapter = guideConfig.chapters[chapterCounter]\n  if (!currentChapter) return <></>\n  const pages = currentChapter.pages\n  if (!pages) return <></>\n  const currentPage = pages[pageCounter]\n  if (!currentPage) return <></>\n\n  const status = currentPage.status.length && Object.entries(currentPage.status[0])[0] // ToDo: mocked!!!\n\n  const buttons = []\n  if (chapterCounter || pageCounter) {\n    buttons.push({\n      variant: \"secondary\",\n      disabled: false,\n      onClick: handleClickPrev,\n      label: \"Prev\",\n    })\n  }\n  if (chapterCounter === guideConfig.chapters.length - 1 && pageCounter === pages.length - 1) {\n    buttons.push({\n      variant: \"primary\",\n      disabled: false,\n      onClick: handleClose,\n      label: \"Finish\",\n    })\n  } else (\n    buttons.push({\n      variant: \"primary\",\n      disabled: false,\n      onClick: handleClickNext,\n      label: \"Next\",\n    })\n  )\n\n  return  (\n    <Widget\n      src='bos.dapplets.near/widget/WebGuideTest.OverlayTrigger'\n      loading={props?.children}\n      props={{\n        id: currentChapter.id,\n        type: currentChapter.type,\n        placement: currentChapter.placement,\n        strategy: currentChapter.strategy,\n        navi: {\n          currentChapterIndex: chapterCounter,\n          totalChapters: guideConfig.chapters.length,\n          currentPageIndex: pageCounter,\n          totalPages: pages.length,\n        },\n        onClose: handleClose,\n        buttons,\n        status: status && {\n          type: status[0],\n          text: status[1],\n        },\n        title: currentPage.title,\n        content: currentPage.content,\n        showChecked: currentChapter.showChecked,\n        children: currentChapter.type === 'callout'\n          && currentChapter.arrowTo === \"context\"\n            ? ({ ref }) => {\n                props.attachContextRef(ref);\n                return props.children;\n              }\n            : currentChapter.arrowTo === \"insPoint\"\n            ? ({ ref }) => {\n                props.attachInsPointRef(ref);\n                return props.children;\n              }\n            : props.children,\n        skin: currentChapter.skin ?? 'DEFAULT',\n      }}\n    />\n  )\n}\n\nconst iconQuestionMark = (isActive) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n  >\n    <rect width=\"18\" height=\"18\" rx=\"9\" fill={isActive ? \"white\" : \"#02193A\"} />\n    <path\n      d=\"M7.84446 12.85H9.60281V14.5H7.84446V12.85ZM9.01669 3.5C12.1524 3.621 13.5181 6.591 11.6542 8.8185C11.1677 9.3685 10.3823 9.7315 9.9955 10.1935C9.60281 10.65 9.60281 11.2 9.60281 11.75H7.84446C7.84446 10.8315 7.84446 10.056 8.23716 9.506C8.62399 8.956 9.40939 8.6315 9.89586 8.2685C11.3143 7.0365 10.9626 5.293 9.01669 5.15C8.55035 5.15 8.10311 5.32384 7.77335 5.63327C7.4436 5.94271 7.25835 6.36239 7.25835 6.8H5.5C5.5 5.92479 5.87051 5.08542 6.53001 4.46655C7.18952 3.84768 8.08401 3.5 9.01669 3.5Z\"\n      fill={isActive ? \"#384BFF\" : \"white\"}\n    />\n  </svg>\n)\n\nconst iconTimelineLatch = (color) => (\n  <svg\n    width=\"15\"\n    height=\"19\"\n    viewBox=\"0 0 15 19\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M0 18.6H0.39L7.27 8.42C7.36 8.24 7.31 8.15 7.12 8.15H4.28L7.27 2.7C7.36 2.52 7.29 2.43 7.07 2.43H3.26C3.15 2.43 3.06 2.49 2.97 2.61L0.19 10.01C0.17 10.19 0.23 10.28 0.38 10.28H3.13L0 18.6ZM8.5 12.27H8.77L13.99 4.6C14.04 4.52 14.05 4.45 14.03 4.4C14.01 4.35 13.95 4.33 13.86 4.33H11.76L13.94 0.3C14.06 0.1 14 0 13.76 0H11.02C10.89 0 10.79 0.0600001 10.72 0.19L8.64 5.67C8.61 5.76 8.61 5.83 8.65 5.88C8.69 5.93 8.75 5.95 8.84 5.95H10.88L8.5 12.27Z\"\n      fill={color}\n    />\n  </svg>\n)\n\nreturn (\n  <>\n    {guideConfig.action ? (\n      <DappletPortal\n        target={{\n          namespace: \"mweb\",\n          contextType: \"mweb-overlay\",\n          injectTo: \"mweb-actions-panel\",\n          if: { id: { eq: \"mweb-overlay\" } },\n          arrowTo: \"context\",\n        }}\n        component={() => <Widget\n          src='bos.dapplets.near/widget/WebGuideTest.Action'\n          props={{\n            appId: 'web-guide-test',\n            tooltip: showApp ? 'Stop Web Guide' : 'Run Web Guide',\n            isActive: showApp,\n            handleAction,\n            children: iconQuestionMark(showApp),\n          }}\n        />}\n      />\n    ) : null}\n    {showApp ? (guideConfig.chapters[chapterCounter]?.type === 'infobox' ? (\n      <OverlayTriggerWrapper>\n        <DappletOverlay>\n          <ChapterWrapper/>\n        </DappletOverlay>\n      </OverlayTriggerWrapper>\n    ) : (\n      <>\n        <DappletPortal\n          target={{\n            namespace: guideConfig.chapters[chapterCounter]?.namespace,\n            contextType: guideConfig.chapters[chapterCounter]?.contextType,\n            injectTo: guideConfig.chapters[chapterCounter]?.injectTo,\n            if: guideConfig.chapters[chapterCounter]?.if,\n            insteadOf: guideConfig.chapters[chapterCounter]?.insteadOf,\n          }}\n          component={ChapterWrapper}\n        />\n        <Highlighter\n          target={{ \n            namespace: guideConfig.chapters[chapterCounter]?.namespace,\n            contextType: guideConfig.chapters[chapterCounter]?.contextType,\n            if: guideConfig.chapters[chapterCounter]?.if,\n          }}\n          styles={{\n            borderColor: '#14AE5C',\n            backgroundColor: 'rgb(56 255 63 / 10%)',\n            // borderStyle: 'dashed',\n          }}\n          // filled\n          // icon={iconTimelineLatch('#14AE5C')}\n          // icon={() => <></>}\n          // action={() => console.log('Highlighter action')}\n        />\n      </>\n    )) : null}\n  </>\n)\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/WebGuideTest.Main", "fact_widget_deployments_id": "0d0af8a5640032b455f833e5b8eb27ef", "inserted_timestamp": "2024-06-28T17:54:59.284Z", "modified_timestamp": "2024-06-28T17:54:59.284Z", "__row_index": 2}