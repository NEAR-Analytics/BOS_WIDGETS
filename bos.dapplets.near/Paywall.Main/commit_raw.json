{"tx_hash": "3J7FXqhG6cH4fFx54W3CfHqTNQX5KoXSwihdnveUzZpm", "action_id_social": "3m4GsSfgGEBiciPvebTE8ndrirLHqSvUYGFLmqBmD9FT-0-widget", "block_id": 118980229, "block_timestamp": "2024-05-15T15:24:58.232Z", "signer_id": "bos.dapplets.near", "widget_name": "Paywall.Main", "source_code": "const { nearAccountId } = props\nconst { authorId, id } = props.link\n\nif (!id) return <></>\n\nconst userAccountId = context.accountId || nearAccountId\nconst CONTRACT_ADDRESS = \"v2.paywall.near\"\n\nState.update({\n  hasContent: Near.view(\n      CONTRACT_ADDRESS,\n      \"has_content\",\n      { context_id: id },\n      'final',\n      true\n    )\n})\n\nif (state.hasContent) {\n  State.update({\n    content: Near.view(\n        CONTRACT_ADDRESS,\n        \"get_one\",\n        {\n          context_id: id,\n          account_id: userAccountId || ''\n        },\n        'final',\n        true\n      )\n  })\n}\n\nreturn (\n  <>\n    {state.content\n      ? <Widget\n       loading={<></>}\n          src=\"bos.dapplets.near/widget/Paywall.Content\"\n          props={{\n            content: state.content,\n            CONTRACT_ADDRESS,\n            nearAccountId,\n          }\n        }/>\n      : authorId === userAccountId\n      ? <Widget\n       loading={<></>}\n          src=\"bos.dapplets.near/widget/Paywall.Form\"\n          props={{ linkId: id, CONTRACT_ADDRESS }}\n        />\n      : <></>}\n  </>\n)\n", "metadata": {"description": "", "image": {"ipfs_cid": "bafkreif7roycllkswl2sveqpt4zbzce3e4vjasr756bdh4a2334i55upnq"}, "name": "Paywall Dapplet", "tags": {"dapplet": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/Paywall.Main", "fact_widget_deployments_id": "f16629c25f6d5141ba1436814557a4d7", "inserted_timestamp": "2024-05-15T16:55:31.288Z", "modified_timestamp": "2024-05-15T17:51:14.266Z", "__row_index": 1}