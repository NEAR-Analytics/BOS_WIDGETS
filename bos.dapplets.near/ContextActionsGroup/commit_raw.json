{"tx_hash": "3J7FXqhG6cH4fFx54W3CfHqTNQX5KoXSwihdnveUzZpm", "action_id_social": "3m4GsSfgGEBiciPvebTE8ndrirLHqSvUYGFLmqBmD9FT-0-widget", "block_id": 118980229, "block_timestamp": "2024-05-15T15:24:58.232Z", "signer_id": "bos.dapplets.near", "widget_name": "ContextActionsGroup", "source_code": "const widgets = props.widgets ?? [];\nconst apps = props.apps ?? [];\nconst {\n  context,\n  isEditMode,\n  createUserLink,\n  deleteUserLink,\n  enableEditMode,\n  disableEditMode,\n} = props;\n\nState.init({\n  show: false,\n  showMenu: false,\n  waitingAppIdsSet: new Set(),\n});\n\nconst handleOnMouseEnter = () => State.update({ show: true });\n\nconst handleOnMouseLeave = () => {\n  state.showMenu ? null : isEditMode ? null : State.update({ show: false });\n};\n\nconst handleOpenMenu = () => State.update({ showMenu: true, show: false });\n\nconst handleCloseMenu = () => State.update({ showMenu: false, show: false });\n\nconst handleSelectComponent = (app) => {\n  State.update({ waitingAppIdsSet: state.waitingAppIdsSet.add(app.id) });\n  createUserLink(app.id)\n    .then(() => {\n      const waitingAppIdsSet = state.waitingAppIdsSet;\n      waitingAppIdsSet.delete(app.id);\n      State.update({ waitingAppIdsSet });\n    })\n    .catch(() => {\n      const waitingAppIdsSet = state.waitingAppIdsSet;\n      waitingAppIdsSet.delete(app.id);\n      State.update({ waitingAppIdsSet });\n    });\n};\n\nconst OverlayTriggerWrapper = styled.div`\n  display: flex;\n  z-index: 500;\n`;\n\nconst FloatingModal = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  animation: falling-animation 0.3s linear forwards;\n  translate: all ease 0.2s;\n  @keyframes falling-animation {\n    from {\n      transform: translate(-50%, -200%);\n    }\n\n    to {\n      transform: translate(-50%, -50%);\n    }\n  }\n`;\n\nreturn (\n  <OverlayTriggerWrapper onMouseOver={handleOnMouseEnter}>\n    <Widget\n      src=\"bos.dapplets.near/widget/LayoutManager.TriggerEar\"\n      props={{ show: state.show, context }}\n      loading={<></>}\n    />\n    {state.show ? (\n      <Widget\n        loading={<></>}\n        props={{\n          widgets,\n          isEditMode,\n          enableEditMode,\n          disableEditMode,\n          handleOpenMenu,\n          handleOnMouseLeave,\n          deleteUserLink,\n        }}\n        src=\"bos.dapplets.near/widget/LayoutManager.EarOpened\"\n         loading={<></>}\n      />\n    ) : null}\n\n    {state.showMenu ? (\n      <DappletOverlay>\n        <FloatingModal>\n          <Widget\n            loading={<></>}\n            props={{\n              handleCloseMenu,\n              onSelect: handleSelectComponent,\n              apps,\n              waitingAppIdsSet: state.waitingAppIdsSet,\n            }}\n            src=\"bos.dapplets.near/widget/ComponentsSearch\"\n             loading={<></>}\n          />\n        </FloatingModal>\n      </DappletOverlay>\n    ) : null}\n  </OverlayTriggerWrapper>\n);\n", "metadata": {}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/ContextActionsGroup", "fact_widget_deployments_id": "eeb9d503e64728f6dc79a2f0d9c8946e", "inserted_timestamp": "2024-05-15T16:55:31.288Z", "modified_timestamp": "2024-05-15T17:51:14.266Z", "__row_index": 0}