{"tx_hash": "6Gm8Yr2TATEzaiSUqEKRH7TYMSjnm5wwyeGeSQ5Ak7FY", "action_id_social": "26G2JWCm4gouG26b1U7LrY2L5WEpbvDg58M5hBMjvhyH-0-widget", "block_id": 112902898, "block_timestamp": "2024-02-15T20:13:31.684Z", "signer_id": "bos.dapplets.near", "widget_name": "ContextActionsGroup", "source_code": "State.init({\n  show: false,\n  showMenu: false,\n});\n\nconst handleOnMouseEnter = () => {\n  State.update({ show: true });\n};\n\nconst handleOnMouseLeave = () => {\n  state.showMenu\n    ? null\n    : props.isEditMode\n    ? null\n    : State.update({ show: false });\n};\n\nconst handleOpenMenu = () => {\n  State.update({ showMenu: true, show: false });\n};\n\nconst handleCloseMenu = () => {\n  State.update({ showMenu: false, show: false });\n};\n\nconst handleSelectComponent = (component) => {\n  State.update({ showMenu: false });\n\n  const widgetId = `${component.accountId}/widget/${component.widgetName}`;\n\n  // For backward compatibility\n  if (props.apps) {\n    const app = props.apps.find((app) => app.componentId === widgetId);\n    props.createUserLink(app.id);\n  } else {\n    // ToDo: delete legacy\n    props.createUserLink(widgetId);\n  }\n};\n\nconst handleRemoveWidget = (linkId) => {\n  props.deleteUserLink(linkId);\n};\n\nconst handleEditClick = () => {\n  props.enableEditMode();\n};\n\nconst handleApplyClick = () => {\n  props.disableEditMode();\n};\n\nconst OverlayTriggerWrapper = styled.div`\n  display: flex;\n  z-index: 500;\n\n  .OverlayTrigger {\n    position: absolute;\n    background: #db504a;\n    border: 1px solid #db504a;\n    width: 6px;\n    height: 49px;\n    right: -6px;\n    top: 10px;\n    border-radius: 0px 4px 4px 0px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-sizing: border-box;\n    z-index: 79;\n  }\n`;\nconst SupportingSpan = styled.span`\n  display: inline-block;\n  width: 100%;\n  height: 30px;\n  margin-bottom: 0px;\n`;\n\nconst TriggerShowPanel = styled.div`\n  width: 40px;\n  height: auto;\n  border-radius: 0px 4px 4px 0px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: absolute;\n  right: -33px;\n  top: 10px;\n`;\n\nconst TriggerShowLabel = styled.div`\n  background: #db504a;\n  display: flex;\n  border-radius: 0px 4px 4px 0px;\n  z-index: 1100;\n  cursor: pointer;\n  position: absolute;\n  height: calc(100% - 22px);\n  top: -1px;\n  width: 40px;\n  @keyframes scaleAnimation {\n    0% {\n      opacity: 1;\n      transform-origin: top left;\n      transform: scaleX(0) scaleY(0);\n    }\n\n    100% {\n      opacity: 0.5;\n\n      transform-origin: top left;\n      transform: scaleX(1) scaleY(1.2);\n      display: none;\n    }\n  }\n  animation: scaleAnimation 0.5s ease forwards;\n  transition: all 0.3s;\n`;\n\nconst ActionsWrapper = styled.div`\n  z-index: 1080;\n  border-radius: 0px 4px 4px 0px;\n  transition: all 0.3s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @keyframes translateAnimation {\n    0% {\n      display: none;\n      width: 0px;\n      opacity: 0.3;\n      min-height: 0px;\n      height: 0px;\n      transform-origin: top left;\n      transform: scale(0);\n    }\n    80% {\n      opacity: 1;\n    }\n    100% {\n      padding-top: 6px;\n      border: 1px solid #db504a;\n      opacity: 1;\n      right: 60px;\n      height: auto;\n      width: 40px;\n      min-height: 34px;\n      background: #fff;\n      transform-origin: top left;\n      transform: scale(1);\n    }\n  }\n  animation: translateAnimation 0.5s ease forwards;\n`;\n\nconst TriggerEar = styled.div`\n  display: block;\n  width: 2px;\n  height: 2px;\n  border-radius: 2px;\n  background: #fff;\n  position: relative;\n  &:before {\n    content: \"\";\n    display: block;\n    width: 2px;\n    height: 2px;\n    border-radius: 2px;\n    background: #fff;\n    position: absolute;\n    top: 4px;\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    display: block;\n    width: 2px;\n    height: 2px;\n    border-radius: 2px;\n    background: #fff;\n    bottom: 4px;\n  }\n`;\n\nconst ButtonPlus = styled.div`\n  display: flex;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  background: #fff;\n  position: relative;\n  transform: translateY(6px);\n  cursor: pointer;\n  border: 1px solid #e3e3e3;\n  &:before {\n    content: \"\";\n    display: block;\n    width: 1.5px;\n    height: 11px;\n    border-radius: 2px;\n    background: #747376;\n    position: absolute;\n    top: 6px;\n    left: 11px;\n  }\n  &:after {\n    content: \"\";\n    display: block;\n    height: 1px;\n    width: 11px;\n    border-radius: 2px;\n    background: #747376;\n    position: absolute;\n    top: 11px;\n    left: 6px;\n  }\n  @keyframes translateAnimationBtn {\n    0% {\n      opacity: 0;\n    }\n\n    100% {\n      opacity: 1;\n    }\n  }\n  animation: translateAnimationBtn 0.5s linear forwards;\n  transition: all 0.3s;\n  &:hover {\n    box-shadow: 0px 4px 20px 0px rgba(11, 87, 111, 0.15),\n      0px 4px 5px 0px rgba(45, 52, 60, 0.1);\n  }\n`;\nconst WrapperButtonPlusDefault = styled.div`\n  width: 43px;\n  height: 49px;\n  border-radius: 0px 4px 4px 0px;\n  position: absolute;\n  top: 30px;\n  background: #db504a;\n  z-index: 1081;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nconst ButtonPlusDefault = styled.div`\n  display: flex;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  bottom: 7px;\n  background: #db504a;\n  position: relative;\n  transform: translateY(6px);\n  cursor: pointer;\n  border: 1px solid #fff;\n  &:before {\n    content: \"\";\n    display: block;\n    width: 1.5px;\n    height: 11px;\n    border-radius: 2px;\n    background: #fff;\n    position: absolute;\n    top: 6px;\n    left: 10.5px;\n  }\n  &:after {\n    content: \"\";\n    display: block;\n    height: 1.5px;\n    width: 11px;\n    border-radius: 2px;\n    background: #fff;\n    position: absolute;\n    top: 11px;\n    left: 6px;\n  }\n  @keyframes translateAnimationBtn {\n    0% {\n      opacity: 0;\n    }\n\n    100% {\n      opacity: 1;\n    }\n  }\n  animation: translateAnimationBtn 0.5s linear forwards;\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.2) translateY(6px);\n  }\n`;\n\nconst WidgetBadgeWrapper = styled.div`\n  position: absolute;\n  right: 0;\n\n  z-index: 1200;\n  // styles for edit mode\n  background: rgba(255, 255, 255, 0.35);\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  top: -2px;\n  backdrop-filter: blur(1px);\n`;\n\nconst iconClose = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n  >\n    <path\n      d=\"M18 6L6 18\"\n      stroke=\"#222222\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M6 6L18 18\"\n      stroke=\"#222222\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\nconst CloseMenu = styled.span`\n  &:hover {\n    transform: scale(1.2);\n  }\n`;\n\nconst OnboardingButton = styled.button`\n  &:hover {\n    background: #eb9dab;\n  }\n`;\n\nconst iconDropdown = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"14\"\n    height=\"8\"\n    viewBox=\"0 0 14 8\"\n    fill=\"none\"\n  >\n    <path\n      d=\"M1 1L7 7L13 1\"\n      stroke=\"#747376\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\nconst ButtonEdit = styled.button`\n  position: absolute;\n  top: -30px;\n  margin-bottom: 0;\n  border: none;\n  cursor: pointer;\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  padding: 0;\n\n  border: 1px solid #e3e3e3;\n  box-sizing: border-box;\n  background: #fff;\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.2);\n  }\n`;\n\nconst ButtonApply = styled.button`\n  position: absolute;\n  top: -30px;\n  margin-bottom: 0;\n  border: none;\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  padding: 0;\n\n  cursor: pointer;\n  box-sizing: border-box;\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.2);\n  }\n`;\n\nconst ButtonCancel = styled.button`\n  &:hover {\n    background: #747376;\n  }\n`;\n\nconst iconSwitch = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"32\"\n    height=\"20\"\n    viewBox=\"0 0 32 20\"\n    fill=\"none\"\n  >\n    <rect width=\"32\" height=\"20\" rx=\"10\" fill=\"#DB504A\" />\n    <path\n      d=\"M14 10C14 5.58172 17.5817 2 22 2C26.4183 2 30 5.58172 30 10C30 14.4183 26.4183 18 22 18C17.5817 18 14 14.4183 14 10Z\"\n      fill=\"white\"\n    />\n  </svg>\n);\n\nconst ActionBlock = styled.span`\n  position: relative;\n  div {\n    z-index: 1000;\n  }\n`;\n\nconst FloatingModal = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  animation: falling-animation 0.3s linear forwards;\n\n  @keyframes falling-animation {\n    from {\n      transform: translate(-50%, -200%);\n    }\n\n    to {\n      transform: translate(-50%, -50%);\n    }\n  }\n`;\n\nconst iconEdit = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"14\"\n    height=\"14\"\n    viewBox=\"0 0 14 14\"\n    fill=\"none\"\n  >\n    <path\n      d=\"M12 7L2 7\"\n      stroke=\"#747376\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\nconst iconApply = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"22\"\n    height=\"22\"\n    viewBox=\"0 0 22 22\"\n    fill=\"none\"\n  >\n    <circle cx=\"11\" cy=\"11\" r=\"11\" fill=\"#3D7FFF\" />\n    <path\n      d=\"M17 7L8.75 15L5 11.3636\"\n      stroke=\"white\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\nreturn (\n  <OverlayTriggerWrapper onMouseOver={handleOnMouseEnter}>\n    <div style={{ opacity: state.show ? 0 : 1 }} className=\"OverlayTrigger\">\n      <TriggerEar />\n    </div>\n    {state.show ? (\n      <TriggerShowPanel\n        onMouseLeave={handleOnMouseLeave}\n        style={{\n          margin: \"0px -7px\",\n          top: props.widgets && props.widgets.length ? \"\" : \"-10px\",\n        }}\n      >\n        <SupportingSpan />\n\n        <ActionsWrapper\n          style={{\n            backgroundColor:\n              props.widgets && props.widgets.length ? \"\" : \"#DB504A!important\",\n          }}\n        >\n          <TriggerShowLabel />\n\n          {props.widgets.map((widget) => (\n            <ActionBlock key={widget.linkId}>\n              {props.isEditMode ? (\n                <WidgetBadgeWrapper\n                  className={\n                    widget.linkAuthorId === context.accountId\n                      ? \"WidgetHover\"\n                      : \"\"\n                  }\n                  title={\n                    widget.linkAuthorId === context.accountId\n                      ? `Remove ${widget.src.split(\"widget/\").pop()}`\n                      : \"disable in edit mode\"\n                  }\n                  style={{\n                    opacity:\n                      widget.linkAuthorId === context.accountId ? \"1\" : \"0\",\n                  }}\n                >\n                  {widget.linkAuthorId === context.accountId ? (\n                    <Widget\n                      src=\"bos.dapplets.near/widget/LayoutManager.DeleteWidgetButton\"\n                      props={{\n                        onClick: () => handleRemoveWidget(widget.linkId),\n                      }}\n                    />\n                  ) : // <Widget src=\"bos.dapplets.near/widget/LayoutManager.LockedWidgetBadge\" />\n                  null}\n                </WidgetBadgeWrapper>\n              ) : null}\n              <Widget src={widget.src} props={widget.props} />\n            </ActionBlock>\n          ))}\n\n          {props.isEditMode ? (\n            <ButtonApply\n              style={{\n                display:\n                  props.widgets && props.widgets.length ? \"flex\" : \"none\",\n              }}\n              onClick={handleApplyClick}\n            >\n              {iconApply}\n            </ButtonApply>\n          ) : (\n            <ButtonEdit\n              style={{\n                display:\n                  props.widgets && props.widgets.length ? \"flex\" : \"none\",\n              }}\n              onClick={handleEditClick}\n            >\n              {iconEdit}\n            </ButtonEdit>\n          )}\n        </ActionsWrapper>\n        {props.widgets && props.widgets.length ? (\n          <>\n            <SupportingSpan />\n            <ButtonPlus\n              style={{\n                transform:\n                  props.widgets && props.widgets.length\n                    ? \"translateY(-25px)\"\n                    : \"translateY(39px)\",\n\n                position:\n                  props.widgets && props.widgets.length ? \"unset\" : \"absolute\",\n                zIndex: \"1081\",\n              }}\n              onClick={handleOpenMenu}\n            />\n          </>\n        ) : (\n          <WrapperButtonPlusDefault>\n            {\" \"}\n            <ButtonPlusDefault onClick={handleOpenMenu} />\n          </WrapperButtonPlusDefault>\n        )}\n      </TriggerShowPanel>\n    ) : null}\n\n    {state.showMenu ? (\n      <DappletOverlay>\n        <FloatingModal>\n          <Widget\n            props={{\n              handleCloseMenu: handleCloseMenu,\n              onSelect: handleSelectComponent,\n              apps: props.apps,\n            }}\n            src=\"bos.dapplets.near/widget/ComponentsSearch\"\n          />\n        </FloatingModal>\n      </DappletOverlay>\n    ) : null}\n  </OverlayTriggerWrapper>\n);\n", "metadata": {"fork_of": "bos.dapplets.near/widget/ContextActionsGroup@112902821"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/ContextActionsGroup", "fact_widget_deployments_id": "2cf47de5b751ed38d50cd557d11bbc28", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 119}