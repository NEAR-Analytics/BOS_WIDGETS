{"tx_hash": "GK2azywsVzxhtysTRnH3S4xkXFzj4ureoJNBKMWQAjD8", "action_id_social": "2YVE89cKHtWPC6X5dwHXqe4ha8icWat7hvw3vCfpMeTq-0-widget", "block_id": 117730114, "block_timestamp": "2024-04-27T10:04:02.132Z", "signer_id": "bos.dapplets.near", "widget_name": "DefaultLayoutManager", "source_code": "if (!props.widgets || props.widgets.length === 0) return <></>;\n\nconst [waitingAppIdsSet, changeWaitingAppIdsSet] = useState(new Set());\n\nconst handleRemoveWidget = (linkId) => {\n  changeWaitingAppIdsSet((val) => val.add(linkId));\n  const callback = () => {\n    waitingAppIdsSet.delete(linkId);\n    changeWaitingAppIdsSet((val) => {\n      val.delete(linkId);\n      return val;\n    });\n  };\n  props.deleteUserLink(linkId).then(callback).catch(callback);\n};\n\nconst Container = styled.div`\n  display: flex;\n  gap: 8px;\n  margin-left: 8px;\n`;\n\nconst WidgetWrapper = styled.div`\n  max-width: 100%;\n  min-width: 18px;\n  position: relative;\n`;\n\nconst WidgetBadgeWrapper = styled.div`\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  z-index: 1200;\n  background: rgba(255, 255, 255, 0.35);\n  width: 100%;\n  height: 100%;\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  justify-content: center;\n  border-radius: 4%;\n  backdrop-filter: blur(0.5px);\n  div {\n    padding: 2px;\n  }\n`;\n\nreturn (\n  <Container>\n    {props.widgets\n      .filter((w) => w.isSuitable === undefined || w.isSuitable === true)\n      .map((widget) => {\n        const WrapperComponent = props.components?.find(\n          (cmp) => cmp.target.insteadOf?.linkId === widget.linkId\n        )?.component;\n\n        return (\n          <WidgetWrapper key={widget.linkId}>\n            {props.isEditMode ? (\n              <WidgetBadgeWrapper\n                title={\n                  widget.linkAuthorId === context.accountId\n                    ? `Remove ${widget.src\n                        .split(\"widget/\")\n                        .pop()} injected by ${widget.linkAuthorId} (link ID: ${\n                        widget.linkId\n                      })`\n                    : \"disable in edit mode \"\n                }\n                style={{\n                  opacity:\n                    widget.linkAuthorId === context.accountId ? \"1\" : \"0\",\n                }}\n              >\n                {widget.linkAuthorId === context.accountId ? (\n                  waitingAppIdsSet.has(widget.linkId) ? (\n                    <span\n                      role=\"status\"\n                      aria-hidden=\"true\"\n                      class=\"spinner-grow spinner-grow-sm\"\n                    />\n                  ) : (\n                    <Widget\n                      src=\"bos.dapplets.near/widget/LayoutManager.DeleteWidgetButton\"\n                      props={{\n                        onClick: () => handleRemoveWidget(widget.linkId),\n                      }}\n                    />\n                  )\n                ) : null}\n              </WidgetBadgeWrapper>\n            ) : null}\n            {WrapperComponent ? (\n              <WrapperComponent\n                context={props.context}\n                children={<Widget src={widget.src} props={widget.props} />}\n              />\n            ) : (\n              <Widget src={widget.src} props={widget.props} />\n            )}\n          </WidgetWrapper>\n        );\n      })}\n\n    {props.components\n      ?.filter((cmp) => !cmp.target.insteadOf?.linkId)\n      .map((Component, i) => (\n        <WidgetWrapper key={i}>\n          <Component context={props.context} />\n        </WidgetWrapper>\n      ))}\n  </Container>\n);\n", "metadata": {}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/DefaultLayoutManager", "fact_widget_deployments_id": "2fac7952377a1aedfee5a6f961d2a032", "inserted_timestamp": "2024-04-27T11:43:57.504Z", "modified_timestamp": "2024-04-27T11:43:57.504Z", "__row_index": 3}