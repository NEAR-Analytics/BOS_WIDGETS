{"tx_hash": "9MuCT9PWFGEQJh7YZdpuDBcM3kMdoNvR26LqNTyL2WdT", "action_id_social": "2rJNmBvPTdKUXX5QNb3vrBDNmNTHopzS3gEmxjPeo5Cz-0-widget", "block_id": 110569945, "block_timestamp": "2024-01-16T19:15:06.839Z", "signer_id": "bos.dapplets.near", "widget_name": "PaywallUploadWidget", "source_code": "State.init({\n  img: null,\n  isUpload: false,\n});\nconst uploadFileUpdateState = (body) => {\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body,\n  }).then((res) => {\n    const cid = res.body.cid;\n    State.update({ img: { cid } });\n  });\n};\n\nconst filesOnChange = (files) => {\n  if (files) {\n    State.update({ img: { uploading: true, cid: null } });\n    uploadFileUpdateState(files[0]);\n  }\n};\nconst iconBtnUpload = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n  >\n    <path\n      d=\"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15\"\n      stroke=\"white\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M17 8L12 3L7 8\"\n      stroke=\"white\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M12 3V15\"\n      stroke=\"white\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\n\nconst WrapperWidget = styled.div`\n`;\nreturn (\n  <WrapperWidget>\n    <Files\n      multiple={false}\n      accepts={[\"image/*\"]}\n      minFileSize={1}\n      clickable\n      className=\"btn btn-outline-primary\"\n      onChange={filesOnChange}\n    >\n      {iconBtnUpload}\n      {state.img?.uploading ? <> Uploading </> : \"Upload image\"}\n    </Files>\n    {state.img.cid && (\n      <img\n        src={`https://ipfs.near.social/ipfs/${state.img.cid}`}\n        alt=\"uploaded\"\n      />\n    )}\n  </WrapperWidget>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.dapplets.near/widget/PaywallUploadWidget", "fact_widget_deployments_id": "851389cd55676efb29ac5b5a19c95f86", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}