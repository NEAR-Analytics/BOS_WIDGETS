{"tx_hash": "Bcp7qxUw48xBdSasnTdZWSJFTmBHkvfXqxyYBTTdPZtx", "action_id_social": "HtbuGQiE5XabUUxi61YYToYhWGqRGDjEeqoyikoz1AC-0-widget", "block_id": 120059938, "block_timestamp": "2024-05-30T11:00:08.118Z", "signer_id": "dev.near", "widget_name": "op-request-task", "source_code": "const {\n  apiUrl,\n  sessionId,\n  problemId,\n  annotations,\n  pendingRequest,\n  setPendingRequest,\n  onRequest,\n} = props;\n\nif (typeof onRequest !== \"function\") {\n  onRequest = (data) => console.log(\"onRequest\", data);\n}\n\nif (typeof setPendingRequest !== \"function\") {\n  setPendingRequest = (data) => console.log(\"setPendingRequest\", data);\n}\n\nconst requestTask = () => {\n  if (!pendingRequest) {\n    setPendingRequest(true);\n    asyncFetch(`${apiUrl}/request_annotation/`, {\n      method: \"POST\",\n      body: JSON.stringify({\n        account_id: context.accountId,\n        session_id: sessionId,\n        problem_id: problemId,\n      }),\n    }).then((res) => {\n      if (res.ok) {\n        onRequest(res.body);\n      }\n      console.log(\"request_annotation resp\", res.ok, res.body);\n      setPendingRequest(false);\n    });\n  }\n};\n\nreturn (\n  <div\n    class=\"h-100 d-flex justify-content-center align-items-center\"\n    align=\"center\"\n    style={{ minHeight: \"400px\" }}\n  >\n    <div>\n      {(annotations ?? []).length == 0 && <p>No pending tasks found.</p>}\n      <button onClick={() => requestTask()}>Create new task</button>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dev.near/widget/op-request-task", "fact_widget_deployments_id": "21f8a52669dab1b5b8166546c70e2ebe", "inserted_timestamp": "2024-05-30T12:50:25.428Z", "modified_timestamp": "2024-05-30T12:50:25.428Z", "__row_index": 0}