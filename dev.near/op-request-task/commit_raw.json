{"tx_hash": "GhYThtWQ3r1f18wAiJuRtnsBLxRT4id2Q42rzvLW21f5", "action_id_social": "JDuFLdM3i5MAtv6fHFMUrV7qH2rEXjBfJp1actrZALrp-0-widget", "block_id": 120074920, "block_timestamp": "2024-05-30T16:16:10.807Z", "signer_id": "dev.near", "widget_name": "op-request-task", "source_code": "const {\n  apiUrl,\n  sessionId,\n  problemId,\n  annotations,\n  pendingRequest,\n  setPendingRequest,\n  onRequest,\n} = props;\n\nif (typeof onRequest !== \"function\") {\n  onRequest = (data) => console.log(\"onRequest\", data);\n}\n\nif (typeof setPendingRequest !== \"function\") {\n  setPendingRequest = (data) => console.log(\"setPendingRequest\", data);\n}\n\nconst requestTask = () => {\n  if (!pendingRequest) {\n    setPendingRequest(true);\n    asyncFetch(`${apiUrl}/request_annotation/`, {\n      method: \"POST\",\n      body: JSON.stringify({\n        account_id: context.accountId,\n        session_id: sessionId,\n        problem_id: problemId,\n      }),\n    }).then((res) => {\n      if (res.ok) {\n        onRequest(res.body);\n      }\n      console.log(\"request_annotation resp\", res.ok, res.body);\n      setPendingRequest(false);\n    });\n  }\n};\n\nreturn (\n  <div\n    class=\"h-100 d-flex justify-content-center align-items-center\"\n    align=\"center\"\n    style={{ minHeight: \"400px\" }}\n  >\n    <div>\n      {(annotations ?? []).length == 0 && <p>No pending projects found.</p>}\n      <button onClick={() => requestTask()}>Create new project</button>\n    </div>\n  </div>\n);\n", "metadata": {"fork_of": "dev.near/widget/op-request-task@120059938"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dev.near/widget/op-request-task", "fact_widget_deployments_id": "6986b01acfec257ddd5d0423179776b8", "inserted_timestamp": "2024-05-30T17:45:16.932Z", "modified_timestamp": "2024-05-30T17:45:16.932Z", "__row_index": 0}