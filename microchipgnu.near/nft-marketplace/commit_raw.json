{"tx_hash": "2Y8rwxWEX1gCwuajtrBxdsN8EYzMKYomy1VqDZKXAgep", "action_id_social": "FHUominnojGtvc6fSWx2EnAVYybwFqonKvd2TxM2jDXT-0-widget", "block_id": 83837455, "block_timestamp": "2023-01-26T12:43:55.101Z", "signer_id": "microchipgnu.near", "widget_name": "nft-marketplace", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) {\n  return `Not connected...`;\n}\n\nconst data = fetch(\"https://graph.mintbase.xyz\", {\n  method: \"POST\",\n  headers: {\n    \"mb-api-key\": \"omni-site\",\n    \"Content-Type\": \"application/json\",\n    \"x-hasura-role\": \"anonymous\",\n  },\n  body: JSON.stringify({\n    query: `\n      query MyQuery {\n        mb_views_active_listings(limit: 10, order_by: {created_at: desc}, where: {market_id: {_eq: \"simple.market.mintbase1.near\"}}) {\n            listed_by\n            created_at\n            price\n            nft_contract_id\n            token_id\n            metadata_id\n        }   \n      }\n`,\n  }),\n});\n\nif (!data.ok) {\n  return \"Loading\";\n}\n\nconst size = \"10em\";\n\nreturn data !== null ? (\n  <>\n    <h1>My Market</h1>\n    <p>Buying from this widget will redirect 1.25% of the sale for me.</p>\n    <div className=\"d-flex gap-4 flex-wrap\">\n      {data.body.data?.mb_views_active_listings.map((listing, i) => {\n        const priceNear = (listing.price / 1e24)\n          .toLocaleString()\n          .replace(/,/g, \"\");\n        const priceYocto = listing.price.toLocaleString().replace(/,/g, \"\");\n\n        return (\n          <div className=\"d-flex flex-column gap-1\">\n            <Widget\n              src=\"mob.near/widget/NftImage\"\n              props={{\n                nft: {\n                  tokenId: listing.token_id,\n                  contractId: listing.nft_contract_id,\n                },\n                style: {\n                  width: size,\n                  height: size,\n                  objectFit: \"cover\",\n                  minWidth: size,\n                  minHeight: size,\n                  maxWidth: size,\n                  maxHeight: size,\n                  overflowWrap: \"break-word\",\n                },\n                thumbnail: \"thumbnail\",\n                className: \"\",\n                fallbackUrl:\n                  \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\n              }}\n            />\n            <button onClick={() => console.log(1)}>\n              Buy for {priceNear} N\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  </>\n) : (\n  <p>loading...</p>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/microchipgnu.near/widget/nft-marketplace", "fact_widget_deployments_id": "8d48044ddb76b2d92d02fc85e5ff433f", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 39}