{"tx_hash": "5LH3SWksPjXVMMNKH5Y6jnCza4ATWe7s5L8k3QqyHKCG", "action_id_social": "4mLq9LEV9j7GyvmNnQvkgmFCRuV1EZjTEgd3xk2X1iGs-0-widget", "block_id": 113866176, "block_timestamp": "2024-03-01T06:33:27.606Z", "signer_id": "itexpert120-contra.near", "widget_name": "Button.Create", "source_code": "const { Button } = VM.require(\"buildhub.near/widget/components\") || {\n  Button: () => <></>,\n};\n\nconst accountId = context.accountId;\n\nif (!accountId) {\n  return <div>No Account Id</div>;\n}\n\nconst [id, setId] = useState(\"\");\nconst [label, setLabel] = useState(\"Button Label\");\nconst [onClick, setOnClick] = useState('() => { console.log(\"Hello World\"); }');\nconst [code, setCode] = useState(\"\");\nconst [showWidget, setShowWidget] = useState(false);\n\nconst preview = useMemo(() => {\n  setCode(`const { Button } = VM.require(\"buildhub.near/widget/components\") || { Button: () => <></> };\n\n  return <Button onClick={${onClick}} variant=\"primary\">\n    ${label}\n  </Button>`);\n  setShowWidget(false);\n}, [label, onClick]);\n\nconst handleOnClick = () => {\n  Social.set(\n    {\n      widget: {\n        [`Event-${id}-Button`]: {\n          \"\": code,\n        },\n      },\n    },\n    {\n      onCommit: () => setShowWidget(true),\n    }\n  );\n};\n\nreturn (\n  <div>\n    <h1>Event Custom Button Creator</h1>\n    <div className=\"form-group mb-3\">\n      <label>Button Id</label>\n      <input\n        className=\"form-control\"\n        type=\"text\"\n        value={id}\n        onChange={(e) => setId(e.target.value)}\n      />\n    </div>\n    <div className=\"form-group mb-3\">\n      <label>Button Label</label>\n      <input\n        className=\"form-control\"\n        type=\"text\"\n        value={label}\n        onChange={(e) => setLabel(e.target.value)}\n      />\n    </div>\n    <div className=\"form-group mb-3\">\n      <label>On Click</label>\n      <textarea\n        className=\"form-control\"\n        type=\"text\"\n        value={onClick}\n        onChange={(e) => setOnClick(e.target.value)}\n      />\n    </div>\n    <div className=\"mb-3\">\n      <Button disabled={!id} onClick={handleOnClick} variant=\"primary\">\n        Launch\n      </Button>\n    </div>\n    {showWidget && (\n      <div class=\"alert alert-primary\" role=\"alert\">\n        Button Widget Link: {`${accountId}/widget/Event-${id}-Button`}\n      </div>\n    )}\n    <div>\n      <h2>Preview</h2>\n      <Widget code={code} />\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/itexpert120-contra.near/widget/Button.Create", "fact_widget_deployments_id": "43701e4715784c60067d061bff79215e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}