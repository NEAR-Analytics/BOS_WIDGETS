{"tx_hash": "7QqjmVndSZVV5swsuibqNaNVGEAjRhjyzdWrGSTi7SBk", "action_id_social": "7dJw1ZiYurcEKqo6FF5EmXUiYygrQsDGgFEDUpXbinCS-0-widget", "block_id": 106434726, "block_timestamp": "2023-11-24T14:42:04.354Z", "signer_id": "communityevent.near", "widget_name": "city", "source_code": "const Button = styled.button`\n  margin: 5px;\n  background-color: #00EC97;\n  color: #151515;\n`;\n\nconst CityContainer = styled.div`\n  display: flex;\n  border: 1px solid #151515;\n  background-color: #F4F4F4;\n`;\n\nconst CityInfo = styled.div`\n  flex: 1;\n  padding: 10px;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  padding: 10px;\n`;\n\nconst city = props.city;\n\nState.init({\n  showVoters: false,\n});\n\nconst contract = \"communityevent.near\";\nconst handleClickYes = () => {\n  Near.call(contract, \"vote_yes\", { city_name: city[0] });\n};\n\nconst isSignedIn = context.accountId;\n\nreturn (\n  <CityContainer>\n    <CityInfo>\n      <h2>{city[0]}</h2>\n      <p>votes: {city[1].votes}</p>\n      <Button\n        className=\"btn-view\"\n        onClick={() => State.update({ showVoters: !state.showVoters })}\n      >\n        View voters\n      </Button>\n      <div>\n        {state.showVoters && (\n          <p>\n            {city[1].accounts.map((account, index) => (\n              <div key={index}>{account}</div>\n            ))}\n          </p>\n        )}\n      </div>\n    </CityInfo>\n\n    <ButtonsContainer>\n      <Button\n        className=\"btn-yes\"\n        onClick={() => handleClickYes()}\n        disabled={!isSignedIn}\n      >\n        Upvote\n      </Button>\n    </ButtonsContainer>\n  </CityContainer>\n);\n", "metadata": {"fork_of": "communityevent.near/widget/city@106434214"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/communityevent.near/widget/city", "fact_widget_deployments_id": "69d7ea30474570dfc66d69186dd8a10d", "inserted_timestamp": "2023-11-24T16:38:12.846Z", "modified_timestamp": "2023-11-24T16:38:12.846Z", "__row_index": 29}