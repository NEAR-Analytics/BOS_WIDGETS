{"tx_hash": "6ctmXaVgxAL3eH443oKkX2RFf99Lp6fiUhQEB8s4prZ2", "action_id_social": "6bX5Szg6rVTqA5DbCNm7jGBnpoMewnB3ZMUc5Ft1BGpk-0-widget", "block_id": 106436540, "block_timestamp": "2023-11-24T15:18:07.923Z", "signer_id": "communityevent.near", "widget_name": "city", "source_code": "const Button = styled.button`\n  margin: 5px;\n  background-color: #00EC97;\n  color: #151515;\n`;\n\nconst CityContainer = styled.div`\n  display: flex;\n  border: 1px solid #151515;\n  background-color: #F4F4F4;\n`;\n\nconst CityInfo = styled.div`\n  flex: 1;\n  padding: 10px;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  padding: 10px;\n`;\n\nconst VotesText = styled.p`\n  margin: 5px;\n`;\n\nconst Voters = styled.p`\n  margin: 5px;\n`;\n\nconst city = props.city;\n\nState.init({\n  showVoters: false,\n});\n\nconst contract = \"communityevent.near\";\nconst handleClickYes = () => {\n  Near.call(contract, \"vote_yes\", { city_name: city[0] });\n};\n\nconst isSignedIn = context.accountId;\n\nreturn (\n  <CityContainer>\n    <CityInfo>\n      <h2>{city[0]}</h2>\n      <VotesText>votes: {city[1].votes}</VotesText>\n      <Button\n        className=\"btn-view\"\n        onClick={() => State.update({ showVoters: !state.showVoters })}\n      >\n        View voters\n      </Button>\n      <Voters>\n        {state.showVoters && (\n          <p>\n            {city[1].accounts.map((account, index) => (\n              <div key={index}>{account}</div>\n            ))}\n          </p>\n        )}\n      </Voters>\n    </CityInfo>\n\n    <ButtonsContainer>\n      <Button\n        className=\"btn-yes\"\n        onClick={() => handleClickYes()}\n        disabled={!isSignedIn}\n      >\n        Upvote\n      </Button>\n    </ButtonsContainer>\n  </CityContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/communityevent.near/widget/city", "fact_widget_deployments_id": "7e3db2f183a7b0f328ef2a96bb67bb8d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}