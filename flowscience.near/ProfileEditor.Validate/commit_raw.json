{"tx_hash": "BUXxSFJ75v95EhBB4eSE14c2ica3Cvk8b1MPXbzKcQhi", "action_id_social": "DNxFfztdgqy4wLzjgVcF4LUQYPsTfwKTXsBVxekd7muU-0-widget", "block_id": 111308229, "block_timestamp": "2024-01-25T20:55:08.188Z", "signer_id": "flowscience.near", "widget_name": "ProfileEditor.Validate", "source_code": "const accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet to edit your profile\";\n}\n\nlet profile = Social.getr(`${accountId}/profile`);\n\nif (profile === null) {\n  return \"Loading\";\n}\n\nState.init({\n  profile,\n});\n\nconst [isFormValid, setIsFormValid] = useState(false);\n\nconst validateProfile = (profile) => {\n  const requiredFields = [\n    \"name\",\n    \"image\",\n    \"backgroundImage\",\n    \"description\",\n    \"tags\",\n  ];\n\n  const linktreeFilled = profile.linktree.links.some(\n    (link) => link.name && link.name.trim() !== \"\"\n  );\n\n  const isValid =\n    requiredFields.every(\n      (field) => profile[field] && profile[field].trim() !== \"\"\n    ) && linktreeFilled;\n\n  setIsFormValid(isValid);\n};\n\nuseEffect(() => {\n  validateProfile(state.profile);\n}, [state.profile]);\n\nreturn (\n  <div className=\"row\">\n    <div className=\"col-lg-6\">\n      <div>\n        <h4>Edit profile of @{accountId}</h4>\n      </div>\n      <div className=\"mb-2\">\n        <Widget\n          src=\"near/widget/MetadataEditor\"\n          props={{\n            initialMetadata: profile,\n            onChange: (profile) => State.update({ profile }),\n            options: {\n              name: { label: \"Name\" },\n              image: { label: \"Profile picture\" },\n              backgroundImage: { label: \"Background image\" },\n              description: { label: \"About\" },\n              tags: {\n                label: \"Tags\",\n                tagsPattern: \"*/profile/tags/*\",\n                placeholder:\n                  \"rust, engineer, artist, humanguild, nft, learner, founder\",\n              },\n              linktree: {\n                links: [\n                  {\n                    label: \"Twitter\",\n                    prefix: \"https://twitter.com/\",\n                    name: \"twitter\",\n                  },\n                  {\n                    label: \"Github\",\n                    prefix: \"https://github.com/\",\n                    name: \"github\",\n                  },\n                  {\n                    label: \"Telegram\",\n                    prefix: \"https://t.me/\",\n                    name: \"telegram\",\n                  },\n                  {\n                    label: \"Website\",\n                    prefix: \"https://\",\n                    name: \"website\",\n                  },\n                ],\n              },\n            },\n          }}\n        />\n      </div>\n      <div className=\"mb-2\">\n        <CommitButton data={{ profile: state.profile }} disabled={!isFormValid}>\n          Save profile\n        </CommitButton>\n        <a\n          className=\"btn btn-outline-primary ms-2\"\n          href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n        >\n          View profile\n        </a>\n      </div>\n    </div>\n    <div className=\"col-lg-6\">\n      <div>\n        <Widget\n          src=\"mob.near/widget/ProfilePage\"\n          props={{ accountId, profile: state.profile }}\n        />\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/flowscience.near/widget/ProfileEditor.Validate", "fact_widget_deployments_id": "bf8a086cbb6bc0911e0a84f969eeb459", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}