{"tx_hash": "AQCJSNoiXM8gWMzzXp73eX68UFbtLVGiz76mofEzN4QL", "action_id_social": "43RZkuGyPHimqT2vgUZA6oN8wgZe3GFsmdDGGjXga638-0-widget", "block_id": 115680109, "block_timestamp": "2024-03-28T23:10:13.945Z", "signer_id": "flowscience.near", "widget_name": "eas", "source_code": "const user = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (!user) return <Web3Connect connectLabel=\"Connect\" />;\n\nconst easAbi = fetch(\n  \"https://raw.githubusercontent.com/ethereum-attestation-service/eas-contracts/master/deployments/optimism/EAS.json\"\n);\n\nconst contractAddress = \"0x4200000000000000000000000000000000000021\";\nconst parsedAbi = JSON.parse(easAbi.body);\nconst abi = parsedAbi.abi;\n\nconst [attestation, setAttestation] = useState(null);\nconst [error, setError] = useState(\"\");\nconst [uid, setUid] = useState(\"\");\n\nconst bytes32Uid = ethers.utils.formatBytes32String(uid).slice(0, 64); // '0x' + 64 hex characters\nconst easContract = new ethers.Contract(\n  contractAddress,\n  abi,\n  Ethers.provider().getSigner()\n);\n\nfunction getAttestation() {\n  abi\n    .getAttestation(bytes32Uid)\n    .then((result) => {\n      setAttestation(result);\n      setError(\"\");\n    })\n    .catch((error) => {\n      console.error(\"error fetching attestation:\", error);\n      setError(\"Failed to retrieve data. Please try with a verified address.\");\n    });\n}\n\nreturn (\n  <>\n    <div className=\"m-2\">\n      <h3>Get Attestation</h3>\n      <input\n        type=\"text\"\n        placeholder=\"input UID\"\n        value={uid}\n        onChange={(e) => setUid(e.target.value)}\n      />\n    </div>\n    <div className=\"m-2\">\n      <button className=\"btn btn-primary m-1\" onClick={getAttestation}>\n        Get Attestation\n      </button>\n      <p className=\"m-1\">{error}</p>\n    </div>\n    <div className=\"m-2\">\n      {attestation && (\n        <p className=\"m-2\">\n          <b>View Attestation:</b> {JSON.stringify(attestation)}\n        </p>\n      )}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/flowscience.near/widget/eas", "fact_widget_deployments_id": "ca40f5199290b914d9a5ccdf72fda0e0", "inserted_timestamp": "2024-03-29T00:52:03.862Z", "modified_timestamp": "2024-03-29T00:52:03.862Z", "__row_index": 15}