{"tx_hash": "DHMYULP1pZF5ozKfoZtF2863LfTwd3iZcdiTDnAYpGko", "action_id_social": "B9kX1fsB9JzVN91bifCUgNfyr1eQYqHwLuYT8uMGvE4q-0-widget", "block_id": 116715328, "block_timestamp": "2024-04-12T22:44:09.155Z", "signer_id": "flowscience.near", "widget_name": "GitHubSearchSelect", "source_code": "const [query, setQuery] = useState(\"\");\nconst [repositories, setRepositories] = useState([]);\nconst [error, setError] = useState(null);\nconst [isLoading, setIsLoading] = useState(false);\n\nconst githubApiBaseUrl = \"https://api.github.com\";\n\nconst onSelectRepository = () => {};\n\nconst handleSearch = () => {\n  if (query.trim() === \"\") {\n    setError(\"Please enter a valid search query.\");\n    return;\n  }\n\n  setIsLoading(true);\n  setError(null);\n\n  const apiUrl = `${githubApiBaseUrl}/search/repositories?q=${query}`;\n\n  asyncFetch(apiUrl)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      return response;\n    })\n    .then((data) => {\n      console.log(data);\n\n      setIsLoading(false);\n\n      if (data.body.items.length > 0) {\n        setRepositories(data.body.items);\n        setError(null);\n      } else {\n        setRepositories([]);\n        setError(\"no repositories found.\");\n      }\n    })\n    .catch((error) => {\n      setIsLoading(false);\n      setRepositories([]);\n      setError(\"error fetching data from GitHub API\");\n      console.error(error);\n    });\n};\n\nreturn (\n  <div>\n    <div className=\"m-2\">\n      <h5>GitHub API Example</h5>\n      <input\n        type=\"text\"\n        placeholder=\"input repository name or any keywords\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n      />\n    </div>\n    <div className=\"m-2\">\n      <button onClick={handleSearch} disabled={isLoading}>\n        {isLoading ? \"Searching...\" : \"Search\"}\n      </button>\n    </div>\n    {error && <p>{error}</p>}\n    <ul>\n      {repositories.map((repo) => (\n        <li key={repo.id}>\n          <a href={repo.html_url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {repo.full_name}\n          </a>\n          <button onClick={() => onSelectRepository(repo.full_name)}>\n            Select\n          </button>\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n", "metadata": {"fork_of": "create.near/widget/GitHub.API.Example@110391990"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/flowscience.near/widget/GitHubSearchSelect", "fact_widget_deployments_id": "3d7a74377d5ad86f7ff85e36e4b94b9c", "inserted_timestamp": "2024-04-13T00:44:59.674Z", "modified_timestamp": "2024-04-13T00:44:59.674Z", "__row_index": 0}