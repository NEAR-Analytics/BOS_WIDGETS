{"tx_hash": "V73DdEhYdndaFCisAutHFt6JWT6QBFr59ZRbbUx7BFe", "action_id_social": "FFbETJDjAL4ZGCWv2peA34arVHYcGMFq5RvEfXW27KsV-0-widget", "block_id": 112626181, "block_timestamp": "2024-02-11T18:14:48.212Z", "signer_id": "flowscience.near", "widget_name": "SchemaSelector", "source_code": "const [selectedSchema, setSelectedSchema] =\n  useState(\"\") || \"attestations.near/type/isTrue\";\nconst schemaType = props.schemaType || \"hyperfiles.near/type/schema\";\nconst schemaSrc = props.schemaSrc || \"attestations.near\";\n\nState.init({\n  schemaSrc,\n  selectedSchema: selectedSchema,\n  schemas: {},\n});\n\nlet availableSchemas = [];\nconst schemas = Social.get(`${state.schemaSrc}/type/**`, \"final\");\nif (schemas !== null) {\n  availableSchemas =\n    Object.keys(schemas)?.map((it) => `${state.schemaSrc}/type/${it}`) || [];\n}\n\nconsole.log(`Fetching schema for: ${selectedSchema}`);\nconst schemaDetails = Social.get(selectedSchema, \"final\");\nconsole.log(`Response for ${selectedSchema}:`, schemaDetails);\n\nconst handleSchemaChange = (e) => {\n  const newSchema = e.target.value;\n  State.update({\n    selectedSchema: newSchema,\n  });\n  if (!state.selectedSchema) {\n    console.error(\"Selected schema is undefined\");\n    return;\n  }\n};\n\nconst handleSchemaOwnerChange = (e) => {\n  const newSchemaSrc = e.target.value;\n  State.update({\n    schemaSrc: newSchemaSrc,\n  });\n  fetchSchemasList(newSchemaSrc);\n};\n\nconst renderSchemaSelection = () => {\n  return (\n    <FormContainer>\n      <Label>Schema Owner:</Label>\n      <Input\n        type=\"text\"\n        value={State.schemaSrc}\n        onChange={handleSchemaOwnerChange}\n      />\n      <Label>Schema:</Label>\n      <Select value={State.selectedSchema} onChange={handleSchemaChange}>\n        {State.schemasList.map((schema) => (\n          <option key={schema} value={schema}>\n            {schema}\n          </option>\n        ))}\n      </Select>\n    </FormContainer>\n  );\n};\n\nreturn { renderSchemaSelection };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/flowscience.near/widget/SchemaSelector", "fact_widget_deployments_id": "6ae2eb0d741e6e54f031771bf557a9bf", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}