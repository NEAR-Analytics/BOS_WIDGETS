{"tx_hash": "DKExKBndVkhPRavjRsDcJxq1xzKyvSu5eh7aGJ6X3uK5", "action_id_social": "2KFW8MALGqw3A5Aw4tkU9Vw73A6fex8Lchu7HxJLq6yf-0-widget", "block_id": 95564511, "block_timestamp": "2023-07-02T23:13:09.481Z", "signer_id": "asiyaasha.near", "widget_name": "coinSelector", "source_code": "const colors = {\n  brightRed: \"#ff3d00\",\n  deepBlue: \"#2835f8\",\n  lightBeige: \"#f4e9e1\",\n  slateBlack: \"#2B2B2B\",\n};\n\nconst DropdownIcon = styled.div`\n  border-bottom: 3px solid ${colors.brightRed};\n  border-left: 3px solid ${colors.brightRed};\n  height: 16px;\n  transform: ${(props) => (props.isOpen ? \"rotate(45deg)\" : \"rotate(0)\")};\n  transition: transform 0.3s ease;\n  width: 16px;\n`;\n\nconst ImgOptions = styled.img`\n  height: 22px;\n  width: 22px;\n`;\n\nconst Option = styled.div`\n  color: ${colors.lightBeige};\n  cursor: pointer;\n  display: flex;\n  font-size: 13px;\n  gap: 10px;\n  padding: 8px;\n  transition: background-color 0.3s ease 0s;\n\n  &:hover {\n    background-color: ${colors.deepBlue};\n    transform: scale(1.02);\n  }\n`;\n\nconst OptionsWrapper = styled.div`\n  background: ${colors.slateBlack};\n  border-radius: 16px;\n  max-height: 416px;\n  overflow-y: auto;\n  padding: 10px 2px;\n  width: 100%;\n  z-index: 1000;\n  margin-top: 8px;\n  position: absolute;\n`;\n\nconst SelectWrapper = styled.div`\n  align-items: center;\n  background: ${colors.lightBeige};\n  border: 1px solid #0E0E0E;\n  border-radius: 16px; \n  color: ${colors.slateBlack};\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  padding: 16px;\n\n  &:hover {\n    background-color: ${colors.slateBlack};\n    color: ${colors.lightBeige};\n  }\n`;\n\nconst Container = styled.div`\n  align-items: center;\n  position: relative;\n`;\n\nState.init({\n  selectedCoin: Storage.get(\"coinSelectValue\"),\n  renderOptions: null,\n});\n\nconst currency = props.currency || \"usd\";\nconst query = props.query || \"&order=market_cap_desc\";\nconst pagination = props.pagination || 50;\n\n// Coingeco API documentation\n// https://www.coingecko.com/api/documentations/v3#/\nconst BASE_URL = \"https://api.coingecko.com/api/v3/coins/markets\";\nconst CNS_URL = `${BASE_URL}?vs_currency=${currency}${query}&per_page=${pagination}&page=1\"`;\n\nconst coinsList = fetch(CNS_URL)?.body || [];\n\nfunction updateSelectedCoin(coin) {\n  State.update({ selectedCoin: coin, isOpen: false });\n  Storage.set(\"coinSelectValue\", state.selectedCoin);\n\n  if (props.handleOptionClick) {\n    props.handleOptionClick(coin);\n  }\n}\n\nif (!state.renderOptions && coinsList.length) {\n  const renderOptions = (\n    <OptionsWrapper>\n      {coinsList?.map((coin) => {\n        return (\n          <Option key={coin.id} onClick={() => updateSelectedCoin(coin)}>\n            {coin.image && <ImgOptions src={coin.image} alt=\"coin\" />}\n            {coin.name}\n          </Option>\n        );\n      })}\n    </OptionsWrapper>\n  );\n\n  State.update({ renderOptions });\n}\n\nconst { isOpen, selectedCoin } = state;\n\nreturn (\n  <Container>\n    <SelectWrapper onClick={() => State.update({ isOpen: !isOpen })}>\n      <>\n        {selectedCoin?.name ? (\n          <div>\n            <ImgOptions src={selectedCoin.image} />\n            {selectedCoin.name}\n          </div>\n        ) : (\n          \"Select a coin..\"\n        )}\n      </>\n      <DropdownIcon isOpen={isOpen} />\n    </SelectWrapper>\n    {isOpen && state.renderOptions}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/asiyaasha.near/widget/coinSelector", "fact_widget_deployments_id": "6af02f87a626097b5b1432ff0114fa6a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}