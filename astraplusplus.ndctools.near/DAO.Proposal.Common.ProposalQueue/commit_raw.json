{"tx_hash": "3GbfJSoJuVW7SUURWJUsBZw5eq2cpb3GT5BzTPHZZhfc", "action_id_social": "6ye7F5v22pZQmpE4LBQ7bVVj6e3L79tzmvCgiYBhwbac-0-widget", "block_id": 106674925, "block_timestamp": "2023-11-27T18:45:35.449Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposal.Common.ProposalQueue", "source_code": "const daoId = props.daoId;\nconst accountId = props.accountId ?? context.accountId;\nconst onUpdate = props.onUpdate;\n\nconst VotingBodyDaoId = props.dev\n    ? \"voting-body-v1.gwg-testing.near\"\n    : \"voting-body-v1.ndc-gwg.near\";\n\nconst isVotingBodyDao = props.daoId === VotingBodyDaoId;\n\nState.init({\n    proposalQueue: \"draft\", // for vb\n    attachDeposit: 0,\n    vbConfig: null\n});\n\nfunction onChangeProposalQueue(proposalQueue) {\n    const amount =\n        proposalQueue === \"draft\"\n            ? state.vbConfig?.pre_vote_bond\n            : state.vbConfig?.active_queue_bond;\n    onUpdate({\n        queue: proposalQueue,\n        amount: amount\n    });\n    State.update({\n        ...state,\n        proposalQueue: proposalQueue,\n        attachDeposit: amount\n    });\n}\n\nif (isVotingBodyDao) {\n    const config = useCache(\n        () => Near.asyncView(daoId, \"config\").then((data) => data),\n        daoId + \"-vb-config\",\n        { subscribe: false }\n    );\n    State.update({ vbConfig: config });\n    onChangeProposalQueue(state.proposalQueue);\n}\n\nif (isVotingBodyDao) {\n    return (\n        <div className=\"mb-3\">\n            <div>\n                To reduce a risk of spam, proposals require pre-vote community\n                support, or one congress member support, to move a proposal to\n                the active queue.{\" \"}\n                <a\n                    href={`https://github.com/near-ndc/voting-v1/tree/master/voting_body#pre-vote-queue`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{ color: \"rgb(68, 152, 224)\" }}\n                >\n                    More details\n                </a>{\" \"}\n            </div>\n            <Widget\n                src=\"nearui.near/widget/Input.Checkbox\"\n                props={{\n                    checked: state.proposalQueue === \"active\",\n                    onChange: (checked) =>\n                        checked\n                            ? onChangeProposalQueue(\"active\")\n                            : onChangeProposalQueue(\"draft\"),\n                    label: \"Bond 300N for a fast track \",\n                    id: \"draft-proposal\"\n                }}\n            />\n        </div>\n    );\n} else return <></>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposal.Common.ProposalQueue", "fact_widget_deployments_id": "076625a6b34d93b0f9e45fb82b23a674", "inserted_timestamp": "2023-11-27T20:38:53.074Z", "modified_timestamp": "2023-11-27T20:38:53.074Z", "__row_index": 0}