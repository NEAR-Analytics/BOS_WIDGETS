{"tx_hash": "Bb8CG66V7TqVQMZJxiqdk34NUZJzLyDUaguyd3qjFL5v", "action_id_social": "AjGyCHgwsp5YpWJYcfYL1Gy1wet2NsMK79b5xQLAiBJm-0-widget", "block_id": 105679756, "block_timestamp": "2023-11-14T10:08:42.130Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposal.Common.ProposalQueue", "source_code": "const daoId = props.daoId;\nconst accountId = props.accountId ?? context.accountId;\nconst onUpdate = props.onUpdate;\n\nconst VotingBodyDaoId = props.dev\n    ? \"voting-body-v1.gwg-testing.near\"\n    : \"voting-body-v1.ndc-gwg.near\";\n\nconst isVotingBodyDao = props.daoId === VotingBodyDaoId;\n\nState.init({\n    proposalQueue: \"draft\", // for vb\n    attachDeposit: 0,\n    vbConfig: null\n});\n\nfunction onChangeProposalQueue(proposalQueue) {\n    const amount =\n        proposalQueue === \"draft\"\n            ? state.vbConfig?.pre_vote_bond\n            : state.vbConfig?.active_queue_bond;\n    onUpdate({\n        queue: proposalQueue,\n        amount: amount\n    });\n    State.update({\n        ...state,\n        proposalQueue: proposalQueue,\n        attachDeposit: amount\n    });\n}\n\nif (isVotingBodyDao) {\n    const config = useCache(\n        () => Near.asyncView(daoId, \"config\").then((data) => data),\n        daoId + \"-vb-config\",\n        { subscribe: false }\n    );\n    State.update({ vbConfig: config });\n    onChangeProposalQueue(state.proposalQueue);\n}\n\nif (isVotingBodyDao) {\n    return (\n        <div className=\"mb-3\">\n            <div>\n                Draft Proposals are not in active queue. For more{\" \"}\n                <a\n                    href={`https://github.com/near-ndc/voting-v1/tree/master/voting_body#pre-vote-queue`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{ color: \"rgb(68, 152, 224)\" }}\n                >\n                    details.\n                </a>\n            </div>\n            <Widget\n                src=\"nearui.near/widget/Input.Checkbox\"\n                props={{\n                    checked: state.proposalQueue === \"draft\",\n                    onChange: (checked) =>\n                        checked\n                            ? onChangeProposalQueue(\"draft\")\n                            : onChangeProposalQueue(\"active\"),\n                    label: \"Draft\",\n                    id: \"draft-proposal\"\n                }}\n            />\n        </div>\n    );\n} else return <></>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposal.Common.ProposalQueue", "fact_widget_deployments_id": "89bbff45a8784edfeab57f849cd057ba", "inserted_timestamp": "2023-11-14T11:55:56.124Z", "modified_timestamp": "2023-11-14T11:55:56.124Z", "__row_index": 2}