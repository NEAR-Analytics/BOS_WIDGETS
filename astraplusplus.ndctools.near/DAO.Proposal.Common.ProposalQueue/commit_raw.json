{"tx_hash": "7yd27JXxYEEVhr6PX1hSYgYjs5UbpeETJRzFDWroz6SD", "action_id_social": "8uEsv3ApdvK5P2G5qZLq3C7FfW6uC7rmJQ5XdAQx92sM-0-widget", "block_id": 105751185, "block_timestamp": "2023-11-15T12:38:03.124Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposal.Common.ProposalQueue", "source_code": "const daoId = props.daoId;\nconst accountId = props.accountId ?? context.accountId;\nconst onUpdate = props.onUpdate;\n\nconst VotingBodyDaoId = props.dev\n    ? \"voting-body-v1.gwg-testing.near\"\n    : \"voting-body-v1.ndc-gwg.near\";\n\nconst isVotingBodyDao = props.daoId === VotingBodyDaoId;\n\nState.init({\n    proposalQueue: \"draft\", // for vb\n    attachDeposit: 0,\n    vbConfig: null\n});\n\nfunction onChangeProposalQueue(proposalQueue) {\n    const amount =\n        proposalQueue === \"draft\"\n            ? state.vbConfig?.pre_vote_bond\n            : state.vbConfig?.active_queue_bond;\n    onUpdate({\n        queue: proposalQueue,\n        amount: amount\n    });\n    State.update({\n        ...state,\n        proposalQueue: proposalQueue,\n        attachDeposit: amount\n    });\n}\n\nif (isVotingBodyDao) {\n    const config = useCache(\n        () => Near.asyncView(daoId, \"config\").then((data) => data),\n        daoId + \"-vb-config\",\n        { subscribe: false }\n    );\n    State.update({ vbConfig: config });\n    onChangeProposalQueue(state.proposalQueue);\n}\n\nif (isVotingBodyDao) {\n    return (\n        <div className=\"mb-3\">\n            <div>\n                Draft Proposals are not in active queue.\n                <a\n                    href={`https://github.com/near-ndc/voting-v1/tree/master/voting_body#pre-vote-queue`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{ color: \"rgb(68, 152, 224)\" }}\n                >\n                    More details.\n                </a>\n            </div>\n            <Widget\n                src=\"nearui.near/widget/Input.Checkbox\"\n                props={{\n                    checked: state.proposalQueue === \"draft\",\n                    onChange: (checked) =>\n                        checked\n                            ? onChangeProposalQueue(\"draft\")\n                            : onChangeProposalQueue(\"active\"),\n                    label: \"Draft\",\n                    id: \"draft-proposal\"\n                }}\n            />\n        </div>\n    );\n} else return <></>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposal.Common.ProposalQueue", "fact_widget_deployments_id": "7b2e9547c6bb124d47d27067c0d3e12d", "inserted_timestamp": "2023-11-15T13:45:37.474Z", "modified_timestamp": "2023-11-15T13:45:37.474Z", "__row_index": 3}