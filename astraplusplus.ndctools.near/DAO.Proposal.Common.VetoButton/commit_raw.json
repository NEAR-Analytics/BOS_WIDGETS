{"tx_hash": "4tyXn7KLuCeFK6HiVwhVDsPTVYiBUQam4YiF6pW62Dqe", "action_id_social": "4Uc6UzxLmWDKKTvenrDMS7DD26UpzrQzGPUXeKstc4Qm-0-widget", "block_id": 106921245, "block_timestamp": "2023-12-01T09:36:14.401Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposal.Common.VetoButton", "source_code": "const {\n    daoId,\n    proposal,\n    isCongressDaoID,\n    isVotingBodyDao,\n    daoConfig,\n    isHuman,\n    currentuserCongressHouse,\n    CoADaoId,\n    HoMDaoId,\n    registry\n} = props;\nconst accountId = context.accountId;\n\nState.init({\n    isProposalModalOpen: false\n});\n\nconst proposalPastCooldown =\n    proposal?.submission_time +\n        (daoConfig?.vote_duration ?? daoConfig?.voting_duration) +\n        (daoConfig?.cooldown ?? 0) <\n    Date().now;\n\nconst disableVetoButton =\n    currentuserCongressHouse !== CoADaoId\n        ? true\n        : proposalPastCooldown\n        ? true\n        : proposal.status === \"Vetoed\" || proposal.status === \"Rejected\";\n\nconst VetoButton = styled.button`\n    padding: 10px;\n    padding-inline: 40px;\n    background-color: red;\n    color: white;\n    border-radius: 10px;\n    line-height: 23px;\n`;\n\nconst description = `### Veto HoM Proposal ID ${proposal.id} \\n\nVote \"Approve\" = \"Veto\"; Vote \"Reject\" = \"Do not support veto\" \\n\\n${proposal.description}`;\n\nreturn (\n    <div className=\"w-100\">\n        <Widget\n            src=\"astraplusplus.ndctools.near/widget/Common.Layout.CardModal\"\n            props={{\n                title: \"Veto Proposal\",\n                onToggle: () =>\n                    State.update({\n                        isProposalModalOpen: !state.isProposalModalOpen\n                    }),\n                isOpen: state.isProposalModalOpen,\n                toggle: (\n                    <VetoButton\n                        className=\"custom-tooltip veto-btn\"\n                        disabled={disableVetoButton}\n                    >\n                        <span\n                            style={{ left: \"-20%\", width: \"200px\" }}\n                            class=\"tooltiptext\"\n                        >\n                            Initiation of a veto is limited to CoA members and\n                            must occur before the proposal cooldown period\n                            expires.\n                        </span>\n                        Veto\n                    </VetoButton>\n                ),\n                content: (\n                    <div\n                        className=\"d-flex flex-column align-items-stretch\"\n                        style={{\n                            width: \"800px\",\n                            maxWidth: \"100vw\"\n                        }}\n                    >\n                        <Widget\n                            src=\"nearui.near/widget/Element.Badge\"\n                            props={{\n                                size: \"lg\",\n                                variant: \"info outline mb-3\",\n                                children:\n                                    \"Please make sure there is no existing Veto proposal with same proposal ID created to avoid spam.\"\n                            }}\n                        />\n\n                        {currentuserCongressHouse === CoADaoId ? (\n                            <Widget\n                                src=\"astraplusplus.ndctools.near/widget/DAO.Proposal.Create.Veto\"\n                                props={{\n                                    daoId: CoADaoId,\n                                    dev: props.dev,\n                                    registry,\n                                    isHookCall: true,\n                                    proposalID: proposal.id,\n                                    description: description\n                                }}\n                            />\n                        ) : (\n                            <Widget\n                                src=\"astraplusplus.ndctools.near/widget/DAO.Proposal.Create.Veto\"\n                                props={{\n                                    daoId: CoADaoId,\n                                    dev: props.dev,\n                                    registry,\n                                    isHookCall: false,\n                                    house: HoMDaoId,\n                                    proposalID: proposal.id,\n                                    description: description\n                                }}\n                            />\n                        )}\n                    </div>\n                )\n            }}\n        />\n    </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposal.Common.VetoButton", "fact_widget_deployments_id": "1b1f747c808c54f97620a590f2a0ad18", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}