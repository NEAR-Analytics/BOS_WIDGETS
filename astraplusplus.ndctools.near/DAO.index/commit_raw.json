{"tx_hash": "5Xw5rfRFFi3zT5AAyntQ2Ymfyo148sETu85D7gEi3tq3", "action_id_social": "BKEmP5DZiYJrp32u7d7QuJ4sdkhhzCUCA92B8NWg8J1L-0-widget", "block_id": 104124928, "block_timestamp": "2023-10-24T19:43:53.988Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.index", "source_code": "const CoADaoId = props.dev\n    ? \"coa.gwg-testing.near\"\n    : \"congress-coa-v1.ndc-gwg.near\";\nconst VotingBodyDaoId = props.dev\n    ? \"voting-body-v1.gwg-testing.near\"\n    : \"\";\nconst TCDaoId = props.dev\n    ? \"tc.gwg-testing.near\"\n    : \"congress-tc-v1.ndc-gwg.near\";\nconst HoMDaoId = props.dev\n    ? \"hom.gwg-testing.near\"\n    : \"congress-hom-v1.ndc-gwg.near\";\nconst widgetOwner = props.widgetOwner ?? \"astraplusplus.ndctools.near\";\n\nState.init({\n    tab: props.tab ?? \"proposals\",\n    accountId: props.accountId ?? context.accountId,\n    daoId: props.daoId,\n    proposalId: props.proposalId\n});\n\nconst update = (state) => State.update(state);\n\nconst constructURL = (paramObj, base) => {\n    paramObj = { ...paramObj, page: \"dao\" };\n    const baseURL = base ?? `#/${widgetOwner}/widget/home`;\n    let params = \"\";\n    for (const [key, value] of Object.entries(paramObj)) {\n        params += `${key}=${value}&`;\n    }\n    params = params.slice(0, -1);\n    return `${baseURL}?${params}`;\n};\n\nconst isCongressDaoID =\n    props.daoId === HoMDaoId ||\n    props.daoId === CoADaoId ||\n    props.daoId === TCDaoId;\n\nconst tabs = {\n    proposals: {\n        name: \"Proposals\",\n        widget: \"DAO.Proposals.index\",\n        href: constructURL({ tab: \"proposals\", daoId: state.daoId })\n    },\n    home: {\n        name: \"Discussion\",\n        widget: \"DAO.Discussion\",\n        href: constructURL({ tab: \"home\", daoId: state.daoId })\n    },\n    funds: {\n        name: \"Fund Flows\",\n        widget: \"DAO.Funds.index\",\n        href: constructURL({ tab: \"funds\", daoId: state.daoId })\n    },\n    members: {\n        name: \"Members & Policy\",\n        widget: \"DAO.Members.index\",\n        href: constructURL({ tab: \"members\", daoId: state.daoId })\n    },\n    projects: {\n        name: \"Projects\",\n        widget: \"DAO.Projects\",\n        href: constructURL({ tab: \"projects\", daoId: state.daoId })\n    },\n    followers: {\n        name: \"Followers\",\n        widget: \"DAO.Followers.index\",\n        href: constructURL({ tab: \"followers\", daoId: state.daoId })\n    },\n    bounties: {\n        name: \"Bounties\",\n        widget: \"DAO.Bounties\",\n        href: constructURL({ tab: \"bounties\", daoId: state.daoId })\n    }\n};\n\nif (isCongressDaoID || props.daoId === VotingBodyDaoId) {\n    delete tabs[\"funds\"];\n    delete tabs[\"projects\"];\n    delete tabs[\"bounties\"];\n}\n// not showing members page in v1\nif (props.daoId === VotingBodyDaoId) {\n    delete tabs[\"members\"];\n}\n\nif (!props.daoId) {\n    // TODO: add a proper error screen\n    return \"Please provide a DAO ID\";\n}\n\nconst tabContent = (\n    <Widget\n        src={`${widgetOwner}/widget/${tabs[state.tab || \"home\"].widget}`}\n        props={{\n            update,\n            tab: state.tab,\n            accountId: state.accountId,\n            daoId: state.daoId,\n            proposalId: state.proposalId,\n            ...props\n        }}\n    />\n);\n\n// To keep our styles  consistent across widgets, let's define them here based on html tags and classes\nconst Root = styled.div`\n    font-family:\n        \"Open Sans\",\n        \"Manrope\",\n        system-ui,\n        -apple-system,\n        \"Segoe UI\",\n        Roboto,\n        \"Helvetica Neue\",\n        \"Noto Sans\",\n        \"Liberation Sans\",\n        Arial,\n        sans-serif,\n        \"Apple Color Emoji\",\n        \"Segoe UI Emoji\",\n        \"Segoe UI Symbol\",\n        \"Noto Color Emoji\";\n    font-size: 16px;\n    line-height: 1.5;\n    color: #000;\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n        font-weight: 600;\n        letter-spacing: -0.02em;\n        margin-bottom: 0.5em;\n    }\n\n    h1 {\n        font-size: 28px;\n    }\n\n    h2 {\n        font-size: 24px;\n    }\n\n    h3 {\n        font-size: 20px;\n    }\n\n    h4 {\n        font-size: 16px;\n    }\n\n    h5 {\n        font-size: 14px;\n    }\n\n    h6 {\n        font-size: 12px;\n    }\n\n    a {\n        color: #000;\n        text-decoration: none;\n        transition: color 0.1s ease-in-out;\n    }\n\n    a:hover {\n        color: #4498e0;\n    }\n\n    .ndc-card {\n        border-radius: 16px;\n        box-shadow:\n            rgba(0, 0, 0, 0.1) 0 1px 3px,\n            rgba(0, 0, 0, 0.05) 0 1px 20px;\n        background-color: #fff;\n    }\n`;\n\nreturn (\n    <Root className=\"pb-5\">\n        <Widget src={`nearui.near/widget/Typography.OpenSansFont`} />\n\n        <Widget\n            src={`${widgetOwner}/widget/DAO.Layout.Header`}\n            props={{\n                daoId: state.daoId\n            }}\n        />\n        <div className=\"w-100\">\n            <Widget\n                src={`${widgetOwner}/widget/DAO.Layout.Tabs`}\n                props={{\n                    tabs: tabs,\n                    tab: state.tab,\n                    update\n                }}\n            />\n            {tabContent}\n        </div>\n    </Root>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.index", "fact_widget_deployments_id": "af6dae936a6808ddb53c5ec311417207", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}