{"tx_hash": "9fiz32Bku3aDNZzczuaV4EbJvuqptZnjsgmX4EUQ9yRH", "action_id_social": "DZx624aMNrYZR41iCD4nnbETdVovqgGkS8LLcS32pAF2-0-widget", "block_id": 112383728, "block_timestamp": "2024-02-08T12:24:38.191Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposals.FilterModal", "source_code": "const applyFilters = props.applyFilters;\nconst cancel = props.cancel;\nconst daoId = props.daoId;\n\nconst CoADaoId = props.dev\n  ? \"coa.gwg-testing.near\"\n  : \"congress-coa-v1.ndc-gwg.near\";\nconst TCDaoId = props.dev\n  ? \"tc.gwg-testing.near\"\n  : \"congress-tc-v1.ndc-gwg.near\";\nconst HoMDaoId = props.dev\n  ? \"hom.gwg-testing.near\"\n  : \"congress-hom-v1.ndc-gwg.near\";\n\nconst isCongressDaoID =\n  daoId === HoMDaoId || daoId === CoADaoId || daoId === TCDaoId;\n\nconst filters = props.filters ?? {\n  proposal_types: [],\n  voterStatus: \"\",\n  status: [],\n  time_start: \"\",\n  time_end: \"\"\n};\n\nState.init({\n  filters\n});\n\nconst setFilters = (f) => {\n  State.update({\n    filters: f\n  });\n};\n\nconst type = {\n  operations: [\n    {\n      title: \"Transfer funds\",\n      value: \"Transfer\"\n    },\n    {\n      title: \"Voting proposal\",\n      value: \"Vote\"\n    },\n    {\n      title: \"Custom function\",\n      value: \"FunctionCall\"\n    },\n    {\n      title: \"Issue a new bounty\",\n      value: \"AddBounty\"\n    },\n    {\n      title: \"Request pay for bounty\",\n      value: \"BountyDone\"\n    },\n    {\n      title: \"Set staking contract\",\n      value: \"SetStakingContract\"\n    },\n    {\n      title: \"Text\",\n      value: \"Text\"\n    },\n    {\n      title: \"Funding Request\",\n      value: \"FundingRequest\"\n    },\n    {\n      title: \"Recurrent Funding Request\",\n      value: \"RecurrentFundingRequest\"\n    },\n    {\n      title: \"Dismiss And Ban\",\n      value: \"DismissAndBan\"\n    },\n    {\n      title: \"Dismiss\",\n      value: \"Dismiss\"\n    },\n    {\n      title: \"Dissolve\",\n      value: \"Dissolve\"\n    },\n    {\n      title: \"Veto\",\n      value: \"Veto\"\n    },\n    {\n      title: \"Approve Budget\",\n      value: \"ApproveBudget\"\n    }\n  ],\n  policy: [\n    {\n      title: \"Change Policy\",\n      value: \"ChangePolicy\"\n    },\n    {\n      title: \"Add or Update Role\",\n      value: \"ChangePolicyAddOrUpdateRole\"\n    },\n    {\n      title: \"Remove Role\",\n      value: \"ChangePolicyRemoveRole\"\n    },\n    {\n      title: \"ChangePolicyUpdateParameters\",\n      value: \"ChangePolicyUpdateParameters\"\n    },\n    {\n      title: \"ChangePolicyUpdateDefaultVotePolicy\",\n      value: \"ChangePolicyUpdateDefaultVotePolicy\"\n    }\n  ],\n  \"Membership & Config\": [\n    {\n      title: \"Add member to role\",\n      value: \"AddMemberToRole\"\n    },\n    {\n      title: \"Remove member from role\",\n      value: \"RemoveMemberFromRole\"\n    },\n    {\n      title: \"Change Config\",\n      value: \"ChangeConfig\"\n    },\n    {\n      title: \"Factory Info Update\",\n      value: \"FactoryInfoUpdate\"\n    },\n    {\n      title: \"Upgrade Remote\",\n      value: \"UpgradeRemote\"\n    },\n    {\n      title: \"Upgrade Self\",\n      value: \"UpgradeSelf\"\n    }\n  ]\n};\n\nconst statuss = [\n  {\n    title: \"Approved\",\n    value: \"Approved\"\n  },\n  {\n    title: \"Rejected\",\n    value: \"Rejected\"\n  },\n  {\n    title: \"In Progress\",\n    value: \"InProgress\"\n  },\n  {\n    title: \"Expired\",\n    value: \"Expired\"\n  },\n  {\n    title: \"Failed\",\n    value: \"Failed\"\n  },\n  {\n    title: \"Executed\",\n    value: \"Executed\"\n  },\n  {\n    title: \"Vetoed\",\n    value: \"Vetoed\"\n  },\n  {\n    title: \"Draft\",\n    value: \"PreVote\"\n  }\n];\n\nconst voterStatus = [\n  {\n    title: \"Voted\",\n    value: \"Voted\"\n  },\n  {\n    title: \"Non Voted\",\n    value: \"NonVoted\"\n  }\n];\n\nconst Wrapper = styled.div`\n  .check-subtitle {\n    font-size: 12px;\n    font-weight: 500;\n    color: #999;\n    padding: 0 !important;\n  }\n\n  .category-title {\n    margin: 0px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #999;\n    text-transform: capitalize;\n    margin-bottom: 6px;\n  }\n\n  .filter-title {\n    font-style: normal;\n    font-weight: 600;\n    font-size: 15px;\n    line-height: 1.25em;\n    color: #222;\n    margin-bottom: 12px;\n  }\n`;\n\nreturn (\n  <Wrapper className=\"ndc-card p-5 pb-4\">\n    <h4 className=\"filter-title\">Type</h4>\n    <div className=\"d-flex flex-wrap\">\n      {Object.keys(type).map((key) => {\n        return (\n          <div className=\"d-flex flex-column\">\n            <h5 className=\"category-title\">{key}</h5>\n            {type[key].map((item) => {\n              return (\n                <Widget\n                  src=\"nearui.near/widget/Input.Checkbox\"\n                  props={{\n                    checked:\n                      state.filters.proposal_types.includes(item.value) ||\n                      false,\n                    onChange: (checked) => {\n                      setFilters({\n                        ...state.filters,\n                        proposal_types: checked\n                          ? [...state.filters.proposal_types, item.value]\n                          : state.filters.proposal_types.filter(\n                              (x) => x !== item.value\n                            )\n                      });\n                    },\n                    label: (\n                      <>\n                        {item.title}\n                        <br />\n                        <span className=\"check-subtitle\">\n                          {\"{\" + item.value + \"}\"}\n                        </span>\n                      </>\n                    ),\n                    id: item.value\n                  }}\n                />\n              );\n            })}\n          </div>\n        );\n      })}\n    </div>\n    <h4 className=\"filter-title mt-4\">Status</h4>\n    <div className=\"d-flex flex-wrap\">\n      {statuss.map((item) => {\n        return (\n          <Widget\n            src=\"nearui.near/widget/Input.Checkbox\"\n            props={{\n              checked: state.filters.status.includes(item.value) || false,\n              onChange: (checked) => {\n                setFilters({\n                  ...state.filters,\n                  status: checked\n                    ? [...state.filters.status, item.value]\n                    : state.filters.status.filter((x) => x !== item.value)\n                });\n              },\n              label: item.title\n            }}\n          />\n        );\n      })}\n    </div>\n    {isCongressDaoID && (\n      <div>\n        <h4 className=\"filter-title mt-4\">Voter Status</h4>\n        <div className=\"d-flex flex-wrap\">\n          {voterStatus.map((item) => {\n            return (\n              <Widget\n                src=\"nearui.near/widget/Input.Checkbox\"\n                props={{\n                  checked: state.filters.voterStatus === item.value || false,\n                  onChange: (checked) => {\n                    setFilters({\n                      ...state.filters,\n                      voterStatus: checked ? item.value : \"\"\n                    });\n                  },\n                  label: item.title\n                }}\n              />\n            );\n          })}\n        </div>\n      </div>\n    )}\n    <div className=\"d-flex gap-3 mt-4  flex-wrap\">\n      <Widget\n        src=\"nearui.near/widget/Input.Text\"\n        props={{\n          value: state.filters.time_start,\n          onChange: (value) => {\n            setFilters({\n              ...state.filters,\n              time_start: value\n            });\n          },\n          label: \"From Date\",\n          inputProps: {\n            type: \"date\"\n          }\n        }}\n      />\n      <Widget\n        src=\"nearui.near/widget/Input.Text\"\n        props={{\n          value: state.filters.time_end,\n          onChange: (value) => {\n            setFilters({\n              ...state.filters,\n              time_end: value\n            });\n          },\n          label: \"To Date\",\n          inputProps: {\n            type: \"date\"\n          }\n        }}\n      />\n    </div>\n    <div className=\"d-flex justify-content-end mt-5 gap-3\">\n      <Widget\n        src=\"nearui.near/widget/Input.Button\"\n        props={{\n          children: \"Cancel\",\n          onClick: () => {\n            cancel();\n          },\n          variant: \"secondary outline\",\n          className: \"me-auto\"\n        }}\n      />\n      <Widget\n        src=\"nearui.near/widget/Input.Button\"\n        props={{\n          children: \"Clear\",\n          onClick: () => {\n            setFilters({\n              proposal_types: [],\n              status: [],\n              time_start: \"\",\n              time_end: \"\"\n            });\n          },\n          variant: \"secondary outline\"\n        }}\n      />\n      <Widget\n        src=\"nearui.near/widget/Input.Button\"\n        props={{\n          children: \"Apply\",\n          onClick: () => {\n            applyFilters(state.filters);\n          },\n          variant: \"secondary\"\n        }}\n      />\n    </div>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposals.FilterModal", "fact_widget_deployments_id": "1fff913f8ca4d755ca5f7e94537f9fcb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}