{"tx_hash": "An9W3MiTBgqqFxYG6TJqSBToXjjp8DG8BWh9FQDtM9DC", "action_id_social": "EqcABXL5PGJRqbXjW2RDnU7mJ7tqbBY7FPAe7x1K5c1c-0-widget", "block_id": 99989840, "block_timestamp": "2023-08-30T08:15:16.143Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "Bounties.List", "source_code": "const bounties = props.bounties;\nconst currentPage = props.page ?? 1;\nconst resPerPage = props.resPerPage ?? 6;\n\nconst bountieslink = \"#/astraplusplus.ndctools.near/widget/home?tab=bounties\";\n\nState.init({\n  currentPage: currentPage,\n  search: null,\n  isTyping: false,\n});\n\nconst renderSubheader = () => (\n  <div className=\"d-flex align-items-center gap-2 mt-4\">\n    <Widget\n      key=\"search\"\n      src=\"nearui.near/widget/Input.ExperimentalText\"\n      props={{\n        placeholder: \"Search by name\",\n        type: \"search\",\n        size: \"md\",\n        icon: (\n          <i\n            className=\"bi bi-search\"\n            style={{\n              color: \"#4498E0\",\n            }}\n          />\n        ),\n        onChange: (v) => {\n          State.update({\n            search: v,\n            isTyping: true,\n          });\n          setTimeout(() => {\n            State.update({\n              isTyping: false,\n            });\n          }, 1500);\n        },\n        value: undefined,\n        inputProps: {\n          autoFocus: true,\n        },\n        useTimeout: 600,\n      }}\n    />\n    <Widget\n      src=\"nearui.near/widget/Layout.Modal\"\n      props={{\n        open: state.filtersOpen,\n        onOpenChange: (open) => {\n          State.update({\n            ...state,\n            filtersOpen: open,\n          });\n        },\n        toggle: (\n          <Widget\n            src=\"nearui.near/widget/Input.Button\"\n            props={{\n              children: (\n                <>\n                  Filter\n                  <i className=\"bi bi-funnel\"></i>\n                </>\n              ),\n              variant: \"outline disabled\",\n              size: \"md\",\n              disabled: true,\n            }}\n          />\n        ),\n        content: <div className=\"ndc-card p-2\">WIP</div>,\n      }}\n    />\n  </div>\n);\n\nconst renderEmpty = () => (\n  <div\n    className=\"d-flex flex-column justify-content-center align-content-center text-center gap-3 m-auto\"\n    style={{\n      height: \"max(50vh, 400px)\",\n      maxWidth: \"460px\",\n    }}\n  >\n    <i\n      className=\"bi bi-exclamation-circle\"\n      style={{ fontSize: \"4rem\", color: \"#4498E0\" }}\n    />\n    <p className=\"h6\">No bounty is found.</p>\n    <Widget\n      src=\"nearui.near/widget/Input.Button\"\n      props={{\n        children: \"Go to home\",\n        variant: \"info outline w-100\",\n        size: \"lg\",\n        href: \"#/astraplusplus.ndctools.near/widget/home\",\n      }}\n    />\n  </div>\n);\n\nconst renderLoading = () => (\n  <Widget\n    src=\"nearui.near/widget/Feedback.Spinner\"\n    props={{\n      color1: \"#4498E0\",\n      color2: \"#000000\",\n    }}\n  />\n);\n\nlet filteredBounties = [];\nlet paginatedBounties = [];\nif (bounties && !state.isTyping) {\n  filteredBounties = bounties.filter((d) => {\n    if (state.search == null) {\n      return true;\n    }\n    return d.name.toLowerCase().includes(state.search.toLowerCase());\n  });\n  paginatedBounties = filteredBounties.slice(\n    (state.currentPage - 1) * resPerPage,\n    state.currentPage * resPerPage,\n  );\n}\n\nconst renderBountiesRows = () => {\n  return (\n    <div className=\"row g-3 flex-wrap\">\n      {paginatedBounties.map((bounty) => (\n        <div\n          key={bounty.id}\n          className=\"flex-grow-1 col-12 col-md-6 col-lg-3\"\n          style={{\n            minWidth: \"360px\",\n          }}\n        >\n          <Widget\n            src=\"astraplusplus.ndctools.near/widget/Bounties.Card\"\n            props={{\n              ...bounty,\n            }}\n          />\n        </div>\n      ))}\n      {paginatedBounties.length < resPerPage &&\n        [...Array(resPerPage - paginatedBounties.length)].map((_, i) => (\n          <div\n            key={`empty-${i}`}\n            className=\"flex-grow-1 col-12 col-md-6 col-lg-3\"\n            style={{\n              minWidth: \"360px\",\n            }}\n          ></div>\n        ))}\n    </div>\n  );\n};\nconst renderPagination = () => (\n  <div className=\"d-flex justify-content-center align-items-center gap-2\">\n    <Widget\n      src=\"nearui.near/widget/Navigation.Paginate\"\n      props={{\n        pageSize: resPerPage,\n        currentPage: state.currentPage,\n        totalPageCount: Math.ceil(filteredBounties.length / resPerPage),\n        onPageChange: (page) => {\n          State.update({\n            currentPage: page,\n          });\n        },\n        revaluateOnRender: true,\n      }}\n    />\n  </div>\n);\n\nreturn (\n  <>\n    {renderSubheader()}\n    {!state.isTyping &&\n      bounties != null &&\n      (!bounties || bounties.length < 1 || filteredBounties.length < 1) &&\n      renderEmpty()}\n    {(state.isTyping || bounties == null) && renderLoading()}\n    {!state.isTyping &&\n      ((bounties != null && bounties) || bounties.length > 0) && (\n        <div className=\"my-4\">{renderBountiesRows()}</div>\n      )}\n    {((bounties != null && bounties) ||\n      bounties.length > resPerPage ||\n      filteredBounties.length > resPerPage) &&\n      renderPagination()}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/Bounties.List", "fact_widget_deployments_id": "c637b720c5fbbd26cf40992818040a5d", "inserted_timestamp": "2023-08-30T09:49:26.266Z", "modified_timestamp": "2023-08-30T09:49:26.266Z", "__row_index": 0}