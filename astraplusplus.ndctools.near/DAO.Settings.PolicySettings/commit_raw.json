{"tx_hash": "ztPKatkCAAT3FqYh16ZnQFKte2rg9373kFeUvmtNjEq", "action_id_social": "ANKxwChGGrfXHAJZs7ifybYcJ3jcWvcKPFkBnt1AGohB-0-widget", "block_id": 114574868, "block_timestamp": "2024-03-12T15:20:42.868Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Settings.PolicySettings", "source_code": "const { formState, hasPermission, daoId } = props;\n\nconst [policyState, setPolicyState] = useState(formState);\nconst [selectedTab, setSelectedTab] = useState(\"Groups\");\n\nconst handleProposal = () => {\n  const deposit = formState.policy.proposal_bond;\n  const gas = 200000000000000;\n\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"Update policy\",\n          kind: {\n            ChangePolicy: policyState\n          }\n        }\n      },\n      gas: gas,\n      deposit: deposit\n    }\n  ]);\n};\n\nconst Footer = () => {\n  return (\n    <div className=\"d-flex justify-content-end mt-4\">\n      <Widget\n        src=\"nearui.near/widget/Input.Button\"\n        props={{\n          children: (\n            <>\n              <i class=\"bi bi-check-lg\"></i> Propose changes\n            </>\n          ),\n          variant: \"info \" + (!hasPermission && \"disabled\"),\n          size: \"lg\",\n          onClick: () => handleProposal(),\n          buttonProps: {\n            type: \"submit\"\n          }\n        }}\n      />\n    </div>\n  );\n};\n\nconst tabs = {\n  Groups: {\n    name: \"Groups\",\n    component: (\n      <Widget\n        src={`astraplusplus.ndctools.near/widget/CreateDAO.Step4`}\n        props={{\n          formState: policyState,\n          updateParentState: (data) => setPolicyState(data),\n          isConfigScreen: true,\n          renderFooter: (data) => <></>\n        }}\n      />\n    )\n  },\n  \"Proposal and Voting Permissions\": {\n    name: \"Proposal and Voting Permissions\",\n    component: (\n      <Widget\n        src={`astraplusplus.ndctools.near/widget/CreateDAO.Step5`}\n        props={{\n          formState: policyState,\n          updateParentState: (data) => setPolicyState(data),\n          renderFooter: (data) => <></>\n        }}\n      />\n    )\n  },\n  Quorum: {\n    name: \"Quorum\",\n    component: (\n      <Widget\n        src={`astraplusplus.ndctools.near/widget/CreateDAO.Step6`}\n        props={{\n          formState: policyState,\n          updateParentState: (data) => setPolicyState(data),\n          renderFooter: (data) => <></>,\n          isConfigScreen: true\n        }}\n      />\n    )\n  }\n};\n\nconst Wrapper = styled.div`\n  .custom-tag {\n    border-top-right-radius: 9999px;\n    border-bottom-right-radius: 9999px;\n    border-top-left-radius: 9999px;\n    border-bottom-left-radius: 9999px;\n    padding-inline: 1rem;\n    padding-block: 0.5rem;\n    display: flex;\n    gap: 0.5rem;\n    border-width: 1px;\n    border-style: solid;\n    font-size: 14px;\n    cursor: pointer;\n    min-width: fit-content;\n  }\n\n  .selected {\n    background-color: black;\n    color: white;\n  }\n`;\n\nconst tabContent = tabs[selectedTab].component;\n\nreturn (\n  <Wrapper style={{ marginTop: 30 }}>\n    <div\n      className=\"d-flex gap-3 align-items-center h-100\"\n      style={{ overflow: \"scroll\" }}\n    >\n      {Object.keys(tabs).map((i) => (\n        <div\n          onClick={() => setSelectedTab(i)}\n          className={\"custom-tag \" + (i === selectedTab ? \"selected\" : \"\")}\n        >\n          {i}\n        </div>\n      ))}\n    </div>\n    <div>{tabContent}</div>\n    <Footer />\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Settings.PolicySettings", "fact_widget_deployments_id": "f8578391e38d5fda5da3e2dfbaacd97b", "inserted_timestamp": "2024-03-12T16:30:13.632Z", "modified_timestamp": "2024-03-12T16:30:13.632Z", "__row_index": 2}