{"tx_hash": "FSpV3ZDmSsTYARDY2R2DgLREn5iy3bT6QMXzQUhJ8ME9", "action_id_social": "JBiFzpMRi4CPtsvj44GEuNhHbtYE1MeG2JGNdriy7tC3-0-widget", "block_id": 103222767, "block_timestamp": "2023-10-12T18:50:49.824Z", "signer_id": "astraplusplus.ndctools.near", "widget_name": "DAO.Proposals.index", "source_code": "const daoId = props.daoId;\nconst proposalId = props.proposalId;\nconst accountId = context.accountId ?? \"\";\n\nconst CoADaoId = \"congress-coa-v1.ndc-gwg.near\";\nconst VotingBodyDaoId = \"\";\nconst TCDaoId = \"congress-tc-v1.ndc-gwg.near\";\nconst HoMDaoId = \"congress-hom-v1.ndc-gwg.near\";\n\nconst isCongressDaoID =\n    daoId === HoMDaoId ||\n    daoId === VotingBodyDaoId ||\n    daoId === CoADaoId ||\n    daoId === TCDaoId;\n\nState.init({\n    isProposalModalOpen: false,\n    hideProposalBtn: false\n});\n\nif (proposalId) {\n    return (\n        <div>\n            <Widget\n                src=\"astraplusplus.ndctools.near/widget/DAO.Proposals.Card.index\"\n                props={props}\n            />\n        </div>\n    );\n}\n\nif (isCongressDaoID) {\n    const policy = Near.view(daoId, \"get_members\");\n    const isMember = policy?.members?.includes(accountId);\n    State.update({ hideProposalBtn: !isMember });\n}\n\nreturn (\n    <>\n        <div style={{ width: \"98%\" }}>\n            <div className=\"d-flex justify-content-between flex-wrap mb-3 align-items-center gap-3 pb-3\">\n                <h2 className=\"my-auto\">Proposals</h2>\n                {!state.hideProposalBtn && (\n                    <Widget\n                        src=\"astraplusplus.ndctools.near/widget/Common.Layout.CardModal\"\n                        props={{\n                            title: \"Create Proposal\",\n                            onToggle: () =>\n                                State.update({\n                                    isProposalModalOpen:\n                                        !state.isProposalModalOpen\n                                }),\n                            isOpen: state.isProposalModalOpen,\n                            toggle: (\n                                <Widget\n                                    src=\"nearui.near/widget/Input.Button\"\n                                    props={{\n                                        children: (\n                                            <>\n                                                Create Proposal\n                                                <i className=\"bi bi-16 bi-plus-lg\"></i>\n                                            </>\n                                        ),\n                                        variant: \"info\"\n                                    }}\n                                />\n                            ),\n                            content: (\n                                <div\n                                    className=\"d-flex flex-column align-items-stretch\"\n                                    style={{\n                                        width: \"800px\",\n                                        maxWidth: \"100vw\"\n                                    }}\n                                >\n                                    <Widget\n                                        src={\n                                            \"astraplusplus.ndctools.near/widget/DAO.Proposal.Create\"\n                                        }\n                                        props={{\n                                            daoId: daoId\n                                        }}\n                                    />\n                                </div>\n                            )\n                        }}\n                    />\n                )}\n            </div>\n\n            <Widget\n                src=\"astraplusplus.ndctools.near/widget/DAO.Proposals.ProposalsPikespeak\"\n                props={{ daoId: daoId }}\n            />\n        </div>\n    </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/astraplusplus.ndctools.near/widget/DAO.Proposals.index", "fact_widget_deployments_id": "111880e5d3c1da25d9b1a6dbad8961f4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}