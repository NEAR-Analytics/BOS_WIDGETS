{"tx_hash": "EqLfo4H5y6ZLGPKjv4fcJ9BPBHFAy5LXVbZgHVCMrTNW", "action_id_social": "9kdhukhEzZPPMhmKtVyDwUe8h5oTyDTce7gTERXdy16U-0-widget", "block_id": 112750686, "block_timestamp": "2024-02-13T14:16:49.445Z", "signer_id": "dropcast.near", "widget_name": "discord", "source_code": "const accountId = context.accountId;\nconst CLIENT_ID = \"1206878767633534976\";\nconst CLIENT_SECRET = \"GhYxHW-FZyo0pqK26xx7BVgwTa5VCLn6\";\nconst BASE_URL = \"https://near.org/dropcast.near/widget/\";\nconst OAuthScope = [\"identify\", \"guilds\"].join(\" \");\n\nconst discordCode = props.code || \"\";\n\nconst fetchData = () => {\n  const params = {\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET,\n    grant_type: \"authorization_code\",\n    code: discordCode,\n    redirect_uri: `${BASE_URL}discord`,\n    scope: OAuthScope,\n  };\n\n  const urlSearchParams = Object.keys(params)\n    .map((param) => `${param}=${params[param]}`)\n    .join(\"&\");\n\n  let promise = asyncFetch(\n    `https://discordapp.com/api/v9/oauth2/token?${urlSearchParams}`,\n    {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      method: \"POST\",\n    }\n  );\n\n  promise.then((data) => {\n    console.log(data, \"==>daata\");\n  });\n};\n\nif (!discordCode || !accountId)\n  return (window.location.href = `${BASE_URL}login`);\nelse fetchData();\n\nreturn <div>Hello World</div>;\n", "metadata": {"fork_of": "dropcast.near/widget/discord@112748802"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dropcast.near/widget/discord", "fact_widget_deployments_id": "7856f6bc590cd2418714f9cd57b719b0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}