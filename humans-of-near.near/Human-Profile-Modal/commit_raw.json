{"tx_hash": "EuNwWtFEqxRXRatdc9xBW225ojMGxrnBkKtPuupgNUqo", "action_id_social": "5sAv4ksLjp8LQBTA6n8G1fa37fWAVRQ2nTu9acd7Z4en-0-widget", "block_id": 104690245, "block_timestamp": "2023-11-01T13:39:57.601Z", "signer_id": "humans-of-near.near", "widget_name": "Human-Profile-Modal", "source_code": "const Owner = \"humans-of-near.near\";\nconst accountId = context.accountId;\nif (!accountId) return;\n\nconst SOCIAL = \"https://social.near.page/u/\";\nconst TWITTER = \"https://twitter.com/\";\n\nconst { API_URL, onClose, user, getMyInfor } = props;\n\nState.init({\n  social: user.social,\n  twitter: user.twitter,\n  name: user.name,\n});\n\nconst options = [\n  {\n    text: \"Ended\",\n    value: 1,\n  },\n  {\n    text: \"Claimed\",\n    value: 2,\n  },\n  {\n    text: \"Unclaimed\",\n    value: 3,\n  },\n];\n\nconst ModalOverlay = styled.div`\n  right: 110px;\n  z-index: 100;\n  width: 400px;\n  height: 100%;\n  display: flex;\n  padding: 32px 0;\n  position: absolute;\n  flex-direction: column;\n  @media (max-width: 510px) {\n    right: 10px;\n    top: 54px;\n    width: 96%;\n  }\n`;\n\nconst Component = styled.div`\n  height: 100%;\n  overflow: auto;\n  border-radius: 6px;\n  background-color: #22272B;\n  border: 1px solid rgb(255, 255, 255);\n`;\n\nconst ModalContent = styled.div`\n  gap:20px;\n  width: 100%;\n  color: white;\n  display: flex;\n  padding: 20px;\n  border-radius: 4px;\n  flex-direction: column;\n`;\n\nconst ModalAction = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px;\n`;\n\nconst ModalTitle = styled.h4`\n  margin-bottom: 10px;\n`;\n\nconst Button = styled.button`\n  color: #191a1a;\n  border-radius: 6px;\n  padding: 10px 22px;\n  background-color:white;\n  &:hover {\n    background-color: grey;\n    color: #191a1a;\n  }\n  &:active {\n    background-color: grey;\n    color: #191a1a;\n  }\n`;\n\nconst TextField = styled.input`\n  width: 100%;\n  color: white;\n  font-size: 16px;\n  border-radius: 6px;\n  padding: 10px 15px;\n  background-color: unset;\n  border: 2px solid rgb(255, 255, 255);\n`;\n\nconst Textarea = styled.textarea`\n  gap: 0.5em;\n  width: 100%;\n  display: flex;\n  color: white;\n  background: unset;\n  border-radius: 4px;\n  align-items: center;\n  flex-direction: row;\n  padding: 0.5em 0.75em;\n  box-sizing: border-box;\n  border: 1px solid #d0d5dd;\n  box-shadow: 0px 1px 2px rgba(16, 24, 40, 0.05);\n`;\n\nconst saveMyProfile = () => {\n  const data = {\n    accountId,\n    name: state.name,\n    social: state.social,\n    twitter: state.twitter,\n  };\n\n  return asyncFetch(API_URL + `/auth/account`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((res) => {\n    if (res.ok) {\n      getMyInfor();\n      onClose();\n    }\n  });\n};\n\nconst changeName = async (e) => {\n  if (e.target.value.length <= 25)\n    State.update({\n      ...state,\n      name: e.target.value,\n    });\n};\n\nconst changeSocial = async (e) => {\n  if (e.target.value.indexOf(SOCIAL) === 0)\n    State.update({\n      ...state,\n      social: e.target.value,\n    });\n};\n\nconst changeTwitter = async (e) => {\n  if (e.target.value.indexOf(TWITTER) === 0)\n    State.update({\n      ...state,\n      twitter: e.target.value,\n    });\n};\n\nreturn (\n  <ModalOverlay>\n    <Component>\n      <ModalContent>\n        <button\n          className=\"btn\"\n          style={{\n            top: 43,\n            right: 10,\n            padding: 0,\n            position: \"absolute\",\n          }}\n          onClick={onClose}\n        >\n          <svg\n            width=\"26\"\n            height=\"26\"\n            viewBox=\"0 0 26 26\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M13 1.625C6.6625 1.625 1.625 6.6625 1.625 13C1.625 19.3375 6.6625 24.375 13 24.375C19.3375 24.375 24.375 19.3375 24.375 13C24.375 6.6625 19.3375 1.625 13 1.625ZM17.3875 18.6875L13 14.3L8.6125 18.6875L7.3125 17.3875L11.7 13L7.3125 8.6125L8.6125 7.3125L13 11.7L17.3875 7.3125L18.6875 8.6125L14.3 13L18.6875 17.3875L17.3875 18.6875Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </button>\n        <ModalTitle>{`Your Profile`}</ModalTitle>\n        <div>\n          <p>{`Display Name`}</p>\n          <TextField\n            type=\"text\"\n            placeholder={accountId}\n            value={state.name}\n            onChange={changeName}\n          />\n        </div>\n        <div>\n          <p>{`Near Social`}</p>\n          <TextField\n            type=\"text\"\n            placeholder=\"Near Social\"\n            value={state.social}\n            onChange={changeSocial}\n          />\n        </div>\n        <div>\n          <p>{`Twitter`}</p>\n          <TextField\n            type=\"text\"\n            placeholder=\"Twitter Link\"\n            value={state.twitter}\n            onChange={changeTwitter}\n          />\n        </div>\n        <div>\n          <p>{`Bio`}</p>\n          <Textarea\n            type=\"text\"\n            placeholder=\"Twitter Link\"\n            value={state.twitter}\n            onChange={changeTwitter}\n          />\n        </div>\n        <div>\n          <p>{`What describes you best?`}</p>\n          <Widget\n            props={{\n              noLabel: true,\n              placeholder: \"Select a role\",\n              options,\n            }}\n            src={`${Owner}/widget/Select`}\n          />\n        </div>\n      </ModalContent>\n      <ModalAction>\n        <Button className=\"btn\" onClick={saveMyProfile}>{`Save`}</Button>\n      </ModalAction>\n    </Component>\n  </ModalOverlay>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/humans-of-near.near/widget/Human-Profile-Modal", "fact_widget_deployments_id": "0fc77e7b3137e44ec48d1ff5057f5ad3", "inserted_timestamp": "2023-11-01T15:37:28.452Z", "modified_timestamp": "2023-11-01T15:37:28.452Z", "__row_index": 5}