{"tx_hash": "ERBNvBXMcxAfhd2PqSmMdeTx57moYg8cxUXsXrsYcCwL", "action_id_social": "3irTktLEjmzS2An74QiU4Y31GNPDL3gfEELCrmkhMZHY-0-widget", "block_id": 104682866, "block_timestamp": "2023-11-01T11:23:07.966Z", "signer_id": "humans-of-near.near", "widget_name": "Human-Profile-Modal", "source_code": "const accountId = context.accountId;\nif (!accountId) return;\n\nconst SOCIAL = \"https://social.near.page/u/\";\nconst TWITTER = \"https://twitter.com/\";\n\nconst { API_URL, onClose, user, getMyInfor } = props;\n\nState.init({\n  social: user.social,\n  twitter: user.twitter,\n  name: user.name,\n});\n\nconst ModalOverlay = styled.div`\n  position: absolute;\n  right: 50px;\n  top: 80px;\n  background-color: #191a1a;\n  border-radius: 12px;\n  border: 1px solid rgb(255, 255, 255);\n  display: flex;\n  flex-direction: column;\n  z-index: 100;\n  width: 400px;\n  @media (max-width: 510px) {\n    right: 10px;\n    top: 54px;\n    width: 96%;\n  }\n`;\n\nconst ModalContent = styled.div`\n  padding: 20px;\n  width: 100%;\n  color: white;\n  border-radius: 4px;\n  display: flex;\n  flex-direction: column;\n  gap:5px;\n`;\n\nconst ModalAction = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px;\n`;\n\nconst ModalTitle = styled.h4`\n  margin-bottom: 10px;\n`;\n\nconst Button = styled.button`\n  padding: 10px 22px;\n  background-color:white;\n  color: #191a1a;\n  border-radius: 6px;\n  &:hover {\n    background-color: grey;\n    color: #191a1a;\n  }\n  &:active {\n    background-color: grey;\n    color: #191a1a;\n  }\n`;\n\nconst TextField = styled.input`\npadding: 10px 15px;\nfont-size: 16px;\nborder-radius: 6px;\nborder: 2px solid rgb(255, 255, 255);\nbackground-color: #191a1a;\ncolor: white;\n`;\n\nconst saveMyProfile = () => {\n  const data = {\n    accountId,\n    name: state.name,\n    social: state.social,\n    twitter: state.twitter,\n  };\n\n  return asyncFetch(API_URL + `/auth/account`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((res) => {\n    if (res.ok) {\n      getMyInfor();\n      onClose();\n    }\n  });\n};\n\nconst changeName = async (e) => {\n  if (e.target.value.length <= 25)\n    State.update({\n      ...state,\n      name: e.target.value,\n    });\n};\n\nconst changeSocial = async (e) => {\n  if (e.target.value.indexOf(SOCIAL) === 0)\n    State.update({\n      ...state,\n      social: e.target.value,\n    });\n};\n\nconst changeTwitter = async (e) => {\n  if (e.target.value.indexOf(TWITTER) === 0)\n    State.update({\n      ...state,\n      twitter: e.target.value,\n    });\n};\n\nreturn (\n  <ModalOverlay>\n    <ModalContent>\n      <button\n        style={{\n          width: 40,\n          position: \"absolute\",\n          right: 25,\n          background: \"unset\",\n          borderColor: \"white\",\n        }}\n        onClick={onClose}\n      >\n        X\n      </button>\n      <ModalTitle>{`Your Profile`}</ModalTitle>\n      <p>{`Be careful with your public data.`}</p>\n      <h5>{`Display Name`}</h5>\n      <TextField\n        type=\"text\"\n        placeholder={accountId}\n        value={state.name}\n        onChange={changeName}\n      />\n      <h5>{`Near Social`}</h5>\n      <TextField\n        type=\"text\"\n        placeholder=\"Near Social\"\n        value={state.social}\n        onChange={changeSocial}\n      />\n      <h5>{`Twitter`}</h5>\n      <TextField\n        type=\"text\"\n        placeholder=\"Twitter Link\"\n        value={state.twitter}\n        onChange={changeTwitter}\n      />\n    </ModalContent>\n    <ModalAction>\n      <Button className=\"btn\" onClick={saveMyProfile}>{`Save`}</Button>\n    </ModalAction>\n  </ModalOverlay>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/humans-of-near.near/widget/Human-Profile-Modal", "fact_widget_deployments_id": "2b580fe7d24a5acf556b351818ff8cc3", "inserted_timestamp": "2023-11-01T13:26:43.545Z", "modified_timestamp": "2023-11-01T13:26:43.545Z", "__row_index": 4}