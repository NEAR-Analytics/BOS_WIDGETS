{"tx_hash": "EXpZ4bgNC4P76o18LpAg8thutA4vhSKSBLx9YppUWFbB", "action_id_social": "2YjC7G8zSRadhzgjT3a92UR9yNRhaJHH17LEDMpDcv5k-0-widget", "block_id": 118960039, "block_timestamp": "2024-05-15T08:41:05.120Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.page.admin.moderatorsTab", "source_code": "const { accessControlInfo, createEditTeam } = props;\n\nconst { Tile } =\n  VM.require(\"thomasguntenaar.near/widget/devhub.components.molecule.Tile\") ||\n  (() => <></>);\n\nif (!Tile) {\n  return <div>Loading...</div>;\n}\n\nconst [editModerators, setEditModerators] = useState(false);\nconst [moderators, setModerators] = useState(\n  accessControlInfo.members_list[\"team:moderators\"].children || []\n);\n\nconst handleEditModerators = () => {\n  createEditTeam({\n    teamName: \"moderators\",\n    description:\n      \"The moderator group has permissions to edit any posts and apply all labels, including restricted ones.\",\n    label: \"*\",\n    editPost: true,\n    useLabels: true,\n    members: moderators,\n    contractCall: \"edit_member\",\n  });\n};\n\nconst handleCancelModerators = () => {\n  setEditModerators(false);\n  setModerators(accessControlInfo.members_list[\"team:moderators\"].children);\n};\n\nreturn (\n  <>\n    <h1>Moderators</h1>\n    <div className=\"card-body\">\n      <h5>\n        The moderator group has permissions to edit any posts and apply all\n        labels, including restricted ones.\n      </h5>\n      <Widget\n        src={\"thomasguntenaar.near/widget/devhub.components.molecule.PostControls\"}\n        props={{\n          icon: \"bi bi-gear-wide-connected\",\n          className: \"mb-3\",\n\n          title: \"Edit members\",\n          onClick: () => setEditModerators(!editModerators),\n          testId: \"edit-members\",\n        }}\n      />\n    </div>\n    <Tile className=\"p-3\">\n      {editModerators ? (\n        <>\n          <Widget\n            src=\"thomasguntenaar.near/widget/devhub.components.molecule.ListEditor\"\n            props={{\n              data: {\n                maxLength: 100,\n                placeholder: \"member.near\",\n                prefix: \"member\",\n                list: moderators,\n              },\n              setList: setModerators,\n              // Could add a check to see if it is an valid account id.\n              validate: (newItem) => true,\n              invalidate: () => null,\n            }}\n          />\n          <div\n            className={\n              \"d-flex align-items-center justify-content-end gap-3 mt-4\"\n            }\n          >\n            <Widget\n              src={\"thomasguntenaar.near/widget/devhub.components.molecule.Button\"}\n              props={{\n                classNames: {\n                  root: \"btn-outline-danger shadow-none border-0\",\n                },\n                label: \"Cancel\",\n                onClick: handleCancelModerators,\n              }}\n            />\n            <Widget\n              src={\"thomasguntenaar.near/widget/devhub.components.molecule.Button\"}\n              props={{\n                classNames: { root: \"btn\" },\n                icon: {\n                  type: \"bootstrap_icon\",\n                  variant: \"bi-check-circle-fill\",\n                },\n                label: \"Submit\",\n                onClick: handleEditModerators,\n              }}\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          <div class=\"pt-4\">Members</div>\n\n          {moderators && (\n            <div class=\"vstack\">\n              {moderators.length ? (\n                moderators.map((child) => (\n                  <Tile className=\"w-25 p-3 m-1\" minHeight={10}>\n                    <Widget\n                      src={`thomasguntenaar.near/widget/devhub.components.molecule.ProfileLine`}\n                      props={{ accountId: child }}\n                    />\n                  </Tile>\n                ))\n              ) : (\n                <div>No moderators</div>\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </Tile>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.page.admin.moderatorsTab", "fact_widget_deployments_id": "04cf4f0b156072dde2780dd8263f3044", "inserted_timestamp": "2024-05-15T10:50:02.030Z", "modified_timestamp": "2024-05-15T10:50:02.030Z", "__row_index": 17}