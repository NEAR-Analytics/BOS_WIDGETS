{"tx_hash": "AtoNQcA2heYgMpyHWrVnefK5nPBbG7rzJNHMDdZgEAnP", "action_id_social": "DF2etUiqwdDaQnjbKVhA9SGEsixFsqs5nUctge5GJAWi-0-widget", "block_id": 117611045, "block_timestamp": "2024-04-25T18:51:51.771Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.editor.BlogOverview", "source_code": "// Pagination not necessary since it won't be too many blogs per community\n// a few hundred widgets per account are also not a problem\nconst { data, editPostId, handleItemClick, selectedItem } = props;\n\nconst options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\nconst formattedDate = (date) => new Date(date).toLocaleString(\"en-US\", options);\n\n// TODO move this to the provider\nconst reshapedData =\n  Object.keys(data || {}).map((key) => {\n    return {\n      id: key,\n      content: data[key][\"\"],\n      createdAt: formattedDate(data[key].metadata.createdAt),\n      updatedAt: formattedDate(data[key].metadata.updatedAt),\n      publishedAt: formattedDate(data[key].metadata.publishedAt),\n      ...data[key].metadata,\n      // title: data[key].metadata.title,\n      // status: data[key].metadata.status,\n      // author: data[key].metadata.author,\n      // description: data[key].metadata.description,\n      // subtitle: data[key].metadata.subtitle,\n      // category: data[key].metadata.category,\n    };\n  }) ||\n  // .sort((blog1, blog2) => {\n  //   // sort by published date\n  //   return new Date(blog2.publishedAt) - new Date(blog1.publishedAt);\n  // })\n  [];\n\nconsole.log(\"reshapedData\", reshapedData);\n\nconst blogData = [\n  {\n    id: \"new\",\n    title: \"New Blog Post\",\n    status: \"DRAFT\",\n    createdAt: new Date().toISOString().slice(0, 10),\n    updatedAt: new Date().toISOString().slice(0, 10),\n    publishedAt: \"mm-dd-yyyy\",\n    content: \"\",\n    author: \"\",\n    description: \"\",\n    subtitle: \"\",\n  },\n  ...reshapedData,\n];\n\nreturn (\n  <table\n    id=\"manage-blog-table\"\n    className={`table table-hover table-sm ${props.hideColumns && \"mt-5\"}`}\n  >\n    <thead>\n      <tr>\n        <th scope=\"col\">Name</th>\n        {props.hideColumns ? null : (\n          <>\n            <th scope=\"col\">Status</th>\n            <th scope=\"col\">Created At</th>\n            <th scope=\"col\">Updated At</th>\n            <th scope=\"col\">Visible Publish Date</th>\n          </>\n        )}\n      </tr>\n    </thead>\n    <tbody>\n      {(blogData || []).map((it) => {\n        // Hide the new blog post item unless selectedItem is new\n        if (it.id === \"new\" && selectedItem !== \"new\") {\n          return;\n        }\n\n        return (\n          <tr\n            id={`edit-blog-selector-${it.id}`}\n            key={it.id}\n            onClick={() => handleItemClick(it)}\n          >\n            <td\n              scope=\"row\"\n              className={\n                it.id === selectedItem.id ||\n                (it.id === \"new\" && selectedItem === \"new\")\n                  ? \"table-success\"\n                  : \"\"\n              }\n            >\n              {it.title}\n            </td>\n            {!props.hideColumns ? (\n              <>\n                <td>{it.status}</td>\n                <td>{it.createdAt}</td>\n                <td>{it.updatedAt}</td>\n                <td>{it.publishedAt}</td>\n              </>\n            ) : null}\n          </tr>\n        );\n      })}\n    </tbody>\n  </table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.editor.BlogOverview", "fact_widget_deployments_id": "0185fb293af60f73aaca6d52d9ff6de5", "inserted_timestamp": "2024-04-25T20:39:41.964Z", "modified_timestamp": "2024-04-25T20:39:41.964Z", "__row_index": 5}