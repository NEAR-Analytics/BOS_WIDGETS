{"tx_hash": "AtoNQcA2heYgMpyHWrVnefK5nPBbG7rzJNHMDdZgEAnP", "action_id_social": "DF2etUiqwdDaQnjbKVhA9SGEsixFsqs5nUctge5GJAWi-0-widget", "block_id": 117611045, "block_timestamp": "2024-04-25T18:51:51.771Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.Viewer", "source_code": "const { Card } =\n  VM.require(\"thomasguntenaar.near/widget/devhub.entity.addon.blogv2.Card\") ||\n  (() => <></>);\n\nconst { href } = VM.require(\"thomasguntenaar.near/widget/core.lib.url\") || (() => {});\n\nconst { handle, hideTitle, communityAddonId } = props;\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n  gap: 1rem;\n\n  @media screen and (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n`;\n\nconst Heading = styled.h3`\n  color: #151515;\n  font-size: 2rem;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 120%; /* 48px */\n  margin-bottom: 2rem;\n\n  @media screen and (max-width: 768px) {\n    font-size: 1.5rem;\n  }\n`;\n\nconst CardContainer = styled.div`\n  transition: all 300ms;\n  border-radius: 1rem;\n  height: 100%;\n\n  &:hover {\n    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1),\n      0 4px 6px -4px rgb(0 0 0 / 0.1);\n  }\n`;\n\nconst blogData =\n  Social.get(\n    [\n      // `${handle}.community.devhub.near/blog/**`,\n      \"thomasguntenaar.near/blog/**\",\n    ],\n    \"final\"\n  ) || {};\n\nconst reshapedData = Object.keys(blogData)\n  .map((key) => {\n    return {\n      ...blogData[key].metadata,\n      id: key,\n      content: blogData[key][\"\"],\n    };\n  })\n  // Show only published blogs\n  .filter((blog) => blog.status === \"PUBLISH\")\n  // Every instance of the blog tab has its own blogs\n  .filter((blog) => blog.communityAddonId === communityAddonId)\n  // Sort by published date\n  .sort((blog1, blog2) => {\n    return new Date(blog2.publishedAt) - new Date(blog1.publishedAt);\n  });\n\nfunction BlogCard(flattenedBlog) {\n  console.log(\"BlogCard handle\", handle);\n  return (\n    <Link\n      style={{ textDecoration: \"none\" }}\n      to={href({\n        widgetSrc: \"thomasguntenaar.near/widget/app\",\n        params: { page: \"blogv2\", id: flattenedBlog.id, community: handle },\n      })}\n    >\n      <CardContainer>\n        <Card data={flattenedBlog} />\n      </CardContainer>\n    </Link>\n  );\n}\nconsole.log(\"VIEWER blogdata\", blogData);\n\nreturn (\n  <div class=\"w-100\">\n    {!hideTitle && <Heading>Latest Blog Posts</Heading>}\n    <Grid>\n      {(reshapedData || []).map((flattenedBlog) => {\n        return BlogCard(flattenedBlog);\n      })}\n    </Grid>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.Viewer", "fact_widget_deployments_id": "0e4a404300cea04557d46e725c7057d3", "inserted_timestamp": "2024-04-25T20:39:41.964Z", "modified_timestamp": "2024-04-25T20:39:41.964Z", "__row_index": 0}