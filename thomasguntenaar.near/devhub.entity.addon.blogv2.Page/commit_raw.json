{"tx_hash": "Gk93cghWo9EMzWnDbWs8FwM4D3Dz9nXX7viJc6XvXsn6", "action_id_social": "87e32gicCEJyhEh4YSyMs5dJ5jkosYEQjbuUYgMfDudv-0-widget", "block_id": 120007517, "block_timestamp": "2024-05-29T17:10:42.942Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.Page", "source_code": "const { href } = VM.require(\"thomasguntenaar.near/widget/core.lib.url\") || {\n  href: () => {},\n};\nconst httpbin = fetch(`https://httpbin.org/headers`);\n\nconst { getCommunity } = VM.require(\n  \"thomasguntenaar.near/widget/core.adapter.devhub-contract\"\n) || {\n  getCommunity: () => {},\n};\nconst imagelink =\n  \"https://ipfs.near.social/ipfs/bafkreiajzvmy7574k7mp3if6u53mdukfr3hoc2kjkhjadt6x56vqhd5swy\";\n\nconst { data, onEdit, community: handle, isAllowedToEdit } = props;\n\nconst {\n  category,\n  title,\n  description,\n  subtitle,\n  publishedAt: date,\n  content,\n  author,\n  communityAddonId,\n} = data;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  padding: 0 3rem;\n  margin-bottom: 2rem;\n  position: relative;\n  ${category &&\n  `\n    span.category {\n      color: ${\n        category.toLowerCase() === \"news\"\n          ? \"#F40303\"\n          : category.toLowerCase() === \"guide\"\n          ? \"#004BE1\"\n          : category.toLowerCase() === \"reference\" && \"#FF7A00\"\n      };\n      font-size: 1.5rem;\n      font-style: normal;\n      font-weight: 700;\n      line-height: 20px; /* 125% */\n      text-transform: uppercase;\n    }\n    `}\n\n  div.date {\n    color: #818181;\n    font-size: 1rem;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 20px; /* 125% */\n    margin: 1.5rem 0;\n    width: 100%;\n  }\n\n  h1 {\n    color: #151515;\n    font-size: 3.5rem;\n    font-style: normal;\n    font-weight: 700;\n    line-height: 100%; /* 88px */\n    margin: 1.5rem 0;\n  }\n\n  p.subtitle {\n    color: #555;\n    font-size: 1.5rem;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 110%; /* 35.2px */\n    margin: 0;\n  }\n\n  .edit-icon {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    cursor: pointer;\n  }\n\n  .share-icon {\n    position: absolute;\n    top: 18px;\n    right: 55px;\n    cursor: pointer;\n  }\n\n  @media screen and (max-width: 768px) {\n    padding: 0 1rem;\n\n    span.category {\n      font-size: 0.75rem;\n    }\n\n    h1 {\n      font-size: 2rem;\n    }\n\n    p.subtitle {\n      font-size: 1rem;\n    }\n  }\n`;\n\nconst BackgroundImage = styled.img`\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  margin-bottom: 1rem;\n`;\n\nif (!handle) {\n  return <div>Community handle not found</div>;\n}\n\nconst community = getCommunity({ handle: handle });\n\nlet communityConfig = (community.addons || []).find(\n  (addon) => addon.id === communityAddonId\n);\n\nif (communityConfig === undefined) {\n  return <div>Community addon not found</div>;\n}\nconst parameters = JSON.parse(communityConfig.parameters) || {};\n\nconst options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\nconst formattedDate = new Date(date).toLocaleString(\"en-US\", options);\nconst [isLinkCopied, setLinkCopied] = useState(false);\n\nconst onShareClick = () =>\n  clipboard\n    .writeText(\n      href({\n        gateway: httpbin?.body?.headers?.Origin.slice(8) ?? \"near.social\",\n        widgetSrc: \"thomasguntenaar.near/widget/app\",\n        params: { page: \"blogv2\", community: community.handle, id: data.id },\n      })\n    )\n    .then(setLinkCopied(true));\n\nreturn (\n  <>\n    <BackgroundImage src={imagelink} />\n    <Container>\n      <div\n        className=\"share-icon\"\n        onClick={onShareClick}\n        onMouseLeave={() =>\n          setTimeout(() => {\n            setLinkCopied(false);\n          }, 1000)\n        }\n      >\n        {isLinkCopied ? (\n          <div class=\"bi bi-clipboard-check\" style={{ fontSize: \"30px\" }}></div>\n        ) : (\n          <div class=\"bi bi-box-arrow-up\" style={{ fontSize: \"30px\" }}></div>\n        )}\n      </div>\n      {isAllowedToEdit && (\n        <div className=\"edit-icon\" onClick={onEdit}>\n          <div class=\"bi bi-pencil-square\" style={{ fontSize: \"30px\" }}></div>\n        </div>\n      )}\n      {category && <span className=\"category\">{category}</span>}\n      <h1>{title}</h1>\n      <p className=\"subtitle\">{subtitle}</p>\n      <div className=\"d-flex flex-row justify-content-between date\">\n        {author && parameters.authorEnabled !== \"disabled\" && (\n          <div data-testid=\"blog-author\">{author}</div>\n        )}\n        <div data-testid=\"blog-date\">{formattedDate}</div>\n      </div>\n      <p>{description}</p>\n      <Widget\n        src={\"thomasguntenaar.near/widget/devhub.components.molecule.MarkdownViewer\"}\n        props={{ text: content }}\n      />\n    </Container>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.Page", "fact_widget_deployments_id": "09fab8a0ba6fb32d644976ffa8c27b92", "inserted_timestamp": "2024-05-29T19:43:20.222Z", "modified_timestamp": "2024-05-29T19:43:20.222Z", "__row_index": 0}