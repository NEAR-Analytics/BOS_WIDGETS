{"tx_hash": "AtoNQcA2heYgMpyHWrVnefK5nPBbG7rzJNHMDdZgEAnP", "action_id_social": "DF2etUiqwdDaQnjbKVhA9SGEsixFsqs5nUctge5GJAWi-0-widget", "block_id": 117611045, "block_timestamp": "2024-04-25T18:51:51.771Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.Page", "source_code": "// TODO Social.get\nconst { getAccountCommunityPermissions } = VM.require(\n  \"thomasguntenaar.near/widget/core.adapter.devhub-contract\"\n) || {\n  getAccountCommunityPermissions: () => {},\n};\nconst imagelink =\n  \"https://ipfs.near.social/ipfs/bafkreiajzvmy7574k7mp3if6u53mdukfr3hoc2kjkhjadt6x56vqhd5swy\";\n\nfunction Page({ data, onEdit, labels, accountId, handle }) {\n  const {\n    category,\n    title,\n    description,\n    subtitle,\n    publishedAt: date,\n    content,\n  } = data;\n\n  // TODO blog page has to have community handle in the query parameters\n  // TODO use of labels is removed\n  const permissions = getAccountCommunityPermissions({\n    account_id: accountId,\n    community_handle: \"webassemblymusic\",\n  });\n  const isAllowedToEdit = permissions?.can_configure ?? false;\n\n  console.log(\"isAllowedToEdit\", { isAllowedToEdit, handle });\n\n  // TODO: category is not configurable\n  const Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n\n    padding: 0 3rem;\n    margin-bottom: 2rem;\n    position: relative;\n    ${category &&\n    `\n    span.category {\n      color: ${\n        category.toLowerCase() === \"news\"\n          ? \"#F40303\"\n          : category.toLowerCase() === \"guide\"\n          ? \"#004BE1\"\n          : category.toLowerCase() === \"reference\" && \"#FF7A00\"\n      };\n      font-size: 1.5rem;\n      font-style: normal;\n      font-weight: 700;\n      line-height: 20px; /* 125% */\n      text-transform: uppercase;\n    }\n    `}\n\n    span.date {\n      color: #818181;\n      font-size: 1rem;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 20px; /* 125% */\n      margin: 1.5rem 0;\n    }\n\n    h1 {\n      color: #151515;\n      font-size: 3.5rem;\n      font-style: normal;\n      font-weight: 700;\n      line-height: 100%; /* 88px */\n      margin: 1.5rem 0;\n    }\n\n    p.subtitle {\n      color: #555;\n      font-size: 1.5rem;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 110%; /* 35.2px */\n      margin: 0;\n    }\n\n    .edit-icon {\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      cursor: pointer;\n    }\n\n    @media screen and (max-width: 768px) {\n      padding: 0 1rem;\n\n      span.category {\n        font-size: 0.75rem;\n      }\n\n      h1 {\n        font-size: 2rem;\n      }\n\n      p.subtitle {\n        font-size: 1rem;\n      }\n    }\n  `;\n\n  const BackgroundImage = styled.img`\n    width: 100%;\n    height: auto;\n    object-fit: cover;\n    margin-bottom: 1rem;\n  `;\n\n  const options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\n  const formattedDate = new Date(date).toLocaleString(\"en-US\", options);\n\n  return (\n    <>\n      <BackgroundImage src={imagelink} />\n      <Container>\n        {isAllowedToEdit && (\n          <div className=\"edit-icon\" onClick={onEdit}>\n            <div class=\"bi bi-pencil-square\" style={{ fontSize: \"30px\" }}></div>\n          </div>\n        )}\n        {category && <span className=\"category\">{category}</span>}\n        <h1>{title}</h1>\n        <p className=\"subtitle\">{subtitle}</p>\n        <span className=\"date\">{formattedDate}</span>\n        <p>{description}</p>\n        <Widget\n          src={\n            \"thomasguntenaar.near/widget/devhub.components.molecule.MarkdownViewer\"\n          }\n          props={{ text: content }}\n        />\n      </Container>\n    </>\n  );\n}\n\nreturn { Page };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.Page", "fact_widget_deployments_id": "62f100caba434564de64c92a7ce9801d", "inserted_timestamp": "2024-04-25T20:39:41.964Z", "modified_timestamp": "2024-04-25T20:39:41.964Z", "__row_index": 0}