{"tx_hash": "Df3i77RefHZxFFvzwmmBD4YWZtYUA8bpvRTWibSED4C8", "action_id_social": "47bam6aRWovZicfL55RCfEkFvPsYhaTPBdyLNuNuG4xF-0-widget", "block_id": 120351244, "block_timestamp": "2024-06-03T14:00:49.455Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.editor.layout", "source_code": "const {\n  BlogOverview,\n  data: processedBlogData,\n  Content,\n  parametersData,\n  onSubmit,\n  BlogPostSettings,\n  selectedBlog,\n} = props;\n\nconst [selectedItem, setSelectedItem] = useState(\n  selectedBlog ? selectedBlog : null\n);\nconst [selectedItemChanged, setSelectedItemChanged] = useState(false);\n\nconst [showScreen, setShowScreen] = useState(\n  selectedBlog ? \"editor\" : \"overview\"\n); // overview, editor, settings\n\nconst openBlogPostSettings = () => {\n  setShowScreen(true);\n};\n\nconst [isSwitchBlogModalOpen, setIsSwitchBlogModalOpen] = useState(false);\n\n// This function checks for unsaved changes and shows a modal if there are any\nconst checkForUnsavedChanges = (item) => {\n  const unsavedChanges = selectedItemChanged;\n  // If the user has edited show the confirm modal otherwise just switch\n  if (unsavedChanges) {\n    setIsSwitchBlogModalOpen(item);\n  } else {\n    handleItemClick(item);\n  }\n};\n\n// This function\nconst handleItemClick = (item) => {\n  if (item) {\n    setSelectedItem(item);\n    setShowScreen(\"editor\");\n  } else {\n    setSelectedItem(null);\n  }\n  setSelectedItemChanged(false);\n};\n\nconst goBack = () => {\n  setSelectedItem(null);\n  setShowScreen(\"overview\");\n  setSelectedItemChanged(false);\n};\n\nconst postHogHref = \"https://eu.posthog.com/project/20896\";\n\nreturn (\n  <div style={{ width: \"100%\", height: \"100%\" }}>\n    {showScreen === \"settings\" ? (\n      <BlogPostSettings onHideSettings={() => setShowScreen(\"overview\")} />\n    ) : (\n      <>\n        {showScreen === \"editor\" ? null : (\n          <div className=\"flex items-center justify-between w-100 mb-4\">\n            <div className=\"text-xl font-bold\">Blog Posts</div>\n            <div className=\"flex items-end justify-end gap-x-3\">\n              <Link\n                className=\"rounded-md bg-devhub-green-light px-3.5 py-2.5 text-sm font-semibold text-devhub-green hover:text-green shadow-sm hover:bg-devhub-green-transparent\"\n                href={postHogHref}\n                target=\"_blank\"\n              >\n                Analytics\n              </Link>\n              {/* <button\n                onClick={() => setShowScreen(\"settings\")}\n                type=\"button\"\n                className=\"rounded-md bg-devhub-green-light px-3.5 py-2.5 text-sm font-semibold text-devhub-green hover:text-green shadow-sm hover:bg-devhub-green-transparent\"\n              >\n                Settings\n              </button> */}\n              <Widget\n                src={\n                  \"thomasguntenaar.near/widget/devhub.components.molecule.BlogControl\"\n                }\n                props={{\n                  title: \"New Blog Post\",\n                  onClick: () => {\n                    handleItemClick(\"new\");\n                    setShowScreen(\"editor\");\n                  },\n                  testId: \"new-blog-post-button\",\n                }}\n              />\n            </div>\n          </div>\n        )}\n        <div\n          className=\"template\"\n          style={{ display: \"flex\", width: \"100%\", height: \"100%\" }}\n        >\n          <div\n            className=\"left-panel\"\n            style={{\n              width: showScreen === \"editor\" ? \"20%\" : \"100%\",\n            }}\n          >\n            <BlogOverview\n              selectedItem={selectedItem}\n              handleItemClick={checkForUnsavedChanges}\n              hideColumns={showScreen === \"editor\"}\n            />\n            <Widget\n              src={\n                \"thomasguntenaar.near/widget/devhub.entity.addon.blogv2.editor.ConfirmModal\"\n              }\n              props={{\n                isOpen: isSwitchBlogModalOpen,\n                onCancelClick: () => setIsSwitchBlogModalOpen(false),\n                onConfirmClick: () => {\n                  handleItemClick(isSwitchBlogModalOpen);\n                  setIsSwitchBlogModalOpen(false);\n                },\n                title: \"Are you sure you want to continue?\",\n                content: \"Unsaved changes will be lost.\",\n                confirmLabel: \"Continue\",\n                cancelLabel: \"Cancel\",\n                buttonRoot: \"btn-danger\",\n              }}\n            />\n          </div>\n          {showScreen === \"editor\" && (\n            <div\n              className=\"right-panel\"\n              style={{ flex: 1, width: 0, overflow: \"scroll\" }}\n              key={selectedItem.id}\n            >\n              <Content\n                data={selectedItem}\n                onCancel={goBack}\n                setSelectedItemChanged={setSelectedItemChanged}\n              />\n            </div>\n          )}\n        </div>\n      </>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.editor.layout", "fact_widget_deployments_id": "3b0be79e36939e1b2d5d4eab3243a5a5", "inserted_timestamp": "2024-06-03T15:40:51.411Z", "modified_timestamp": "2024-06-03T15:40:51.411Z", "__row_index": 6}