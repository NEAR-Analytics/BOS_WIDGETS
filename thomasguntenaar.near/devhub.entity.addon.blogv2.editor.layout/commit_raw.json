{"tx_hash": "AtoNQcA2heYgMpyHWrVnefK5nPBbG7rzJNHMDdZgEAnP", "action_id_social": "DF2etUiqwdDaQnjbKVhA9SGEsixFsqs5nUctge5GJAWi-0-widget", "block_id": 117611045, "block_timestamp": "2024-04-25T18:51:51.771Z", "signer_id": "thomasguntenaar.near", "widget_name": "devhub.entity.addon.blogv2.editor.layout", "source_code": "const { Sidebar, Content, editData, onSubmit, BlogPostSettings } = props;\n\n// Selected Item is the property \"parameters\" of the community addon (blog)\nconst [selectedItem, setSelectedItem] = useState(editData);\nconst [showEditor, setShowEditor] = useState(false);\nconst [showBlogPostSettings, setBlogPostSettings] = useState(false);\n\nconst handleItemClick = (item) => {\n  if (item) {\n    setSelectedItem(item);\n    setShowEditor(true);\n  } else {\n    setSelectedItem(null);\n  }\n};\n\nconst goBack = () => {\n  setSelectedItem(null);\n  setShowEditor(false);\n};\n\n// TODO Move to layout\nconst openBlogPostSettings = () => {\n  // TODO 599\n  setBlogPostSettings(true);\n};\n\nconst saveBlogPostSettings = () => {\n  // TODO 599 move to provider\n  console.log(\"Implement saving blog settings issue 599\");\n};\n\nconst handlePublish = (status) => {\n  onSubmit &&\n    onSubmit(\n      {\n        id: data.id || undefined,\n        title,\n        subtitle,\n        description,\n        date,\n        status,\n        content,\n        author,\n        category,\n        community: handle, // TODO remove this?\n      },\n      data.id !== undefined\n    );\n};\n\nconst openAnalytics = () => {\n  window.open(\"https://eu.posthog.com/project/20896\", \"_blank\");\n};\n\nreturn (\n  <div style={{ width: \"100%\", height: \"100%\" }}>\n    {showBlogPostSettings ? (\n      <div>\n        {/* TODO move this to BlogPostSettings */}\n        <div className=\"d-flex gap-1 align-items-end justify-content-end\">\n          <button\n            className=\"btn btn-light\"\n            onClick={() => setBlogPostSettings(false)}\n          >\n            Cancel\n          </button>\n          <Widget\n            src={\"thomasguntenaar.near/widget/devhub.components.molecule.BlogControl\"}\n            props={{\n              title: \"Save Settings\",\n              onClick: saveBlogPostSettings,\n            }}\n          />\n        </div>\n        <BlogPostSettings />\n      </div>\n    ) : (\n      <>\n        {showEditor ? null : (\n          <div className=\"d-flex gap-1 align-items-end justify-content-end w-100 mb-4\">\n            {/* TODO PETER <input type=\"text\" placeholder=\"Search blog posts\" />\n            <button className=\"btn btn-secondary\">Filter</button>\n            END PETER */}\n            <button className=\"btn btn-light\" onClick={openAnalytics}>\n              Analytics\n            </button>\n            <button className=\"btn btn-light\" onClick={openBlogPostSettings}>\n              Settings\n            </button>\n            <Widget\n              src={\n                \"thomasguntenaar.near/widget/devhub.components.molecule.BlogControl\"\n              }\n              props={{\n                title: \"New Blog Post\",\n                onClick: () => {\n                  handleItemClick(\"new\");\n                  setShowEditor(true);\n                },\n              }}\n            />\n          </div>\n        )}\n        <div\n          className=\"template\"\n          style={{ display: \"flex\", width: \"100%\", height: \"100%\" }}\n        >\n          <div\n            className=\"left-panel\"\n            style={{\n              width: showEditor ? \"20%\" : \"100%\",\n            }}\n          >\n            <Sidebar\n              selectedItem={selectedItem}\n              handleItemClick={handleItemClick}\n              hideColumns={showEditor}\n            />\n          </div>\n          {showEditor && (\n            <div\n              className=\"right-panel\"\n              style={{ flex: 1, width: 0, overflow: \"scroll\" }}\n              key={selectedItem.id}\n            >\n              <Content data={selectedItem} onCancel={goBack} />\n            </div>\n          )}\n        </div>\n      </>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/thomasguntenaar.near/widget/devhub.entity.addon.blogv2.editor.layout", "fact_widget_deployments_id": "1e38c1ec4599d2bd55e8416404b26231", "inserted_timestamp": "2024-04-25T20:39:41.964Z", "modified_timestamp": "2024-04-25T20:39:41.964Z", "__row_index": 8}