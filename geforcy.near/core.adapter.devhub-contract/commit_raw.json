{"tx_hash": "3iJpENHMjGcCuvPPpgcM2SFBJQXGa8EEcwzctArfNqLD", "action_id_social": "8YWso4C4ndFRHVzcthLKtSpLco6dgKUYpZSBNxSfLCn6-0-widget", "block_id": 105917523, "block_timestamp": "2023-11-17T17:47:05.540Z", "signer_id": "geforcy.near", "widget_name": "core.adapter.devhub-contract", "source_code": "function getRootMembers() {\n  return Near.view(\"geforcy.near\", \"get_root_members\") ?? null;\n}\n\nfunction hasModerator({ account_id }) {\n  console.log(\n    \"\ud83d\ude80 ~ file: devhub-contract.jsx:6 ~ hasModerator ~ account_id:\",\n    account_id\n  );\n  console.log(\n    \"\ud83d\ude80 ~ file: devhub-contract.jsx:12 ~ hasModerator ~ REPL_DEVHUB_CONTRACT \",\n    \"geforcy.near\"\n  );\n  return (\n    Near.view(\"geforcy.near\", \"has_moderator\", { account_id }) ??\n    null\n  );\n}\n\nfunction createCommunity({ inputs }) {\n  return Near.call(\"geforcy.near\", \"create_community\", { inputs });\n}\n\nfunction getCommunity({ handle }) {\n  return (\n    Near.view(\"geforcy.near\", \"get_community\", { handle }) ?? null\n  );\n}\n\nfunction getFeaturedCommunities() {\n  return (\n    Near.view(\"geforcy.near\", \"get_featured_communities\") ?? null\n  );\n}\n\nfunction getAccountCommunityPermissions({ account_id, community_handle }) {\n  return (\n    Near.view(\"geforcy.near\", \"get_account_community_permissions\", {\n      account_id,\n      community_handle,\n    }) ?? null\n  );\n}\n\nfunction updateCommunity({ handle, community }) {\n  return Near.call(\"geforcy.near\", \"update_community\", {\n    handle,\n    community,\n  });\n}\n\nfunction deleteCommunity({ handle }) {\n  return Near.call(\"geforcy.near\", \"delete_community\", { handle });\n}\n\nfunction updateCommunityBoard({ handle, board }) {\n  return Near.call(\"geforcy.near\", \"update_community_board\", {\n    handle,\n    board,\n  });\n}\n\nfunction updateCommunityGithub({ handle, github }) {\n  return Near.call(\"geforcy.near\", \"update_community_github\", {\n    handle,\n    github,\n  });\n}\n\n/**\n * Sets all addons, for configurating tabs\n */\nfunction setCommunityAddons({ handle, addons }) {\n  return Near.call(\"geforcy.near\", \"set_community_addons\", {\n    handle,\n    addons,\n  });\n}\n\n/**\n * Sets specific addon, for configuring params\n */\nfunction setCommunityAddon({ handle, addon }) {\n  return Near.call(\"geforcy.near\", \"set_community_addon\", {\n    handle,\n    community_addon: addon,\n  });\n}\n\n/**\n * Gets all available addons, these are controlled by devhub moderators\n */\nfunction getAllAddons() {\n  return Near.view(\"geforcy.near\", \"get_all_addons\") ?? null;\n}\n\nfunction getAccessControlInfo() {\n  return (\n    Near.view(\"geforcy.near\", \"get_access_control_info\") ?? null\n  );\n}\n\nfunction getAllAuthors() {\n  return Near.view(\"geforcy.near\", \"get_all_authors\") ?? null;\n}\n\nfunction getAllCommunitiesMetadata() {\n  return (\n    Near.view(\"geforcy.near\", \"get_all_communities_metadata\") ?? null\n  );\n}\n\nfunction getAvailableAddons() {\n  return [\n    {\n      id: \"wiki\",\n      title: \"Wiki\",\n      description: \"Create a wiki for your community\",\n      view_widget: \"geforcy.near/widget/devhub.entity.addon.wiki.Viewer\",\n      configurator_widget:\n        \"geforcy.near/widget/devhub.entity.addon.wiki.Configurator\",\n    },\n    {\n      id: \"telegram\",\n      title: \"Telegram\",\n      description: \"Connect your telegram\",\n      view_widget: \"geforcy.near/widget/devhub.entity.addon.telegram.Viewer\",\n      configurator_widget:\n        \"geforcy.near/widget/devhub.entity.addon.telegram.Configurator\",\n    },\n    {\n      id: \"github\",\n      title: \"Github\",\n      description: \"Connect your github\",\n      view_widget: \"geforcy.near/widget/devhub.entity.addon.github.Viewer\",\n      configurator_widget:\n        \"geforcy.near/widget/devhub.entity.addon.github.Configurator\",\n    },\n    {\n      id: \"kanban\",\n      title: \"Kanban\",\n      description: \"Connect your github kanban board\",\n      view_widget: \"geforcy.near/widget/devhub.entity.addon.kanban.Viewer\",\n      configurator_widget:\n        \"geforcy.near/widget/devhub.entity.addon.kanban.Configurator\",\n    },\n    {\n      id: \"blog\",\n      title: \"Blog\",\n      description: \"Create a blog for your community\",\n      view_widget: \"geforcy.near/widget/devhub.entity.addon.blog.Viewer\",\n      configurator_widget:\n        \"geforcy.near/widget/devhub.entity.addon.blog.Configurator\",\n    },\n  ];\n  // return Near.view(\"geforcy.near\", \"get_available_addons\") ?? null;\n}\n\nfunction getCommunityAddons({ handle }) {\n  return Near.view(\"geforcy.near\", \"get_community_addons\", {\n    handle,\n  });\n}\n\nfunction getCommunityAddonConfigs({ handle }) {\n  return Near.view(\"geforcy.near\", \"get_community_addon_configs\", {\n    handle,\n  });\n}\n\nfunction getAllLabels() {\n  return Near.view(\"geforcy.near\", \"get_all_labels\") ?? null;\n}\n\nfunction getPost({ post_id }) {\n  return Near.view(\"geforcy.near\", \"get_post\", { post_id }) ?? null;\n}\n\nfunction getPostsByAuthor({ author }) {\n  return (\n    Near.view(\"geforcy.near\", \"get_posts_by_author\", { author }) ??\n    null\n  );\n}\n\nfunction getPostsByLabel({ label }) {\n  return (\n    Near.view(\"geforcy.near\", \"get_posts_by_label\", {\n      label,\n    }) ?? null\n  );\n}\n\nfunction useQuery(name, params) {\n  const initialState = { data: null, error: null, isLoading: true };\n\n  const cacheState = useCache(\n    () =>\n      Near.asyncView(\n        \"geforcy.near\",\n        [\"get\", name].join(\"_\"),\n        params ?? {}\n      )\n        .then((response) => ({\n          ...initialState,\n          data: response ?? null,\n          isLoading: false,\n        }))\n        .catch((error) => ({\n          ...initialState,\n          error: props?.error ?? error,\n          isLoading: false,\n        })),\n\n    JSON.stringify({ name, params }),\n    { subscribe: false } // NOTE: I'm turning off subscribe to stop the constant re-rendering\n  );\n\n  return cacheState === null ? initialState : cacheState;\n}\n\nreturn {\n  getRootMembers,\n  hasModerator,\n  createCommunity,\n  getCommunity,\n  getFeaturedCommunities,\n  getAccountCommunityPermissions,\n  updateCommunity,\n  deleteCommunity,\n  updateCommunityBoard,\n  updateCommunityGithub,\n  setCommunityAddons,\n  setCommunityAddon,\n  getAccessControlInfo,\n  getAllAuthors,\n  getAllCommunitiesMetadata,\n  getAllAddons,\n  getCommunityAddons,\n  getCommunityAddonConfigs,\n  getAllLabels,\n  getPost,\n  getPostsByAuthor,\n  getPostsByLabel,\n  useQuery,\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/geforcy.near/widget/core.adapter.devhub-contract", "fact_widget_deployments_id": "71edef59a9278d74f00c870833b24451", "inserted_timestamp": "2023-11-17T19:41:12.588Z", "modified_timestamp": "2023-11-17T19:41:12.588Z", "__row_index": 0}