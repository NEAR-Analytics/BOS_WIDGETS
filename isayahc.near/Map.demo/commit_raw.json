{"tx_hash": "Bg71J46bvF5PHg5bTPYoFdjettwsKG1pbyfV2nQyNRTS", "action_id_social": "5EFYG31b7EK89TTkRVvWHa9nAHH3A9Eq48huFaxfQHNf-0-widget", "block_id": 108047360, "block_timestamp": "2023-12-16T00:39:54.297Z", "signer_id": "isayahc.near", "widget_name": "Map.demo", "source_code": "const res = fetch(\"https://data.cityofnewyork.us/resource/fi97-k4k6.json\");\r\n\r\nconst data = res.body;\r\nconst myData = res.body;\r\n\r\nconst formattedData = data.map((item, index) => ({\r\n  id: index + 1, // Create an ID starting at 1\r\n  lat: item.location_point.latitude,\r\n  lng: item.location_point.longitude,\r\n  streetaddress: item.streetaddress,\r\n  open_year_round: item.open_year_round,\r\n  accepts_ebt: item.accepts_ebt,\r\n  daysoperation: item.daysoperation,\r\n  marketname: item.marketname,\r\n  borough: item.borough,\r\n  hoursoperations: item.hoursoperations,\r\n  seasondates: item.seasondates,\r\n}));\r\n\r\ndata = myData = formattedData; // Reassign 'data' to the new formatted array\r\n\r\n// function Inspect(p) {\r\n//   return (\r\n//     <div style={{ backgroundColor: \"#00C600\" }}>\r\n//       <h1>{p.marketname}</h1>\r\n//       <pre>{JSON.stringify(p, null, 2)}</pre>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nfunction Inspect(p) {\r\n  const style = {\r\n    backgroundColor: \"#e6f4ea\", // A softer green\r\n    color: \"#004d00\", // A dark green that complements the background\r\n    padding: \"20px\", // Added padding for better spacing\r\n    borderRadius: \"8px\", // Optional: rounded corners for modern UI\r\n    fontFamily: \"monospace\", // Ensures JSON is in a readable font\r\n    fontSize: \"16px\", // Ensures text is legible\r\n    overflowX: \"auto\", // In case of overflow, allow scrolling\r\n  };\r\n\r\n  return (\r\n    <div style={style}>\r\n      <h1 style={{ marginBottom: \"0.5em\" }}>{p.marketname}</h1>\r\n      <pre style={{ whiteSpace: \"pre-wrap\", wordBreak: \"break-word\" }}>\r\n        {JSON.stringify(p, null, 2)}\r\n      </pre>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction handleSave(v) {\r\n  console.log(v);\r\n}\r\n\r\n// function Form({ data }) {\r\n//   return (\r\n//     <div style={{ backgroundColor: \"green\" }}>\r\n//       <h1>Form</h1>\r\n//       <pre>{JSON.stringify(data, null, 2)}</pre>\r\n//       <button onClick={() => handleSave(\"hello\")}>Save</button>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nfunction Form({ data, onSave }) {\r\n  const formStyle = {\r\n    backgroundColor: \"#e6f4ea\", // Softer green background\r\n    padding: \"20px\", // Padding for spacing around the content\r\n    borderRadius: \"8px\", // Rounded corners for modern UI\r\n    fontFamily: \"Arial, sans-serif\", // More suitable font for form content\r\n    color: \"#004d00\", // Complementary dark green color for text\r\n    margin: \"20px\", // Margin around the form for spacing within its container\r\n    boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\", // Subtle shadow for depth\r\n  };\r\n\r\n  const buttonStyle = {\r\n    backgroundColor: \"#4CAF50\", // Green color for the button\r\n    color: \"white\", // White text for contrast\r\n    padding: \"10px 20px\", // Padding for a larger clickable area\r\n    border: \"none\", // Remove default border\r\n    borderRadius: \"4px\", // Rounded corners for the button\r\n    cursor: \"pointer\", // Cursor indicates a clickable button\r\n    fontSize: \"16px\", // Font size for readability\r\n    margin: \"10px 0\", // Margin for spacing around the button\r\n  };\r\n\r\n  // Event handler for when the form is saved\r\n  const handleSave = (value) => {\r\n    console.log(value);\r\n    if (onSave) {\r\n      onSave(value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={formStyle}>\r\n      <h1 style={{ textAlign: \"center\" }}>Form Details</h1>\r\n      <pre>{JSON.stringify(data, null, 2)}</pre>\r\n      <button style={buttonStyle} onClick={() => handleSave(data)}>\r\n        Save\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <Widget\r\n    src=\"efiz.near/widget/Map.index\"\r\n    props={{\r\n      markers: data,\r\n      myMarkers: myData,\r\n      onMapClick: (e) => console.log(\"map click\", e),\r\n      onMarkerClick: (e) => console.log(\"marker click\", e),\r\n      inspect: (p) => <Inspect {...p} />,\r\n      form: (p) => <Form {...p} />,\r\n    }}\r\n  />\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/isayahc.near/widget/Map.demo", "fact_widget_deployments_id": "c4e98689218868e682357f5908730ded", "inserted_timestamp": "2023-12-16T02:53:50.536Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}