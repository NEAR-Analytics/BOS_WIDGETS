{"tx_hash": "DRPgz37iEjEWu6RTUTFjBEvgNEPEo4e2P1pJyD9tnW42", "action_id_social": "FxQY4WPqncMi1bZZLtWj2ERc95BFYe3dC6kqdHvmLz4L-0-widget", "block_id": 114535889, "block_timestamp": "2024-03-11T19:00:02.841Z", "signer_id": "agiguild.near", "widget_name": "Placeholder", "source_code": "const { href } = VM.require(\"devhub.near/widget/core.lib.url\");\nif (!href) {\n    return <></>;\n}\n\nconst { entityType, title } = props;\n\nconst { schema } = VM.require(`${REPL_AGIGUILD}/widget/Schema.Generic`);\nif (!schema ) {\n    return <></>;\n}\n\nconst Row = styled.div`\n    vertical-align: middle;\n    padding-bottom: 1em;\n    img.logo {\n        width: 30%;\n        aspect-ratio: 1 / 1;\n        border-radius: 50%;\n        object-fit: cover;\n    }\n`;\n    const Actions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 2px;\n`;\n\nconst convertSnakeToPascal = (item) => {\n    const newItems = {};\n    Object.keys(item).forEach((key) => {\n        const pascalKey = key.replace(/(_\\w)/g, (m) => m[1].toUpperCase());\n        newItems[pascalKey] = item[key];\n    });\n    return newItems;\n};\nconst convertPascalToSnake = (item) => {\n    const newItems = {};\n    Object.keys(item).forEach((key) => {\n        const snakeKey = key.replace(/([A-Z])/g, (m) => \"_\" + m.toLowerCase());\n        newItems[snakeKey] = item[key];\n    });\n    return newItems;\n}\n\nconst renderItem = (item, editFunction) => {\n    const { accountId, name, displayName, logoUrl } = item;\n    const itemComponent = item.component ? item.component : `${REPL_AGIGUILD}/widget/Agent.AgentChat`;\n    const imageUrl =\n        logoUrl ?? \"https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu\";\n    const actionLink = href({\n        widgetSrc: itemComponent,\n        params: { src: `${accountId}/agent/${name}` },\n    });\n    const detailsLink = href({\n        widgetSrc: `${REPL_AGIGUILD}/widget/Agent.AgentDetails`,\n        params: { src: `${accountId}/agent/${name}` },\n    });\n\n    const actionUrl = `https://${REPL_NEAR_URL}/${itemComponent}?src=${accountId}/agent/${item.name}`;\n    const editType = accountId === context.accountId ? \"edit\" : \"fork\";\n    const editLabel = editType === \"edit\" ? \"Edit\" : \"Fork\";\n    const editIcon = editType === \"edit\" ? \"ph-bold ph-pencil-simple\" : \"ph-bold ph-git-fork\";\n\n    return (\n        <Row className=\"row\">\n            <div className=\"col-2\">\n                <img className=\"logo\" src={imageUrl} alt=\"logo\"/>\n            </div>\n            <div className=\"col-4\">\n                {displayName}\n            </div>\n            <div className=\"col-2\">\n                {accountId}\n            </div>\n            <div className=\"col-2\">\n                <Actions>\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: editLabel,\n                            trigger: (\n                                <Widget\n                                    src=\"near/widget/DIG.Button\"\n                                    props={{\n                                        onClick: () => editFunction(item),\n                                        iconLeft: editIcon,\n                                        variant: \"secondary\",\n                                        fill: \"ghost\",\n                                        size: \"small\",\n                                    }}\n                                />\n                            ),\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/CopyUrlButton\"\n                        props={{\n                            url: actionUrl,\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/ShareButton\"\n                        props={{\n                            postType: \"Placeholder\",\n                            url: actionUrl,\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: \"View Details\",\n                            trigger: (\n                                <Link to={detailsLink} style={{ all: \"unset\" }}>\n                                    <Widget\n                                        src=\"near/widget/DIG.Button\"\n                                        props={{\n                                            iconLeft: \"ph-bold ph-eye\",\n                                            variant: \"secondary\",\n                                            fill: \"ghost\",\n                                            size: \"small\",\n                                        }}\n                                    />\n                                </Link>\n                            ),\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: \"Use \" + entityType,\n                            trigger: (\n                                <Link to={actionLink} style={{ all: \"unset\" }}>\n                                    <Widget\n                                        src=\"near/widget/DIG.Button\"\n                                        props={{\n                                            iconLeft: \"ph-bold ph-chat-teardrop-text\",\n                                            variant: \"secondary\",\n                                            fill: \"ghost\",\n                                            size: \"small\",\n                                        }}\n                                    />\n                                </Link>\n                            ),\n                        }}\n                    />\n                </Actions>                \n            </div>\n        </Row>\n    );\n};\n\nconst createWidget = \"near/widget/Entities.Template.EntityCreate\";\n\nconst loadItems = (queries, queryName, offset, collection, onLoad) => {\n    console.log('loadItems');\n    const placeholderData = { data: [\n        {name: 'test1', displayName: 'Alpha Alpaca Aardvark Alumnus', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n        {name: 'test2', displayName: 'Beta Barracuda Baleen Boilermaker', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n        {name: 'test3', displayName: 'Gamma Guppy Gorilla Grapher', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n    ]};\n    return Promise.resolve().then(() => onLoad(placeholderData.data, placeholderData.data.length));\n};\nconst buildQueries = (params) => null;\nconst queryName = \"unused\";\n\nreturn (\n    <div>\n        <h4>{title}</h4>\n        <Widget\n            src=\"near/widget/Entities.Template.EntityList\"\n            props={{ table: true, entityType, loadItems, buildQueries, queryName, collection: 'data', renderItem, createWidget, schema }}\n        />\n    </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/agiguild.near/widget/Placeholder", "fact_widget_deployments_id": "187fff5647afce4c545f885ab3f214fa", "inserted_timestamp": "2024-03-11T20:25:40.244Z", "modified_timestamp": "2024-03-11T20:25:40.244Z", "__row_index": 3}