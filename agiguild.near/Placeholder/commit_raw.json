{"tx_hash": "AenCgDKWkfAQtGUXsmHNrXGWa9L1pFDkd9M8FapXk93N", "action_id_social": "FMZ9cFezbGDPEvJGRf3QttM7t7Uao7aBmLQbFrdDEpkj-0-widget", "block_id": 114978915, "block_timestamp": "2024-03-18T21:16:57.612Z", "signer_id": "agiguild.near", "widget_name": "Placeholder", "source_code": "const { href } = VM.require(\"devhub.near/widget/core.lib.url\");\nif (!href) {\n    return <></>;\n}\n\nconst { namespace, entityType, title } = props;\n\nconst { genSchema } = VM.require(`near/widget/Entities.Template.GenericSchema`, { namespace, entityType });\nif (!genSchema ) {\n    return <></>;\n}\nconst schema = genSchema(namespace, entityType);\n\nconst Row = styled.div`\n    vertical-align: middle;\n    padding-bottom: 1em;\n    img.logo {\n        width: 30%;\n        aspect-ratio: 1 / 1;\n        border-radius: 50%;\n        object-fit: cover;\n    }\n`;\n    const Actions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 2px;\n`;\n\nconst renderItem = (item, editFunction) => {\n    const { accountId, name, displayName, logoUrl } = item;\n    const itemComponent = item.component ? item.component : `agiguild.near/widget/Agent.AgentChat`;\n    const imageUrl =\n        logoUrl ?? \"https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu\";\n    const actionLink = href({\n        widgetSrc: itemComponent,\n        params: { src: `${accountId}/agent/${name}` },\n    });\n    const detailsLink = href({\n        widgetSrc: `agiguild.near/widget/Agent.AgentDetails`,\n        params: { src: `${accountId}/agent/${name}` },\n    });\n\n    const actionUrl = `https://near.org/${itemComponent}?src=${accountId}/agent/${item.name}`;\n    const editType = accountId === context.accountId ? \"edit\" : \"fork\";\n    const editLabel = editType === \"edit\" ? \"Edit\" : \"Fork\";\n    const editIcon = editType === \"edit\" ? \"ph-bold ph-pencil-simple\" : \"ph-bold ph-git-fork\";\n\n    return (\n        <Row className=\"row\">\n            <div className=\"col-2\">\n                <img className=\"logo\" src={imageUrl} alt=\"logo\"/>\n            </div>\n            <div className=\"col-4\">\n                {displayName}\n            </div>\n            <div className=\"col-2\">\n                {accountId}\n            </div>\n            <div className=\"col-2\">\n                <Actions>\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: editLabel,\n                            trigger: (\n                                <Widget\n                                    src=\"near/widget/DIG.Button\"\n                                    props={{\n                                        onClick: () => editFunction(item),\n                                        iconLeft: editIcon,\n                                        variant: \"secondary\",\n                                        fill: \"ghost\",\n                                        size: \"small\",\n                                    }}\n                                />\n                            ),\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/CopyUrlButton\"\n                        props={{\n                            url: actionUrl,\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/ShareButton\"\n                        props={{\n                            postType: \"Placeholder\",\n                            url: actionUrl,\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: \"View Details\",\n                            trigger: (\n                                <Link to={detailsLink} style={{ all: \"unset\" }}>\n                                    <Widget\n                                        src=\"near/widget/DIG.Button\"\n                                        props={{\n                                            iconLeft: \"ph-bold ph-eye\",\n                                            variant: \"secondary\",\n                                            fill: \"ghost\",\n                                            size: \"small\",\n                                        }}\n                                    />\n                                </Link>\n                            ),\n                        }}\n                    />\n                    <Widget\n                        src=\"near/widget/DIG.Tooltip\"\n                        props={{\n                            content: \"Use \" + entityType,\n                            trigger: (\n                                <Link to={actionLink} style={{ all: \"unset\" }}>\n                                    <Widget\n                                        src=\"near/widget/DIG.Button\"\n                                        props={{\n                                            iconLeft: \"ph-bold ph-chat-teardrop-text\",\n                                            variant: \"secondary\",\n                                            fill: \"ghost\",\n                                            size: \"small\",\n                                        }}\n                                    />\n                                </Link>\n                            ),\n                        }}\n                    />\n                </Actions>                \n            </div>\n        </Row>\n    );\n};\n\nconst createWidget = \"near/widget/Entities.Template.EntityCreate\";\n\nconst loadItems = (queries, queryName, offset, collection, onLoad) => {\n    const placeholderData = { data: [\n        {name: 'test1', displayName: 'Alpha Alpaca Aardvark Alumnus', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n        {name: 'test2', displayName: 'Beta Barracuda Baleen Boilermaker', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n        {name: 'test3', displayName: 'Gamma Guppy Gorilla Grapher', accountId: 'agiguild.near', logoUrl: 'https://ipfs.near.social/ipfs/bafkreibysr2mkwhb4j36h2t7mqwhynqdy4vzjfygfkfg65kuspd2bawauu'},\n    ]};\n    return Promise.resolve().then(() => onLoad(placeholderData.data, placeholderData.data.length));\n};\nconst buildQueries = (params) => null;\nconst queryName = \"unused\";\n\nreturn (\n    <div>\n        <h4>{title}</h4>\n        <Widget\n            src=\"near/widget/Entities.Template.EntityList\"\n            props={{ table: true, entityType, loadItems, buildQueries, queryName, collection: 'data', renderItem, createWidget, schema }}\n        />\n    </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/agiguild.near/widget/Placeholder", "fact_widget_deployments_id": "8b6a8e0d61dbeb37b2c3e6bc1feea2d4", "inserted_timestamp": "2024-03-18T22:28:44.089Z", "modified_timestamp": "2024-03-18T22:28:44.089Z", "__row_index": 5}