{"tx_hash": "54VrRHY9oDVqnS9RsMUvxixuzDC8gqZQYxGTPVig4S2N", "action_id_social": "9zKgvwezYzTdBJXYjEZRvYjmCPf2NDHnCH5hrZpq9r8C-0-widget", "block_id": 101202607, "block_timestamp": "2023-09-15T19:57:14.037Z", "signer_id": "party-dhsimpson.near", "widget_name": "donnie.bos.my-social", "source_code": "const account_id = context.accountId ?? props.accountId;\n\nconst profileData = props.profile ?? Social.getr(account_id); //`idknwhoru.near/profile`\n\nif (profileData === null) {\n  return \"Loading\";\n}\n\nconst MyPageWrapper = styled.div`\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n`;\nconst nearIpfsBaseUrl = \"https://ipfs.near.social/ipfs/\";\n\nfunction MyProfile() {\n  const ProfileWrapper = styled.div`\n        width: 100%;\n        height: 300px;\n        background-color: rgba(0,0,0,0.2);\n        display: flex;\n        align-items: center;\n        border-radius: 25px;\n        margin-bottom: 30px;\n    `;\n\n  const ProfileImage = styled.img`\n        width: 150px;\n        height: 150px;\n        margin: 0 20px;\n        border-radius: 100%;\n    `;\n\n  const MyName = styled.h2`\n    `;\n\n  const MyWallet = styled.p`\n    `;\n\n  return (\n    <ProfileWrapper>\n      <ProfileImage\n        src={`${nearIpfsBaseUrl}${profileData.image.ipfs_cid}`}\n        alt=\"profile-image\"\n      />\n      <div>\n        <MyName>{profileData.name}</MyName>\n        <MyWallet>{account_id}</MyWallet>\n      </div>\n    </ProfileWrapper>\n  );\n}\n\nconst MySocialDataWrapper = styled.div`\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n`;\n\nfunction PostData() {\n  const postIdxData = Social.index(\"post\", \"main\", {\n    limit: 30,\n    order: \"desc\",\n    accountId: [account_id],\n  });\n\n  const postBlockHashList = postIdxData.map((idxData) => {\n    return idxData.blockHeight;\n  });\n\n  const postList = postBlockHashList.map((blockHash) => {\n    return Social.get(`${account_id}/post/main`, blockHash);\n  });\n\n  function RenderPostListItem(key, value, idx) {\n    const { text, image } = JSON.parse(value);\n    const PostText = styled.span`\n      font-size: 20px;\n      overflow: hidden;\n      max-height: 100px;\n    `;\n\n    const PostImg = styled.img`\n      width: 50px;\n      height: 50px;\n    `;\n\n    return (\n      <>\n        <PostText>\n          <b>#{idx}</b>\n          {text}\n        </PostText>\n        {image && (\n          <PostImg\n            src={`${nearIpfsBaseUrl}${image.ipfs_cid}`}\n            alt=\"profile-image\"\n          />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <SocialData data={postList} name=\"Posts\" renderer={RenderPostListItem} />\n  );\n}\n\nfunction WidgetData() {\n  const componentData = Social.getr(`${account_id}/widget`);\n\n  function RenderWidgetListItem(key, value) {\n    const widgetBaseUrl = `https://near.social/${account_id}/widget/`;\n\n    const OpenWidgetLink = styled.a`\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        text-decoration: none;\n        color: black;\n\n        &:hover, &:focus {\n            text-decoration: none;\n            color: black;\n        }\n    `;\n    const WidgetName = styled.span`\n        max-width: 70%;\n        font-size: 20px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    `;\n\n    return (\n      <OpenWidgetLink href={`${widgetBaseUrl}${key}`} target=\"_blank\">\n        <WidgetName>{key}</WidgetName>\n        <Widget\n          src=\"party-dhsimpson.near/widget/gotoSvg\"\n          props={{ width: 15, heigh: 15 }}\n        />\n      </OpenWidgetLink>\n    );\n  }\n\n  return (\n    <SocialData\n      data={componentData}\n      name=\"Widgets\"\n      renderer={RenderWidgetListItem}\n    />\n  );\n}\n\nfunction SocialData({ data, name, renderer }) {\n  const DataHead = styled.h3`\n        border-bottom: 1px solid #DDD;\n        line-height: 2;\n        padding-bottom: 10px;\n    `;\n\n  const SocialDataList = styled.ul`\n        padding: 0;\n        margin-top: 20px;\n        max-height: 800px;\n        overflow-y: scroll;\n        /* Firefox */\n        scrollbar-width: none;\n\n        /* IE and Edge */\n        -ms-overflow-style: none;\n\n        /* Chrome, Safari, newer versions of Opera */\n        &::-webkit-scrollbar {\n          display: none;\n        }\n    `;\n\n  const SocialDataListItem = styled.li`\n        list-style-type: none;\n        width: 100%;\n        height: 100px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin: 20px 0;\n        padding: 10px;\n        border-radius: 20px;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        background-color: rgba(0,0,0,0.025);\n    `;\n  const MySocialData = styled.div`\n        width: 45%;\n        min-height: 500px;\n    `;\n  return (\n    <MySocialData>\n      <DataHead>\n        Number of {name}: {Object.keys(data).length}\n      </DataHead>\n      <SocialDataList>\n        {Object.entries(data).map(([key, value], idx) => {\n          return (\n            <SocialDataListItem>{renderer(key, value, idx)}</SocialDataListItem>\n          );\n        })}\n      </SocialDataList>\n    </MySocialData>\n  );\n}\n\nreturn (\n  <>\n    <MyPageWrapper>\n      <MyProfile />\n      <MySocialDataWrapper>\n        <PostData />\n        <WidgetData />\n      </MySocialDataWrapper>\n    </MyPageWrapper>\n    <div>\n      {/*{JSON.stringify(profileData)} */}\n      <br />\n      {/*{JSON.stringify(componentData)}*/}\n      <br />\n      <br />\n      {/*{JSON.stringify(postData)} */}\n      {/*{JSON.stringify(idxData)} */}\n      {/*{JSON.stringify(postList)} */}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/party-dhsimpson.near/widget/donnie.bos.my-social", "fact_widget_deployments_id": "35c983d059f29592d33cf796c7d28d06", "inserted_timestamp": "2023-09-15T21:37:22.872Z", "modified_timestamp": "2023-09-15T21:37:22.872Z", "__row_index": 10}