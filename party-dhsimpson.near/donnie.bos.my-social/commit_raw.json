{"tx_hash": "J43hA19oRpKKh9xvoRJuMfHQXoctH53gjL2pDGCUSnJ8", "action_id_social": "Hhad729QNLttFLJXbLvrNQgW9qFFwT1qPHvMs7wSXrmo-0-widget", "block_id": 101199089, "block_timestamp": "2023-09-15T18:50:25.207Z", "signer_id": "party-dhsimpson.near", "widget_name": "donnie.bos.my-social", "source_code": "const account_id = context.accountId ?? props.accountId;\n\nconst profileData = props.profile ?? Social.getr(`idknwhoru.near/profile`);//`idknwhoru.near/profile`\n\nif (profileData === null) {\n  return \"Loading\";\n}\n\nconst MyPageWrapper = styled.div`\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n`;\nconst nearIpfsBaseUrl = \"https://ipfs.near.social/ipfs/\";\n\nfunction MyProfile() {\n    const ProfileWrapper = styled.div`\n        width: 100%;\n        height: 300px;\n        background-color: rgba(0,0,0,0.2);\n        display: flex;\n        align-items: center;\n        border-radius: 25px;\n        margin-bottom: 30px;\n    `;\n\n    const ProfileImage = styled.img`\n        width: 150px;\n        height: 150px;\n        margin: 0 20px;\n        border-radius: 100%;\n    `;\n\n    const MyName = styled.h2`\n    `;\n\n    const MyWallet = styled.p`\n    `;\n\n    return (\n        <ProfileWrapper>\n            <ProfileImage src={`${nearIpfsBaseUrl}${profileData.image.ipfs_cid}`} alt=\"profile-image\"/>\n            <div>\n                <MyName>\n                    {profileData.name}\n                </MyName>\n                <MyWallet>\n                    {account_id}\n                </MyWallet>\n            </div>\n        </ProfileWrapper>\n    )\n}\n\nconst MySocialDataWrapper = styled.div`\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n`;\n\nfunction PostData() {\n    const postIdxData = Social.index(\"post\", \"main\", {limit: 30, order: \"desc\", accountId: [account_id]});\n\n    const postBlockHashList = postIdxData.map(idxData => {\n        return idxData.blockHeight\n    });\n\n    const postList = postBlockHashList.map(blockHash => {\n        return Social.get(`${account_id}/post/main`, blockHash);\n    });\n\n    function RenderPostListItem(key, value) {\n        const {text, image} = JSON.parse(value);\n        return (\n            <>\n                <p>{text}</p>\n                {image && <img src={`${nearIpfsBaseUrl}${image.ipfs_cid}`} alt=\"profile-image\"/>}\n            </>\n        )\n    }\n\n    return <SocialData data={postList} renderer={RenderPostListItem} />\n}\n\nfunction WidgetData() {\n    const componentData = Social.getr(`${account_id}/widget`);\n\n    function RenderWidgetListItem(key, value) {\n        const widgetBaseUrl = `https://near.social/${account_id}/widget/`;\n\n        const Link = styled.a`\n            text-decoration: none;\n            color: black;\n\n            &:hover, &:focus {\n                text-decoration: none;\n                color: black;\n            }\n        `;\n        \n        return (\n            <Link href={`${widgetBaseUrl}${key}`} target='_blank'>\n                {key}\n            </Link>\n        )\n    }\n\n    return <SocialData data={componentData} renderer={RenderWidgetListItem} />\n}\n\nfunction SocialData({data, renderer}) {\n    const SocialDataListItem = styled.li`\n        list-style-type: none;\n    `;\n    const MySocialData = styled.div`\n        width: 45%;\n        min-height: 500px;\n    `;\n    return (\n        <MySocialData>\n            <h4>\n                Number of widgets: {Object.keys(data).length}\n            </h4>\n            <ul>\n                {Object.entries(data).map(([key, value])=>{\n                    return (\n                        <SocialDataListItem>\n                            {renderer(key, value)}\n                        </SocialDataListItem>\n                    )\n                })}\n            </ul>\n        </MySocialData>\n    )\n}\n\nreturn (\n    <>\n    <MyPageWrapper>\n        <MyProfile/>\n        <MySocialDataWrapper>\n            <PostData/>\n            <WidgetData/>\n        </MySocialDataWrapper>\n    </MyPageWrapper>\n  <div>\n    {/*{JSON.stringify(profileData)} */}\n    <br />\n    {/*{JSON.stringify(componentData)}*/}\n    <br />\n    <br />\n    {/*{JSON.stringify(postData)} */}\n    {/*{JSON.stringify(idxData)} */}\n    {/*{JSON.stringify(postList)} */}\n  </div>\n  </>\n);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/party-dhsimpson.near/widget/donnie.bos.my-social", "fact_widget_deployments_id": "6d1f38b22d63680ad14ed36c9e8e5393", "inserted_timestamp": "2023-09-15T20:32:33.685Z", "modified_timestamp": "2023-09-15T20:32:33.685Z", "__row_index": 4}