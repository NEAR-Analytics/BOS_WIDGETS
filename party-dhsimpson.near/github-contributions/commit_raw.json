{"tx_hash": "Hwt237MzDrQ4pvNtnRxUsoEhdTFdYXHnNRKt7VS9U2MK", "action_id_social": "HZuB6AiHotJP1NxCUco2vdJaeMLhGSeNvQ36CfeHepWV-0-widget", "block_id": 101293557, "block_timestamp": "2023-09-17T01:22:44.498Z", "signer_id": "party-dhsimpson.near", "widget_name": "github-contributions", "source_code": "//PR\n//https://api.github.com/search/issues?q=type:pr author:dhsimpson -user:dhsimpson\n//\uacf5\ubc31\uc73c\ub85c \uad6c\ubd84\n\n//ISSUE\n//https://api.github.com/search/issues?q=is:issue author:dhsimpson -user:dhsimpson ///state:open///\n\n//Sort \"sort=\" \ud544\uc218\n// &sort=created&order=desc&per_page=30&page=1\n\nif (!props.token) {\n  return <p>your token is required.</p>;\n}\nif (!props.githubNickname) {\n  return <p>github nickname is required.</p>;\n}\n\nconst searchBaseUrl = \"https://api.github.com/search/issues?q=\";\nconst nickName = \"dhsimpson\";\nconst defulatFilterList = [\n  `-user:${props.githubNickname}`,\n  `author:${props.githubNickname}`,\n];\nconst pullRequestDefaultFilterList = [\"type:pr\"];\nconst issueDefaultFilterList = [\"is:issue\"];\nconst filterOptionList = [\"state:open\", \"state:closed\"];\n\nconst config = {\n  headers: {\n    Authorization: `Bearer ${props.token}`,\n  },\n};\n\nconst mergeFilters = (filterLists) => {\n  return [].concat(...filterLists).join(\"%20\");\n};\n\nconst MyContributionWrapper = styled.div`\n    background-color: black;\n    border-radius: 25px;\n    color: white;\n`;\n\nconst MyContributionList = styled.ul`\n    width: 100%;\n    list-style-type: none;\n    padding: 20px;\n    margin: 0;\n    background-color: rgb(12,17,23);\n    color: white;\n    border-radius: 25px;\n`;\n\nconst MyContribution = styled.li`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 70px;\n    border-bottom: 1px solid rgba(125, 125, 225, 0.3);\n`;\n\nconst ContributionInfo = styled.div`\n    display: flex;\n    align-items: center;\n    width: 100%;\n`;\nconst ContributionTitle = styled.span`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    font-size: 20px;\n`;\nconst ContributionTimeStamp = styled.p`\n    margin: 0;\n    font-size: 12px;\n    color: #BBB;\n`;\n\nconst ContributionBasicInfo = styled.div`\n    max-width: 70%;\n    display: flex;\n    flex-direction: column;\n`;\n\nconst Label = styled.div`\n    background-color: ${(props) => props.color};\n    width: 100px;\n    height: 30px;\n    border-radius: 25px;\n    text-align: center;\n    font-size: 20px;\n    font-weight: 600;\n    margin-left: 15px;\n`;\n\nconst StatusColors = {\n  open: \"rgba(10, 155, 10, 0.8)\", // \ucd08\ub85d\uc0c9\n  closed: \"rgba(255, 0, 0, 0.7)\", // \ube68\uac04\uc0c9\n};\n\nconst [contributionData, setContributionData] = useState([]);\n\nconst togglePR = () => {\n  asyncFetch(\n    `${searchBaseUrl}${mergeFilters([\n      defulatFilterList,\n      pullRequestDefaultFilterList,\n    ])}`,\n    config\n  ).then((res) => {\n    setContributionData(res.body?.items ?? []);\n  });\n};\n\nconst toggleIssue = () => {\n  asyncFetch(\n    `${searchBaseUrl}${mergeFilters([\n      defulatFilterList,\n      issueDefaultFilterList,\n    ])}`,\n    config\n  ).then((res) => {\n    setContributionData(res.body?.items ?? []);\n  });\n};\nuseEffect(() => {\n  togglePR();\n}, []);\n\nconst [isChecked, setIsChecked] = useState(true);\n\nconst Toggle = ({\n  callbackOn,\n  callbackOff,\n  textOn,\n  textOff,\n  isChecked,\n  setIsChecked,\n}) => {\n  const ToggleBoxWrapper = styled.label`\n`;\n\n  const ToggleBox = styled.input`\n  opacity: 0;\n  width: 0;\n  height: 0;\n`;\n\n  const handleToggle = () => {\n    // \uc5ec\uae30\uc5d0 \ud1a0\uae00 \uc0c1\ud0dc\uc5d0 \ub530\ub978 \ub85c\uc9c1\uc744 \uc2e4\ud589\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n    if (isChecked) {\n      callbackOn();\n    } else {\n      callbackOff();\n    }\n    setIsChecked(!isChecked);\n  };\n  return (\n    <ToggleBoxWrapper>\n      <ToggleBox\n        type=\"checkbox\"\n        checked={isChecked}\n        onChange={handleToggle}\n        value=\"\uccb4\ud06c \ubc15\uc2a4\"\n      />\n      {isChecked ? textOn : textOff}\n    </ToggleBoxWrapper>\n  );\n};\nreturn (\n  <MyContributionWrapper>\n    <div>\n      <p>\ud504\ub85c\ud544 \uc601\uc5ed (\uc544\ubc14\ud0c0) | \ud504\ub85c\ud544 \uc601\uc5ed (\uae43\ud5d9\ub2c9\ub124\uc784)</p>\n      <Toggle\n        callbackOn={togglePR}\n        callbackOff={toggleIssue}\n        textOn=\"Pull Request\"\n        textOff=\"Issue\"\n        isChecked={isChecked}\n        setIsChecked={setIsChecked}\n      />\n    </div>\n    <MyContributionList>\n      {contributionData.map((issue) => {\n        return (\n          <MyContribution>\n            <ContributionInfo>\n              <ContributionBasicInfo>\n                <ContributionTitle>{issue.title}</ContributionTitle>\n                <ContributionTimeStamp>\n                  opened :\n                  <Widget\n                    src=\"party-dhsimpson.near/widget/past-time-from\"\n                    props={{ date: issue.created_at }}\n                  />\n                  {issue.state === \"closed\" && (\n                    <>\n                      closed :\n                      <Widget\n                        src=\"party-dhsimpson.near/widget/past-time-from\"\n                        props={{ date: issue.closed_at }}\n                      />\n                    </>\n                  )}\n                </ContributionTimeStamp>\n              </ContributionBasicInfo>\n              <Label color={StatusColors[issue.state]}>{issue.state}</Label>\n            </ContributionInfo>\n            <a href={issue.html_url}>\n              <Widget\n                src=\"party-dhsimpson.near/widget/gotoSvg\"\n                props={{ width: 20, heigh: 20, color: \"gray\" }}\n              />\n            </a>\n          </MyContribution>\n        );\n      })}\n    </MyContributionList>\n  </MyContributionWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/party-dhsimpson.near/widget/github-contributions", "fact_widget_deployments_id": "e5d284186857c225ca0d170177f3e1da", "inserted_timestamp": "2023-09-17T03:04:13.104Z", "modified_timestamp": "2023-09-17T03:04:13.104Z", "__row_index": 26}