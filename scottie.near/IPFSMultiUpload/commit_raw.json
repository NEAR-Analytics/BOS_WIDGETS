{"tx_hash": "Pv9LBKWYaA9fpKfYA16Aat2m5sEXmpri37mSWZuszEn", "action_id_social": "FeKiq8eGZJNvbYr6Y2w3xQriLk1y8ajQdjWFuhzgHUyt-0-widget", "block_id": 99503242, "block_timestamp": "2023-08-23T22:09:19.606Z", "signer_id": "scottie.near", "widget_name": "IPFSMultiUpload", "source_code": "if (!props.update) return \"Update function is required\";\n\nState.init({\n  uploading: false,\n  files: [],\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nconst filesOnChange = (files) => {\n  State.update({\n    uploading: true,\n    files: [],\n  });\n  if (files?.length > 0) {\n    files.map((file, index) => {\n      const body = file;\n      asyncFetch(\"https://ipfs.near.social/add\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n        },\n        body,\n      }).then((res) => {\n        const cid = res.body.cid;\n        props.update({ index: index, cid: cid });\n      });\n    });\n    State.update({ uploading: false });\n    props.viewing(false);\n  } else {\n    State.update({\n      uploading: false,\n      files: null,\n    });\n  }\n};\n\nreturn (\n  <div className=\"d-inline-block\">\n    {state.files}\n    <Files\n      multiple={true}\n      accepts={[\"image/*\"]}\n      minFileSize={1}\n      clickable\n      onChange={filesOnChange}\n      className=\"btn btn-outline-dark\"\n      style={{ borderRadius: \"20px\", width: \"155px\" }}\n    >\n      {state.uploading ? Uploading : \"Upload Slide(s)\"}\n    </Files>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/scottie.near/widget/IPFSMultiUpload", "fact_widget_deployments_id": "c8ce89d61ef8202d682c56c4df09be60", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}