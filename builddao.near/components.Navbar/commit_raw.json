{"tx_hash": "Z32Sv46hT4VsudVzovYVy29ZzQMXnXJWCQN3D4Y5TbU", "action_id_social": "2k1jzsAuWKUMmypyvQREhYZ8tbSdEYgdNg5z2zgd3HhJ-0-widget", "block_id": 121158209, "block_timestamp": "2024-06-14T16:44:44.261Z", "signer_id": "builddao.near", "widget_name": "components.Navbar", "source_code": "const { Button } = VM.require(\"buildhub.near/widget/components\") || {\n  Button: () => <></>,\n};\nconst { href } = VM.require(\"buildhub.near/widget/lib.url\") || {\n  href: () => {},\n};\nconst NavContainer = styled.div`\n  display: flex;\n  padding: 24px 48px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 10px;\n  align-self: stretch;\n  font-family: \"Poppins\", sans-serif;\n  background-color: var(--bg, #000);\n  border-bottom: 1px solid var(--stroke-color, rgba(255, 255, 255, 0.2));\n  @media screen and (max-width: 768px) {\n    border: none;\n  }\n  .grey-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #23242b;\n    color: #9ba1a6;\n    border-radius: 8px;\n    outline: none;\n    border: 0px;\n    width: 90px;\n    height: 40px;\n    text-decoration: none;\n  }\n`;\nconst MainContent = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  gap: 50px;\n  @media screen and (max-width: 960px) {\n    gap: 16px;\n  }\n`;\nconst Left = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 50px;\n  @media screen and (max-width: 960px) {\n    gap: 16px;\n  }\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\nconst Right = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\nconst MobileView = styled.div`\n  display: none;\n  @media screen and (max-width: 768px) {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-direction: column;\n    position: fixed;\n    background: var(--bg, #000);\n    z-index: 1001;\n    padding: 24px 48px;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n  }\n`;\nconst MobileNavigation = styled.div`\n  display: none;\n  @media screen and (max-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n  }\n`;\nconst NavLinks = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 36px;\n  span {\n    color: var(--text-white, #fff);\n  }\n  .active {\n    color: var(--eca-227, #eca227);\n    font-weight: 700;\n  }\n  @media screen and (max-width: 960px) {\n    gap: 16px;\n  }\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    margin-top: 38px;\n    span {\n      font-size: 20px;\n    }\n  }\n`;\nconst StyledDropdown = styled.div`\n  .dropdown-toggle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #23242b;\n    color: #fff;\n    border-radius: 8px;\n    outline: none;\n    border: 0;\n    width: 40px;\n    height: 40px;\n    &:after {\n      display: none;\n    }\n    .menu {\n      width: 18px;\n      height: 24px;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-evenly;\n      div {\n        background-color: var(--slate-dark-11);\n        height: 2px;\n        width: 100%;\n        border-radius: 30px;\n      }\n    }\n    :hover {\n      .menu {\n        div {\n          background-color: white;\n        }\n      }\n    }\n  }\n  ul {\n    background-color: #23242b;\n    width: 100%;\n    li {\n      padding: 0 6px;\n    }\n    button,\n    a {\n      color: var(--slate-dark-11);\n      display: flex;\n      align-items: center;\n      border-radius: 8px;\n      padding: 12px;\n      :hover,\n      :focus {\n        text-decoration: none;\n        background-color: var(--slate-dark-1);\n        color: white;\n        svg {\n          path {\n            stroke: white;\n          }\n        }\n      }\n      svg {\n        margin-right: 7px;\n        path {\n          stroke: var(--slate-dark-9);\n        }\n      }\n    }\n  }\n`;\nconst MobileContent = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst getNotificationCount = () => {\n  const lastBlockHeight = Storage.get(\"lastBlockHeight\");\n  if (lastBlockHeight === null) {\n    return \"\";\n  }\n  const notifications = Social.index(\"notify\", context.accountId, {\n    order: \"asc\",\n    from: (lastBlockHeight ?? 0) + 1,\n    subscribe: true,\n  });\n  return notifications.length;\n};\nconst unreadNotifications = getNotificationCount();\nfunction Navbar(props) {\n  const { page, routes } = props;\n  page = page ?? \"home\";\n  const [dropdown, setDropdown] = useState(false);\n  const toggleDropdown = () => {\n    setDropdown((prev) => !prev);\n  };\n  const TestBtn = () => {\n    const { networkId } = context;\n    const isTestnet = networkId === \"testnet\";\n    const config = {\n      mainnet: {\n        href: isTestnet ? \"https://www.nearbuilders.org/\" : \"#\",\n        label: \"Mainnet\",\n        icon: \"bi bi-wifi\",\n        disabled: !isTestnet,\n      },\n      testnet: {\n        href: isTestnet ? \"#\" : \"https://test.nearbuilders.org/\",\n        label: \"Testnet\",\n        icon: \"bi bi-cloud\",\n        disabled: isTestnet,\n      },\n    };\n    return (\n      <StyledDropdown className=\"dropdown\">\n        <div className=\"d-flex justify-content-end align-items-center gap-3\">\n          <button\n            className=\"grey-btn\"\n            type=\"button\"\n            id=\"networksDropdown\"\n            data-bs-toggle=\"dropdown\"\n            aria-expanded=\"false\"\n          >\n            Network\n          </button>\n          <ul\n            className=\"dropdown-menu\"\n            aria-labelledby=\"networksDropdown\"\n            style={{ minWidth: \"fit-content\" }}\n          >\n            {Object.entries(config).map(([key, value]) => (\n              <li key={key}>\n                <a\n                  style={{\n                    textDecoration: \"none\",\n                    color: value.disabled ? \"green\" : \"#9ba1a6\",\n                  }}\n                  href={value.href}\n                  className=\"dropdown-item d-flex align-items-center gap-2\"\n                >\n                  <i\n                    className={value.icon}\n                    style={{ color: value.disabled ? \"green\" : \"#9ba1a6\" }}\n                  />\n                  <span>{value.label}</span>\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </StyledDropdown>\n    );\n  };\n  return (\n    <NavContainer>\n      <MainContent className=\"container-xl\">\n        <Left>\n          <Link\n            to={href({\n              widgetSrc: \"builddao.near/widget/Index\",\n              params: {\n                page: \"home\",\n              },\n            })}\n            className=\"d-flex align-items-center\"\n          >\n            <img\n              className=\"object-fit-cover\"\n              style={{ height: 46 }}\n              src=\"https://ipfs.near.social/ipfs/bafkreiavh7rnvf4zzb5rjohul7xwrlgz4y6ysdtmdsvpjeqpjtmuvgal7a\"\n            />\n          </Link>\n          <NavLinks>\n            {routes &&\n              (Object.keys(routes) || []).map((k) => {\n                const route = routes[k];\n                if (route.hide) {\n                  return null;\n                }\n                return (\n                  <Link\n                    key={`desktop=${k}`}\n                    style={{ textDecoration: \"none\" }}\n                    to={href({\n                      widgetSrc: \"builddao.near/widget/Index\",\n                      params: {\n                        page: k,\n                      },\n                    })}\n                  >\n                    <span key={k} className={page === k ? \"active\" : null}>\n                      {route.init.icon && <i className={route.init.icon}></i>}\n                      {route.init.name}\n                    </span>\n                  </Link>\n                );\n              })}\n          </NavLinks>\n        </Left>\n        <Right>\n          {context.accountId && (\n            <Button\n              className=\"rounded-3 position-relative\"\n              type=\"icon\"\n              href={href({\n                widgetSrc: \"builddao.near/widget/Index\",\n                params: {\n                  page: \"notifications\",\n                },\n              })}\n            >\n              <i className=\"bi bi-bell\"></i>\n              {unreadNotifications > 0 && (\n                <div\n                  className=\"position-absolute d-flex align-items-center justify-content-center text-white fw-bold\"\n                  style={{\n                    top: 0,\n                    background: \"red\",\n                    borderRadius: \"100%\",\n                    right: 0,\n                    width: 18,\n                    height: 18,\n                    fontSize: 10,\n                    margin: -4,\n                  }}\n                >\n                  {unreadNotifications}\n                </div>\n              )}\n            </Button>\n          )}\n          <div\n            style={{\n              flex: 1,\n              display: \"flex\",\n              justifyContent: \"flex-end\",\n              alignItems: \"center\",\n              gap: \"0.5rem\",\n            }}\n          >\n            <StyledDropdown className=\"dropdown \">\n              <div className=\"d-flex justify-content-end align-items-center gap-3\">\n                <button\n                  className=\"dropdown-toggle\"\n                  type=\"button\"\n                  id=\"dropdownMenu2222\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  <i\n                    style={{ color: \"white\" }}\n                    className=\"bi bi-three-dots\"\n                  ></i>\n                </button>\n                <ul\n                  className=\"dropdown-menu\"\n                  aria-labelledby=\"dropdownMenu2222\"\n                >\n                  <li>\n                    <Link\n                      style={{ textDecoration: \"none\" }}\n                      href={href({\n                        widgetSrc: \"builddao.near/widget/Index\",\n                        params: {\n                          page: \"inspect\",\n                          widgetPath: routes[page].path,\n                        },\n                      })}\n                      type=\"icon\"\n                      variant=\"outline\"\n                      className=\"d-flex align-tiems-center gap-2\"\n                    >\n                      <i className=\"bi bi-code\"></i>\n                      <span>View source</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <Link\n                      style={{ textDecoration: \"none\" }}\n                      href={`/edit/${routes[page].path}`}\n                      type=\"icon\"\n                      variant=\"outline\"\n                      className=\"d-flex align-items-center gap-2\"\n                    >\n                      <i className=\"bi bi-pencil\"></i>\n                      <span>Edit code</span>\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n            </StyledDropdown>\n            {context.accountId ? (\n              <Widget\n                src=\"buildhub.near/widget/components.buttons.UserDropdown\"\n                loading=\"\"\n                props={props}\n              />\n            ) : (\n              <Button\n                variant=\"primary\"\n                linkClassName=\"d-flex\"\n                href=\"https://nearbuilders.org/join\"\n                noLink={true}\n                className=\"w-100\"\n              >\n                Sign In\n              </Button>\n            )}\n            <TestBtn />\n          </div>\n        </Right>\n        <MobileNavigation>\n          <Link\n            to={href({\n              widgetSrc: \"builddao.near/widget/Index\",\n              params: {\n                page: \"home\",\n              },\n            })}\n          >\n            <img\n              className=\"object-fit-cover\"\n              onClick={() => setDropdown(false)}\n              src=\"https://ipfs.near.social/ipfs/bafkreiavh7rnvf4zzb5rjohul7xwrlgz4y6ysdtmdsvpjeqpjtmuvgal7a\"\n              style={{ height: 40 }}\n              alt=\"BuildDAO\"\n            />\n          </Link>\n          <div className=\"d-flex align-items-center gap-2\">\n            {context.accountId && (\n              <Button\n                className=\"rounded-3 position-relative\"\n                type=\"icon\"\n                href={href({\n                  widgetSrc: \"builddao.near/widget/Index\",\n                  params: {\n                    page: \"notifications\",\n                  },\n                })}\n              >\n                <i className=\"bi bi-bell\"></i>\n                {unreadNotifications > 0 && (\n                  <div\n                    className=\"position-absolute d-flex align-items-center justify-content-center text-white fw-bold\"\n                    style={{\n                      top: 0,\n                      background: \"red\",\n                      borderRadius: \"100%\",\n                      right: 0,\n                      width: 18,\n                      height: 18,\n                      fontSize: 10,\n                      margin: -4,\n                    }}\n                  >\n                    {unreadNotifications}\n                  </div>\n                )}\n              </Button>\n            )}\n            <Button\n              type=\"icon\"\n              className=\"rounded-2 border-0\"\n              onClick={toggleDropdown}\n            >\n              <i style={{ fontSize: 24 }} className=\"bi bi-list\"></i>\n            </Button>\n          </div>\n        </MobileNavigation>\n      </MainContent>\n      {dropdown && (\n        <MobileView>\n          <MobileNavigation>\n            <Link\n              to={href({\n                widgetSrc: \"builddao.near/widget/Index\",\n                params: {\n                  page: \"home\",\n                },\n              })}\n            >\n              <img\n                onClick={() => setDropdown(false)}\n                src=\"https://ipfs.near.social/ipfs/bafkreiavh7rnvf4zzb5rjohul7xwrlgz4y6ysdtmdsvpjeqpjtmuvgal7a\"\n                style={{ height: 40 }}\n                alt=\"BuildDAO\"\n              />\n            </Link>\n            <Button\n              type=\"icon\"\n              variant=\"outline\"\n              className=\"rounded-2 border-0\"\n              onClick={toggleDropdown}\n            >\n              <i style={{ fontSize: 24 }} className=\"bi bi-list\"></i>\n            </Button>\n          </MobileNavigation>\n          <MobileContent>\n            <NavLinks>\n              {routes &&\n                (Object.keys(routes) || []).map((k) => {\n                  const route = routes[k];\n                  if (route.hide) {\n                    return null;\n                  }\n                  return (\n                    <Link\n                      key={`mobile=${k}`}\n                      style={{ textDecoration: \"none\" }}\n                      to={href({\n                        widgetSrc: \"builddao.near/widget/Index\",\n                        params: {\n                          page: k,\n                        },\n                      })}\n                    >\n                      <span\n                        onClick={toggleDropdown}\n                        key={k}\n                        className={page === k ? \"active\" : null}\n                      >\n                        {route.init.icon && <i className={route.init.icon}></i>}\n                        {route.init.name}\n                      </span>\n                    </Link>\n                  );\n                })}\n            </NavLinks>\n            <div className=\"d-flex flex-column gap-2 w-100\">\n              <div className=\"d-flex gap-2\">\n                <Button\n                  linkClassName=\"d-flex w-100\"\n                  className=\"w-100\"\n                  href={href({\n                    widgetSrc: \"builddao.near/widget/Index\",\n                    params: {\n                      page: \"inspect\",\n                      widgetPath: routes[page].path,\n                    },\n                  })}\n                >\n                  <span>View source</span>\n                </Button>\n                <Button\n                  linkClassName=\"d-flex w-100\"\n                  className=\"w-100\"\n                  href={`/edit/${routes[page].path}`}\n                >\n                  Edit Code\n                </Button>\n              </div>\n              <div className=\"d-flex gap-2\">\n                {context.accountId ? (\n                  <div className=\"mx-auto d-flex align-items-stretch \">\n                    <Widget\n                      src=\"buildhub.near/widget/components.buttons.UserDropdown\"\n                      loading=\"\"\n                      props={props}\n                    />\n                  </div>\n                ) : (\n                  <>\n                    <Button\n                      variant=\"primary\"\n                      linkClassName=\"d-flex\"\n                      href=\"https://nearbuilders.org/join\"\n                      noLink={true}\n                      className=\"w-100\"\n                      onClick={() => setDropdown(false)}\n                    >\n                      Sign In\n                    </Button>\n                  </>\n                )}\n                <TestBtn />\n              </div>\n            </div>\n          </MobileContent>\n        </MobileView>\n      )}\n    </NavContainer>\n  );\n}\nreturn <Navbar {...props} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/builddao.near/widget/components.Navbar", "fact_widget_deployments_id": "727a42c17c50aab88b0dce6e6eb5088d", "inserted_timestamp": "2024-06-14T17:55:46.860Z", "modified_timestamp": "2024-06-14T17:55:46.860Z", "__row_index": 0}