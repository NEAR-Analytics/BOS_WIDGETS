{"tx_hash": "Z32Sv46hT4VsudVzovYVy29ZzQMXnXJWCQN3D4Y5TbU", "action_id_social": "2k1jzsAuWKUMmypyvQREhYZ8tbSdEYgdNg5z2zgd3HhJ-0-widget", "block_id": 121158209, "block_timestamp": "2024-06-14T16:44:44.261Z", "signer_id": "builddao.near", "widget_name": "page.proposals.Filters", "source_code": "const { daos } = VM.require(\"builddao.near/widget/lib.daos\") || {\n  daos: [],\n};\nif (!daos) {\n  return \"\";\n}\nconst options = daos.map((dao) => dao.contract_id);\nconst { Modal, Button } = VM.require(\"buildhub.near/widget/components\") || {\n  Modal: () => <></>,\n  Button: () => <></>,\n};\nconst showModal = props.showModal;\nconst toggleModal = props.toggleModal;\nconst toggle = props.toggle;\nconst bootstrapTheme = props.bootstrapTheme || \"dark\";\nconst parentSelectedTypes = props.parentSelectedTypes ?? [];\nconst parentSelectedStatus = props.parentSelectedStatus ?? [];\nconst applyFilters = props.applyFilters ?? (() => {});\nif (!showModal) {\n  return \"\";\n}\nconst [selectedTypes, setSelectedTypes] = useState(parentSelectedTypes);\nconst [selectedStatus, setSelectedStatus] = useState(parentSelectedStatus);\nconst ThemeContainer =\n  props.ThemeContainer ||\n  styled.div`\n    --primary-color: rgb(255, 175, 81);\n    span.label {\n      color: var(--label-color, #fff);\n    }\n  `;\nconst Wrapper = styled.div`\n  .checked > span:first-child {\n    background: var(--primary-color) !important;\n    border-color: var(--primary-color) !important;\n  }\n  .cbx:hover span:first-child {\n    border-color: var(--primary-color) !important;\n  }\n  button[type=\"checkbox\"]:hover {\n    background: none !important;\n  }\n`;\nconst proposalTypeOptions = {\n  Operations: [\n    {\n      title: \"Transfer funds\",\n      value: \"Transfer\",\n    },\n    {\n      title: \"Voting proposal\",\n      value: \"Vote\",\n    },\n    {\n      title: \"Custom function\",\n      value: \"FunctionCall\",\n    },\n    {\n      title: \"Issue a new bounty\",\n      value: \"AddBounty\",\n    },\n    {\n      title: \"Request pay for bounty\",\n      value: \"BountyDone\",\n    },\n    {\n      title: \"Set staking contract\",\n      value: \"SetStakingContract\",\n    },\n    {\n      title: \"Text\",\n      value: \"Text\",\n    },\n  ],\n  Policy: [\n    {\n      title: \"Change Policy\",\n      value: \"ChangePolicy\",\n    },\n    {\n      title: \"Add or Update Role\",\n      value: \"ChangePolicyAddOrUpdateRole\",\n    },\n    {\n      title: \"Remove Role\",\n      value: \"ChangePolicyRemoveRole\",\n    },\n    {\n      title: \"ChangePolicyUpdateParameters\",\n      value: \"ChangePolicyUpdateParameters\",\n    },\n    {\n      title: \"ChangePolicyUpdateDefaultVotePolicy\",\n      value: \"ChangePolicyUpdateDefaultVotePolicy\",\n    },\n  ],\n  \"Membership & Config\": [\n    {\n      title: \"Add member to role\",\n      value: \"AddMemberToRole\",\n    },\n    {\n      title: \"Remove member from role\",\n      value: \"RemoveMemberFromRole\",\n    },\n    {\n      title: \"Change Config\",\n      value: \"ChangeConfig\",\n    },\n    {\n      title: \"Factory Info Update\",\n      value: \"FactoryInfoUpdate\",\n    },\n    {\n      title: \"Upgrade Remote\",\n      value: \"UpgradeRemote\",\n    },\n    {\n      title: \"Upgrade Self\",\n      value: \"UpgradeSelf\",\n    },\n  ],\n};\nconst proposalStatusOptions = [\n  {\n    title: \"Approved\",\n    value: \"Approved\",\n  },\n  {\n    title: \"Rejected\",\n    value: \"Rejected\",\n  },\n  {\n    title: \"In Progress\",\n    value: \"InProgress\",\n  },\n  {\n    title: \"Expired\",\n    value: \"Expired\",\n  },\n  {\n    title: \"Failed\",\n    value: \"Failed\",\n  },\n  {\n    title: \"Executed\",\n    value: \"Executed\",\n  },\n];\nreturn (\n  <ThemeContainer>\n    <Modal\n      open={showModal}\n      title={\"Filters\"}\n      onOpenChange={toggleModal}\n      toggle={toggle}\n    >\n      <Wrapper>\n        <h5 className=\"filter-title\">Type</h5>\n        <div className=\"d-flex flex-wrap gap-3\">\n          {Object.keys(proposalTypeOptions).map((key) => {\n            return (\n              <div className=\"d-flex flex-column gap-1\">\n                <b className=\"text-md mb-1\">{key}</b>\n                {proposalTypeOptions[key].map((item) => {\n                  return (\n                    <Widget\n                      loading=\"\"\n                      src=\"nearui.near/widget/Input.Checkbox\"\n                      props={{\n                        checked: selectedTypes.includes(item.value) || false,\n                        onChange: (checked) => {\n                          setSelectedTypes(\n                            checked\n                              ? [...selectedTypes, item.value]\n                              : selectedTypes.filter((x) => x !== item.value)\n                          );\n                        },\n                        label: item.title,\n                        id: item.value,\n                      }}\n                    />\n                  );\n                })}\n              </div>\n            );\n          })}\n        </div>\n        <h5 className=\"filter-title mt-4\">Status</h5>\n        <div className=\"d-flex flex-wrap\">\n          {proposalStatusOptions.map((item) => {\n            return (\n              <Widget\n                loading=\"\"\n                src=\"nearui.near/widget/Input.Checkbox\"\n                props={{\n                  checked: selectedStatus.includes(item.value) || false,\n                  onChange: (checked) => {\n                    setSelectedStatus(\n                      checked\n                        ? [...selectedStatus, item.value]\n                        : selectedStatus.filter((x) => x !== item.value)\n                    );\n                  },\n                  label: item.title,\n                }}\n              />\n            );\n          })}\n        </div>\n        <div className=\"d-flex justify-content-end mt-5 gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              setSelectedStatus([]);\n              setSelectedTypes([]);\n              applyFilters({ selectedStatus: [], selectedTypes: [] });\n              toggleModal();\n            }}\n          >\n            Clear\n          </Button>\n          <Button\n            variant=\"primary\"\n            onClick={() => {\n              applyFilters({ selectedStatus, selectedTypes });\n              toggleModal();\n            }}\n          >\n            Apply\n          </Button>\n        </div>\n      </Wrapper>\n    </Modal>\n  </ThemeContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/builddao.near/widget/page.proposals.Filters", "fact_widget_deployments_id": "75b146c14e41a3ef2291843bdb9e7728", "inserted_timestamp": "2024-06-14T17:55:46.860Z", "modified_timestamp": "2024-06-14T17:55:46.860Z", "__row_index": 0}