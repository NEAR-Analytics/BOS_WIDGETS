{"tx_hash": "7Y7zyMDjSX67qEpZypVJEQykLFi3YgyzKh9CweWiAk5K", "action_id_social": "748YHusYUGWR4WUgW78Ha5pNXS6ryPtAH8xEE5JbYEem-0-widget", "block_id": 121980118, "block_timestamp": "2024-06-25T17:49:48.231Z", "signer_id": "builddao.near", "widget_name": "page.project.TaskEditor", "source_code": "const { Modal, Button, ProgressState } = VM.require(\n  \"buildhub.near/widget/components\"\n) || {\n  Modal: () => <></>,\n  Button: () => <></>,\n  ProgressState: () => <></>,\n};\nconst listItem = { title: \"\", isCompleted: false };\nconst showAddTaskModal = props.showAddTaskModal;\nconst setShowAddTaskModal = props.setShowAddTaskModal;\nconst task = props.task;\nconst onEditTask = props.onEditTask;\nconst onAddTask = props.onAddTask;\nconst project = props.project;\nconst isEditTask = props.isEditTask;\nconst [taskDetail, setTaskDetail] = useState(task);\nconst updateTaskDetail = (data) => {\n  setTaskDetail((prevState) => ({\n    ...prevState,\n    ...data,\n  }));\n};\nconst updateTaskListItem = (index, updatedItem) => {\n  const updatedList = [...taskDetail.list];\n  updatedList[index] = updatedItem;\n  updateTaskDetail({ list: updatedList });\n};\nconst deleteTaskListItem = (index) => {\n  const updatedList = [\n    ...taskDetail.list.slice(0, index),\n    ...taskDetail.list.slice(index + 1),\n  ];\n  updateTaskDetail({ list: updatedList });\n};\nreturn (\n  <div className=\"d-flex flex-column gap-4\">\n    <div>\n      <label class=\"mb-1\">Title</label>\n      <input\n        placeholder=\"Enter task title\"\n        type=\"text\"\n        value={taskDetail?.title ?? \"\"}\n        onChange={(e) => updateTaskDetail({ title: e.target.value })}\n      />\n    </div>\n    <div>\n      <label class=\"mb-1\">Description</label>\n      <input\n        placeholder=\"Enter description\"\n        type=\"text\"\n        value={taskDetail?.description ?? \"\"}\n        onChange={(e) => updateTaskDetail({ description: e.target.value })}\n      />\n    </div>\n    <div className=\"form-group\">\n      <label class=\"mb-1\">Priority</label>\n      <select\n        name=\"proposal-type\"\n        id=\"proposal-type\"\n        data-bs-theme={\"dark\"}\n        class=\"form-select\"\n        onChange={(e) => updateTaskDetail({ priority: e.target.value })}\n        value={taskDetail.priority}\n      >\n        <option selected value=\"\">\n          Select\n        </option>\n        <option value=\"P0\">P0</option>\n        <option value=\"P1\">P1</option>\n        <option value=\"P2\">P2</option>\n        <option value=\"P3\">P3</option>\n      </select>\n    </div>\n    <div className=\"form-group\">\n      <label class=\"mb-1\">Assignee/s</label>\n      <Typeahead\n        multiple\n        options={project.contributors}\n        allowNew\n        placeholder=\"Add task assignee\"\n        selected={taskDetail?.assignees ?? []}\n        onChange={(e) => {\n          const data = e.map((i) => (i.label ? i.label : i));\n          updateTaskDetail({ assignees: data });\n        }}\n      />\n    </div>\n    <div className=\"form-group\">\n      <label class=\"mb-1\">Labels</label>\n      <Typeahead\n        multiple\n        options={project.tags}\n        allowNew\n        placeholder=\"Add labels\"\n        selected={taskDetail?.tags ?? []}\n        onChange={(e) => {\n          const data = e.map((i) => (i.label ? i.label : i));\n          updateTaskDetail({ tags: data });\n        }}\n      />\n    </div>\n    <div className=\"d-flex gap-2\">\n      <div className=\"form-group flex-1\">\n        <label>Start Date</label>\n        <input\n          placeholder=\"Enter start date\"\n          min={today}\n          type=\"date\"\n          value={taskDetail?.startDate ?? \"\"}\n          onChange={(e) => updateTaskDetail({ startDate: e.target.value })}\n        />\n      </div>\n      <div className=\"form-group flex-1\">\n        <label>End Date</label>\n        <input\n          placeholder=\"Enter end date\"\n          type=\"date\"\n          min={today}\n          value={taskDetail?.endDate ?? \"\"}\n          onChange={(e) => updateTaskDetail({ endDate: e.target.value })}\n        />\n      </div>\n    </div>\n    <div>\n      <div className=\"d-flex justify-content-between mb-1 align-items-center\">\n        <label>Task List</label>\n        <div\n          onClick={() =>\n            updateTaskDetail({\n              list: [...(taskDetail.list ?? []), { ...listItem }],\n            })\n          }\n          data-testid=\"add-task-item\"\n        >\n          <i class=\"bi bi-plus-circle h5 pointer\"></i>\n        </div>\n      </div>\n      <div className=\"d-flex flex-column gap-2\">\n        {Array.isArray(taskDetail.list) &&\n          taskDetail.list?.map((item, index) => (\n            <div>\n              <div className=\"d-flex gap-2 justify-content-between align-items-center\">\n                <input\n                  type=\"checkbox\"\n                  className=\"form-check-input\"\n                  disabled={!taskDetail.isAllowedToEdit}\n                  checked={item.isCompleted}\n                  onChange={(e) =>\n                    updateTaskListItem(index, {\n                      title: item.title,\n                      isCompleted: e.target.checked,\n                    })\n                  }\n                />\n                <input\n                  type=\"text\"\n                  value={item.title}\n                  placeholder=\"Task Detail\"\n                  onChange={(e) =>\n                    updateTaskListItem(index, {\n                      title: e.target.value,\n                      isCompleted: false,\n                    })\n                  }\n                />\n                <div onClick={() => deleteTaskListItem(index)}>\n                  <i class=\"bi bi-trash3 h6 red pointer\"></i>\n                </div>\n              </div>\n            </div>\n          ))}\n      </div>\n    </div>\n    <div className=\"d-flex justify-content-end gap-3 align-items-center mt-3\">\n      {!isEditTask && (\n        <Button variant=\"outline\" onClick={() => setTaskDetail(null)}>\n          Clear Inputs\n        </Button>\n      )}\n      <Button\n        variant=\"primary\"\n        onClick={() =>\n          isEditTask ? onEditTask(taskDetail) : onAddTask(taskDetail)\n        }\n      >\n        {isEditTask ? \"Save\" : \"Add Task\"}\n      </Button>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/builddao.near/widget/page.project.TaskEditor", "fact_widget_deployments_id": "85ea284e6ddb414582531edb949fbaf2", "inserted_timestamp": "2024-06-25T18:55:22.973Z", "modified_timestamp": "2024-06-25T18:55:22.973Z", "__row_index": 1}