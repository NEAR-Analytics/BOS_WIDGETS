{"tx_hash": "884zNfXRZdcbwcm2fJ9QjMAXfM2PqeSNmvpDfoumrcXR", "action_id_social": "GBRokhd313Us7gZ6w2wRDwnPtVCrv4GtQYYjAQSArJWs-0-widget", "block_id": 102846595, "block_timestamp": "2023-10-07T19:03:37.048Z", "signer_id": "fran-cali.near", "widget_name": "FImage", "source_code": "// Forked from: rubycoptest.testnet/widget/Image\n\nconst accountId = props.accountId;\nconst className = props.className;\nconst style = props.style;\nconst alt = props.alt;\nconst fallbackUrl = props.fallbackUrl;\nconst thumbnail = props.thumbnail;\nconst componentOwnerId = props.componentOwnerId;\n\nconst [imageUrl, setImageUrl] = useState(\n  \"https://ipfs.near.social/ipfs/bafkreidoxgv2w7kmzurdnmflegkthgzaclgwpiccgztpkfdkfzb4265zuu\"\n);\n\nfunction toUrl(image) {\n  return (\n    (image.ipfs_cid\n      ? `https://ipfs.near.social/ipfs/${image.ipfs_cid}`\n      : image.url) || fallbackUrl\n  );\n}\n\nconst thumb = (imageUrl) =>\n  thumbnail && imageUrl && !imageUrl.startsWith(\"data:image/\")\n    ? `https://i.near.social/${thumbnail}/${imageUrl}`\n    : imageUrl;\n\nuseEffect(() => {\n  const profile = Social.getr(`${accountId}/profile`);\n  const image = profile.image;\n  if (image) {\n    const imageUrl = thumb(toUrl(image));\n    setImageUrl(imageUrl);\n  } else {\n    setImageUrl(fallbackUrl);\n  }\n}, [accountId, fallbackUrl, thumbnail]);\n\nreturn image.nft.contractId && image.nft.tokenId ? (\n  <Widget\n    src={`${componentOwnerId}/widget/Calimero.Curb.ProfileIcon.FnFTImage`}\n    props={{\n      className,\n      style,\n      alt,\n      nft: image.nft,\n      thumbnail,\n      fallbackUrl,\n    }}\n  />\n) : (\n  <img className={className} style={style} src={imageUrl} alt={alt} />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/fran-cali.near/widget/FImage", "fact_widget_deployments_id": "1ca8145cb531716b8e242bd021ca0d2c", "inserted_timestamp": "2023-10-07T20:50:01.070Z", "modified_timestamp": "2023-10-07T20:50:01.070Z", "__row_index": 0}