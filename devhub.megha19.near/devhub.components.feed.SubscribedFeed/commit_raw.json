{"tx_hash": "6AdbXK4h6L3V5VhhXYjGRV3yD63G4QDoquB58T5LyhdF", "action_id_social": "5uG7ZQZWbEkX8CnN24c9VVMqpk77p9FkiyxhB4H3yFui-0-widget", "block_id": 119431619, "block_timestamp": "2024-05-21T17:27:47.838Z", "signer_id": "devhub.megha19.near", "widget_name": "devhub.components.feed.SubscribedFeed", "source_code": "const indexKey = props.indexKey ?? \"main\";\nconst groupId = props.groupId;\nconst permissions = props.permissions;\n\nconst index = [\n  {\n    action: \"post\",\n    key: indexKey,\n    options: {\n      limit: 10,\n      order: props.sort ? props.sort : \"desc\",\n      subscribe: true,\n      accountId: props.accounts,\n    },\n    cacheOptions: {\n      ignoreCache: true,\n    },\n  },\n  {\n    action: \"repost\",\n    key: indexKey,\n    options: {\n      limit: 10,\n      order: props.sort ? props.sort : \"desc\",\n      subscribe: true,\n      accountId: props.accounts,\n    },\n    cacheOptions: {\n      ignoreCache: true,\n    },\n  },\n];\n\nconst isPremiumFeed = props.isPremiumFeed;\nconst commentAccounts = props.commentAccounts;\nconst renderedPosts = {};\n\nconst makePostItem = (a) => ({\n  type: \"social\",\n  path: `${a.accountId}/post/main`,\n  blockHeight: a.blockHeight,\n});\n\nconst renderPost = (a) => {\n  if (a.value.type !== \"md\") {\n    return false;\n  }\n  const item = JSON.stringify(makePostItem(a));\n  if (item in renderedPosts) {\n    return false;\n  }\n  renderedPosts[item] = true;\n\n  return (\n    <div key={JSON.stringify(a)} style={{ minHeight: \"150px\" }}>\n      <Widget\n        loading={<div className=\"w-100\" style={{ height: \"200px\" }} />}\n        src=\"mob.near/widget/MainPage.N.Post\"\n        props={{\n          accountId: a.accountId,\n          blockHeight: a.blockHeight,\n          isPremiumFeed,\n          commentAccounts,\n          indexKey,\n          groupId,\n          permissions,\n        }}\n      />\n    </div>\n  );\n};\n\nconst repostSvg = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    viewBox=\"0 2 24 24\"\n    stroke=\"currentColor\"\n    strokeWidth=\"1\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      d=\"M4.854 1.146a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L4 2.707V12.5A2.5 2.5 0 0 0 6.5 15h8a.5.5 0 0 0 0-1h-8A1.5 1.5 0 0 1 5 12.5V2.707l3.146 3.147a.5.5 0 1 0 .708-.708l-4-4z\"\n      transform=\"rotate(180, 12, 12), translate(0, 4)\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      d=\"M4.854 1.146a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L4 2.707V12.5A2.5 2.5 0 0 0 6.5 15h8a.5.5 0 0 0 0-1h-8A1.5 1.5 0 0 1 5 12.5V2.707l3.146 3.147a.5.5 0 1 0 .708-.708l-4-4z\"\n      transform=\"translate(0, 4)\"\n    />\n  </svg>\n);\n\nconst extractParentPost = (item) => {\n  if (!item || item.type !== \"social\" || !item.path || !item.blockHeight) {\n    return undefined;\n  }\n  const accountId = item.path.split(\"/\")[0];\n  return `${accountId}/post/main` === item.path\n    ? { accountId, blockHeight: item.blockHeight }\n    : undefined;\n};\n\nconst renderRepost = (a) => {\n  if (a.value.type !== \"repost\") {\n    return false;\n  }\n  const post = extractParentPost(a.value.item);\n  if (!post) {\n    return false;\n  }\n  const item = JSON.stringify(makePostItem(post));\n  if (item in renderedPosts) {\n    return false;\n  }\n  renderedPosts[item] = true;\n\n  return (\n    <div key={JSON.stringify(a)} style={{ minHeight: \"150px\" }}>\n      <div\n        className=\"text-muted\"\n        style={{\n          fontSize: \"13px\",\n          fontWeight: 700,\n          marginLeft: \"24px\",\n          marginBottom: \"-24px\",\n          paddingTop: \"4px\",\n          position: \"relative\",\n          zIndex: 1,\n        }}\n      >\n        {repostSvg}{\" \"}\n        <span style={{ marginLeft: \"8px\" }} data-testid=\"repost\">\n          Reposted by{\" \"}\n          <Widget\n            loading={a.accountId}\n            src=\"mob.near/widget/N.ProfileLine\"\n            props={{\n              accountId: a.accountId,\n              hideImage: true,\n              hideAccountId: true,\n              tooltip: true,\n            }}\n          />\n        </span>\n      </div>\n      <Widget\n        loading={<div className=\"w-100\" style={{ height: \"200px\" }} />}\n        src=\"mob.near/widget/MainPage.N.Post\"\n        props={{\n          accountId: post.accountId,\n          blockHeight: post.blockHeight,\n          reposted: true,\n          isPremiumFeed,\n          commentAccounts,\n          indexKey,\n          groupId,\n          permissions,\n        }}\n      />\n    </div>\n  );\n};\n\nconst renderItem = (item) =>\n  item.action === \"post\" ? renderPost(item) : renderRepost(item);\nreturn (\n  <Widget\n    src=\"devhub.megha19.near/widget/devhub.components.feed.MergedIndexFeed\"\n    props={{\n      index,\n      renderItem,\n      filter: props.filter,\n      threshold: props.threshold,\n    }}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devhub.megha19.near/widget/devhub.components.feed.SubscribedFeed", "fact_widget_deployments_id": "181b2b84d7bbbf0492d8b38fb5acab0d", "inserted_timestamp": "2024-05-21T18:54:56.178Z", "modified_timestamp": "2024-05-21T19:52:57.460Z", "__row_index": 11}