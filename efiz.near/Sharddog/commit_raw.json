{"tx_hash": "7egxRtZqdRxKMzcMN57Asn17X7MtkabBMZoXy6ThGmqy", "action_id_social": "FB6URAesxptY9JD68VzpZscJjdQFy2u2Xe8vjqCZHQDB-0-widget", "block_id": 95641289, "block_timestamp": "2023-07-03T23:19:55.864Z", "signer_id": "efiz.near", "widget_name": "Sharddog", "source_code": "// const data = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n//   method: \"POST\",\n//   headers: {\n//     \"mb-api-key\": \"omni-site\",\n//     \"Content-Type\": \"application/json\",\n//     \"x-hasura-role\": \"anonymous\",\n//   },\n//   body: JSON.stringify({\n//     query: `\n//       query MyQuery {\n//             nft_tokens(\n//                 limit: 2,\n//                 offset: 10\n//               where: { nft_contract_id: { _eq: \"mint.sharddog.near\" }}\n//             ) {\n//               token_id\n//               nft_contract {\n//                 id\n//               }\n//             }\n//           }\n// `,\n//   }),\n// });\n\nconst limit = 1;\n\nState.init({\n  offset: 0,\n  tokens: [],\n  hasMore: true,\n});\n\nfunction fetchTokens() {\n  asyncFetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"omni-site\",\n      \"Content-Type\": \"application/json\",\n      \"x-hasura-role\": \"anonymous\",\n    },\n    body: JSON.stringify({\n      query: `\n          query MyQuery {\n            nft_tokens(\n                limit: ${limit},\n                offset: ${state.offset}\n              where: { nft_contract_id: { _eq: \"mint.sharddog.near\" }}\n            ) {\n              token_id\n              nft_contract {\n                id\n              }\n            }\n          }\n        `,\n    }),\n  }).then((res) => {\n    if (res.ok) {\n      const tokens = res.body.data.nft_tokens;\n      if (tokens.length > 0) {\n        State.update({\n          tokens: [...state.tokens, ...tokens],\n          offset: state.offset + limit,\n          hasMore: true,\n        });\n      } else {\n        State.update({\n          hasMore: false,\n        });\n      }\n    }\n  });\n}\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(9, 1fr);\n\n  @media (hover: none) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n`;\nconst size = \"150px\";\n\nconst loader = (\n  <div className=\"loader\" key={\"loader\"}>\n    <span\n      className=\"spinner-grow spinner-grow-sm me-1\"\n      role=\"status\"\n      aria-hidden=\"true\"\n    />\n    Loading ...\n  </div>\n);\n\nreturn (\n  <InfiniteScroll\n    pageStart={0}\n    loadMore={fetchTokens}\n    hasMore={state.hasMore}\n    loader={loader}\n  >\n    <Grid>\n      {state.tokens?.map((it) => {\n        return (\n          <Widget\n            src=\"mob.near/widget/NftImage\"\n            props={{\n              nft: {\n                tokenId: it.token_id,\n                contractId: it.nft_contract.id,\n              },\n              style: {\n                width: size,\n                height: size,\n                objectFit: \"cover\",\n                minWidth: size,\n                minHeight: size,\n                maxWidth: size,\n                maxHeight: size,\n                overflowWrap: \"break-word\",\n              },\n              className: \"\",\n              fallbackUrl:\n                \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\n            }}\n          />\n        );\n      })}\n    </Grid>\n  </InfiniteScroll>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Sharddog", "fact_widget_deployments_id": "be0f1ce3ba629453192f0542960b9307", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 0}