{"tx_hash": "3UT3561xV2vnum6sHim2nWnJUPogAd6JMEKtdgEdmqBF", "action_id_social": "HKZ8HzVkDPSSsdb18JhZbjfgAbcT4TprfW5t3DJiABwZ-0-widget", "block_id": 105648059, "block_timestamp": "2023-11-14T00:08:24.430Z", "signer_id": "efiz.near", "widget_name": "Module.SputnikDAO", "source_code": "const createPostProposal = ({ daoId, content }) => {\n  const policy = Near.view(daoId, \"get_policy\");\n\n  if (policy === null) {\n    return \"Loading...\";\n  }\n\n  const deposit = policy.proposal_bond;\n\n  const post_args = JSON.stringify({\n    data: {\n      [daoId]: {\n        post: {\n          main: JSON.stringify(content),\n        },\n        index: {\n          post: JSON.stringify({\n            key: \"main\",\n            value: {\n              type: \"md\",\n            },\n          }),\n        },\n      },\n    },\n  });\n\n  const proposal_args = Buffer.from(post_args, \"utf-8\").toString(\"base64\");\n\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"create DAO post on NEAR Social\",\n          kind: {\n            FunctionCall: {\n              receiver_id: \"social.near\",\n              actions: [\n                {\n                  method_name: \"set\",\n                  args: proposal_args,\n                  deposit: \"100000000000000000000000\",\n                  gas: \"219000000000000\",\n                },\n              ],\n            },\n          },\n        },\n      },\n      deposit: deposit,\n      gas: \"219000000000000\",\n    },\n  ]);\n};\n\nreturn { createPostProposal };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Module.SputnikDAO", "fact_widget_deployments_id": "72a624383138717dd88a177db7181df2", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}