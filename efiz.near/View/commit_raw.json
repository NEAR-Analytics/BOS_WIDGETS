{"tx_hash": "A87muKXkuuc76RReAkf1eLXwvxLsahiF23wb8i9iwz7", "action_id_social": "GJhCoZ8DXHhSFnxm6852r2ea7YJrTqrmWivXvDuk55yw-0-widget", "block_id": 91918657, "block_timestamp": "2023-05-15T14:15:04.775Z", "signer_id": "efiz.near", "widget_name": "View", "source_code": "const path = props.path;\nconst type = props.type;\n\nif (type === \"type\") {\n  if (path.endsWith(\"/\")) {\n    path = path.slice(0, -1);\n  }\n}\n\nconst parts = path.split(\"/\");\nlet value = {};\nconsole.log(path);\nif (parts.length < 2) {\n  if (type === \"account\") {\n    // return default profile or setting's profile\n  }\n} else {\n  if (type === \"widget\") {\n    if (path.endsWith(\"/\")) {\n      path = path.slice(0, -1);\n    }\n    return <Widget src={path} />;\n  } else if (type === \"graph\") {\n    parts.push(\"**\");\n    value = Social.get(parts.join(\"/\"), \"final\");\n  } else if (type === \"index\") {\n    value = Social.get(parts.join(\"/\"), \"final\");\n  } else if (type === \"profile\") {\n    value = Social.get(parts.join(\"/\"), \"final\");\n    return <p>{value}</p>;\n  } else if (type === \"settings\") {\n    if (parts.length === 3) {\n      parts.push(\"**\");\n      value = Social.get(parts.join(\"/\"), \"final\");\n    } else {\n      value = Social.get(parts.join(\"/\"), \"final\");\n      value = JSON.parse(value);\n    }\n  } else if (type === \"post\") {\n    // return default post or post from settings\n    const index = {\n      action: parts[1],\n      key: parts[2],\n      options: {\n        limit: 10,\n        order: \"desc\",\n        accountId: parts[0].endsWith(\".near\") ? parts[0] : undefined,\n      },\n    };\n\n    function renderItem(a) {\n      if (a.value.type === \"md\") {\n        return (\n          <Widget\n            src=\"near/widget/Posts.Post\"\n            props={{ accountId: a.accountId, blockHeight: a.blockHeight }}\n          />\n        );\n      }\n    }\n    return (\n      <Widget\n        src=\"efiz.near/widget/MergedIndexFeed\"\n        props={{ index, renderItem, disableCaching: true }}\n      />\n    );\n    //   value = Social.get(path, \"final\");\n    //   value = JSON.parse(value);\n    //   return <Widget src=\"efiz.near/widget/Post.View\" props={{ value }} />;\n  } else {\n    value = Social.get(parts.join(\"/\"), \"final\");\n    value = JSON.parse(value);\n  }\n}\n\nconst text = `\n\\`\\`\\`json\n${JSON.stringify(value, undefined, 2)}\n\\`\\`\\`\n`;\nreturn <Markdown text={text} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/View", "fact_widget_deployments_id": "1e313bb5715825c106d97f1757b8ccd8", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 7}