{"tx_hash": "8gLTkAvUdwL5GYTh8ZyoZq4yEmhCJPTrRSJW5PWwsymu", "action_id_social": "BP4i2G3smhmv3R6zBykgHrhgSrR14W3ksVVPDGNZvsN6-0-widget", "block_id": 91925332, "block_timestamp": "2023-05-15T16:21:33.517Z", "signer_id": "efiz.near", "widget_name": "View", "source_code": "const path = props.path;\nconst type = props.type;\n\nif (path.endsWith(\"/\")) {\n  path = path.slice(0, -1);\n}\n\nconst parts = path.split(\"/\");\nlet value = {};\n\nconsole.log(`path: ${path}, type: ${type}`);\n\n// ACCOUNT //\nif (type === \"account\") {\n  return \"VIEW: account\";\n  // THING //\n} else if (type === \"thing\") {\n  // path: \"everything\"\n  // type: \"thing\"\n  return \"VIEW: thing\";\n  // WIDGET //\n} else if (type === \"widget\") {\n  return <Widget src={path} />;\n  // PROFILE //\n} else if (type === \"graph\") {\n  parts.push(\"**\");\n  value = Social.get(parts.join(\"/\"), \"final\");\n} else if (type === \"index\") {\n  value = Social.get(parts.join(\"/\"), \"final\");\n} else if (type === \"profile\") {\n  value = Social.get(parts.join(\"/\"), \"final\");\n  return <p>{value}</p>;\n} else if (type === \"settings\") {\n  if (parts.length === 3) {\n    parts.push(\"**\");\n    value = Social.get(parts.join(\"/\"), \"final\");\n  } else {\n    value = Social.get(parts.join(\"/\"), \"final\");\n    value = JSON.parse(value);\n  }\n} else if (type === \"post\") {\n  // Replace this with a better component\n  // with hashtag filter\n\n  if (parts[0].endsWith(\".near\")) {\n    const index = {\n      action: parts[1],\n      key: parts[2],\n      options: {\n        limit: 10,\n        order: \"desc\",\n        accountId: parts[0],\n      },\n    };\n\n    function renderItem(a) {\n      if (a.value.type === \"md\") {\n        return (\n          <Widget\n            src=\"near/widget/Posts.Post\"\n            props={{ accountId: a.accountId, blockHeight: a.blockHeight }}\n          />\n        );\n      }\n    }\n    return (\n      <Widget\n        src=\"efiz.near/widget/MergedIndexFeed\"\n        props={{ index, renderItem, disableCaching: true }}\n      />\n    );\n  } else {\n    let hashtagFilter = [];\n    if (parts[2] !== \"main\") {\n      hashtagFilter = [{ name: parts[2], required: true }];\n    }\n    return (\n      <Widget\n        src=\"efiz.near/widget/Community.Posts\"\n        props={{\n          communityHashtags: hashtagFilter,\n          communityMembers: [],\n          exclusive: false,\n          allowPublicPosting: true,\n        }}\n      />\n    );\n  }\n} else {\n  value = Social.get(parts.join(\"/\"), \"final\");\n  value = JSON.parse(value);\n}\n\nconst text = `\n\\`\\`\\`json\n${JSON.stringify(value, undefined, 2)}\n\\`\\`\\`\n`;\nreturn <Markdown text={text} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/View", "fact_widget_deployments_id": "3acc979127db498a2f3f147420451c0e", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 13}