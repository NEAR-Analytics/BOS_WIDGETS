{"tx_hash": "FmZcqy7fu2dnfBzkPsknbNmEe2ZfDDgRV5At2WYm8nX8", "action_id_social": "CzWASRa78spX5RJZSsgHUdvwHkji4n7MGdbC87wKrMs1-0-widget", "block_id": 101960181, "block_timestamp": "2023-09-26T00:26:07.183Z", "signer_id": "efiz.near", "widget_name": "post.feed", "source_code": "const { Feed } = VM.require(\"devs.near/widget/Module.Feed\");\nconst { ContextMenu } = VM.require(\"efiz.near/widget/Module.ContextMenu\");\n\nContextMenu = ContextMenu || (() => <></>); // make sure you have this or else it can break\nFeed = Feed || (() => <></>);\n\nreturn (\n  <div\n    className=\"d-flex flex-column gap-1\"\n    style={{\n      background: \"#fefefe\",\n      padding: \"23px\",\n    }}\n  >\n    <h3>\n      <b>Every Post</b>\n    </h3>\n    <Widget\n      src=\"devs.near/widget/Compose\"\n      // props={{\n      //   index: {\n      //     post: JSON.stringify([\n      //       {\n      //         key: {\n      //           type: \"post\",\n      //           path: `${creatorId}/thing/${groupId}`,\n      //         },\n      //         value: {\n      //           type: \"md\",\n      //         },\n      //       },\n      //     ]),\n      //   },\n      // }}\n    />\n    <Feed\n      index={[\n        {\n          action: \"post\",\n          key: \"main\",\n          options: {\n            limit: 10,\n            order: \"desc\",\n            accountId: props.accounts,\n          },\n          cacheOptions: {\n            ignoreCache: true,\n          },\n        },\n        {\n          action: \"repost\",\n          key: \"main\",\n          options: {\n            limit: 10,\n            order: \"desc\",\n            accountId: props.accounts,\n          },\n          cacheOptions: {\n            ignoreCache: true,\n          },\n        },\n      ]}\n      Item={(p) => {\n        const item = {\n          path: `${p.accountId}/post/main`,\n          blockHeight: p.blockHeight,\n          type: \"social\",\n        };\n\n        return (\n          <ContextMenu\n            Item={() => (\n              <Widget\n                loading={<div className=\"w-100\" style={{ height: \"200px\" }} />}\n                src=\"mob.near/widget/MainPage.N.Post\" // Fork and edit this\n                props={{\n                  accountId: p.accountId,\n                  blockHeight: p.blockHeight,\n                }}\n              />\n            )}\n            passProps={{\n              // PROPS THAT WILL BE PASSED TO FUNCTION\n              show: {\n                item,\n              },\n            }}\n            handlers={{\n              // FUNCTION DEFINITIONS\n              show: ({ item }) => {\n                const data = {\n                  index: {},\n                };\n\n                const notifications = [\"james.near\"].map((accountId) => ({\n                  key: accountId,\n                  value: {\n                    type: \"mention\",\n                    item,\n                  },\n                }));\n\n                if (notifications.length) {\n                  Social.set({\n                    notify: JSON.stringify(\n                      notifications.length > 1\n                        ? notifications\n                        : notifications[0]\n                    ),\n                  });\n                }\n              },\n            }}\n            items={{\n              // MENU ITEM TO RENDER, WILL CALL FUNCTION WHEN CLICKED\n              show: () => (\n                <>\n                  <i className=\"menu__item__icon bi bi-arrow-return-right\" />\n                  Forward\n                </>\n              ),\n            }}\n          />\n        );\n      }}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/post.feed", "fact_widget_deployments_id": "0aac60f233336535f3c0f817fbd13303", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}