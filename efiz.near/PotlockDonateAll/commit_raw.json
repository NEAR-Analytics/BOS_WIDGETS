{"tx_hash": "BKugC3V4GFqckhpRjFKUa4sLLt8CHtvxpEhuLK7o1nri", "action_id_social": "CPGvj49TmDR2ASg2UNKaCLwx1kqpg8cUdZKG8oKfhZ5M-0-widget", "block_id": 119389638, "block_timestamp": "2024-05-21T03:25:39.261Z", "signer_id": "efiz.near", "widget_name": "PotlockDonateAll", "source_code": "const { getApprovedApplications } = VM.require(\"potlock.near/widget/SDK.pot\");\n\nconst POT_ID = \"oss.v1.potfactory.potlock.near\";\nconst DONATION_CONTRACT_ID = \"donate.potlock.near\";\nconst AMOUNT = \"0.1\";\nconst referrer_id = props.referrer_id || \"efiz.near\";\n\nconst projects = getApprovedApplications(POT_ID);\n\nconst handleDonateAll = () => {\n  const projectIds = projects.map((it) => it.project_id);\n  const transactions = [];\n\n  projectIds.forEach((projectId) => {\n    const amountIndivisible = Big(parseFloat(AMOUNT)).mul(Big(10).pow(24));\n    const args = {};\n\n    args.project_id = projectId;\n    args.referrer_id = referrer_id;\n    args.bypass_protocol_fee = false;\n    args.message = \"\";\n\n    transactions.push({\n      contractName: POT_ID,\n      methodName: \"donate\",\n      args,\n      deposit: amountIndivisible.toString(),\n      gas: \"300000000000000\",\n    });\n  });\n\n  Near.call(transactions);\n};\n\nreturn <button onClick={handleDonateAll}>donate</button>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/PotlockDonateAll", "fact_widget_deployments_id": "ba97e9fc5fa07745e989f943f429317c", "inserted_timestamp": "2024-05-21T04:50:14.770Z", "modified_timestamp": "2024-05-21T04:50:14.770Z", "__row_index": 0}