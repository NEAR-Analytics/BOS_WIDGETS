{"tx_hash": "81Kt19cxnDU4231jMdzXAi5fA1YdHiKts8xniWvintmp", "action_id_social": "9gBBZgBFsQ7BrGsJMmsvzco7QjJinLamvQSG9A39yf2y-0-widget", "block_id": 98524333, "block_timestamp": "2023-08-10T23:29:37.775Z", "signer_id": "efiz.near", "widget_name": "expr.event.creator", "source_code": "const handleChange = (e) => {\n  console.log(JSON.stringify(e));\n  State.update({ e });\n};\n\nconst policy = Near.view(daoId, \"get_policy\");\n\nif (policy === null) {\n  return \"Loading...\";\n}\n\nconst deposit = policy.proposal_bond;\nconst daoId = \"build.sputnik-dao.near\";\nconst thingId = \"testevent\";\n\nconst post_args = JSON.stringify({\n  data: {\n    [daoId]: {\n      thing: {\n        [thingId]: JSON.stringify(state.e),\n      },\n      index: {\n        every: JSON.stringify({\n          key: \"efiz.near/type/event\",\n          value: {\n            thingId: thingId,\n            type: \"efiz.near/type/event\",\n          },\n        }),\n      },\n    },\n  },\n});\n\nconst proposal_args = Buffer.from(post_args, \"utf-8\").toString(\"base64\");\n\nconst handleProposal = () => {\n  console.log(JSON.stringify(post_args));\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"create DAO event on NEAR Social\",\n          kind: {\n            FunctionCall: {\n              receiver_id: \"social.near\",\n              actions: [\n                {\n                  method_name: \"set\",\n                  args: proposal_args,\n                  deposit: \"100000000000000000000000\",\n                  gas: \"219000000000000\",\n                },\n              ],\n            },\n          },\n        },\n      },\n      deposit: deposit,\n      gas: \"219000000000000\",\n    },\n  ]);\n};\n\nreturn (\n  <>\n    <button onClick={handleProposal}> propose</button>\n    <Widget\n      src=\"efiz.near/widget/create\"\n      props={{ item: { type: \"efiz.near/type/event\" }, onChange: handleChange }}\n    />\n  </>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/expr.event.creator", "fact_widget_deployments_id": "2fc9b7c119248bef4e645bb950fcfffe", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}