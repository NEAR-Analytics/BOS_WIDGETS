{"tx_hash": "1j1PTd8ack5aL2gxtotJxmMeypbEgkRAfQ6Zbxe3Gq9", "action_id_social": "6CmiCJgM6gMcd85eWVKAVVVMA6aYDLyajXxQUw8c8dKK-0-widget", "block_id": 91559263, "block_timestamp": "2023-05-10T21:41:44.107Z", "signer_id": "efiz.near", "widget_name": "Explorer", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nState.init({\n  path: accountId,\n});\n\nconst parts = state.path.split(\"/\");\n\nlet edges = [];\nlet value = {};\n\nif (parts.length === 1) {\n  parts.push(\"**\");\n\n  value = Social.get(parts.join(\"/\"), \"final\");\n  edges = Object.keys(value);\n  value = JSON.stringify(value, undefined, 2);\n} else if (parts.length === 2) {\n  // it is an accountId and a \"standard\"\n  // should have the option to click * or **\n  parts.push(\"**\");\n\n  value = Social.get(parts.join(\"/\"), \"final\");\n  edges = Object.keys(value);\n  value = JSON.stringify(value, undefined, 2);\n} else if (parts.length > 2) {\n  value = Social.get(parts.join(\"/\"), \"final\");\n  const standard = parts[1];\n  // These are types, and so follow\n  switch (standard) {\n    case \"index\":\n      value = JSON.parse(value);\n      edges = [\"hi\"];\n      value = JSON.stringify(value, undefined, 2);\n      // if you go to an index, then it shows all the data\n      break;\n    case \"post\":\n      //   value = Social.get(parts.slice(0, 3).join(\"/\"), \"final\");\n      const value = Social.index(\"post\", parts[2], {\n        limit: 10,\n        order: \"desc\",\n        accountId: parts[0],\n      });\n      value = JSON.stringify(value, undefined, 2);\n      console.log(value);\n      // we want a special view for this\n      break;\n    //   if (parts.length === 3) {\n    //     const value = Social.index(\"post\", parts[2], {\n    //       limit: 10,\n    //       order: \"desc\",\n    //       accountId: undefined,\n    //     });\n    //     console.log(\"hello\");\n    //     console.log(value);\n    //     // value[parts[4]];\n    //   } else {\n    //     // edges = Object.keys(value);\n    //   }\n    // default:\n    //   value = Social.get(parts.join(\"/\"), \"final\");\n    //   edges = Object.keys(value);\n    //   break;\n  }\n  // anything after this, check for a type and go from there.\n}\n\nconst text = `\n\\`\\`\\`json\n${value}\n\\`\\`\\`\n`;\n\nconst Button = styled.button`\n  text-transform: lowercase !important;\n`;\n\nconst renderThings = () => {\n  return <Markdown text={text} />;\n};\n\nfunction back() {\n  const parts = state.path.split(\"/\");\n  parts.pop();\n\n  State.update({\n    path: parts.join(\"/\"),\n  });\n}\n\nfunction navigate(word) {\n  const parts = state.path.split(\"/\");\n  parts.push(word);\n\n  State.update({\n    path: parts.join(\"/\"),\n  });\n}\n\nreturn (\n  <div>\n    <div>\n      <input type=\"text\" value={state.path} placeholder={state.path} />\n      {parts.length > 2 ? <Button onClick={() => back()}>back</Button> : null}\n      {edges?.map((it) => (\n        <Button onClick={() => navigate(it)}>{it}</Button>\n      ))}\n    </div>\n    {renderThings()}\n  </div>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Explorer", "fact_widget_deployments_id": "f92a5d5196e1ca9dfbeb8d7cbf826723", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}