{"tx_hash": "G2GwHAGwaDJjdQM3yVk8T4RRFdxz6JfLQcPYx731a2HX", "action_id_social": "2e9VgKMKBpKjDVmUSfiuqK9NQZvFDbAkg3Hw79YURBT4-0-widget", "block_id": 98841510, "block_timestamp": "2023-08-15T06:27:35.229Z", "signer_id": "easypoll-v0.ndc-widgets.near", "widget_name": "EasyPoll.ViewPoll", "source_code": "const widgetOwner = props.widgetOwner ?? \"easypoll-v0.ndc-widgets.near\";\nconst src = props.src;\nconst href = props.href;\nconst editHref = props.editHref;\nconst accountId = props.accountId ?? context.accountId;\nconst tabs = props.tabs;\nconst indexVersion = props.indexVersion ?? \"4.0.0\";\nconst isHuman = props.isHuman;\nconst isOg = props.isOg;\nconst blockHeight = props.blockHeight ?? \"final\";\nconst showDraft = props.showDraft ?? false;\nconst isLoggedIn = accountId ? true : false;\n\nif (!src) {\n  return \"Please provide poll src\";\n}\n\nconst poll = Social.get(`${src}`, blockHeight);\nif (poll === null) {\n  return \"Loading...\";\n}\nif (poll === undefined) {\n  return \"404 Poll not found\";\n}\n\n// pretify\nconsole.log(\"poll\", poll);\n\npoll = JSON.parse(poll);\npoll.accountId = src.split(\"/\")[0];\n\nlet userAnswers = isLoggedIn\n  ? Social.index(`easypoll-${indexVersion}-answer`, `${src}`, {\n      accountId: accountId,\n    })\n  : [];\nif (!userAnswers) return \"\";\n\nreturn (\n  <>\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.PollDetails`}\n      props={{\n        href: tabs.VIEW_POLL.href(src, blockHeight),\n        editHref: tabs.EDIT_POLL.href(src, blockHeight),\n        resultsHref: tabs.RESULTS.href(src, blockHeight),\n        deleteHref: tabs.DELETE_POLL.href(src, blockHeight),\n        widgetOwner,\n        blockHeight: blockHeight,\n        isHuman,\n        isOg,\n        poll: poll,\n        userAnswers: userAnswers,\n        indexVersion,\n        src,\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/easypoll-v0.ndc-widgets.near/widget/EasyPoll.ViewPoll", "fact_widget_deployments_id": "aa8537c38725e500ac8a95633976c906", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}