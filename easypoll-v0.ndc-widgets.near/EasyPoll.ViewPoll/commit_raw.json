{"tx_hash": "8H6BJessyHzAVcHhyekoT2KMoFLZ6mqV1Bf4tbhXcNm9", "action_id_social": "38VMreRi9nuddNz7AzxDxNCyqsHzxAFF99TXX7bZzDRP-0-widget", "block_id": 96311755, "block_timestamp": "2023-07-12T16:35:55.256Z", "signer_id": "easypoll-v0.ndc-widgets.near", "widget_name": "EasyPoll.ViewPoll", "source_code": "const widgetOwner = props.widgetOwner ?? \"easypoll-v0.ndc-widgets.near\";\nconst src = props.src;\nconst href = props.href;\nconst editHref = props.editHref;\nconst accountId = props.accountId ?? context.accountId;\nconst tabs = props.tabs;\nconst indexVersion = props.indexVersion ?? \"4.0.0\";\nconst isHuman = props.isHuman;\nconst blockHeight = props.blockHeight ?? \"final\";\nconst showDraft = props.showDraft ?? false;\nconst isLoggedIn = accountId ? true : false;\n\nif (!src) {\n  return \"Please provide poll src\";\n}\n\nconst poll = Social.get(`${src}`, blockHeight);\nif (poll === null) {\n  return \"Loading...\";\n}\nif (poll === undefined) {\n  return \"404 Poll not found\";\n}\n\npoll = JSON.parse(poll);\npoll.accountId = src.split(\"/\")[0];\n\nlet userAnswers = isLoggedIn\n  ? Social.index(`easypoll-${indexVersion}-answer`, `${src}`, {\n      accountId: accountId,\n    })\n  : [];\nif (!userAnswers) return \"\";\n\nreturn (\n  <>\n    <Widget\n      src={`${widgetOwner}/widget/EasyPoll.PollDetails`}\n      props={{\n        href: tabs.VIEW_POLL.href(src, blockHeight),\n        editHref: tabs.EDIT_POLL.href(src, blockHeight),\n        resultsHref: tabs.RESULTS.href(src, blockHeight),\n        deleteHref: tabs.DELETE_POLL.href(src, blockHeight),\n        widgetOwner,\n        blockHeight: blockHeight,\n        isHuman,\n        poll: poll,\n        userAnswers: userAnswers,\n        indexVersion,\n        src,\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/easypoll-v0.ndc-widgets.near/widget/EasyPoll.ViewPoll", "fact_widget_deployments_id": "04f4abb1e597a64239c2e2b21c00c638", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 8}