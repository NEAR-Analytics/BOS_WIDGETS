{"tx_hash": "DY35GofnmKg79ngRHAzxBtwQ78ZAh9UTBwya2zVzBZZz", "action_id_social": "AEW1VQagJnR11P9schyRUCfarSFg8jLMjUhJCraByfpA-0-widget", "block_id": 111790895, "block_timestamp": "2024-01-31T18:31:56.052Z", "signer_id": "yashank.near", "widget_name": "NearRaffle", "source_code": "const contract = \"raffle.yashank.near\";\nconst entriesResult = Near.view(contract, \"entry_names\", {});\nconst entries = Array.isArray(entriesResult) ? entriesResult : [];\nState.init({ entries });\nconst [newEntry, setNewEntry] = useState(\"\");\nconst [winners, setWinners] = useState({ winner1: \"\" });\n\nconst handleAddEntry = () => {\n  if (newEntry.trim() !== \"\") {\n    Near.call(contract, \"entry\", {\n      new_entry: newEntry,\n    });\n    State.update({ entries });\n    setNewEntry(\"\");\n  }\n};\n\nconst pickWinner = () => {\n  if (entries.length >= 2) {\n    const winnerIndex1 = Near.view(contract, \"pick_random_user\", {});\n\n    setWinners({\n      winner1: winnerIndex1,\n    });\n  } else {\n    alert(\"Not enough entries to pick winners.\");\n  }\n};\n\nconst clearSelection = () => {\n  Near.call(contract, \"clear_participants\", {});\n  State.update({ entries: [] }); // Clear the entries state as well\n};\n\nconst styles = {\n  container: {\n    maxWidth: \"600px\",\n    margin: \"auto\",\n    padding: \"20px\",\n    backgroundColor: \"#ddd\", // Grey background\n    borderRadius: \"10px\",\n  },\n  wall: {\n    listStyle: \"none\",\n    padding: \"0\",\n    backgroundColor: \"#fff\",\n    borderRadius: \"8px\",\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n  },\n  winnersColumn: {\n    marginLeft: \"20px\",\n  },\n  header: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: \"20px\",\n  },\n  logo: {\n    height: \"50px\",\n    marginRight: \"10px\",\n  },\n  wallHeader: {\n    fontSize: \"24px\",\n    fontWeight: \"bold\", // Bold styling\n    color: \"#333\",\n  },\n  entry: {\n    padding: \"10px\",\n    borderBottom: \"1px solid #ccc\",\n    fontSize: \"16px\",\n  },\n  inputContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    marginTop: \"20px\",\n  },\n  input: {\n    flex: \"1\",\n    padding: \"8px\",\n    marginRight: \"10px\",\n  },\n  addButton: {\n    padding: \"10px\",\n    cursor: \"pointer\",\n    backgroundColor: \"#4CAF50\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    marginRight: \"10px\",\n  },\n  pickWinnersButton: {\n    padding: \"10px\",\n    cursor: \"pointer\",\n    backgroundColor: \"#4CAF50\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    marginRight: \"10px\",\n  },\n  clearSelectionButton: {\n    padding: \"10px\",\n    cursor: \"pointer\",\n    backgroundColor: \"#e74c3c\", // Red color for clear selection button\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"5px\",\n  },\n  entryHeader: {\n    fontSize: \"20px\", // Smaller font size for entries\n  },\n  winnersHeader: {\n    fontSize: \"20px\", // Smaller font size for winners\n  },\n};\n\nconst Img = styled.img`\n  height: 50px;\n`;\n\nreturn (\n  <div style={styles.container}>\n    <div style={styles.header}>\n      <Img\n        src=\"https://i.ibb.co/qxdyxF6/Screenshot-2024-01-23-004646.png\"\n        alt=\"NearIndiaLogo\"\n        style={styles.logo}\n      />\n      <h1 style={styles.wallHeader}>Near Raffle</h1>\n    </div>\n    <div style={styles.inputContainer}>\n      <input\n        type=\"text\"\n        value={newEntry}\n        onChange={(e) => setNewEntry(e.target.value)}\n        style={styles.input}\n      />\n      <button onClick={handleAddEntry} style={styles.addButton}>\n        Add Entry\n      </button>\n      <button onClick={pickWinner} style={styles.pickWinnersButton}>\n        Pick Winners\n      </button>\n      <button onClick={clearSelection} style={styles.clearSelectionButton}>\n        Clear Selection\n      </button>\n    </div>\n    <div style={{ display: \"flex\" }}>\n      <div style={{ flex: 1 }}>\n        <h2 style={styles.entryHeader}>Entries:</h2>\n        <ul style={styles.wall}>\n          {entries.map((entry, index) => (\n            <li key={index} style={styles.entry}>\n              {entry}\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div style={styles.winnersColumn}>\n        <h2 style={styles.winnersHeader}>Winners:</h2>\n        <p>{winners.winner1}</p>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"description": "Put your entries and raffle users", "name": "Raffle", "tags": {"near": "", "raffle": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/yashank.near/widget/NearRaffle", "fact_widget_deployments_id": "a1d6fe0d9f7ac1103915184e503df771", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}