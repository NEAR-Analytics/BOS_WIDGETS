{"tx_hash": "9knGsVA9mXenmfRK3TK8TwoqZp1dPNdKyxs4WT8idwxH", "action_id_social": "8omt4EQ5zFcaxMjJGPJspizmnaCTmVidBuvjuYCYwcNY-0-widget", "block_id": 100072807, "block_timestamp": "2023-08-31T10:32:25.009Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "Chat", "source_code": "const contract =\n  \"ece61a112fbb05b5ff96fd4d63cb259c4bae966477829666d46ddc4e5121d801\";\n\nState.init({\n  message: \"\",\n});\n\nconst messages = Near.view(contract, \"get_messages\", { limit: 100 });\n\nconst Message = styled.div`\n  display: flex;\n  gap: 1.2em;\n`;\n\nconst SendControls = styled.div`\n  display: flex;\n  gap: 1em;\n  margin: 0.5em;\n`;\n\nconst sendMessage = () => {\n  if (state.message.length != 0) {\n    Near.call(contract, \"send\", {\n      text: state.message,\n    });\n  }\n};\n\nreturn (\n  <>\n    <pre>{JSON.stringify(Social.get(`mob.near/widget/**`), null, 2)}</pre>\n    {messages.reverse().map((message) => (\n      <Message>\n        <Widget\n          src=\"calebjacob.near/widget/AccountProfile\"\n          props={{\n            accountId: message.author,\n          }}\n        />\n        <Widget\n          src=\"andyh.near/widget/TimeAgo\"\n          props={{\n            blockHeight: message.block_height,\n          }}\n        />\n        <p>{message.text}</p>\n      </Message>\n    ))}\n    <SendControls>\n      <input\n        type=\"text\"\n        onInput={(e) => State.update({ message: e.target.value })}\n        value={state.message}\n      />\n      <button\n        onClick={() => {\n          sendMessage();\n        }}\n      >\n        Send\n      </button>\n    </SendControls>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/Chat", "fact_widget_deployments_id": "774ddbff8b2fe5b61b7f02616f45b7e0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}