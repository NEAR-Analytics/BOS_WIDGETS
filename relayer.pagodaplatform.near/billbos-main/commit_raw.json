{"tx_hash": "9vA2d86WcDrSYdLiVwFWzh7uzVpsNZh94iQov1uM7o9", "action_id_social": "3F71DPA49RogrYSJaUs4mXxDneMGPpTQTVnYbGcKdE69-0-widget", "block_id": 108087880, "block_timestamp": "2023-12-16T12:35:49.830Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "billbos-main", "source_code": "State.init({\n  chainId: null,\n  walletAddress: null,\n  walletConnected: false,\n});\n\nconst DEFAULT_CHAIN_ID = 25925;\nconst CHAIN_LIST = [25925, 3501];\n\nfunction switchEthereumChain(chainId) {\n  const chainIdHex = `0x${chainId.toString(16)}`;\n  const res = Ethers.send(\"wallet_switchEthereumChain\", [\n    { chainId: chainIdHex },\n  ]);\n}\n\nif (\n  state.chainId === null &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((data) => {\n      const chainId = data?.chainId;\n      if (CHAIN_LIST.includes(chainId)) {\n        State.update({ chainId: chainId });\n      } else {\n        State.update({ chainId: null });\n        switchEthereumChain(DEFAULT_CHAIN_ID);\n      }\n\n      // const config = getNetworkConfig(chainId);\n      // if (!config) {\n      //   console.log(`Unsupport chain, chainId: ${chainId}`);\n      //   State.update({ isChainSupported: false });\n      //   switchEthereumChain(DEFAULT_CHAIN_ID);\n      // } else {\n      //   State.update({ chainId, isChainSupported: true });\n      // }\n    });\n}\n\nfunction checkProvider() {\n  const provider = Ethers.provider();\n  if (provider) {\n    provider\n      .getSigner()\n      ?.getAddress()\n      ?.then((address) => {\n        State.update({ walletAddress: address });\n      });\n    State.update({ walletConnected: true });\n  } else {\n    State.update({ walletConnected: false });\n  }\n}\ncheckProvider();\nreturn (\n  <div>\n    {JSON.stringify(state)}\n    {state.walletConnected ? (\n      <Widget\n        src=\"porx-dev.near/widget/billbos-header\"\n        props={{ walletAddress: state.walletAddress, chainId: state.chainId }}\n      />\n    ) : (\n      <Widget src=\"porx-dev.near/widget/billbos-authen\" props={{}} />\n    )}\n  </div>\n);\n", "metadata": {"fork_of": "porx-dev.near/widget/billbos-main@108087085"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/billbos-main", "fact_widget_deployments_id": "ae4a80ae059c3e136f6544fc6e0afac4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 8}