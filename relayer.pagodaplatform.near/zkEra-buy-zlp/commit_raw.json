{"tx_hash": "GVDUFu2DY2X2GfzNMNG3rr7xR7F1akJJmFWoDVZ3jZLS", "action_id_social": "Gs4adqpxcjbdySArhDk2LRRyUSVBQ4LgESZ4VwLtxJ6k-0-widget", "block_id": 106214600, "block_timestamp": "2023-11-21T15:40:42.141Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "zkEra-buy-zlp", "source_code": "/// Layout\nconst DaisyUIWrapper = ({ children }) => {\n  return (\n    <Widget\n      src=\"igris.near/widget/DaisyUIWrapper\"\n      props={{\n        children,\n        daisyUiTheme: \"forest\",\n      }}\n    />\n  );\n};\n\n/// Assets\nconst IconETH = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      height=\"24.002\"\n      viewBox=\"0 0 24 24.002\"\n      width=\"24\"\n    >\n      <path d=\"m0 .003h24v24h-24z\" fill=\"none\" />\n      <path\n        d=\"m23.64 14.905a12 12 0 1 1 -8.74-14.545 12 12 0 0 1 8.74 14.545z\"\n        fill=\"#fff\"\n        transform=\"translate(0 -.001)\"\n      />\n      <g transform=\"translate(6.858 3.628)\">\n        <path\n          d=\"m383.612 0-.112.382v11.075l.112.112 5.141-3.039z\"\n          fill=\"#343434\"\n          transform=\"translate(-378.471)\"\n        />\n        <path d=\"m5.141 0-5.141 8.53 5.141 3.039z\" fill=\"#8c8c8c\" />\n        <path\n          d=\"m387.3 727.927-.063.077v3.945l.063.185 5.144-7.245z\"\n          fill=\"#3c3c3b\"\n          transform=\"translate(-382.162 -715.385)\"\n        />\n        <path\n          d=\"m5.141 732.135v-4.207l-5.141-3.038z\"\n          fill=\"#8c8c8c\"\n          transform=\"translate(0 -715.385)\"\n        />\n        <path\n          d=\"m392.07 477.706 5.141-3.039-5.141-2.337z\"\n          fill=\"#141414\"\n          transform=\"translate(-386.929 -466.137)\"\n        />\n        <path\n          d=\"m0 474.667 5.141 3.039v-5.376z\"\n          fill=\"#393939\"\n          transform=\"translate(0 -466.137)\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nconst IconZLP = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      viewBox=\"0 0 100 100\"\n      fill=\"none\"\n    >\n      <g clip-path=\"url(#clip0_252_8935)\">\n        <path\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M50 88C70.9868 88 88 70.9868 88 50C88 29.0132 70.9868 12 50 12C29.0132 12 12 29.0132 12 50C12 70.9868 29.0132 88 50 88ZM80 65.8182L50 88L20 65.8182V27L35 38.0909V57.5L50 68.5909L65 57.5V38.0909L80 27V65.8182ZM50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100ZM50 24L60 41.5L50 59L40 41.5L50 24Z\"\n          fill=\"#ADADAD\"\n        />\n        <path\n          fill-rule=\"evenodd\"\n          clip-rule=\"evenodd\"\n          d=\"M50 88C70.9868 88 88 70.9868 88 50C88 29.0132 70.9868 12 50 12C29.0132 12 12 29.0132 12 50C12 70.9868 29.0132 88 50 88ZM80 65.8182L50 88L20 65.8182V27L35 38.0909V57.5L50 68.5909L65 57.5V38.0909L80 27V65.8182ZM50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100ZM50 24L60 41.5L50 59L40 41.5L50 24Z\"\n          fill=\"url(#paint0_linear_252_8935)\"\n        />\n      </g>\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_252_8935\"\n          x1=\"80\"\n          y1=\"8.7\"\n          x2=\"22.5\"\n          y2=\"91\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.296875\" stop-color=\"#43F574\" />\n          <stop offset=\"1\" stop-color=\"#2F0461\" />\n        </linearGradient>\n        <clipPath id=\"clip0_252_8935\">\n          <rect width=\"100\" height=\"100\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n};\n\nconst LogoZkEra = () => {\n  return (\n    <svg\n      width=\"85\"\n      height=\"31\"\n      viewBox=\"0 0 85 31\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g clip-path=\"url(#clip0_257_433)\">\n        <path d=\"M14 14V0.5L11 10L6 14H14Z\" fill=\"#ADADAD\" />\n        <path\n          d=\"M14 14V0.5L11 10L6 14H14Z\"\n          fill=\"url(#paint0_linear_257_433)\"\n        />\n        <path d=\"M16 16.5V29.5L19 20.5L24 16.5H16Z\" fill=\"#ADADAD\" />\n        <path\n          d=\"M16 16.5V29.5L19 20.5L24 16.5H16Z\"\n          fill=\"url(#paint1_linear_257_433)\"\n        />\n        <path d=\"M19 11L16 0.5L17 13L24 14L19 11Z\" fill=\"#ADADAD\" />\n        <path\n          d=\"M19 11L16 0.5L17 13L24 14L19 11Z\"\n          fill=\"url(#paint2_linear_257_433)\"\n        />\n        <path\n          d=\"M11 19L14 29.5L13 17L6 16L11 19Z\"\n          fill=\"url(#paint3_linear_257_433)\"\n        />\n      </g>\n      <g clip-path=\"url(#clip1_257_433)\">\n        <path\n          d=\"M36.3401 13.583H32.2106V10.8296H39.7884V13.4361L35.2402 21.3072H39.7884V24.0606H32V21.454L36.3401 13.583Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M45.3402 15.7735H45.3897L48.1865 10.7341H51.9692L48.7736 16.0451L52.6455 24.0631H48.8628L46.2469 19.031L45.3402 20.2009V24.0631H41.9043V10.7341H45.3402V15.7735Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M75.0168 14.5669C75.0168 13.7959 75.1407 13.1522 75.3909 12.6358C75.6411 12.1194 75.9755 11.7009 76.3991 11.3827C76.8228 11.0621 77.3206 10.8345 77.8929 10.695C78.4651 10.5555 79.0746 10.4869 79.7235 10.4869C80.7516 10.4869 81.5814 10.5848 82.2131 10.7831C82.8448 10.9789 83.3329 11.2579 83.6821 11.6201C84.0315 11.9799 84.2668 12.4106 84.3906 12.9124C84.5145 13.4117 84.5765 13.9575 84.5765 14.5473V21.5079C84.5765 22.132 84.6061 22.6142 84.6632 22.9593C84.7201 23.3043 84.834 23.6739 85 24.0655H81.7153C81.5988 23.8526 81.5121 23.6274 81.4526 23.39C81.3932 23.1526 81.3412 22.9201 81.2916 22.69H81.2421C80.8433 23.3778 80.3825 23.8256 79.8598 24.0312C79.3371 24.2368 78.6608 24.3396 77.831 24.3396C77.2339 24.3396 76.7261 24.2368 76.3124 24.0312C75.8962 23.8256 75.5668 23.5442 75.3166 23.1819C75.0688 22.8222 74.8855 22.4159 74.7691 21.9655C74.6527 21.5152 74.5957 21.0674 74.5957 20.6244C74.5957 20.0027 74.6626 19.4642 74.7939 19.0139C74.9277 18.5635 75.1308 18.1769 75.4033 17.8587C75.6783 17.5381 76.025 17.2738 76.4487 17.0584C76.8722 16.8455 77.3826 16.657 77.9796 16.493L79.9218 15.9767C80.437 15.8444 80.7937 15.6658 80.9919 15.4357C81.1901 15.2057 81.2916 14.8704 81.2916 14.4274C81.2916 13.9183 81.1702 13.5218 80.93 13.2354C80.6897 12.9491 80.2785 12.8047 79.6988 12.8047C79.1686 12.8047 78.7698 12.9613 78.5048 13.2722C78.2397 13.583 78.1059 14.0015 78.1059 14.5253V14.8948H75.0194V14.5742L75.0168 14.5669ZM80.5436 17.8758C80.2785 17.9836 80.0381 18.0594 79.8226 18.1084C79.1266 18.2552 78.6286 18.5024 78.3289 18.8451C78.0291 19.1902 77.8805 19.6576 77.8805 20.2474C77.8805 20.7565 77.9796 21.1897 78.1802 21.552C78.3784 21.9117 78.7104 22.0928 79.1761 22.0928C79.409 22.0928 79.6492 22.0562 79.8969 21.9827C80.1446 21.9093 80.3726 21.7894 80.5807 21.6254C80.7887 21.4614 80.9572 21.2485 81.091 20.9865C81.2247 20.7247 81.2891 20.4139 81.2891 20.0517V17.4451C81.0563 17.6262 80.8086 17.7682 80.5436 17.8758Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M72.2823 10.4845V10.5016C71.715 10.5555 71.222 10.7415 70.8058 11.0621C70.3079 11.4488 69.8843 11.9603 69.535 12.5991H69.4855V10.8271H66.1982V24.0581H69.6341V16.1162C69.6341 15.6732 69.7084 15.3011 69.8571 14.9976C70.0057 14.6941 70.2063 14.4494 70.454 14.2609C70.7018 14.0725 70.9768 13.9379 71.2765 13.8547C71.554 13.7788 71.8314 13.7396 72.1089 13.7347V13.7421H73.6794V10.4869H72.2798L72.2823 10.4845Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M57.4159 21.1232L54.0791 18.2307V23.9535H64.2605V21.1232H57.4159Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M54.0791 6.5V9.33029H57.6636H64.0103V6.5H54.0791Z\"\n          fill=\"white\"\n        />\n        <path\n          d=\"M54.2031 11.2171V16.4061H57.7876H63.7602V13.5757H57.5399L54.2031 11.2171Z\"\n          fill=\"white\"\n        />\n      </g>\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_257_433\"\n          x1=\"10\"\n          y1=\"0.5\"\n          x2=\"10\"\n          y2=\"30.3929\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.343851\" stop-color=\"#43F574\" />\n          <stop offset=\"1\" stop-color=\"#2F0461\" />\n        </linearGradient>\n        <linearGradient\n          id=\"paint1_linear_257_433\"\n          x1=\"13\"\n          y1=\"32.5\"\n          x2=\"26.9531\"\n          y2=\"12.6162\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#2F0461\" />\n          <stop offset=\"0.730907\" stop-color=\"#43F574\" />\n        </linearGradient>\n        <linearGradient\n          id=\"paint2_linear_257_433\"\n          x1=\"20\"\n          y1=\"0.5\"\n          x2=\"20\"\n          y2=\"30.3929\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.353222\" stop-color=\"#43F574\" />\n          <stop offset=\"1\" stop-color=\"#2F0461\" />\n        </linearGradient>\n        <linearGradient\n          id=\"paint3_linear_257_433\"\n          x1=\"12\"\n          y1=\"30\"\n          x2=\"19\"\n          y2=\"14\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#2F0461\" />\n          <stop offset=\"0.964704\" stop-color=\"#43F574\" />\n        </linearGradient>\n        <clipPath id=\"clip0_257_433\">\n          <rect y=\"0.5\" width=\"30\" height=\"30\" rx=\"15\" fill=\"white\" />\n        </clipPath>\n        <clipPath id=\"clip1_257_433\">\n          <rect\n            width=\"53\"\n            height=\"18\"\n            fill=\"white\"\n            transform=\"translate(32 6.5)\"\n          />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n};\n\n/// CONSTANTS\n\nconst ZKSYNC_MAINNET = 324;\nconst ZKSYNC_TESTNET = 280;\nconst ZKSYNC_MAINNET_CHAIN_ID_HEX = \"0x144\";\nconst ZKSYNC_TESTNET_CHAIN_ID_HEX = \"0x118\";\nconst ADDRESS_ZERO = \"0x0000000000000000000000000000000000000000\";\nconst USD_DECIMALS = 30;\n\n// CONFIG\n\nconst CONFIG = {\n  [ZKSYNC_MAINNET]: {\n    CHAIN_ID: ZKSYNC_MAINNET,\n    GMX_PRICE_ORACLE_URL: \"https://arbitrum-api.gmxinfra.io\",\n    GMX_ROUTER_ADDRESS: \"0x7C68C7866A64FA2160F78EEaE12217FFbf871fa8\",\n    ETH_ORDERVAULT_ADDRESS: \"0x31eF83a530Fde1B38EE9A18093A333D8Bbbc40D5\",\n    WETH_TOKEN_ADDRESS: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n    GMX_MARKET_TOKEN_ADDRESS: \"0x70d95587d40A2caf56bd97485aB3Eec10Bee6336\",\n    SWAP_PATH: [\"0x70d95587d40A2caf56bd97485aB3Eec10Bee6336\"],\n    NETWORK_INFO: {\n      blockExplorerUrls: [\"https://explorer.zksync.io/\"],\n      iconUrls: [\"https://zksync.io/favicon-32x32.png\"],\n      rpcUrls: [\"https://mainnet.era.zksync.io\"],\n      chainId: ZKSYNC_MAINNET_CHAIN_ID_HEX,\n      chainName: \"zkSync Era Mainnet\",\n      nativeCurrency: {\n        name: \"ETH\",\n        symbol: \"ETH\",\n        decimals: 18,\n      },\n    },\n  },\n  [ZKSYNC_TESTNET]: {\n    CHAIN_ID: ZKSYNC_TESTNET,\n    GMX_PRICE_ORACLE_URL:\n      \"https://gmx-synthetics-api-arb-goerli-4vgxk.ondigitalocean.app\",\n    GMX_ROUTER_ADDRESS: \"0xFE98518C9c8F1c5a216E999816c2dE3199f295D2\",\n    ETH_ORDERVAULT_ADDRESS: \"0x82aFd2590814a7Ce3d7ea6b63F80481F8b227bA9\",\n    WETH_TOKEN_ADDRESS: \"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3\",\n    GMX_MARKET_TOKEN_ADDRESS: \"0x1529876A9348D61C6c4a3EEe1fe6CbF1117Ca315\",\n    SWAP_PATH: [\n      \"0x72349b00768601D9598084220224948CE5b6Ebdd\",\n      \"0xbdf85AaF3c63CcE42ee2f18d75f9fd8Aca4D5923\",\n      \"0x1012DAa9ee5C90136FD3e105b63094Aa81a0A64C\",\n    ],\n    NETWORK_INFO: {\n      blockExplorerUrls: [\"https://goerli.explorer.zksync.io/\"],\n      iconUrls: [\"https://zksync.io/favicon-32x32.png\"],\n      rpcUrls: [\"https://testnet.era.zksync.dev\"],\n      chainId: ZKSYNC_TESTNET_CHAIN_ID_HEX,\n      chainName: \"zkSync Era Testnet\",\n      nativeCurrency: {\n        name: \"ETH\",\n        symbol: \"ETH\",\n        decimals: 18,\n      },\n    },\n  },\n};\n\n// TOKENS\n\nconst TOKENS = {\n  [ZKSYNC_MAINNET]: [\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x0000000000000000000000000000000000000000\",\n      isNative: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\n      isTrading: \"PYTH:ETHUSD\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Wrapped Bitcoin\",\n      symbol: \"WBTC\",\n      decimals: 8,\n      address: \"0xBBeB516fb02a01611cBBE0453Fe3c580D7281011\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/7598/small/wrapped_bitcoin_wbtc.png?1548822744\",\n      isTrading: \"PYTH:BTCUSD\",\n    },\n  ],\n  [ZKSYNC_TESTNET]: [\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x0000000000000000000000000000000000000000\",\n      isNative: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      zkSyncUrl: \"https://assets.zksync.io/era/favicon.svg\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n      isTrading: \"PYTH:ETHUSD\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xbb30022950dc346136b4286628C1a6bcf93C1AAb\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      zkSyncUrl: \"https://assets.zksync.io/era/favicon.svg\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Wrapped Bitcoin\",\n      symbol: \"WBTC\",\n      decimals: 8,\n      address: \"0x5796F3E984eCF25C2Da3601D27830fA6131Cfded\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      imageUrl:\n        \"https://assets.coingecko.com/coins/images/7598/small/wrapped_bitcoin_wbtc.png?1548822744\",\n      isTrading: \"PYTH:BTCUSD\",\n    },\n  ],\n};\n\n// CONTRACTS\n\nconst CONTRACTS = {\n  [ZKSYNC_MAINNET]: {\n    Reader: \"0xb46d1A66941a755649c240D447598BB43F1c3514\",\n    PythReader: \"0x439B5A74C44E33f2C95fe77F8330496cC1a4a676\",\n    Vault: \"0xBC918775C20959332c503d51a9251C2405d9cF88\",\n    PositionRouter: \"0x33d339e9922cc296Cbc52BB8BEd1165ab628Bc06\",\n    NativeToken: \"0x5AEa5775959fBC2557Cc8789bC1bf90A239D9a91\",\n    ZlpManager: \"0x76FC5695b0D310151f9c9363C537a7456Cb114b5\",\n    Zlp: \"0x9e5a36eE37925325FEf6FF62171Cd675c0F9fDc2\",\n    RewardTracker: \"0x2dF5B3bdDf75bF4aE6dd825092f67372f66551cb\",\n  },\n  [ZKSYNC_TESTNET]: {\n    Reader: \"0x45F4d76009D8C89bA688329145E89364300b19bb\",\n    PythReader: \"0x84476f650B7C5e06cDa8E7eCc85aC3ccd6fDa8A1\",\n    Vault: \"0xaB597d260C868770867A2d1dBb960075C291aF7F\",\n    PositionRouter: \"0xbf46e3D1005f19c3428EC132ebDEc5975CB0DF69\",\n    NativeToken: \"0xc023d6bAE4DbA3E2cB0575be2A5C2Ba6571DFfcf\",\n    ZlpManager: \"0x0c22158E9D537b2ad8E2F7BA177c4ff06c7B88E8\",\n    Zlp: \"0x58E0E14E4E5F909C07b39CaE8C2d226550e99Ba1\",\n    RewardTracker: \"0x99F3251beF877EF2a11c29b943534940f074493d\",\n  },\n};\n\n// PYTH\n\nconst PYTH_CONFIG = {\n  [ZKSYNC_MAINNET]: {\n    PythEndpoint: \"https://hermes.pyth.network\",\n    EthPriceFeedId:\n      \"0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace\",\n    UsdcPriceFeedId:\n      \"0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a\",\n    BtcPriceFeedId:\n      \"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43\",\n  },\n  [ZKSYNC_TESTNET]: {\n    PythEndpoint: \"https://hermes-beta.pyth.network\",\n    EthPriceFeedId:\n      \"0xca80ba6dc32e08d06f1aa886011eed1d77c77be9eb761cc10d72b7d0a2fd57a6\",\n    UsdcPriceFeedId:\n      \"0x41f3625971ca2ed2263e78573fe5ce23e13d2558ed3f2e47ab0f84fb9e7ae722\",\n    BtcPriceFeedId:\n      \"0xf9c0172ba10dfa4d19088d94f5bf61d3b54d5bd7483a322a982e1373ee8ea31b\",\n  },\n};\n\n/// UTILS\n\nfunction formatUsd(num) {\n  return num / Math.pow(10, 12);\n}\n\nfunction getTokens(chainId) {\n  if (!chainId) chainId = ZKSYNC_MAINNET;\n  return TOKENS[chainId];\n}\n\nfunction getContract(chainId, name) {\n  if (!chainId) chainId = ZKSYNC_MAINNET;\n  return CONTRACTS[chainId][name];\n}\n\nfunction getPythConfig(chainId, name) {\n  if (!chainId) chainId = ZKSYNC_MAINNET;\n  return PYTH_CONFIG[chainId][name];\n}\n\n// calculate price with slippage of 0.5%\nfunction calculatePriceWithSlippage() {\n  if (isLong) {\n    return ethers.BigNumber.from(maxPrice).mul(1010).div(1000);\n  } else {\n    return ethers.BigNumber.from(minPrice).mul(990).div(1000);\n  }\n}\n\nfunction getPriceIdsConfig(chainId) {\n  const ethPriceFeedId = getPythConfig(chainId, \"EthPriceFeedId\");\n  const usdcPriceFeedId = getPythConfig(chainId, \"UsdcPriceFeedId\");\n  const btcPriceFeedId = getPythConfig(chainId, \"BtcPriceFeedId\");\n  return [ethPriceFeedId, usdcPriceFeedId, btcPriceFeedId];\n}\n\nfunction convertToDecimals(rawPrice, conf, expo, targetDecimals) {\n  const priceDecimals = expo.mul(-1);\n  let powerOfTen;\n\n  if (priceDecimals.lte(targetDecimals)) {\n    powerOfTen = ethers.BigNumber.from(10).pow(\n      priceDecimals.add(targetDecimals)\n    );\n  } else {\n    powerOfTen = ethers.BigNumber.from(10).pow(\n      priceDecimals.sub(targetDecimals)\n    );\n  }\n\n  return [rawPrice.mul(powerOfTen), conf.mul(powerOfTen)];\n}\n\nfunction bigNumberifyStruct(priceStruct) {\n  const conf = ethers.BigNumber.from(priceStruct.conf);\n  const expo = ethers.BigNumber.from(priceStruct.expo);\n  const price = ethers.BigNumber.from(priceStruct.price);\n\n  return [conf, expo, price];\n}\n\nfunction bigNumberify(n) {\n  try {\n    return ethers.BigNumber.from(n);\n  } catch (e) {\n    console.log(\"bigNumberify error\", e);\n    return undefined;\n  }\n}\n\nfunction expandDecimals(n, decimals) {\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\n}\n\nfunction getTokenAddress(token, nativeTokenAddress) {\n  if (token.address === AddressZero) {\n    return nativeTokenAddress;\n  }\n  return token.address;\n}\n\n// NUMBERS\n\nfunction limitDecimals(amount, maxDecimals) {\n  let amountStr = amount.toString();\n  if (maxDecimals === undefined) {\n    return amountStr;\n  }\n  if (maxDecimals === 0) {\n    return amountStr.split(\".\")[0];\n  }\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    let decimals = amountStr.length - dotIndex - 1;\n    if (decimals > maxDecimals) {\n      amountStr = amountStr.substr(\n        0,\n        amountStr.length - (decimals - maxDecimals)\n      );\n    }\n  }\n  return amountStr;\n}\n\nfunction padDecimals(amount, minDecimals) {\n  let amountStr = amount.toString();\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    const decimals = amountStr.length - dotIndex - 1;\n    if (decimals < minDecimals) {\n      amountStr = amountStr.padEnd(\n        amountStr.length + (minDecimals - decimals),\n        \"0\"\n      );\n    }\n  } else {\n    amountStr = amountStr + \".0000\";\n  }\n  return amountStr;\n}\n\nfunction numberWithCommas(x) {\n  if (!x) {\n    return \"...\";\n  }\n\n  const parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\nfunction trimZeroDecimals(amount) {\n  if (parseFloat(amount) === parseInt(amount)) {\n    return parseInt(amount).toString();\n  }\n  return amount;\n}\n\nfunction formatAmountFree(amount, tokenDecimals, displayDecimals) {\n  if (!amount) {\n    return \"\";\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  return trimZeroDecimals(amountStr);\n}\n\nfunction formatAmount(\n  amount,\n  tokenDecimals,\n  displayDecimals,\n  useCommas,\n  defaultValue\n) {\n  if (!defaultValue) {\n    defaultValue = \"...\";\n  }\n  if (amount === undefined || amount.toString().length === 0) {\n    return defaultValue;\n  }\n  if (displayDecimals === undefined) {\n    displayDecimals = 4;\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  if (displayDecimals !== 0) {\n    amountStr = padDecimals(amountStr, displayDecimals);\n  }\n  if (useCommas) {\n    return numberWithCommas(amountStr);\n  }\n  return amountStr;\n}\n\n// LEGACY\n\nfunction usePythPrices(pricesStruct, tokens) {\n  let minPrices = [];\n  let maxPrices = [];\n  let indexPrices = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const [conf, expo, price] = bigNumberifyStruct(pricesStruct[i].price);\n    if (price.lt(0) || expo.gt(0) || expo.lt(-255)) {\n      console.log(\"invalid priceStruct\");\n    }\n\n    const DECIMALS = 14;\n    let [convertedPrice, convertedConf] = convertToDecimals(\n      price,\n      conf,\n      expo,\n      DECIMALS\n    );\n\n    const maxPrice = convertedPrice.add(convertedConf);\n    const minPrice = convertedPrice.sub(convertedConf);\n\n    minPrices.push(minPrice);\n    maxPrices.push(maxPrice);\n    indexPrices[tokens[i].address] = { minPrice, maxPrice };\n  }\n\n  return { minPrices, maxPrices, indexPrices };\n}\n\nfunction getSpread(p) {\n  const diff = p.maxPrice.sub(p.minPrice);\n\n  return diff.mul(expandDecimals(1, 30)).div(p.maxPrice.add(p.minPrice).div(2));\n}\n\nfunction useInfoTokens(tokens, tokenBalances, indexPrices, vaultTokenInfo) {\n  return {\n    infoTokens: getInfoTokens(\n      tokens,\n      tokenBalances,\n      vaultTokenInfo,\n      indexPrices\n    ),\n  };\n}\n\nfunction getInfoTokens(tokens, tokenBalances, vaultTokenInfo, indexPrices) {\n  const vaultPropsLength = 15;\n  const infoTokens = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(tokens[i]));\n\n    if (vaultTokenInfo && indexPrices) {\n      token.balance = tokenBalances[i];\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\n      token.spread = getSpread({\n        minPrice: token.minPrice,\n        maxPrice: token.maxPrice,\n      });\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\n\n      token.contractMinPrice = token.minPrice;\n      token.contractMaxPrice = token.maxPrice;\n\n      token.maxAvailableShort = bigNumberify(0);\n\n      token.hasMaxAvailableShort = false;\n      if (token.maxGlobalShortSize.gt(0)) {\n        token.hasMaxAvailableShort = true;\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(\n            token.globalShortSize\n          );\n        }\n      } else {\n        token.maxAvailableShort = token.poolAmount.sub(token.reservedAmount);\n      }\n\n      if (token.maxAvailableShort && token.maxAvailableShort.gt(0)) {\n        token.maxAvailableShort = token.maxAvailableShort.mul(95).div(100);\n      }\n\n      if (token.maxUsdgAmount.eq(0)) {\n        token.maxUsdgAmount = expandDecimals(200 * 1000 * 1000, 18);\n      }\n\n      token.availableUsd = token.isStable\n        ? token.poolAmount\n            .mul(token.minPrice)\n            .div(expandDecimals(1, token.decimals))\n        : token.availableAmount\n            .mul(token.minPrice)\n            .div(expandDecimals(1, token.decimals));\n\n      token.maxAvailableLong = bigNumberify(0);\n      token.hasMaxAvailableLong = false;\n      if (token.maxGlobalLongSize.gt(0)) {\n        token.hasMaxAvailableLong = true;\n\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\n          const remainingLongSize = token.maxGlobalLongSize.sub(\n            token.guaranteedUsd\n          );\n\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd)\n            ? remainingLongSize\n            : token.availableUsd;\n        }\n      } else {\n        token.maxAvailableLong = token.availableUsd;\n      }\n\n      if (token.maxAvailableLong && token.maxAvailableLong.gt(0)) {\n        token.maxAvailableLong = token.maxAvailableLong.mul(95).div(100);\n      }\n\n      token.maxLongCapacity =\n        token.maxGlobalLongSize.gt(0) &&\n        token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\n          ? token.maxGlobalLongSize\n          : token.availableUsd.add(token.guaranteedUsd);\n\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\n      token.managedAmount = token.managedUsd\n        .mul(expandDecimals(1, token.decimals))\n        .div(token.minPrice);\n\n      // setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  return infoTokens;\n}\n\n// STATE\n\nState.init({\n  payAmount: \"\",\n  payTokenData: undefined,\n  isLong: true,\n  sender: undefined,\n  zlpBalance: undefined,\n  network: undefined,\n  chainId: undefined,\n  showSettings: false,\n  tokenBalances: undefined,\n  vaultTokenInfo: undefined,\n  zlpPrice: undefined,\n  fromToken: undefined,\n});\nconst {\n  payAmount,\n  payTokenData,\n  isLong,\n  sender,\n  zlpBalance,\n  network,\n  chainId,\n  showSettings,\n  tokenBalances,\n  vaultTokenInfo,\n  zlpPrice,\n  fromToken,\n} = state;\n\n// RECONNECT TO WALLET\n\nif (sender === undefined && Ethers.provider()) {\n  Ethers.provider()\n    .send(\"eth_requestAccounts\", [])\n    .then((accounts) => {\n      if (accounts.length) {\n        // save sender address to the state\n        State.update({ sender: accounts[0] });\n      }\n    });\n}\n\n// FETCH ABI\n\nconst readerAbiResponse = fetch(\n  \"https://gist.githubusercontent.com/af4n/e1b6c199110dd1885107cadb02563fc0/raw/c809ee9754a20bc4b6542cfd27ef54f278bb87e5/reader.json\"\n);\nconst pythReaderAbiResponse = fetch(\n  \"https://gist.githubusercontent.com/af4n/1d21d7de80ad485f10c221d4e5969e71/raw/5a5124e451e6876be99fb55445942b838647bc20/pythReader.json\"\n);\nconst erc20AbiResponse = fetch(\n  \"https://gist.githubusercontent.com/af4n/85f257a83b79061c3b6ba7f9797b02d9/raw/7a8c2264d55c791c21327f43e82fcfbaddfb325d/erc20.json\"\n);\nconst rewardTrackerAbiResponse = fetch(\n  \"https://gist.githubusercontent.com/af4n/e463be8c84945782973ca8c5648584b6/raw/b322e147975e428a70c9c9e616de4a3b3fba7244/rewardTracker.json\"\n);\n\nif (\n  !readerAbiResponse.ok ||\n  !pythReaderAbiResponse.ok ||\n  !erc20AbiResponse.ok ||\n  !rewardTrackerAbiResponse.ok\n)\n  \"Loading ABI...\";\n\nconst readerAbi = readerAbiResponse.body;\nconst pythReaderAbi = pythReaderAbiResponse.body;\nconst erc20Abi = erc20AbiResponse.body;\nconst rewardTrackerAbi = rewardTrackerAbiResponse.body;\n\n// DATA\n\nconst readerAddress = getContract(chainId, \"Reader\");\nconst pythReaderAddress = getContract(chainId, \"PythReader\");\nconst vaultAddress = getContract(chainId, \"Vault\");\nconst positionRouterAddress = getContract(chainId, \"PositionRouter\");\nconst nativeTokenAddress = getContract(chainId, \"NativeToken\");\nconst zlpManagerAddress = getContract(chainId, \"ZlpManager\");\nconst zlpAddress = getContract(chainId, \"Zlp\");\nconst rewardTrackerAddress = getContract(chainId, \"RewardTracker\");\n\nconst tokens = getTokens(chainId);\nconst tokenAddresses = tokens.map((token) => token.address);\nconst whitelistedTokenAddresses = tokens.map((token) =>\n  getTokenAddress(token, nativeTokenAddress.value)\n);\n\n// Pyth price feed\n\nconst priceIdsConfig = getPriceIdsConfig(chainId);\n\nconst idsParam = priceIdsConfig.map((id) => `ids[]=${id}`).join(\"&\");\n\nconst pricesStruct = fetch(\n  `${getPythConfig(chainId, \"PythEndpoint\")}/api/latest_price_feeds?${idsParam}`\n);\n\nif (!pricesStruct.ok) {\n  return \"Loading Price...\";\n}\n\nconst { minPrices, maxPrices, indexPrices } = usePythPrices(\n  pricesStruct.body,\n  tokens\n);\n\n// LOAD DATA\n\nconst readerContract = new ethers.Contract(\n  readerAddress,\n  readerAbi,\n  Ethers.provider() && Ethers.provider().getSigner()\n);\n\nreaderContract.getTokenBalances(sender, tokenAddresses).then((result) => {\n  State.update({ tokenBalances: result });\n});\n\nconst rewardTrackerContract = new ethers.Contract(\n  rewardTrackerAddress,\n  rewardTrackerAbi,\n  Ethers.provider() && Ethers.provider().getSigner()\n);\n\nrewardTrackerContract.stakedAmounts(sender).then((result) => {\n  State.update({ zlpBalance: result });\n});\n\nconst pythReaderContract = new ethers.Contract(\n  pythReaderAddress,\n  pythReaderAbi,\n  Ethers.provider() && Ethers.provider().getSigner()\n);\n\npythReaderContract\n  .getVaultTokenInfoV5(\n    vaultAddress,\n    positionRouterAddress,\n    nativeTokenAddress,\n    expandDecimals(1, 18),\n    whitelistedTokenAddresses,\n    minPrices,\n    maxPrices\n  )\n  .then((result) => {\n    State.update({ vaultTokenInfo: result });\n  });\n\npythReaderContract\n  .getPrice(zlpManagerAddress, whitelistedTokenAddresses, maxPrices)\n  .then((result) => {\n    State.update({ zlpPrice: result });\n  });\n\nconst { infoTokens } = useInfoTokens(\n  tokens,\n  tokenBalances,\n  indexPrices,\n  vaultTokenInfo\n);\nconsole.log(\"infoTokens\", infoTokens);\nif (infoTokens[ADDRESS_ZERO].balance && !fromToken) {\n  State.update({ fromToken: infoTokens[ADDRESS_ZERO] });\n}\nconst tokensInfo = Object.values(infoTokens);\n\nconst { maxPrice, minPrice, tokenSymbol } = payTokenData;\n\nconst currentConfig = CONFIG[chainId] || CONFIG[ZKSYNC_TESTNET];\n\nconst entryPrice = payTokenData && formatUsd(isLong ? maxPrice : minPrice);\nconst entryPriceDisplay =\n  entryPrice &&\n  \"$\" +\n    entryPrice.toLocaleString(\"en-US\", {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    });\n\nconst payValue = payAmount && payAmount * entryPrice;\nconst payValueDisplay =\n  payValue > 0 &&\n  \": $\" +\n    payValue.toLocaleString(\"en-US\", {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    });\n\nconst receiveAmount = payAmount && payAmount * 1;\n\n// FETCH DATA\nconst gmxPriceOracleResponse = fetch(\n  currentConfig.GMX_PRICE_ORACLE_URL + \"/prices/tickers\"\n);\nif (!gmxPriceOracleResponse.ok) {\n  console.log(\"Error fetching ETH price.\");\n}\n// const gmxPriceData = gmxPriceOracleResponse.body;\n// const ethTokenData = gmxPriceData.find((item) => item.tokenSymbol === \"ETH\");\nState.update({\n  payTokenData: ethTokenData,\n});\n\nconst primaryButtonText =\n  chainId === \"unsupported\"\n    ? \"Switch network\"\n    : payAmount <= 0\n    ? \"Enter an amount\"\n    : Number(payAmount) >\n      Number(formatAmountFree(fromToken.balance, fromToken.decimals, 18))\n    ? `Insufficient ${fromToken.symbol} balance`\n    : isLong\n    ? \"Long ETH\"\n    : \"Short ETH\";\nconst primaryButtonDisabled =\n  chainId === \"unsupported\"\n    ? false\n    : Number(payAmount) >\n        Number(formatAmountFree(fromToken.balance, fromToken.decimals, 18)) ||\n      payAmount <= 0;\n\nif (sender) {\n  Ethers.provider()\n    .getNetwork()\n    .then((network) => {\n      if (network.chainId === ZKSYNC_MAINNET) {\n        State.update({ chainId: network.chainId });\n      } else if (network.chainId === ZKSYNC_TESTNET) {\n        State.update({ chainId: network.chainId });\n      } else {\n        State.update({ chainId: \"unsupported\" });\n      }\n    });\n}\n\n/// FUNCTIONS\nfunction multicall(calls, value) {\n  const gmxRouterContract = new ethers.Contract(\n    currentConfig.GMX_ROUTER_ADDRESS,\n    GMX_ROUTER_ABI,\n    Ethers.provider().getSigner()\n  );\n  const encodedCalls = calls.map((call) =>\n    gmxRouterContract.interface.encodeFunctionData(call.method, call.params)\n  );\n  return gmxRouterContract[\"multicall\"](encodedCalls, { value: value });\n}\n\n/// HANDLERS\n\nfunction handleClickSubmitOrder() {\n  const sizeDeltaUsd = 1;\n\n  const calls = [\n    {\n      method: \"sendWnt\",\n      params: [\n        currentConfig.ETH_ORDERVAULT_ADDRESS,\n        ethers.utils.parseUnits(payAmount, 18),\n      ],\n    },\n    {\n      method: \"createOrder\",\n      params: [\n        {\n          addresses: {\n            receiver: sender,\n            initialCollateralToken: currentConfig.WETH_TOKEN_ADDRESS,\n            callbackContract: ADDRESS_ZERO,\n            market: currentConfig.GMX_MARKET_TOKEN_ADDRESS,\n            swapPath: currentConfig.SWAP_PATH,\n            uiFeeReceiver: ADDRESS_ZERO,\n          },\n          numbers: {\n            sizeDeltaUsd: sizeDeltaUsd,\n            initialCollateralDeltaAmount: {\n              type: \"BigNumber\",\n              hex: \"0x00\",\n            },\n            triggerPrice: {\n              type: \"BigNumber\",\n              hex: \"0x00\",\n            },\n            acceptablePrice: {\n              type: \"BigNumber\",\n              hex: \"0x00\",\n            },\n            executionFee: {\n              type: \"BigNumber\",\n              hex: \"0x02ee5547f09000\",\n            },\n            callbackGasLimit: {\n              type: \"BigNumber\",\n              hex: \"0x00\",\n            },\n            minOutputAmount: {\n              type: \"BigNumber\",\n              hex: \"0x00\",\n            },\n          },\n          orderType: 2,\n          decreasePositionSwapType: 0,\n          isLong: isLong,\n          shouldUnwrapNativeToken: true,\n          referralCode:\n            \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n        },\n      ],\n    },\n  ];\n\n  multicall(calls, ethers.utils.parseUnits(payAmount, 18));\n}\n\nfunction setFromToken(address) {\n  State.update({\n    fromToken: infoTokens[address],\n  });\n}\n\nfunction handleClickMax() {\n  State.update({\n    payAmount: formatAmountFree(fromToken.balance, fromToken.decimals, 18),\n  });\n}\n\nfunction handleClickSwitchNetwork(chainId) {\n  const chainIdHex = CONFIG[chainId].NETWORK_INFO.chainId;\n  try {\n    Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: chainIdHex }]);\n  } catch (e) {\n    console.log(\"error switching network\", e);\n  }\n  try {\n    Ethers.send(\"wallet_addEthereumChain\", [CONFIG[chainId].NETWORK_INFO]);\n  } catch (e) {\n    console.log(\"error adding new network\", e);\n  }\n}\n\nfunction handleChangePayAmount(e) {\n  if (e.target.value === \".\" && !payAmount) {\n    State.update({\n      payAmount: \"0.\",\n    });\n  }\n  if (isNaN(e.target.value)) {\n    return;\n  }\n\n  State.update({\n    payAmount: e.target.value,\n  });\n}\n\nreturn (\n  <DaisyUIWrapper>\n    <div class=\"card max-w-2xl mx-auto bg-gray-900 text-white\">\n      <div class=\"px-4 pt-4\">\n        <div class=\"relative flex justify-center\">\n          <LogoZkEra />\n          {chainId && (\n            <button\n              class=\"btn btn-xs btn-outline absolute right-0 top-0 text-white hover:bg-gray-900\"\n              style={{ \"border-color\": \"#43f574\" }}\n              onClick={() => {\n                State.update({ showSettings: !state.showSettings });\n              }}\n            >\n              {chainId === \"unsupported\"\n                ? \"Unsupported network\"\n                : CONFIG[chainId].NETWORK_INFO.chainName}\n            </button>\n          )}\n\n          {/* settings menu */}\n          {state.showSettings && (\n            <div class=\"absolute right-0 top-8 bg-gray-900 rounded p-3\">\n              <div class=\"flex flex-col gap-2\">\n                <button\n                  class={`btn btn-xs btn-outline${\n                    chainId === ZKSYNC_MAINNET ? \" pointer-events-none\" : \"\"\n                  }`}\n                  onClick={() => {\n                    chainId === ZKSYNC_MAINNET\n                      ? State.update({ showSettings: false })\n                      : handleClickSwitchNetwork(ZKSYNC_MAINNET);\n                  }}\n                >\n                  {CONFIG[ZKSYNC_MAINNET].NETWORK_INFO.chainName}\n                </button>\n                <button\n                  class={`btn btn-xs btn-outline${\n                    chainId === ZKSYNC_TESTNET ? \" pointer-events-none\" : \"\"\n                  }`}\n                  onClick={() => {\n                    chainId === ZKSYNC_TESTNET\n                      ? State.update({ showSettings: false })\n                      : handleClickSwitchNetwork(ZKSYNC_TESTNET);\n                  }}\n                >\n                  {CONFIG[ZKSYNC_TESTNET].NETWORK_INFO.chainName}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <label class=\"label\">\n          <span class=\"label-text text-lg text-white\">Buy ZLP</span>\n        </label>\n\n        <div class=\"bg-gray-800 rounded p-2 mb-2\">\n          <label class=\"label pl-4\">\n            <span class=\"label-text text-gray-400\">Pay{payValueDisplay}</span>\n            <span class=\"label-text text-gray-400\">\n              Balance:\n              <span class=\"text-white\">\n                {formatAmount(fromToken.balance, fromToken.decimals, 4, true)}\n              </span>\n            </span>\n          </label>\n          <div class=\"flex\">\n            <input\n              class=\"input w-full bg-gray-800 text-2xl focus:outline-none\"\n              onChange={(e) => handleChangePayAmount(e)}\n              value={payAmount}\n              placeholder=\"0.0\"\n            />\n            <div class=\"flex items-center space-x-1\">\n              <button\n                style={{ background: \"#43f574\" }}\n                class=\"btn btn-sm border-none font-normal rounded-4 px-2 mx-1 hover:bg-green-600 focus:bg-green-600 text-black\"\n                onClick={handleClickMax}\n              >\n                MAX\n              </button>\n              <IconETH />\n              <select\n                onChange={(e) => {\n                  setFromToken(e.target.value);\n                }}\n                class=\"select-ghost bg-gray-800 text-2xl\"\n              >\n                {tokensInfo.map((token) => (\n                  <option value={token.address}>{token.symbol}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"bg-gray-800 rounded p-2\">\n          <label class=\"label pl-4 pr-2\">\n            <span class=\"label-text text-gray-400\">Receive</span>\n            <span class=\"label-text\">\n              <span class=\"label-text text-gray-400\">\n                Balance:\n                <span class=\"text-white\">\n                  {formatAmount(zlpBalance, 18, 4, true)}\n                </span>\n              </span>\n            </span>\n          </label>\n          <div class=\"flex\">\n            <input\n              class=\"input w-full bg-gray-800 text-2xl focus:outline-none\"\n              value={receiveAmount && `~${receiveAmount}`}\n              placeholder=\"0.0\"\n            />\n            <div class=\"flex items-center space-x-1 \">\n              <IconZLP />\n              <span class=\"text-2xl pl-1 pr-2\">ZLP</span>\n            </div>\n          </div>\n        </div>\n\n        <label class=\"label pt-3\">\n          <span class=\"label-text text-gray-400\">Fees</span>\n          <span class=\"label-text\">-</span>\n        </label>\n      </div>\n\n      <div class=\"px-4 pb-4\">\n        {sender ? (\n          <button\n            style={{ background: \"#43f574\" }}\n            class={`btn w-full hover:bg-green-600 focus:bg-green-600 mt-2 text-black ${\n              primaryButtonDisabled && \"cursor-not-allowed\"\n            }`}\n            onClick={\n              chainId === \"unsupported\"\n                ? () => handleClickSwitchNetwork(ZKSYNC_TESTNET)\n                : !primaryButtonDisabled && handleClickSubmitOrder\n            }\n          >\n            {primaryButtonText}\n          </button>\n        ) : (\n          <button\n            disabled={sender && payAmount <= 0}\n            style={{ background: \"#43f574\" }}\n            class=\"relative btn w-full hover:bg-green-600 focus:bg-green-600 mt-2 text-black\"\n          >\n            Connect Wallet\n            <Web3Connect\n              className=\"opacity-0 absolute w-full h-full\"\n              connectLabel=\"Connect with Web3\"\n            />\n          </button>\n        )}\n      </div>\n    </div>\n  </DaisyUIWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/zkEra-buy-zlp", "fact_widget_deployments_id": "05fdbd4d32908327e8c387d567b80649", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}