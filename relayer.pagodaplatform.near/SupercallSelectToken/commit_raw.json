{"tx_hash": "EQKaN9UQXijjukqAg9st8bhU9B3S9AykPUtbscATTXcx", "action_id_social": "5ZNz1Ld7xhkec5fgwUgfTiCXMess7YHRWcS8dTDjC2xA-0-widget", "block_id": 108245396, "block_timestamp": "2023-12-18T11:04:11.442Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "SupercallSelectToken", "source_code": "State.init({\n  selectedToken: 0,\n});\n\nconst signer = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (ethers !== undefined && signer) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n\n        const tokenList = fetch(\n          `https://raw.githubusercontent.com/SainyTK/token-list/main/src/tokens/${chainIdData.chainId}.json`\n        );\n\n        if (!tokenList.error) {\n          State.update({\n            tokenList: JSON.parse(tokenList.body),\n            isError: false,\n          });\n        } else {\n          State.update({ tokenList: [], isError: true });\n        }\n      }\n    });\n}\n\nif (!signer) {\n  return <Web3Connect />;\n}\n\nif (state.isError) {\n  return <></>;\n}\n\nconst selectedToken = state.tokenList[state.selectedToken];\n\nfunction handleSelect(index) {\n  State.update({ selectedToken: index });\n\n  if (typeof props.onChange === \"function\") {\n    props.onChange(state.tokenList[state.selectedToken]);\n  }\n}\n\nreturn (\n  <div style={{ width: \"292px\" }}>\n    <div class=\"dropdown\" style={{ width: \"292px\" }}>\n      <button\n        class=\"btn dropdown-toggle border\"\n        type=\"button\"\n        id=\"dropdownMenuButton1\"\n        data-bs-toggle=\"dropdown\"\n        aria-expanded=\"false\"\n        style={{\n          width: \"292px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        {selectedToken ? (\n          <span>\n            <img\n              src={selectedToken.logoURI}\n              width={24}\n              height={24}\n              className=\"rounded-full mx-1\"\n            />\n            <span>{selectedToken.symbol}</span>\n          </span>\n        ) : (\n          <span>Select a token</span>\n        )}\n      </button>\n\n      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n        {state.tokenList &&\n          state.tokenList.map((token, index) => (\n            <li key={index} onClick={() => handleSelect(index)}>\n              <div class=\"dropdown-item\" href=\"#\">\n                <img\n                  src={token.logoURI}\n                  width={24}\n                  height={24}\n                  className=\"rounded-full\"\n                />\n                <span>{token.symbol}</span>\n              </div>\n            </li>\n          ))}\n      </ul>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/SupercallSelectToken", "fact_widget_deployments_id": "d2e7f4c6d818bb0932c6274eb10ada36", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}