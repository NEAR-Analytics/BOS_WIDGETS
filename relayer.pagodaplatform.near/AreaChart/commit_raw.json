{"tx_hash": "Avk8A6LPcSYK5mPAaESmFxWMwa78fMupDwZHnuDt31Z5", "action_id_social": "8GJSMTccucueMT9ENSAUEqNVx13daumDicGP2xob1evM-0-widget", "block_id": 99409176, "block_timestamp": "2023-08-22T16:48:14.699Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "AreaChart", "source_code": "const {\n  xColumn,\n  yColumn,\n  data,\n  legendMax,\n  legendMin,\n  label,\n  isXDate,\n  strokeColumn,\n  title,\n} = props;\nconst code = `\n<!-- observerable plot -->\n<div id=\"myplot\" style=\"width: 100%; display: flex; align-items: center; justify-content: center;\"></div>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js\" integrity=\"sha512-M7nHCiNUOwFt6Us3r8alutZLm9qMt4s9951uo8jqO4UwJ1hziseL6O3ndFyigx6+LREfZqnhHxYjKRJ8ZQ69DQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\n<script type=\"module\">\n\nimport * as Plot from \"https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm\";\n\nconst data = ${JSON.stringify(data ?? [])};\nconst isMobile = window.innerWidth <= 450;\n\n// convert to date object\nif(1 == ${isXDate ? \"1\" : \"0\"}) {\n    data.forEach((x, index) => {\n        data[index]['${xColumn}'] = new Date(data[index]['${xColumn}']);\n    });\n}\n\nconst plot = Plot.plot({\n  width: 780,\n  x: {type: \"${isXDate ? \"date\" : \"band\"}\"},\n  ${isXDate ? `x: (d) => d3.utcDay(d.${xColumn}),` : \"\"}\n  y: {grid: true, label: \"${label}\"},\n  color: { legend: true },\n  style: {\n    fontSize: isMobile? undefined : 20,\n    maxWidth: isMobile? 'unset' : undefined,\n    paddingLeft: isMobile? 550 : undefined,\n    overflow: 'visible'\n  },\n  marks: [\n    Plot.ruleY([0]),\n    Plot.areaY(data, {x: \"${xColumn}\", y: \"${yColumn}\", fill: \"${strokeColumn}\"})\n  ]\n})\nconst div = document.querySelector(\"#myplot\");\ndiv.append(plot);\n\n</script>\n\n`;\n\nreturn (\n  <div className=\"w-100 d-flex flex-column align-items-center\">\n    {props.title && <strong>{props.title}</strong>}\n    <iframe\n      className=\"w-100\"\n      style={{ height: 500, width: 600 }}\n      srcDoc={code}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/AreaChart", "fact_widget_deployments_id": "f1539e4901d4e7f6abe57bf92138ae75", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}