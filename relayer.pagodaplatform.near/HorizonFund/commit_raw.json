{"tx_hash": "3qTJNy6hUamdfrHQNABcEo56nypKMSSUMKWWk2XexMaJ", "action_id_social": "FzdZkpiSLB55aFUF8cff3bwxbvqwoZas2NTAbMjqDMbT-0-widget", "block_id": 95525667, "block_timestamp": "2023-07-02T10:49:03.782Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "HorizonFund", "source_code": "const profileContract = \"0xd0373346638A6925Fb39f8c1a27918CBEB6F8F61\";\nconst projectContract = \"0x4a05A1963d899Fc10bDF9dD0690022f96620b0FC\";\n\nconst profileAbi = fetch(\n  \"https://aqua-fresh-crawdad-962.mypinata.cloud/ipfs/QmXgnL76jhGoXnR4SuAPULx2rRkQErf5iaVKeoXtyPh15H\"\n);\n\nconst projectAbi = fetch(\n  \"https://aqua-fresh-crawdad-962.mypinata.cloud/ipfs/Qmeq1Wfa8rq1yg3qNx73UyHcwohDaZjxXxE3wiFPbCRCTd\"\n);\n\nif (!projectAbi.ok && !profileAbi.ok) {\n  return \"Loading...\";\n}\n\nconst projectIface = new ethers.utils.Interface(projectAbi.body);\nconst profileIface = new ethers.utils.Interface(profileAbi.body);\n\nif (state.sender === undefined) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    State.update({ sender: accounts[0] });\n  }\n}\n\nif (state.projects === undefined && state.sender) {\n  const contract = new ethers.Contract(\n    projectContract,\n    projectAbi.body,\n    Ethers.provider().getSigner()\n  );\n  contract.getAllProjects().then((res) => {\n    State.update({ projects: res });\n    console.log(res);\n  });\n}\n\nif (state.profile === undefined && state.sender) {\n  const contract = new ethers.Contract(\n    profileContract,\n    profileAbi.body,\n    Ethers.provider().getSigner()\n  );\n  contract.getUser(0).then((res) => {\n    State.update({ profile: res });\n    console.log(res);\n  });\n}\n\nconst cssFont = fetch(\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\n).body;\nconst css = fetch(\n  \"https://nativonft.mypinata.cloud/ipfs/Qmdpe64Mm46fvWNVaCroSGa2JKgauUUUE5251Cx9nTKNrs\"\n).body;\n\nif (!cssFont || !css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n    ${cssFont}\n    ${css}\n`,\n  });\n}\nconst Theme = state.theme;\n\nconst getSender = () => {\n  return !state.sender\n    ? \"\"\n    : state.sender.substring(0, 6) +\n        \"...\" +\n        state.sender.substring(state.sender.length - 4, state.sender.length);\n};\n\nconst createProject = () => {\n  if (\n    state.projectTitle === \"\" ||\n    state.projectAbout === \"\" ||\n    state.projectImg === \"\" ||\n    state.projectCat === \"\"\n  )\n    return console.log(\"One or more fields is empty.\");\n\n  const contract = new ethers.Contract(\n    projectContract,\n    projectAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  console.log(\"DCFCFRCrfc\");\n\n  contract\n    .add_task(\n      state.projectTitle,\n      state.projectAbout,\n      state.sender,\n      state.projectImg,\n      0,\n      state.projectCat\n    )\n    .then((transactionHash) => {\n      console.log(\"transactionHash is \" + transactionHash);\n      const contract = new ethers.Contract(\n        projectContract,\n        projectAbi.body,\n        Ethers.provider().getSigner()\n      );\n      contract.getAllProjects().then((res) => {\n        State.update({ projects: res });\n      });\n    });\n};\n\nreturn (\n  <Theme>\n    <div className=\"Container\">\n      <span style={{ fontWeight: 800, fontSize: \"1.4rem\" }}>HorizonFund</span>\n      {state.profile && (\n        <div>\n          <h1 style={{ fontWeight: 800, fontSize: \"1.2rem\", color: \"green\" }}>\n            Your Profile\n          </h1>\n          <img\n            style={{\n              padding: 0,\n              margin: 0,\n              borderRadius: \"50%\",\n              height: \"5rem\",\n              width: \"5rem\",\n            }}\n            src={state.profile[4]}\n            alt={state.profile[0]}\n          />\n          <p style={{ padding: 0, margin: 0 }}>Username : {state.profile[0]}</p>\n          <p style={{ padding: 0, margin: 0 }}>About : {state.profile[1]}</p>\n          <p style={{ padding: 0, margin: 0 }}>Address : {getSender()}</p>\n          <p>Joined On : {new Date().toLocaleDateString()}</p>\n        </div>\n      )}\n      {!!state.sender ? (\n        <div>\n          {\n            <div style={{ width: \"60%\", margin: \"auto\" }}>\n              <input\n                style={{ width: \"100%\", padding: \"0.5rem\", margin: \"0.5rem 0\" }}\n                value={state.projectTitle}\n                onChange={(e) => State.update({ projectTitle: e.target.value })}\n                placeholder=\"Project Name\"\n              />\n              <input\n                style={{ width: \"100%\", padding: \"0.5rem\", margin: \"0.5rem 0\" }}\n                value={state.projectAbout}\n                onChange={(e) => State.update({ projectAbout: e.target.value })}\n                placeholder=\"About Project\"\n              />\n              <input\n                style={{ width: \"100%\", padding: \"0.5rem\", margin: \"0.5rem 0\" }}\n                value={state.projectImg}\n                onChange={(e) => State.update({ projectImg: e.target.value })}\n                placeholder=\"Project ImageURL\"\n              />\n              <select\n                style={{ width: \"100%\", padding: \"0.5rem\", margin: \"0.5rem 0\" }}\n                value={state.projectCat}\n                onChange={(e) => State.update({ projectCat: e.target.value })}\n                placeholder=\"Project ImageURL\"\n              >\n                <option value=\"\">--Select--</option>\n                <option value={0}>DESIGNANDTECH</option>\n                <option value={1}>FILM</option>\n                <option value={2}>ART</option>\n                <option value={3}>GAME</option>\n              </select>\n              <button\n                onClick={createProject}\n                style={{\n                  backgroundColor: \"rgb(0, 191, 121)\",\n                  border: \"none\",\n                  width: \"100%\",\n                  margin: \"0.5rem 0\",\n                }}\n              >\n                Create Project\n              </button>\n            </div>\n          }\n\n          <h1 style={{ fontWeight: 800, fontSize: \"1.2rem\", color: \"green\" }}>\n            All Projects\n          </h1>\n          <div>\n            {state.projects && state.projects.length === 0 ? (\n              <p>No Projects</p>\n            ) : (\n              state.projects.map((project, idx) => (\n                <div\n                  style={{\n                    width: \"18rem\",\n                    borderRadius: \"1rem\",\n                    border: \"1px solid #eee\",\n                    padding: \"0.5rem\",\n                    height: \"fit-content\",\n                  }}\n                  key={idx}\n                >\n                  <img\n                    style={{ borderRadius: \"0.6rem\", width: \"100%\" }}\n                    src={project[7]}\n                    alt=\"projectImage\"\n                  />\n                  <p\n                    style={{\n                      fontWeight: \"700\",\n                      fontSize: \"1.3rem\",\n                      margin: \"0.3rem 0\",\n                    }}\n                  >\n                    {project[2]}\n                  </p>\n                  <h6 styles={{ margin: \"0\", padding: \"0\" }}>\n                    About : {project[3]}\n                  </h6>\n                  <p styles={{ margin: \"0px\", padding: \"0px\" }}>\n                    Funds Raised: {ethers.BigNumber.from(project[4]).toNumber()}{\" \"}\n                    ETH\n                  </p>\n                  <p styles={{ margin: \"0px\", padding: \"0px\" }}>\n                    Owner:{\" \"}\n                    {() =>\n                      project[6].substring(0, 6) +\n                      \"...\" +\n                      project[6].substring(\n                        state.sender.length - 4,\n                        state.sender.length\n                      )\n                    }\n                  </p>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      ) : (\n        <Web3Connect\n          className=\"LidoStakeFormSubmitContainer\"\n          connectLabel=\"Connect with Web3\"\n        />\n      )}\n    </div>\n  </Theme>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/HorizonFund", "fact_widget_deployments_id": "a68b4e3e5c76b007ac3a78f5f95f5992", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}