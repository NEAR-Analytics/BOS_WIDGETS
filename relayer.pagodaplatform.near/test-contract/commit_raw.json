{"tx_hash": "GD2rdZMpwhitcudkHe5aphSDc9E2WypJ8531eTZKercC", "action_id_social": "4yCqC3FGr1Gy7J28peqpuJa7BsRQkHo2x1e8uqihgVPz-0-widget", "block_id": 108182290, "block_timestamp": "2023-12-17T16:26:15.752Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "test-contract", "source_code": "if (state.sender == undefined && Ethers.provider()) {\n  Ethers.provider()\n    .send(\"eth_requestAccounts\", [])\n    .then((accounts) => {\n      if (accounts.length) {\n        // save sender address to the state\n        State.update({ sender: accounts[0] });\n      }\n    });\n}\n\nconst BillBOSCoreABI = fetch(\n  \"https://gist.githubusercontent.com/jimmy-ez/36304d093ba9d51b082d7d0d09782918/raw/dca1009bf5ce0802f2e80c25ffef9773d73e88cf/BillBOSCoreABI.json\"\n);\nif (!BillBOSCoreABI.ok) {\n  return \"Loading\";\n}\n\nconst erc20abi = fetch(\n  \"https://gist.githubusercontent.com/veox/8800debbf56e24718f9f483e1e40c35c/raw/f853187315486225002ba56e5283c1dba0556e6f/erc20.abi.json\"\n);\nif (!erc20abi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(erc20abi.body);\n\nconst getTokenBalance = () => {\n  const encodedData = iface.encodeFunctionData(\"balanceOf\", [state.sender]);\n  return Ethers.provider()\n    .call({\n      to: \"0x9A0d1aEBFfd101c236faA674b3c581dfE4418f9b\",\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      // decode response\n      const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      //   return Big(receiverBalanceHex).toFixed(0);\n      console.log(\"receiverBalanceHex\", receiverBalanceHex);\n    });\n};\n\nconst IBillBOSCore = new ethers.utils.Interface(BillBOSCoreABI.body);\n\nconst getAds = () => {\n  const encodedData = IBillBOSCore.encodeFunctionData(\"getAdsUser\", [\n    state.sender,\n  ]);\n  return Ethers.provider()\n    .call({\n      to: \"0x945b11D39FE18459C890c0e7B95b03D27549ed17\",\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      // decode response\n      const receiverBalanceHex = IBillBOSCore.decodeFunctionResult(\n        \"getAdsUser\",\n        rawBalance\n      );\n\n      //   return Big(receiverBalanceHex).toFixed(0);\n      console.log(\"receiverBalanceHex\", receiverBalanceHex);\n    });\n};\n\nreturn (\n  <div>\n    <Web3Connect />;<p>{state.sender}</p>\n    <button onClick={() => getTokenBalance()}>GET</button>\n    <button onClick={() => getAds()}>GET ADs</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/test-contract", "fact_widget_deployments_id": "7c1a114d5dd70379e99e33ff9e23a4bf", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}