{"tx_hash": "C27ZUP8EJTbhmnzaagsTuQseb1SxmF3YNr9LHFvftbsD", "action_id_social": "6juPD2AYnznoJwRXnro7FpExbam2R2CxikHCfwQkkBda-0-widget", "block_id": 108231126, "block_timestamp": "2023-12-18T06:46:52.997Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "test-contract", "source_code": "if (state.sender == undefined && Ethers.provider()) {\n  Ethers.provider()\n    .send(\"eth_requestAccounts\", [])\n    .then((accounts) => {\n      if (accounts.length) {\n        // save sender address to the state\n        State.update({ sender: accounts[0] });\n      }\n    });\n}\n\nconst BillBOSCoreABI = fetch(\n  \"https://gist.githubusercontent.com/jimmy-ez/0344bb9cce14ced6c6e7f89d7d1654ce/raw/e7dd9962a90819f71de155b1f68f276eed07790a/BillBOSCoreABIV3.json\"\n);\nif (!BillBOSCoreABI.ok) {\n  return \"Loading\";\n}\n\nconst erc20abi = fetch(\n  \"https://gist.githubusercontent.com/veox/8800debbf56e24718f9f483e1e40c35c/raw/f853187315486225002ba56e5283c1dba0556e6f/erc20.abi.json\"\n);\nif (!erc20abi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(erc20abi.body);\n\nconst getTokenBalance = () => {\n  const encodedData = iface.encodeFunctionData(\"balanceOf\", [state.sender]);\n  return Ethers.provider()\n    .call({\n      to: \"0x9A0d1aEBFfd101c236faA674b3c581dfE4418f9b\",\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      // decode response\n      const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      //   return Big(receiverBalanceHex).toFixed(0);\n      console.log(\"receiverBalanceHex\", receiverBalanceHex);\n    });\n};\n\nconst IBillBOSCore = new ethers.utils.Interface(BillBOSCoreABI.body);\n\nconst getAds = () => {\n  const encodedData = IBillBOSCore.encodeFunctionData(\"getAds\");\n  return Ethers.provider()\n    .call({\n      to: \"0x138b32685a9EEf7c14c1587eE441F28Dd5dE2A68\",\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      // decode response\n      const receiverBalanceHex = IBillBOSCore.decodeFunctionResult(\n        \"getAds\",\n        rawBalance\n      );\n\n      //   return Big(receiverBalanceHex).toFixed(0);\n      console.log(\"receiverBalanceHex\", receiverBalanceHex);\n    });\n};\n\nreturn (\n  <div>\n    <Web3Connect />;<p>{state.sender}</p>\n    <button onClick={() => getTokenBalance()}>GET</button>\n    <button onClick={() => getAds()}>GET ADs</button>\n  </div>\n);\n", "metadata": {"fork_of": "jimmy-ez.near/widget/test-contract@108230503"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/test-contract", "fact_widget_deployments_id": "b5b4faad1ec61fe46c690232c1159499", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}