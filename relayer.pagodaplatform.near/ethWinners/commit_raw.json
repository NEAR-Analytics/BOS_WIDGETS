{"tx_hash": "F4BRLWRG4ZCzfKRpm7LCrKfyRz1y6dMyPzzactjMMP6r", "action_id_social": "CKwLZon8MGvaPLANE6tj1Yko2tCmkP2Enij57PzEJuz2-0-widget", "block_id": 94953157, "block_timestamp": "2023-06-24T22:45:21.327Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "ethWinners", "source_code": null, "metadata": null, "branch": {"draft": {"": "const desiredChainId = 80001;\nconst contractAddress = \"\"; //\"0xdabd5E6060C1f951c7218D81B76e372d0aA8204f\";\nconst explorerApiKey = \"mLvMXKxgNYvVC1gMdStkcBn3xm3fCLZ7\";\nconst contractABI =\n  '[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"ID\",\"type\":\"string\"}],\"name\":\"add_Company\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"old_comapnies\",\"outputs\":[{\"internalType\":\"contract Company\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"ID\",\"type\":\"string\"}],\"name\":\"remove_Company\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"review_Request\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"verified_companies\",\"outputs\":[{\"internalType\":\"contract Company\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]';\n//   '[{\"inputs\":[{\"internalType\":\"string\",\"name\":\"initMessage\",\"type\":\"string\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"oldStr\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"newStr\",\"type\":\"string\"}],\"name\":\"UpdatedMessages\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"message\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"newMessage\",\"type\":\"string\"}],\"name\":\"update\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]';\n\n// Connect to the the desired chain provider\nif (\n  state.chainId === undefined &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\n\nif (state.chainId !== undefined && state.chainId !== desiredChainId) {\n  return (\n    <Widget\n      src=\"a_liutiev.near/widget/button_general\"\n      props={{ value: \"Switch to the proper Mainnet\" }}\n    />\n  );\n  //   return <p>Switch to the proper Mainnet</p>;\n}\nlet iface;\nif (!contractABI.length) {\n  const loadedABI = fetch(\n    `https://api-testnet.polygonscan.com/api?module=contract&action=getabi&address=${contractAddress}&apikey=${explorerApiKey}`\n  );\n  if (!loadedABI.ok) {\n    return \"Loading\";\n  }\n\n  iface = new ethers.utils.Interface(JSON.parse(loadedABI.body));\n} else {\n  iface = new ethers.utils.Interface(JSON.parse(contractABI));\n}\n\nconst addCompany = (domain) => {\n  const encodedData = iface.encodeFunctionData(\"domain\", [domain]);\n  if (!domain) {\n    <Widget\n      src=\"s-farshad-k.near/widget/WarningBoxComponent\"\n      props={{ children: \"Amount is missing\" }}\n    />;\n  }\n  const contract = new ethers.Contract(\n    contractAddress,\n    contractABI,\n    Ethers.provider() // think about Ethers.provider().getSigner()\n  );\nconst result = await contract.addCompany(encodedData);\n    console.log(result);\n    return result\n    \n};\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/ethWinners", "fact_widget_deployments_id": "a81452eaad996ecbef3989757b3c97b5", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}