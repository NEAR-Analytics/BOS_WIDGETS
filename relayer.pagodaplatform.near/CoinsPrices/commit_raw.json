{"tx_hash": "HNGzpt3nCnfqiSf4a5YWQrva5pCWQL869TQu2JztBheR", "action_id_social": "3GEmc7956i2o6R8DZFHyn7MTx4fUaKBKBtxaZ1c8uFYy-0-widget", "block_id": 108509348, "block_timestamp": "2023-12-21T22:33:11.182Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "CoinsPrices", "source_code": "const colors = {\n  brightRed: \"#ff3d00\",\n  deepBlue: \"#2835f8\",\n  lightBeige: \"#f4e9e1\",\n  slateBlack: \"#2B2B2B\",\n};\n\nconst DropdownIcon = styled.div`\n  border-bottom: 3px solid ${colors.brightRed};\n  border-left: 3px solid ${colors.brightRed};\n  height: 16px;\n  transform: ${(props) => (props.isOpen ? \"rotate(45deg)\" : \"rotate(0)\")};\n  transition: transform 0.3s ease;\n  width: 16px;\n`;\n\nconst ImgOptions = styled.img`\n  height: 22px;\n  width: 22px;\n`;\n\nconst Option = styled.div`\n  color: ${colors.lightBeige};\n  cursor: pointer;\n  display: flex;\n  font-size: 13px;\n  gap: 10px;\n  padding: 8px;\n  transition: background-color 0.3s ease 0s;\n\n  &:hover {\n    background-color: ${colors.deepBlue};\n    transform: scale(1.02);\n  }\n`;\n\nconst OptionsWrapper = styled.div`\n  background: ${colors.slateBlack};\n  border-radius: 16px;\n  max-height: 416px;\n  overflow-y: auto;\n  padding: 10px 2px;\n  width: 100%;\n  z-index: 1000;\n  margin-top: 8px;\n`;\n\nconst SelectWrapper = styled.div`\n  align-items: center;\n  background: ${colors.lightBeige};\n  border: 1px solid #0E0E0E;\n  border-radius: 16px; \n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  padding: 16px;\n  &:hover {\n    background-color: ${colors.slateBlack};\n    color: ${colors.lightBeige};\n  }\n`;\n\nconst Container = styled.div`\n  align-items: center;\n  position: relative;\n`;\n\nconst DisplayInfo = styled.div`\n  background-color: blue;\n  display: block;\n  padding: 16px;\n  margin-top: 50px;\n  border-radius: 10px;\n  \n  .current-price {\n    font-size: 30px;\n    font-weight: bold;\n    color: black; /* Choose an appropriate text color */\n  }\n\n  .high-24h {\n     font-size: 30px;\n    font-weight: bold;\n    color: #fff; /* Choose an appropriate text color */\n  }\n\n  .market-cap {\n     font-size: 30px;\n    font-weight: bold;\n    color: red; /* Choose an appropriate text color */\n  }\n\n  .market-cap-rank {\n     font-size: 30px;\n    font-weight: bold;\n    color: black; /* Choose an appropriate text color */\n  }\n`;\n\nState.init({\n  selectedCoin: null,\n  renderOptions: null,\n});\n\nconst currency = props.currency || \"usd\";\nconst query = props.query || \"&order=market_cap_desc\";\nconst pagination = props.pagination || 50;\n\n// Coingeco API documentation\n// https://www.coingecko.com/api/documentations/v3#/\nconst BASE_URL = \"https://api.coingecko.com/api/v3/coins/markets\";\nconst CNS_URL = `${BASE_URL}?vs_currency=${currency}${query}&per_page=${pagination}&page=1\"`;\n\nconst coinsList = fetch(CNS_URL)?.body || [];\nconsole.log(coinsList);\n\nfunction updateSelectedCoin(coin) {\n  State.update({ selectedCoin: coin, isOpen: false });\n  Storage.set(\"coinSelectValue\", state.selectedCoin);\n}\n\nconst handleOptionClick = props.handleOptionClick || updateSelectedCoin;\n\nif (!state.renderOptions && coinsList.length) {\n  const renderOptions = (\n    <OptionsWrapper>\n      {coinsList?.map((coin) => {\n        return (\n          <Option key={coin.id} onClick={() => handleOptionClick(coin)}>\n            {coin.image && <ImgOptions src={coin.image} alt=\"coin\" />}\n            {coin.name}\n          </Option>\n        );\n      })}\n    </OptionsWrapper>\n  );\n\n  State.update({ renderOptions });\n}\n\nconst { isOpen, selectedCoin } = state;\n\nreturn (\n  <Container>\n    <SelectWrapper onClick={() => State.update({ isOpen: !isOpen })}>\n      <>\n        {selectedCoin?.name ? (\n          <div>\n            <ImgOptions src={selectedCoin.image} />\n            {selectedCoin.name}\n          </div>\n        ) : (\n          \"Select a coin..\"\n        )}\n      </>\n      <DropdownIcon isOpen={isOpen} />\n    </SelectWrapper>\n    {isOpen && state.renderOptions}\n    <DisplayInfo>\n      <div className=\"current-price\">\n        Current Price: ${selectedCoin.current_price}\n      </div>\n      <div className=\"high-24h\">High in 24Hrs: ${selectedCoin.high_24h}</div>\n      <div className=\"market-cap\">Market Cap: ${selectedCoin.market_cap}</div>\n      <div className=\"market-cap-rank\">\n        Rank in Market: {selectedCoin.market_cap_rank}\n      </div>\n    </DisplayInfo>\n  </Container>\n);\n\n//current_price, high_24h, market_cap, market_cap_rank;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/CoinsPrices", "fact_widget_deployments_id": "0f7bd8b3da3f0fe201c5b6ac4fc9d765", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}