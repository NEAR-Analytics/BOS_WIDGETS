{"tx_hash": "Di237zb5Ab8MuBDkfq5HzUe9MQqemft4NEDBvBQQi7TN", "action_id_social": "jxSzy7DycZLAXKaJKA8gXPKUqWDJL5Xb8jJbC1mzin2-0-widget", "block_id": 96158716, "block_timestamp": "2023-07-10T16:39:55.334Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "Apollo.pay", "source_code": "State.init({\n  stage: 0,\n  country: \"ke\",\n  billInfo: {},\n  tillInfo: {},\n  phoneInfo: {},\n  senderInfo: {},\n  sentToEscrow: false,\n  error: false,\n  success: true,\n});\n\nconst ecr20abi = fetch(\n  \"https://raw.githubusercontent.com/corndao/aave-v3-bos-app/main/abi/ERC20Permit.json\"\n).body;\n//const usdcAddresses = fetch(\"\");\nconst usdcAddress = \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\";\nconst apolloPayEscrow = \"0x160d136869e86189a58864Cc40777cDD355501f5\";\n//const usdtAddresses = fetch(\"\");\n\nconst Wrapper = styled.div`\n  .hidden {\n    display: none;\n  }\n \n`;\n\nfunction updateStage(position) {\n  State.update({ ...state, stage: position });\n}\n\nfunction updateCountry(country) {\n  State.update({ ...state, country });\n}\n\nfunction wallletRequestSendTransaction(amount) {\n  console.log({\n    amount,\n    ecr20abi: JSON.parse(ecr20abi),\n    usdcAddress,\n  });\n  const signer = Ethers.provider().getSigner();\n  const sendContract = new ethers.Contract(\n    usdcAddress,\n    JSON.parse(ecr20abi),\n    signer\n  );\n  console.log({\n    sendContract,\n    nm: sendContract.name,\n  });\n\n  sendContract.transfer(apolloPayEscrow, 30);\n  // .then(function (value) {\n  //   console.log({ value });\n  // })\n  // .catch(function (error) {\n  //   console.log({ error });\n  // });\n}\n\nconst initiatePayout = () => {};\n\nconst sender = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nreturn (\n  <Wrapper>\n    {/* src=\"near/widget/Onboarding.ComponentCard\" to be pasted below */}\n\n    <div>\n      <h1> Apollo Pay </h1>\n      Pay for your goods and services in East Africa\n      <br />\n      {sender ? (\n        <p>Account: {sender}</p>\n      ) : (\n        <Web3Connect className=\"web3-connect\" connectLabel=\"Connect Wallet\" />\n      )}\n      <div>\n        <select\n          name=\"countries\"\n          id=\"\"\n          onChange={(e) => updateCountry(e.target.value)}\n        >\n          <option value=\"0\">--Please choose country --</option>\n          <option value=\"Kenya\">Kenya</option>\n          <option value=\"Uganda\">Uganda</option>\n          <option value=\"Rwanda\">Rwanda</option>\n          <option value=\"Tanzania\">Tanzania</option>\n        </select>\n\n        <select\n          name=\"paymenttype\"\n          id=\"paymenttype\"\n          onChange={(e) => updateStage(e.target.value)}\n        >\n          <option value={0}>--Please payment Type--</option>\n          <option value={1}> Pay Bill</option>\n          <option value={2}>Buy Goods or services</option>\n          <option value={3}> Pay To Phonenumber </option>\n        </select>\n      </div>\n    </div>\n    <br />\n\n    {state.stage == \"1\" && (\n      <div>\n        <label for=\"paybill\">Paybill</label>\n        <input id=\"paybill\" name=\"paybill\" type=\"text\" required />\n\n        <label for=\"accountumber\">Account Number</label>\n        <input id=\"accountnumber\" name=\"accountnumber \" type=\"text\" required />\n\n        <label for=\"Amount\">Amount</label>\n        <input id=\"amount\" name=\"amount\" type=\"number\" required />\n        <button onClick={() => updateStage(\"4\")}> Pay </button>\n      </div>\n    )}\n\n    {/* List of most utils: Water , elec , Gas Cooking, internet */}\n    {state.stage == \"2\" && (\n      <div>\n        <label for=\"tillnumber\"> Till Number</label>\n        <input id=\"tillnumber\" name=\"tillnumber\" type=\"text\" />\n\n        <label for=\"Amount\">Amount</label>\n        <input id=\"amount\" name=\"amount\" type=\"number\" />\n\n        <button onClick={() => updateStage(\"4\")}> Pay </button>\n      </div>\n    )}\n\n    {state.stage == \"3\" && (\n      <div>\n        <label for=\"Phonenumber\">Phonenumber</label>\n        <input id=\"Phonenumber\" name=\"Phonenumber\" type=\"phone\" required />\n        <label for=\"Amount\">Amount</label>\n        <input id=\"amount\" name=\"amount\" type=\"number\" />\n        <button onClick={() => updateStage(\"4\")}> Pay </button>{\" \"}\n      </div>\n    )}\n\n    {state.stage == \"4\" && (\n      <div>\n        <button onClick={() => wallletRequestSendTransaction(20)}>\n          {\" \"}\n          Send Coin{\" \"}\n        </button>{\" \"}\n      </div>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/Apollo.pay", "fact_widget_deployments_id": "e055a90031dfc5198f72f18ddd8caf3e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}