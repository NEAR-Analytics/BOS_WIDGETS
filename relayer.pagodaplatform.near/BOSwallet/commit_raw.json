{"tx_hash": "AS3aGnNZt1xdoEDEep3wZjEhB4hqJC4mc3MFbpDmneBF", "action_id_social": "GSDBNBassiAHsnT9bwu7T7AYrrdB1nsYZpUwPrwb7Pqt-0-widget", "block_id": 111147614, "block_timestamp": "2024-01-23T21:11:57.596Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "BOSwallet", "source_code": "const contract = \"transfer-near.near\";\r\nconst method = \"transfer_near\";\r\nconst oneTeraGas = 1000000000000;\r\nconst oneNEARInYoctoNEAR = 1000000000000000000000000;\r\nState.init({ accountId: \"pichtran.near\", amount: 0.5 });\r\nconst AccountId_profile = props.accountId ?? context.accountId;\r\nconst onClick = () => {\r\n  Near.call(\r\n    contract,\r\n    method,\r\n    state.accountId,\r\n    oneTeraGas,\r\n    state.amount * oneNEARInYoctoNEAR\r\n  );\r\n};\r\n\r\nState.init({\r\n  selectedTab: props.tab || \"home\",\r\n});\r\n\r\nconst StyledButton = styled.button`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 15px 30px;\r\n  border: 0;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 10rem;\r\n  transition: all 0.02s;\r\n  font-weight: bold;\r\n  color: rgb(37, 37, 37);\r\n  z-index: 0;\r\n  box-shadow: 0 0px 7px -5px rgba(0, 0, 0, 0.5);\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    background: rgb(193, 228, 248);\r\n    color: rgb(33, 0, 85);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.97);\r\n  }\r\n\r\n  .hoverEffect {\r\n    position: absolute;\r\n    bottom: 0;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1;\r\n\r\n    div {\r\n      background: linear-gradient(90deg, rgba(222,0,75,1) 0%, rgba(191,70,255,1) 49%, rgba(0,212,255,1) 100%);\r\n      border-radius: 40rem;\r\n      width: 10rem;\r\n      height: 10rem;\r\n      transition: 0.4s;\r\n      filter: blur(20px);\r\n      opacity: 0.5;\r\n      animation: effect 3s linear infinite;\r\n      @keyframes effect {\r\n        0% {\r\n          transform: rotate(0deg);\r\n        }\r\n        100% {\r\n          transform: rotate(360deg);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover .hoverEffect div {\r\n    width: 8rem;\r\n    height: 8rem;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  padding-bottom: 48px;\r\n`;\r\n\r\nconst Title = styled.p`\r\n  font-weight: 300;\r\n  font-size: ${(p) => p.size || \"17px\"};\r\n  line-height: 1em;\r\n  color: #11181c;\r\n  margin: ${(p) => (p.margin ? \"0 0 24px\" : \"0\")};\r\n  overflow-wrap: anywhere;\r\n  &:hover{\r\n      color:purple;\r\n  }\r\n`;\r\n\r\nconst Tabs = styled.div`\r\n  display: flex;\r\n  flex-direction: row; // Changed from column to row\r\n  width: auto; // Adjusted from height to width\r\n  border-bottom: 1px solid #eceef0; // Changed from border-right to border-bottom\r\n  padding-bottom: 24px; // Changed from padding-right to padding-bottom\r\n  overflow-x: auto; // Changed from overflow-y to overflow-x\r\n  max-width: 700px; // Adjusted from max-height to max-width\r\n  position: sticky;\r\n  top: 0;\r\n  @media (max-width: 1200px) {\r\n    background: #000;\r\n    border: none;\r\n    margin: 0;\r\n    padding: 0;\r\n\r\n    > * {\r\n      flex: none;\r\n      margin-right: 12px; // Changed from margin-bottom to margin-right\r\n    }\r\n  }\r\n`;\r\n\r\nconst TabsButton = styled.button`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  font-weight: 600;\r\n  font-size: 23px;\r\n  padding: 12px 0;\r\n  position: relative;\r\n  color: #9753c6;\r\n  background: none;\r\n  border: none !important;\r\n  outline: none;\r\n  text-align: center;\r\n  text-decoration: none !important;\r\n  &:hover {\r\n    color:#e09dff;\r\n    background: #e3e3e3;\r\n    cursor: pointer;\r\n    border-radius: 14px;\r\n  }\r\n\r\n  background: ${(props) => (props.isActive ? \"#e09dff\" : \"none\")};\r\n  color: ${(props) => (props.isActive ? \"#ffffff\" : \"#ffffff\")};\r\n  border-radius: ${(props) => (props.isActive ? \"14px\" : \"14px\")};\r\n\r\n`;\r\n//Card\r\nconst FormContainer = styled.div`\r\n  width: 100%;\r\n  background: linear-gradient(#212121, #212121) padding-box,\r\n              linear-gradient(145deg, transparent 35%, #e81cff, #40c9ff) border-box;\r\n  border: 2px solid transparent;\r\n  padding: 32px 24px;\r\n  font-size: 14px;\r\n  font-family: inherit;\r\n  color: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  box-sizing: border-box;\r\n  border-radius: 16px;\r\n  background-size: 200% 100%;\r\n  animation: gradient 5s ease infinite;\r\n\r\n  button:active {\r\n    transform: scale(0.95);\r\n  }\r\n`;\r\n\r\nconst Form = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n`;\r\n\r\nconst FormGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n\r\n  label {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n    color: #717171;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n  }\r\n\r\n  input, textarea {\r\n    width: 100%;\r\n    padding: 12px 16px;\r\n    border-radius: 8px;\r\n    color: white;\r\n    background-color: transparent;\r\n    border: 1px solid #414141;\r\n    font-family: inherit;\r\n\r\n    &:focus {\r\n      outline: none;\r\n      border-color: #e81cff;\r\n    }\r\n\r\n    &::placeholder {\r\n      opacity: 0.5;\r\n    }\r\n  }\r\n\r\n  textarea {\r\n    resize: none;\r\n    height: 96px;\r\n  }\r\n`;\r\n\r\nconst SubmitButton = styled.button`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: center;\r\n  align-self: flex-start;\r\n  font-family: inherit;\r\n  color: #717171;\r\n  font-weight: 600;\r\n  width: 25%;\r\n  background: #313131;\r\n  border: 1px solid #414141;\r\n  padding: 12px 16px;\r\n  font-size: inherit;\r\n  gap: 8px;\r\n  margin-top: 8px;\r\n  cursor: pointer;\r\n  border-radius: 6px;\r\n\r\n  &:hover {\r\n    background-color: #fff;\r\n    border-color: #fff;\r\n  }\r\n`;\r\nconst handleTabClick = (tab) => {\r\n  State.update({\r\n    selectedTab: tab,\r\n  });\r\n};\r\n\r\n//Croller\r\n\r\nconst ScrollableContainer = styled.div`\r\n  height: 500px; \r\n  overflow-y: auto;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst BoxInput = styled.div`\r\n  position: relative;\r\n\r\n  &::after,\r\n  &::before {\r\n    content: \"\";\r\n    width: 130px;\r\n    height: 30px;\r\n    position: absolute;\r\n    z-index: -1;\r\n  }\r\n\r\n  &::after {\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n\r\n  &::before {\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n`;\r\n\r\nconst Border = styled.div`\r\n  background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);\r\n  box-shadow: -25px -10px 30px -5px rgba(225, 0, 255, 0.5),\r\n              25px -10px 30px -5px rgba(255, 0, 212, 0.5),\r\n              25px 10px 30px -5px rgba(255, 174, 0, 0.5),\r\n              -25px 10px 30px -5px rgba(255, 230, 0, 0.5);\r\n  padding: 4px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  background-color: #212121;\r\n  max-width: 250px;\r\n  height: 40px;\r\n  padding: 0 19px 0 10px;\r\n  font-size: 1.1em;\r\n  position: relative;\r\n  border: none;\r\n  color: white;\r\n  outline: 0;\r\n  overflow: hidden;\r\n\r\n  &::placeholder {\r\n    transition: all 0.5s ease-in, transform 0.2s ease-in 0.6s;\r\n  }\r\n\r\n  &:focus::placeholder {\r\n    padding-left: 165px;\r\n    transform: translateY(-50px);\r\n  }`;\r\n\r\nconst card = (\r\n  <>\r\n    <FormContainer>\r\n      <Form>\r\n        <FormGroup>\r\n          <label>AccountID:</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={state.accountId}\r\n            onChange={(e) => State.update({ accountId: e.target.value })}\r\n          />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <label>Amount:</label>\r\n          <input\r\n            type=\"number\"\r\n            placeholder={state.amount}\r\n            min=\"0.1\"\r\n            step=\"0.5\"\r\n            max=\"18446744073709551615\"\r\n            placeholder={state.amount}\r\n            onChange={(e) => State.update({ amount: e.target.value })}\r\n          />\r\n        </FormGroup>\r\n        <SubmitButton onClick={onClick}>Send</SubmitButton>\r\n      </Form>\r\n    </FormContainer>\r\n\r\n    <br />\r\n  </>\r\n);\r\n\r\nconst operationsDoc = `\r\n  query MyQuery {\r\n    mb_views_nft_tokens(\r\n      order_by: {last_transfer_timestamp: desc}\r\n      where: {owner: {_eq: \"${\r\n        props.wallet_id || context.accountId\r\n      }\"}, _and: {burned_timestamp: {_is_null: true}, last_transfer_timestamp: {}}}\r\n    ) {\r\n      nft_contract_id\r\n      title\r\n      description\r\n      media\r\n      last_transfer_receipt_id\r\n      metadata_id\r\n      token_id\r\n      nft_contract_name\r\n      nft_contract_icon\r\n    }\r\n  }\r\n`;\r\n\r\nfunction fetchGraphQL() {\r\n  const result = fetch(\"https://graph.mintbase.xyz/mainnet\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"mb-api-key\": \"anon\",\r\n      \"content-type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      query: operationsDoc,\r\n      variables: {},\r\n      operationName: \"MyQuery\",\r\n    }),\r\n  });\r\n  return result;\r\n}\r\n\r\nconst res = fetchGraphQL();\r\n\r\nif (!(res && res.body)) return \"...\";\r\n\r\nconst nfts = res.body.data.mb_views_nft_tokens;\r\n\r\nconst notLoggedInWarning = <p class=\"text-center py-2\"> Login to send NEAR</p>;\r\nconst StyledH6 = styled.h6`\r\n  text-align: right;\r\n  top: 0;\r\n  right:0;\r\n`;\r\n\r\nconst StyledContainer = styled.div`\r\n  border: 2px solid black; \r\n  padding: 3px; \r\n  border-radius:10px;\r\n`;\r\n\r\n//Restyle\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: #fff;\r\n  padding: 1rem;\r\n  margin-bottom: 1rem;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst NftImage = styled.img`\r\n  margin-bottom: 1rem;\r\n  height: 180px;\r\n  width: 180px;\r\n`;\r\n\r\nconst NftTitle = styled.div`\r\n  font-weight: 500;\r\n  font-size: 1.125rem;\r\n  text-align: center;\r\n`;\r\n\r\nconst NftTokenId = styled.div`\r\n  overflow-wrap: break-word;\r\n  word-wrap: break-word;\r\n  word-break: break-word;\r\n`;\r\n//Searching\r\nconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\nconst handleSearchChange = (event) => {\r\n  setSearchTerm(event.target.value);\r\n};\r\n\r\n//Middle\r\nconst CenteredContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\n// Render\r\n\r\nreturn (\r\n  <>\r\n    <StyledContainer>\r\n      <h5 class=\"text-center\">\r\n        \ud83d\udc4b Hello {AccountId_profile}! \ud83c\udf1f It's a pleasure to welcome you to BOS\r\n        Wallet!\r\n      </h5>\r\n    </StyledContainer>\r\n\r\n    <div class=\"container\">\r\n      <></>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <Wrapper>\r\n            <Tabs>\r\n              <TabsButton\r\n                onClick={() => handleTabClick(\"home\")}\r\n                isActive={state.selectedTab === \"home\"}\r\n              >\r\n                <Title>Balance\ud83d\udcb0</Title>\r\n              </TabsButton>\r\n              <TabsButton\r\n                onClick={() => handleTabClick(\"sends\")}\r\n                isActive={state.selectedTab === \"sends\"}\r\n              >\r\n                <Title>Send\ud83d\udcb8</Title>\r\n              </TabsButton>\r\n              <TabsButton\r\n                onClick={() => handleTabClick(\"nfts\")}\r\n                isActive={state.selectedTab === \"nfts\"}\r\n              >\r\n                <Title>NFTs\ud83e\udde9</Title>\r\n              </TabsButton>\r\n              <TabsButton\r\n                onClick={() => handleTabClick(\"coin\")}\r\n                isActive={state.selectedTab === \"coin\"}\r\n              >\r\n                <Title>Price\ud83d\udcc8</Title>\r\n              </TabsButton>\r\n              <TabsButton\r\n                onClick={() => handleTabClick(\"swap\")}\r\n                isActive={state.selectedTab === \"swap\"}\r\n              >\r\n                <Title>Swap\ud83d\udcb1</Title>\r\n              </TabsButton>\r\n            </Tabs>\r\n          </Wrapper>\r\n        </div>\r\n        <CenteredContainer class=\"col-md-9\">\r\n          {state.selectedTab === \"home\" && (\r\n            <>\r\n              <Widget src=\"marketplacebos.near/widget/ChartBalance\" />\r\n              <br />\r\n              <br />\r\n            </>\r\n          )}\r\n          {state.selectedTab === \"sends\" && (\r\n            <>\r\n              <p class=\"text-center py-2\">\r\n                Enter AccountID and amount of NEAR to send\r\n              </p>\r\n              {context.accountId ? card : notLoggedInWarning}\r\n              <br />\r\n              <br />\r\n            </>\r\n          )}\r\n          {state.selectedTab === \"nfts\" && (\r\n            <>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search NFTs \ud83d\udd0d\"\r\n                value={searchTerm}\r\n                onChange={handleSearchChange}\r\n                style={{\r\n                  padding: \"10px\",\r\n                  margin: \"20px 0\",\r\n                  border: \"1px solid #ccc\",\r\n                  borderRadius: \"4px\",\r\n                }}\r\n              />\r\n              {nfts\r\n                .filter((nft) =>\r\n                  nft.title.toLowerCase().includes(searchTerm.toLowerCase())\r\n                )\r\n                .map((nft) => (\r\n                  <Container\r\n                    key={nft.contract_id + nft.token_id}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      backgroundColor: \"#fffff\",\r\n                      padding: \"1rem\",\r\n                      marginBottom: \"1rem\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                  >\r\n                    <NftImage\r\n                      style={{ marginBottom: \"1rem\" }}\r\n                      height={180}\r\n                      width={180}\r\n                      layout=\"intrinsic\"\r\n                      src={\r\n                        nft.media ??\r\n                        \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\r\n                      }\r\n                    />\r\n                    <div\r\n                      style={{\r\n                        fontWeight: 500,\r\n                        fontSize: \"1.125rem\",\r\n                        textAlign: \"center\",\r\n                      }}\r\n                    >\r\n                      <NftTitle>{nft.title}</NftTitle>\r\n                      <NftTokenId\r\n                        style={{\r\n                          overflowWrap: \"break-word\",\r\n                          wordWrap: \"break-word\",\r\n                          wordBreak: \"break-word\",\r\n                        }}\r\n                      >\r\n                        [{nft.token_id}]\r\n                      </NftTokenId>\r\n                    </div>\r\n                  </Container>\r\n                ))}\r\n            </>\r\n          )}\r\n          {state.selectedTab === \"coin\" && (\r\n            <>\r\n              <Widget src=\"pichtran.near/widget/CoinPrice\" />\r\n              <br />\r\n              <br />\r\n            </>\r\n          )}\r\n          {state.selectedTab === \"swap\" && (\r\n            <>\r\n              <h1>Updating accountabstration swap</h1>\r\n              <br />\r\n              <br />\r\n            </>\r\n          )}\r\n        </CenteredContainer>\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": {"fork_of": "pichtran.near/widget/BOSwallet@110075658"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/BOSwallet", "fact_widget_deployments_id": "a6e375053117d517424bdfc76228df60", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 20}