{"tx_hash": "DPBg5fvE1dzRhkmMqGw49NHtv7YhZBFwL8srM8cmYd2W", "action_id_social": "E5YJeK87pQYazN8QjHrmYEr9dnzkG5tguBCoSQpEpb3H-0-widget", "block_id": 94179170, "block_timestamp": "2023-06-14T12:35:59.976Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "donate-me", "source_code": "const receiver = \"vishal-dharmawat.near\";\n\n// let TG_TO_YOCTONEAR_FACTOR = Big(\"1000000000000\"); // 1e12\n// let TGAmount = Big(300);\n// let _yoctoNearAmount = TGAmount * TG_TO_YOCTONEAR_FACTOR;\n\n// console.log(\"I am here\");\nState.init({\n  currentDonations: 0,\n  totalDonations: 100,\n  amount: 0.1,\n});\n\nconst DonateView = styled.div`\nbackground-color: lightblue;\ndisplay: inline-flex;\nflex-direction: column;\n`;\n\nconst DonateButton = styled.button`\n  background-color: #1a73e8;\n  color: white;\n  border: none;\n  padding: 10px;\n  margin: 1.5em;\n  margin-top: 0px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 16px;\n  border-radius: 8px;\n  cursor: pointer;\n`;\n\nconst DonateInput = styled.input`\n    margin-right: 10px;\n    font-size: 16px;\n    border-radius: 5px;\n    border-color: transparent;\n    text-align: right;\n`;\n\nconst handleButtonClick = () => {\n  const NEAR_TO_YOCTONEAR_FACTOR = Big(\"1000000000000000000000000\"); // 1e24\n  let nearAmount = Big(Math.round(state.amount * 1e5) / 1e5); // Convert NEAR to a smaller unit that can be handled as an integer\n  let yoctoNearAmount = nearAmount * NEAR_TO_YOCTONEAR_FACTOR;\n\n  Near.call([\n    {\n      contractName: \"donation-near-social.near\",\n      methodName: \"donate\",\n      args: {\n        beneficiary: receiver,\n      },\n      deposit: yoctoNearAmount,\n      gas: \"200000000000000\",\n    },\n  ]);\n};\n\nconst handleChange = (e) => {\n  console.log(e.target.value, state.amount);\n  let amount = e.target.value > 0.1 ? e.target.value : 0.1;\n  State.update({\n    ...state,\n    amount,\n  });\n};\n\nreturn (\n  <DonateView>\n    {props.name && <div>Hi {props.name}</div>}\n    <div style={{ margin: \"1.5em\" }}>\n      <DonateInput\n        type=\"number\"\n        label=\"Near\"\n        min=\"0.1\"\n        defaultValue={state.amount}\n        onChange={handleChange}\n      />\n      <span>Near</span>\n    </div>\n    <DonateButton id=\"donateButton\">\n      <button\n        onClick={handleButtonClick}\n        style={{ backgroundColor: \"transparent\", border: \"none\" }}\n      >\n        Donate me Near\n      </button>\n    </DonateButton>\n  </DonateView>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/donate-me", "fact_widget_deployments_id": "c48f3e460a88e9009af75d0e199ef2c0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}