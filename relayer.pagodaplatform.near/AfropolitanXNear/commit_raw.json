{"tx_hash": "BLoJjiZt8agf3ReaByjx2cXP2frLeEwKauSiKJ9BrtxM", "action_id_social": "GVLH8UbPkNWp69AJSQkP51i7jo2YkC3xWKmNvT3pcpqS-0-widget", "block_id": 96541056, "block_timestamp": "2023-07-15T15:56:36.458Z", "signer_id": "relayer.pagodaplatform.near", "widget_name": "AfropolitanXNear", "source_code": "const sender = Ethers.send(\"eth_requestAccounts\", [])[0];\nif (!sender) return \"You need to login first\";\nconst { nftCollectionAddress } = props;\nconst nftCollectionABI = [\n  {\n    inputs: [{ internalType: \"address\", name: \"owner\", type: \"address\" }],\n    name: \"balanceOf\",\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n];\n\nState.init({ isLoggedIn: false, loading: false, displayMsg: false });\n\nconst getNftContract = async () => {\n  State.update({ loading: true });\n  State.update({ isLoggedIn: true, displayMsg: false });\n  const signer = Ethers.provider().getSigner();\n  const nftContract = new ethers.Contract(\n    nftCollectionAddress,\n    nftCollectionABI,\n    signer\n  );\n  nftContract\n    .balanceOf(sender)\n    .then((res) => {\n      if (parseInt(res[\"_hex\"], 16) > 0) {\n        State.update({ isLoggedIn: true, displayMsg: false });\n      } else {\n        State.update({ isLoggedIn: false, displayMsg: true });\n      }\n      State.update({ loading: false });\n    })\n    .catch((error) => console.log(error));\n};\n\nreturn (\n  <div>\n    <div>\n      <div style={{ display: \"flex\" }}>\n        <img\n          width={48}\n          src=\"https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/wfb8wvfuzofnk7wnfvli\"\n        />\n        <h1\n          style={{\n            fontFamily: \"Syncopate, sans-serif\",\n            fontSize: \"2rem\",\n            fontWeight: \"bold\",\n            margin: \"0.5rem -0.4rem\",\n            color: \"#CF574A\",\n          }}\n        >\n          fropolitan x Near\n        </h1>\n      </div>\n      <h6\n        style={{\n          fontFamily: \"Syncopate, sans-serif\",\n          fontSize: \"0.8rem\",\n          margin: \"0.2rem 0.8rem\",\n        }}\n      >\n        NFT Gated payment system for Social Activities\n      </h6>\n      <hr />\n    </div>\n    {state.isLoggedIn ? (\n      <>\n        <iframe src=\"https://1234-nearexamples-donationjs-70k9fwuh5p5.ws-us101.gitpod.io/\" />\n      </>\n    ) : (\n      <div>\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <div style={{ marginRight: \"1rem\" }}>\n            <img\n              style={{\n                borderRadius: \"50%\",\n                margin: \"0.5rem\",\n              }}\n              width={80}\n              src=\"https://i.seadn.io/gcs/files/4530fc473fea3a9dbdb8e61afe177920.jpg?auto=format&dpr=1&w=640\"\n              alt=\"Profile Image\"\n            />\n            <img\n              style={{\n                borderRadius: \"50%\",\n                margin: \"0.5rem\",\n              }}\n              width={80}\n              src=\"https://i.seadn.io/gcs/files/b1ecedc94ed29bacf8a57500fa824523.jpg?auto=format&dpr=1&w=640\"\n              alt=\"Profile Image\"\n            />\n            <img\n              style={{\n                borderRadius: \"50%\",\n                margin: \"0.5rem\",\n              }}\n              width={80}\n              src=\"https://i.seadn.io/gcs/files/3704274360a7809fac8f73917db90f16.jpg?auto=format&dpr=1&w=640\"\n              alt=\"Profile Image\"\n            />\n          </div>\n          <div>\n            <p\n              style={{\n                fontFamily: \"Arial, sans-serif\",\n                fontSize: \"1.5rem\",\n                color: \"#CF574A\",\n              }}\n            >\n              Welcome to the Afropolitan Network!\n            </p>\n            <p\n              style={{\n                fontFamily: \"Arial, sans-serif\",\n                fontSize: \"1rem\",\n                color: \"#333\",\n                marginBottom: \"1rem\",\n              }}\n            >\n              Own an Afropolitan Network NFT to join the exclusive community\n            </p>\n            <button\n              style={{\n                marginTop: \"1rem\",\n                fontSize: \"1rem\",\n                padding: \"0.5rem 1rem\",\n                borderRadius: \"0.25rem\",\n                backgroundColor: \"#CF574A\",\n                color: \"white\",\n                border: \"none\",\n                boxShadow: \"0px 2px 5px rgba(0, 0, 0, 0.2)\",\n              }}\n              onClick={getNftContract}\n              disabled={state.loading}\n            >\n              Enter Network\n            </button>\n            <br />\n            {state.displayMsg ? (\n              <div style={{ fontSize: \"0.8rem\", textAlign: \"center\" }}>\n                Bye bye bro! Go get one from\n                <a\n                  href=\"https://opensea.io/collection/afropolitan\"\n                  style={{ textDecoration: \"none\", color: \"#CF574A\" }}\n                >\n                  here!\n                </a>\n                Can't let you get in :/\n              </div>\n            ) : (\n              <></>\n            )}\n          </div>\n        </div>\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/relayer.pagodaplatform.near/widget/AfropolitanXNear", "fact_widget_deployments_id": "d8381b1c97e91d63e7f15bd9ebd5fc44", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}