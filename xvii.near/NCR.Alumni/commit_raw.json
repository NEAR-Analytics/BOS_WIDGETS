{"tx_hash": "F2yVAj7ypYhFDKeWVjnTrhrWqRP8TiEhDr6S1vnxstxA", "action_id_social": "8mdUffnQ9XQAhh7wmKvqJi1z4FfDJrF1rC5WevaRdEb6-0-widget", "block_id": 118514609, "block_timestamp": "2024-05-08T15:57:29.115Z", "signer_id": "xvii.near", "widget_name": "NCR.Alumni", "source_code": "const accountId = props.accountId ?? context.accountId;\r\nconst daoId = props.daoId ?? \"research-collective.sputnik-dao.near\";\r\n\r\nconst policy = Near.view(daoId, \"get_policy\");\r\n\r\nif (!policy) {\r\n  return \"Loading...\";\r\n}\r\n\r\n// Filter only the \"alumni\" group\r\nconst alumniGroup = policy.roles.find((role) => role.name === \"alumni\");\r\n\r\n// Check if the alumni group exists\r\nif (!alumniGroup) {\r\n  return \"Alumni group not found\";\r\n}\r\n\r\n// Extract members of the alumni group\r\nconst alumniMembers = alumniGroup.kind.Group;\r\n\r\n// Styled components definitions\r\nconst Card = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 16px;\r\n  width: 100%;\r\n  border-radius: 12px;\r\n  background: #fff;\r\n  border: 1px solid #eceef0;\r\n  box-shadow: 0px 1px 3px rgba(16, 24, 40, 0.1),\r\n    0px 1px 2px rgba(16, 24, 40, 0.06);\r\n  overflow: hidden;\r\n  padding: 16px;\r\n`;\r\n\r\nconst CardLeft = styled.div`\r\n  display: flex;\r\n  gap: 16px;\r\n  align-items: center;\r\n  width: 100%;\r\n  min-width: 0;\r\n\r\n  > div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    min-width: 0;\r\n  }\r\n`;\r\n\r\nconst Avatar = styled.a`\r\n  width: 60px;\r\n  height: 60px;\r\n  flex-shrink: 0;\r\n  border: 1px solid #eceef0;\r\n  overflow: hidden;\r\n  border-radius: 56px;\r\n  transition: border-color 200ms;\r\n\r\n  img {\r\n    object-fit: cover;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  &:hover,\r\n  &:focus {\r\n    border-color: #d0d5dd;\r\n  }\r\n`;\r\n\r\nconst TextLink = styled.a`\r\n  display: block;\r\n  margin: 0;\r\n  font-size: 14px;\r\n  line-height: 18px;\r\n  color: ${(p) => (p.bold ? \"#11181C !important\" : \"#687076 !important\")};\r\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\r\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\r\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"visible\")};\r\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"unset\")};\r\n  white-space: nowrap;\r\n  outline: none;\r\n\r\n  &:focus,\r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TagsWrapper = styled.div`\r\n  padding-top: 4px;\r\n`;\r\n\r\n// Render profile cards for each alumni member\r\nconst renderAlumniProfileCard = (accountId) => {\r\n  const profile = Social.get(`${accountId}/profile/**`, \"final\");\r\n  const profileUrl = `#/near/widget/ProfilePage?accountId=${accountId}`;\r\n\r\n  return (\r\n    <Card>\r\n      <CardLeft>\r\n        <Avatar href={profileUrl}>\r\n          <Widget\r\n            src=\"mob.near/widget/Image\"\r\n            props={{\r\n              image: profile.image,\r\n              alt: profile.name,\r\n              fallbackUrl: \"https://via.placeholder.com/60\",\r\n            }}\r\n          />\r\n        </Avatar>\r\n\r\n        <div>\r\n          <TextLink href={profileUrl} ellipsis bold>\r\n            {profile.name || accountId.split(\".near\")[0]}\r\n          </TextLink>\r\n          <TextLink href={profileUrl} ellipsis>\r\n            @{accountId}\r\n          </TextLink>\r\n        </div>\r\n      </CardLeft>\r\n      {!!context.accountId && context.accountId !== accountId && (\r\n        <Widget\r\n          src=\"near/widget/FollowButton\"\r\n          props={{ accountId: accountId }}\r\n        />\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nreturn (\r\n  <div>\r\n    <h3>{alumniGroup.name}</h3>\r\n    {alumniMembers.map((member, index) => (\r\n      <div key={index}>{renderAlumniProfileCard(member)}</div>\r\n    ))}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/xvii.near/widget/NCR.Alumni", "fact_widget_deployments_id": "5e70d0c7f3118a7bfe4c348f2411fcd6", "inserted_timestamp": "2024-05-08T17:40:00.106Z", "modified_timestamp": "2024-05-08T17:40:00.106Z", "__row_index": 1}