{"tx_hash": "6UCujAiwZH2MN3MRR24VyD4wcgCibvCyYi9kCM2EEMbk", "action_id_social": "67EwGE3JU2qaQXkc4qSSgncisTp6YN85jmjGuAo6Do3q-0-widget", "block_id": 96660081, "block_timestamp": "2023-07-17T04:51:15.150Z", "signer_id": "sharddog.near", "widget_name": "SocialMarkdown", "source_code": "const renderMention =\n  props.renderMention ??\n  props.onMention ??\n  ((accountId) => (\n    <span key={accountId} className=\"d-inline-flex\" style={{ fontWeight: 500 }}>\n      <Widget\n        src=\"mob.near/widget/ProfileLine\"\n        props={{\n          accountId: accountId.toLowerCase(),\n          hideAccountId: true,\n          tooltip: true,\n        }}\n      />\n    </span>\n  ));\n\nconst onHashtag = props.onHashtag;\n\nconst Wrapper = styled.div`\n  word-break: break-word;\n  p {\n    white-space: pre-line;\n  }\n`;\n\nconst Embedded = styled.span`\n  white-space: normal;\n`;\n\nconst renderWidget =\n  props.renderWidget ??\n  props.onWidget ??\n  // URL pattern: scheme://authority/path?query#fragment\n  (({ url, scheme, authority, path, query }) => {\n    // widget URL now allows \"bos\" and \"near\" schemes\n    if (url && [\"bos\", \"near\"].includes(scheme) && authority && path) {\n      const location = authority + path;\n      const segments = location.split(\"/\");\n      if (segments && segments.length >= 3) {\n        const src = segments.slice(segments.length - 3).join(\"/\");\n        const props = {\n          ...{ markdown: props.text },\n          ...(query ?? {}),\n        };\n        return (\n          <Embedded className=\"embedded-widget\">\n            <Widget key={url} src={src} props={props} />\n          </Embedded>\n        );\n      }\n    } else if (url && url.includes(\"twitter.com\")) {\n      return (\n        <>\n          <blockquote class=\"twitter-tweet\">\n            <p lang=\"en\" dir=\"ltr\" />\n            <a href={url}></a>\n          </blockquote>{\" \"}\n          <script\n            async\n            src=\"https://platform.twitter.com/widgets.js\"\n            charset=\"utf-8\"\n          ></script>\n        </>\n      );\n    }\n    // If not a valid widget URL, return the original URL\n    return url;\n  });\n\nreturn (\n  <Wrapper>\n    <Markdown\n      text={props.text}\n      onMention={renderMention}\n      onHashtag={onHashtag}\n      onWidget={renderWidget}\n    />\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sharddog.near/widget/SocialMarkdown", "fact_widget_deployments_id": "2b8757d6090107e85bf0391744336d76", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 10}