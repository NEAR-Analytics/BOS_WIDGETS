{"tx_hash": "5SUutDxWNMV84Kf4BkFDTtHT9FyxQVLWaRmBJ16sZtQ8", "action_id_social": "9vrNR2nNQ9jFF6oariB6sPgBzQL6inxk3CVHATjvg5vD-0-widget", "block_id": 95775817, "block_timestamp": "2023-07-05T17:30:31.786Z", "signer_id": "sharddog.near", "widget_name": "JustFeed.MainPage.Content", "source_code": "const hashtag = props.hashtag;\nconst contractId = \"mint.sharddog.near\";\n\nif (!state || state.hashtag !== hashtag) {\n  State.update({\n    feedIndex: hashtag ? 2 : context.accountId ? 0 : 1,\n    hashtag,\n  });\n}\nconst options = [\n  {\n    title: \"My Feed\",\n    disabled: !context.accountId,\n  },\n  {\n    title: \"All Posts\",\n  },\n];\n\nif (hashtag) {\n  options.push({\n    title: `#${hashtag}`,\n  });\n}\n\nlet accounts = undefined;\n\nif (state.feedIndex === 0) {\n  const graph = Social.keys(`${context.accountId}/graph/follow/*`, \"final\");\n  if (graph !== null) {\n    accounts = Object.keys(graph[context.accountId].graph.follow || {});\n    accounts.push(context.accountId);\n  } else {\n    accounts = [];\n  }\n}\n\nif (!context.accountId) {\n  return (\n    <>\n      <div className=\"tab-content col-sm-10\">\n        <h3>Woof! Need to hold a ShardDog to view feed</h3>\n      </div>\n    </>\n  );\n}\nconst accountId = context.accountId;\n\nconst nftData = Near.view(contractId, \"nft_tokens_for_owner\", {\n  account_id: accountId,\n  limit: 100,\n});\n\nlet holder = false;\n\nnftData.forEach((item) => {\n  if (item.series_id === 19) {\n    holder = true;\n    return true;\n  }\n});\n\nif (holder === true) {\n  return (\n    <>\n      {context.accountId && (\n        <div className=\"mb-3\">\n          <Widget src=\"near/widget/Posts.Compose\" props={{}} />\n        </div>\n      )}\n      <ul className=\"nav nav-pills mb-3\">\n        {options.map((option, i) => (\n          <li className=\"nav-item\" key={i}>\n            <button\n              className={`nav-link ${state.feedIndex === i ? \"active\" : \"\"} ${\n                option.disabled ? \"disabled\" : \"\"\n              }`}\n              aria-disabled={!!option.disabled}\n              onClick={() => !option.disabled && State.update({ feedIndex: i })}\n            >\n              {option.title}\n            </button>\n          </li>\n        ))}\n      </ul>\n      {state.feedIndex === 2 ? (\n        <Widget src=\"mob.near/widget/Hashtag.Feed\" props={{ hashtag }} />\n      ) : (\n        <Widget src=\"mob.near/widget/MainPage.Feed.Beta\" props={{ accounts }} />\n      )}\n    </>\n  );\n} else {\n  return (\n    <>\n      <div className=\"tab-content col-sm-10\">\n        <h3>Woof! Need to hold a ShardDog to view feed</h3>\n      </div>\n    </>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sharddog.near/widget/JustFeed.MainPage.Content", "fact_widget_deployments_id": "ff383b53e4efd9c9094cbccaa1ad5d04", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 19}