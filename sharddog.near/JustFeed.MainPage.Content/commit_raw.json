{"tx_hash": "4AhgaVorDekdtKtY7GP3YCbb2nn39P7hY8ZwagwNA6iP", "action_id_social": "CNVPNStC9sKYqYQ9hWpE86skqAE1nPdENriiBm1L8Wr-0-widget", "block_id": 100591800, "block_timestamp": "2023-09-07T13:21:02.471Z", "signer_id": "sharddog.near", "widget_name": "JustFeed.MainPage.Content", "source_code": "const hashtag = props.hashtag;\nconst contractId = \"mint.sharddog.near\";\n\nif (!state || state.hashtag !== hashtag) {\n  State.update({\n    feedIndex: hashtag ? 2 : context.accountId ? 0 : 1,\n    hashtag,\n  });\n}\nconst options = [\n  {\n    title: \"My Feed\",\n    disabled: !context.accountId,\n  },\n  {\n    title: \"All Posts\",\n  },\n];\n\nif (hashtag) {\n  options.push({\n    title: `#${hashtag}`,\n  });\n}\n\nlet accounts = undefined;\n\nif (state.feedIndex === 0) {\n  const graph = Social.keys(`${context.accountId}/graph/follow/*`, \"final\");\n  if (graph !== null) {\n    accounts = Object.keys(graph[context.accountId].graph.follow || {});\n    accounts.push(context.accountId);\n  } else {\n    accounts = [];\n  }\n}\n\nif (!context.accountId) {\n  return (\n    <>\n      <div\n        className=\"tab-content col-sm-10 \"\n        style={{ textAlign: \"center\", paddingTop: \"20px\" }}\n      >\n        <h1>Welcome to ShardDog Social</h1>\n        <p>\n          <i>The future home of the Dog Park</i>\n        </p>\n        A platform built on NEAR\n        <br />\n        That's designed for{\" \"}\n        <span style={{ textDecoration: \"line-through\" }}>\n          projects, brands,{\" \"}\n        </span>\n        ANYONE\n        <br />\n        To easily connect & build their AUDIENCE\n        <br />\n        <br />\n        <div>\n          <img\n            src=\"https://my.shard.dog/images/sharddogNFT.jpeg\"\n            width=\"300px\"\n          />\n        </div>\n        <br />\n        <h4>\n          Woof! Sorry, you need to hold a Social ShardDog to view the feed.{\" \"}\n          <br />\n          Claim one from the link below!\n        </h4>\n        <p>\n          <a href=\"https://shard.dog/social\" target=\"_blank\">\n            Claim a social ShardDog today\n          </a>\n        </p>\n      </div>\n    </>\n  );\n}\nconst accountId = context.accountId;\n\nconst nftData = Near.view(contractId, \"nft_tokens_for_owner\", {\n  account_id: accountId,\n  limit: 1000,\n});\n\nlet holder = false;\n\nnftData.forEach((item) => {\n  if (item.series_id === 141) {\n    holder = true;\n    return true;\n  }\n});\n\nconst nftDataCount = Near.view(contractId, \"nft_supply_for_owner\", {\n  account_id: accountId,\n  limit: 1000,\n});\n\nlet canShare;\n//Nice work if you found the access link from here ;)\nif (nftDataCount > 2) {\n  canShare = \"Share this ShardDog to invite others: https://shard.dog/social\";\n}\n\nconst Greeting = () => {\n  const currentTime = new Date();\n  const currentHour = currentTime.getHours();\n  let greeting;\n\n  if (currentHour < 12) {\n    greeting = \"Good morning\";\n  } else if (currentHour < 18) {\n    greeting = \"Good afternoon\";\n  } else {\n    greeting = \"Good evening\";\n  }\n\n  return <span>{greeting}</span>;\n};\n\nif (holder) {\n  return (\n    <>\n      {context.accountId && (\n        <div className=\"mb-3\">\n          <Widget src=\"sharddog.near/widget/Posts.Compose\" props={{}} />\n        </div>\n      )}\n      <p>\n        <Greeting />, you currently hold <b>{nftDataCount} </b> ShardDogs <br />\n        This is a beta, feedback is welcome \ud83d\udc36\n      </p>\n      {state.feedIndex === 2 ? (\n        <Widget src=\"mob.near/widget/Hashtag.Feed\" props={{ hashtag }} />\n      ) : (\n        <Widget\n          src=\"sharddog.near/widget/MainPage.Feed.Beta\"\n          props={{ accounts }}\n        />\n      )}\n    </>\n  );\n} else {\n  return (\n    <>\n      <div className=\"tab-content col-sm-10 \" style={{ textAlign: \"center,\" }}>\n        <h1>Welcome to ShardDog</h1>\n        <br />\n        <div>\n          <img\n            src=\"https://my.shard.dog/images/sharddogNFT.jpeg\"\n            width=\"300px\"\n          />\n        </div>\n        <br />\n        <h3>\n          Woof! Sorry, you need to hold a Social ShardDog to view the feed\n        </h3>\n        <p>\n          <a href=\"https://shard.dog/social\" target=\"_blank\">\n            Claim a social ShardDog today\n          </a>\n        </p>\n      </div>\n    </>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sharddog.near/widget/JustFeed.MainPage.Content", "fact_widget_deployments_id": "9f966177b47c5abadc060ff07126d7bc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}