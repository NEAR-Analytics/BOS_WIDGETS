{"tx_hash": "Fr7ceTi2X6NmuYqUkzTbmh8rs2idNorxbWxbSjE5U8yE", "action_id_social": "2hLZzWeyySjqDQ2PJUjyn3x5Z4BUAEU8TyVu5jwnMhyt-0-widget", "block_id": 99268799, "block_timestamp": "2023-08-20T21:01:08.284Z", "signer_id": "sharddog.near", "widget_name": "NotificationButton", "source_code": "const notificationFeedSrc = \"sharddog.near/widget/NotificationFeed\";\n\nconst render = (counter, disabled) => {\n  const className = \"btn p-0 btn-sm border-0 link-dark\";\n  const inner = (\n    <>\n      <i className=\"fs-4 bi bi-bell\"></i>\n      {counter !== undefined && counter > 0 && (\n        <span\n          className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary\"\n          style={{ zIndex: 1, border: \"1px solid rgb(9,66,150)\" }}\n        >\n          {counter}\n        </span>\n      )}\n    </>\n  );\n  return (\n    <div className=\"d-inline position-relative\">\n      {disabled ? (\n        <button disabled className={className}>\n          {inner}\n        </button>\n      ) : (\n        <a className={className} href={`#/${notificationFeedSrc}`}>\n          {inner}\n        </a>\n      )}\n    </div>\n  );\n};\n\nconst accountId = context.accountId;\n\nif (context.loading || !accountId) {\n  return render(0, true);\n}\n\nconst lastBlockHeight = Storage.get(\"lastBlockHeight\", notificationFeedSrc);\nif (lastBlockHeight === null) {\n  return render(0, true);\n}\n\nconst notifications = Social.index(\"notify\", accountId, {\n  order: \"asc\",\n  from: (lastBlockHeight ?? 0) + 1,\n  subscribe: true,\n});\nreturn render(notifications.length, false);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/sharddog.near/widget/NotificationButton", "fact_widget_deployments_id": "8c87a5eace7b8bf7d2323c05c96f9a8b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}