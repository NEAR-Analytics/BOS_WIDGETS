{"tx_hash": "BypkKm9rYpykSKJ6H7xFNiwiqUdv4XiaF1nCjVqdDPEx", "action_id_social": "6KyyC5CM4LoWNcZiXJMmqggGg6grrb9buoQxYb1j2pxm-0-widget", "block_id": 110577102, "block_timestamp": "2024-01-16T21:22:41.499Z", "signer_id": "evaluator.near", "widget_name": "Pages.Progress", "source_code": "if (context.loading) {\n  return;\n}\n\nconst { evaluatorContract } = props;\n\n// TODO: add colors here so we can iterate over the array\nconst curriculum = [{\n  name: \"Hello Near\",\n  subtext: \"\",\n  path: \"evaluator.near/widget/Curriculum.HelloNear\",\n  color: \"lime\"\n},\n{\n  name: \"Guest-book\",\n  subtext: \"\",\n  path: \"evaluator.near/widget/Curriculum.GuestBook\",\n  color: \"pink\"\n},\n{\n  name: \"Handle Complex Input\",\n  subtext: \"\",\n  path: \"evaluator.near/widget/Curriculum.ComplexInput\",\n  color: \"indigo\"\n},\n{\n  name: \"Cross Contract Calls\",\n  subtext: \"\",\n  path: \"evaluator.near/widget/Curriculum.XCC\",\n  color: \"amber\"\n},\n  // {\n  //   name: \"Complex Input\",\n  //   subtext: \"(Advanced)\",\n  //   path: \"evaluator.near/widget/Curriculum.CrossContractCalls\",\n  //   color: \"sky\"\n  // }\n];\n\nfunction claimNFT() {\n  return Near.call(evaluatorContract, \"claim_nft\", {});\n}\n\n\nfunction progress() {\n  if (context.accountId === null) {\n    return [false, false, false, false];\n  }\n  else {\n    return Near.view(evaluatorContract, \"get_progress\", { account_id: context.accountId });\n  }\n}\n\nconst passedEvaluationsCount = progress().filter(v => v === true).length;\nconst evaluationsCount = curriculum.length;\nconst eligibleToClaimNFT = passedEvaluationsCount === evaluationsCount;\n\nfunction DONE() {\n  return <>\n    <div class=\"h-1/5 flex justify-end px-2 \">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\"\n        stroke=\"currentColor\" class=\"w-6 h-6\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n          d=\"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n      <span>Well Done!</span>\n    </div>\n  </>\n}\n\nfunction Item({ lesson, isPassed }) {\n  return <>\n    <div class=\"rounded-2xl w-52 h-60 bg-gray-100 shadow-xl border-4 border-gray-800 flex flex-col mr-4 mt-4\">\n      <div class={`bg-${lesson.color}-300 rounded-t-xl h-4/5 p-4`} style={{ clipPath: `polygon(100% 0, 100% 85%, 0 95%, 0 0)` }}>\n        <h3 class=\"text-4xl font-bold leading-none text-gray-800\">{lesson.name}</h3>\n        {lesson.subtext !== \"\" ? <p class=\"text-xl\">{lesson.subtext}</p> : \"\"}\n      </div>\n\n      <div class=\"h-1/5 text-right px-2\">\n        {isPassed\n          ? <DONE />\n          : <button class={`rounded-lg bg-${lesson.color}-300 font-bold py-1 px-2 text-sm hover:bg-${lesson.color}-400`} onClick={() => props.redirectTo({ path: lesson.path, bindings: {} })}>Go to lesson</button>}\n      </div>\n    </div>\n  </>\n}\n\nreturn <>\n  <h1 class=\"text-6xl font-bold\">Your Progress: {`${passedEvaluationsCount} /${evaluationsCount}`}</h1 >\n  {/* Claim NFT */}\n  {eligibleToClaimNFT == true &&\n    <div class=\"w-full text-gray-100 bg-blue-600 rounded-2xl py-4 px-4 mt-4 text-lg\">\n      <h2 class=\"text-6xl font-bold\">Congratulations!</h2>\n      <p class=\"mt-2 \">You have successfully completed all of the tasks and therefore eligible to claim your honorary NFT badge!</p>\n      <button class=\"bg-gray-100 rounded-lg text-blue-600 py-2 px-4 mt-2 hover:bg-blue-700 hover:text-white\" onClick={claimNFT}>Claim your badge now</button>\n    </div>\n  }\n  {/* Tasks Cards */}\n  <div class=\"flex flex-wrap\">\n    {curriculum.map((lesson, i) => {\n      return <Item lesson={lesson} isPassed={progress()[i]} />\n    })}\n  </div>\n</>\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/evaluator.near/widget/Pages.Progress", "fact_widget_deployments_id": "f9819b26be6f320acd0c02b873aea90f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}