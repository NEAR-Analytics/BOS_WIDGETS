{"tx_hash": "HUgXBvmbS5ssYQ3qXbNYVDWRT3R8ohdDr9A3DorSbb7d", "action_id_social": "3gWGXERUwU9wJ5co3icc67ZNHTbCa38f59U2rHzA4UMf-0-widget", "block_id": 110720024, "block_timestamp": "2024-01-18T14:37:53.622Z", "signer_id": "evaluator.near", "widget_name": "Modal", "source_code": "const [showModal, setShowModal] = useState(false);\nconst [txDetails, setTxDetails] = useState(null);\n\n// TODO: SWITCH to give the functions calls \n\nfunction Modal({ onClose, show, children, successValue }) {\n  if (!show) {\n    return <></>;\n  }\n\n  return (\n    <div\n      class=\"modal-backdrop\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(0,0,0,0.3)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 2\n      }}\n      onClick={() => {\n        // close modal when outside of modal is clicked\n        onClose();\n      }}\n    >\n      <div\n        class=\"rounded-lg bg-white shadow-lg px-4 py-4\"\n        style={{\n          width: '60%',\n          minHeight: '200px',\n          padding: '25px',\n        }}\n        onClick={e => {\n          // do not close modal if anything inside modal content is clicked\n          e.stopPropagation();\n        }}\n      >\n        <div class={`rounded-lg border-2 ${success ? \"border-lime-300\" : \"border-red-300\"} py-4 px-4`}>\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nuseEffect(() => {\n  if (props.transactionHashes) {\n    const transaction = asyncFetch(\"https://rpc.mainnet.near.org\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        jsonrpc: \"2.0\",\n        id: \"dontcare\",\n        method: \"tx\",\n        params: [props.transactionHashes, context.accountId],\n      }),\n    }).then((tx) => {\n      console.log(tx);\n      setShowModal(true);\n\n      const txMethodName =\n        tx?.body?.result?.transaction?.actions[0].FunctionCall.method_name;\n      const txLink = `https://nearblocks.io/txns/${props.transactionHashes}`;\n      const txResultValue = tx?.body?.result;\n      console.log(txResultValue);\n\n      console.log(tx);\n\n      setTxDetails({\n        txMethodName,\n        txLink,\n        txResultValue\n      });\n\n    });\n  }\n}, []);\n\nconst closeModal = () => {\n  setShowModal(false);\n}\n\nreturn (\n  <Modal show={showModal} onClose={closeModal} success={txDetails.txResultValue}>\n    <h2>{txDetails.txResultValue}</h2>\n\n    <p>Method: {txDetails.txMethodName}</p>\n    <div class=\"flex justify-end\">\n      <p class=\"font-bold\">Check your transaction:\n        <a href={txDetails.txLink} class=\"border rounded py-1 px-3\">here</a></p>\n    </div>\n  </Modal>\n)\n\n\n\n\n\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/evaluator.near/widget/Modal", "fact_widget_deployments_id": "f108d2cda4f99e7559b7b57924de9b6e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}