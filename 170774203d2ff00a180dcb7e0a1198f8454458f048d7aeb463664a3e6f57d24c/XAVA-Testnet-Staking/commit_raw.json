{"tx_hash": "3Puhntzw4jyBXTeAFnDxZN3MFzCKy7CBSTjJbTei25SY", "action_id_social": "6NWvpZwEamqFDuPjoRciiCnt9toRioxJxQxz5KZE4u3S-0-widget", "block_id": 95834959, "block_timestamp": "2023-07-06T11:42:25.477Z", "signer_id": "170774203d2ff00a180dcb7e0a1198f8454458f048d7aeb463664a3e6f57d24c", "widget_name": "XAVA-Testnet-Staking", "source_code": "if (state.user === undefined) {\n  State.update({ user: Ethers.send(\"eth_requestAccounts\", [])[0] });\n}\n\nif (!state.user) return <Web3Connect />;\n\nconst XAVA_ADDRESS = \"0x64E7AB33C8764a9285cbd48A3b5977c51D2eE645\";\n\nconst ERC20_ABI = fetch(\n  \"https://gist.githubusercontent.com/veox/8800debbf56e24718f9f483e1e40c35c/raw/f853187315486225002ba56e5283c1dba0556e6f/erc20.abi.json\"\n);\nif (!ERC20_ABI.ok) {\n  return <p>\"Loading\"</p>;\n}\n\n// GET XAVA BALANCE\nconst tokenIface = new ethers.utils.Interface(ERC20_ABI.body);\nconst getXavaBalance = () => {\n  const encodedData = tokenIface.encodeFunctionData(\"balanceOf\", [state.user]);\n\n  return Ethers.provider()\n    .call({\n      to: XAVA_ADDRESS,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      const receiverBalanceHex = tokenIface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      return Big(receiverBalanceHex.toString())\n        .div(Big(10).pow(18))\n        .toFixed(2)\n        .replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\");\n    });\n};\n\nconst setXavaBalance = () => {\n  getXavaBalance().then((xavaBalance) => {\n    console.log(xavaBalance);\n    State.update({ xavaBalance });\n  });\n};\n\nif (state.xavaBalance === undefined && state.user) {\n  setXavaBalance();\n}\n\nreturn <div>Hello World {state.xavaBalance} </div>;\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/170774203d2ff00a180dcb7e0a1198f8454458f048d7aeb463664a3e6f57d24c/widget/XAVA-Testnet-Staking", "fact_widget_deployments_id": "6d721bf7ff78e2695558364229d02546", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 4}