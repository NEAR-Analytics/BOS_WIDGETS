{"tx_hash": "4BfFWE1bcuRadQP9tdZxy43m2VrwMDAqM6un2TDubupx", "action_id_social": "AWfCJ4NigQGXfRVYoDKudtNRw3G8KFWzg7QBSFDMijP5-0-widget", "block_id": 105304873, "block_timestamp": "2023-11-09T16:08:04.611Z", "signer_id": "everycanvas.near", "widget_name": "app", "source_code": "const Container = styled.div`\n  display: flex;\n  height: 100vh;\n  width: 100%;\n`;\n\nconst Panel = styled.div`\n  flex: 1;\n  border: 1px solid black;\n  overflow: hidden;\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: stretch;\n  height: 100%;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n  border-bottom: 1px solid black;\n`;\n\nconst Select = styled.select``;\n\nconst Option = styled.option``;\n\nconst Button = styled.button``;\n\nfunction PanelHeader({ options, onChange }) {\n  return (\n    <Header>\n      <Select onChange={(e) => onChange(e.target.value)}>\n        {options &&\n          options.map((it) => <Option value={it.value}>{it.label}</Option>)}\n      </Select>\n      <Button\n        onClick={() =>\n          Social.set({\n            index: {\n              every: JSON.stringify({\n                key: \"thing\", // type\n                value: {\n                  src: \"efiz.near/widget/Tree\",\n                },\n              }),\n            },\n          })\n        }\n      >\n        Publish\n      </Button>\n    </Header>\n  );\n}\n\nconst [editorValue, setEditorValue] = useState(\"\");\nconst [editorSrc, setEditorSrc] = useState(\n  \"everycanvas.near/widget/markdown.edit\"\n);\nconst [viewerSrc, setViewerSrc] = useState(\n  \"everycanvas.near/widget/markdown.view\"\n);\nconst [selectedItem, setSelectedItem] = useState(null);\n\nfunction handleEditorSrcChange(value) {\n  setEditorSrc(value);\n}\n\nfunction handleViewerSrcChange(value) {\n  setViewerSrc(value);\n}\n\nfunction Editor({ value, setEditorValue }) {\n  return (\n    <Widget\n      src={\"everycanvas.near/widget/provider\"}\n      props={{\n        path: value,\n        editorValue,\n        blockHeight: \"final\",\n        setEditorValue,\n        Children: (p) => <Widget src={editorSrc} props={p} />,\n      }}\n    />\n  );\n}\n\nfunction Viewer({ value }) {\n  return <Widget src={viewerSrc} props={{ value }} />;\n}\n\nfunction Sidebar() {\n  return (\n    <Widget\n      src=\"everycanvas.near/widget/sidebar\"\n      props={{ handleItemClick: (v) => setSelectedItem(v) }}\n    />\n  );\n}\n\nreturn (\n  <Container>\n    <Panel style={{ maxWidth: \"200px\" }}>\n      <Wrapper key={editorSrc}>\n        <Sidebar />\n      </Wrapper>\n    </Panel>\n    <Panel>\n      <PanelHeader\n        options={[\n          {\n            value: \"everycanvas.near/widget/markdown.edit\",\n            label: \"Markdown\",\n          },\n          { value: \"everycanvas.near/widget/code.edit\", label: \"Code\" },\n          { value: \"everycanvas.near/widget/canvas.edit\", label: \"Canvas\" },\n        ]}\n        onChange={handleEditorSrcChange}\n      />\n      <Wrapper key={editorSrc}>\n        <Editor value={selectedItem} setEditorValue={setEditorValue} />\n      </Wrapper>\n    </Panel>\n    <Panel>\n      <PanelHeader\n        options={[\n          {\n            value: \"everycanvas.near/widget/markdown.view\",\n            label: \"Markdown\",\n          },\n          { value: \"everycanvas.near/widget/code.view\", label: \"Code\" },\n          { value: \"everycanvas.near/widget/canvas.view\", label: \"Canvas\" },\n        ]}\n        onChange={handleViewerSrcChange}\n      />\n      <Wrapper key={viewerSrc}>\n        <Viewer value={editorValue} />\n      </Wrapper>\n    </Panel>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/everycanvas.near/widget/app", "fact_widget_deployments_id": "89e7ae4d17de9a84b4abd3279352bd49", "inserted_timestamp": "2023-11-09T18:18:31.222Z", "modified_timestamp": "2023-11-09T18:18:31.222Z", "__row_index": 54}