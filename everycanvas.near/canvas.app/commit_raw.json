{"tx_hash": "5HCiLFEM5p3Jad8TfBpZVJj2eKod9EvJdSrXyAU22x6H", "action_id_social": "8MGshsNr8GGmK7wughosRXtYXexmhiYgDa1WoihJ6E2M-0-widget", "block_id": 105309539, "block_timestamp": "2023-11-09T17:33:12.182Z", "signer_id": "everycanvas.near", "widget_name": "canvas.app", "source_code": "const canvasSrc = props.canvasSrc || \"efiz.near/thing/canvas\";\n\nconst accountId = context.accountId;\n\nconst Container = styled.div`\n  height: 95vh;\n  width: 100%;\n`;\n\nlet data;\n\nif (canvasSrc) {\n  data = JSON.parse(Social.get(canvasSrc, \"final\") || \"null\");\n\n  if (!data) {\n    return <Container>Invalid canvas</Container>;\n  }\n} else {\n  data = JSON.parse(Social.get(\"*/thing/canvas\", \"final\") || \"null\");\n}\n\nconst [snapshot, setSnapshot] = useState(data);\n\nconst [trigger, setTrigger] = useState(false);\nconst [canvasSnapshot, setCanvasSnapshot] = useState(null);\n\nconst getDataFromChild = () => {\n  setTrigger(true); // Triggers the effect in the child\n};\n\nconst handleDataFromChild = (data) => {\n  setCanvasSnapshot(data);\n  setTrigger(false); // Reset the trigger\n};\n\nconst handlePublish = () => {\n  Social.set({\n    thing: {\n      canvas: canvasSnapshot,\n    },\n  });\n};\n\nconst Button = styled.button``;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  // height: auto;\n`;\n\nreturn (\n  <Container>\n    <Canvas\n      initialSnapshot={snapshot}\n      trigger={trigger}\n      onGetData={handleDataFromChild}\n      persistance={canvasSrc}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/everycanvas.near/widget/canvas.app", "fact_widget_deployments_id": "a2fce1b712e73d5dc2746e4ea629fbf4", "inserted_timestamp": "2023-11-09T19:32:51.241Z", "modified_timestamp": "2023-11-09T19:32:51.241Z", "__row_index": 2}