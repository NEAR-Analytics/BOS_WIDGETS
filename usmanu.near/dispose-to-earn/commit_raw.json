{"tx_hash": "FUErqSbR5cag5qKmWZntrd5c58R4xHPtJafNW2rR9SSM", "action_id_social": "GJLCZzwYKqTrwSfbfrT1CQhE48TAt6rRnQ4iqPKP5jp5-0-widget", "block_id": 107902698, "block_timestamp": "2023-12-14T06:25:41.509Z", "signer_id": "usmanu.near", "widget_name": "dispose-to-earn", "source_code": "const [users, setUsers] = useState([]);\r\nconst [name, setName] = useState(\"\");\r\nconst [address, setAddress] = useState(\"\");\r\nconst [waste, setWaste] = useState(\"\");\r\n\r\nconst handleFormSubmit = () => {\r\n  const existingUserIndex = users.findIndex((user) => user.name === name);\r\n\r\n  if (existingUserIndex !== -1) {\r\n    const updatedUsers = [...users];\r\n    updatedUsers[existingUserIndex].waste += Number(waste);\r\n    setUsers(updatedUsers);\r\n  } else {\r\n    const newUser = { name, address, waste: Number(waste) };\r\n    setUsers([...users, newUser]);\r\n  }\r\n\r\n  setName(\"\");\r\n  setAddress(\"\");\r\n  setWaste(\"\");\r\n};\r\n\r\nconst tableCellStyle = {\r\n  border: \"1px solid #ddd\",\r\n  padding: \"8px\",\r\n  textAlign: \"left\",\r\n  backgroundColor: \"#f2f2f2\",\r\n};\r\n\r\nconst handlePayClick = (index) => {\r\n  const updatedUsers = [...users];\r\n  updatedUsers[index].status = \"Paid\";\r\n  updatedUsers[index].waste = 0;\r\n  updatedUsers[index].rewardAmount = 0;\r\n  setUsers(updatedUsers);\r\n};\r\n\r\nconst generateRows = () => {\r\n  return users.map((user, index) => (\r\n    <tr key={user.name}>\r\n      <td>{user.name}</td>\r\n      <td>{user.address}</td>\r\n      <td>{user.waste}</td>\r\n      <td>N{200 * user.waste}</td>\r\n      <td style={tableCellStyle}>\r\n        {user.status !== \"Paid\" ? (\r\n          <button\r\n            onClick={() => handlePayClick(index)}\r\n            disabled={user.status === \"Paid\"}\r\n          >\r\n            {user.status === \"Paid\" ? \"Paid\" : \"Pay\"}\r\n          </button>\r\n        ) : (\r\n          \"Paid\"\r\n        )}\r\n      </td>\r\n    </tr>\r\n  ));\r\n};\r\n\r\nreturn (\r\n  <div style={{ maxWidth: \"800px\", margin: \"auto\", padding: \"20px\" }}>\r\n    <hr />\r\n    <h1 style={{ textAlign: \"center\", color: \"green\" }}>Dispose To Earn \ud83d\uddd1\ufe0f</h1>\r\n    <h6 style={{ textAlign: \"center\", color: \"green\" }}>Keep Nigeria clean</h6>\r\n    <hr />\r\n    <div style={{ marginBottom: \"15px\" }}>\r\n      <label style={{ display: \"block\", marginBottom: \"5px\" }}>\r\n        Name:\r\n        <input\r\n          type=\"text\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          style={{ width: \"100%\", padding: \"8px\" }}\r\n        />\r\n      </label>\r\n    </div>\r\n    <div style={{ marginBottom: \"15px\" }}>\r\n      <label style={{ display: \"block\", marginBottom: \"5px\" }}>\r\n        Address:\r\n        <input\r\n          type=\"text\"\r\n          value={address}\r\n          onChange={(e) => setAddress(e.target.value)}\r\n          style={{ width: \"100%\", padding: \"8px\" }}\r\n        />\r\n      </label>\r\n    </div>\r\n    <div style={{ marginBottom: \"15px\" }}>\r\n      <label style={{ display: \"block\", marginBottom: \"5px\" }}>\r\n        Waste (kg):\r\n        <input\r\n          type=\"number\"\r\n          value={waste}\r\n          onChange={(e) => setWaste(e.target.value)}\r\n          style={{ width: \"100%\", padding: \"8px\" }}\r\n        />\r\n      </label>\r\n    </div>\r\n    <button\r\n      type=\"button\"\r\n      onClick={handleFormSubmit}\r\n      style={{\r\n        width: \"100%\",\r\n        padding: \"10px\",\r\n        background: \"#4CAF50\",\r\n        color: \"white\",\r\n        border: \"none\",\r\n        borderRadius: \"5px\",\r\n        cursor: \"pointer\",\r\n      }}\r\n    >\r\n      Submit\r\n    </button>\r\n    <br />\r\n    <br />\r\n    <hr />\r\n    <table\r\n      style={{ borderCollapse: \"collapse\", width: \"100%\", marginTop: \"20px\" }}\r\n    >\r\n      <thead>\r\n        <tr>\r\n          <th style={tableCellStyle}>Name</th>\r\n          <th style={tableCellStyle}>Address</th>\r\n          <th style={tableCellStyle}>Waste (kg)</th>\r\n          <th style={tableCellStyle}>Reward Amount</th>\r\n          <th style={tableCellStyle}>Payment Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>{generateRows()}</tbody>\r\n    </table>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/usmanu.near/widget/dispose-to-earn", "fact_widget_deployments_id": "606dcf2e2e83e7aa820c758ded99eb6c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}