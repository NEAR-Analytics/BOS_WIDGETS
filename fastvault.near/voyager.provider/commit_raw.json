{"tx_hash": "7AnNCuQydJg5Y3t9VZhuSHkUQBvLjMEo498HrJ1vZsBA", "action_id_social": "Gm1LHfCRg9U5qYrWoVHWxkt5MpznrQ6JtZX1an6p45Y-0-widget", "block_id": 107462851, "block_timestamp": "2023-12-08T20:30:37.608Z", "signer_id": "fastvault.near", "widget_name": "voyager.provider", "source_code": "const path = props.path || context.accountId;\n\nif (!path) return <p>Please login.</p>;\n\nState.init({\n  layout: \"LIST\",\n  path,\n  history: [path],\n  currentHistoryIndex: 0,\n  showPreview: false,\n  selectedPath: \"\",\n  filesSource: \"BOS_IPFS\",\n});\n\nfunction isNearAccount(str) {\n  return typeof str === \"string\" && str.endsWith(\".near\");\n}\n\nfunction setPath(v) {\n  const updatedHistory = state.history\n    .slice(0, state.currentHistoryIndex + 1)\n    .concat(v);\n\n  const parts = v.split(\"/\");\n  const lastPart = parts[parts.length - 1];\n  if (isNearAccount(lastPart)) {\n    v = lastPart;\n  }\n\n  State.update({\n    path: v,\n    history: updatedHistory,\n    currentHistoryIndex: updatedHistory.length - 1,\n  });\n}\n\nfunction setFilesSource(source) {\n  State.update({\n    filesSource: source,\n  });\n  console.log(\"File source set to:\", state.filesSource);\n}\n\nfunction goBack() {\n  // Check if we can go back\n  if (state.currentHistoryIndex > 0) {\n    const newIndex = state.currentHistoryIndex - 1;\n    State.update({\n      currentHistoryIndex: newIndex,\n      path: state.history[newIndex],\n    });\n  }\n}\n\nfunction goForward() {\n  // Check if we can go forward\n  if (state.currentHistoryIndex < state.history.length - 1) {\n    const newIndex = state.currentHistoryIndex + 1;\n    State.update({\n      currentHistoryIndex: newIndex,\n      path: state.history[newIndex],\n    });\n  }\n}\n\nfunction setSelectedPath(v) {\n  State.update({ selectedPath: v });\n}\n\nfunction setHistory(v) {\n  State.update({ history: v });\n}\n\nfunction setLayout(v) {\n  State.update({ layout: v });\n}\n\nfunction togglePreview() {\n  State.update({ showPreview: !state.showPreview });\n}\n\nconst Children = props.Children;\n\nreturn (\n  <Children\n    setPath={setPath}\n    setFilesSource={setFilesSource}\n    setHistory={setHistory}\n    setLayout={setLayout}\n    showPreview={state.showPreview}\n    togglePreview={togglePreview}\n    selectedPath={state.selectedPath}\n    setSelectedPath={setSelectedPath}\n    path={state.path}\n    layout={state.layout}\n    goBack={goBack}\n    goForward={goForward}\n    password={props.password}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/fastvault.near/widget/voyager.provider", "fact_widget_deployments_id": "29d96ef18e0313845d3e0eb0c00e925e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}