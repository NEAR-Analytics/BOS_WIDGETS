{"tx_hash": "G65HbymbDKaY5HBDtFEkAtUqevxMzYW7kZeKWCB1xLsB", "action_id_social": "3jByZjFUwhXGmsPqkKFgsydYPTHvDntyRsNU6jYVNFfh-0-widget", "block_id": 107505135, "block_timestamp": "2023-12-09T09:06:29.264Z", "signer_id": "indonesiaguild.near", "widget_name": "CRM", "source_code": "const members = props.members || [];\nconst data = members\n  .flatMap((member) => Social.keys(`${member}/profile/`, \"final\"))\n  .reduce((obj, item) => Object.assign(obj, item), {});\nconst telegram = members\n  .flatMap((member) =>\n    Social.keys(`${member}/profile/linktree/telegram`, \"final\")\n  )\n  .reduce((obj, item) => Object.assign(obj, item), {});\nconst github = members\n  .flatMap((member) =>\n    Social.keys(`${member}/profile/linktree/github`, \"final\")\n  )\n  .reduce((obj, item) => Object.assign(obj, item), {});\nconst twitter = members\n  .flatMap((member) =>\n    Social.keys(`${member}/profile/linktree/twitter`, \"final\")\n  )\n  .reduce((obj, item) => Object.assign(obj, item), {});\nconst website = members\n  .flatMap((member) =>\n    Social.keys(`${member}/profile/linktree/website`, \"final\")\n  )\n  .reduce((obj, item) => Object.assign(obj, item), {});\n\nif (!data || !telegram || !github || !twitter || !website) {\n  return \"Loading...\";\n}\n\nconst withData = new Set([...Object.keys(data)]);\nconst withTelegram = new Set([...Object.keys(telegram)]);\nconst withGitHub = new Set([...Object.keys(github)]);\nconst withTwitter = new Set([...Object.keys(twitter)]);\nconst withWebsite = new Set([...Object.keys(website)]);\n\nconst [filterBy, setFilterBy] = useState(withData);\n\nconst profilesPerPage = 10;\n\nconst [currentPage, setCurrentPage] = useState(1);\n\nconst startIndex = (currentPage - 1) * profilesPerPage;\n\nconst endIndex = startIndex + profilesPerPage;\n\nconst displayedProfiles = [...filterBy].slice(startIndex, endIndex);\n\nconst handlePageChange = (page) => {\n  setCurrentPage(page);\n};\n\nconst totalPages = Math.ceil(\n  Object.keys(data).filter((accountId) => filterBy.has(accountId)).length /\n    profilesPerPage\n);\n\nconst accounts = displayedProfiles.map((accountId) => (\n  <div className=\"m-2\" key={accountId}>\n    <hr />\n\n    <Widget src=\"hack.near/widget/profile.linktree\" props={{ accountId }} />\n  </div>\n));\n\nreturn (\n  <div>\n    <h3 className=\"m-2 mb-3\">Community Members</h3>\n    <br />\n    <div className=\"flex-row m-2\">\n      <h5>Filter</h5>\n      <button\n        onClick={() => setFilterBy(withTwitter)}\n        disabled={filterBy === withTwitter}\n      >\n        Twitter\n      </button>\n      <button\n        onClick={() => setFilterBy(withGitHub)}\n        disabled={filterBy === withGitHub}\n      >\n        GitHub\n      </button>\n      <button\n        onClick={() => setFilterBy(withTelegram)}\n        disabled={filterBy === withTelegram}\n      >\n        Telegram\n      </button>\n      <button\n        onClick={() => setFilterBy(withWebsite)}\n        disabled={filterBy === withWebsite}\n      >\n        Website\n      </button>\n      <button\n        onClick={() => setFilterBy(withData)}\n        disabled={filterBy === withData}\n      >\n        Reset\n      </button>\n    </div>\n    <br />\n    <h5 className=\"m-2 mb-3\">{[...filterBy].length} total</h5>\n    <div className=\"m-2\">{accounts}</div>\n    <div className=\"m-3\">\n      <hr />\n      <button\n        onClick={() => handlePageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n      >\n        Previous Page\n      </button>\n      <button\n        onClick={() => handlePageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n      >\n        Next Page\n      </button>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/indonesiaguild.near/widget/CRM", "fact_widget_deployments_id": "19e3d1ad2d8fbf02b83f81885e84d491", "inserted_timestamp": "2023-12-09T10:54:11.745Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}