{"tx_hash": "EktET1xWSdC4dhGNeFmfyDYJBZULRtStkhQetpLCUxAr", "action_id_social": "8awe4j8rNAkKjHbgwY1Gw2AdGc5LGsLNifA82VaFukri-0-widget", "block_id": 99330475, "block_timestamp": "2023-08-21T16:15:20.126Z", "signer_id": "y3k.near", "widget_name": "near_atlas.components.vis.DAUbyNFTs", "source_code": "let raw_data = fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/6728e603-7140-48b7-b735-20c0cf6e54ee/data/latest\",\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\nconst data = raw_data.body || [];\n\nlet Style = styled.div`\n                `;\n\n// logic start\n\nconst sortedData = data.sort((a, b) => {\n  return new Date(a[\"DATE\"]) - new Date(b[\"DATE\"]);\n});\n\nconst N_USERS = {};\nconst TXS = {};\nconst dates = [];\n\nsortedData.map((entry) => {\n  const date = entry[\"DATE\"];\n  N_USERS[date] = entry[\"N_USERS\"];\n  TXS[date] = entry[\"TXS\"];\n  dates.push(date);\n});\n\n// const sortedEntries_N_USERS = Object.entries(N_USERS).sort((a, b) => {\n//   return new Date(a[0]) - new Date(b[0]);\n// });\n// const sortedN_USERS = Object.fromEntries(sortedEntries_N_USERS);\n\n// const sortedEntries_TXS = Object.entries(TXS).sort((a, b) => {\n//   return new Date(a[0]) - new Date(b[0]);\n// });\n// const sortedTXS = Object.fromEntries(sortedEntries_TXS);\n// N_USERS = N_USERS.sort((a, b) => {\n//   return new Date(a[\"DATE\"]) - new Date(b[\"DATE\"]);\n// });\n\n// TXS = TXS.sort((a, b) => {\n//   return new Date(a[\"DATE\"]) - new Date(b[\"DATE\"]);\n// });\n\n// const dates = sortedData.map((entry) => entry[\"DATE\"]);\n\n// console.log(N_USERS);\n\n// logic part-2\n\nconst stacked_options = {\n  responsive: true,\n  scales: {\n    y: {\n      stacked: true,\n      grid: {\n        color: \"rgb(41,51,64)\", // This will change the gridline color\n        borderColor: \"rgb(240,255,240)\",\n      },\n      ticks: {\n        color: \"rgb(240,255,240)\", // This will change the axis text label color\n      },\n    },\n    x: {\n      stacked: true,\n      grid: {\n        color: \"rgb(41,51,64)\", // This will change the gridline color\n      },\n      ticks: {\n        color: \"rgb(240,255,240)\", // This will change the axis text label color\n      },\n    },\n  },\n};\nconst stacked_bar_data = {\n  dates,\n  datasets: [\n    {\n      label: \"N# USERS\",\n      data: N_USERS,\n      backgroundColor: \"rgb(250,164,58)\",\n    },\n    {\n      label: \"TXS\",\n      data: TXS,\n      backgroundColor: \"rgb(13,131,171)\",\n    },\n  ],\n};\n\nreturn (\n  <Style>\n    <div className=\"text-bg-dark container\">\n      {data !== null ? (\n        <div className=\"rounded-4 p-3 mb-4\">\n          <div className=\"\">\n            <BarEl options={stacked_options} data={stacked_bar_data} />\n          </div>\n        </div>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  </Style>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/near_atlas.components.vis.DAUbyNFTs", "fact_widget_deployments_id": "66ab4d017c2a77654a51159354239673", "inserted_timestamp": "2023-08-21T18:21:16.273Z", "modified_timestamp": "2023-08-21T18:21:16.273Z", "__row_index": 0}