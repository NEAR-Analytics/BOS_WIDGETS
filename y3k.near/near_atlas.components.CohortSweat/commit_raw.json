{"tx_hash": "5wzb5g9KwbNNG7JWouWwqnu4wnwZCkQd8rE5gooiLLcY", "action_id_social": "5azbhyBZ9cHQtpUb2x2aQb4Gz4X6KHG2sUESWc7rNwem-0-widget", "block_id": 103057145, "block_timestamp": "2023-10-10T14:30:03.475Z", "signer_id": "y3k.near", "widget_name": "near_atlas.components.CohortSweat", "source_code": "let rawData;\n\ntry {\n  rawData = fetch(\n    \"https://api.flipsidecrypto.com/api/v2/queries/cda79e6a-1379-41df-9a90-b2eb18022280/data/latest\",\n    {\n      method: \"GET\",\n      headers: {\n        Accept: \"*/*\",\n      },\n    }\n  );\n} catch (e) {\n  console.error(\"Error fetching data:\", e);\n}\n\nconst data = (rawData && rawData.body) || [];\n\nlet result = [];\n\nconst transformData = (dataArray) => {\n  const result = dataArray.map((item) => ({\n    CREATED_MONTH: item.CREATED_MONTH,\n    MONTHS_SINCE: item.MONTHS_SINCE,\n    ACTIVE_USERS: item.COHORT_SIZE,\n    RETENTION_RATE: item.RETENTION_RATE,\n  }));\n  return result;\n};\n\n// const transforedmData = transformData(data);\nconst transformedData = transformData(data);\n\nconsole.log(transformedData);\n\nconst data_sample = [\n  {\n    CREATED_MONTH: \"2022-09-01\",\n    MONTHS_SINCE: 0,\n    ACTIVE_USERS: 962848,\n    RETENTION_RATE: 1,\n  },\n  {\n    CREATED_MONTH: \"2022-09-01\",\n    MONTHS_SINCE: 1,\n    ACTIVE_USERS: 962848,\n    RETENTION_RATE: 0.456689,\n  },\n  {\n    CREATED_MONTH: \"2022-09-01\",\n    MONTHS_SINCE: 2,\n    ACTIVE_USERS: 962848,\n    RETENTION_RATE: 0.345515,\n  },\n];\n\nfunction getColorForRetentionRate(rate) {\n  if (rate <= 0.1) return \"bg-teal-200\";\n  if (rate <= 0.2) return \"bg-teal-300\";\n  if (rate <= 0.3) return \"bg-teal-400\";\n  if (rate <= 0.4) return \"bg-teal-500\";\n  if (rate <= 0.5) return \"bg-teal-600\";\n  if (rate <= 0.6) return \"bg-teal-700\";\n  if (rate <= 0.7) return \"bg-teal-800\";\n  if (rate <= 0.8) return \"bg-teal-900\";\n  if (rate <= 0.9) return \"bg-teal-1000\"; // This isn't an official Tailwind color, adjust as needed\n  return \"bg-teal-1100\"; // This isn't an official Tailwind color, adjust as needed\n}\n\nconst newData = data.map((item) => ({\n  ...item,\n  include: true,\n}));\n\nreturn (\n  <div class=\"container border border-info p-3 text-center min-vw-100\">\n    <CohortEl data={data_sample} minRowsShown={5} />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/near_atlas.components.CohortSweat", "fact_widget_deployments_id": "aed7250d39809adad2ee0b5a6dbf8709", "inserted_timestamp": "2023-10-10T16:30:54.797Z", "modified_timestamp": "2023-10-10T16:30:54.797Z", "__row_index": 1}