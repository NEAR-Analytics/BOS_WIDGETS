{"tx_hash": "377AZ2ZxdtK3RrgvSTdpAPuLFtBXw25fV29P3tgv4KK9", "action_id_social": "4VEGjYKmPP876hbD4CZBikpzFVHBH3Jn6GmeDzWUjNgA-0-widget", "block_id": 98427962, "block_timestamp": "2023-08-09T14:43:13.133Z", "signer_id": "y3k.near", "widget_name": "widgets.external.MAA.chart", "source_code": "const code = `\n<script src=\"https://unpkg.com/react@18/umd/react.development.js\" crossorigin></script>\n<script src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\" crossorigin></script>\n<script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n\n<canvas id=\"myChart\" style=\"position: relative; height:80vh; width:80vw\"></canvas>\n\n<script>\n\nasync function fetchData() {\n  let response = await fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/c493c7b1-cfcc-4aee-ad79-869b4ed8ca90/data/latest\",\n    {\n        subscribe: true,\n        method: \"GET\",\n        headers: {\n        Accept: \"*/*\",\n        },\n    }\n    );\n  \n  let data = await response.json();\n  \n  \nconst sortedData = data.sort((a, b) => {\n  return new Date(a[\"DAY\"]) - new Date(b[\"DAY\"]);\n});\n\nconst NEW_MAAS = {};\nconst RETURNING_MAAS = {};\n\ndata.map((entry) => {\n  NEW_MAAS[entry[\"DAY\"]] = entry[\"NEW_MAAS\"];\n  RETURNING_MAAS[entry[\"DAY\"]] = entry[\"RETURNING_MAAS\"];\n});\n\n// console.log(data);\n// console.log(RETURNING_MAAS);\n\nconst dates = data.map((entry) => entry[\"DAY\"]);\n\n  var ctx = document.getElementById('myChart').getContext('2d');\n  var myChart = new Chart(ctx, {\n      type: 'bar',\n      data: {\n          labels: dates,\n          datasets: [\n   {\n      label: \"New MAAs\",\n      data: NEW_MAAS,\n      backgroundColor: \"rgb(75, 192, 192)\",\n    },\n    {\n      label: \"Returning MAAs\",\n      data: RETURNING_MAAS,\n      backgroundColor: \"rgb(255, 99, 132)\",\n    },\n          ]\n      },\n      options: {\n  scales: {\n      y: {\n        stacked: true,\n        grid: {\n          color: \"rgba(255, 0, 0, 0.2)\", // This will change the gridline color\n          borderColor: \"rgb(240,255,240)\",\n        },\n        ticks: {\n          color: \"rgb(0,0,0)\", // This will change the axis text label color\n        },\n      },\n      x: {\n        stacked: true,\n        grid: {\n          color: \"rgba(255, 0, 0, 0.2)\", // This will change the gridline color\n        },\n        ticks: {\n          color: \"rgb(0,0,0)\", // This will change the axis text label color\n        },\n      },\n    },\n      }\n  });\n}\n\nfetchData();\n</script>\n`;\n\nreturn (\n  <div>\n    <iframe className=\"w-100\" style={{ height: \"300px\" }} srcDoc={code} />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/widgets.external.MAA.chart", "fact_widget_deployments_id": "f3d26da37ff4d41663b6c5575e374cde", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}