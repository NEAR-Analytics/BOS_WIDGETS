{"tx_hash": "6sppvAMkLN21dQYFkYSTfzmazQjwuT9jJCc93uJKiPaq", "action_id_social": "7QUYEnNWWtCZay4Z1CvzmL8cjdfLMd1QysaF17Diu3Zw-0-widget", "block_id": 103590661, "block_timestamp": "2023-10-17T14:55:49.215Z", "signer_id": "y3k.near", "widget_name": "apps.ama.features", "source_code": "const admins = props.admins;\nconst daoId = props.daoId;\nconst labelFilter = props.labelFilter; // pass in label\n// const labelFilter = \"VM\";  // just to error check\n// maybe add default to make it everything\n// check is questions.labels // an array contains the labelFilter\nconst index = {\n  action: \"question\",\n  key: \"y3k\",\n  options: {\n    limit: 30,\n    order: \"desc\",\n    accountId: props.accounts,\n    // labels: labels.include(labelFilter), // debug\n  },\n};\n// maybe check if labelFilter is not null\nconsole.log(\n  \"Label filter: \" + !labelFilter + \"labelFilter.length: \" + labelFilter.length\n); // to debug\nif (labelFilter.length > 0) {\n  // maybe overwrite the index\n  index = {\n    action: \"question\",\n    key: \"y3k\",\n    options: {\n      limit: 30,\n      order: \"desc\",\n      accountId: props.accounts,\n      labels: labelFilter, // may need to do an include tag\n    },\n  };\n}\n\nconst renderItem = (a) => {\n  if (a.value.type !== \"md\") {\n    return;\n  }\n\n  const is_hidden = Near.view(adminContract, \"is_hidden\", {\n    id: { account_id: a.accountId, block_height: a.blockHeight },\n  });\n\n  if (is_hidden) {\n    return;\n  }\n\n  return (\n    <div key={JSON.stringify(a)} className=\"my-4\">\n      <Widget\n        src=\"y3k.near/widget/apps.ama.post.preview\"\n        props={{\n          accountId: a.accountId,\n          blockHeight: a.blockHeight,\n          admins,\n          adminContract,\n        }}\n      />\n    </div>\n  );\n};\n\nreturn <Widget src=\"mob.near/widget/IndexFeed\" props={{ index, renderItem }} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/apps.ama.features", "fact_widget_deployments_id": "9c7ea5c04df02392afcae11fb78b600a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}