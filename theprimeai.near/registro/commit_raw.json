{"tx_hash": "EbKeQhNQemQcEMjM4b25uCgsucW7suEx1SWhmUvk3jYN", "action_id_social": "EgCXnvwsb7r2vtAUfFvBz2wj6nZTTFQdef4mCWK9dYHp-0-widget", "block_id": 92812459, "block_timestamp": "2023-05-27T07:37:46.140Z", "signer_id": "theprimeai.near", "widget_name": "registro", "source_code": "const contract = \"theprimeai.near\";\r\nconst messages = Near.view(contract, \"get_topics\", {\r\n  from_index: 0,\r\n  limit: 10,\r\n}).reverse();\r\n\r\nconsole.log(messages);\r\n// Use and manipulate state\r\nState.init({ new_message: \"\" });\r\n\r\nconst onInputChange = ({ target }) => {\r\n  State.update({ new_message: target.value });\r\n};\r\n\r\nconst onBtnClick = () => {\r\n  if (!state.new_message) {\r\n    return;\r\n  }\r\n\r\n  Near.call(contract, \"add_topic\", {\r\n    topic: state.new_message,\r\n  });\r\n};\r\n\r\n// Define components\r\nconst messageForm = (\r\n  <>\r\n    <div class=\"border border-black p-3\">\r\n      <label>Mensaje</label>\r\n      <input placeholder=\"Registra tu topic\" onChange={onInputChange} />\r\n      <button class=\"btn btn-warning mt-2\" onClick={onBtnClick}>\r\n        Registrar Topic\r\n      </button>\r\n    </div>\r\n  </>\r\n);\r\n\r\nconst notLoggedInWarning = (\r\n  <p class=\"text-center py-2\">Inicia sesion para poder enviar tu mensaje</p>\r\n);\r\n\r\n// Render\r\nreturn (\r\n  <>\r\n    <div class=\"container border border-info p-3\">\r\n      <h3 class=\"text-center\">The PRIME AI</h3>\r\n      <h4 class=\"text-center\">Registra un nuevo topic</h4>\r\n      {context.accountId ? messageForm : notLoggedInWarning}\r\n      <div class=\"border border-black p-3\">\r\n        <h3>Lista de t\u00f3picos</h3>\r\n        <table className=\"table table-hover table-sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Usuario</th>\r\n              <th>Topic</th>\r\n              <th>Seleccionar</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {messages.map((data, key) => {\r\n              return (\r\n                <>\r\n                  <tr>\r\n                    <td>{data.sender}</td>\r\n                    <td>{data.topic}</td>\r\n                    <td>\r\n                      {\" \"}\r\n                      <button class=\"btn btn-primary mt-2\" onClick={onBtnClick}>\r\n                        Seleccionar\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/theprimeai.near/widget/registro", "fact_widget_deployments_id": "7860359b6c7dfc5b73b50d6af42bb80e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}