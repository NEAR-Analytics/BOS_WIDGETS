{"tx_hash": "GK9ujAeDLZjZdbfeYWQP59NVyvtMGYLj4C4PBSMtXMJp", "action_id_social": "GAeRGXV6BagUSfDPUc7CxU7zWt9xwAh5nTB5kjSuhH2p-0-widget", "block_id": 100671332, "block_timestamp": "2023-09-08T15:46:31.208Z", "signer_id": "zubairweb3.near", "widget_name": "weatherApp", "source_code": "State.init({ defaultCity: \"Lagos\", city: \"\", unit: \"metric\" });\nState.init({ weather: {} });\n\nconst bgCold =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1694077947/Weather/cold2_p13fuw.jpg\";\nconst bgHot =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1694077946/Weather/hot_gc8qai.webp\";\nconst tempIcon =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1694077946/Weather/cloud-solid_dlvsum.svg\";\nconst ArrowDown =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1694085420/Weather/arrow-down_lswsg8.svg\";\n\nconst API_KEY = \"ace7985557386b32c9d545d37d09dd8d\";\n\nfunction getWeatherData(city, units) {\n  const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=${units}`;\n  asyncFetch(weatherUrl, units).then((res) => {\n    State.update({ weather: res.body });\n  });\n}\n\ngetWeatherData(state.defaultCity, state.unit);\n\nfunction handleClick() {\n  getWeatherData(state.city, state.unit);\n}\n\nconsole.log(state.city);\nconsole.log(state.location);\n\nconsole.log(state.weather);\nconst {\n  weather,\n  main: { temp, feels_like, temp_min, temp_max, pressure, humidity },\n  wind: { speed },\n  sys: { country },\n  name,\n} = state.weather;\n\nconst { description, icon } = weather[0];\nfunction makeIconUrl(iconId) {\n  return `https://openweathermap.org/img/wn/${iconId}@2x.png`;\n}\nconst iconUrl = makeIconUrl(icon);\n\nconst tempUnit = state.unit === \"metric\" ? \"\u00baC\" : \"\u00baF\";\nconst windUnit = state.unit === \"metric\" ? \"m/s\" : \"m/h\";\n\nconst card = [\n  {\n    id: 1,\n    icon: ArrowDown,\n    title: \"min\",\n    data: temp_min.toFixed(),\n    unit: tempUnit,\n  },\n  {\n    id: 2,\n    icon: ArrowDown,\n    title: \"max\",\n    data: temp_max.toFixed(),\n    unit: tempUnit,\n  },\n  {\n    id: 3,\n    icon: ArrowDown,\n    title: \"feels like\",\n    data: feels_like.toFixed(),\n    unit: tempUnit,\n  },\n  {\n    id: 4,\n    icon: ArrowDown,\n    title: \"pressure\",\n    data: pressure,\n    unit: \"hPa\",\n  },\n  {\n    id: 5,\n    icon: ArrowDown,\n    title: \"humidity\",\n    data: humidity,\n    unit: \"%\",\n  },\n  {\n    id: 6,\n    icon: ArrowDown,\n    title: \"wind speed\",\n    data: speed.toFixed(),\n    unit: windUnit,\n  },\n];\n\nconsole.log(state.location);\nconsole.log(state.city);\n\nconst App = styled.div`\nfont-family: Verdana, Genrva, Tahoma, sans-serif;\nwidth: 100%;\nheight: 100vh;\nbackground-position: center;\nbackground-size:cover;\n`;\n\nconst Overlay = styled.div`\n  width: 100%;\n  height: 100vh;\n  background-color: rgba(0,0,0,0.2);\n`;\n\nconst Container = styled.div`\n  max-width: 800px;\n  margin: auto;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: column;\n  padding: 1rem;\n`;\n\nconst SectionInputs = styled.div`\nwidth: 100%;\npadding: 1rem;\nborder-radius: 0.4rem;\ncolor: white;\n\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\nbackground-color: rgba(0,0,0,0.7);\n@media screen and (max-width: 600px){\n  flex-direction: column;\n  margin-bottom: 20px;\n}\n\n`;\n\nconst Button = styled.button`\n  padding: 10px 50px;\n  border: none;\n  border-radius: 0.4rem;\n  font-size: 20px;\n  font-weight: 500;\n  background-color: white;\n  &:hover{\n    cursor: pointer;\n    background-color: lightgray;\n  }\n  @media screen and (max-width: 600px){\n  margin-top: 15px;\n}\n`;\n\nconst SectionTemperature = styled.div`\nwidth: 100%;\npadding: 1rem;\nborder-radius: 0.4rem;\ncolor: white;\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\nbackground-color: rgba(0,0,0,0.7);\n @media screen and (max-width: 600px){\n  margin-bottom: 20px;\n}\n\n`;\n\nconst IconTitle = styled.h3`\n  font-size: 15px;\n  font-weight: 200;\n  text-transform: capitalize\n`;\n\nconst Icon = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center  \n`;\n\nconst Temperature = styled.div`\n  \n`;\n\nconst TempTitle = styled.div`\n  font-size: 60px;\n`;\n\nconst Input = styled.input`\nborder: 0.8px solid white;\nborder-radius: 0.4rem;\nbackground-color: transparent;\npadding: 0.5rem;\nfont-size: 20px;\nfont-weight: 200;\ncolor: white;\n&:focus{\n  outline: none;\n}\n@media screen and (max-width: 600px){\n  margin: 0 20px;\n}\n`;\n\nconst Description = styled.div`\nwidth: 100%;\ndisplay: flex;\njustify-content: space-between;\nflex-wrap: wrap;\ngap: 2.5rem;\ncolor: white;\n`;\nconst Card = styled.div`\nwidth: 25%;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: space-between;\nbackground-color: rgba(0,0,0,0.7);\npadding: 1rem;\nborder-radius: 0.4rem;\n@media screen and (max-width: 600px){\n  width: 40%;\n}\n`;\n\nconst CardIcon = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 5px;\n  margin-bottom: 12px;\n`;\n\nconst CardTitle = styled.h2`\n\n`;\nreturn (\n  <>\n    <App style={{ backgroundImage: `url(${bgHot})` }}>\n      <Overlay>\n        {state.weather && (\n          <Container>\n            <SectionInputs>\n              <Input\n                type=\"text\"\n                name=\"city\"\n                placeholder=\"Enter City and press Enter...\"\n                onChange={(e) => State.update({ city: e.target.value })}\n              />\n              <Button onClick={handleClick}>GET DATA</Button>\n            </SectionInputs>\n            <SectionTemperature>\n              <Icon>\n                <IconTitle>\n                  {name}, {country}\n                </IconTitle>\n                <img\n                  src={iconUrl}\n                  width=\"50px\"\n                  height=\"50px\"\n                  alt=\"Weather-icon\"\n                />\n                <IconTitle>{description}</IconTitle>\n              </Icon>\n              <Temperature>\n                <TempTitle>\n                  {temp.toFixed()}\n                  {state.unit === \"metric\" ? \"\u00baC\" : \"\u00baF\"}\n                </TempTitle>\n              </Temperature>\n            </SectionTemperature>\n            <Description>\n              {card.map(({ id, icon, title, data, unit }) => {\n                return (\n                  <Card key={id}>\n                    <CardIcon>\n                      <img src={icon} alt=\"temp-icon\" />\n                      <small>{title}</small>\n                    </CardIcon>\n                    <CardTitle>\n                      {data}\n                      {unit}\n                    </CardTitle>\n                  </Card>\n                );\n              })}\n            </Description>\n          </Container>\n        )}\n      </Overlay>\n    </App>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zubairweb3.near/widget/weatherApp", "fact_widget_deployments_id": "65cd6088662b8775beb5b6042341637d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}