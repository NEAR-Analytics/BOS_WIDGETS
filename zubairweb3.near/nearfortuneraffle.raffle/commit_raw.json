{"tx_hash": "C8HVJz2GdFEur8PQsCUmoRrUdbD7ReDCfWqYK83JSarG", "action_id_social": "FCtwz9HCeM7KKWDPMWKjtkDKeiGvqLJydyvUmb6FQyS9-0-widget", "block_id": 113964593, "block_timestamp": "2024-03-02T18:48:52.045Z", "signer_id": "zubairweb3.near", "widget_name": "nearfortuneraffle.raffle", "source_code": "//modal starts\nconst [isModalOpen, setIsModalOpen] = useState(false);\n\nconst openModal = () => {\n  setIsModalOpen(true);\n};\n\nconst closeModal = () => {\n  setIsModalOpen(false);\n};\n\nconst Modal = ({ isOpen, onClose }) => {\n  const overlayStyle = {\n    display: isOpen ? \"block\" : \"none\",\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    zIndex: 2,\n  };\n\n  const modalStyle = {\n    display: isOpen ? \"block\" : \"none\",\n    position: \"fixed\",\n    top: \"20%\",\n    borderRadius: \"1rem\",\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    width: \"350px\",\n\n    height: \"auto\",\n    backgroundColor: \"#fff\",\n    padding: \"20px\",\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n    zIndex: 3,\n  };\n\n  return (\n    <div style={overlayStyle} onClick={onClose}>\n      <div style={modalStyle} className=\"modal\">\n        <div onClick={(e) => e.stopPropagation()} className=\"modal-content\">\n          <p\n            style={{\n              fontSize: \"1.2rem\",\n              textAlign: \"center\",\n              paddingTop: \"5px\",\n            }}\n          >\n            {isLoading && \"Please wait...\"}\n          </p>\n          <p\n            style={{\n              color: \"red\",\n              textAlign: \"center\",\n              paddingTop: \"5px\",\n              display: errorMessage ? \"block\" : \"none\",\n            }}\n          >\n            {errorMessage && errorMessage}\n          </p>\n\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Submit your Detail</h5>\n            <span\n              style={{ fontSize: \"2rem\", cursor: \"pointer\" }}\n              className=\"close\"\n              onClick={onClose}\n            >\n              &times;\n            </span>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"form\">\n              <div class=\"mb-3\">\n                <label for=\"name\" class=\"form-label\">\n                  Name\n                </label>\n                <input\n                  value={fullname || \"\"}\n                  onChange={(e) => setFullname(e.target.value)}\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"name\"\n                  aria-describedby=\"nameHelp\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label\">\n                  Email\n                </label>\n                <input\n                  value={email || \"\"}\n                  onChange={(e) => setEmail(e.target.value)}\n                  type=\"email\"\n                  class=\"form-control\"\n                  id=\"email\"\n                />\n              </div>\n\n              <button\n                data={formData}\n                type=\"submit\"\n                class=\"btn btn-primary\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  sendData(formData);\n                }}\n              >\n                Submit\n              </button>\n              <div id=\"terms\" class=\"form-text\">\n                By continuing, you accept Near Fortune\u2019s terms of service and\n                privacy policy.\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst NotificationModal = ({ isOpen, onClose }) => {\n  const overlayStyle = {\n    display: isOpen ? \"block\" : \"none\",\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    zIndex: 2,\n  };\n\n  const modalStyle = {\n    display: isOpen ? \"block\" : \"none\",\n    position: \"fixed\",\n    top: \"20%\",\n    borderRadius: \"1rem\",\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    width: \"350px\",\n    height: \"auto\",\n    backgroundColor: \"#fff\",\n    padding: \"20px\",\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n    zIndex: 3,\n  };\n\n  return (\n    <div style={overlayStyle} onClick={onClose}>\n      <div\n        onClick={(e) => e.stopPropagation()}\n        style={modalStyle}\n        className=\"modal\"\n      >\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <h5 class=\"modal-title\" id=\"name\">\n            NFT Check\n          </h5>\n          <span\n            style={{ fontSize: \"2rem\", cursor: \"pointer\" }}\n            className=\"close\"\n            onClick={onClose}\n          >\n            &times;\n          </span>\n        </div>\n        <div>\n          Ops! You must have one of the following nfts to enter the raffle{\" \"}\n          <br />\n          <b>\n            Sharddog - 155 <br />\n          </b>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ButtonWithModal = ({ openModal }) => {\n  return (\n    <div>\n      <button\n        style={{ padding: \"12px\", width: \"120px\", marginBottom: \"10px\" }}\n        onClick={openModal}\n      >\n        Enter\n      </button>\n    </div>\n  );\n};\n\n//modal ends\n\nconst Image1 =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588123/rafflestore/weekBanner_cwsvjc.png\";\nconst Image2 =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/post1_e3ffre.png\";\n\nconst Wrapper = styled.div`\n    text-align: center;\n    padding: 2rem;\n    --tw-bg-opacity: 1;\n    border-radius: 0.75rem;\n    justify-content: space-evenly;\n    align-items: center;\n    flex-direction: column;\n    width: 25%;\n    display: flex;\n    margin-left: auto;\n    margin-right: auto;\n    @media screen and (max-width: 768px){\n        width: 90%;\n}\n}\n`;\nconst ImageGroup = styled.div`\n   display: flex;\n   width: 100%;\n}\n`;\n\nconst StyledImage = styled.img`\n   width: 50%;\n}\n`;\n\nconst ShareBtn = styled.button`\ncolor: #fff;\n    cursor: pointer;\n    padding: 1rem 0.5rem;\n    background-color: #003C8C; \n    border: 1px solid #e5e7eb;\n    border-radius: 0.75rem;\n    align-items: center;\n    display: flex;\n`;\n\nconst SharedIcon =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/x_abhrox.svg\";\n\nconst StyledIcon = styled.img`\n    width: 1rem;\n    max-width: 100%;\n    height: auto;\n`;\n\nconst Container = styled.div`\n\n`;\n\nconst Banner = styled.div`\nbackground-image: url(${backgroundImage});\npadding-bottom: 2rem;\nbackground-position: center;\nbackground-size: cover;\ndisplay: flex;\nalign-items: center;\nflex-direction: column;\nwidth: 100%;\nmargin-bottom: 2rem;\n`;\n\nconst StyledImg = styled.img`\nwidth: 50%;\nheight: auto;\ndisplay: block;\noverflow-clip-margin: content-box;\noverflow: clip;\n`;\n\nconst RaffleContent = styled.div`\nbackground-color: white;\ncolor: black;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\nwidth: 50%;\nmargin: 0 auto;\n@media screen and (max-width: 768px){\nwidth: 90%;\n}\n`;\n\nconst TitleContainer = styled.div`\nbackground-color: white;\ncolor: black;\npadding: 1rem 1.25rem;\nborder: 2px solid #e5e7eb;\nborder-radius: 10px;\nwidth: 100%;\n`;\n\nconst Title = styled.h4`\nfont-size: 24px;\n`;\n\nconst Description = styled.div`\ngap: 1rem;\nalign-items: flex-end;\ndisplay: flex;\n`;\n\nconst Text = styled.div`\nfont-size: 21px;\n`;\n\nconst InstructionWrapper = styled.div`\ntext-align: center;\nmargin: 4.3rem 0;\n`;\n\nconst InstructionContent = styled.p`\nfont-size: 23px; \nmargin: 1.2rem 0;\nline-height: 1.5;\n`;\n\nconst PrizeWrapper = styled.div`\n    align-items: center;\n    flex-direction: column;\n    width: 100%;\n    display: flex;\n    margin: 0 auto;\n`;\n\nconst PrizeTitle = styled.h3`\n    font-weight: 700;\n    font-size: 24px;\n    color: #000;\n`;\n\nconst PrizeContent = styled.div`\n    padding: 2.5rem;\n    border: 2px solid #e5e7eb;\n    border-radius: 0.75rem;\n    flex-direction: column;\n    align-items: center;\n    width: 50%;\n    display: flex;\n    @media screen and (max-width: 768px){\n    width: 90%;\n`;\n\nconst PrizeIcon = styled.div`\n    gap: 0.5rem;\n    display: flex;\n`;\n\nconst PrizeDetail = styled.ol`\n    font-size: .875rem;\n    line-height: 1.25rem;\n    padding: 1.25rem;\n    list-style: none;\n`;\n\nconst PrizeBtn = styled.button`\n    font-size: .875rem;\n    line-height: 1.25rem;\n    text-align: center;\n    padding: 0.5rem 1rem;\n    border-width: 1px;\n    border-radius: 1rem;\n    align-items: center;\n    flex-direction: column;\n    display: flex;\n    gap: 10px;\n    cursor: pointer;\n    border: none;\n    background: none;\n\n`;\n\nconst EnterBtnWrapper = styled.div`\n    align-items: center;\n    flex-direction: column;\n    display: flex;\n    margin-top: 1.5rem;\n`;\n\nconst EnterBtn = styled.button`\n   \n`;\n\nconst RaffleSummary = styled.div`\n    padding-top: 1rem;\n    border-top: 2px solid #e5e7eb;\n    justify-content: space-between;\n    width: 50%;\n    display: flex;\n    margin: 1.5rem 0 0.5rem;\n        @media screen and (max-width: 768px){\n    width: 90%;}\n`;\n\nconst CloseDate = styled.div`\n  width: 50%;\n`;\n\nconst Entries = styled.div`\n   width: 50%;\n`;\n\nconst Post = (\n  <Wrapper>\n    <h2>Entered</h2>\n    <ImageGroup>\n      <StyledImage src={Image1} alt=\"raffle pics\" />\n      <StyledImage src={Image2} alt=\"raffle pics\" />\n    </ImageGroup>\n    <p>\n      Thanks for entering the raffle! Winners will be emailed on Feb. 15 11:59pm\n    </p>\n    <ShareBtn>\n      <span>Share on twitter</span>\n    </ShareBtn>\n  </Wrapper>\n);\n\nconst backgroundImage =\n  \"https://res.cloudinary.com/zbsoft/image/upload/v1700160172/raffle/background.png\";\n\nconst bannerImg =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1706123137/rafflestore/IMG-20240107-WA0036_bxl0f4.jpg\";\n\nconst sharDogIcon =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588115/rafflestore/gift_ebqnkb.svg\";\n\nconst accountId = context.accountId;\nconst contractId = \"mint.sharddog.near\";\n\nconst returnedData = Social.get(`${accountId}/formData/*`);\n\nif (!contractId) {\n  return `Missing \"contractId\"`;\n}\n\nif (!accountId) {\n  return `Please login`;\n}\n\nconst [email, setEmail] = useState(\"\");\nconst [fullname, setFullname] = useState(\"\");\nconst [message, setSuccessMessage] = useState(\"\");\nconst [errorMessage, setErrorMessage] = useState(\"\");\nconst [isLoading, setIsLoading] = useState(false);\nconst [summary, setSummary] = useState(false);\n\nconsole.log(email);\n\nconsole.log(fullname);\nconst sendData = () => {\n  if (!email.trim() || !fullname.trim()) {\n    setErrorMessage(\"Please enter both email and name\");\n    return;\n  }\n  setIsLoading(true);\n  asyncFetch(\"https://rafflestore.000webhostapp.com/api/register.php\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    body: `email=${encodeURIComponent(email)}&fullname=${encodeURIComponent(\n      fullname\n    )}&category=sharddog`,\n  })\n    .then((response) => {\n      console.log(response.body.status);\n\n      if (response.ok) {\n        if (response.body.status === \"success\") {\n          setSuccessMessage(\n            \"Thanks for participating, we would get back to you soon\"\n          );\n          setErrorMessage(\"\");\n          setEmail(\"\");\n          setFullname(\"\");\n          console.log(\"Data submitted successfully\");\n        } else if (\n          response.body.status === \"error\" &&\n          response.body.message === \"Email already exists.\"\n        ) {\n          setErrorMessage(\"Email already exists, try different one\");\n          setSuccessMessage(\"\");\n          console.log(\"Email already exists...\");\n          console.log(response.body.message + \"test\");\n          console.log(errorMessage);\n        } else if (\n          response.body.status === \"error\" &&\n          response.body.message ===\n            \"Reached maximum number of participants, try another raffle.\"\n        ) {\n          setErrorMessage(\n            \"Reached maximum number of participants, try another raffle.\"\n          );\n          setSuccessMessage(\"\");\n        } else {\n          setErrorMessage(\"Failed to submit data, try again\");\n          console.log(\"Failed to submit data, try again\");\n        }\n      } else {\n        console.log(`HTTP error! Status: ${response.status}`);\n      }\n    })\n    .finally(() => {\n      setIsLoading(false);\n      setSummary(true);\n    });\n};\n\nconst nfts = Near.view(contractId, \"nft_tokens_for_owner\", {\n  account_id: accountId,\n  from_index: \"0\",\n  limit: 200,\n});\n\nconst nftTitle = \"ShardDog - 1555\";\n\nconst id = \"mint.sharddog.near:2cdbb07ea61d7a4175791ca1170ee4c3\";\nState.init({ nftCheck: false });\n\nfor (let i = 0; i < nfts.length; i++) {\n  if (nfts[i].metadata.title === nftTitle) {\n    State.update({ nftCheck: true });\n    break;\n  }\n}\n\nif (!nfts) {\n  return \"\";\n}\n\nif (summary && !errorMessage) {\n  return Post;\n}\n\n// if (returnedData) {\n//   return Post;\n// }\n\nreturn (\n  <>\n    {state.nftCheck ? (\n      <Modal isOpen={isModalOpen} onClose={closeModal} />\n    ) : (\n      <NotificationModal isOpen={isModalOpen} onClose={closeModal} />\n    )}\n\n    <Container>\n      <Banner>\n        <StyledImg src={bannerImg} alt=\"banner\" />\n      </Banner>\n      <RaffleContent>\n        <TitleContainer>\n          <Title>Sharddog Raffle</Title>\n          <Description>\n            <img src={sharDogIcon} alt=\"shardDog icon\" />\n            <Text>Available for 200 winners</Text>\n          </Description>\n        </TitleContainer>\n        <InstructionWrapper>\n          <InstructionContent>\n            We would like to give you some free stuff, for your taking action\n            onchain.\n          </InstructionContent>\n          <InstructionContent>\n            <b>If you have one of the following NFT:</b> <br />\n            <b style={{ color: \"purple\" }}>- Sharddog 155</b>\n            <br />\n            <br /> <b>you can enter the raffle to win!</b>\n          </InstructionContent>\n        </InstructionWrapper>\n        <PrizeWrapper>\n          <PrizeTitle>Do you want to participate?</PrizeTitle>\n          <PrizeContent>\n            <PrizeIcon>\n              <PrizeBtn>\n                <img src={sharDogIcon} />\n                <span>Sharddog Raffle</span>\n              </PrizeBtn>\n            </PrizeIcon>\n            <PrizeDetail>\n              <span>\n                <b>Prize to win:</b>\n              </span>\n              <li>$200 $NEAR</li>\n            </PrizeDetail>\n          </PrizeContent>\n        </PrizeWrapper>\n        <EnterBtnWrapper>\n          <ButtonWithModal openModal={openModal} />\n          <span\n            style={{\n              fontWeight: \"bold\",\n              fontSize: \"0.75rem\",\n              lineHeight: \"1rem\",\n            }}\n          >\n            By continuing, you accept Near Fortune\u2019s <a href=\"#\">terms</a> and{\" \"}\n            <a href=\"#\" class=\"underline\">\n              privacy\n            </a>\n          </span>\n        </EnterBtnWrapper>\n\n        <RaffleSummary>\n          <CloseDate>\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>CLOSES</h4>\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\n              Feb 15, 11:59 PM GMT+1\n            </p>\n          </CloseDate>\n          <Entries>\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>ENTRIES</h4>\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\n              23 Entires\n            </p>\n          </Entries>\n        </RaffleSummary>\n      </RaffleContent>\n      <Widget src=\"nearfortuneraffle.near/widget/nearfortuneraffle.footer\" />\n    </Container>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zubairweb3.near/widget/nearfortuneraffle.raffle", "fact_widget_deployments_id": "fe8ba0d56781caf51a806b983955e7af", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 53}