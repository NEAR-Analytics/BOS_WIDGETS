{"tx_hash": "3vvzjWcdahfhzLCeG7PdmJtbSxrzXQaPh8UENszxM78c", "action_id_social": "2siBbNjnXvdmZQJeZhvS5EQVrj2BsuB5pJ4DNAZDwSeN-0-widget", "block_id": 109988969, "block_timestamp": "2024-01-09T14:50:24.650Z", "signer_id": "zubairweb3.near", "widget_name": "nearfortuneraffle.raffle", "source_code": "const Image1 =\r\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588123/rafflestore/weekBanner_cwsvjc.png\";\r\nconst Image2 =\r\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/post1_e3ffre.png\";\r\n\r\nconst Wrapper = styled.div`\r\n    color: #fff;\r\n    text-align: center;\r\n    padding: 2rem;\r\n    --tw-bg-opacity: 1;\r\n    background-color: black;\r\n    border-radius: 0.75rem;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    width: 25%;\r\n    display: flex;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    @media screen and (max-width: 768px){\r\n        width: 90%;\r\n}\r\n}\r\n`;\r\nconst ImageGroup = styled.div`\r\n   display: flex;\r\n   width: 100%;\r\n}\r\n`;\r\n\r\nconst StyledImage = styled.img`\r\n   width: 50%;\r\n}\r\n`;\r\n\r\nconst ShareBtn = styled.button`\r\ncolor: #fff;\r\n    cursor: pointer;\r\n    padding: 1rem 0.5rem;\r\n    background-color: #003C8C; \r\n    border: 1px solid #e5e7eb;\r\n    border-radius: 0.75rem;\r\n    align-items: center;\r\n    display: flex;\r\n`;\r\n\r\nconst SharedIcon =\r\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/x_abhrox.svg\";\r\n\r\nconst StyledIcon = styled.img`\r\n    width: 1rem;\r\n    max-width: 100%;\r\n    height: auto;\r\n`;\r\n\r\nconst Post = (\r\n  <Wrapper>\r\n    <h2>Entered</h2>\r\n    <ImageGroup>\r\n      <StyledImage src={Image1} alt=\"raffle pics\" />\r\n      <StyledImage src={Image2} alt=\"raffle pics\" />\r\n    </ImageGroup>\r\n    <p>\r\n      Thanks for entering the raffle! Winners will be emailed on Jan. 15 11:59pm\r\n    </p>\r\n    <ShareBtn>\r\n      <span>Share on twitter</span>\r\n    </ShareBtn>\r\n  </Wrapper>\r\n);\r\n\r\nconst backgroundImage =\r\n  \"https://res.cloudinary.com/zbsoft/image/upload/v1700160172/raffle/background.png\";\r\n\r\nconst bannerImg =\r\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588123/rafflestore/weekBanner_cwsvjc.png\";\r\n\r\nconst sharDogIcon =\r\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588115/rafflestore/gift_ebqnkb.svg\";\r\n\r\nconst accountId = context.accountId;\r\nconst contractId = \"mint.sharddog.near\";\r\n\r\nconst returnedData = Social.get(`${accountId}/formData/*`);\r\n\r\nif (!contractId) {\r\n  return `Missing \"contractId\"`;\r\n}\r\n\r\nif (!accountId) {\r\n  return `Please login`;\r\n}\r\n\r\nconst [email, setEmail] = useState(\"\");\r\nconst [fullname, setFullname] = useState(\"\");\r\nconst [message, setSuccessMessage] = useState(\"\");\r\nconst [errMessage, setErrorMessage] = useState(\"\");\r\nconst [isLoading, setIsLoading] = useState(false);\r\nconst [summary, setSummary] = useState(false);\r\n\r\nconsole.log(email);\r\n\r\nconsole.log(fullname);\r\nconst sendData = () => {\r\n  setIsLoading(true);\r\n  asyncFetch(\"https://rafflestore.000webhostapp.com/api/register.php\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    body: `email=${encodeURIComponent(email)}&fullname=${encodeURIComponent(\r\n      fullname\r\n    )}`,\r\n  })\r\n    .then((response) => {\r\n      console.log(response.body.status);\r\n\r\n      if (response.ok) {\r\n        if (response.body.status === \"success\") {\r\n          setSuccessMessage(\r\n            \"Thanks for participating, we would get back to you soon\"\r\n          );\r\n          setErrorMessage(\"\");\r\n          setEmail(\"\");\r\n          setFullname(\"\");\r\n          console.log(\"Data submitted successfully\");\r\n        } else if (\r\n          response.body.status === \"error\" &&\r\n          response.body.message === \"Email already exists.\"\r\n        ) {\r\n          setErrorMessage(\"Email already exists, try different one\");\r\n          setSuccessMessage(\"\");\r\n          console.log(\"Email already exists.\");\r\n        } else {\r\n          setErrorMessage(\"Failed to submit data, try again\");\r\n          console.log(\"Failed to submit data, try again\");\r\n        }\r\n      } else {\r\n        console.log(`HTTP error! Status: ${response.status}`);\r\n      }\r\n    })\r\n    .finally(() => {\r\n      setIsLoading(false);\r\n      setSummary(true);\r\n    });\r\n};\r\n\r\nconst nfts = Near.view(contractId, \"nft_tokens_for_owner\", {\r\n  account_id: accountId,\r\n  from_index: \"0\",\r\n  limit: 200,\r\n});\r\n\r\nconst nftTitle = \"Kano is bos jollof - 1\";\r\nconst nftTitle2 = \"Black Dragon Token - 652\";\r\nconst nftTitle3 = \"ShardDog - 1555\";\r\nconst nftTitle4 = \"Kano is bos jollof - 2\";\r\n\r\nconsole.log(nfts[0].metadata.title);\r\n\r\nconst id = \"mint.sharddog.near:2cdbb07ea61d7a4175791ca1170ee4c3\";\r\nState.init({ nftCheck: false });\r\n\r\nfor (let i = 0; i < nfts.length; i++) {\r\n  if (\r\n    nfts[i].metadata.title === nftTitle ||\r\n    nfts[i].metadata.title === nftTitle2 ||\r\n    nfts[i].metadata.title === nftTitle3 ||\r\n    nfts[i].metadata.title === nftTitle4\r\n  ) {\r\n    State.update({ nftCheck: true });\r\n    break;\r\n  }\r\n}\r\n\r\nif (!nfts) {\r\n  return \"\";\r\n}\r\n\r\nconst Container = styled.div`\r\n\r\n`;\r\n\r\nconst Banner = styled.div`\r\nbackground-image: url(${backgroundImage});\r\npadding-bottom: 2rem;\r\nbackground-position: center;\r\nbackground-size: cover;\r\ndisplay: flex;\r\nalign-items: center;\r\nflex-direction: column;\r\nwidth: 100%;\r\nmargin-bottom: 2rem;\r\n`;\r\n\r\nconst StyledImg = styled.img`\r\nwidth: 50%;\r\nheight: auto;\r\ndisplay: block;\r\noverflow-clip-margin: content-box;\r\noverflow: clip;\r\n`;\r\n\r\nconst RaffleContent = styled.div`\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: center;\r\nflex-direction: column;\r\nwidth: 50%;\r\nmargin: 0 auto;\r\n@media screen and (max-width: 768px){\r\nwidth: 90%;\r\n}\r\n`;\r\n\r\nconst TitleContainer = styled.div`\r\npadding: 1rem 1.25rem;\r\nborder: 2px solid #e5e7eb;\r\nborder-radius: 10px;\r\nwidth: 100%;\r\n`;\r\n\r\nconst Title = styled.h4`\r\nfont-size: 24px;\r\n`;\r\n\r\nconst Description = styled.div`\r\ngap: 1rem;\r\nalign-items: flex-end;\r\ndisplay: flex;\r\n`;\r\n\r\nconst Text = styled.div`\r\nfont-size: 21px;\r\n`;\r\n\r\nconst InstructionWrapper = styled.div`\r\ntext-align: center;\r\nmargin: 4.3rem 0;\r\n`;\r\n\r\nconst InstructionContent = styled.p`\r\nfont-size: 23px; \r\nmargin: 1.2rem 0;\r\nline-height: 1.5;\r\n`;\r\n\r\nconst PrizeWrapper = styled.div`\r\n    align-items: center;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    display: flex;\r\n    margin: 0 auto;\r\n`;\r\n\r\nconst PrizeTitle = styled.h3`\r\n    font-weight: 700;\r\n    font-size: 24px;\r\n    color: #000;\r\n`;\r\n\r\nconst PrizeContent = styled.div`\r\n    padding: 2.5rem;\r\n    border: 2px solid #e5e7eb;\r\n    border-radius: 0.75rem;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 50%;\r\n    display: flex;\r\n    @media screen and (max-width: 768px){\r\n    width: 90%;\r\n`;\r\n\r\nconst PrizeIcon = styled.div`\r\n    gap: 0.5rem;\r\n    display: flex;\r\n`;\r\n\r\nconst PrizeDetail = styled.ol`\r\n    font-size: .875rem;\r\n    line-height: 1.25rem;\r\n    padding: 1.25rem;\r\n    list-style: none;\r\n`;\r\n\r\nconst PrizeBtn = styled.button`\r\n    font-size: .875rem;\r\n    line-height: 1.25rem;\r\n    text-align: center;\r\n    padding: 0.5rem 1rem;\r\n    border-width: 1px;\r\n    border-radius: 1rem;\r\n    align-items: flex-end;\r\n    flex-direction: column;\r\n    display: flex;\r\n    gap: 10px;\r\n    cursor: pointer;\r\n    border: none;\r\n    background: none;\r\n\r\n`;\r\n\r\nconst EnterBtnWrapper = styled.div`\r\n    align-items: center;\r\n    flex-direction: column;\r\n    display: flex;\r\n    margin-top: 1.5rem;\r\n`;\r\n\r\nconst EnterBtn = styled.button`\r\n    color: #fff;\r\n    padding: 1rem 3rem;\r\n    background-color :#003C8C;\r\n    border-width: 1px;\r\n    border-radius: 0.75rem;\r\n    cursor: pointer;\r\n        margin-bottom: 10px;\r\n`;\r\n\r\nconst RaffleSummary = styled.div`\r\n    padding-top: 1rem;\r\n    border-top: 2px solid #e5e7eb;\r\n    justify-content: space-between;\r\n    width: 50%;\r\n    display: flex;\r\n    margin: 1.5rem 0 0.5rem;\r\n        @media screen and (max-width: 768px){\r\n    width: 90%;}\r\n`;\r\n\r\nconst CloseDate = styled.div`\r\n  width: 50%;\r\n`;\r\n\r\nconst Entries = styled.div`\r\n   width: 50%;\r\n`;\r\n\r\nif (summary) {\r\n  return Post;\r\n}\r\n\r\n// if (returnedData) {\r\n//   return Post;\r\n// }\r\n\r\nreturn (\r\n  <>\r\n    {state.nftCheck ? (\r\n      <div\r\n        class=\"modal fade\"\r\n        id=\"raffleModal\"\r\n        tabindex=\"-1\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n        style={{ marginTop: \"50px\" }}\r\n      >\r\n        <div class=\"modal-dialog\">\r\n          <div class=\"modal-content\">\r\n            <p\r\n              style={{\r\n                fontSize: \"1.2rem\",\r\n                textAlign: \"center\",\r\n                paddingTop: \"15px\",\r\n              }}\r\n            >\r\n              {isLoading && \"Please wait...\"}\r\n            </p>\r\n            <p\r\n              style={{\r\n                color: \"red\",\r\n                textAlign: \"center\",\r\n                paddingTop: \"15px\",\r\n                display: message ? \"none\" : \"block\",\r\n              }}\r\n            >\r\n              {errMessage && errMessage}\r\n            </p>\r\n            <p\r\n              style={{\r\n                color: \"green\",\r\n                textAlign: \"center\",\r\n                paddingTop: \"15px\",\r\n                display: errMessage ? \"none\" : \"block\",\r\n              }}\r\n            >\r\n              {message && message}\r\n            </p>\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\">Submit your Detail</h5>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <div class=\"form\">\r\n                <div class=\"mb-3\">\r\n                  <label for=\"name\" class=\"form-label\">\r\n                    Name\r\n                  </label>\r\n                  <input\r\n                    value={fullname || \"\"}\r\n                    onChange={(e) => setFullname(e.target.value)}\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"emainamel\"\r\n                    aria-describedby=\"nameHelp\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"email\" class=\"form-label\">\r\n                    Email\r\n                  </label>\r\n                  <input\r\n                    value={email || \"\"}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    type=\"email\"\r\n                    class=\"form-control\"\r\n                    id=\"email\"\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  data={formData}\r\n                  type=\"submit\"\r\n                  class=\"btn btn-primary\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    sendData(formData);\r\n                  }}\r\n                >\r\n                  Submit\r\n                </button>\r\n                <div id=\"terms\" class=\"form-text\">\r\n                  By continuing, you accept Near Fortune\u2019s terms of service and\r\n                  privacy policy.\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ) : (\r\n      <div\r\n        class=\"modal fade\"\r\n        id=\"raffleModal\"\r\n        tabindex=\"-1\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div class=\"modal-dialog\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n                Sharddog NFT Check\r\n              </h5>\r\n              <button\r\n                style={{ marginLeft: \"20px\" }}\r\n                type=\"button\"\r\n                class=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              Ops! You must have one of the following nfts to enter the raffle{\" \"}\r\n              <br />\r\n              - Kano is bos jollof - 1 <br />\r\n              - Black Dragon Token - 652 <br />\r\n              - Black Dragon Token - 531 <br />- ShardDog - 1555\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    <Container>\r\n      <Widget src=\"nearfortuneraffle.near/widget/nearfortuneraffle.header\" />\r\n      <Banner>\r\n        <StyledImg src={bannerImg} alt=\"banner\" />\r\n      </Banner>\r\n      <RaffleContent>\r\n        <TitleContainer>\r\n          <Title>Black Dragon Raffle</Title>\r\n          <Description>\r\n            <img src={sharDogIcon} alt=\"shardDog icon\" />\r\n            <Text>Available for 3 winners</Text>\r\n          </Description>\r\n        </TitleContainer>\r\n        <InstructionWrapper>\r\n          <InstructionContent>\r\n            We would like to give you some free stuff, for your taking action\r\n            onchain.\r\n          </InstructionContent>\r\n          <InstructionContent>\r\n            If you have a <b>Black Dragon Token - 652</b> you can enter the\r\n            raffle to win!\r\n          </InstructionContent>\r\n        </InstructionWrapper>\r\n        <PrizeWrapper>\r\n          <PrizeTitle>You don\u2019t have any?</PrizeTitle>\r\n          <PrizeContent>\r\n            <PrizeIcon>\r\n              <PrizeBtn>\r\n                <img src={sharDogIcon} />\r\n                <span>ShardDog - 1555 </span>\r\n              </PrizeBtn>\r\n            </PrizeIcon>\r\n            <PrizeDetail>\r\n              <span>\r\n                <b>Prize to win:</b>\r\n              </span>\r\n              <li>1.10 $NEAR</li>\r\n              <li>2.T-shirt</li>\r\n              <li>3.Mystery Box</li>\r\n            </PrizeDetail>\r\n          </PrizeContent>\r\n        </PrizeWrapper>\r\n        <EnterBtnWrapper>\r\n          <EnterBtn\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#raffleModal\"\r\n          >\r\n            Enter\r\n          </EnterBtn>\r\n          <span\r\n            style={{\r\n              fontWeight: \"bold\",\r\n              fontSize: \"0.75rem\",\r\n              lineHeight: \"1rem\",\r\n            }}\r\n          >\r\n            By continuing, you accept Near Fortune\u2019s <a href=\"#\">terms</a> and{\" \"}\r\n            <a href=\"#\" class=\"underline\">\r\n              privacy\r\n            </a>\r\n            .\r\n          </span>\r\n        </EnterBtnWrapper>\r\n\r\n        <RaffleSummary>\r\n          <CloseDate>\r\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>CLOSES</h4>\r\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\r\n              Jan 15, 11:59 PM GMT+1\r\n            </p>\r\n          </CloseDate>\r\n          <Entries>\r\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>ENTRIES</h4>\r\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\r\n              23 Entires\r\n            </p>\r\n          </Entries>\r\n        </RaffleSummary>\r\n      </RaffleContent>\r\n      <Widget src=\"nearfortuneraffle.near/widget/nearfortuneraffle.footer\" />\r\n    </Container>\r\n  </>\r\n);\r\n", "metadata": {}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zubairweb3.near/widget/nearfortuneraffle.raffle", "fact_widget_deployments_id": "8ba938d19ccb8ce282f6907fa866bce6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 48}