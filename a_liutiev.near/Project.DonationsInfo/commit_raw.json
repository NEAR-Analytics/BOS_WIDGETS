{"tx_hash": "4ygZUdjs8QqDb2d4jTL3dgwghCDZENXZvf85fXGnEni5", "action_id_social": "Cp43fDTqiynZVjhwKs87zgXhoNtF7bfiMr3i88a43mFd-0-widget", "block_id": 105224336, "block_timestamp": "2023-11-08T13:33:13.956Z", "signer_id": "a_liutiev.near", "widget_name": "Project.DonationsInfo", "source_code": "const donationContractId = \"donate.potlock.near\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  // background: green;\n  gap: 40px;\n`;\n\nconst InfoCard = styled.div`\n  display: inline-flex;\n  flex-direction: row;\n  align-items: baseline;\n  justify-content: flex-start;\n  padding: 24px;\n  border-radius: 6px;\n  border: 1px solid rgba(219, 82, 27, 0.36);\n  //   background: yellow;\n  background: #fef6ee;\n  box-shadow: 0px -2px 0px rgba(219, 82, 27, 0.36) inset;\n  gap: 8px;\n  min-width: 260px;\n`;\n\nconst InfoTextPrimary = styled.div`\n  color: #2e2e2e;\n  font-size: 24px;\n  font-weight: 600;\n  line-height: 32px;\n  // word-wrap: break-word;\n  text-align: flex-end;\n`;\n\nconst InfoTextSecondary = styled.div`\n  color: #ea6a25;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 24px;\n  word-wrap: break-word;\n`;\n\nconst donationsForProject = Near.view(donationContractId, \"get_donations_for_recipient\", {\n  recipient_id: props.projectId,\n});\n\nconst [totalDonations, totalDonors] = useMemo(() => {\n  if (!donationsForProject) {\n    return [\"\", \"\"];\n  }\n  const donors = [];\n  let totalDonationAmount = new Big(0);\n  for (const donation of donationsForProject) {\n    if (!donors.includes(donation.donor_id)) {\n      donors.push(donation.donor_id);\n    }\n    totalDonationAmount = totalDonationAmount.plus(new Big(donation.total_amount));\n  }\n  return [totalDonationAmount.div(1e24).toNumber().toFixed(2), donors.length];\n}, [donationsForProject]);\n\nreturn (\n  <Container>\n    <InfoCard>\n      <InfoTextPrimary>${totalDonations}</InfoTextPrimary>\n      <InfoTextSecondary>Contributed</InfoTextSecondary>\n    </InfoCard>\n    <InfoCard>\n      <InfoTextPrimary>{totalDonors}</InfoTextPrimary>\n      <InfoTextSecondary>{totalDonors === 1 ? \"Donor\" : \"Donors\"}</InfoTextSecondary>\n    </InfoCard>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/a_liutiev.near/widget/Project.DonationsInfo", "fact_widget_deployments_id": "54ae0c2273f6ebd847c567306ee407bf", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}