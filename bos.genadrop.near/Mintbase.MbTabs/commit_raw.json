{"tx_hash": "3t96h1uYoHMgn9jc9n47EQtz6gnVTfEGqNifEKEfXyoR", "action_id_social": "CBzRbo8PRnMDbtczsKnmXbVqYW4FD4G4VnDGjaUKJT8z-0-widget", "block_id": 117657323, "block_timestamp": "2024-04-26T10:09:01.207Z", "signer_id": "bos.genadrop.near", "widget_name": "Mintbase.MbTabs", "source_code": "const { MbDropdownMenu } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.MbDropdownMenu\"\n);\n// const { Tab } = VM.require(\"bos.genadrop.near/widget/Mintbase.Tab\");\nconst activeTab = props?.activeTab;\nconst filterOptions = props?.filterOptions;\nconst firstElement = props?.firstElement;\nconst onTabChange = props?.onTabChange;\nconst labels = props?.tabLabels;\nconst onOrderByChange = props?.onOrderByChange;\nconst isDarkModeOn = props?.isDarkModeOn;\nconst hasQueryToggle = props?.hasQueryToggle;\nconst onQueryToggle = props?.onQueryToggle;\nconst Tabs = styled.div`\n  position: relative;\n  width: 100%;\n  *,\n  *::before,\n  *::after {\n    margin: 0px;\n    padding: 0px;\n  }\n  ${props.customStyle}\n  .right-tabs {\n    display: flex;\n    margin-left: 30px;\n    align-items: center;\n    @media (min-width: 640px) {\n      margin-left: 3rem;\n    }\n  }\n  ul {\n    display: flex;\n    gap: 24px;\n    background-color: ${isDarkModeOn ? \"#282A3A\" : \"#F3F4F8\"};\n    padding-left: 36px; /* 24px */\n    padding-right: 36px; /* 24px */\n    overflow-x: scroll;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    @media (max-width: 768px) {\n      padding-left: 3rem; /* 48px */\n      padding-right: 3rem; /* 48px */\n    }\n  }\n  li {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n  .order-by-f {\n    cursor: pointer;\n    position: relative;\n    border-radius: 9999px;\n    transition: all 0.5s ease;\n    &.selected {\n      background-color: ${isDarkModeOn ? \"#3a1c28\" : \"#fedfde\"};\n      &:hover {\n        background-color: ${isDarkModeOn ? \"#3a1c28\" : \"#fedfde\"};\n      }\n    }\n    &.unselected {\n      &:hover {\n        background-color: #90cdf4;\n      }\n    }\n  }\n  .extraFilter {\n    display: flex;\n    padding: 12px;\n    align-items: center;\n    .selectedFilter {\n      color: #f87171;\n    }\n    .unSelectedFilter {\n      color: ${isDarkModeOn ? \"#DBEAFE\" : \"#93C5FD\"};\n    }\n    @media (max-width: 640px) {\n      padding: 16px;\n    }\n  }\n  .filter_area {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    justify-content: center;\n    padding: 12px;\n  }\n`;\nconst Dropdown = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 1.5rem;\n  margin-left: 1.5rem;\n  @media (max-width: 640px) {\n    margin-right: 3rem;\n    margin-left: 3rem;\n  }\n  .order-by {\n    cursor: pointer;\n    position: relative;\n    border-radius: 9999px;\n    transition: all 0.5s ease;\n    &.selected {\n      background-color: ${isDarkModeOn ? \"#3a1c28\" : \"#fedfde\"};\n      &:hover {\n        background-color: ${isDarkModeOn ? \"#3a1c28\" : \"#fedfde\"};\n      }\n    }\n    &.unselected {\n      &:hover {\n        background-color: #90cdf4;\n      }\n    }\n  }\n  .tab {\n    display: flex;\n    padding: 12px; /* Assuming p-12 */\n    align-items: center;\n    @media (max-width: 640px) {\n      padding: 16px; /* Assuming sm:p-16 */\n    }\n  }\n  .order {\n    padding-right: 10px; /* Assuming pr-10 */\n    white-space: nowrap; /* Assuming whitespace-nowrap */\n    color: #ff3130;\n  }\n`;\nconst Tab = styled.div`\n  display: flex;\n  .tab {\n    display: flex;\n    align-items: baseline;\n    justify-content: flex-end;\n    gap: 0.2rem;\n    border-radius: 0.25rem; /* Assuming default border radius */\n    color: ${isDarkModeOn ? \"#C5D0FF\" : \"#4F58A3\"}; /* Ternary for text color */\n    padding: 16px; /* Assuming Tailwind CSS default spacing unit */\n    font-size: 14px;\n    line-height: 16px;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Assuming Tailwind CSS default timing function and duration */\n    white-space: nowrap;\n    &:focus {\n      outline: 2px solid transparent; /* Assuming Tailwind CSS default focus outline */\n      outline-offset: 2px; /* Assuming Tailwind CSS default focus outline offset */\n      box-shadow: 0 0 0 2px\n        ${isDarkModeOn ? \"rgba(59, 130, 246, 0.5)\" : \"rgba(66, 153, 225, 0.5)\"}; /* Ternary for box-shadow */\n      background-color: ${isDarkModeOn\n        ? \"rgba(59, 130, 246, 0.35)\"\n        : \"rgba(66, 153, 225, 0.15)\"}; /* Ternary for background-color */\n    }\n    &:hover {\n      background-color: ${isDarkModeOn\n        ? \"rgba(59, 130, 246, 0.15)\"\n        : \"rgba(66, 153, 225, 0.15)\"}; /* Ternary for background-color */\n    }\n    cursor: pointer;\n    &.active {\n      background-color: ${isDarkModeOn\n        ? \"rgba(235, 97, 96, 0.15)\"\n        : \"rgba(235, 97, 96, 0.15)\"}; /* Assuming Tailwind CSS mb-red color */\n      color: ${isDarkModeOn\n        ? \"#f87171\"\n        : \"#f87171\"}; /* Assuming Tailwind CSS mb-red color */\n      box-shadow: none; /* Assuming removing box-shadow */\n    }\n    @media (max-width: 768px) {\n      padding: 12px;\n      font-size: 12px;\n      line-height: 14px;\n    }\n  }\n  .connected_button {\n    width: 6px;\n    height: 6px;\n    background-color: rgba(159, 237, 143, 1);\n    border-radius: 50%;\n  }\n`;\nconst [tab, setTab] = useState(0);\nconst [listening, setListening] = useState(false);\nconst [isOpen, setIsOpen] = useState(false);\nconst [selectedFilter, setSelectedFilter] = useState(false);\nconst [selectedOrder, setSelectedOrder] = useState(\n  filterOptions?.defaultOptionId ?? \"\"\n);\nuseEffect(() => {\n  if (!props?.tabsWithFilters) return;\n  setSelectedFilter(!!props?.tabsWithFilters[tab]?.isExtraFilterSelected);\n}, [tab]);\nconst options =\n  filterOptions &&\n  filterOptions?.options.map((filter) => {\n    return {\n      content: <span>{filter.label}</span>,\n      onClick: () => handleOptionSelect(filter.id),\n      selected: selectedOrder === filter.id,\n      icon:\n        selectedOrder === filter.id ? (\n          <Widget\n            src=\"bos.genadrop.near/widget/Mintbase.MbIcon\"\n            props={{\n              color: `${isDarkModeOn ? \"blue-300\" : \"blue-100\"}`,\n              size: \"16px\",\n              name: \"check\",\n            }}\n          />\n        ) : undefined,\n    };\n  });\nconst getExtraFiltersIndex = (array) => {\n  const indexes = [];\n  array &&\n    array.map((tab, index) => {\n      if (labels?.includes(tab?.tab) && tab?.extraFilter) {\n        indexes.push(index);\n      }\n    });\n  return indexes;\n};\nconst tabsWithExtraFilter = getExtraFiltersIndex(props?.tabsWithFilters);\nconst handleOptionSelect = (option) => {\n  setIsOpen(!isOpen);\n  const auxOption = option === selectedOrder ? \"\" : option;\n  setSelectedOrder(auxOption);\n  onOrderByChange(auxOption);\n};\nif (!labels.length) return <></>;\nconsole.log(\"labels\", labels);\nreturn (\n  <Tabs>\n    <ul>\n      {hasQueryToggle && (\n        <li onClick={onQueryToggle} key=\"query_toggle\" className=\"filter_area\">\n          <div>\n            <Widget\n              src=\"bos.genadrop.near/widget/Mintbase.MbIcon\"\n              props={{\n                color: `${isDarkModeOn ? \"mb-blue-100\" : \"mb-blue-300\"}`,\n                size: \"24px\",\n                name: \"filters\",\n              }}\n            />\n          </div>\n        </li>\n      )}\n      {labels &&\n        labels.map((data, index) => {\n          const lowerCaseText = data?.replace(/^_/, \"\").toLowerCase();\n          lowerCaseText = lowerCaseText.replace(/ /g, \"-\");\n          const isActive = lowerCaseText === activeTab;\n          const isConnected = data.startsWith(\"_\");\n          if (activeTab !== undefined) {\n            return (\n              <li\n                onClick={() => onTabChange(lowerCaseText)}\n                key={lowerCaseText}\n              >\n                <Tab>\n                  <div className={`tab p-med-90 ${isActive ? \"active\" : \"\"}`}>\n                    {isConnected && <span className=\"connected_button\" />}\n                    {data.replace(/^_/, \"\")}\n                  </div>\n                </Tab>\n              </li>\n            );\n          } else {\n            return (\n              <li onClick={() => setTab(index)} key={index}>\n                <Tab>\n                  <div\n                    className={`tab p-med-90 ${index === tab ? \"active\" : \"\"}`}\n                  >\n                    {isConnected && <span className=\"connected_button\" />}\n                    {data.replace(/^_/, \"\")}\n                  </div>\n                </Tab>\n              </li>\n            );\n          }\n        })}\n      {props?.tabsWithFilters ? (\n        <div className=\"right-tabs\">\n          {tabsWithExtraFilter.map((tabIndex) => {\n            const currentTab = props.tabsWithFilters[tab];\n            const { extraFilter, onExtraFilterChange } = currentTab;\n            if (!extraFilter) return;\n            if (tabIndex === tab)\n              return (\n                <li\n                  className={`order-by-f ${\n                    selectedFilter ? \"selected\" : \"unselected\"\n                  }`}\n                  onClick={() => {\n                    if (!onExtraFilterChange) return;\n                    setSelectedFilter(!selectedFilter);\n                    onExtraFilterChange(!selectedFilter);\n                  }}\n                  key={tabIndex}\n                >\n                  <div className=\"extraFilter\">\n                    <div\n                      className={`${\n                        selectedFilter ? \"selectedFilter\" : \"unSelectedFilter\"\n                      } p-med-90 pr-10 whitespace-nowrap`}\n                    >\n                      {extraFilter}\n                    </div>\n                  </div>\n                </li>\n              );\n          })}\n          <Dropdown onClick={() => setIsOpen(!isOpen)}>\n            <li\n              className={`order-by ${\n                selectedOrder ? \"selected\" : \"unselected\"\n              } relative`}\n            >\n              <div className=\"tab\" onClick={() => setIsOpen(!isOpen)}>\n                <div selectedOrder className={`order`}>\n                  {selectedOrder\n                    ? filterOptions.options.filter(\n                        (filter) => filter.id === selectedOrder\n                      )[0].label\n                    : filterOptions.label}\n                </div>\n                <Widget\n                  src=\"bos.genadrop.near/widget/Mintbase.MbIcon\"\n                  props={{\n                    color: `${isDarkModeOn ? \"mb-blue-300\" : \"mb-blue-100\"}`,\n                    size: \"16px\",\n                    name: \"arrow_drop_down\",\n                  }}\n                />\n              </div>\n            </li>\n          </Dropdown>\n        </div>\n      ) : null}\n    </ul>\n    {filterOptions && options && (\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.MbDropdownMenu\"\n        props={{ isOpen, items: options, customStyle: \"right: 0;\" }}\n      />\n      /* <MbDropdownMenu isOpen={true} items={options} customStyle=\"right : 0;\" /> */\n    )}\n  </Tabs>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/Mintbase.MbTabs", "fact_widget_deployments_id": "697f55d3b7db20f5a7e60ec184ef5676", "inserted_timestamp": "2024-04-26T11:43:20.585Z", "modified_timestamp": "2024-04-26T11:43:20.585Z", "__row_index": 6}