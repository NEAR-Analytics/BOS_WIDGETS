{"tx_hash": "DiXvfvygHCSMMhhH43R5x9YmsPjqi9dUQiiz3JHNGM3D", "action_id_social": "F7RqZB6i4KSQNT5Rwo3XwhZZjqK2NG5X6ZdyRDcRc7eP-0-widget", "block_id": 106793454, "block_timestamp": "2023-11-29T07:55:53.132Z", "signer_id": "bos.genadrop.near", "widget_name": "CPlanet.NFTExplore.DAONFTs", "source_code": "const [nftState, setNftState] = useState([]);\n\nconst fetchDaos = () => {\n  const res = fetch(\n    \"https://raw.githubusercontent.com/GenaDrop/genadrop-bos-widgets/main/data/cdao-mintbase-contracts.json\"\n  );\n  if (!res.ok) return;\n  const data = JSON.parse(res.body).daoNftContracts;\n  if (data.length) {\n    const response2 = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n      method: \"POST\",\n      headers: {\n        \"mb-api-key\": \"anon\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        query: `query MyQuery {\n  mb_views_nft_tokens(\n    where: {nft_contract: {id: {_in: [\"marmaj.mintbase1.near\"]}}}\n  ) {\n        media \n        owner\n        token_id\n        nft_contract_id\n        description\n        title\n        listings {\n            price\n            unlisted_at\n            listed_by\n            }\n      }\n}\n`,\n      }),\n    });\n    if (response2.ok) {\n      const tokens = response2.body.data.mb_views_nft_tokens;\n      setNftState(tokens);\n    }\n  }\n};\n\nconst logo =\n  \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrJuxjGxj4QmyreE6ix4ygqm5pK9Nn_rdc8Ndw6lmJcd0SSnm2zBIc2xJ_My1V0WmK2zg&usqp=CAU\";\n\nfetchDaos();\n\nconst Root = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 30px;\n  align-items: center;\n  justify-content: center;\n  margin-top: 40px;\n`;\n\nreturn (\n  <Root>\n    {nftState.length &&\n      nftState.map((data, index) => (\n        <Widget\n          props={{\n            title: data.title,\n            description: data.description,\n            image: data.media,\n            owner: data.owner,\n            chainState: \"near\",\n            logo: logo,\n            onButtonClick: () =>\n              props.update({\n                tab: \"singleNFT\",\n                contractId: data.nft_contract_id,\n                tokenId: data.token_id,\n                chainState: \"near\",\n              }),\n            price: data.listings.length\n              ? (data.listings.length / 1000000000000000000000000).toFixed(2)\n              : null,\n            isListed: data.listed ? \"LISTED\" : \"NOT LISTED\",\n            tokenId: data.token_id,\n            contractId: data.nft_contract_id,\n          }}\n          src=\"bos.genadrop.near/widget/CPlanet.NFTCard.Index\"\n        />\n      ))}\n  </Root>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/CPlanet.NFTExplore.DAONFTs", "fact_widget_deployments_id": "7dbbfb6f330fbf2785b9639abed7df13", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}