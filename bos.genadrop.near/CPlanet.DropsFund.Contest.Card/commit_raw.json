{"tx_hash": "GWPeT6Cocs4S348ToK5NPuiQrnvsVSFsy7ruW5JH1qsR", "action_id_social": "4PUcZEaMUBzHVjeBWtYAajzqKXk8i7iTcnM9sBcC91Nd-0-widget", "block_id": 108275912, "block_timestamp": "2023-12-18T20:13:23.782Z", "signer_id": "bos.genadrop.near", "widget_name": "CPlanet.DropsFund.Contest.Card", "source_code": "const nearGreen = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"14\"\n    height=\"14\"\n    viewBox=\"0 0 14 14\"\n    fill=\"none\"\n  >\n    <circle\n      cx=\"7\"\n      cy=\"7\"\n      r=\"11.533\"\n      fill=\"#3BD07F\"\n      stroke=\"#3BD07F\"\n      stroke-width=\"0.933953\"\n    />\n  </svg>\n);\n\nconst Root = styled.div`\n  height: 176px;\n  max-width: 932px;\n  display: flex;\n  padding: 16px;\n  background: ${(p) => (p.selected ? \"#E4FFF0\" : \"#fff\")};\n  border: 1px solid ${(p) => (p.selected ? \"#3BD07F\" : \"#eaeaea\")};\n  @media (max-width: 500px) {\n    width: 90% !important;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 20px;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n`;\n\nconst Image = styled.div`\n  width: 144px;\n  height: 144px;\n  flex-shrink: 0;\n  margin-right: 5px;\n  background: rgba(160, 160, 160, 0.2);\n  margin-right: 20px;\n  img {\n    width: 100%;\n    border-radius: 6px;\n    height: 100%;\n    object-fit: cover;\n  }\n  @media (max-width: 500px) {\n    width: 250px;\n    height: 250px;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 20px;\n  }\n`;\n\nconst Header = styled.div`  \n  a {\n    text-decoration: #b0b0b0;\n  }\n  h1 {\n    color: #000;\n    leading-trim: both;\n    text-edge: cap;\n    font-family: Helvetica Neue;\n    font-size: 24px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n  }\n  p {\n    color: #b0b0b0;\n    font-family: Helvetica Neue;\n    display: flex;\n    align-item: center;\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal\n    span {\n      color: ${(p) => (p.selected ? \"#3BD07F\" : \"#b0b0b0\")};\n      font-weight: ${(p) => (p.selected ? \"700\" : \"500\")};\n    }\n  }\n  img {\n    width: 16px !important;\n    height: 16px !important;\n    margin: 5px 3px 0 5px;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n`;\n\nconst NoProfile = styled.div`\n  margin-top: 5px;\n  margin: 5px 3px 0 5px;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: #808080;\n`\n\nconst CardBody = styled.div`\n  display: flex;\n  width: 70%;\n  .desc {\n    min-width: 600px;\n  }\n  p {\n    overflow: hidden;\n    color: #b0b0b0;\n    font-family: Helvetica Neue;\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 148%; /* 23.68px */\n  }\n  @media (max-width: 500px) {\n    .desc {\n      min-width: 100%;\n    }\n  }\n`;\nconst StartedButton = styled.div`\n  margin-top: 30px;\n  .vote {\n    gap: 8px;\n    padding: 12px 30px;\n    border-radius: 32px;\n    border: 0.357px solid #000;\n    background: #000;\n    color: #fff;\n    text-align: center;\n    font-family: Helvetica Neue;\n    font-size: 16px;\n    font-weight: 500;\n  }\n  .won {\n    display: flex;\n    width: max-content;\n    padding: 8px 20px;\n    border-radius: 32px;\n    border: 1px solid #3bd07f;\n    background: #e4fff0;\n    gap: 8px;\n    color: #3bd07f;\n    font-family: Helvetica Neue;\n    font-size: 16px;\n    margin-right: 40px;\n    font-weight: 700;\n  }\n  .disabled {\n    height: 48px;\n    gap: 8px;\n    width: max-content;\n    color: #b0b0b0;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 500;\n    border: 2px solid #b0b0b0;\n    background: none;\n    border-radius: 32px;\n    text-transform: uppercase;\n    font-family: Helvetica Neue;\n    margin-bottom: 40px;\n  }\n  .disabled:hover {\n    background: none;\n    border-color: #b0b0b0;\n    color: #b0b0b0;\n  }\n  @media (max-width: 500px) {\n    display: block;\n  }\n`;\n\nconst handleVoteClick = () => {\n  Near.call(\n    \"fund-v1.genadrop.near\",\n    \"vote\",\n    {\n      submission_owner: props.owner,\n      contest_id: Number(props.contestId),\n    },\n    \"300000000000000\",\n    \"10000000000000000000000\"\n  );\n};\n\nconst formatTime = (time) => {\n  const timestamp = time * 1000; // Convert seconds to milliseconds\n  const date = new Date(timestamp);\n\n  // Format the date to \"Month day, year\" (e.g., \"Oct 31, 2023\")\n  const options = { month: \"short\", day: \"numeric\", year: \"numeric\" };\n  const formattedDate = date.toLocaleDateString(\"en-US\", options);\n\n  return formattedDate;\n};\n\nconst winnerDetails = Near.view(\n  \"fund-v1.genadrop.near\",\n  \"get_winner_payout_info\",\n  {\n    subscribe: true,\n    contest_id: Number(props.contestId),\n    winner: props.owner,\n  }\n);\n\nconst totalUsersVoted = Near.view(\n  \"fund-v1.genadrop.near\",\n  \"get_all_user_voted\",\n  {\n    subscribe: true,\n    contest_id: Number(props.contestId),\n  }\n);\n\nconst profileImage = Social.getr(`${props?.owner}/profile`)\n\nreturn (\n  <Root\n    selected={\n      props.winners ? props.winners?.some((data) => data === props.owner) : \"\"\n    }\n  >\n    <Image>\n      <img src={props?.content?.image_url} alt=\"\" />\n    </Image>\n    <div className=\"cardContent\">\n      <Header\n        selected={\n          props.winners\n            ? props.winners?.some((data) => data === props.owner)\n            : \"\"\n        }\n      >\n        <h1>{props?.content?.title}</h1>\n        <a\n         href={`#/bos.genadrop.near/widget/GenaDrop.Profile.Main?accountId=${props.owner}`}\n        >\n        <p>\n          NFT by {profileImage?.image?.ipfs_cid ? <img src={`https://ipfs.near.social/ipfs/${profileImage?.image?.ipfs_cid}`} /> : <NoProfile />} <span>{props?.owner}</span>\n        </p>\n        </a>\n      </Header>\n      <CardBody>\n        <div className=\"desc\">\n          <p>Time Submitted: {formatTime(props?.content?.timestamp)}</p>\n          <p>Total Votes: {props?.content?.votes}</p>\n        </div>\n      </CardBody>\n    </div>\n    <StartedButton>\n      {!props.isClosed && !props.isOpen ? (\n        <button onClick={handleVoteClick} className=\"vote\">\n          Upvote\n        </button>\n      ) : props.winners?.some((data) => data === props.owner) ? (\n        <button className=\"won\">\n          <img\n            src=\"https://ipfs.near.social/ipfs/bafkreiawfm4tx4xxmqyzify4lmp45mfbqqxn4jkfwqdkg3zzkvlek5fjoi\"\n            alt=\"\"\n          />\n          {winnerDetails?.amount} Won\n        </button>\n      ) : (\n        <button className=\"disabled\">\n          {props.isOpen ? \"Not Started\" : \"Contest Ended\"}\n        </button>\n      )}\n    </StartedButton>\n  </Root>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/CPlanet.DropsFund.Contest.Card", "fact_widget_deployments_id": "6bad487d5b0361169266586758481f29", "inserted_timestamp": "2023-12-18T22:23:57.242Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 0}