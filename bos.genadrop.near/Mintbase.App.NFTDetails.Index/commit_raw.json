{"tx_hash": "AaW8pS7sza7xHL5SGM2sFMfGRLW8SkiKtvGfMgR6oDR4", "action_id_social": "FVzQM911kY9Ec5M3cqFW7LXwBTSqwRS7nkcR5N5t295B-0-widget", "block_id": 120887209, "block_timestamp": "2024-06-10T23:09:19.449Z", "signer_id": "bos.genadrop.near", "widget_name": "Mintbase.App.NFTDetails.Index", "source_code": "const { isDarkModeOn, accountId } = props;\nconst metadataId =\n  props.metadataId || \"nft.herewallet.near:d96acabbdb8bc6ad1317385be84030ed\";\nconst extractedContactId = metadataId.split(\":\")[0];\nconst contractId =\n  props.contractId || extractedContactId || \"nft.herewallet.near\";\nconst buySvg = (\n  <svg\n    id=\"Layer_1\"\n    data-name=\"Layer 1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 639 639\"\n    width=\"40\"\n    height=\"40\"\n    class=\"fill-current text-black dark:text-black\"\n  >\n    <path d=\"m457.61,144c-13,0-25.07,6.74-31.88,17.82l-73.37,108.93c-2.39,3.59-1.42,8.43,2.17,10.82,2.91,1.94,6.76,1.7,9.41-.58l72.22-62.64c1.2-1.08,3.05-.97,4.13.23.49.55.75,1.26.75,1.99v196.12c0,1.62-1.31,2.92-2.93,2.92-.87,0-1.69-.38-2.24-1.05L217.56,157.24c-7.11-8.39-17.55-13.23-28.54-13.24h-7.63c-20.65,0-37.39,16.74-37.39,37.39v276.22c0,20.65,16.74,37.39,37.39,37.39,13,0,25.07-6.74,31.88-17.82l73.37-108.93c2.39-3.59,1.42-8.43-2.17-10.82-2.91-1.94-6.76-1.7-9.41.58l-72.22,62.64c-1.2,1.08-3.05.97-4.13-.23-.49-.55-.75-1.26-.74-1.99v-196.17c0-1.62,1.31-2.92,2.93-2.92.86,0,1.69.38,2.24,1.05l218.28,261.37c7.11,8.39,17.55,13.23,28.54,13.24h7.63c20.65.01,37.4-16.72,37.42-37.37V181.39c0-20.65-16.74-37.39-37.39-37.39Z\"></path>\n  </svg>\n);\nconst Navbar = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background: ${isDarkModeOn ? \"#282a3a\" : \"#f6f5f4\"};\n  height: 50px;\n  width: 100%;\n  .buy {\n    background: none;\n    border: 1px solid #5b5d6b;\n    color: ${isDarkModeOn ? \"#ffffff\" : \"#000000\"};\n    outline: none;\n    margin-top: 30px;\n    padding: 5px 20px;\n    border-radius: 5px;\n    margin-bottom: 20px;\n    min-width: 200px;\n    margin-right: 30px;\n    cursor: pointer;\n    svg {\n      width: 30px;\n    }\n  }\n  .container {\n    display: flex;\n    flex-direction: row;\n    justify-content: end;\n    flex-wrap: wrap;\n    margin-right: 20px;\n    gap: 10px;\n  }\n  .button {\n    background: none;\n    border: 1px solid #5b5d6b;\n    color: ${isDarkModeOn ? \"#ffffff\" : \"#000000\"};\n    outline: none;\n    padding: 5px 20px;\n    border-radius: 5px;\n    min-width: 100px;\n  }\n  .cus {\n    color: red;\n  }\n  @media screen and (max-width: 768px) {\n    display: none;\n    height: 10px;\n  }\n`;\nconst Modal = styled.div`\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n  z-index: 999;\n  :focus {\n    outline: 2px solid transparent;\n    outline-offset: 2px;\n  }\n`;\nconst ModalBg = styled.div`\n  overflow-y: auto;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100vw !important;\n  height: 100%;\n  background-color: #000000;\n  opacity: 0.75;\n  z-index: 999;\n`;\nconst [SDK, setSDK] = useState(null);\nconst [modalState, setModalState] = useState(\"\");\nconst fetchStoreFrontData = (nftId) => {\n  const response2 = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `query getTokenByMetadataId {\n        listingsCount: mb_views_active_listings_aggregate(\n            where: {\n              metadata_id: { _eq: \"${nftId}\" }\n              token: { burned_timestamp: { _is_null: true } }\n            }\n            distinct_on: token_id\n          ) {\n            aggregate {\n              count\n            }\n          }\n            mb_views_nft_tokens(\n                where: {metadata_id: {_eq: \"${nftId}\"}}\n                ) {\n                media\n                minter\n                token_id\n                metadata_id\n                splits\n                royalties_percent\n                royalties\n                reference\n                title\n                nft_contract_id\n                owner\n                base_uri\n                listings {\n                  price\n                  kind\n                }\n                description\n                listings_aggregate {\n                    aggregate {\n                    count\n                    }\n                }\n                }\n            mb_views_nft_activities_rollup(\n                where: {metadata_id: {_eq: \"${nftId}\"}}\n                order_by: {timestamp: desc}\n            ) {\n                action_receiver\n                action_sender\n                count\n                description\n                kind\n                media\n                metadata_id\n                nft_contract_id\n                receipt_id\n                reference\n                timestamp\n                title\n                tx_sender\n                token_ids\n                price\n            }\n        }\n        `,\n    }),\n  });\n  //return response2.body.data;\n  State.update({\n    listingCount: response2?.body?.data?.listingsCount?.aggregate?.count,\n    infoNFT: response2.body.data.mb_views_nft_tokens[0],\n    NftCount:\n      response2.body.data.mb_views_nft_tokens[0].listings_aggregate.aggregate\n        .count,\n    dataTransaction: response2.body.data.mb_views_nft_activities_rollup,\n  });\n};\nconst fetchNFTData = (contractId) => {\n  const response2 = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `query MyQuery {\n            mb_views_active_listings(\n                where: {nft_contract_id: {_eq: \"${contractId}\"}}\n                limit: 4\n            ) {\n                media\n                title\n                kind\n                nft_contract_id\n                listed_by\n                token {\n                    metadata_id\n                }\n            }\n        }\n        `,\n    }),\n  });\n  //return response2.body.data;\n  State.update({\n    dataNFT: response2.body.data.mb_views_active_listings,\n  });\n};\nfetchNFTData(contractId);\nfetchStoreFrontData(metadataId);\nconst isMintedContract = [\"mintbase1.near\", \"mintspace2.testnet\"].some(\n  (substring) => contractId?.includes(substring)\n);\nreturn (\n  <>\n    {state.infoNFT.owner == context.accountId && (\n      <Navbar>\n        <div className=\"container\">\n          {isMintedContract ? (\n            <>\n              <button\n                className=\"button cus\"\n                onClick={() => setModalState(\"BURN\")}\n              >\n                Burn\n              </button>\n              <button\n                className=\"button\"\n                onClick={() => setModalState(\"MULTIPLY\")}\n              >\n                Multiply\n              </button>\n            </>\n          ) : (\n            <></>\n          )}\n          <button className=\"button\" onClick={() => setModalState(\"TRANSFER\")}>\n            Transfer\n          </button>\n          <button className=\"button\" onClick={() => setModalState(\"SELL\")}>\n            Sell\n          </button>\n        </div>\n      </Navbar>\n    )}\n    {modalState !== \"\" && (\n      <div>\n        <ModalBg />\n        <Modal>\n          {modalState === \"SELL\" && (\n            <Widget\n              src={`bos.genadrop.near/widget/Mintbase.NFT.MBSellOption`}\n              props={{\n                data: state.infoNFT,\n                isDarkModeOn,\n                onClose: () => setModalState(\"\"),\n              }}\n            />\n          )}\n          {modalState === \"TRANSFER\" && (\n            <Widget\n              src={`bos.genadrop.near/widget/Mintbase.NFT.TransferOption`}\n              props={{\n                data: state.infoNFT,\n                isDarkModeOn,\n                onClose: () => setModalState(\"\"),\n              }}\n            />\n          )}\n          {modalState === \"BURN\" && (\n            <Widget\n              src={`bos.genadrop.near/widget/Mintbase.NFT.Burn`}\n              props={{\n                data: state.infoNFT,\n                type: \"BURN\",\n                isDarkModeOn,\n                onClose: () => setModalState(\"\"),\n              }}\n            />\n          )}\n          {modalState === \"MULTIPLY\" && (\n            <Widget\n              src={`bos.genadrop.near/widget/Mintbase.NFT.Burn`}\n              props={{\n                data: state.infoNFT,\n                type: \"MULTIPLY\",\n                isDarkModeOn,\n                onClose: () => setModalState(\"\"),\n              }}\n            />\n          )}\n        </Modal>\n      </div>\n    )}\n    <Widget\n      src={\"bos.genadrop.near/widget/Mintbase.App.NFTDetails.NFTShow\"}\n      props={{\n        isDarkModeOn,\n        data: state.infoNFT,\n        NftCount: state.NftCount,\n        listingCount: state.listingCount,\n      }}\n    />\n    <Widget\n      src={\"bos.genadrop.near/widget/Mintbase.App.NFTDetails.NFTTable\"}\n      props={{\n        isDarkModeOn,\n        dataTransaction: state.dataTransaction,\n      }}\n    />\n    <Widget\n      src={\"bos.genadrop.near/widget/Mintbase.App.NFTDetails.NFTMore\"}\n      props={{\n        isDarkModeOn,\n        dataNFT: state.dataNFT,\n      }}\n    />\n    <Widget\n      src=\"bos.genadrop.near/widget/Mintbase.SDK\"\n      props={{\n        mainnet: false,\n        contractName: \"mintspace2.testnet\",\n        loaded: SDK,\n        onLoad: (SDK) => setSDK(SDK),\n        onRefresh: (SDK) => setSDK(SDK),\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/Mintbase.App.NFTDetails.Index", "fact_widget_deployments_id": "1f55f86ede9c8ddf21fbdf6f337b73ca", "inserted_timestamp": "2024-06-11T00:06:35.913Z", "modified_timestamp": "2024-06-11T01:30:40.584Z", "__row_index": 4}