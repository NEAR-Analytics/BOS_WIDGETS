{"tx_hash": "JAd7HgMkb6LnvBF9W5h7gV57Eot2wLioB4QzB9o15TSf", "action_id_social": "EHExEFu7oMXZFqV8BCQYsQVrGhJjKCafS2uG9EhduPUo-0-widget", "block_id": 118567687, "block_timestamp": "2024-05-09T10:33:47.355Z", "signer_id": "bos.genadrop.near", "widget_name": "Mintbase.App.Profile.ContractSettings.Index", "source_code": "const { MbInputField } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.MbInput\"\n) || {\n  MbInputField: () => <></>,\n};\nconst { checkStoreOwner, saveBasicSettings } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.utils.sdk\"\n) || {\n  checkStoreOwner: () => <></>,\n  saveBasicSettings: () => <></>,\n};\nconst SettingsRoot = styled.div`\n  background: #f9f9f9;\n  padding: 24px;\n  h2 {\n    font-size: 16px;\n    font-weight: bold;\n  }\n`;\nconst Basic = styled.div`\n  background: white;\n  padding: 12px;\n  margin-bottom: 20px;\n  .fields {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    button {\n      width: 100px;\n      align-self: center;\n      background-color: black;\n      border-color: black;\n      &:hover {\n        background: white;\n        color: black;\n      }\n    }\n  }\n`;\nconst ContractSettings = ({ isDarkModeOn, contractId }) => {\n  const [storeName, setStoreName] = useState(\"\");\n  const [storeDescription, setStoreDescription] = useState(\"\");\n  const [isStoreOwner, setIsStoreOwner] = useState(\"\");\n  useEffect(() => {\n    checkStoreOwner(contractId, context.accountId)\n      .then((data) => setIsStoreOwner(data))\n      .catch((error) => {\n        console.error(\"in contracts\", error);\n      });\n  }, []);\n  const handleSaveBasics = () => {\n    if (!isStoreOwner) return;\n    const payload = {\n      storeName,\n      storeDescription,\n    };\n    saveBasicSettings(payload, contractId).then((data) => console.log(data));\n  };\n  const onStoreNameChange = (e) => {\n    setStoreName(e.target.value);\n  };\n  const onStoreDescriptionChange = (e) => {\n    setStoreDescription(e.target.value);\n  };\n  return (\n    <SettingsRoot>\n      <Basic>\n        <h2>Basic Information</h2>\n        <div className=\"fields\">\n          <MbInputField\n            className=\"input-field\"\n            id=\"name\"\n            value={storeName}\n            type=\"text\"\n            isDarkModeOn={isDarkModeOn}\n            label=\"Name\"\n            onChange={onStoreNameChange}\n            required={true}\n          />\n          <MbInputField\n            className=\"input-field\"\n            id=\"description\"\n            isDarkModeOn={isDarkModeOn}\n            label=\"Description\"\n            value={storeDescription}\n            rows={5}\n            type=\"textarea\"\n            onChange={onStoreDescriptionChange}\n            required={true}\n          />\n          <button onClick={handleSaveBasics}>Save</button>\n        </div>\n      </Basic>\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Minters\"\n        props={{ isDarkModeOn, contractId, isStoreOwner }}\n      />\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Royalties\"\n        props={{ isDarkModeOn }}\n      />\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Revenue\"\n        props={{ isDarkModeOn }}\n      />\n      {isStoreOwner && (\n        <Widget\n          src=\"bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Ownership\"\n          props={{ isDarkModeOn, contractId }}\n        />\n      )}\n    </SettingsRoot>\n  );\n};\nreturn <ContractSettings {...props} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Index", "fact_widget_deployments_id": "739e6d1b59b07c9f0c0982413888c237", "inserted_timestamp": "2024-05-09T11:43:16.695Z", "modified_timestamp": "2024-05-09T12:46:05.700Z", "__row_index": 0}