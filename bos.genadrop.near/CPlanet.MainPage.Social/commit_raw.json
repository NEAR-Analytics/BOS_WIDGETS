{"tx_hash": "A1dj5BVi5U7PsQLor9Bn972fGjVDVC4AjW5AmfxitExh", "action_id_social": "A1p8TEqz9SYVH4rzxGsdJQPrE5ZhbvtRnwAaFX8shPv4-0-widget", "block_id": 117657192, "block_timestamp": "2024-04-26T10:06:12.377Z", "signer_id": "bos.genadrop.near", "widget_name": "CPlanet.MainPage.Social", "source_code": "const hashtag = props.hashtag;\nif (!state || state.hashtag !== hashtag) {\n  State.update({\n    feedIndex: hashtag ? 1 : context.accountId ? 0 : 1,\n    hashtag,\n  });\n}\nconst options = [\n  {\n    title: \"All\",\n  },\n  {\n    title: \"C Constellation\",\n  },\n  {\n    title: \"DAOs Feed\",\n    // disabled: !context.accountId,\n  },\n];\nif (hashtag) {\n  options.push({\n    title: `#${hashtag}`,\n  });\n}\nlet accounts = undefined;\nlet creators = undefined;\nconst getFollowedDAOs = (accountId) => {\n  let following = Social.keys(`${context.accountId}/graph/follow/*`, \"final\", {\n    return_type: \"BlockHeight\",\n  });\n  if (following === null) return null;\n  following = Object.keys(following[accountId].graph.follow || {}).filter(\n    (account) => account.endsWith(\".sputnik-dao.near\")\n  );\n  return following;\n};\nif (state.feedIndex === 1) {\n  accounts = [\"creativesdao.sputnik-dao.near\"];\n}\nif (state.feedIndex === 2) {\n  const response = fetch(\n    \"https://raw.githubusercontent.com/GenaDrop/genadrop-bos-widgets/main/data/cdao-daos.json\"\n  );\n  const daos = response.ok && JSON.parse(response.body);\n  accounts = [...daos.daos];\n  console.log(accounts);\n}\nconst fetchTopCreators = () => {\n  const response = fetch(\n    \"https://raw.githubusercontent.com/GenaDrop/genadrop-bos-widgets/main/data/cdao-top-creators.json\"\n  );\n  const top = response.ok && JSON.parse(response.body);\n  creators = [...top.topCreators];\n  return creators;\n};\nconsole.log(\"topCretors: \", fetchTopCreators());\nconst CPlanetFont = styled.div`\n  *,\n  *::before,\n  *::after {\n    font-family: Helvetica Neue;\n    box-sizing: border-box;\n  }\n`;\nconst Nav = styled.div`\n  .nav-pills {\n    background: #fbfbfb;\n    font-weight: 500;\n    --bs-nav-pills-border-radius: 0;\n    --bs-nav-link-color: #b0b0b0;\n    --bs-nav-pills-link-active-color: #000;\n    --bs-nav-pills-link-active-bg: #fbfbfb;\n    --bs-nav-link-padding-y: 0.75rem;\n    border-bottom: 1px solid #eee;\n    padding-top: 3px;\n  }\n  .nav-link.active {\n    border-bottom: 3px solid #000;\n    font-weight: 600;\n  }\n  .nav-item:hover {\n    background: rgba(0, 0, 0, 0.15);\n    * {\n      color: #000 !important;\n    }\n  }\n  margin: 0 -12px;\n`;\nconst SocialWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 2rem;\n  .rhs {\n    width: 370px;\n  }\n  ..lsh {\n    width: 360px;\n  }\n  .rhs,\n  .lhs {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 16px 24px 476px 24px;\n    border: 1px solid #efefef;\n    background: #f8f8f8;\n    @media screen and (max-width: 992px) {\n      display: none;\n    }\n  }\n  .mid {\n    flex: 1;\n  }\n  .daos {\n    padding: 20px 0px;\n    .title-section {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      h3 {\n        font-size: 24px;\n        font-style: normal;\n        font-weight: 900;\n        line-height: 120%;\n      }\n      .all {\n        color: #b0b0b0;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 100%; /* 16px */\n      }\n    }\n  }\n`;\nconst communities = [\n  \"marmaj.sputnik-dao.near\",\n  \"daorecords.sputnik-dao.near\",\n  \"vibes.sputnik-dao.near\",\n];\nreturn (\n  <CPlanetFont>\n    <SocialWrapper>\n      <div className=\"lhs\">\n        <Widget src=\"jgodwill.near/widget/People\" props={{}} />\n      </div>\n      <div className=\"mid\">\n        {context.accountId && (\n          <div className=\"mb-3\">\n            <Widget\n              src=\"jgodwill.near/widget/CPlanet.MainPage.Compose\"\n              props={{}}\n            />\n          </div>\n        )}\n        <Nav>\n          <ul className=\"nav nav-pills nav-fill mb-3\">\n            {options.map((option, i) => (\n              <li className=\"nav-item\" key={i}>\n                <button\n                  className={`nav-link ${\n                    state.feedIndex === i ? \"active\" : \"\"\n                  } ${option.disabled ? \"disabled\" : \"\"}`}\n                  aria-disabled={!!option.disabled}\n                  onClick={() =>\n                    !option.disabled && State.update({ feedIndex: i })\n                  }\n                >\n                  {option.title}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </Nav>\n        {state.feedIndex === 3 ? (\n          <Widget src=\"mob.near/widget/Hashtag.Feed\" props={{ hashtag }} />\n        ) : (\n          <Widget\n            src=\"bos.genadrop.near/widget/CPlanet.MainPage.Feed\"\n            props={{ accounts }}\n          />\n        )}\n      </div>\n      <div className=\"rhs\">\n        <div className=\"daos\">\n          <div className=\"title-section\">\n            <h3>Featured DAOs</h3>\n            <a href=\"#\" className=\"all\">\n              Show more (59)\n              <svg\n                width=\"10\"\n                height=\"10\"\n                viewBox=\"0 0 10 10\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M1.13672 1C4.20751 1 5.92918 1 8.99997 1V9\"\n                  stroke=\"#B0B0B0\"\n                  stroke-width=\"1.3478\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n                <path\n                  d=\"M8.99883 1L1 8.7377\"\n                  stroke=\"#B0B0B0\"\n                  stroke-width=\"1.3478\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </a>\n          </div>\n          {communities.map((data, index) => (\n            <a\n              href={`/mob.near/widget/ProfilePage?accountId=${accountId}`}\n              className=\"text-decoration-none\"\n              key={i}\n            >\n              <Widget\n                props={{\n                  daoId: data,\n                  onButtonClick: () =>\n                    props.update({ tab: \"daoProfile\", daoId: data }),\n                }}\n                src=\"jgodwill.near/widget/CPlanet.FeaturedDAO.Card\"\n              />\n            </a>\n          ))}\n        </div>\n        <div className=\"daos\">\n          <div className=\"title-section\">\n            <h3>Top Creators</h3>\n            <a\n              href=\"#/bos.genadrop.near/widget/CPlanet.Index?tab=community\"\n              className=\"all\"\n              onClick={() => props.update({ tab: \"community\" })}\n            >\n              Show more\n              <svg\n                width=\"10\"\n                height=\"10\"\n                viewBox=\"0 0 10 10\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M1.13672 1C4.20751 1 5.92918 1 8.99997 1V9\"\n                  stroke=\"#B0B0B0\"\n                  stroke-width=\"1.3478\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n                <path\n                  d=\"M8.99883 1L1 8.7377\"\n                  stroke=\"#B0B0B0\"\n                  stroke-width=\"1.3478\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </a>\n          </div>\n          {fetchTopCreators().map((data, index) => (\n            <div key={index}>\n              <Widget\n                loading={\n                  <div\n                    className=\"placeholder d-inline-block rounded-circle\"\n                    style={{ width: \"3em\", height: \"3em\" }}\n                  />\n                }\n                src=\"jgodwill.near/widget/CPlanet.TopCreator.Card\"\n                props={{\n                  accountId: data,\n                  tooltip: true,\n                  className: \"d-inline-block overflow-hidden\",\n                  imageClassName: \"rounded-circle w-100 h-100\",\n                }}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    </SocialWrapper>\n  </CPlanetFont>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/CPlanet.MainPage.Social", "fact_widget_deployments_id": "5bc1fc6ade5c2a91662a095f3e70b009", "inserted_timestamp": "2024-04-26T11:43:20.585Z", "modified_timestamp": "2024-04-26T11:43:20.585Z", "__row_index": 3}