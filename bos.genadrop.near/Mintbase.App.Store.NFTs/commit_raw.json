{"tx_hash": "A9gUdjtqYGgAx7mzZMrCWfHzoX7mWABH7mLFwZhiUyQA", "action_id_social": "A2coecr48byEFfzhpnpacByM6NU3Sa1N9EXqBwYuPFTr-0-widget", "block_id": 116102608, "block_timestamp": "2024-04-04T08:36:32.081Z", "signer_id": "bos.genadrop.near", "widget_name": "Mintbase.App.Store.NFTs", "source_code": "const { CreateStoreCard } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.App.Store.CreateStoreCard\"\n);\nconst Card = styled.div`\n  padding: 1em;\n  border: 1px solid #e5e8eb;\n  gap: 2em;\n  margin: 10px auto;\n  border-radius: 0.7em;\n  & input {\n    display: block;\n    padding: 0.5em;\n    width: 100%;\n    border: 1px solid #e5e8eb;\n    border-radius: 10px;\n    outline: none;\n    background: #f4f5f6;\n    color: #525c76;\n    :focus {\n      box-shadow: none;\n      border: 1px solid #0d99ff;\n    }\n    &::placeholder {\n      color: palevioletred;\n    }\n  }\n  .soulbound {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n  }\n  img {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n  }\n`;\n\nconst Cards = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-gap: 1em;\n  border-radius: 0.7em;\n  width: 100%;\n  margin-top: 1em;\n`;\n\nconst fetchStoreFrontData = (owner, contractId) => {\n  const response2 = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `query MyQuery {\n  mb_views_nft_metadata_unburned(\n    where: {nft_contract: {id: {_eq: \"${contractId}\"}, owner_id: {_eq: \"${owner}\"}}}\n    offset: 0\n    order_by: {minted_timestamp: desc}\n  ) {\n    createdAt: minted_timestamp\n    listed: price\n    media\n    storeId: nft_contract_id\n    metadataId: metadata_id\n    title\n    description\n  }\n  mb_views_nft_metadata_unburned_aggregate(\n    where: {nft_contract: {id: {_eq: \"${contractId}\"}, owner_id: {_eq: \"${owner}\"}}}\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n`,\n    }),\n  });\n\n  State.update({\n    storeContracts: response2.body.data.mb_views_nft_metadata_unburned,\n    storeNftsCount:\n      response2.body.data.mb_views_nft_metadata_unburned_aggregate.aggregate\n        .count,\n    ownerId: owner,\n  });\n  console.log(\"running2\", state.storeContracts);\n};\n\nfetchStoreFrontData(\n  props.ownerId || \"nate.near\",\n  props.contract || \"nate.mintbase1.near\"\n);\n\nconst storeNfts = state.storeContracts;\n\nconst WrapCards = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  flex-wrap: wrap;\n  width: 100%;\n  border-radius: 10px;\n  box-shadow: 0 0.05rem 0.05rem rgb(34 34 34 / 5%),\n    0 0.2rem 0.8rem rgb(34 34 34 / 8%);\n  .count {\n    text-transform: uppercase;\n    font-weight: 400;\n    font-size: 16px;\n    color: #525c76;\n  }\n`;\n\nconst s = state.storeNftsCount > 1 ? \"s\" : \"\";\n\nreturn (\n  <WrapCards>\n    <div className=\"count\">{`${state.storeNftsCount} Result${s}`}</div>\n    <Cards>\n      {storeNfts &&\n        storeNfts.map((data, index) => (\n          <div key={index}>\n            <Widget\n              props={{\n                title: data.title,\n                description: data.description,\n                image: data.media,\n\n                price: data.listed,\n                owner: state.ownerId,\n                price: data.listed\n                  ? (data.listed / 1000000000000000000000000).toFixed(2)\n                  : null,\n                isListed: data.listed ? \"LISTED\" : \"NOT LISTED\",\n                tokenId: data.token_id,\n                contractId: data.storeId,\n                metadataId: data.metadataId,\n              }}\n              src=\"bos.genadrop.near/widget/Mintbase.NFT.Card\"\n            />\n          </div>\n        ))}\n      <CreateStoreCard\n        isDarkModeOn={isDarkModeOn}\n        createStoreHandler={createStoreHandler}\n      />\n    </Cards>\n  </WrapCards>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/Mintbase.App.Store.NFTs", "fact_widget_deployments_id": "b2632bf3703c0fa99b9828656a0b2bfb", "inserted_timestamp": "2024-04-04T10:37:54.677Z", "modified_timestamp": "2024-04-04T10:37:54.677Z", "__row_index": 0}