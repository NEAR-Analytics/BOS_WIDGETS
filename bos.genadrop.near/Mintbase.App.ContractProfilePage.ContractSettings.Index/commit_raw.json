{"tx_hash": "49koZ3vaegokf79siztpUTQ2JxBcDF2QDEF9EC3iM7w1", "action_id_social": "HRBXv7Gqy2FUHAvMJJbL2wE6MoGmBTSon53FEoQ2oh1t-0-widget", "block_id": 120423869, "block_timestamp": "2024-06-04T13:49:26.146Z", "signer_id": "bos.genadrop.near", "widget_name": "Mintbase.App.ContractProfilePage.ContractSettings.Index", "source_code": "const { MbInputField } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.MbInput\"\n) || {\n  MbInputField: () => <></>,\n};\nconst { checkStoreOwner, saveBasicSettings } = VM.require(\n  \"bos.genadrop.near/widget/Mintbase.utils.sdk\"\n) || {\n  checkStoreOwner: () => <></>,\n  saveBasicSettings: () => <></>,\n};\nconst SettingsRoot = styled.div`\n  background: #f9f9f9;\n  padding: 24px;\n  &.dark {\n    background: #1e2030;\n    h2 {\n      color: #fff;\n    }\n  }\n  h2 {\n    font-size: 16px;\n    font-weight: bold;\n  }\n`;\nconst Basic = styled.div`\n  background: white;\n  padding: 12px;\n  margin-bottom: 20px;\n  &.dark {\n    background: #1e2030;\n    h2 {\n      color: #fff;\n    }\n  }\n  .fields {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    button {\n      width: 100px;\n      align-self: center;\n      background-color: black;\n      border-color: black;\n      &:hover {\n        background: white;\n        color: black;\n      }\n    }\n  }\n`;\nconst ContractSettings = ({ isDarkModeOn, contractId }) => {\n  const [storeName, setStoreName] = useState(\"\");\n  const [storeDescription, setStoreDescription] = useState(\"\");\n  const [isStoreOwner, setIsStoreOwner] = useState(\"\");\n  useEffect(() => {\n    checkStoreOwner(contractId, context.accountId)\n      .then((data) => setIsStoreOwner(data))\n      .catch((error) => {\n        console.error(\"in contracts\", error);\n      });\n  }, []);\n  const handleSaveBasics = () => {\n    if (!isStoreOwner) return;\n    const payload = {\n      storeName,\n      storeDescription,\n    };\n    saveBasicSettings(payload, contractId).then((data) => console.log(data));\n  };\n  const onStoreNameChange = (e) => {\n    setStoreName(e.target.value);\n  };\n  const onStoreDescriptionChange = (e) => {\n    setStoreDescription(e.target.value);\n  };\n  return (\n    <SettingsRoot className={isDarkModeOn ? \"dark\" : \"light\"}>\n      <Basic className={isDarkModeOn ? \"dark\" : \"light\"}>\n        <h2>Basic Information</h2>\n        <div className=\"fields\">\n          <MbInputField\n            className=\"input-field\"\n            id=\"name\"\n            value={storeName}\n            type=\"text\"\n            isDarkModeOn={isDarkModeOn}\n            label=\"Name\"\n            onChange={onStoreNameChange}\n            required={true}\n          />\n          <MbInputField\n            className=\"input-field\"\n            id=\"description\"\n            isDarkModeOn={isDarkModeOn}\n            label=\"Description\"\n            value={storeDescription}\n            rows={5}\n            type=\"textarea\"\n            onChange={onStoreDescriptionChange}\n            required={true}\n          />\n          <button onClick={handleSaveBasics}>Save</button>\n        </div>\n      </Basic>\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.Profile.ContractSettings.Minters\"\n        props={{ isDarkModeOn, contractId, isStoreOwner }}\n      />\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.ContractProfilePage.ContractSettings.Royalties\"\n        props={{ isDarkModeOn, handleRoyalties: () => {} }}\n      />\n      <Widget\n        src=\"bos.genadrop.near/widget/Mintbase.App.ContractProfilePage.ContractSettings.Revenue\"\n        props={{ isDarkModeOn, handleSplits: () => {} }}\n      />\n      {isStoreOwner && (\n        <Widget\n          src=\"bos.genadrop.near/widget/Mintbase.App.ContractProfilePage.ContractSettings.Ownership\"\n          props={{ isDarkModeOn, contractId }}\n        />\n      )}\n    </SettingsRoot>\n  );\n};\nreturn <ContractSettings {...props} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bos.genadrop.near/widget/Mintbase.App.ContractProfilePage.ContractSettings.Index", "fact_widget_deployments_id": "5817d9c9fa5696b797ed35859590f140", "inserted_timestamp": "2024-06-04T15:09:53.082Z", "modified_timestamp": "2024-06-04T15:09:53.082Z", "__row_index": 0}