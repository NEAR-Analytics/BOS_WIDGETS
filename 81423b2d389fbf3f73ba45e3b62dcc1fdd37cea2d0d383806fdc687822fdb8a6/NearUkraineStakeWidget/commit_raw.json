{"tx_hash": "6CH7jemAVvKLNMVWh5qjG7zucmAEP4XjAReyW7psufyJ", "action_id_social": "4ZjgMqUMdv2tZoQ9W7bzsBhQ9i7BgBiLnwbHjpNjnp8u-0-widget", "block_id": 115010164, "block_timestamp": "2024-03-19T08:04:29.566Z", "signer_id": "81423b2d389fbf3f73ba45e3b62dcc1fdd37cea2d0d383806fdc687822fdb8a6", "widget_name": "NearUkraineStakeWidget", "source_code": "initState({\n  amount: \"1\",\n  poolId: \"nearuaguild.poolv1.near\",\n});\n\nconst onStakeClick = () => {\n  const teraGas = 1000000000000;\n  const gas = 300 * teraGas;\n  // TODO: doesn't support floats right now due to limitation of JS integers\n  const deposit = parseInt(state.amount) + \"000000000000000000000000\";\n  console.log(\"gas: \", gas, \"deposit: \", deposit);\n  Near.call(state.poolId, \"deposit_and_stake\", {}, gas, deposit);\n};\n\nconst Button = styled.button`\n  /* Adapt the colors based on primary prop */\n  background: ${(props) => (props.$primary ? \"#BF4F74\" : \"white\")};\n  color: ${(props) => (props.$primary ? \"white\" : \"#BF4F74\")};\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid #BF4F74;\n  border-radius: 3px;\n`;\n\nconst accountId = props.wallet_id || context.accountId;\nconst totalStakedBalance =\n  Near.view(\"nearuaguild.poolv1.near\", \"get_total_staked_balance\", {}) / 1e24;\n\nconst yourStakedBalance =\n  Near.view(\"nearuaguild.poolv1.near\", \"get_account_staked_balance\", {\n    account_id: accountId,\n  }) / 1e24;\n\nconst res = fetch(\n  `https://api.nearblocks.io/v1/account/${props.wallet_id || context.accountId}`\n);\nconst yourAccountBalance = res.body.account[0].amount / 1e24;\nreturn (\n  <div>\n    <h1>Stake NEAR</h1>\n    <p>Pool: <input value={state.poolId}/></p>\n    <p>Amount: <input type=\"number\" value={state.amount}/></p>\n    <Button onClick={onStakeClick}>Stake</Button>\n    <p>Total staked balance in validator is: {totalStakedBalance} Near</p>\n    <p>Your staked balance in validator is: {yourStakedBalance} Near</p>\n    <p>Your balance is: {yourAccountBalance} Near</p>\n  </div>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/81423b2d389fbf3f73ba45e3b62dcc1fdd37cea2d0d383806fdc687822fdb8a6/widget/NearUkraineStakeWidget", "fact_widget_deployments_id": "bd6a8e44cfcc19e73bae140350e3e898", "inserted_timestamp": "2024-03-19T09:34:29.241Z", "modified_timestamp": "2024-03-19T09:34:29.241Z", "__row_index": 43}