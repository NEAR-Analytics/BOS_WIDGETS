{"tx_hash": "GYfRW7ehYc48979RPo1UQwaoBQ3tyhBJjQMzUkqfQTLX", "action_id_social": "53mKEDoorAB2iY1TPC4181dW6W92gAC8RuYWAmW3vYrH-0-widget", "block_id": 105934698, "block_timestamp": "2023-11-17T23:41:06.154Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "addSheet", "source_code": "const setAddSheet = props.setAddSheet;\nconst ppdContract = props.ppdContract;\nconst ppdAbi = props.ppdAbi;\n\nconst [sheetName, setSheetName] = useState(\"\");\nconst [composerIdx, setComposerIdx] = useState(\"\");\nconst [difficulty, setDifficulty] = useState(0);\n\nconsole.log(ppdContract);\nconsole.log(props);\n\n// State.init({\n//   img: null,\n// });\n\nconst addSheet = () => {\n  console.log(\"entrando a addSheet\");\n  console.log(\"ppdContract\", ppdContract);\n\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUserIdx().then((userIdx) => {\n    console.log(\"userIdx\", userIdx);\n    console.log(\"composerIdx\", composerIdx);\n    const daraUri = \"\";\n\n    ppd\n      .addSheet(sheetName, composerIdx, userIdx, difficulty, daraUri)\n      .then(() => {\n        setAddSheet(false);\n      });\n  });\n};\n\nconst getComposers = () => {\n  if (ppdContract == undefined) return;\n\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getComposers().then((res) => {\n    console.log(res);\n    console.log(\"co\");\n    const comp = res && res.map((r) => r[0]);\n    State.update({ composers: comp });\n  });\n};\n\nuseEffect(() => {\n  getComposers();\n}, []);\n\nreturn (\n  <>\n    <div>\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"text\"\n        id=\"sheetName\"\n        name=\"sheetName\"\n        required\n        placeholder=\"Name of the Sheet\"\n        onChange={(event) => {\n          setSheetName(event.target.value);\n        }}\n      />\n\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"text\"\n        id=\"difficulty\"\n        name=\"difficulty\"\n        required\n        placeholder=\"Level of Difficulty\"\n        onChange={(event) => {\n          setDifficulty(event.target.value);\n        }}\n      />\n      <button onClick={addSheet}>Add Sheet</button>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/addSheet", "fact_widget_deployments_id": "212d46132dbdedb96881a2e8270dc032", "inserted_timestamp": "2023-11-18T01:09:57.547Z", "modified_timestamp": "2023-11-18T01:09:57.547Z", "__row_index": 5}