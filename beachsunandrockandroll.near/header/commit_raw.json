{"tx_hash": "AAKbaA38NZGbjjewSfPoTwm9f3EejofGoAfzhjSdN1pV", "action_id_social": "CmS45vNz6LSwjmfxK2eLcQDxVjAMYibfVG6iRLmp1g1a-0-widget", "block_id": 106015569, "block_timestamp": "2023-11-19T00:00:58.460Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "header", "source_code": "const Header = styled.div`\n    background: #000;\n    color: white;\n    padding-top: 7px;\n    padding-bottom: 7px;\n    display: flex;\n\n    .img {\n        height: 70px;\n    }\n\n    .connect {\n        width: 100%;\n        text-align: right;\n        height: 70px;\n    }\n\n    .user {\n      padding-right: 10px;\n      padding-top: 10px;\n      height: 100%;\n    }\n\n    .conn-button {\n      padding-right: 10px;\n      padding-top: 15px;\n      height: 100%;\n    }\n\n    .option-links {\n      height: 100%; \n      padding-top:22px;\n      justify-content: center;\n    }\n    .option-links a {\n      color: #fff;\n      text-decoration: underline;\n      font-size: 14px;\n    }\n`;\n\nconst linkSheets = props.linkSheets;\nconst linkComposer = props.linkComposer;\nconst [user, setUser] = useState(\"\");\n\nconst { ppdContract, ppdAbi } = VM.require(\n  \"beachsunandrockandroll.near/widget/utils\"\n);\n\nconst getUsers = () => {\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUsers().then((res) => {\n    State.update({ users: res });\n  });\n};\n\nconst isUserRegistered = () => {\n  if (!state.users) return false;\n\n  const userTmp = state.users.find(\n    (user) => user[0].toLowerCase() === state.sender\n  );\n\n  if (userTmp != undefined) setUser(userTmp);\n\n  return userTmp != undefined;\n};\n\nif (state.sender === undefined) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    State.update({ sender: accounts[0] });\n    getUsers();\n  }\n}\n\nreturn (\n  <Header>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"logo col\">\n          <img\n            src=\"https://raw.githubusercontent.com/gonzalobarria/prodigy-piano-diary/master/public/images/ppd-mini-logo-black.jpg\"\n            class=\"img\"\n          />\n        </div>\n        <div class=\"d-flex gap-5 justify-center col option-links\">\n          {!!state.sender && isUserRegistered() && (\n            <>\n              <a href=\"#\" onClick={linkSheets}>\n                My Sheets\n              </a>\n              <a href=\"#\" onClick={linkComposer}>\n                Composer List\n              </a>\n            </>\n          )}\n        </div>\n        <div class=\"col connect\">\n          {!!state.sender ? (\n            <div class=\"user\">\n              {user && <div>Hi {user[1]}!</div>}\n              <div>{`${state.sender.slice(0, 4)}...${state.sender.slice(\n                -4\n              )}`}</div>\n            </div>\n          ) : (\n            <div class=\"conn-button\">\n              <Web3Connect connectLabel=\"Connect with Web3\" />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  </Header>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/header", "fact_widget_deployments_id": "6753b204d90c81f00f68a11efff8b56c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}