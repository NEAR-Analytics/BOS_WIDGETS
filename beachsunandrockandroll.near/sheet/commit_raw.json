{"tx_hash": "5xg5c9zFbzNqmc69LXBDGCXWtLdmBUMSHdHPCq3VUuEv", "action_id_social": "7G2xLC4743QAypC9GG8ijfsLcYw911RM5BDbDFPNTwSV-0-widget", "block_id": 105978815, "block_timestamp": "2023-11-18T13:22:57.588Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "sheet", "source_code": "const sheetIdx = props.sheetIdx || 0;\n\nconst { getNormalDate, ppdContract, ppdAbi } = VM.require(\n  \"beachsunandrockandroll.near/widget/utils\"\n);\n\nState.init({\n  userSheets: [],\n});\n\nconst getUserSheets = () => {\n  if (ppdContract == undefined) return;\n\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUserIdx().then((userIdx) => {\n    ppd.getUserSheets(parseInt(userIdx.toString())).then((userSheets) => {\n      userSheets.map((userSheet, i) => {\n        if (i === sheetIdx) {\n          const sheet = {\n            name: userSheet[0],\n            createdAt: getNormalDate(userSheet[1]),\n            difficulty: userSheet[2],\n            dataUri: userSheet[3],\n          };\n          State.update({ sheet });\n        }\n      });\n    });\n  });\n};\n\nif (state.sender === undefined) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    State.update({ sender: accounts[0] });\n    getUserSheets();\n  }\n}\n\nreturn (\n  <>\n    <h2>{state.sheet.name}</h2>\n  </>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/sheet", "fact_widget_deployments_id": "e9e8a39021ef09492183bebdc41922ee", "inserted_timestamp": "2023-11-18T15:24:02.694Z", "modified_timestamp": "2023-11-18T15:24:02.694Z", "__row_index": 0}