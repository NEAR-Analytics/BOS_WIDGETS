{"tx_hash": "3jbtjAbLSHc1cYr1prBEjK6mTMjGMNoUWwmSW4ipXUUM", "action_id_social": "Cpc2z9xrxkd7GiT9Tg9bsULTUA1STjbFcuasG28eG2kw-0-widget", "block_id": 105977739, "block_timestamp": "2023-11-18T13:04:07.754Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "addRecord", "source_code": "const setAddRecord = props.setAddRecord;\nconst sheetIdx = props.sheetIdx;\n\nconst { ppdContract, ppdAbi } = VM.require(\n  \"beachsunandrockandroll.near/widget/utils\"\n);\n\nconst [sheetName, setSheetName] = useState(\"\");\nconst [phraseNumber, setPhraseNumber] = useState(0);\nconst [subPhraseNumber, setSubPhraseNumber] = useState(0);\nconst [minutes, setMinutes] = useState(0);\nconst [studyType, setStudyType] = useState(0);\nconst [focusType, setFocusType] = useState(0);\n\nState.init({\n  studyType: [\"Fingers\", \"Rhythm\", \"Memorization\", \"Dynamics\"],\n  focusType: [\"Study\", \"Practice\"],\n});\n\nconst settingStudyType = (value) => {\n  const sType = state.studyType.find((st, i) => {\n    if (st === value[0]) return i;\n  });\n\n  console.log(sType);\n\n  setStudyType(sType);\n};\n\nconst addRecord = () => {\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUserIdx().then((userIdx) => {\n    ppd\n      .addRecord(\n        parseInt(userIdx.toString()),\n        sheetIdx,\n        phraseNumber,\n        subPhraseNumber,\n        minutes,\n        studyType,\n        focusType,\n        false\n      )\n      .then(() => {\n        setAddRecord(false);\n      });\n  });\n};\n\nreturn (\n  <>\n    <div>\n      <div>ShhetIdx: --{sheetIdx}--</div>\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"phraseNumber\"\n        name=\"phraseNumber\"\n        required\n        placeholder=\"Number of Phrase\"\n        onChange={(event) => {\n          setPhraseNumber(event.target.value);\n        }}\n      />\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"subPhraseNumber\"\n        name=\"subPhraseNumber\"\n        required\n        placeholder=\"Number of Sub-Phrase\"\n        onChange={(event) => {\n          setSubPhraseNumber(event.target.value);\n        }}\n      />\n      <Typeahead\n        className=\"p-2\"\n        options={state.studyType}\n        // multiple\n        onChange={(value) => {\n          setStudyType(0);\n        }}\n        placeholder=\"Select Type of Study\"\n      />\n      <Typeahead\n        className=\"p-2\"\n        options={state.focusType}\n        // multiple\n        onChange={(value) => {\n          setFocusType(0);\n        }}\n        placeholder=\"Select Type of Focus\"\n      />\n\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"minutes\"\n        name=\"minutes\"\n        required\n        placeholder=\"How many minutes do you study?\"\n        onChange={(event) => {\n          setMinutes(event.target.value);\n        }}\n      />\n      <button onClick={addRecord}>Add Record</button>\n      <button onClick={() => setAddRecord(false)}>Close</button>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/addRecord", "fact_widget_deployments_id": "b748fa275579c91279f04a21aea3a91a", "inserted_timestamp": "2023-11-18T14:52:52.959Z", "modified_timestamp": "2023-11-18T14:52:52.959Z", "__row_index": 5}