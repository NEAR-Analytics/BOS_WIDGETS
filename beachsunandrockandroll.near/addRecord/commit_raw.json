{"tx_hash": "ApNBnqab9RSFBM6f99uqfccUgieYhSTsqvDH8DQB6L3j", "action_id_social": "7JyFdVEiZq7oAWWWimEE4j7rHKcCCiDVSS283LqwCusF-0-widget", "block_id": 106019111, "block_timestamp": "2023-11-19T01:01:18.945Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "addRecord", "source_code": "const setAddRecord = props.setAddRecord;\nconst sheetIdx = props.sheetIdx;\n\nconst { ppdContract, ppdAbi, studyType, focusType } = VM.require(\n  \"beachsunandrockandroll.near/widget/utils\"\n);\n\nconst [sheetName, setSheetName] = useState(\"\");\nconst [phraseNumber, setPhraseNumber] = useState(0);\nconst [subPhraseNumber, setSubPhraseNumber] = useState(0);\nconst [minutes, setMinutes] = useState(0);\nconst [studyT, setStudyT] = useState(-1);\nconst [focusT, setFocusT] = useState(-1);\n\nState.init({ studyType, focusType });\n\nconst getIdxFromArray = (array, value) => array.findIndex((a) => a === value);\n\nconst addRecord = () => {\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUserIdx().then((userIdx) => {\n    ppd\n      .addRecord(\n        Big(userIdx).toFixed(),\n        sheetIdx,\n        phraseNumber,\n        subPhraseNumber,\n        minutes,\n        studyT,\n        focusT,\n        false\n      )\n      .then(() => {\n        setAddRecord(false);\n      });\n  });\n};\n\nreturn (\n  <>\n    <div>\n      <input\n        className=\"form-control mt-2 mb-3 mx-2 p-2\"\n        type=\"number\"\n        id=\"phraseNumber\"\n        name=\"phraseNumber\"\n        required\n        placeholder=\"Number of Phrase\"\n        onChange={(event) => {\n          setPhraseNumber(event.target.value);\n        }}\n      />\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"subPhraseNumber\"\n        name=\"subPhraseNumber\"\n        required\n        placeholder=\"Number of Sub-Phrase\"\n        onChange={(event) => {\n          setSubPhraseNumber(event.target.value);\n        }}\n      />\n      <Typeahead\n        className=\"p-2 \"\n        options={state.studyType}\n        onChange={(value) => {\n          setStudyT(getIdxFromArray(state.studyType, value[0]));\n        }}\n        placeholder=\"Select Type of Study\"\n      />\n      <Typeahead\n        className=\"p-2\"\n        options={state.focusType}\n        onChange={(value) => {\n          setFocusT(getIdxFromArray(state.focusType, value[0]));\n        }}\n        placeholder=\"Select Type of Focus\"\n      />\n\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"minutes\"\n        name=\"minutes\"\n        required\n        placeholder=\"How many minutes do you study?\"\n        onChange={(event) => {\n          setMinutes(event.target.value);\n        }}\n      />\n      <div class=\"  p-2\">\n        <button onClick={addRecord}>Add Record</button>\n        <button\n          onClick={() => setAddRecord(false)}\n          class=\"btn btn-outline-secondary\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/addRecord", "fact_widget_deployments_id": "3cfd1303bd1d611811b2f13c4e530c84", "inserted_timestamp": "2023-11-19T02:58:37.532Z", "modified_timestamp": "2023-11-19T02:58:37.532Z", "__row_index": 8}