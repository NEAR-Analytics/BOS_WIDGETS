{"tx_hash": "3x7dxRX7ejxZXzFv3asrqYUqB1Gv2Hdm15WjEVTTa2eG", "action_id_social": "2yWjVnxCcDjm4h9PVgxkmcrGgpRhktYrips7E9GRVke9-0-widget", "block_id": 106016767, "block_timestamp": "2023-11-19T00:21:21.160Z", "signer_id": "beachsunandrockandroll.near", "widget_name": "addRecord", "source_code": "const setAddRecord = props.setAddRecord;\nconst sheetIdx = props.sheetIdx;\n\nconst { ppdContract, ppdAbi, studyType, focusType } = VM.require(\n  \"beachsunandrockandroll.near/widget/utils\"\n);\n\nconst [sheetName, setSheetName] = useState(\"\");\nconst [phraseNumber, setPhraseNumber] = useState(0);\nconst [subPhraseNumber, setSubPhraseNumber] = useState(0);\nconst [minutes, setMinutes] = useState(0);\nconst [studyT, setStudyT] = useState(-1);\nconst [focusT, setFocusT] = useState(-1);\n\nState.init({ studyType, focusType });\n\nconst getIdxFromArray = (array, value) => array.findIndex((a) => a === value);\n\nconst addRecord = () => {\n  const ppd = new ethers.Contract(\n    ppdContract,\n    ppdAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  ppd.getUserIdx().then((userIdx) => {\n    ppd\n      .addRecord(\n        Big(userIdx).toFixed(),\n        sheetIdx,\n        phraseNumber,\n        subPhraseNumber,\n        minutes,\n        studyT,\n        focusT,\n        false\n      )\n      .then(() => {\n        setAddRecord(false);\n      });\n  });\n};\n\nreturn (\n  <>\n    <div>\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"phraseNumber\"\n        name=\"phraseNumber\"\n        required\n        placeholder=\"Number of Phrase\"\n        onChange={(event) => {\n          setPhraseNumber(event.target.value);\n        }}\n      />\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"subPhraseNumber\"\n        name=\"subPhraseNumber\"\n        required\n        placeholder=\"Number of Sub-Phrase\"\n        onChange={(event) => {\n          setSubPhraseNumber(event.target.value);\n        }}\n      />\n      <Typeahead\n        className=\"p-2\"\n        options={state.studyType}\n        // multiple\n        onChange={(value) => {\n          setStudyT(getIdxFromArray(state.studyType, value[0]));\n          // State.update({\n          //   studyType: getIdxFromArray(state.studyType, value[0]),\n          // });\n        }}\n        placeholder=\"Select Type of Study\"\n      />\n      <Typeahead\n        className=\"p-2\"\n        options={state.focusType}\n        // multiple\n        onChange={(value) => {\n          setFocusT(getIdxFromArray(state.focusType, value[0]));\n          // State.update({\n          //   focusType: getIdxFromArray(state.focusType, value[0]),\n          // });\n        }}\n        placeholder=\"Select Type of Focus\"\n      />\n\n      <input\n        className=\"form-control m-2 p-2\"\n        type=\"number\"\n        id=\"minutes\"\n        name=\"minutes\"\n        required\n        placeholder=\"How many minutes do you study?\"\n        onChange={(event) => {\n          setMinutes(event.target.value);\n        }}\n      />\n      <button onClick={addRecord}>Add Record</button>\n      <button onClick={() => setAddRecord(false)}>Close</button>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/beachsunandrockandroll.near/widget/addRecord", "fact_widget_deployments_id": "e85ad91bff20de221cc1ada76244c641", "inserted_timestamp": "2023-11-19T02:32:32.571Z", "modified_timestamp": "2023-11-19T02:32:32.571Z", "__row_index": 9}