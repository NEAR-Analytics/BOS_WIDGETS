{"tx_hash": "7FiZzVgC7e71GhGP7EwUP2cFYLHr4LdCw3YrLw9DEKWp", "action_id_social": "6rUxg2tf2x3gAds5VbWauMaep5q54S5BNfGRPtCYKwsX-0-widget", "block_id": 101780022, "block_timestamp": "2023-09-23T14:38:26.805Z", "signer_id": "joelblenman21.near", "widget_name": "account-login", "source_code": "const GameButton = styled.button`\r\n  background: palevioletred;\r\n  color: white;\r\n  font-size: 1em;\r\n  margin: 10px;\r\n  padding: 0.5em 1em;\r\n  border: 2px solid palevioletred;\r\n  border-radius: 10px;\r\n  &:hover {\r\n    background: white;\r\n    color: palevioletred;\r\n  }\r\n`;\r\n\r\n// Styling for the Wrapper\r\nconst Wrapper = styled.div`\r\n  font-family: Arial, sans-serif;\r\n  text-align: center;\r\n  margin: 20px;\r\n  padding: 20px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n`;\r\n\r\nif (!accountId) {\r\n  return (\r\n    <div>\r\n      <p>Please connect your NEAR wallet or create a new one:</p>\r\n      <a href=\"https://near.org/signup\" target=\"_blank\" rel=\"noreferrer\">\r\n        <GameButton>Create NEAR Wallet</GameButton>\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction initialChainState() {\r\n  return {\r\n    chainId: 0,\r\n    newId: 0,\r\n  };\r\n}\r\n\r\nState.init(initialChainState());\r\n\r\n// Function to fetch and set the current chainId from the network\r\nfunction getCurrentChainId() {\r\n  Ethers.provider()\r\n    .getNetwork()\r\n    .then((chainData) => {\r\n      const chainId = chainData.chainId;\r\n      State.update({ chainId });\r\n    });\r\n}\r\n\r\n// Call the function to set the current chainId\r\ngetCurrentChainId();\r\n\r\n// Function to switch to zkEVM testnet\r\nfunction switchToTestnet() {\r\n  Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: \"0x5a2\" }]).then(() => {\r\n    getCurrentChainId(); // You should call the function to update the chainId\r\n  });\r\n}\r\n\r\n// Function to switch to zkEVM mainnet\r\nfunction switchToMainnet() {\r\n  Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: \"0x44D\" }]).then(() => {\r\n    getCurrentChainId(); // You should call the function to update the chainId\r\n  });\r\n}\r\n\r\nif (\r\n  State.get().chainId === undefined &&\r\n  ethers !== undefined &&\r\n  Ethers.getSigner()\r\n) {\r\n  Ethers.provider()\r\n    .getNetwork()\r\n    .then((data) => {\r\n      const chainId = data?.chainId;\r\n      State.update({ chainId, isChainSupported: true });\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Failed to get network:\", error);\r\n    });\r\n}\r\n\r\nreturn (\r\n  <Wrapper>\r\n    <div>\r\n      <h2>Welcome to The People's Place</h2>\r\n      <p style={{ whiteSpace: \"pre-line\" }}>{accountId}</p>\r\n      <h1>Current Chain ID: {State.get().chainId}</h1>\r\n      {State.get().chainId === \"0x44D\" ? (\r\n        <div>\r\n          <p>On Polygon zkEVM Mainnet</p>\r\n          <button onClick={switchToTestnet}>Switch to zkEVM Testnet</button>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {State.get().chainId === \"0x5A2\" ? (\r\n            <div>\r\n              <p>On Polygon zkEVM Testnet</p>\r\n              <button onClick={switchToMainnet}>Switch to zkEVM Mainnet</button>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <p>Please switch to Polygon zkEVM</p>\r\n              <button onClick={switchToTestnet}>Switch to zkEVM Testnet</button>\r\n              <button onClick={switchToMainnet}>Switch to zkEVM Mainnet</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </Wrapper>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/joelblenman21.near/widget/account-login", "fact_widget_deployments_id": "9894304c601cf3003e71f1476bdeb5d4", "inserted_timestamp": "2023-09-23T16:35:25.131Z", "modified_timestamp": "2023-09-23T16:35:25.131Z", "__row_index": 0}