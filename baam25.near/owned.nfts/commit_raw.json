{"tx_hash": "87Q7edN4aPXxoSSNHJuqtnMF2R6VtQ24Mou2iPz9yL2W", "action_id_social": "EQExTLi2p9UcLZsPkXG2sggSND8proVnUEdMh5kY7VWN-0-widget", "block_id": 112145311, "block_timestamp": "2024-02-05T07:41:48.113Z", "signer_id": "baam25.near", "widget_name": "owned.nfts", "source_code": "const accountId = props.accountId || context.accountId;\nconsole.log(accountId);\n\nconst [page, setPage] = useState(0);\n\nconst data = fetch(\"https://graph.mintbase.xyz\", {\n  method: \"POST\",\n  headers: {\n    \"mb-api-key\": \"omni-site\",\n    \"Content-Type\": \"application/json\",\n    \"x-hasura-role\": \"anonymous\",\n  },\n  body: JSON.stringify({\n    query: `\n  query v2_omnisite_GetOwnedTokens{\n    tokens: mb_views_nft_owned_tokens(\n      where: {\n        owner: { _eq: \"${accountId}\" }\n      }\n    ) {\n      tokenId: token_id\n      contractId: nft_contract_id\n      media\n    }}\n`,\n  }),\n});\n\nconst nfts = data.body?.data?.tokens;\n\nconst Wrapper = styled.div`\n  max-width: 1000px;\n  display: flex;\n  flex-direction: column;\n  margin: 3rem auto;\n  align-items: center;\n`;\nconst Contaienr = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 2rem;\n  justify-content: center;\n  > div {\n    width: 15rem;\n    height: 15rem;\n    border-radius: 10px;\n    overflow: hidden;\n    img {\n      transition: all 300ms ease-in-out;\n    }\n    :hover img {\n      scale: 1.1;\n    }\n  }\n`;\nconst Pagination = styled.div`\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  div {\n    border: 1px solid transparent;\n    background: #8c8c8c;\n    border-radius: 2px;\n    padding: 10px;\n    font-size: 12px;\n    color: white;\n    cursor: pointer;\n    :hover {\n      background: #8c8c8c;\n    }\n    &.active {\n      background: white;\n      color: #8c8c8c;\n      border-color: #8c8c8c;\n    }\n  }\n`;\n\nconst size = \"100%\";\n\n// Paginaton\nconst perPage = 9;\n// list of pages\nconst paginations = [...Array(parseInt(nfts?.length / perPage) + 1).keys()];\n\nlet lastElement = paginations[paginations.length - 1];\nconst handlePainate = (to) => {\n  if (to !== \"...\") {\n    setPage(parseInt(to));\n  }\n};\nconst Page = ({ children }) => {\n  return (\n    <div\n      onClick={() => handlePainate(children[0])}\n      className={`${children[0] + \"\" == page + \"\" ? \"active\" : \"\"}`}\n    >\n      {children[0]}\n    </div>\n  );\n};\nconst Number = () => {\n  if (paginations.length < 4) {\n    return (\n      <Pagination>\n        {paginations?.map((num) => (\n          <Page>{num}</Page>\n        ))}\n      </Pagination>\n    );\n  } else if (page === 0) {\n    return (\n      <Pagination>\n        <Page>0</Page>\n        <Page>{page + 1}</Page>\n        <Page>...</Page>\n        <Page>{lastElement}</Page>\n      </Pagination>\n    );\n  } else if (page === lastElement) {\n    return (\n      <Pagination>\n        <Page>0</Page>\n        <Page>...</Page>\n        <Page>{page - 1}</Page>\n        <Page>{page}</Page>\n      </Pagination>\n    );\n  } else if (page + 1 === lastElement) {\n    return (\n      <Pagination>\n        <Page>0</Page>\n        <Page>...</Page>\n        <Page>{page - 1}</Page>\n        <Page>{page}</Page>\n        <Page>{lastElement}</Page>\n      </Pagination>\n    );\n  } else if (page + 1 < lastElement && page > 3) {\n    return (\n      <Pagination>\n        <Page>0</Page>\n        <Page>...</Page>\n        <Page>{page - 1}</Page>\n        <Page>{page}</Page>\n        <Page>{page + 1}</Page>\n        <Page>...</Page>\n        <Page>{lastElement}</Page>\n      </Pagination>\n    );\n  } else if (page < lastElement) {\n    return (\n      <Pagination>\n        <Page>0</Page>\n        <Page>{page}</Page>\n        <Page>{page + 1}</Page>\n        <Page>...</Page>\n        <Page>{lastElement}</Page>\n      </Pagination>\n    );\n  }\n};\n\nreturn (\n  <Wrapper>\n    <Contaienr>\n      {nfts?.slice(page * perPage, (page + 1) * perPage)?.map((nft) => (\n        <div\n          key={nft.tokenId}\n          className={`${\n            selectedNft?.tokenId === nft.tokenId ? \"selected\" : \"\"\n          }`}\n          onClick={() => updateState({ selectedNft: nft })}\n        >\n          <Widget\n            src=\"mob.near/widget/NftImage\"\n            props={{\n              nft: { tokenId: nft.tokenId, contractId: nft.contractId },\n              style: {\n                width: size,\n                height: size,\n                objectFit: \"cover\",\n                minWidth: size,\n                minHeight: size,\n                maxWidth: size,\n                maxHeight: size,\n                overflowWrap: \"break-word\",\n                borderRadius: \"inherit\",\n              },\n              className: \"\",\n              fallbackUrl:\n                \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\n              alt: `NFT ${nft.contractId} ${nft.tokenId}`,\n            }}\n          />\n        </div>\n      ))}\n    </Contaienr>\n    <Number />\n  </Wrapper>\n);\n", "metadata": {"fork_of": "baam25.near/widget/owned.nfts@112144652"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/baam25.near/widget/owned.nfts", "fact_widget_deployments_id": "c3a8f8ff0a97b7ceda09edf114c8c465", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}