{"tx_hash": "BL8GgDQNXfQyp3dEDjwwwn92CrW5XrvBAN4DLxtMU9mc", "action_id_social": "J3ftTcqRef5JQXGxsSQjyjg6adjiLsoH1eLhf9Bfuo9W-0-widget", "block_id": 111953353, "block_timestamp": "2024-02-02T19:19:42.260Z", "signer_id": "sdks.near", "widget_name": "Hooks.useSharedContext", "source_code": "// Experimental hook\nconst useSharedContext = ({ with: [Store, status], from: widgetsSrc }) => {\n  Store.init({\n    app: {},\n    initialized: false,\n  });\n\n  let content = Object.fromEntries(\n    widgetsSrc.map((widget) => {\n      let breadcrumb = widget.split(\"/\");\n      let name = breadcrumb.pop().split(\".\").pop();\n      return [name, VM.require(widget)];\n    })\n  );\n\n  const checkLoaded = () =>\n    setTimeout(() => {\n      if (\n        Object.keys(content) &&\n        typeof content[Object.keys(content).pop()] === \"function\"\n      ) {\n        Store.update({ loaded: true, app: content });\n      } else {\n        checkLoaded();\n      }\n    }, 300);\n\n  if (!status.initialized) {\n    Store.update({\n      initialized: true,\n      loaded: false,\n    });\n  }\n\n  if (!status.loaded) {\n    checkLoaded();\n  }\n\n  return status.loaded\n    ? Object.fromEntries(\n        widgetsSrc.map((widget) => {\n          let breadcrumb = widget.split(\"/\");\n          let name = breadcrumb.pop().split(\".\").pop();\n          return [name, () => status.app[name](Store, status)];\n        })\n      )\n    : Object.fromEntries(\n        widgetsSrc.map((widget) => {\n          let breadcrumb = widget.split(\"/\");\n          let name = breadcrumb.pop().split(\".\").pop();\n          return [name, () => <>Loading</>];\n        })\n      );\n};\n\nconst { Toolbar } = useSharedContext({\n  with: [State, state],\n  from: [`mattb.near/widget/Frensly.Components.Toolbar`],\n});\n\nreturn (\n  <>\n    <Toolbar></Toolbar>\n  </>\n);\n", "metadata": {"fork_of": "sdks.near/widget/Hooks.useSharedContext@111945599"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/Hooks.useSharedContext", "fact_widget_deployments_id": "ef3eeb6f2c5d1e1c0525defd531243c3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}