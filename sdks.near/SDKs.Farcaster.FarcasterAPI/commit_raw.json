{"tx_hash": "3W4wmWMhS6ipD7748iV6iBreZmkpD2AgZNbqBFCBjkJu", "action_id_social": "6V375KuAYHUS8c16xyT2SHt6dH6aLMVHRkMPcU6qc1vZ-0-widget", "block_id": 114039865, "block_timestamp": "2024-03-03T22:45:56.842Z", "signer_id": "sdks.near", "widget_name": "SDKs.Farcaster.FarcasterAPI", "source_code": "const WARPCAST_API_URL = \"https://client.warpcast.com/v2\";\nconst FARCASTER_FNAMES_API_URL = \"https://fnames.farcaster.xyz\";\n\nconst PROFILE_INFO_ENDPOINT = \"user-by-username\";\nconst PROFILE_ENDPOINT = \"verifications\";\nconst FARCASTER_FNAMES_ENDPOINT = \"transfers/current\";\n\nconst FarcasterAPI = {\n  getProfileInfo: (handle) => {\n    return asyncFetch(\n      FarcasterAPI.getWarpcastQueryURL(PROFILE_INFO_ENDPOINT, {\n        username: handle,\n      }),\n      {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n        },\n      }\n    ).then((result) => {\n      return result?.body?.result?.user;\n    });\n  },\n  getHandleOwner: (handle) => {\n    return FarcasterAPI.getFidByHandle(handle).then((fid) => {\n      if (!fid) {\n        return [];\n      }\n\n      return asyncFetch(\n        FarcasterAPI.getWarpcastQueryURL(PROFILE_ENDPOINT, { fid }),\n        {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n          },\n        }\n      ).then((result) => {\n        const verifications = result?.body?.result?.verifications || [];\n        return verifications.map((verification) => verification.address);\n      });\n    });\n  },\n  getFidByHandle: (handle) => {\n    return asyncFetch(\n      FarcasterAPI.getFarcasterQueryURL(FARCASTER_FNAMES_ENDPOINT, {\n        name: handle,\n      }),\n      {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n        },\n      }\n    ).then((result) => {\n      return result?.body?.transfer?.to || \"\";\n    });\n  },\n  getQueryURL: (endpoint, params) => {\n    const urlSearchParams = Object.keys(params)\n      .map((param) => `${param}=${params[param]}`)\n      .join(\"&\");\n\n    return `${endpoint}?${urlSearchParams}`;\n  },\n  getFarcasterQueryURL: (endpoint, params) => {\n    return FarcasterAPI.getFarcasterURL(\n      FarcasterAPI.getQueryURL(endpoint, params)\n    );\n  },\n  getWarpcastQueryURL: (endpoint, params) => {\n    return FarcasterAPI.getWarpcastURL(\n      FarcasterAPI.getQueryURL(endpoint, params)\n    );\n  },\n  getFarcasterURL: (endpoint) => {\n    return `${FARCASTER_FNAMES_API_URL}/${endpoint}`;\n  },\n  getWarpcastURL: (endpoint) => {\n    return `${WARPCAST_API_URL}/${endpoint}`;\n  },\n};\n\nreturn FarcasterAPI;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.Farcaster.FarcasterAPI", "fact_widget_deployments_id": "f132f1acb6dc7f040d4886886d9e72de", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}