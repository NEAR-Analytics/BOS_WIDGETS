{"tx_hash": "rXpYXYTTfHd1kYtxVTrsjnBcqs2QaL6TksLEnTNYpRE", "action_id_social": "TJ6h75upgx5HD9FjHoYyyQ74mFF8jtx7UNY6aZrThwa-0-widget", "block_id": 114030664, "block_timestamp": "2024-03-03T19:15:35.312Z", "signer_id": "sdks.near", "widget_name": "SDKs.Farcaster.FarcasterAPI", "source_code": "const WARPCAST_API_URL = \"https://client.warpcast.com/v2\";\nconst FARCASTER_FNAMES_API_URL = \"https://fnames.farcaster.xyz\";\n\nconst PROFILE_ENDPOINT = \"verifications\";\nconst FARCASTER_FNAMES_ENDPOINT = \"transfers/current\";\n\nconst FarcasterAPI = {\n  getHandleOwner: (handle) => {\n    return FarcasterAPI.getFidByHandle(handle).then(async (fid) => {\n      if (!fid) {\n        return [];\n      }\n\n      return asyncFetch(\n        FarcasterAPI.getWarpcastQueryURL(PROFILE_ENDPOINT, { fid }),\n        {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n          },\n        }\n      )\n        .then((payload) => {\n          return payload.json();\n        })\n        .then((result) => {\n          const verifications = result?.result?.verifications || [];\n          return verifications.map((verification) => verification.address);\n        });\n    });\n  },\n  getFidByHandle: (handle) => {\n    return asyncFetch(\n      FarcasterAPI.getFarcasterQueryURL(FARCASTER_FNAMES_ENDPOINT, {\n        name: handle,\n      }),\n      {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n        },\n      }\n    )\n      .then((payload) => {\n        return payload.json();\n      })\n      .then((result) => {\n        return result?.transfer?.to || \"\";\n      });\n  },\n  getQueryURL: (endpoint, params) => {\n    return `${endpoint}?${new URLSearchParams(params).toString()}`;\n  },\n  getFarcasterQueryURL: (endpoint, params) => {\n    return FarcasterAPI.getFarcasterURL(\n      FarcasterAPI.getQueryURL(endpoint, params)\n    );\n  },\n  getWarpcastQueryURL: (endpoint, params) => {\n    return FarcasterAPI.getWarpcastURL(\n      FarcasterAPI.getQueryURL(endpoint, params)\n    );\n  },\n  getFarcasterURL: (endpoint) => {\n    return `${FARCASTER_FNAMES_API_URL}/${endpoint}`;\n  },\n  getWarpcastURL: (endpoint) => {\n    return `${WARPCAST_API_URL}/${endpoint}`;\n  },\n};\n\nreturn FarcasterAPI;\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.Farcaster.FarcasterAPI", "fact_widget_deployments_id": "61e39f52cb317624527f0c790fc93ebc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}