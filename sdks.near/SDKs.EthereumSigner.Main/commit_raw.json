{"tx_hash": "B6odrGPhSAJK3CEmgWFKEMrxtRSYmYNJmTrwnN1vYWF6", "action_id_social": "7xxQ4Yx4M51XGmZ1FoT9bFDdJkzymQNuY1pyACupE48g-0-widget", "block_id": 109775554, "block_timestamp": "2024-01-07T00:25:23.410Z", "signer_id": "sdks.near", "widget_name": "SDKs.EthereumSigner.Main", "source_code": "const VERIFIER_CONTRACT = \"0x793ABce859d651C179F2F3B0A47C438dC3D67901\";\nconst ABI = [\n  \"function verifySignature(string memory message, uint8 v, bytes32 r, bytes32 s) public pure returns (address signer)\",\n];\n\nconst EthereumSigner = {\n  sign: (message) => Ethers.provider().getSigner().signMessage(message),\n  verify: (originalMessage, signature, expectedSignerAddress) => {\n    try {\n      return EthereumSigner.getSignerAddress(originalMessage, signature).then(\n        (address) => {\n          return expectedSignerAddress.toLowerCase() == address.toLowerCase();\n        }\n      );\n    } catch {\n      return false;\n    }\n  },\n  getSignerAddress: (message, signature) => {\n    const contract = new ethers.Contract(\n      VERIFIER_CONTRACT,\n      ABI,\n      Ethers.provider()\n    );\n\n    const { v, r, s } = ethers.utils.splitSignature(signature);\n\n    return contract.callStatic.verifySignature(message, v, r, s);\n  },\n};\n\nreturn EthereumSigner;", "metadata": {"image": {}}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.EthereumSigner.Main", "fact_widget_deployments_id": "17bcd002767c33eef72c5c84d4658832", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}