{"tx_hash": "FBp3o1in3DBR3ocfz5Kce5DvKRj7g7kM29suYrFi2YCQ", "action_id_social": "4WjtmG3wDK2xKHnaouxCbxrq8S1NKdhV75TvnMZo7D6o-0-widget", "block_id": 110644458, "block_timestamp": "2024-01-17T16:51:55.115Z", "signer_id": "sdks.near", "widget_name": "Abstracts.ExternalDependency", "source_code": "return (props) => {\n  const code = `\n        <script type=\"text/javascript\" src=\"https://unpkg.com/${props.package}\"></script>\n        <script type=\"text/javascript\">\n            const getPackageMethod = (instruction, package) => {\n                return instruction.split(\".\").reduce((path, nextPath) => (path || {})[nextPath], package);\n            };\n        \n            window.addEventListener(\"message\", (e) => {\n              if (e.data.instruction) {\n                 let value = Array.isArray(e.data.value) ? e.data.value : [e.data.value];\n                 let result = getPackageMethod(e.data.instruction, ${props.name})(...value);\n                 let parseResult = (result) => {\n                    if (e.data.returnType == \"object\" || e.data.returnType == \"array\") {\n                        return JSON.stringify(result);\n                    }\n        \n                    if (e.data.returnType == \"string\") {\n                        return result.toString();\n                    }\n\n                    if (e.data.returnType == \"number\") {\n                        return result;\n                    }\n                 }\n        \n                 window.top.postMessage({\n                    index: e.data.index,\n                    instruction: e.data.instruction,\n                    returnType: e.data.returnType,\n                    result: parseResult(result)\n                 }, \"*\");\n              }\n            })\n        </script>\n   `;\n\n  return (\n    <iframe\n      srcDoc={code}\n      style={{ display: \"none\" }}\n      message={props.adapter.getRequest()}\n      onMessage={(data) => props.adapter.setResponse(data)}\n    />\n  );\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/Abstracts.ExternalDependency", "fact_widget_deployments_id": "a02589f39615d1e171a9829d8e61a872", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}