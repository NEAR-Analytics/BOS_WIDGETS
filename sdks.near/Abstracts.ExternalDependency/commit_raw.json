{"tx_hash": "6Yaqw6paxaJLS2XjzoQjMUYh1EiAKHvNAib8MzbCV4GN", "action_id_social": "FXwZNLtd3vaGiNgaEK8KmEhA3kkaRFAX7HHZ8Mx8gZAN-0-widget", "block_id": 110665099, "block_timestamp": "2024-01-17T22:44:56.333Z", "signer_id": "sdks.near", "widget_name": "Abstracts.ExternalDependency", "source_code": "return (props) => {\n  const code = `\n        <script>\n            const ping = () => {\n                window.top.postMessage(\"ping\", \"*\");\n            }\n        </script>\n        <script type=\"text/javascript\" src=\"https://unpkg.com/${props.adapter.package}\"></script>\n        <script type=\"text/javascript\">\n\n            if (${props.adapter.name}) {\n                ping();\n            }\n        \n            const getPackageMethod = (instruction, package) => {\n                return instruction.split(\".\").reduce((path, nextPath) => (path || {})[nextPath], package);\n            };\n        \n            window.addEventListener(\"message\", (e) => {\n              if (e.data.instruction) {\n                 let value = Array.isArray(e.data.value) ? e.data.value : [e.data.value];\n                 let result = getPackageMethod(e.data.instruction, ${props.adapter.name})(...value);\n                 let parseResult = (result) => {\n                    if (e.data.returnType == \"object\" || e.data.returnType == \"array\") {\n                        return JSON.stringify(result);\n                    }\n        \n                    if (e.data.returnType == \"string\") {\n                        return result.toString();\n                    }\n\n                    if (e.data.returnType == \"number\") {\n                        return result;\n                    }\n                 }\n        \n                 window.top.postMessage({\n                    index: e.data.index,\n                    instruction: e.data.instruction,\n                    returnType: e.data.returnType,\n                    result: parseResult(result)\n                 }, \"*\");\n              }\n            })\n        </script>\n   `;\n\n  return (\n    <iframe\n      srcDoc={code}\n      style={{ display: \"none\" }}\n      message={props.adapter.getRequest()}\n      onMessage={(data) => data == \"ping\" ? props.adapter.setAsReady() : props.adapter.setResponse(data)}\n    />\n  );\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/Abstracts.ExternalDependency", "fact_widget_deployments_id": "c28dcc6125e89f0711ac031104b8867d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}