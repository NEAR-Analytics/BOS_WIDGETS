{"tx_hash": "9dy2KeLzxq2y1kmatgispVmVo1EycJWCc6MXbsGrjaSA", "action_id_social": "G3GBpkNhZzKF15h9YL8QBwKyVQqaNf5e4gMpGJFPnR3A-0-widget", "block_id": 111956338, "block_timestamp": "2024-02-02T20:15:15.631Z", "signer_id": "sdks.near", "widget_name": "Utils.RoutesManager", "source_code": "const $ = VM.require(\"sdks.near/widget/Loader\");\nconst { StatefulDependency } = $(\"@sdks/abstracts\");\n\nconst RoutesManager = (Store, status, routes, { page }) => {\n  const Router = {\n    ...StatefulDependency(Store, status, \"Router\"),\n    name: \"Router\",\n    init: () => {\n      Router.initDependency({\n        state: {\n          routes,\n          currentRoute: Router.getDefaultRoute(),\n          currentView: routes[Router.getDefaultRoute()],\n        },\n      });\n\n      return {\n        Router,\n        RouterView: () => Router.get(\"state\").currentView || null,\n        Route: (props) => {\n            let search = (obj, index) => {\n                return index in obj ? search(obj[index], index) : obj;\n            };\n            let params = search(props, \"props\");\n\n            return <a href=\"#\" onClick={() => Router.changeRoute(params.to)}>\n                {props.children}\n            </a>;\n        },\n      };\n    },\n    changeRoute: (route) => {\n      Router.set(\"state\", {\n        ...Router.get(\"state\"),\n        currentRoute: route in routes ? route : \"home\",\n        currentView: route in routes ? routes[route] : routes[\"home\"],\n      });\n\n      return Router.get(\"state\").currentRoute;\n    },\n    getCurrentRoute: () => {\n      return Router.get(\"state\").currentRoute || null;\n    },\n    getView: () => {\n      return Router.get(\"state\").currentView || null;\n    },\n    getDefaultRoute: () => {\n      return page || (routes[\"fallback\"] ? \"fallback\" : null) || \"home\";\n    },\n  };\n\n  return Router.init();\n};\n\nreturn RoutesManager;\n", "metadata": {"fork_of": "sdks.near/widget/Utils.RoutesManager@111956300"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/Utils.RoutesManager", "fact_widget_deployments_id": "d926e4c4554c2a6e85c4d0b44bff4a9e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}