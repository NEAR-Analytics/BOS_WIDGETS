{"tx_hash": "F2B2ih9bVrsgMRSe37muiqD3Azw59oUAQEAS6gP3ceom", "action_id_social": "HrRAddo5AKzk275QB1Cb52JDcqYZTdt4hxzFWWbGMTNL-0-widget", "block_id": 110165429, "block_timestamp": "2024-01-11T18:49:30.415Z", "signer_id": "sdks.near", "widget_name": "Loader", "source_code": "let TYPES = {};\nconst TYPE_LIBRARY = \"@\";\nconst TYPE_IMAGE = \"img:\";\nconst TYPE_JSON = \"json:\";\nconst TYPE_URL = \"url:\";\nTYPES[TYPE_LIBRARY] = \"libs\";\nTYPES[TYPE_IMAGE] = \"images\";\nTYPES[TYPE_JSON] = \"data\";\nTYPES[TYPE_URL] = \"links\";\n\nconst loaders = {\n  string: (account, dependency) => {\n    let result = {};\n    result[dependency.split(\".\").pop()] = VM.require(\n      `${account}/widget/${dependency}`\n    );\n    return result;\n  },\n  object: (account, dependencies) => {\n    let result = {};\n\n    if (Array.isArray(dependencies)) {\n      dependencies.map(\n        (dependency) =>\n          (result[dependency.split(\".\").pop()] = VM.require(\n            `${account}/widget/${dependency}`\n          ))\n      );\n    } else {\n      Object.keys(dependencies).map((containerName) =>\n        dependencies[containerName].map(\n          (dependency) =>\n            (result[dependency.split(\".\").pop()] = VM.require(\n              `${account}/widget/${dependency}`\n            ))\n        )\n      );\n    }\n\n    return result;\n  },\n  void: () => {},\n};\n\nconst getType = (type) => (type in TYPES ? TYPES[type] : null);\nconst getScope = (namespace) =>\n  namespace[0] in TYPES\n    ? namespace[0]\n    : namespace.substring(0, namespace.indexOf(\":\") + 1) in TYPES\n    ? namespace.substring(0, namespace.indexOf(\":\") + 1)\n    : null;\nconst getAccount = (scope, namespace) =>\n  `${namespace.substring(scope.length, namespace.indexOf(\"/\"))}.near`;\nconst getPath = (namespace) =>\n  namespace.substring(namespace.indexOf(\"/\") + 1, namespace.length);\nconst parseRequest = (namespace) => [\n  getAccount(getScope(namespace), namespace),\n  getType(getScope(namespace)),\n  getPath(namespace),\n];\nconst getManifest = (account) => JSON.parse(Social.get(`${account}/widget/Manifest`) || \"{}\");\nconst getResource = (manifest, resourceType) =>\n  resourceType in manifest ? manifest[resourceType] : {};\nconst getDependencies = (resource, path) =>\n  path.split(\"/\").reduce((path, nextPath) => (path || {})[nextPath], resource);\nconst loadDependencies = (account, dependencies) =>\n  loaders[typeof dependencies !== \"undefined\" ? typeof dependencies : \"void\"](\n    account,\n    dependencies\n  );\nconst load = (account, resourceType, path) =>\n  loadDependencies(\n    account,\n    getDependencies(getResource(getManifest(account) || {}, resourceType), path)\n  );\n\nreturn (namespace) => load(...parseRequest(namespace));\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/Loader", "fact_widget_deployments_id": "fb0e1b1aef39eed5c350f0e0e702f16f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 12}