{"tx_hash": "6WZ5vnEvhnWH3eBkLhP78zW3EbQmgg6Tz3JVWY8KDycN", "action_id_social": "EV7wCdwDTKeVeMYcV9N1q1WMsmmrEfc331W5ADqwD2PG-0-widget", "block_id": 110327290, "block_timestamp": "2024-01-13T19:28:18.639Z", "signer_id": "sdks.near", "widget_name": "SDKs.Lens.Main", "source_code": "const $ = VM.require(`sdks.near/widget/Loader`);\nconst { Constants, Interfaces, HealthAPI, AuthAPI, AuthRequests, ApiHelper } =\n  $(\"@sdks/lens\");\nconst { LightClient } = $(\"@sdks/light-client\");\n\nconst LensSDK = {\n  profile: Interfaces.PROFILE_INTERFACE,\n  enableTestnet: () => (LightClient.url = Constants.TESTNET_URL),\n  enableMainnet: () => (LightClient.url = Constants.MAINNET_URL),\n  isTestnet: () => LightClient.url == Constants.TESTNET_URL,\n  init: () => {\n    LensSDK.enableMainnet();\n    LightClient.auth = Interfaces.AUTH_INTERFACE;\n    LightClient.tokenLifespan = Constants.JWT_TOKEN_LIFESPAN_SECONDS;\n    LightClient.refreshTokenLifespan =\n      Constants.JWT_REFRESH_TOKEN_LIFESPAN_SECONDS;\n\n    return LensSDK;\n  },\n  health: {\n    ping: () =>\n      LensSDK._call(HealthAPI.ping).then(\n        (response) => response == Constants.RESPONSE_HEALTH_OK\n      ),\n  },\n  authentication: {\n    profiles: (profilesManagedRequest) =>\n      LensSDK._call(\n        AuthAPI.profiles,\n        AuthRequests.PROFILES_MANAGED_REQUEST,\n        profilesManagedRequest\n      ),\n    login: (challengeRequest) =>\n      LensSDK._call(\n        AuthAPI.challenge,\n        AuthRequests.CHALLENGE_REQUEST,\n        challengeRequest\n      ).then((challenge) =>\n        Ethers.provider()\n          .signMessage(challenge.text)\n          .then((signature) => {\n            let signedChallengeRequest = AuthRequests.SIGNED_CHALLENGE_REQUEST;\n            signedChallengeRequest.id = challenge.id;\n            signedChallengeRequest.signature = signature;\n\n            return LensSDK._call(\n              AuthAPI.authenticate,\n              AuthRequests.SIGNED_CHALLENGE_REQUEST,\n              signedChallengeRequest\n            ).then((auth) => {\n              LightClient.auth = auth;\n              LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n              return LensSDK.profile;\n            });\n          })\n      ),\n    refresh: (refreshTokenRequest) =>\n      LensSDK._call(\n        AuthAPI.refresh,\n        AuthRequests.REFRESH_TOKEN_REQUEST,\n        refreshTokenRequest\n      ).then((auth) => {\n        LightClient.auth = auth;\n        LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n        return LensSDK.profile;\n      }),\n    revoke: (revokeAuthenticationRequest) =>\n      LensSDK._call(\n        AuthAPI.revoke,\n        AuthRequests.REVOKE_AUTHENTICATION_REQUEST,\n        revokeAuthenticationRequest\n      ),\n    verify: (verifyTokenRequest) =>\n      LensSDK._call(\n        AuthAPI.verify,\n        AuthRequests.VERIFY_TOKEN_REQUEST,\n        verifyTokenRequest\n      ),\n    list: (approvedAuthenticationsRequest) =>\n      LensSDK._call(\n        AuthAPI.list,\n        AuthRequests.APPROVED_AUTHENTICATIONS_REQUEST,\n        approvedAuthenticationsRequest\n      ),\n    isAuthenticated: () => LensSDK.profile.id != \"\",\n    getAccessToken: () => LightClient.auth.accessToken || null,\n    getProfileId: () => LensSDK.profile.id || null,\n  },\n  profile: {\n    create: () => {},\n    fetch: (profileId) => {},\n    fetchAll: (profileIds) => {},\n    stats: (profileId) => {},\n    recommendations: (profileId) => {},\n    interests: (profileId) => {},\n    report: (profileId) => {},\n    block: (profileId) => {},\n    history: () => {},\n    onChainIdentity: (profileId) => {},\n    isFollowedByMe: (profileId) => {},\n    isBlockedByMe: (profileId) => {},\n    isFollowingMe: (profileId) => {},\n    canFollow: (profileId) => {},\n    canUnfollow: (profileId) => {},\n    canBlock: (profileId) => {},\n    canUnblock: (profileId) => {},\n    fetchPublications: (profileId) => LensSDK.fetchAll(profileId),\n  },\n  publication: {\n    fetch: (publicationId) => {},\n    fetchAll: (profileId) => {},\n    stats: (publicationId) => {},\n    whoActed: (publicationId) => {},\n    comments: (publicationId) => {},\n    upvote: (publicationId) => {},\n    downvote: (publicationId) => {},\n    hide: (publicationId) => {},\n    report: (publicationId) => {},\n  },\n  search: {\n    profiles: (searchTerm) => {},\n    publications: (searchTerm) => {},\n  },\n  notifications: {\n    fetch: () => {},\n  },\n  transaction: {\n    status: () => {},\n    txIdToTxHash: () => {},\n  },\n  _call: (apiMethod, requestObject, dataObject) =>\n    apiMethod(\n      LightClient,\n      dataObject ? ApiHelper.intersect(requestObject, dataObject) : null\n    ),\n};\n\nreturn LensSDK.init();\n", "metadata": {"image": {}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.Lens.Main", "fact_widget_deployments_id": "8d80bdb2fb2d242fcae9cb996eba031a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}