{"tx_hash": "FXyGXeZH8h6FfuM37dmaHbM5NNmras7Tq3wpGEg8Yi1j", "action_id_social": "92P3yMrY48R58xZ4rJpzAGew8o1bdgb1oGDwtUgUDzYw-0-widget", "block_id": 110316628, "block_timestamp": "2024-01-13T16:13:17.031Z", "signer_id": "sdks.near", "widget_name": "SDKs.Lens.Main", "source_code": "const $ = VM.require(`sdks.near/widget/Loader`);\nconst { Constants, Interfaces } = $(\"@sdks/lens/definitions\");\nconst { HealthAPI, AuthAPI } = $(\"@sdks/lens/api\");\nconst { AuthRequests } = $(\"@sdks/lens/requests\");\nconst { ApiHelper } = $(\"@sdks/lens/utils\");\nconst { LightClient } = $(\"@sdks/light-client\");\n\nconst LensSDK = {\n  profile: Interfaces.PROFILE_INTERFACE,\n  enableTestnet: () => (LightClient.url = Constants.TESTNET_URL),\n  enableMainnet: () => (LightClient.url = Constants.MAINNET_URL),\n  isTestnet: () => LightClient.url == Constants.TESTNET_URL,\n  init: () => {\n    LensSDK.enableMainnet();\n    LightClient.auth = Interfaces.AUTH_INTERFACE;\n    LightClient.tokenLifespan = Constants.JWT_TOKEN_LIFESPAN_SECONDS;\n    LightClient.refreshTokenLifespan = Constants.JWT_REFRESH_TOKEN_LIFESPAN_SECONDS;\n\n    return LensSDK;\n  },\n  health: {\n    ping: () =>\n      LensSDK._call(HealthAPI.ping).then(\n        (response) => response == Constants.RESPONSE_HEALTH_OK\n      ),\n  },\n  authentication: {\n    profiles: (profilesManagedRequest) =>\n      LensSDK._call(\n        AuthAPI.profiles,\n        AuthRequests.PROFILES_MANAGED_REQUEST,\n        profilesManagedRequest\n      ),\n    login: (challengeRequest) => \n        LensSDK._call(\n            AuthAPI.challenge,\n            AuthRequests.CHALLENGE_REQUEST,\n            challengeRequest\n        ).then((challenge) => Ethers.getProvider()\n        .signMessage(challenge.text)\n        .then((signature) => {\n            let signedChallengeRequest = AuthRequests.SIGNED_CHALLENGE_REQUEST;\n            signedChallengeRequest.id = challenge.id;\n            signedChallengeRequest.signature = signature;\n\n            return LensSDK._call(AuthAPI.login, AuthRequests.SIGNED_CHALLENGE_REQUEST, signedChallengeRequest).then((auth) => {\n                LightClient.auth = auth;\n                LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n                return LensSDK.profile;\n            });\n        })),\n    refresh: (refreshTokenRequest) => LensSDK._call(AuthAPI.refresh, AuthRequests.REFRESH_TOKEN_REQUEST, refreshTokenRequest).then((auth) => {\n        LightClient.auth = auth;\n        LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n        return LensSDK.profile;\n    }),\n    revoke: (revokeAuthenticationRequest) => LensSDK._call(AuthAPI.revoke, AuthRequests.REVOKE_AUTHENTICATION_REQUEST, revokeAuthenticationRequest),\n    verify: (verifyTokenRequest) => LensSDK._call(AuthAPI.verify, AuthRequests.VERIFY_TOKEN_REQUEST, verifyTokenRequest),\n    list: (approvedAuthenticationsRequest) => LensSDK._call(AuthAPI.list, AuthRequests.APPROVED_AUTHENTICATIONS_REQUEST, approvedAuthenticationsRequest),\n    isAuthenticated: () => LensSDK.profile.id != \"\",\n    getAccessToken: () => LightClient.auth.accessToken || null,\n    getProfileId: () => LensSDK.profile.id || null,\n  },\n  profile: {\n    create: () => {},\n    fetch: (profileId) => {},\n    fetchAll: (profileIds) => {},\n    stats: (profileId) => {},\n    recommendations: (profileId) => {},\n    interests: (profileId) => {},\n    report: (profileId) => {},\n    block: (profileId) => {},\n    history: () => {},\n    onChainIdentity: (profileId) => {},\n    isFollowedByMe: (profileId) => {},\n    isBlockedByMe: (profileId) => {},\n    isFollowingMe: (profileId) => {},\n    canFollow: (profileId) => {},\n    canUnfollow: (profileId) => {},\n    canBlock: (profileId) => {},\n    canUnblock: (profileId) => {},\n    fetchPublications: (profileId) => LensSDK.fetchAll(profileId),\n  },\n  publication: {\n    fetch: (publicationId) => {},\n    fetchAll: (profileId) => {},\n    stats: (publicationId) => {},\n    whoActed: (publicationId) => {},\n    comments: (publicationId) => {},\n    upvote: (publicationId) => {},\n    downvote: (publicationId) => {},\n    hide: (publicationId) => {},\n    report: (publicationId) => {},\n  },\n  search: {\n    profiles: (searchTerm) => {},\n    publications: (searchTerm) => {},\n  },\n  notifications: {\n    fetch: () => {},\n  },\n  transaction: {\n    status: () => {},\n    txIdToTxHash: () => {},\n  },\n  _call: (apiMethod, requestObject, dataObject) =>\n    apiMethod(\n      LightClient,\n      dataObject ? ApiHelper.intersect(requestObject, dataObject) : null\n    ),\n};\n\nreturn LensSDK.init();\n", "metadata": {"image": {}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.Lens.Main", "fact_widget_deployments_id": "a567d05178d63a277250712ce2ff23c0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}