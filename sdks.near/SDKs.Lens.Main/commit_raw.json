{"tx_hash": "3MviwtFX21V5v6qUzb8sg4SUS2yxsQQ7m1tyZEzrnbGX", "action_id_social": "BNoMhC4nsdBp1XWca64FkzVwVQguggDGgGmG49SBG9bX-0-widget", "block_id": 110881486, "block_timestamp": "2024-01-20T14:29:19.087Z", "signer_id": "sdks.near", "widget_name": "SDKs.Lens.Main", "source_code": "const $ = VM.require(`sdks.near/widget/Loader`);\nconst {\n  Constants,\n  Interfaces,\n  HealthAPI,\n  AuthAPI,\n  ProfileAPI,\n  PublicationAPI,\n  AuthRequests,\n  ProfileRequests,\n  PublicationRequests,\n  ApiHelper,\n} = $(\"@sdks/lens\");\nconst { LightClient } = $(\"@sdks/light-client\");\n\nconst LensSDK = {\n  profile: Interfaces.PROFILE_INTERFACE,\n  enableTestnet: () => (LightClient.url = Constants.TESTNET_URL),\n  enableMainnet: () => (LightClient.url = Constants.MAINNET_URL),\n  isTestnet: () => LightClient.url == Constants.TESTNET_URL,\n  init: () => {\n    LensSDK.enableMainnet();\n    LightClient.auth = Interfaces.AUTH_INTERFACE;\n    LightClient.challenge = Interfaces.AUTH_CHALLENGE_INTERFACE;\n    LightClient.tokenLifespan = Constants.JWT_TOKEN_LIFESPAN_SECONDS;\n    LightClient.refreshTokenLifespan =\n      Constants.JWT_REFRESH_TOKEN_LIFESPAN_SECONDS;\n\n    return LensSDK;\n  },\n  health: {\n    ping: () =>\n      LensSDK._call(HealthAPI.ping).then(\n        (response) => response == Constants.RESPONSE_HEALTH_OK\n      ),\n  },\n  authentication: {\n    profiles: (profilesManagedRequest) =>\n      LensSDK._call(\n        AuthAPI.profiles,\n        AuthRequests.PROFILES_MANAGED_REQUEST,\n        profilesManagedRequest\n      ),\n    login: (challengeRequest) =>\n      LensSDK._call(\n        AuthAPI.challenge,\n        AuthRequests.CHALLENGE_REQUEST,\n        challengeRequest\n      ).then((challenge) => {\n        LightClient.challenge = challenge;\n\n        return Ethers.provider()\n          .getSigner()\n          .signMessage(challenge.text)\n          .then((signature) => {\n            let signedAuthChallengeRequest =\n              AuthRequests.SIGNED_AUTH_CHALLENGE_REQUEST;\n            signedAuthChallengeRequest.id = LightClient.challenge.id;\n            signedAuthChallengeRequest.signature = signature;\n\n            return LensSDK._call(\n              AuthAPI.authenticate,\n              AuthRequests.SIGNED_AUTH_CHALLENGE_REQUEST,\n              signedAuthChallengeRequest\n            ).then((auth) => {\n              LightClient.auth = auth;\n              LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n              return LensSDK.profile;\n            });\n          });\n      }),\n    refresh: (refreshTokenRequest) =>\n      LensSDK._call(\n        AuthAPI.refresh,\n        AuthRequests.REFRESH_TOKEN_REQUEST,\n        refreshTokenRequest\n      ).then((auth) => {\n        LightClient.auth = auth;\n        LensSDK.profile = {}; // Fetch logged user profile once profile API gets implemented\n        return LensSDK.profile;\n      }),\n    revoke: (revokeAuthenticationRequest) =>\n      LensSDK._call(\n        AuthAPI.revoke,\n        AuthRequests.REVOKE_AUTHENTICATION_REQUEST,\n        revokeAuthenticationRequest\n      ),\n    verify: (verifyRequest) =>\n      LensSDK._call(AuthAPI.verify, AuthRequests.VERIFY_REQUEST, verifyRequest),\n    list: (approvedAuthenticationRequest) =>\n      LensSDK._call(\n        AuthAPI.list,\n        AuthRequests.APPROVED_AUTHENTICATION_REQUEST,\n        approvedAuthenticationRequest\n      ),\n    isAuthenticated: () => LensSDK.profile.id != \"\",\n    getAccessToken: () => LightClient.auth.accessToken || null,\n    getProfileId: () => LensSDK.profile.id || null,\n  },\n  profile: {\n    create: (createProfileRequest) =>\n      LensSDK._call(\n        ProfileAPI.create,\n        ProfileRequests.CREATE_PROFILE_REQUEST,\n        createProfileRequest\n      ),\n    fetch: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.fetch,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    fetchAll: (profilesRequest) =>\n      LensSDK._call(\n        ProfileAPI.fetchAll,\n        ProfileRequests.PROFILES_REQUEST,\n        profilesRequest\n      ),\n    stats: (profileStatsRequest) =>\n      LensSDK._call(\n        ProfileAPI.stats,\n        ProfileRequests.PROFILE_STATS_REQUEST,\n        profileStatsRequest\n      ),\n    recommendations: (profileRecommendationsRequest) =>\n      LensSDK._call(\n        ProfileAPI.recommendations,\n        ProfileRequests.PROFILE_RECOMMENDATIONS_REQUEST,\n        profileRecommendationsRequest\n      ),\n    interests: (profileInterestsRequest) =>\n      LensSDK._call(\n        ProfileAPI.interests,\n        ProfileRequests.PROFILE_INTERESTS_REQUEST,\n        profileInterestsRequest\n      ),\n    report: (reportProfileRequest) =>\n      LensSDK._call(\n        ProfileAPI.report,\n        ProfileRequests.REPORT_PROFILE_REQUEST,\n        reportProfileRequest\n      ),\n    block: (blockProfileRequest) =>\n      LensSDK._call(\n        ProfileAPI.block,\n        ProfileRequests.BLOCK_PROFILE_REQUEST,\n        blockProfileRequest\n      ),\n    history: (profileActionHistoryRequest) =>\n      LensSDK._call(\n        ProfileAPI.history,\n        ProfileRequests.PROFILE_ACTION_HISTORY_REQUEST,\n        profileActionHistoryRequest\n      ),\n    onChainIdentity: (profileOnChainIdentityRequest) =>\n      LensSDK._call(\n        ProfileAPI.onChainIdentity,\n        ProfileRequests.PROFILE_ONCHAIN_IDENTITY_REQUEST,\n        profileOnChainIdentityRequest\n      ),\n    isFollowedByMe: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.isFollowedByMe,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    isBlockedByMe: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.isBlockedByMe,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    isFollowingMe: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.isFollowingMe,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    canFollow: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.canFollow,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    canUnfollow: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.canUnfollow,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    canBlock: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.canBlock,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    hasBlockedMe: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.hasBlockedMe,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    canUnblock: (profileRequest) =>\n      LensSDK._call(\n        ProfileAPI.canUnblock,\n        ProfileRequests.PROFILE_REQUEST,\n        profileRequest\n      ),\n    fetchPublications: (profileId) => LensSDK.publications.fetchAll(profileId),\n    isHandleAvailable: (handle) => LensSDK.profile.fetch({ forHandle: handle }),\n  },\n  publication: {\n    fetch: (publicationRequest) =>\n      LensSDK._call(\n        PublicationAPI.fetch,\n        PublicationRequests.PUBLICATION_REQUEST,\n        publicationRequest\n      ),\n    fetchAll: (publicationsRequest) =>\n      LensSDK._call(\n        PublicationAPI.fetchAll,\n        PublicationRequests.PUBLICATIONS_REQUEST,\n        publicationsRequest\n      ),\n    stats: (publicationId) => {},\n    whoActed: (publicationId) => {},\n    comments: (publicationId) => {},\n    upvote: (publicationId) => {},\n    downvote: (publicationId) => {},\n    hide: (publicationId) => {},\n    report: (publicationId) => {},\n  },\n  search: {\n    profiles: (searchTerm) => {},\n    publications: (searchTerm) => {},\n  },\n  notifications: {\n    fetch: () => {},\n  },\n  transaction: {\n    status: () => {},\n    txIdToTxHash: () => {},\n  },\n  _call: (apiMethod, requestObject, dataObject) =>\n    apiMethod(\n      LightClient,\n      dataObject ? ApiHelper.intersect(requestObject, dataObject) : null\n    ),\n};\n\nreturn LensSDK.init();\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sdks.near/widget/SDKs.Lens.Main", "fact_widget_deployments_id": "ba7848ac02a6f12174a080d9f6bec9fe", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 21}