{"tx_hash": "Bb157R5jRtu6L3ifW2Ka7j36nKzMfV29mS639t8ku3K4", "action_id_social": "6YQASFKyHbEPs9vKYerJ3Zvn8PoDg8HMWKYqY9knbrts-0-widget", "block_id": 106953573, "block_timestamp": "2023-12-01T21:37:20.867Z", "signer_id": "352e049bdf43c27e9ff26f6bf3e94772f9e4067445fc11f4351b12ad3bdaae4b", "widget_name": "ConfirmaTuAsistencia", "source_code": "// CSS\n\nconst HeaderContainer = styled.div`\n  height: 70px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-inline: 8px;\n\n`;\nconst Nav = styled.div`\n  height: 60px;\n  width: 100%;\n  display: flex;\n  justify-content: end;\n  align-items: center;\n  gap: 12px;\n  font-weight: 500;\n\n  a{\n    color: #000000;\n    font-size: 16px\n  }\n`;\n\nconst Opciones = styled.div`\n  text-align: center;\n\n`;\n\n// HEADER\n\nconst header = (\n  <HeaderContainer>\n    <h4 style={{ fontWeight: 700 }}>Confirma tu asistencia</h4>\n\n    <Nav>\n      <button\n        class=\"btn btn-primary mt-2\"\n        onClick={async () => {\n          defaultp();\n        }}\n      >\n        Home\n      </button>\n    </Nav>\n  </HeaderContainer>\n);\n\n// DATOS DE LOS EVENTOS\n\nconst defaultprops = {\n  mostrar: false,\n};\n\nconst posadaprops = {\n  mostrar: true,\n  image:\n    \"https://i5.walmartimages.com.mx/mg/gm/3pp/asr/c1de7025-b988-4fda-99e1-7218366c5ea2.56315d77c10b7d04f089e142606e9bc8.jpeg?odnHeight=612&odnWidth=612&odnBg=FFFFFF\",\n  name: \"Posada Cripto\",\n  lugar: \"Casa de Chucho\",\n  fecha: \"20/12/2023\",\n  hora: \"9:00 pm\",\n  mensaje: \"De mensaje comenta que botana llevaras a la fiesta\",\n};\n\nconst fiestaprops = {\n  mostrar: true,\n  image:\n    \"https://weezevent.com/wp-content/uploads/2022/12/15122850/ano-nuevo-empresa-vf.jpg\",\n  name: \"Fiesta fin de a\u00f1o\",\n  lugar: \"Casino Bosques\",\n  fecha: \"31/12/2023\",\n  hora: \"7:00 pm\",\n  mensaje: \"De mensaje comenta que bedida tomar\u00e1s para organizar las mesas\",\n};\n\n// SELECCIONAR EVENTO QUE MOSTRAR\n\nState.init({\n  props: defaultprops,\n});\n\nfunction posada() {\n  State.update({ props: posadaprops });\n}\n\nfunction fiesta() {\n  State.update({ props: fiestaprops });\n}\n\nfunction defaultp() {\n  State.update({ props: defaultprops });\n}\n\n//CONEXI\u00d3N AL CONTRATO\n\nconst contract = \"guest-book.near\";\nconst messages = Near.view(contract, \"getMessages\", {}).reverse();\nconsole.log(messages);\n\nState.init({\n  newMessage: \"\",\n});\n\nconst addNewMessage = () => {\n  if (state.newMessage.trim() == \"\") {\n    return;\n  }\n\n  Near.call(contract, \"addMessage\", {\n    text: state.newMessage,\n  });\n};\n\n// RETURN\n\nreturn (\n  <div class=\"p-3\">\n    <div>\n      {header}\n      <Widget\n        src=\"352e049bdf43c27e9ff26f6bf3e94772f9e4067445fc11f4351b12ad3bdaae4b/widget/DatosEvento2\"\n        props={state.props}\n      />\n    </div>\n\n    {state.props.mostrar ? (\n      <>\n        {context.accountId ? (\n          <div class=\"border border-black p-3\">\n            <h3>Nueva Confirmaci\u00f3n</h3>\n            <div class=\"row\">\n              <div>\n                <input\n                  placeholder=\"Message\"\n                  onChange={(e) => State.update({ newMessage: e.target.value })}\n                />\n              </div>\n            </div>\n            <button\n              class=\"btn btn-primary mt-2\"\n              onClick={async () => {\n                addNewMessage();\n              }}\n            >\n              Guardar\n            </button>\n          </div>\n        ) : (\n          <p class=\"text-center py-2\">\n            Debes iniciar sesi\u00f3n para confirmar tu asistencia\n          </p>\n        )}\n        <br />\n        <div class=\"border border-black p-3\">\n          <h3>Listado de Asistencias</h3>\n          <table className=\"table table-sm\">\n            <thead>\n              <tr class=\"p-3 mb-2 bg-primary text-white text-center\">\n                <th>Cuenta</th>\n                <th>Mensaje</th>\n              </tr>\n            </thead>\n            <tbody>\n              {messages.map((data, key) => {\n                return (\n                  <tr class=\"text-center\">\n                    <td>{data.sender}</td>\n                    <td>{data.text}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </>\n    ) : (\n      <>\n        <Opciones>\n          <button\n            class=\"btn btn-primary mt-2\"\n            onClick={async () => {\n              posada();\n            }}\n          >\n            Posada\n          </button>\n          <button\n            class=\"btn btn-primary mt-2\"\n            onClick={async () => {\n              fiesta();\n            }}\n          >\n            Fiesta fin de a\u00f1o\n          </button>\n        </Opciones>\n      </>\n    )}\n  </div>\n);", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/352e049bdf43c27e9ff26f6bf3e94772f9e4067445fc11f4351b12ad3bdaae4b/widget/ConfirmaTuAsistencia", "fact_widget_deployments_id": "221fac271a1f123fe1117175d981f1a5", "inserted_timestamp": "2023-12-01T23:39:23.327Z", "modified_timestamp": "2023-12-20T03:02:01.702Z", "__row_index": 0}