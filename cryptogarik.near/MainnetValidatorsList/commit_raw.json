{"tx_hash": "FvggVkoQ8cvbzJ1WZWabfZBYpc3WA1f55ExABxMhAesv", "action_id_social": "4Rv2jqsr4iZFwy6eybkHkgjRFqdCghD9P7pCLqem8sBU-0-widget", "block_id": 101581925, "block_timestamp": "2023-09-20T22:48:38.709Z", "signer_id": "cryptogarik.near", "widget_name": "MainnetValidatorsList", "source_code": "const user = \"cryptogarik.near\";\nconst res = fetch(\"https://rpc.mainnet.near.org\", {\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n  },\n  method: \"POST\",\n  body: JSON.stringify({\n    jsonrpc: \"2.0\",\n    method: `validators`,\n    params: [null],\n    id: 1,\n  }),\n});\n\nconsole.log(res.body);\nconst body = res.body;\n\nconst nearInYocto = 1000000000000000000000000;\nconst activeValidators = [];\n\nfor (let i = 0; i < res.body.result.current_validators.length; i++) {\n  const validatorObj = res.body.result.current_validators[i];\n\n  const accountId = validatorObj.account_id;\n  const active = !validatorObj.is_slashed;\n  const numExpectedBlocks = validatorObj.num_expected_blocks;\n  const numExpectedChunks = validatorObj.num_expected_chunks;\n  const numProducedBlocks = validatorObj.num_produced_blocks;\n  const numProducedChunks = validatorObj.num_produced_chunks;\n  const stake = validatorObj.stake;\n\n  const props = {\n    accountId,\n    active,\n    numExpectedBlocks,\n    numProducedBlocks,\n    numExpectedChunks,\n    numProducedChunks,\n    stake,\n  };\n\n  activeValidators.push(\n    <Widget src={`${user}/widget/MainnetValidatorRow`} props={props} />\n    // <tr>\n    //   <td>{accountId}</td>\n    //   <td>{(!isSlashed).toString()}</td>\n    //   <td>\n    //     {stake &&\n    //       (stake / nearInYocto)\n    //         .toFixed(0)\n    //         .replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, \"$1,\")}\n    //   </td>\n    //   <td>{numExpectedBlocks}</td>\n    //   <td>{numProducedBlocks}</td>\n    //   <td>\n    //     {numProducedBlocks &&\n    //       ((numProducedBlocks / numExpectedBlocks) * 100).toFixed(0)}{\" \"}\n    //     %\n    //   </td>\n    //   <td>{numExpectedChunks}</td>\n    //   <td>{numProducedChunks}</td>\n    //   <td>\n    //     {numProducedChunks &&\n    //       ((numProducedChunks / numExpectedChunks) * 100).toFixed(0)}{\" \"}\n    //     %\n    //   </td>\n    // </tr>\n  );\n}\n\nreturn (\n  <table className=\"table table-striped\">\n    <tbody>\n      <tr>\n        <td>\n          <h5>Pool</h5>\n        </td>\n        <td>\n          <h5>Active</h5>\n        </td>\n        <td>\n          <h5>Stake</h5>\n        </td>\n        <td>\n          <h5>Expected blocks</h5>\n        </td>\n        <td>\n          <h5>Produced blocks</h5>\n        </td>\n        <td>\n          <h5>Uptime %</h5>\n        </td>\n        <td>\n          <h5>Expected chunks</h5>\n        </td>\n        <td>\n          <h5>Produced chunks</h5>\n        </td>\n        <td>\n          <h5>Uptime %</h5>\n        </td>\n      </tr>{\" \"}\n      {activeValidators}\n    </tbody>\n  </table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cryptogarik.near/widget/MainnetValidatorsList", "fact_widget_deployments_id": "c748d321213d91149bb22d1925e43bc3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}