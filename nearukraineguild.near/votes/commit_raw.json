{"tx_hash": "4Aq4ahamFtNDkXbJdkiwQ7LHd3RSM5HJHepF2f1FnRzq", "action_id_social": "4RWn4YKNM2mzQ9wXycGqzcjrqcPfemzTgfa2j8ToCe3F-0-widget", "block_id": 99498079, "block_timestamp": "2023-08-23T20:29:39.899Z", "signer_id": "nearukraineguild.near", "widget_name": "votes", "source_code": "State.init({\n  wallet: \"kiskesis.near\",\n  profile: {},\n  nominations: {},\n  data: {},\n});\n\nconst wallets = [\n  \"kiskesis.near\",\n  \"evangel.near\",\n  \"haenko.near\",\n  \"yonota.near\",\n  \"johanga108.near\",\n];\n\nconst getData = (wallet) => {\n  let profile = Social.getr(`${wallet}/profile`);\n  let nominations = Social.getr(`${wallet}/nominations`);\n\n  console.log(\"profile\", profile);\n  console.log(\"nominations\", nominations);\n\n  const data = fetch(\n    `https://raw.githubusercontent.com/kiskesis/ndc-voters/main/${wallet}_output_votes.txt`\n  );\n\n  State.update({\n    profile,\n    nominations,\n    data,\n  });\n};\n\ngetData(state.wallet);\n\nconst handleWalletChange = (e) => {\n  const wallet = e.target.value;\n  State.update({\n    wallet,\n  });\n\n  console.log(\"wallet\", wallet);\n\n  getData(wallet);\n};\n\nconst rednerSelector = () => (\n  <select\n    class=\"form-select\"\n    style={{\n      maxWidth: \"30vw\",\n      fontSize: \"16px\",\n      backgroundColor: \"#f7f7f7\",\n      borderColor: \"#ccc\",\n      borderRadius: \"4px\",\n      padding: \"6px\",\n      cursor: \"pointer\",\n    }}\n    onChange={handleWalletChange}\n  >\n    {wallets.map((wallet) => (\n      <option key={index} value={wallet}>\n        {wallet}\n      </option>\n    ))}\n  </select>\n);\n\nif (state.data.ok) {\n  const rows = state.data.body\n    .split(\"\\n\")\n    .map((line) => line.split(\"|\"))\n    .filter((data) => data.length === 3)\n    .map((item) => (\n      <tr>\n        <td>\n          <Widget\n            src=\"mob.near/widget/Profile.ShortInlineBlock\"\n            props={{ accountId: item[0], tooltip: false }}\n          />\n        </td>\n        <td class=\"align-top\">\n          <small>{item[2].substr(0, 19)}</small>\n        </td>\n      </tr>\n    ));\n\n  return (\n    <>\n      {rednerSelector()}\n      <h1>Fantastic users who voted for {state.profile.name.toUpperCase()}</h1>\n      <a\n        href=\"/nomination.ndctools.near/widget/NDC.Nomination.Candidate.Page?house=HouseOfMerit&accountId=vadim.near\"\n        class=\"btn btn-primary mt-2\"\n      >\n        VOTE FOR {state.profile.name.toUpperCase()}!\n      </a>\n      <table class=\"table table-sm mt-4\">\n        <thead>\n          <tr>\n            <th scope=\"col\">User</th>\n            <th scope=\"col\">Vote date (UTC)</th>\n          </tr>\n        </thead>\n        <tbody>{rows}</tbody>\n      </table>\n      <p>\n        <small>\n          Data is retrieved automatically from the\n          <a\n            href=\"https://github.com/zavodil/near-nft-owners-list/blob/main/.github/workflows/indexed.yml\"\n            target=\"_blank\"\n          >\n            NEAR Public indexer\n          </a>{\" \"}\n          with a slight delay.\n        </small>\n      </p>\n    </>\n  );\n} else\n  return (\n    <>\n      \"Loading\"\n      <button onClick={fetchVotesData}>Click</button>\n    </>\n  );\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/nearukraineguild.near/widget/votes", "fact_widget_deployments_id": "cc59dede0a34356b9d490c997ea7b6fb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}