{"tx_hash": "APYH1FmWcL9SpFqNjPD1B62jcPQwTZ3R4V1XZwAb3ZMV", "action_id_social": "BGqPYwfu8c22uUCzax5pwUpGsWVJh7egAeXgLQxCBaMp-0-widget", "block_id": 115392436, "block_timestamp": "2024-03-24T19:35:13.737Z", "signer_id": "bluebiu.near", "widget_name": "Lending.RewardClaim.Valas", "source_code": "const CLAIM_ABI = [\n  {\n    inputs: [\n      { internalType: \"address\", name: \"_user\", type: \"address\" },\n      { internalType: \"address[]\", name: \"_tokens\", type: \"address[]\" },\n    ],\n    name: \"claim\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\nconst account = Ethers.send(\"eth_requestAccounts\", [])[0];\nconst { loading, market, dapp, record, supplies, onSuccess, onError } = props;\n\nif (!loading || !dapp.rewardAddress) return \"\";\n\nconst { markets } = dapp;\nconst supplyAddrs = supplies.map((item) => item.address);\nconst nativeReward = Object.values(markets).find(\n  (item) => item.symbol === \"valBNB\"\n);\nconst vTokenAddrs = Object.values(markets)\n  .filter((item) => supplyAddrs.includes(item.address))\n  .map((item) => item.variableDebtTokenAddress);\nconst _tokens = [nativeReward.address, ...vTokenAddrs];\n\nconst CollateralContract = new ethers.Contract(\n  dapp.rewardAddress,\n  CLAIM_ABI,\n  Ethers.provider().getSigner()\n);\n\nCollateralContract.claim(account, _tokens)\n  .then((tx) => {\n    tx.wait().then((res) => {\n      onSuccess(res);\n    });\n  })\n  .catch((err) => {\n    onError(err);\n  });\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Lending.RewardClaim.Valas", "fact_widget_deployments_id": "f64470f8a92ef4978f838a53c77789df", "inserted_timestamp": "2024-03-24T21:26:43.760Z", "modified_timestamp": "2024-03-24T21:26:43.760Z", "__row_index": 0}