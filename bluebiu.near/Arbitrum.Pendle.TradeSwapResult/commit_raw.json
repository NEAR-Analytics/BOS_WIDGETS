{"tx_hash": "DeCbfkNkXw4xDnTTPZj1wU3vZ5HVkhoR2uvoQ45n8C76", "action_id_social": "3otFJ1EtN2QDHBDr4CKDFPUZMqXo2pGXn4sU4Q8fsDjV-0-widget", "block_id": 101440260, "block_timestamp": "2023-09-19T01:32:44.069Z", "signer_id": "bluebiu.near", "widget_name": "Arbitrum.Pendle.TradeSwapResult", "source_code": "const Result = styled.div`\n  border: 1px solid #2c334b;\n  border-radius: 16px;\n  padding: 20px;\n  margin-top: 20px;\n  position: relative;\n`;\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-bottom: 20px;\n  .right {\n    text-align: right;\n    display: flex;\n  }\n`;\nconst Text = styled.div`\n  font-size: 14px;\n  font-weight: 400;\n  color: #979abe;\n`;\nconst Routers = styled.div`\n  background-color: #222436;\n  border-radius: 12px;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n`;\nconst TokenImg = styled.img`\n  width: 26px;\n  height: 26px;\n  border-radius: 50%;\n`;\nconst LineWrapper = styled.div`\n  flex-grow: 1;\n  height: 26px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  position: relative;\n  .tooltips {\n    display: none;\n  }\n  &:hover .tooltips {\n    display: block;\n  }\n`;\nconst Line = styled.div`\n  width: 100%;\n  height: 1px;\n  background: repeating-linear-gradient(\n    to right,\n    #979abe 0,\n    #979abe 2px,\n    transparent 2px,\n    transparent 4px\n  );\n`;\nconst Loading = styled.div`\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  bottom: 0px;\n  background: #181a27;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 16px;\n  z-index: 10;\n`;\nconst ToolTips = styled.div`\n  background-color: #37394f;\n  border-radius: 8px;\n  padding: 0px 10px;\n  position: absolute;\n  bottom: 24px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 14px;\n  font-weight: 400;\n  color: #fff;\n  .one-line {\n    white-space: nowrap;\n    line-height: 40px;\n  }\n  .two-lines {\n    padding: 4px;\n    width: 300px;\n    line-height: 23px;\n  }\n  &::after {\n    content: \"\";\n    border: 6px solid transparent;\n    border-top-color: #37394f;\n    position: absolute;\n    bottom: -12px;\n    left: 50%;\n  }\n`;\nconst InfoIcon = styled.div`\n  padding-left: 4px;\n  cursor: pointer;\n  position: relative;\n  text-align: left;\n  .tooltips {\n    display: none;\n  }\n  &:hover .tooltips {\n    display: block;\n  }\n`;\n\nconst { inputCurrency, outputCurrency, amount, loading } = props;\nconst tradeInfo = props.tradeInfo || {};\n\nconst getOut = tradeInfo?.netOut\n  ? Big(tradeInfo.netOut || 0)\n      .mul(0.995)\n      .toFixed(3)\n  : \"-\";\nconst getTokenSymbol = (token) => (\n  <>\n    {token.proSymbol}\n    {token.baseType === \"SY\" ? (\n      <Widget src=\"bluebiu.near/widget/Arbitrum.Pendle.TradeSyIcon\" />\n    ) : (\n      \"\"\n    )}\n  </>\n);\nconst formatAmount = (amount) => {\n  if (!amount || isNaN(amount)) return \"-\";\n  return Number(Big(amount || 0).toFixed(3));\n};\nconst formatRate = () => {\n  if (!inputCurrency?.price.usd || !outputCurrency?.price.usd) return \"-\";\n  return Big(outputCurrency.price.usd).div(inputCurrency.price.usd).toFixed(3);\n};\nconst formatTips = (route) => {\n  if ([\"PT\", \"YT\"].includes(route.to.baseType)) {\n    return (\n      <div className=\"two-lines\">\n        Swap from {formatAmount(route.from.amount)} {getTokenSymbol(route.from)}{\" \"}\n        to\n        {formatAmount(route.to.amount)} {getTokenSymbol(route.to)} on Pendle,\n        swap fee is {Big(tradeInfo.netSyFee || 0).toFixed(5)}%.\n      </div>\n    );\n  }\n  if (route.to.baseType === \"SY\") {\n    return (\n      <div className=\"one-line\">\n        Wrap {formatAmount(route.from.amount)} {getTokenSymbol(route.from)} to\n        {formatAmount(route.to.amount)} {getTokenSymbol(route.to)}.\n      </div>\n    );\n  }\n  return (\n    <div className=\"one-line\">\n      Swap from {formatAmount(route.from.amount)}\n      {getTokenSymbol(route.from)} to {formatAmount(route.to.amount)}\n      {getTokenSymbol(route.to)} on 1Inch.\n    </div>\n  );\n};\nreturn (\n  <Result>\n    {loading && (\n      <Loading>\n        <Widget\n          src=\"bluebiu.near/widget/0vix.LendingLoadingIcon\"\n          props={{\n            size: 40,\n          }}\n        />\n      </Loading>\n    )}\n    <Row>\n      <Text>Rate</Text>\n      <Text className=\"right\">\n        1 {outputCurrency.symbol} = {formatRate()} {inputCurrency.symbol}\n      </Text>\n    </Row>\n    <Row>\n      <Text>Min.Received</Text>\n      <Text className=\"right\">\n        {getOut}\n        {outputCurrency.symbol}\n        <InfoIcon>\n          <Widget\n            src=\"bluebiu.near/widget/0vix.LendingInfoIcon\"\n            props={{ size: 14 }}\n          />\n          <ToolTips className=\"tooltips\">\n            <div className=\"one-line\">Slippage tolerance = 0.5%</div>\n          </ToolTips>\n        </InfoIcon>\n      </Text>\n    </Row>\n    <Row>\n      <Text>Effective Fixed APY</Text>\n      <Text className=\"right\">\n        {tradeInfo?.apy || \"-\"}%\n        <InfoIcon>\n          <Widget\n            src=\"bluebiu.near/widget/0vix.LendingInfoIcon\"\n            props={{ size: 14 }}\n          />\n          <ToolTips className=\"tooltips\">\n            <div className=\"two-lines\">\n              The fixed APY you are effectively getting from this trade, taking\n              into account price impact (\n              {tradeInfo?.priceImpact &&\n              Big(tradeInfo.priceImpact || 0).gt(0.0001)\n                ? Big(tradeInfo.priceImpact || 0).toFixed(4)\n                : \"< 0.0001\"}\n              %) and swap fees.\n            </div>\n          </ToolTips>\n        </InfoIcon>\n      </Text>\n    </Row>\n    {tradeInfo.routes && (\n      <Routers>\n        {tradeInfo.routes?.map((route, i) => {\n          return (\n            <>\n              <TokenImg src={route.from.proIcon} />\n              <LineWrapper>\n                <Line />\n                <ToolTips className=\"tooltips\">{formatTips(route)}</ToolTips>\n              </LineWrapper>\n              {i === tradeInfo.routes.length - 1 && (\n                <TokenImg src={route.to.proIcon} />\n              )}\n            </>\n          );\n        })}\n      </Routers>\n    )}\n  </Result>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Arbitrum.Pendle.TradeSwapResult", "fact_widget_deployments_id": "e6dd35709df1a6a8446a32283892816c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}