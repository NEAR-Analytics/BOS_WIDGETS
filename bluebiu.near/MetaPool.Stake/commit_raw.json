{"tx_hash": "7seJT5zrgUTyyeWZpUfryCe6RMMyVbCEn8dsqoPbcSRc", "action_id_social": "EZz121aLEhnbqxkXBBdjo6vAozP9dCLEUWuZEsDgjbcz-0-widget", "block_id": 101394476, "block_timestamp": "2023-09-18T10:03:09.186Z", "signer_id": "bluebiu.near", "widget_name": "MetaPool.Stake", "source_code": "const Container = styled.div`\n  display: flex;\n  justify-content: center;\n  .mt_20 {\n    margin-top: 20px;\n  }\n  .fw_700 {\n    font-weight: 700;\n  }\n`;\nconst Panel = styled.div`\n  max-width: 540px;\n  width: 90vw;\n`;\nconst Main = styled.div`\n  width: 100%;\n  background-color: #25283a;\n  padding: 20px;\n  border-radius: 0px 0px 20px 20px;\n  @media (max-width: 768px) {\n    padding: 0px;\n  }\n`;\n\nconst Chains = {\n  ETH: {\n    icon: \"https://ipfs.near.social/ipfs/bafkreifamleycojeunphxcbdi7kkpvgfi3gukcctnelqzbbstdw6ckvvmq\",\n    symbol: \"ETH\",\n  },\n  NEAR: {\n    icon: \"https://ipfs.near.social/ipfs/bafkreidqawhdwguwpnxvphoudpx2rwm2db5bylwgqqgzw3rqtxr3arz3jm\",\n    symbol: \"NEAR\",\n  },\n};\n\nconst fetchMetrics = () => {\n  asyncFetch(\"https://eth-metapool.narwallets.com/metrics_json\").then((res) => {\n    const data = res.body;\n    State.update({\n      ethApy: data?.mp_eth_30_day_apy ? data.mp_eth_30_day_apy.toFixed(2) : \"-\",\n      mpethPrice: data?.mpethPrice,\n    });\n  });\n  asyncFetch(\"https://validators.narwallets.com/metrics_json\").then((res) => {\n    const data = res.body;\n    State.update({\n      nearApy: data?.st_near_30_day_apy\n        ? data.st_near_30_day_apy.toFixed(2)\n        : \"-\",\n      stnearPrice: data?.st_near_price,\n      stnearPriceUsd: data?.st_near_price_usd,\n      nearUsdPrice: data?.near_usd_price,\n      nearContractData: {\n        totalSupply: data?.total_stake_shares || 0,\n        totalAssets: data?.total_for_staking || 0,\n      },\n    });\n  });\n};\n\nif (!state.metrics) {\n  fetchMetrics();\n  State.update({\n    metrics: true,\n  });\n}\nif (!Storage.privateGet(\"tab\")) {\n  Storage.privateSet(\"tab\", \"ETH\");\n}\n\nreturn (\n  <Container>\n    <Panel>\n      <Widget\n        src=\"bluebiu.near/widget/MetaPool.Header\"\n        props={{\n          chain: Storage.privateGet(\"tab\"),\n          chains: Object.values(Chains),\n          ethApy: state.ethApy,\n          nearApy: state.nearApy,\n          onChange: (chain) => {\n            Storage.privateSet(\"tab\", chain);\n          },\n        }}\n      />\n      <Main>\n        {Storage.privateGet(\"tab\") === \"ETH\" && (\n          <Widget\n            src=\"bluebiu.near/widget/MetaPool.StakeEth\"\n            props={{\n              chainId: 1,\n              // chainId: 5,\n              liquidAddress: \"0xdF261F967E87B2aa44e18a22f4aCE5d7f74f03Cc\",\n              // liquidAddress: \"0x37774000C885e9355eA7C6B025EbF1704141093C\",\n              chain: \"ETH\",\n              mpethPrice: state.mpethPrice,\n              token: Chains[\"ETH\"],\n              lpToken: {\n                icon: \"https://ipfs.near.social/ipfs/bafkreiezivgkjk4uaz54jhczro53tjv7ojyzwxnmg2stebttrzfxsx5eae\",\n                symbol: \"mpETH\",\n                address: \"0x48AFbBd342F64EF8a9Ab1C143719b63C2AD81710\",\n                // address: \"0x748c905130CC15b92B97084Fd1eEBc2d2419146f\",\n              },\n              ethApy: state.ethApy,\n            }}\n          />\n        )}\n        {Storage.privateGet(\"tab\") === \"NEAR\" && (\n          <Widget\n            src=\"bluebiu.near/widget/MetaPool.StakeNear\"\n            props={{\n              chain: \"NEAR\",\n              stnearPrice: state.stnearPrice,\n              stnearPriceUsd: state.stnearPriceUsd,\n              nearUsdPrice: state.nearUsdPrice,\n              contractData: state.nearContractData,\n              token: Chains[\"NEAR\"],\n              lpToken: {\n                icon: \"https://ipfs.near.social/ipfs/bafkreiangn6xr6nngmcfwg6nngu63wkr4hp5mtteak2w5c7tb44gwhu3oa\",\n                symbol: \"stNEAR\",\n                address: \"meta-token.near\",\n                // address: \"token.meta.pool.testnet\",\n              },\n              contractId: \"meta-pool.near\",\n              // contractId: \"meta-v2.pool.testnet\",\n              nearApy: state.nearApy,\n              // network: \"https://rpc.testnet.near.org\",\n              network: \"https://rpc.mainnet.near.org\",\n            }}\n          />\n        )}\n      </Main>\n    </Panel>\n  </Container>\n);\n", "metadata": {"image": {"ipfs_cid": "bafkreibkmwylg2gxyxh6doxtvzjgpdn6dta3p4nagwuln4nr2n6rtjuoca"}, "name": "Metapool"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/MetaPool.Stake", "fact_widget_deployments_id": "b4b6633f353b0a3280f64c094fc23cc2", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}