{"tx_hash": "HbRDYJTzVfLXhjJNRp7TJUtGhxcgSrjp3qKJ5fj6p4NM", "action_id_social": "4PCNYziBbjqefafZ287bnMrNNU22PvbyroWabe92VRwN-0-widget", "block_id": 116388467, "block_timestamp": "2024-04-08T10:55:14.755Z", "signer_id": "bluebiu.near", "widget_name": "AAVE.Card.YourBorrows", "source_code": "const {\n  config,\n  assetsToSupply,\n  yourBorrows,\n  showRepayModal,\n  showBorrowModal,\n  setShowRepayModal,\n  setShowBorrowModal,\n  onActionSuccess,\n  chainId,\n  repayETHGas,\n  repayERC20Gas,\n  borrowETHGas,\n  borrowERC20Gas,\n  formatHealthFactor,\n  calcHealthFactor,\n  theme,\n} = props;\n\nState.init({\n  data: undefined,\n});\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  @media (min-width: 640px) {\n    flex-direction: row;\n  }\n`;\n\n// const BorrowButton = ({ data }) => (\n//   <Widget\n//     src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n//     props={{\n//       config,\n//       theme,\n//       children: \"Borrow\",\n//       onClick: () => {\n//         State.update({ data });\n//         setShowBorrowModal(true);\n//       },\n//     }}\n//   />\n// );\n\nconst RepayButton = ({ data }) => (\n  <Widget\n    src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n    props={{\n      config,\n      theme,\n      children: \"Repay\",\n      onClick: () => {\n        State.update({ data });\n        setShowRepayModal(true);\n      },\n    }}\n  />\n);\n\nif (!yourBorrows) {\n  return <div />;\n}\n\nreturn (\n  <>\n    {!yourBorrows || yourBorrows.length === 0 ? (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Card.CardEmpty`}\n        props={{\n          config,\n          children: \"Nothing borrowed yet\",\n        }}\n      />\n    ) : (\n      <>\n        <Widget\n          src={`${config.ownerId}/widget/AAVE.Card.CardsTable`}\n          props={{\n            config,\n            headers: [\"Asset\", \"Debt\", \"APY\", \"\"],\n            data: yourBorrows.map((row) => {\n              return [\n                <Widget\n                  src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                  props={{\n                    children: [\n                      <img width={64} height={64} src={row?.icon} />,\n                      <div>\n                        <div className=\"token-title\">{row.symbol}</div>\n                        <div className=\"token-chain\">{row.name}</div>\n                      </div>,\n                    ],\n                  }}\n                />,\n                <div>\n                  <div>{Number(row.debt).toFixed(7)}</div>\n                  <div>$ {Number(row.debtInUSD).toFixed(2)}</div>\n                </div>,\n                `${(Number(row.borrowAPY) * 100).toFixed(2)} %`,\n                <ButtonGroup>\n                  <RepayButton data={{ ...row }} />\n                </ButtonGroup>,\n              ];\n            }),\n          }}\n        />\n      </>\n    )}\n    {showRepayModal && (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Modal.RepayModal`}\n        props={{\n          config,\n          theme,\n          onRequestClose: () => setShowRepayModal(false),\n          data: state.data,\n          onActionSuccess,\n          onlyOneBorrow: yourBorrows.length === 1,\n          chainId,\n          repayETHGas,\n          repayERC20Gas,\n          formatHealthFactor,\n          calcHealthFactor,\n          assetsToSupply,\n        }}\n      />\n    )}\n    {/* {showBorrowModal && (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Modal.BorrowModal`}\n        props={{\n          config,\n          theme,\n          onRequestClose: () => setShowBorrowModal(false),\n          data: state.data,\n          onActionSuccess,\n          chainId,\n          borrowETHGas,\n          borrowERC20Gas,\n          formatHealthFactor,\n          calcHealthFactor,\n        }}\n      />\n    )} */}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/AAVE.Card.YourBorrows", "fact_widget_deployments_id": "541cc193f3cf92356de17a1a2f99b0d6", "inserted_timestamp": "2024-04-08T12:32:01.490Z", "modified_timestamp": "2024-04-08T12:32:01.490Z", "__row_index": 6}