{"tx_hash": "4qbPXES2cE7Ja2TdqVz5TUDrWB6SZTi7FnVF3fdzES5z", "action_id_social": "44J2pQn9KaD4eta5mF83GeYsK3fbFx4JLoiMYAAZ7Kov-0-widget", "block_id": 102380511, "block_timestamp": "2023-10-01T14:57:28.319Z", "signer_id": "bluebiu.near", "widget_name": "Avalanche.Lending.BenqiHandlerCollateral", "source_code": "//  if use as collateral\n\nconst UNITROLLER_ABI = [\n  {\n    constant: false,\n    inputs: [\n      { internalType: \"address[]\", name: \"qiTokens\", type: \"address[]\" },\n    ],\n    name: \"enterMarkets\",\n    outputs: [{ internalType: \"uint256[]\", name: \"\", type: \"uint256[]\" }],\n    payable: false,\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    constant: false,\n    inputs: [\n      { internalType: \"address\", name: \"qiTokenAddress\", type: \"address\" },\n    ],\n    name: \"exitMarket\",\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n    payable: false,\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\nconst {\n  actionText,\n  loading,\n  unitrollerAddress,\n  marketAddress,\n  onSuccess,\n  onError,\n} = props;\n\nif (!loading) return \"\";\n\nconst isEnter = actionText === \"Enable as Collateral\";\nconst CollateralContract = new ethers.Contract(\n  unitrollerAddress,\n  UNITROLLER_ABI,\n  Ethers.provider().getSigner()\n);\nconst method = isEnter ? \"enterMarkets\" : \"exitMarket\";\nconst parameters = isEnter ? [marketAddress] : marketAddress;\nCollateralContract[method](parameters)\n  .then((tx) => {\n    tx.wait().then((res) => {\n      onSuccess(res);\n    });\n  })\n  .catch(() => {\n    onError();\n  });\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Avalanche.Lending.BenqiHandlerCollateral", "fact_widget_deployments_id": "df1a6233e3b873b2c1ee0e9a6c2aea78", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}