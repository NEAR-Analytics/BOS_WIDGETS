{"tx_hash": "Dw78wULeuB6N5ppyaPR9rZyKKTDMciprtXXXUhEmHqdZ", "action_id_social": "CKaV3Nw8wrxMG2cBXxsWDrRbwW6QMqoJ6WaPWDT3Ak5o-0-widget", "block_id": 118017913, "block_timestamp": "2024-05-01T12:48:14.157Z", "signer_id": "bluebiu.near", "widget_name": "Liquidity.Data.JUICE", "source_code": "\nconst {\n  onLoad,\n  dataList,\n  multicall,\n  multicallAddress,\n  smartContractAddress\n} = props\n\n// const dataList = dataList\nfunction updateDataList() {\n  onLoad({\n    dataList\n  })\n}\nfunction handleGetTotalBaseDeposit() {\n  const calls = []\n  for (let i = 0; i < dataList.length; i++) {\n    calls.push({\n      address: dataList[i].strategyAddress,\n      name: \"getTotalBaseDeposit\",\n    })\n  }\n  multicall({\n    abi: [{\n      \"inputs\": [],\n      \"name\": \"getTotalBaseDeposit\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }],\n    calls,\n    options: {},\n    multicallAddress,\n    provider: Ethers.provider(),\n  }).then(result => {\n    for (let i = 0; i < dataList.length; i++) {\n      dataList[i].pointList[0].value = Big(result[i][0] ? ethers.utils.formatUnits(result[i][0]) : 0).toString()\n    }\n    updateDataList(\"handleGetTotalBaseDeposit\")\n  })\n}\nfunction handleGetPositionValue() {\n  const calls = []\n  for (let i = 0; i < dataList.length; i++) {\n    calls.push({\n      address: dataList[i].strategyAddress,\n      name: \"getPositionValue\",\n      params: [smartContractAddress]\n    })\n  }\n  console.log('=calls', calls)\n  multicall({\n    abi: [{\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"account\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"getPositionValue\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"value\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }],\n    calls,\n    options: {},\n    multicallAddress,\n    provider: Ethers.provider(),\n  }).then(result => {\n    for (let i = 0; i < dataList.length; i++) {\n      dataList[i].positionValue = Big(result[i][0] ? ethers.utils.formatUnits(result[i][0]) : 0).toString()\n    }\n    console.log('=dataList', dataList)\n    updateDataList(\"handleGetPositionValue\")\n  })\n}\nuseEffect(() => {\n  handleGetTotalBaseDeposit()\n}, [])\nuseEffect(() => {\n  smartContractAddress && handleGetPositionValue()\n}, [smartContractAddress])", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Liquidity.Data.JUICE", "fact_widget_deployments_id": "20ed470cab45f69cd1f9d07baa4fa0dd", "inserted_timestamp": "2024-05-01T14:39:22.579Z", "modified_timestamp": "2024-05-01T14:39:22.579Z", "__row_index": 0}