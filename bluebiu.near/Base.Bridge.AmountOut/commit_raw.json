{"tx_hash": "76V9ETwGBHVnx4EodHf5jovMPPGNZoaUPEpVPpsmFSLL", "action_id_social": "AeaTWGUWj6ZPkzrwfEiebja8LGprKhgiAYJC6x7x5Exg-0-widget", "block_id": 107920364, "block_timestamp": "2023-12-14T11:33:49.779Z", "signer_id": "bluebiu.near", "widget_name": "Base.Bridge.AmountOut", "source_code": "const { loading, amount, routerAddress, target, onLoad } = props;\n\nuseEffect(() => {\n  if (!loading || !routerAddress) return;\n  const QuoteRouterContract = new ethers.Contract(\n    routerAddress,\n    [\n      {\n        inputs: [\n          { internalType: \"uint16\", name: \"_dstChainId\", type: \"uint16\" },\n          { internalType: \"uint8\", name: \"_functionType\", type: \"uint8\" },\n          { internalType: \"bytes\", name: \"_toAddress\", type: \"bytes\" },\n          {\n            internalType: \"bytes\",\n            name: \"_transferAndCallPayload\",\n            type: \"bytes\",\n          },\n          {\n            components: [\n              {\n                internalType: \"uint256\",\n                name: \"dstGasForCall\",\n                type: \"uint256\",\n              },\n              {\n                internalType: \"uint256\",\n                name: \"dstNativeAmount\",\n                type: \"uint256\",\n              },\n              {\n                internalType: \"bytes\",\n                name: \"dstNativeAddr\",\n                type: \"bytes\",\n              },\n            ],\n            internalType: \"struct IStargateRouter.lzTxObj\",\n            name: \"_lzTxParams\",\n            type: \"tuple\",\n          },\n        ],\n        name: \"quoteLayerZeroFee\",\n        outputs: [\n          { internalType: \"uint256\", name: \"\", type: \"uint256\" },\n          { internalType: \"uint256\", name: \"\", type: \"uint256\" },\n        ],\n        stateMutability: \"view\",\n        type: \"function\",\n      },\n    ],\n    Ethers.provider().getSigner()\n  );\n\n  QuoteRouterContract.quoteLayerZeroFee(target.dstId, 1, target.address, \"0x\", {\n    dstGasForCall: 0,\n    dstNativeAmount: 0,\n    dstNativeAddr: \"0x0000000000000000000000000000000000000001\",\n  }).then((res) => {\n    const gasCost = ethers.utils.formatUnits(res[0]._hex, 18);\n    onLoad({\n      received: Big(amount || 0)\n        .mul(0.995)\n        .toString(),\n      gasCost,\n    });\n  });\n}, [loading]);\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Base.Bridge.AmountOut", "fact_widget_deployments_id": "00389fe4921ae4eb9b945d5497fb7326", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}