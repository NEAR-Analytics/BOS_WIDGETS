{"tx_hash": "BCihyjvgyGTTXWheaFm4nAZjZqvJPQmXv8AHRSKAsTkr", "action_id_social": "7L4Rg8yGgDbP7dDCEVGfmtB27HYo7HZkfVD67S3YpH26-0-widget", "block_id": 119346557, "block_timestamp": "2024-05-20T13:18:40.487Z", "signer_id": "bluebiu.near", "widget_name": "Lending.MarketRow", "source_code": "const StyledRow = styled.div`\n  margin-bottom: 10px;\n`;\nconst StyledRowHeader = styled.div`\n  border: 1px solid #373a53;\n  height: 84px;\n  display: flex;\n  align-items: center;\n  background-color: #262836;\n  padding-left: 22px;\n  padding-right: 24px;\n  border-radius: 16px;\n  cursor: pointer;\n`;\nconst StyledRowItem = styled.div`\n  height: 100%;\n  display: flex;\n  align-items: center;\n`;\nconst StyledExpand = styled.div`\n  cursor: pointer;\n  transform-origin: center;\n  transform: rotate(-90deg);\n  transition: 0.3s;\n\n  &.expand {\n    transform: rotate(0deg);\n  }\n`;\n\nconst {\n  columns,\n  data,\n  borrowLimit,\n  addAction,\n  toast,\n  chainId,\n  nativeCurrency,\n  dexConfig,\n  onSuccess,\n  account,\n  prices,\n  totalCollateralUsd,\n  userTotalBorrowUsd,\n} = props;\n\nState.init({\n  expand: false,\n});\n\nlet _borrowLimit = 0;\n\n// for Ionic\nif (dexConfig.name === \"Ionic\") {\n  const currentTokenCollateralUSD = Big(data.userCollateralUSD || 0).times(\n    Big(data.COLLATERAL_FACTOR)\n  );\n\n  _borrowLimit = Big(totalCollateralUsd)\n    .minus(currentTokenCollateralUSD)\n    .div(1.07)\n    .minus(Big(userTotalBorrowUsd));\n\n  _borrowLimit = _borrowLimit.lte(0) ? 0 : _borrowLimit.toFixed(6);\n} else {\n  _borrowLimit = borrowLimit;\n}\n\nreturn (\n  <StyledRow>\n    <StyledRowHeader\n      style={{ borderRadius: state.expand ? \"16px 16px 0px 0px\" : \"16px\" }}\n      onClick={() => {\n        State.update({\n          expand: !state.expand,\n        });\n      }}\n    >\n      {columns.map((column) => (\n        <StyledRowItem key={column.key} style={{ width: column.width }}>\n          {column.key === \"asset\" && (\n            <Widget\n              src=\"bluebiu.near/widget/Lending.MarketAsset\"\n              props={{\n                icon: data?.underlyingToken.icon,\n                symbol: data?.underlyingToken.symbol,\n              }}\n            />\n          )}\n          {column.type === \"amount\" && (\n            <Widget\n              src=\"bluebiu.near/widget/Lending.MarketAmount\"\n              props={{\n                amount: data[column.key],\n                price: data?.underlyingPrice,\n              }}\n            />\n          )}\n          {column.type === \"apy\" && (\n            <Widget\n              src=\"bluebiu.near/widget/Lending.MarketApy\"\n              props={{\n                apy: data[column.key],\n                distributionApy: data?.distributionApy,\n                key: column.key === \"supplyApy\" ? \"supply\" : \"borrow\",\n              }}\n            />\n          )}\n          {column.key === \"handler\" && (\n            <StyledExpand className={state.expand ? \"expand\" : \"\"}>\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"11\"\n                height=\"8\"\n                viewBox=\"0 0 11 8\"\n                fill=\"none\"\n              >\n                <path\n                  d=\"M5.94103 7.02391C5.5407 7.52432 4.77961 7.52432 4.37929 7.02391L0.459914 2.1247C-0.0638966 1.46993 0.402276 0.499999 1.24078 0.499999L9.07953 0.5C9.91804 0.5 10.3842 1.46993 9.8604 2.12469L5.94103 7.02391Z\"\n                  fill=\"#979ABE\"\n                />\n              </svg>\n            </StyledExpand>\n          )}\n        </StyledRowItem>\n      ))}\n    </StyledRowHeader>\n    <Widget\n      src=\"bluebiu.near/widget/Lending.MarketExpand\"\n      props={{\n        expand: state.expand,\n        borrowLimit: _borrowLimit,\n        data,\n        addAction,\n        toast,\n        chainId,\n        nativeCurrency,\n        dexConfig,\n        onSuccess,\n        account,\n        prices,\n      }}\n    />\n  </StyledRow>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Lending.MarketRow", "fact_widget_deployments_id": "4397af564a9dbda325e0cfba0bcb58ef", "inserted_timestamp": "2024-05-20T14:52:59.851Z", "modified_timestamp": "2024-05-20T14:52:59.851Z", "__row_index": 5}