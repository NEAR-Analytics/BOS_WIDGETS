{"tx_hash": "AAGBhsMge2iqyu12Yqurper7Q3Dp35FP5phFFsX1LzkF", "action_id_social": "GMymREBEgWYW5FM197UTWgi5itEtQwNsQLa5B5eFQxZ1-0-widget", "block_id": 117371416, "block_timestamp": "2024-04-22T09:07:23.135Z", "signer_id": "bluebiu.near", "widget_name": "Scroll.BridgeXY.HandlerSwap", "source_code": "const {\n  amount,\n  account,\n  currency,\n  routerAddress,\n  routerEthAddress,\n  target,\n  loading,\n  onSuccess,\n  onError,\n  quote,\n} = props;\n\n\nconst BASE_API = 'https://open-api.xy.finance/v1'\nfunction buildSwap() {\n  return asyncFetch(`${BASE_API}/swap?srcChainId=${quote.srcChainId}&fromTokenAddress=${quote.fromTokenAddress}&amount=${quote.fromTokenAmount}&destChainId=${quote.destChainId}&toTokenAddress=${quote.toTokenAddress}&slippage=1&referrer=0x93A193597E08351D84eb115E4644C77578D665E3&receiveAddress=${account}`).then(res => {\n    const { body } = res\n    console.log('swap: ', body)\n    if (body.tx) {\n      return body.tx\n    }\n  })\n}\n\nif (!loading) return \"\";\n\nconst signer = Ethers.provider().getSigner()\nbuildSwap().then(params => {\n  console.log('params:', params)\n  if (params) {\n    \n    signer.sendTransaction({\n      ...params,\n      value: params.value.toString()\n      // gasLimit: 11111192000\n    })\n      .then((tx) => {\n        console.log(tx)\n        tx.wait()\n          .then((res) => {\n            onSuccess(res);\n          })\n          .catch((err) => {\n            onError(tx);\n          });\n      })\n      .catch((err) => {\n        console.log(err)\n        onError(err);\n      });\n  } else {\n    onError(\"Swap Failed\")\n  }\n})\n\n\n\nreturn \"\";", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Scroll.BridgeXY.HandlerSwap", "fact_widget_deployments_id": "b903bb669816d2099a1cc12af9c2fe85", "inserted_timestamp": "2024-04-22T10:34:18.464Z", "modified_timestamp": "2024-04-22T10:34:18.464Z", "__row_index": 4}