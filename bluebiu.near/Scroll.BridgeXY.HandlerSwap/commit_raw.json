{"tx_hash": "3hBUePSqjRqC7QdWdCniGXGXrkx4qgW14WXbDJfGUa7L", "action_id_social": "7THx8ruFevx7eK2hf2FkmjBwzwpY6ZNP65mShGVbPov-0-widget", "block_id": 117522325, "block_timestamp": "2024-04-24T12:54:35.772Z", "signer_id": "bluebiu.near", "widget_name": "Scroll.BridgeXY.HandlerSwap", "source_code": "const {\n  amount,\n  account,\n  currency,\n  routerAddress,\n  routerEthAddress,\n  target,\n  loading,\n  onSuccess,\n  onError,\n  quote,\n} = props;\n\n\nconst BASE_API = 'https://open-api.xy.finance/v1'\nfunction buildSwap() {\n  return asyncFetch(`${BASE_API}/swap?srcChainId=${quote.srcChainId}&fromTokenAddress=${quote.fromTokenAddress}&amount=${quote.fromTokenAmount}&destChainId=${quote.destChainId}&toTokenAddress=${quote.toTokenAddress}&slippage=1&referrer=0x6F78C36F8a645509744250B127646ABE4150103b&receiveAddress=${account}`).then(res => {\n    const { body } = res\n    console.log('swap: ', body)\n    if (body.tx) {\n      return body.tx\n    }\n  })\n}\n\nif (!loading) return \"\";\n\nconst signer = Ethers.provider().getSigner()\nbuildSwap().then(params => {\n  console.log('params:', params)\n  if (params) {\n    \n    signer.sendTransaction({\n      ...params,\n      value: params.value.toString()\n      // gasLimit: 11111192000\n    })\n      .then((tx) => {\n        console.log(tx)\n        tx.wait()\n          .then((res) => {\n            onSuccess(res);\n          })\n          .catch((err) => {\n            onError(tx);\n          });\n      })\n      .catch((err) => {\n        console.log(err)\n        onError(err);\n      });\n  } else {\n    onError(\"Swap Failed\")\n  }\n})\n\n\n\nreturn \"\";", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Scroll.BridgeXY.HandlerSwap", "fact_widget_deployments_id": "be3a798ae841a34b2f863a7a198e957b", "inserted_timestamp": "2024-04-24T14:41:50.718Z", "modified_timestamp": "2024-04-24T14:41:50.718Z", "__row_index": 0}