{"tx_hash": "5v1BJncZ3ZhhJjcznnYAh3Vnfj2tUp1P34si1NFgPMA3", "action_id_social": "EAT2VSS1Yo55Ux3MvxTC44ZjbJACZaXLSMjVyXzoCDQJ-0-widget", "block_id": 108532014, "block_timestamp": "2023-12-22T06:22:27.497Z", "signer_id": "bluebiu.near", "widget_name": "Optimism.Lending.GranaryClaimHandler", "source_code": "const CLAIM_ABI = [\n  {\n    inputs: [\n      { internalType: \"address[]\", name: \"assets\", type: \"address[]\" },\n      { internalType: \"address\", name: \"to\", type: \"address\" },\n    ],\n    name: \"claimAllRewards\",\n    outputs: [\n      {\n        internalType: \"address[]\",\n        name: \"rewardTokens\",\n        type: \"address[]\",\n      },\n      {\n        internalType: \"uint256[]\",\n        name: \"claimedAmounts\",\n        type: \"uint256[]\",\n      },\n    ],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\nconst account = Ethers.send(\"eth_requestAccounts\", [])[0];\nconst { loading, market, dapp, onSuccess, onError } = props;\n\nif (!loading) return \"\";\n\nconst CollateralContract = new ethers.Contract(\n  dapp.rewardAddress,\n  CLAIM_ABI,\n  Ethers.provider().getSigner()\n);\nCollateralContract.claimAllRewards(market.allPools, account)\n  .then((tx) => {\n    tx.wait().then((res) => {\n      onSuccess(res);\n    });\n  })\n  .catch(() => {\n    onError();\n  });\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Optimism.Lending.GranaryClaimHandler", "fact_widget_deployments_id": "9b7c285e7a1526d196f268f7e85e00b3", "inserted_timestamp": "2023-12-22T08:25:31.247Z", "modified_timestamp": "2023-12-22T08:53:25.673Z", "__row_index": 0}