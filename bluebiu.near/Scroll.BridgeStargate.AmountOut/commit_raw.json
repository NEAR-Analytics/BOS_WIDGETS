{"tx_hash": "5fzuaPY6Edo6ap7aQoCneU8tUx7BmydwaM3g8LoER14a", "action_id_social": "44863QvkddTXs2u1H38TyQr57qs5Q4bgpcYbiHJqsHuy-0-widget", "block_id": 116610422, "block_timestamp": "2024-04-11T12:48:58.220Z", "signer_id": "bluebiu.near", "widget_name": "Scroll.BridgeStargate.AmountOut", "source_code": "const { loading, amount, routerAddress, source, target, onLoad } = props;\n\nconst account = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nconst chainIds = {\n    1: 101,\n    534352: 214\n}\n\nuseEffect(() => {\n    if (!loading || !routerAddress) return;\n\n\n    const QuoteRouterContract = new ethers.Contract(\n        routerAddress,\n        [\n            {\n                \"inputs\": [\n                    {\n                        \"internalType\": \"address\",\n                        \"name\": \"_oft\",\n                        \"type\": \"address\"\n                    },\n                    {\n                        \"internalType\": \"uint16\",\n                        \"name\": \"_dstChainId\",\n                        \"type\": \"uint16\"\n                    },\n                    {\n                        \"internalType\": \"bytes32\",\n                        \"name\": \"_toAddress\",\n                        \"type\": \"bytes32\"\n                    },\n                    {\n                        \"internalType\": \"uint256\",\n                        \"name\": \"_amount\",\n                        \"type\": \"uint256\"\n                    },\n                    {\n                        \"internalType\": \"bool\",\n                        \"name\": \"_useZro\",\n                        \"type\": \"bool\"\n                    },\n                    {\n                        \"internalType\": \"bytes\",\n                        \"name\": \"_adapterParams\",\n                        \"type\": \"bytes\"\n                    },\n                    {\n                        \"components\": [\n                            {\n                                \"internalType\": \"uint256\",\n                                \"name\": \"callerBps\",\n                                \"type\": \"uint256\"\n                            },\n                            {\n                                \"internalType\": \"address\",\n                                \"name\": \"caller\",\n                                \"type\": \"address\"\n                            },\n                            {\n                                \"internalType\": \"bytes2\",\n                                \"name\": \"partnerId\",\n                                \"type\": \"bytes2\"\n                            }\n                        ],\n                        \"internalType\": \"struct IOFTWrapper.FeeObj\",\n                        \"name\": \"_feeObj\",\n                        \"type\": \"tuple\"\n                    }\n                ],\n                \"name\": \"estimateSendFeeV2\",\n                \"outputs\": [\n                    {\n                        \"internalType\": \"uint256\",\n                        \"name\": \"nativeFee\",\n                        \"type\": \"uint256\"\n                    },\n                    {\n                        \"internalType\": \"uint256\",\n                        \"name\": \"zroFee\",\n                        \"type\": \"uint256\"\n                    }\n                ],\n                \"stateMutability\": \"view\",\n                \"type\": \"function\"\n            },\n        ],\n        Ethers.provider().getSigner()\n    );\n\n    console.log(222222)\n\n    const toAddressBytes = ethers.utils.defaultAbiCoder.encode(['address'], [account])\n    const adapterParams = ethers.utils.solidityPack([\"uint16\", \"uint256\"], [1, 99])\n\n    console.log('source: ', source)\n\n    QuoteRouterContract.estimateSendFeeV2(\n        source.address,\n        chainIds[target.dstId],\n        toAddressBytes,\n        new Big(amount).times(Math.pow(10, source.decimals)).toString(),\n        false,\n        adapterParams,\n        {\n            caller: \"0x0000000000000000000000000000000000000000\",\n            callerBps: 0,\n            partnerId: \"0x0000\",\n        }).then((res) => {\n            const gasCost = ethers.utils.formatUnits(res[0]._hex, source.decimals);\n            console.log(gasCost, props)\n            onLoad({\n                received: Big(amount || 0)\n                    .mul(0.995)\n                    .toString(),\n                gasCost,\n            });\n        });\n}, [loading]);\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Scroll.BridgeStargate.AmountOut", "fact_widget_deployments_id": "2a46f37f5b7d6558764f6e1c387b7fb9", "inserted_timestamp": "2024-04-11T14:43:07.705Z", "modified_timestamp": "2024-04-11T14:43:07.705Z", "__row_index": 0}