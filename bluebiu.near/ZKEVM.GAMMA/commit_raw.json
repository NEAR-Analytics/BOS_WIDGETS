{"tx_hash": "BbZMpdXyHZBi9zGey2FL4yTYpd8initSCPAQCy6ypaJS", "action_id_social": "AmmU7tZydgmqjsN6XhMuGSkV3iMgiuJK919i7yWBjUqq-0-widget", "block_id": 114180279, "block_timestamp": "2024-03-06T03:30:25.448Z", "signer_id": "bluebiu.near", "widget_name": "ZKEVM.GAMMA", "source_code": "State.init({\n  activePair: defaultPair,\n  isPoolFetching: false,\n  isUserPositionsFetching: false,\n  chainId: \"\",\n});\n\nconst CONNECT_PROPS = {\n  chainId: 1101,\n  chainName: \"Polygon zkEVM\",\n  noAccountTips: \"Polygon zkEVM Liquidity\",\n  wrongNetworkTips: \"To proceed, kindly switch to Polygon zkEVM Chain.\",\n};\n\nconst SwitchWrapper = styled.div`\n  --text-color: rgb(121, 79, 221);\n  --button-color: rgb(121, 79, 221);\n`;\n\nconst sender = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nif (!sender)\n  return (\n    <SwitchWrapper>\n      <Widget\n        src=\"bluebiu.near/widget/Arbitrum.Swap.ConnectButton\"\n        props={{\n          ...CONNECT_PROPS,\n          isWrongNetwork: false,\n        }}\n      />\n    </SwitchWrapper>\n  );\n\nEthers.provider()\n  .getNetwork()\n  .then((data) => {\n    State.update({\n      chainId: data.chainId,\n    });\n  });\n\nif (state.chainId !== 1101) {\n  return (\n    <SwitchWrapper>\n      <Widget\n        src=\"bluebiu.near/widget/Arbitrum.Swap.ConnectButton\"\n        props={{\n          ...CONNECT_PROPS,\n          isWrongNetwork: true,\n        }}\n      />\n    </SwitchWrapper>\n  );\n}\n\nconst fetchPoolsData = () => {\n  State.update({\n    isPoolFetching: true,\n  });\n  asyncFetch(\n    \"https://wire2.gamma.xyz/quickswap/polygon-zkevm/hypervisors/allData\"\n  ).then((res) => {\n    if (!res.ok) return;\n\n    State.update({\n      poolsData: res.body,\n      isPoolFetching: false,\n    });\n  });\n};\n\nconst fetchUserData = () => {\n  State.update({\n    isUserPositionsFetching: true,\n  });\n  asyncFetch(\n    `https://wire2.gamma.xyz/quickswap/polygon-zkevm/user/${sender}`\n  ).then((res) => {\n    if (!res.ok) return;\n\n    State.update({\n      userPositions: res.body[sender],\n      isUserPositionsFetching: false,\n    });\n  });\n};\n\nif (state.poolsData === undefined) {\n  fetchPoolsData();\n}\n\nif (sender && state.userPositions === undefined) {\n  fetchUserData();\n}\n\nconst refetch = () => {\n  fetchPoolsData();\n  fetchUserData();\n  console.log(\"refetching\");\n};\n\nconst postRefetch = () => {\n  setTimeout(() => refetch(), 45_000);\n};\n\nconst defaultPair = {\n  id: \"N WETH-USDC\",\n  token0: \"WETH\",\n  token1: \"USDC\",\n  decimals0: 18,\n  decimals1: 6,\n};\n\nconst Wrapper = styled.div`\n  align-items: start;\n  gap: 24px;\n`;\nconst VStack = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  .tableTitle {\n    font-size: 18px;\n    color: #7c7f96;\n    font-weight: 500;\n    padding-left: 16px;\n    margin-bottom: 5px;\n  }\n`;\nconst Button = styled.button`\n  background: #1d1e1f;\n  border-radius: 4px;\n  border: none;\n  max-width: 640px;\n  width: 100%;\n  color: #fff;\n  padding: 8px 0;\n  font-weight: 600;\n  font-size: 14px;\n  position: relative;\n  min-height: 37px;\n  &:hover {\n    background: #2b2a2b;\n  }\n  &:disabled {\n    background: #333;\n    color: #ccc;\n  }\n`;\n\nconst handlePairClick = (pair) => {\n  State.update({\n    activePair: pair,\n  });\n};\n\nconst {\n  activePair,\n  poolsData,\n  userPositions,\n  isPoolFetching,\n  isUserPositionsFetching,\n} = state;\n\nreturn (\n  <VStack>\n    <Wrapper>\n      <Widget\n        src=\"bluebiu.near/widget/ZKEVM.gamma-zkevm-vault\"\n        props={{\n          pair: activePair,\n          refetch: postRefetch,\n          can_add_action: state.add_action,\n          addAction: props.addAction,\n          toast: props.toast,\n          chainId: state.chainId,\n        }}\n      />\n      <Widget\n        src=\"bluebiu.near/widget/ZKEVM.gamma-zkevm-table\"\n        props={{ handlePairClick, poolsData, userPositions, activePair }}\n      />\n    </Wrapper>\n\n    <Widget src=\"guessme.near/widget/ZKEVMWarmUp.generage-uuid\" />\n  </VStack>\n);\n", "metadata": {"image": {"ipfs_cid": "bafkreial4i3eb5uuxkhecn7nwos76km3qvb7jzxmups57rkxizr5i7dyaa"}, "name": "Gamma", "tags": {"liquidity-manager": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/ZKEVM.GAMMA", "fact_widget_deployments_id": "0d0cb8dacb05e01dfce07416ae68c298", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 15}