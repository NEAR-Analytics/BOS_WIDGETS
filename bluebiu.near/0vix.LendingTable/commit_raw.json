{"tx_hash": "DiCXPQqgcHeLUhE9DbvuMGHgFgjeoT7r15oTb19LT8AF", "action_id_social": "Gq8BkUAAPFaxjNMpBf8nrv8L6L2wHf6CufqFYsn84pEB-0-widget", "block_id": 100364091, "block_timestamp": "2023-09-04T08:58:20.229Z", "signer_id": "bluebiu.near", "widget_name": "0vix.LendingTable", "source_code": "const Table = styled.div`\n  width: 100%;\n  background-color: #181a27;\n  border: 1px solid #332c4b;\n  border-radius: 12px;\n\n  @media (max-width: 640px) {\n    background-color: transparent;\n    border: none;\n  }\n`;\nconst Title = styled.div`\n  padding: 30px 30px 10px;\n  font-size: 18px;\n  font-weight: 700;\n  line-height: 22px;\n  color: #fff;\n  @media (max-width: 640px) {\n    font-size: 16px;\n    padding: 0px;\n  }\n`;\nconst Header = styled.div`\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 16.8px;\n  padding: 10px 30px;\n  display: flex;\n  color: #7c7f96;\n  @media (max-width: 640px) {\n    display: none;\n  }\n`;\nconst Column = styled.div``;\nconst Row = styled.div`\n  display: flex;\n  padding: 0px 30px;\n  transition: 0.5s;\n  height: 60px;\n  align-items: center;\n  &:last-child {\n    border-radius: 0px 0px 12px 12px;\n  }\n  &:hover {\n    background-color: rgba(53, 55, 73, 0.5);\n  }\n  @media (max-width: 640px) {\n    background-color: #181a27;\n    border: 1px solid #332c4b;\n    border-radius: 10px;\n    flex-direction: column;\n    height: auto;\n    padding: 20px 0px;\n    margin-top: 10px;\n    .special-key {\n      display: none;\n    }\n\n    &:last-child {\n      border-radius: 10px;\n    }\n  }\n`;\nconst RowHeader = styled.div`\n  display: flex;\n  @media (max-width: 640px) {\n    justify-content: space-between;\n    padding: 0px 20px 10px;\n    border-bottom: 1px solid #2e3145;\n  }\n  @media (min-width: 640px) {\n    .special-total {\n      display: none;\n    }\n  }\n`;\nconst NormalCell = styled.div`\n  display: flex;\n  align-items: center;\n  .column-name {\n    display: none;\n    color: #7c7f96;\n    font-size: 13px;\n  }\n  @media (max-width: 640px) {\n    justify-content: space-between;\n    padding: 10px 20px 5px;\n    align-items: flex-start;\n    .column-name {\n      display: block;\n    }\n    .row-value {\n      color: #fff;\n      font-size: 15px;\n    }\n  }\n`;\nconst Asset = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst Logo = styled.img`\n  vertical-align: top;\n  width: 32px;\n  hight: 32px;\n  border-radius: 50%;\n  margin-right: 8px;\n`;\nconst Name = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n`;\nconst Cell = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n  @media (max-width: 640px) {\n    width: 100% !important;\n    &:first-child {\n      margin-bottom: 10px;\n    }\n  }\n`;\nconst Total = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n  @media (max-width: 640px) {\n    text-align: right;\n  }\n`;\nconst TotalValue = styled.div`\n  color: #7c7f96;\n  font-size: 14px;\n  font-weight: 500;\n  @media (max-width: 640px) {\n    text-align: right;\n  }\n`;\nconst Buttons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  @media (max-width: 640px) {\n    justify-content: center;\n    width: 100%;\n    padding: 10px 20px 0px;\n  }\n`;\nconst Spacer = styled.div`\n  width: 10px;\n`;\nconst Flex = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst { title, columns, data, buttons, onButtonClick } = props;\nconst specialTotal = [\n  \"userSupply\",\n  \"totalSupply\",\n  \"userBorrow\",\n  \"totalBorrows\",\n];\nconst formatTotal = (total) => {\n  const BTotal = Big(total);\n  if (BTotal.eq(0)) return \"0\";\n  if (BTotal.lt(0.01)) return \"<0.01\";\n  if (BTotal.lt(1e3)) return BTotal.toFixed(2);\n  if (BTotal.lt(1e6)) return BTotal.div(1e3).toFixed(2) + \"K\";\n  return BTotal.div(1e6).toFixed(2) + \"M\";\n};\nconst renderTotal = (record, key, isSpecialKey) => {\n  return (\n    <div className={`${isSpecialKey && \"special-total\"}`}>\n      <Total>{formatTotal(record[key])}</Total>\n      <TotalValue>${formatTotal(record[`${key}_value`])}</TotalValue>\n    </div>\n  );\n};\nconst renderAssetName = (record) => {\n  return (\n    <RowHeader>\n      <Asset>\n        <Logo src={record.logo} />\n        <Name>{record.name}</Name>\n      </Asset>\n      {record.userSupply && renderTotal(record, \"userSupply\", true)}\n      {record.totalSupply && renderTotal(record, \"totalSupply\", true)}\n      {record.userBorrow && renderTotal(record, \"userBorrow\", true)}\n      {record.totalBorrows && renderTotal(record, \"totalBorrows\", true)}\n    </RowHeader>\n  );\n};\n\nconst renderCollateral = (record) => {\n  return (\n    <Widget\n      src=\"bluebiu.near/widget/0vix.LendingCollateralButton\"\n      props={{\n        onChange: () => {\n          onButtonClick?.(\n            record.address,\n            record.isCollateral\n              ? \"Disable as Collateral\"\n              : \"Enable as Collateral\"\n          );\n        },\n        active: record.isCollateral,\n      }}\n    />\n  );\n};\nconst renderApy = (record) => <div className=\"apy\">{record.apy}</div>;\n\nreturn (\n  <Table>\n    <Title>{title}</Title>\n    <Header>\n      {columns?.map((column) => (\n        <Column key={column.key || column.type} style={{ width: column.width }}>\n          {column.name}\n        </Column>\n      ))}\n    </Header>\n\n    {data?.map((record, i) => (\n      <Row key={i}>\n        {columns?.map((column) => (\n          <Cell\n            key={column.key || column.type}\n            className={specialTotal.includes(column.key) && \"special-key\"}\n            style={{\n              width: column.width,\n              textAlign: column.type === \"button\" ? \"right\" : \"left\",\n            }}\n          >\n            {column.type === \"name\" && renderAssetName(record)}\n            {column.type === \"button\" && (\n              <Buttons>\n                {buttons?.map((button, j) => (\n                  <Flex key={j}>\n                    <Widget\n                      src=\"bluebiu.near/widget/0vix.LendingTableButton\"\n                      props={{\n                        onClick: () => {\n                          onButtonClick?.(record.address, button.text);\n                        },\n                        text: button.text,\n                        isPrimary: button.isPrimary,\n                      }}\n                    />\n                    {buttons.length > 1 && j !== buttons.length - 1 && (\n                      <Spacer />\n                    )}\n                  </Flex>\n                ))}\n              </Buttons>\n            )}\n            {![\"name\", \"button\"].includes(column.type) && (\n              <NormalCell>\n                <div className=\"column-name\">{column.name}</div>\n                <div className=\"row-value\">\n                  {column.type === \"total\" && renderTotal(record, column.key)}\n                  {column.type === \"apy\" && renderApy(record)}\n                  {column.type === \"collateral\" && renderCollateral(record)}\n                  {![\"total\", \"apy\", \"collateral\"].includes(column.type) &&\n                    record[column.key]}\n                </div>\n              </NormalCell>\n            )}\n          </Cell>\n        ))}\n      </Row>\n    ))}\n  </Table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/0vix.LendingTable", "fact_widget_deployments_id": "57b19614f42c33e9be5fa200485c6eff", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}