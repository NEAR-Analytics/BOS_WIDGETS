{"tx_hash": "8uYzi4hwyPsj2M4CmBUKexjEwsmBQog5hsfA4wUnoBya", "action_id_social": "GXSq6CPZndjkyS272fixkTFk6MLAtGYsDZeB5spvVgB9-0-widget", "block_id": 100137608, "block_timestamp": "2023-09-01T07:03:45.668Z", "signer_id": "bluebiu.near", "widget_name": "0vix.LendingTable", "source_code": "const Table = styled.div`\n  width: 100%;\n  background-color: #181a27;\n  border: 1px solid #332c4b;\n  border-radius: 12px;\n`;\nconst Title = styled.div`\n  padding: 30px 30px 10px;\n  font-size: 18px;\n  font-weight: 700;\n  line-height: 22px;\n  color: #fff;\n`;\nconst Header = styled.div`\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 16.8px;\n  padding: 10px 30px;\n  display: flex;\n  color: #7c7f96;\n`;\nconst Column = styled.div``;\nconst Row = styled.div`\n  display: flex;\n  padding: 0px 30px;\n  transition: 0.5s;\n  height: 60px;\n  align-items: center;\n  &:last-child {\n    border-radius: 0px 0px 12px 12px;\n  }\n  &:hover {\n    background-color: rgba(53, 55, 73, 0.5);\n  }\n`;\nconst Asset = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst Logo = styled.img`\n  vertical-align: top;\n  width: 32px;\n  hight: 32px;\n  border-radius: 50%;\n  margin-right: 8px;\n`;\nconst Name = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n`;\nconst Cell = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n`;\nconst Total = styled.div`\n  color: #fff;\n  font-size: 16px;\n  font-weight: 500;\n`;\nconst TotalValue = styled.div`\n  color: #7c7f96;\n  font-size: 14px;\n  font-weight: 500;\n`;\nconst Buttons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\nconst Spacer = styled.div`\n  width: 10px;\n`;\nconst Flex = styled.div`\n  display: flex;\n`;\n\nconst { title, columns, data, buttons, onButtonClick } = props;\n\nconst formatTotal = (total) => {\n  const BTotal = Big(total);\n  if (BTotal.eq(0)) return \"0\";\n  if (BTotal.lt(0.01)) return \"<0.01\";\n  if (BTotal.lt(1e3)) return BTotal.toFixed(2);\n  if (BTotal.lt(1e6)) return BTotal.div(1e3).toFixed(2) + \"K\";\n  return BTotal.div(1e6).toFixed(2) + \"M\";\n};\n\nconst renderAssetName = (record) => {\n  return (\n    <Asset>\n      <Logo src={record.logo} />\n      <Name>{record.name}</Name>\n    </Asset>\n  );\n};\nconst renderTotal = (record, key) => {\n  return (\n    <div>\n      <Total>{formatTotal(record[key])}</Total>\n      <TotalValue>${formatTotal(record[`${key}_value`])}</TotalValue>\n    </div>\n  );\n};\nconst renderCollateral = (record) => {\n  return (\n    <Widget\n      src=\"bluebiu.near/widget/0vix.LendingCollateralButton\"\n      props={{\n        onChange: () => {\n          onButtonClick?.(\n            record.address,\n            record.isCollateral\n              ? \"Disable as Collateral\"\n              : \"Enable as Collateral\"\n          );\n        },\n        active: record.isCollateral,\n      }}\n    />\n  );\n};\n\nconst CELL_MAP = {\n  name: renderAssetName,\n  total: renderTotal,\n  collateral: renderCollateral,\n};\n\nreturn (\n  <Table>\n    <Title>{title}</Title>\n    <Header>\n      {columns?.map((column) => (\n        <Column key={column.key || column.type} style={{ width: column.width }}>\n          {column.name}\n        </Column>\n      ))}\n    </Header>\n    {data?.map((record, i) => (\n      <Row key={i}>\n        {columns?.map((column) => (\n          <Cell\n            key={column.key || column.type}\n            style={{\n              width: column.width,\n              textAlign: column.type === \"button\" ? \"right\" : \"left\",\n            }}\n          >\n            {column.type === \"button\" && (\n              <Buttons>\n                {buttons?.map((button, j) => (\n                  <Flex key={j}>\n                    <Widget\n                      src=\"bluebiu.near/widget/0vix.LendingTableButton\"\n                      props={{\n                        onClick: () => {\n                          onButtonClick?.(record.address, button.text);\n                        },\n                        text: button.text,\n                        isPrimary: button.isPrimary,\n                      }}\n                    />\n                    {buttons.length > 1 && j !== buttons.length - 1 && (\n                      <Spacer />\n                    )}\n                  </Flex>\n                ))}\n              </Buttons>\n            )}\n            {column.type !== \"button\" && CELL_MAP[column.type]\n              ? CELL_MAP[column.type](record, column.key)\n              : column.key === \"loanToValue\"\n              ? Number(record[column.key]).toFixed(2) + \"%\"\n              : record[column.key]}\n          </Cell>\n        ))}\n      </Row>\n    ))}\n  </Table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/0vix.LendingTable", "fact_widget_deployments_id": "bc5020fd2e2392f8c56a98a7f1a313e9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}