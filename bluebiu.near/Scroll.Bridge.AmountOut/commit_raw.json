{"tx_hash": "DfB1PnS6sXkL1qhV7qSf2FWKDExLk5mjg6uWWerYgLWv", "action_id_social": "72D89ZLy7bEQnBVYAbYSZV43qjvsuhspzFo1LPFLAiR3-0-widget", "block_id": 115633016, "block_timestamp": "2024-03-28T06:32:00.245Z", "signer_id": "bluebiu.near", "widget_name": "Scroll.Bridge.AmountOut", "source_code": "const { loading, amount, routerAddress, target, onLoad } = props;\n\nuseEffect(() => {\n    if (!loading) return\n\n    asyncFetch('https://api.orbiter.finance/sdk/routers/cross-chain')\n        .then(routerRes => {\n            const result = routerRes.body.result\n\n            let line = ''\n            if (target.dstId === 1) {\n                line = `534352/1-ETH/ETH`\n            } else {\n                line = `1/534352-ETH/ETH`\n            }\n\n            const quote = result.find(item => item.line === line)\n            if (!quote) {\n                onLoad({\n                    received: 0,\n                    gasCost: 0,\n                    errorTips: 'No route',\n                });\n                return\n            }\n            const minBig = new Big(quote.minAmt)\n            const maxBig = new Big(quote.maxAmt)\n            const amountBig = new Big(amount)\n            const feeBig = new Big(quote.withholdingFee).plus(new Big(quote.tradeFee).div(Math.pow(10, 18)))\n            if (amountBig.gte(maxBig) || amountBig.lte(minBig)) {\n                onLoad({\n                    received: 0,\n                    gasCost: 0,\n                    errorTips: 'Invalid amount',\n                });\n                return\n            }\n\n            console.log('quote: ', quote)\n\n            onLoad({\n                received: amountBig.minus(feeBig).toString(),\n                gasCost: feeBig.toString(),\n                quote\n            });\n        }).catch(e => {\n            onLoad({\n                received: 0,\n                gasCost: 0,\n                errorTips: 'Invalid amount',\n            });\n        })\n\n\n}, [loading])\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Scroll.Bridge.AmountOut", "fact_widget_deployments_id": "a8e5c844df6e20f27ecb18dabb41d353", "inserted_timestamp": "2024-03-28T07:28:50.057Z", "modified_timestamp": "2024-03-28T08:29:43.910Z", "__row_index": 0}