{"tx_hash": "7rtj6RNpv9MSjThFKJ6sMTFpoRdzinwTPeHiveoBWCGk", "action_id_social": "6iVwRhNQhMva86gwrX9HmXQWuJ7wW9f2nW2ksqJYVXoL-0-widget", "block_id": 112098136, "block_timestamp": "2024-02-04T16:25:51.073Z", "signer_id": "bluebiu.near", "widget_name": "AAVE.Card.AssetsToBorrow", "source_code": "const {\n  config,\n  assetsToBorrow,\n  chainId,\n  onActionSuccess,\n  showBorrowModal,\n  setShowBorrowModal,\n  yourSupplies,\n  borrowETHGas,\n  borrowERC20Gas,\n  formatHealthFactor,\n} = props;\n\nif (!assetsToBorrow) {\n  return <div />;\n}\n\nconst { debts, ...assetsToBorrowCommonParams } = assetsToBorrow;\n\nfunction isValid(a) {\n  if (!a) return false;\n  if (isNaN(Number(a))) return false;\n  if (a === \"\") return false;\n  return true;\n}\nState.init({\n  data: undefined,\n});\n\nconst BorrowButton = ({ data }) => (\n  <Widget\n    src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Borrow\",\n      onClick: () => {\n        State.update({ data });\n        setShowBorrowModal(true);\n      },\n    }}\n  />\n);\n\nconst showAlert = yourSupplies && yourSupplies.length === 0;\n\nconst AlertContainer = styled.div`\n  display: flex;\n  border-radius: 8px;\n  background: rgba(255, 0, 0, 0.12);\n\n  padding: 12px;\n  margin: 12px;\n\n  font-size: 12px;\n\n  @media (min-width: 640px) {\n    font-size: 16px;\n  }\n\n  img {\n    margin-right: 8px;\n    @media (min-width: 640px) {\n      margin-top: 4px;\n    }\n  }\n`;\nreturn (\n  <>\n    <Widget\n      src={`${config.ownerId}/widget/AAVE.Card.CardsView`}\n      props={{\n        config,\n        style: {\n          marginTop: \"16px\",\n        },\n        title: \"Assets to borrow\",\n        body: (\n          <>\n            {showAlert && (\n              <>\n                <Widget\n                  src={`${config.ownerId}/widget/AAVE.Card.Divider`}\n                  props={{ config }}\n                />\n                <AlertContainer>\n                  <img\n                    src={`${config.ipfsPrefix}/bafkreih3npgn6ydscd7mzjrxredamembxhlmdxnw5l4izpfru2rbucvdly`}\n                    width={16}\n                    height={16}\n                  />\n                  <div>\n                    To borrow you need to supply any asset to be used as\n                    collateral.\n                  </div>\n                </AlertContainer>\n              </>\n            )}\n            {!debts || debts.length === 0 ? (\n              <Widget\n                src={`${config.ownerId}/widget/AAVE.Card.CardEmpty`}\n                props={{\n                  config,\n                  children: \"Nothing borrowed yet\",\n                }}\n              />\n            ) : (\n              <>\n                {/* pc view */}\n                <Widget\n                  src={`${config.ownerId}/widget/AAVE.Card.CardsTable`}\n                  props={{\n                    config,\n                    headers: [\n                      \"Asset\",\n                      \"Available to borrow\",\n                      \"APY, variable\",\n                      \"\",\n                    ],\n                    data: debts.map((row) => {\n                      return [\n                        <Widget\n                          src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                          props={{\n                            children: [\n                              <img\n                                width={64}\n                                height={64}\n                                src={`https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`}\n                              />,\n                              <div>\n                                <div className=\"token-title\">{row.symbol}</div>\n                                <div className=\"token-chain\">{row.name}</div>\n                              </div>,\n                            ],\n                          }}\n                        />,\n                        <div>\n                          <div>{Number(row.availableBorrows).toFixed(7)}</div>\n                          <div>\n                            $ {Number(row.availableBorrowsUSD).toFixed(2)}\n                          </div>\n                        </div>,\n                        `${(Number(row.variableBorrowAPY) * 100).toFixed(2)} %`,\n                        <BorrowButton\n                          data={{\n                            ...row,\n                            ...assetsToBorrowCommonParams,\n                          }}\n                        />,\n                      ];\n                    }),\n                  }}\n                />\n              </>\n            )}\n          </>\n        ),\n      }}\n    />\n    {showBorrowModal && (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Modal.BorrowModal`}\n        props={{\n          config,\n          onRequestClose: () => setShowBorrowModal(false),\n          data: state.data,\n          onActionSuccess,\n          chainId,\n          borrowETHGas,\n          borrowERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/AAVE.Card.AssetsToBorrow", "fact_widget_deployments_id": "ee554536004982473bc0ce661886e9e6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}