{"tx_hash": "6JJuyU4DJ8PzFJX5uafbFUJZjphsUToHpqrS9SREnNyt", "action_id_social": "CABSL7udJ5KvN6EAUr2oHbC9ThQRG91wYA78m3aGJWVv-0-widget", "block_id": 107973489, "block_timestamp": "2023-12-15T03:10:23.420Z", "signer_id": "bluebiu.near", "widget_name": "Base.Bridge.Index", "source_code": "const Wrapper = styled.div`\n  width: 560px;\n  margin: 0px auto 0px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\nconst Panel = styled.div`\n  width: 100%;\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  background-color: var(--bg-color);\n  padding: 20px;\n`;\n\nconst account = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nconst { connectProps, chain, mainnet } = props;\n\nif (!account) {\n  return (\n    <Widget\n      src=\"bluebiu.near/widget/Arbitrum.Swap.ConnectButton\"\n      props={{\n        ...connectProps,\n        chainId: chain.id,\n        chainName: chain.name,\n        isWrongNetwork: false,\n      }}\n    />\n  );\n}\n\nuseEffect(() => {\n  State.init({\n    chainId: -1,\n    displayNetwork: true,\n    loaded: false,\n  });\n  Ethers.provider()\n    .getNetwork()\n    .then(({ chainId }) => {\n      State.update({\n        displayNetwork: ![chain.id, mainnet.id].includes(chainId),\n        chainId,\n        loaded: true,\n      });\n    })\n    .catch(() => {});\n}, []);\n\nconst { tokens, amountOutFn, handlerSwap } = props;\n\nconst handleStargateTx = ({ hash, amount, price, from, to, currency }) => {\n  const txs = Storage.privateGet(\"stargate_txs\") || {};\n  txs[hash] = {\n    amount,\n    symbol: currency.symbol,\n    price,\n    fromLogo: from.logo,\n    toLogo: to.logo,\n    time: Date.now(),\n    link: from.explorer + \"/tx/\" + hash,\n    hash: hash,\n    tokenLogo: currency.icon,\n    fromChainId: from.id,\n    toChainId: to.id,\n  };\n  Storage.privateSet(\"stargate_txs\", txs);\n};\n\nif (!state.loaded) return <div />;\n\nreturn (\n  <Wrapper>\n    <Panel>\n      <Widget\n        src=\"bluebiu.near/widget/Base.Bridge.Swap\"\n        props={{\n          chain,\n          mainnet,\n          tokens,\n          amountOutFn,\n          chainId: state.chainId,\n          handlerSwap,\n          addAction: props.addAction,\n          handleStargateTx,\n          showNetwrokDialog: (_chainId) => {\n            State.update({\n              currentChainId: _chainId,\n              displayNetwork: true,\n            });\n          },\n        }}\n      />\n    </Panel>\n    <Panel>\n      <Widget\n        src=\"bluebiu.near/widget/Base.Bridge.Transactions\"\n        props={{\n          txs: Storage.privateGet(\"stargate_txs\"),\n          chainId: state.chainId,\n          onDelete: (hash) => {\n            setTimeout(() => {\n              const txs = Storage.privateGet(\"stargate_txs\") || {};\n              delete txs[hash];\n              Storage.privateSet(\"stargate_txs\", txs);\n            }, 10000);\n          },\n        }}\n      />\n    </Panel>\n    <Widget\n      src=\"bluebiu.near/widget/Base.Bridge.NetwrokDialog\"\n      props={{\n        chain,\n        mainnet,\n        display: state.displayNetwork,\n        currentChainId: state.currentChainId,\n        onClose: () => {\n          State.update({\n            displayNetwork: false,\n          });\n        },\n      }}\n    />\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Base.Bridge.Index", "fact_widget_deployments_id": "8346f5b2766747dbffab5b2d8961b46f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}