{"tx_hash": "F8drKgEnKnP2YJrPY4UE3RWgVJcAqB4xAanpSnqtsUPu", "action_id_social": "CAF4cdSXqf8b1hb4tFK3wcS2rF2deFYTfKX4gNwQBCfU-0-widget", "block_id": 116449806, "block_timestamp": "2024-04-09T06:59:19.129Z", "signer_id": "bluebiu.near", "widget_name": "AAVE.Card.RewardsTable", "source_code": "const RewardsTable = styled.div`\n  background-color: rgba(53, 55, 73, 0.2);\n  margin-top: 10px;\n  border-radius: 6px;\n`;\nconst Title = styled.div`\n  padding: 10px 20px;\n  font-size: 16px;\n  font-weight: 400;\n  color: #fff;\n`;\n\nconst NoReward = styled.div`\n  margin: 0 auto;\n  padding-bottom: 28px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  gap: 12px;\n`;\n\nState.init({\n  loading: false,\n  dapp: null,\n  record: null,\n});\n\nconst {\n  data,\n  dapps,\n  toast,\n  account,\n  onSuccess,\n  markets,\n  rewardAddress,\n  config,\n} = props;\n\nconst columns = [\n  {\n    type: \"name\",\n    width: \"30%\",\n    name: \"Reward Asset\",\n  },\n  {\n    type: \"total\",\n    key: \"unclaimed\",\n    width: \"25%\",\n    name: \"Rewards\",\n  },\n  { type: \"button\", width: \"20%\" },\n];\n\nreturn (\n  <>\n    <RewardsTable>\n      <Title>Your Earns</Title>\n\n      {data && data.length && data.find((item) => item.unclaimed) ? (\n        <Widget\n          src={`${config.ownerId}/widget/AAVE.Card.CardsTable`}\n          props={{\n            config,\n            headers: [\"Reward Asset\", \"Rewards\", \"\"],\n            data: data.map((row) => {\n              return [\n                `${row.symbol}`,\n                <div>\n                  {\" \"}\n                  {row.unclaimed ? Number(row.unclaimed).toFixed(2) : \"-\"}\n                </div>,\n                <Widget\n                  src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n                  props={{\n                    config,\n                    theme,\n                    loading:\n                      row.symbol === state.dapp.symbol && state.loading\n                        ? true\n                        : false,\n                    children: \"Claim\",\n                    onClick: (record) => {\n                      const toastId = toast?.loading({\n                        title: `Claiming rewards...`,\n                      });\n\n                      State.update({\n                        dapp: dapps,\n                        loading: true,\n                        toastId,\n                      });\n                    },\n                  }}\n                />,\n              ];\n            }),\n          }}\n        />\n      ) : (\n        <NoReward>\n          <div>You don't have unclaimed rewards</div>\n          <div\n            style={{\n              fontSize: \"18px\",\n            }}\n          >\n            $0.00\n          </div>\n        </NoReward>\n      )}\n    </RewardsTable>\n    {state.loading && state.dapp && (\n      <Widget\n        src={dapps.handlerClaim}\n        props={{\n          markets,\n          rewardAddress,\n          loading: state.loading,\n          account,\n          onSuccess: (res) => {\n            toast?.dismiss(state.toastId);\n            State.update({ loading: false });\n            toast?.success({ title: \"Claimed successfully!\" });\n            onSuccess?.();\n          },\n          onError: (err) => {\n            toast?.dismiss(state.toastId);\n            State.update({ loading: false });\n            toast?.fail({\n              title: err?.message?.includes(\"user rejected transaction\")\n                ? \"User rejected transaction\"\n                : `Claimed faily!`,\n              chainId,\n            });\n          },\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/AAVE.Card.RewardsTable", "fact_widget_deployments_id": "4aca9de71ac814d518e703c34884c002", "inserted_timestamp": "2024-04-09T08:33:37.237Z", "modified_timestamp": "2024-04-09T08:33:37.237Z", "__row_index": 4}