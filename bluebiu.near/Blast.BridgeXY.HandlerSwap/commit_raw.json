{"tx_hash": "BPW8kHyP29FofAgKWLAfuuFjwpGW1GWcgH4tDBpePtxa", "action_id_social": "5gauFAFFN7oCtDfHpDWQmrPrQnd8BwzvdF8cGYZc36nN-0-widget", "block_id": 118418775, "block_timestamp": "2024-05-07T06:48:16.492Z", "signer_id": "bluebiu.near", "widget_name": "Blast.BridgeXY.HandlerSwap", "source_code": "const {\n  amount,\n  account,\n  currency,\n  routerAddress,\n  routerEthAddress,\n  target,\n  loading,\n  onSuccess,\n  onError,\n  quote,\n} = props;\n\n\nconst BASE_API = 'https://open-api.xy.finance/v1'\nfunction buildSwap() {\n  return asyncFetch(`${BASE_API}/swap?srcChainId=${quote.srcChainId}&fromTokenAddress=${quote.fromTokenAddress}&amount=${quote.fromTokenAmount}&destChainId=${quote.destChainId}&toTokenAddress=${quote.toTokenAddress}&slippage=1&referrer=0x6F78C36F8a645509744250B127646ABE4150103b&receiveAddress=${account}`).then(res => {\n    const { body } = res\n    if (body.tx) {\n      return body.tx\n    }\n  })\n}\n\nif (!loading) return \"\";\n\nconst signer = Ethers.provider().getSigner()\nbuildSwap().then(params => {\n  console.log('params:', params)\n  if (params) {\n    \n    signer.sendTransaction({\n      ...params,\n      value: params.value.toString()\n      // gasLimit: 11111192000\n    })\n      .then((tx) => {\n        console.log(tx)\n        tx.wait()\n          .then((res) => {\n            onSuccess(res);\n          })\n          .catch((err) => {\n            onError(tx);\n          });\n      })\n      .catch((err) => {\n        console.log(err)\n        onError(err);\n      });\n  } else {\n    onError(\"Swap Failed\")\n  }\n})\n\n\n\nreturn \"\";", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Blast.BridgeXY.HandlerSwap", "fact_widget_deployments_id": "0e2d14c6ae0b8cc1af18bb44c0526dc1", "inserted_timestamp": "2024-05-07T08:39:36.481Z", "modified_timestamp": "2024-05-07T08:39:36.481Z", "__row_index": 0}