{"tx_hash": "B4WCYhsHWV9ShNoHBqhbwCKDRCSNWMbQneHgyhCGVTvQ", "action_id_social": "8JV6Wa9gBksqBWu6nBtw998b7sCtG92h34BKR91HPdGi-0-widget", "block_id": 117946589, "block_timestamp": "2024-04-30T11:08:52.592Z", "signer_id": "bluebiu.near", "widget_name": "Lending.Orbit.Content", "source_code": "const StyledContainer = styled.div`\n  padding-top: 18px;\n`;\n\nconst {\n  dexConfig,\n  wethAddress,\n  multicallAddress,\n  chainIdNotSupport,\n  multicall,\n  prices,\n  account,\n  addAction,\n  toast,\n  chainId,\n  nativeCurrency,\n  tab,\n  orbitTab,\n  switchToMarkets,\n} = props;\n// console.log(\"CONTENT--\", props);\nuseEffect(() => {\n  State.update({\n    loading: !chainIdNotSupport,\n  });\n}, [chainIdNotSupport]);\n\nuseEffect(() => {\n  // if (tab !== \"markets\") {\n  //   switchToMarkets();\n  // }\n  State.update({\n    loading: true,\n  });\n}, [orbitTab]);\n\nconst handleTableButtonClick = (address, actionText) => {\n  const market = state.markets[address];\n  const dapp = {\n    userTotalSupplyUsd: state.userTotalSupplyUsd,\n    userTotalBorrowUsd: state.userTotalBorrowUsd,\n    totalCollateralUsd: state.totalCollateralUsd,\n    rewards: state.rewards,\n    dappIcon: dexConfig.icon,\n    dappName: dexConfig.name,\n  };\n\n  State.update({\n    tableButtonClickData: {\n      ...dapp,\n      ...market,\n      config: { ...dexConfig, wethAddress },\n      actionText,\n    },\n    showDialog: true,\n  });\n};\n\nreturn (\n  <StyledContainer>\n    {tab === \"market\" && (\n      <Widget\n        src=\"bluebiu.near/widget/Lending.Orbit.Markets\"\n        props={{\n          markets: state.markets,\n          totalCollateralUsd: state.totalCollateralUsd,\n          userTotalBorrowUsd: state.userTotalBorrowUsd,\n          borrowLimit: state.borrowLimitUsd,\n          userTotalSupplyUsd: state.userTotalSupplyUsd,\n          addAction,\n          toast,\n          chainId,\n          nativeCurrency,\n          dexConfig,\n          account,\n          prices,\n          orbitTab,\n          onSuccess: () => {\n            State.update({\n              loading: true,\n            });\n          },\n        }}\n      />\n    )}\n    {tab === \"yours\" ? (\n      <Widget\n        src=\"bluebiu.near/widget/Lending.Orbit.Yours\"\n        props={{\n          prices,\n          orbitTab,\n          currentDapp: dexConfig.name,\n          markets: state.markets,\n          timestamp: state.timestamp,\n          borrowLimit: state.borrowLimitUsd,\n          dapps: {\n            [dexConfig.name]: {\n              userTotalSupplyUsd: state.userTotalSupplyUsd,\n              userTotalBorrowUsd: state.userTotalBorrowUsd,\n              totalCollateralUsd: state.totalCollateralUsd,\n              rewards: state.rewards,\n              dappIcon: dexConfig.icon,\n              dappName: dexConfig.name,\n            },\n          },\n          dappsConfig: {\n            [dexConfig.name]: dexConfig,\n          },\n          toast,\n          account,\n          onButtonClick: handleTableButtonClick,\n          onSuccess: () => {\n            State.update({\n              loading: true,\n            });\n          },\n        }}\n      />\n    ) : null}\n    {state.loading && <Widget src=\"bluebiu.near/widget/Lending.Spinner\" />}\n    <Widget\n      src={dexConfig.data}\n      props={{\n        update: state.loading,\n        account,\n        wethAddress,\n        multicallAddress,\n        multicall,\n        prices,\n        ...dexConfig,\n        orbitTab,\n        onLoad: (data) => {\n          console.log(\"DATA_onLoad:\", data);\n          State.update({\n            loading: false,\n            timestamp: Date.now(),\n            ...data,\n          });\n        },\n      }}\n    />\n    <Widget\n      src=\"bluebiu.near/widget/Lending.Orbit.Dialog\"\n      props={{\n        display: state.showDialog,\n        data: state.tableButtonClickData,\n        chainId,\n        addAction,\n        toast,\n        source: \"dapp\",\n        account,\n        orbitTab,\n        onClose: () => {\n          State.update({\n            showDialog: false,\n          });\n        },\n        onSuccess: () => {\n          State.update({\n            loading: true,\n          });\n        },\n      }}\n    />\n  </StyledContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Lending.Orbit.Content", "fact_widget_deployments_id": "c4f34037e91a3f02fa3e73a8239ecfcd", "inserted_timestamp": "2024-04-30T12:47:49.607Z", "modified_timestamp": "2024-04-30T12:47:49.607Z", "__row_index": 5}