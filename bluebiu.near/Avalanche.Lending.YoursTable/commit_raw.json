{"tx_hash": "D1rnLjKAp3qtRMX6ADJMsfVGWdUfZAePjFcGRPwi15ih", "action_id_social": "FERZeSVsXDvDzMxKaj9pSQS27gnGvk2rxd33WyddUwD6-0-widget", "block_id": 114571854, "block_timestamp": "2024-03-12T13:46:59.194Z", "signer_id": "bluebiu.near", "widget_name": "Avalanche.Lending.YoursTable", "source_code": "const Table = styled.div``;\nconst Header = styled.div`\n  font-size: 14px;\n  font-weight: 400;\n  padding: 10px 20px 0px;\n  display: flex;\n  color: #7c7f96;\n  @media (max-width: 640px) {\n    display: none;\n  }\n`;\nconst Body = styled.div`\n  min-height: 50px;\n`;\nconst Column = styled.div``;\nconst Row = styled.div`\n  display: flex;\n  padding: 0px 20px;\n  transition: 0.5s;\n  height: 56px;\n  align-items: center;\n  &:last-child {\n    border-radius: 0px 0px 12px 12px;\n  }\n  &:hover {\n    background-color: rgba(53, 55, 73, 0.5);\n  }\n  @media (max-width: 640px) {\n    background-color: #181a27;\n    border: 1px solid #332c4b;\n    border-radius: 10px;\n    flex-direction: column;\n    height: auto;\n    padding: 20px 0px;\n    margin-top: 10px;\n    .special-key {\n      display: none;\n    }\n\n    &:last-child {\n      border-radius: 10px;\n    }\n  }\n`;\nconst RowHeader = styled.div`\n  display: flex;\n  @media (max-width: 640px) {\n    justify-content: space-between;\n    padding: 0px 20px 10px;\n    border-bottom: 1px solid #2e3145;\n  }\n  @media (min-width: 640px) {\n    .special-total {\n      display: none;\n    }\n  }\n`;\nconst NormalCell = styled.div`\n  display: flex;\n  align-items: center;\n  .column-name {\n    display: none;\n    color: #7c7f96;\n    font-size: 13px;\n  }\n  @media (max-width: 640px) {\n    justify-content: space-between;\n    padding: 10px 20px 5px;\n    align-items: flex-start;\n    .column-name {\n      display: block;\n    }\n    .row-value {\n      color: #fff;\n      font-size: 15px;\n    }\n  }\n`;\nconst Cell = styled.div`\n  color: #fff;\n  font-size: 14px;\n  font-weight: 400;\n  @media (max-width: 640px) {\n    width: 100% !important;\n    &:first-child {\n      margin-bottom: 10px;\n    }\n  }\n`;\nconst Total = styled.div`\n  color: #fff;\n  font-size: 14px;\n  font-weight: 400;\n  @media (max-width: 640px) {\n    text-align: right;\n  }\n`;\nconst TotalValue = styled.div`\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 12px;\n  font-weight: 400;\n  @media (max-width: 640px) {\n    text-align: right;\n  }\n`;\nconst Buttons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  @media (max-width: 640px) {\n    justify-content: center;\n    width: 100%;\n    padding: 10px 20px 0px;\n  }\n`;\nconst Empty = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  font-weight: 400;\n  color: #7c7f96;\n  min-height: 50px;\n`;\nconst RewardApyItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\nconst RewardIcon = styled.img`\n  width: 14px;\n  height: 14px;\n`;\nconst RewardApy = styled.div`\n  font-weight: 400;\n  line-height: 14px;\n  color: rgba(255, 255, 255, 0.5);\n`;\n\nconst { columns, data, buttons, totalReverse, emptyTips, type, onButtonClick } =\n  props;\n\nconst renderTotal = (record, key, isSpecialKey) => {\n  return (\n    <div className={`${isSpecialKey && \"special-total\"}`}>\n      <Total>\n        <Widget\n          src=\"bluebiu.near/widget/Avalanche.Lending.Total\"\n          props={{\n            total: totalReverse ? record[key] : record[`${key}_value`],\n            digit: 2,\n            unit: totalReverse ? \"\" : \"$\",\n          }}\n        />\n      </Total>\n      <TotalValue>\n        <Widget\n          src=\"bluebiu.near/widget/Avalanche.Lending.Total\"\n          props={{\n            total: totalReverse ? record[`${key}_value`] : record[key],\n            digit: 2,\n            unit: totalReverse ? \"$\" : \"\",\n          }}\n        />\n      </TotalValue>\n    </div>\n  );\n};\nconst renderAssetName = (market) => {\n  return (\n    <RowHeader>\n      <Widget\n        src=\"bluebiu.near/widget/Avalanche.Lending.Asset\"\n        props={{\n          icon: market.icon,\n          symbol: market.symbol,\n          dappIcon: market.dappIcon,\n          dappName: market.dappName,\n        }}\n      />\n    </RowHeader>\n  );\n};\n\nconst renderCollateral = (record) => {\n  return (\n    <Widget\n      src=\"bluebiu.near/widget/Avalanche.Lending.Switch\"\n      props={{\n        onChange: () => {\n          console.log(\"--------\", record);\n          if (record.isCollateral === undefined) return;\n\n          // if (dappName === \"Valas Finance\") {\n          //   onButtonClick?.(record.address, record.isCollateral ? false : true);\n          // } else {\n          onButtonClick?.(\n            record.address,\n            record.isCollateral\n              ? \"Disable as Collateral\"\n              : \"Enable as Collateral\"\n          );\n          // }\n        },\n        active: record.isCollateral === undefined ? true : record.isCollateral,\n      }}\n    />\n  );\n};\nconst renderApy = (record) => {\n  return (\n    <>\n      <div className=\"apy\">{record.apy}</div>\n      {record.distributionApy &&\n        record.distributionApy\n          .filter((reward) => {\n            const apy = (\n              type === \"deposit\" ? reward.supply : reward.borrow\n            ).slice(0, -1);\n            return !!Number(apy);\n          })\n          .map((reward, index) => {\n            return (\n              <RewardApyItem key={index}>\n                <RewardIcon src={reward.icon} />\n                <RewardApy>\n                  {type === \"deposit\" ? reward.supply : reward.borrow} APR\n                </RewardApy>\n              </RewardApyItem>\n            );\n          })}\n    </>\n  );\n};\n\nreturn (\n  <Table>\n    <Header>\n      {columns?.map((column) => (\n        <Column key={column.key || column.type} style={{ width: column.width }}>\n          {column.name}\n        </Column>\n      ))}\n    </Header>\n    <Body>\n      {data?.map((record) => (\n        <Row key={record.address || Date.now() + Math.random()}>\n          {columns?.map((column) => (\n            <Cell\n              key={column.key || column.type}\n              style={{\n                width: column.width,\n                textAlign: column.type === \"button\" ? \"right\" : \"left\",\n              }}\n            >\n              {column.type === \"name\" && renderAssetName(record)}\n              {column.type === \"button\" && (\n                <Buttons>\n                  {buttons?.map((button, j) => (\n                    <Widget\n                      src=\"bluebiu.near/widget/Avalanche.Lending.TableButton\"\n                      key={j}\n                      props={{\n                        onClick: () => {\n                          if (button.text === \"Claim\") {\n                            onButtonClick?.(record);\n                          } else {\n                            onButtonClick?.(record.address, button.text);\n                          }\n                        },\n                        text: button.text,\n                        loading:\n                          typeof button.loading === \"function\"\n                            ? button.loading(record)\n                            : button.loading,\n                      }}\n                    />\n                  ))}\n                </Buttons>\n              )}\n              {![\"name\", \"button\"].includes(column.type) && (\n                <NormalCell>\n                  <div className=\"column-name\">{column.name}</div>\n                  <div className=\"row-value\">\n                    {column.type === \"total\" && renderTotal(record, column.key)}\n                    {column.type === \"apy\" && renderApy(record)}\n                    {column.type === \"collateral\" && renderCollateral(record)}\n                    {![\"total\", \"apy\", \"collateral\"].includes(column.type) &&\n                      record[column.key]}\n                  </div>\n                </NormalCell>\n              )}\n            </Cell>\n          ))}\n        </Row>\n      ))}\n      {(data?.length === 0 || !data) && <Empty>{emptyTips}</Empty>}\n    </Body>\n  </Table>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Avalanche.Lending.YoursTable", "fact_widget_deployments_id": "ba3b771c98bda8501c9da229a8c5f356", "inserted_timestamp": "2024-03-12T16:30:13.632Z", "modified_timestamp": "2024-03-12T16:30:13.632Z", "__row_index": 7}