{"tx_hash": "AvVxey5cpTe5c1ShDGysQ9cJB3jUaix4kSZphUd8papz", "action_id_social": "J348BrbcBATJ5dpNexuqrQBf6iKiRV4r5yStkUSyS3zc-0-widget", "block_id": 119550150, "block_timestamp": "2024-05-23T08:11:27.973Z", "signer_id": "bluebiu.near", "widget_name": "Lending.Markets", "source_code": "const StyledContainer = styled.div``;\n\nconst COLUMNS = [\n  {\n    key: \"asset\",\n    label: \"Asset\",\n    width: \"30%\",\n  },\n  {\n    key: \"totalSupply\",\n    label: \"Total supplied\",\n    width: \"14%\",\n    type: \"amount\",\n  },\n  {\n    key: \"supplyApy\",\n    label: \"Supply APY\",\n    width: \"12%\",\n    type: \"apy\",\n  },\n  {\n    key: \"totalBorrows\",\n    label: \"Total borrowed\",\n    width: \"15%\",\n    type: \"amount\",\n  },\n  {\n    key: \"borrowApy\",\n    label: \"Borrow APY\",\n    width: \"12%\",\n    type: \"apy\",\n  },\n  {\n    key: \"liquidity\",\n    label: \"Liquidity\",\n    width: \"15%\",\n    type: \"amount\",\n  },\n  {\n    key: \"handler\",\n    width: \"2%\",\n  },\n];\n\nconst data = Object.values(props.markets || {});\n\nconst {\n  userTotalCollateralUsd,\n  totalCollateralUsd,\n  userTotalBorrowUsd,\n  addAction,\n  toast,\n  chainId,\n  nativeCurrency,\n  dexConfig,\n  onSuccess,\n  account,\n  prices,\n} = props;\n\nuseEffect(() => {\n  if (!totalCollateralUsd && !userTotalBorrowUsd) {\n    return;\n  }\n  State.update({\n    borrowLimit: Big(totalCollateralUsd || 0)\n      .minus(userTotalBorrowUsd || 0)\n      .toString(),\n  });\n}, [totalCollateralUsd, userTotalBorrowUsd]);\n\nreturn (\n  <StyledContainer>\n    <Widget\n      src=\"bluebiu.near/widget/Lending.MarketHeader\"\n      props={{\n        columns: COLUMNS,\n      }}\n    />\n    {data.map((record) => (\n      <Widget\n        key={record.address}\n        src=\"bluebiu.near/widget/Lending.MarketRow\"\n        props={{\n          columns: COLUMNS,\n          data: record,\n          borrowLimit: state.borrowLimit,\n          addAction,\n          toast,\n          chainId,\n          nativeCurrency,\n          dexConfig,\n          onSuccess,\n          account,\n          prices,\n          totalCollateralUsd,\n          userTotalBorrowUsd,\n          userTotalCollateralUsd,\n        }}\n      />\n    ))}\n  </StyledContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Lending.Markets", "fact_widget_deployments_id": "075ac771a5e2f02737420e49a9d05cff", "inserted_timestamp": "2024-05-23T09:50:20.397Z", "modified_timestamp": "2024-05-23T09:50:20.397Z", "__row_index": 0}