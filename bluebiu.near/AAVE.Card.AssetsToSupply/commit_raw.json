{"tx_hash": "APYH1FmWcL9SpFqNjPD1B62jcPQwTZ3R4V1XZwAb3ZMV", "action_id_social": "BGqPYwfu8c22uUCzax5pwUpGsWVJh7egAeXgLQxCBaMp-0-widget", "block_id": 115392436, "block_timestamp": "2024-03-24T19:35:13.737Z", "signer_id": "bluebiu.near", "widget_name": "AAVE.Card.AssetsToSupply", "source_code": "const {\n  config,\n  assetsToSupply,\n  showSupplyModal,\n  setShowSupplyModal,\n  onActionSuccess,\n  chainId,\n  healthFactor,\n  formatHealthFactor,\n  depositETHGas,\n  depositERC20Gas,\n  theme,\n\n  yourSupplies,\n  borrowETHGas,\n  borrowERC20Gas,\n} = props;\n\nState.init({\n  data: undefined,\n  showBorrowModal: false,\n});\n\nconst SupplyButton = ({ data, ...rest }) => {\n  return (\n    <Widget\n      src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n      props={{\n        config,\n        // width: 148,\n        theme,\n        children: \"Supply\",\n        disabled: Number(data.balanceInUSD) === 0,\n        onClick: () => {\n          State.update({ data });\n          setShowSupplyModal(true);\n        },\n      }}\n    />\n  );\n};\n\nconst BorrowButton = ({ data }) => (\n  <Widget\n    src={`${config.ownerId}/widget/AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Borrow\",\n      theme,\n      onClick: () => {\n        State.update({ data, showBorrowModal: true });\n        // setShowBorrowModal(true);\n      },\n    }}\n  />\n);\n\nreturn (\n  <>\n    <Widget\n      src={`${config.ownerId}/widget/AAVE.Card.CardsView`}\n      props={{\n        config,\n        style: {\n          marginTop: \"16px\",\n        },\n        title: \"Market\",\n        body:\n          !assetsToSupply || assetsToSupply.length === 0 ? (\n            <Widget\n              src={`${config.ownerId}/widget/AAVE.Card.CardEmpty`}\n              props={{\n                config,\n                children: \"Nothing supplied yet\",\n              }}\n            />\n          ) : (\n            <>\n              <Widget\n                src={`${config.ownerId}/widget/AAVE.Card.CardsTable`}\n                props={{\n                  config,\n                  headers: [\n                    \"Asset\",\n                    \"Wallet Balance\",\n                    \"Supply APY\",\n                    \"Available to borrow\",\n                    \"Borrow APY\",\n                    \"Can be Collateral\",\n                    \"\",\n                  ],\n                  data: assetsToSupply.map((row) => [\n                    <Widget\n                      src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                      props={{\n                        children: [\n                          <img width={64} height={64} src={row.icon} />,\n                          <div>\n                            <div className=\"token-title\">{row.symbol}</div>\n                            <div className=\"token-chain\">{row.name}</div>\n                          </div>,\n                        ],\n                      }}\n                    />,\n                    <div>\n                      <div>{Number(row.balance).toFixed(7)}</div>\n                      <div>$ {row.balanceInUSD}</div>\n                    </div>,\n                    `${(Number(row.supplyAPY) * 100).toFixed(2)} %`,\n\n                    <div>\n                      <div>{Number(row.availableBorrows).toFixed(7)}</div>\n                      <div>$ {row.availableBorrowsUSD}</div>\n                    </div>,\n\n                    `${(Number(row.variableBorrowAPY) * 100).toFixed(2)} %`,\n                    <div style={{ paddingLeft: \"50px\" }}>\n                      {(row.isIsolated ||\n                        (!row.isIsolated && !row.usageAsCollateralEnabled)) &&\n                        \"\u2014\"}\n                      {!row.isIsolated && row.usageAsCollateralEnabled && (\n                        <img\n                          src={`${config.ipfsPrefix}/bafkreibsy5fzn67veowyalveo6t34rnqvktmok2zutdsp4f5slem3grc3i`}\n                          width={16}\n                          height={16}\n                        />\n                      )}\n                    </div>,\n                    <div style={{ display: \"flex\", gap: 10 }}>\n                      <SupplyButton data={row} />\n                      <BorrowButton\n                        data={{\n                          ...row,\n                        }}\n                      />\n                    </div>,\n                  ]),\n                }}\n              />\n            </>\n          ),\n      }}\n    />\n    {showSupplyModal && (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Modal.SupplyModal`}\n        props={{\n          config,\n          theme,\n          onRequestClose: () => setShowSupplyModal(false),\n          data: {\n            ...state.data,\n            healthFactor,\n          },\n          onActionSuccess,\n          chainId,\n          depositETHGas,\n          depositERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n    {state.showBorrowModal && (\n      <Widget\n        src={`${config.ownerId}/widget/AAVE.Modal.BorrowModal`}\n        props={{\n          config,\n          theme,\n          onRequestClose: () => {\n            State.update({\n              showBorrowModal: false,\n            });\n            // setShowBorrowModal(false)\n          },\n          data: {\n            ...state.data,\n            healthFactor,\n          },\n          onActionSuccess,\n          chainId,\n          borrowETHGas,\n          borrowERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/AAVE.Card.AssetsToSupply", "fact_widget_deployments_id": "870e1dc94a484bd61ecc9f43a35a11f6", "inserted_timestamp": "2024-03-24T21:26:43.760Z", "modified_timestamp": "2024-03-24T21:26:43.760Z", "__row_index": 5}