{"tx_hash": "9XSjj9HjYfwK4WRsGUporrHTCZfNKH6g1BqwyKubcEAH", "action_id_social": "54vj6RheANsjnw6aU7DJ8n3uXWeTwvbm8tJuBZgkQa2v-0-widget", "block_id": 114617464, "block_timestamp": "2024-03-13T08:29:48.197Z", "signer_id": "bluebiu.near", "widget_name": "Avalanche.Lending.RewardsTable", "source_code": "const RewardsTable = styled.div`\n  background-color: rgba(53, 55, 73, 0.2);\n  margin-top: 10px;\n  border-radius: 6px;\n`;\nconst Title = styled.div`\n  padding: 10px 20px;\n  font-size: 16px;\n  font-weight: 400;\n  color: #fff;\n`;\n\nconst NoReward = styled.div`\n  margin: 28px auto;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  gap: 12px;\n`;\n\nState.init({\n  loading: false,\n  dapp: null,\n  record: null,\n});\n\nconst { dapps, toast, onSuccess } = props;\n\nconst columns =\n  Object.keys(dapps)[0] === \"Valas Finance\"\n    ? [\n        {\n          type: \"name\",\n          width: \"30%\",\n          name: \"Reward Asset\",\n        },\n        {\n          type: \"total\",\n          key: \"rewards\",\n          width: \"25%\",\n          name: \"Rewards\",\n        },\n        { type: \"button\", width: \"20%\" },\n      ]\n    : [\n        {\n          type: \"name\",\n          width: \"30%\",\n          name: \"Reward Asset\",\n        },\n        {\n          type: \"total\",\n          key: \"dailyReward\",\n          width: \"25%\",\n          name: \"Daily Rewards\",\n        },\n        {\n          type: \"total\",\n          key: \"unclaimed\",\n          width: \"25%\",\n          name: \"Unclaimed\",\n        },\n        { type: \"button\", width: \"20%\" },\n      ];\nreturn (\n  <>\n    <RewardsTable>\n      <Title>Your Earns</Title>\n      <Widget\n        src=\"bluebiu.near/widget/Avalanche.Lending.YoursTable\"\n        props={{\n          totalReverse: true,\n          columns,\n          emptyTips: (\n            <NoReward>\n              <div>You don't have unclaimed rewards</div>\n              <div\n                style={{\n                  fontSize: \"18px\",\n                }}\n              >\n                $0.00\n              </div>\n            </NoReward>\n          ),\n\n          data: props.data,\n          buttons: [\n            {\n              text: \"Claim\",\n              loading: (record) =>\n                record.symbol === state.record.symbol && state.loading\n                  ? true\n                  : false,\n            },\n          ],\n          onButtonClick: (record) => {\n            const toastId = toast?.loading({\n              title: `Claiming rewards...`,\n            });\n            State.update({\n              dapp: dapps[record.dappName],\n              market: record,\n              loading: true,\n              toastId,\n            });\n          },\n        }}\n      />\n    </RewardsTable>\n    {state.loading && state.dapp && (\n      <Widget\n        src={state.dapp.handlerClaim}\n        props={{\n          loading: state.loading,\n          market: state.market,\n          dapp: state.dapp,\n          record: state.market,\n          onSuccess: (res) => {\n            toast?.dismiss(state.toastId);\n            State.update({ loading: false });\n            toast?.success({ title: \"Claimed successfully!\" });\n            onSuccess?.(state.dapp.name);\n          },\n          onError: (err) => {\n            toast?.dismiss(state.toastId);\n            State.update({ loading: false });\n            toast?.fail({\n              title: err?.message?.includes(\"user rejected transaction\")\n                ? \"User rejected transaction\"\n                : `Claimed faily!`,\n              chainId,\n            });\n          },\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluebiu.near/widget/Avalanche.Lending.RewardsTable", "fact_widget_deployments_id": "c407ed85c119bdb1cfea33f9606a0bc6", "inserted_timestamp": "2024-03-13T09:29:51.719Z", "modified_timestamp": "2024-03-13T10:29:15.420Z", "__row_index": 2}