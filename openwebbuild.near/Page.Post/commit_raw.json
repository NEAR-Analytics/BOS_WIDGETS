{"tx_hash": "26czgfRLSvETfbuKXTYmYJr2pYq7LEPTTZe7PesBXHk4", "action_id_social": "5tfxEtySnFAmLkuZcYR4k8u9hSi171aLv2namztoYBmt-0-widget", "block_id": 103866430, "block_timestamp": "2023-10-21T08:25:50.364Z", "signer_id": "openwebbuild.near", "widget_name": "Page.Post", "source_code": "// config\nfunction getConfig(network) {\n  switch (network) {\n    case \"mainnet\":\n      return {\n        ownerId: \"openwebbuild.near\",\n        discoveryAccountId: \"near\",\n      };\n    case \"testnet\":\n      return {\n        ownerId: \"openwebbuild.testnet\",\n        discoveryAccountId: \"one.testnet\",\n      };\n    default:\n      throw Error(`Unconfigured environment '${network}'.`);\n  }\n}\nconst config = getConfig(context.networkId);\n\nconst accountId = props.accountId;\nconst commentBlockHeight = parseInt(props.commentBlockHeight);\nlet parentPost = null;\n\nconst extractParentPost = (item) => {\n  if (!item || item.type !== \"social\" || !item.path || !item.blockHeight) {\n    return undefined;\n  }\n  const accountId = item.path.split(\"/\")[0];\n  return `${accountId}/post/main` === item.path\n    ? { accountId, blockHeight: item.blockHeight }\n    : undefined;\n};\n\nif (commentBlockHeight) {\n  const content = JSON.parse(\n    Social.get(`${accountId}/post/comment`, commentBlockHeight) ?? \"null\"\n  );\n\n  if (content === null) {\n    return \"Loading\";\n  }\n\n  parentPost = extractParentPost(content.item);\n}\n\nconst Layout = styled.div`\n  display: flex;\n  justify-content: center;\n  box-sizing: inherit;\n`;\n\nconst Content = styled.div`\n  min-width: 0;\n  max-width: 680px;\n  width: 100%;\n  margin: 0 24px;\n  box-sizing: inherit;\n`;\n\nif (parentPost) {\n  return (\n    <Layout>\n      <Content>\n        <Widget\n          src={`${config.ownerId}/widget/Post.View`}\n          props={{\n            ...parentPost,\n            highlightComment: { accountId, blockHeight: commentBlockHeight },\n            commentsLimit: 30,\n            subscribe: true,\n            raw: props.raw,\n            hideBorder: true,\n          }}\n        />\n      </Content>\n    </Layout>\n  );\n}\n\nreturn (\n  <Layout>\n    <Content>\n      <Widget\n        src={`${config.ownerId}/widget/Post.View`}\n        props={{\n          ...props,\n          commentsLimit: 30,\n          subscribe: true,\n          hideBorder: true,\n        }}\n      />\n    </Content>\n  </Layout>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/openwebbuild.near/widget/Page.Post", "fact_widget_deployments_id": "ff6b2ced8cfb9153cb588499bb605ed0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}