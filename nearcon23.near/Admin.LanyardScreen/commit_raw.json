{"tx_hash": "27bhaEKWMUWscuzXF7VA63hfK7BdT9Duaon7AMcTHgBs", "action_id_social": "6oq8Kv93NFbGYzxfUVKcrMFBUwJCuoB7L3c7Gq9jU7UU-0-widget", "block_id": 104675787, "block_timestamp": "2023-11-01T09:11:58.166Z", "signer_id": "nearcon23.near", "widget_name": "Admin.LanyardScreen", "source_code": "const ownerId = \"nearcon23.near\";\nconst baseUrl =\n  \"https://gqqkd7l7mk.execute-api.us-east-1.amazonaws.com/mainnet\";\n\nconst HeaderStyle = styled.div`\n  height: 64px;\n  display: flex;\n  align-items: flex-end;\n  padding:15px;\n  background: url(\"https://ipfs.near.social/ipfs/bafkreigmwev6i2ivgz5ampkihov2ub7yenn7hohs34erheclixz2dopwru\");\n  margin-top:-12px;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position:center;\n  p {\n    margin-bottom: 0px;\n    font-size:22px;\n    font-weight: 700;\n    color: black;\n  }\n`;\n\nconst Body = styled.div`\n  min-height: calc(100vh - 100px);\n  position: relative;\n  text-align: center;\n  justify-content: center;\n  padding-top: 20px;\n  p {\n    text-align:center;\n  }\n`;\n\nconst Container = styled.div`\n  background:url(\"https://ipfs.near.social/ipfs/bafkreiadf32sz4riwsk6gwxrts7qqldhjae7jkgvl5gbhzngj4ekur2iuq\");\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-size: cover;\n  margin:auto;\n  width:100%;\n  padding-bottom: 15px;\n  max-width:600px;\n`;\nconst NavLink = styled.div`\n  * {\n      color: #000000;\n  }\n`;\n\nconst { secretkey } = props;\nconst storedSecretKey = Storage.get(\n  \"newPrivateKey\",\n  `${ownerId}/widget/Ticket.Page`\n)\n  ? Storage.get(\"newPrivateKey\", `${ownerId}/widget/Ticket.Page`)\n  : Storage.get(\"newPrivateKey\", `${ownerId}/widget/RegisterMobile.Index`);\n\nconst fetchData = () => {\n  const key = secretkey || storedSecretKey;\n\n  asyncFetch(`${baseUrl}/api/v1/accounts/auth/${key}`).then(({ body }) => {\n    if (!body?.isAdmin) {\n      State.update({\n        redirectToHome: \"redirect\",\n      });\n    }\n\n    State.update({\n      userData: body,\n    });\n  });\n};\n\nuseEffect(() => {\n  fetchData();\n}, [secretkey, storedSecretKey]);\n\nif (state.redirectToHome && state.userData && !state.userData.isAdmin) {\n  console.log(state.userData);\n  return <Redirect to=\"/mobile\" />;\n}\n\nreturn state.userData ? (\n  <Container>\n    <Widget\n      props={{\n        nearconId: state.userData.nearconId,\n        cid: state.userData.cid,\n      }}\n      src={`${ownerId}/widget/Navbar`}\n    />\n    <HeaderStyle>\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          width: \"100%\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <p>Admin</p>\n\n        <NavLink>\n          <Link to=\"/mobile\">\n            <Widget\n              src={`${ownerId}/widget/Inputs.Toggle2`}\n              props={{ rightLabel: \"Home\", value: true }}\n            />\n          </Link>\n        </NavLink>\n      </div>\n    </HeaderStyle>\n    <Body>\n      <div\n        style={{\n          textAlign: \"center\",\n          display: \"flex\",\n          margin: \"auto\",\n          width: \"fit-content\",\n        }}\n      >\n        <p style={{ color: \"white\", fontSize: 30 }}>Print their lanyard</p>\n      </div>\n      <p style={{ color: \"#9797FF\", fontWeight: \"500\", padding: 10 }}>\n        Remind them to refresh their app.\n        <br /> They should see this screen.\n      </p>\n      <div style={{ width: \"fit-content\", margin: \"auto\" }}>\n        <img\n          style={{ objectFit: \"cover\", width: \"auto\" }}\n          src=\"https://ipfs.near.social/ipfs/bafkreiayhrhwmltsd3gzpsnhcrpmvarx4idnudi7ndbe5lvhjubbiux2ca\"\n        />\n      </div>\n      <Link\n        style={{\n          backgroundColor: \"black\",\n          borderWidth: 0,\n          padding: 10,\n          fontWeight: \"600\",\n          borderRadius: 100,\n          display: \"block\",\n          color: \"white\",\n          marginLeft: \"5%\",\n          width: \"90%\",\n          marginTop: 40,\n        }}\n        to={`/${ownerId}/widget/Mobile.Home.Scan`}\n      >\n        Scan Ticket\n      </Link>\n    </Body>\n  </Container>\n) : (\n  <></>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Admin.LanyardScreen", "fact_widget_deployments_id": "d3c7df6221df9e843d3efd776ab067ff", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}