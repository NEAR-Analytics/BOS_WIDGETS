{"tx_hash": "42jY9EmuY6ivehgXjUFztCGCdrvBX8scBF1GDuwgp2oE", "action_id_social": "6auxpu29MSjxTVksKy7dES7Fmpym3L4Bt6feBwte9qAd-0-widget", "block_id": 103229978, "block_timestamp": "2023-10-12T21:05:28.030Z", "signer_id": "nearcon23.near", "widget_name": "Mobile.Home.Scan", "source_code": "const ownerId = \"nearcon23.near\";\nconst prefix = props.prefix || \"/mobile\";\n\nconst [facingMode, setFacingMode] = useState(\"environment\");\nconst [responce, setResponce] = useState(\"\");\n\nconst toggleFacingMode = () => {\n  setFacingMode((prevMode) =>\n    prevMode === \"environment\" ? \"user\" : \"environment\"\n  );\n};\n\nfunction extractReceiverId(url) {\n  const regex = /receiverId=([^&]+)/;\n  const match = url.match(regex);\n\n  if (match && match[1]) {\n    return match[1];\n  } else {\n    return null; // Return null if receiverId is not found in the URL\n  }\n}\n\nconst Button = styled.button`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 20px;\n  gap: 0.5em;\n  border: 1px solid #00ec97;\n  border-radius: 50px;\n  background: #00ec97;\n  color: #11181c;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 18px;\n  text-align: center;\n  white-space: nowrap;\n  transition: all 0.3s ease-in-out;\n\n  width:100%;\n\n  &:hover,\n  &:focus,\n  &:active {\n    text-decoration: none;\n    background: #11181c;\n    border: 1px solid #11181c;\n    color: #fff;\n  }\n`;\n\nconst Button2 = styled.button`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 20px;\n  gap: 0.5em;\n  border: 1px solid #00ec97;\n  border-radius: 50px;\n  background: #FFFFFF;\n  color: #000000;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 18px;\n  text-align: center;\n  white-space: nowrap;\n  transition: all 0.3s ease-in-out;\n\n  width:100%;\n  flex: 2;\n  border: none;\n\n  &:hover,\n  &:focus,\n  &:active {\n    text-decoration: none;\n    background: #11181c;\n    border: 1px solid #11181c;\n    color: #FFFFFF;\n  }\n`;\n\nreturn (\n  <div\n    style={{\n      backgroundColor: \"#22FFFF\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",\n      flex: 1,\n      width: \"100%\",\n      height: \"100dvh\",\n      position: \"relative\",\n    }}\n  >\n    <div\n      style={{\n        position: \"absolute\",\n        bottom: 50,\n        zIndex: 100,\n        display: \"flex\",\n        gap: \"10px\",\n      }}\n    >\n      <a\n        style={{\n          borderRadius: 20,\n          height: 40,\n          // width: 40,\n          color: props.theme.textColor3,\n          backgroundColor: props.theme.textColor,\n          border: \"none\",\n\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          gap: 8,\n          padding: \"0 16px\",\n        }}\n        href={`/${ownerId}/widget/Mobile.Home`}\n      >\n        Back\n      </a>\n      <button\n        style={{\n          borderRadius: 20,\n          height: 40,\n          // width: 40,\n          color: props.theme.textColor3,\n          backgroundColor: props.theme.textColor,\n          border: \"none\",\n\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          gap: 8,\n          padding: \"0 16px\",\n        }}\n        onClick={() => toggleFacingMode()}\n      >\n        <i class=\"bi bi-arrow-repeat\"></i>\n        <p style={{ margin: 0 }}>Change Camera</p>\n      </button>\n    </div>\n\n    {responce && (\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          zIndex: 102,\n\n          backgroundColor: \"#fff\",\n          padding: 16,\n          borderRadius: 8,\n\n          width: \"100%\",\n          maxWidth: 450,\n        }}\n      >\n        <h5 style={{ color: theme.textColor3 }}>Send to</h5>\n        <h2 style={{ wordWrap: \"break-word\" }}>{responce}</h2>\n\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            gap: 16,\n            marginTop: 24,\n          }}\n        >\n          <Button2 onClick={() => setResponce(\"\")}>Scan again</Button2>\n\n          <Link\n            style={{ flex: 3, width: \"100%\" }}\n            to={`${prefix}/${ownerId}/widget/Mobile.Home.Send?receiverId=${responce}`}\n          >\n            <Button>Continue</Button>\n          </Link>\n        </div>\n      </div>\n    )}\n\n    <div\n      key={facingMode}\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        flex: 1,\n        backgroundColor: \"#0b111d\",\n      }}\n    >\n      <QRCodeReader2\n        scanDelay={750}\n        constraints={{\n          facingMode: facingMode,\n        }}\n        onResult={(result, error) => {\n          if (!!result) {\n            // console.log(result.text);\n            const receiverId = extractReceiverId(result.text);\n\n            console.log(\"Receiver ID:\", receiverId);\n            setResponce(receiverId);\n          }\n\n          // if (!!error) {\n          //   console.log(error);\n          // }\n        }}\n        containerStyle={{\n          width: \"100%\",\n          height: \"100%\",\n        }}\n        videoContainerStyle={{\n          width: \"100%\",\n          height: \"100%\",\n        }}\n        videoStyle={{\n          width: \"100%\",\n          height: \"100%\",\n          objectFit: \"cover\",\n        }}\n      />\n    </div>\n  </div>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Mobile.Home.Scan", "fact_widget_deployments_id": "fb26000a0fbdb2ceae66f70ccfff223a", "inserted_timestamp": "2023-10-12T22:53:53.045Z", "modified_timestamp": "2023-10-12T22:53:53.045Z", "__row_index": 2}