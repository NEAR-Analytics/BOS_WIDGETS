{"tx_hash": "8CVDaZQbFTbDdMbwbGrpJsh2YGyh3AUgZWuEU9TYyvYZ", "action_id_social": "FrCGa2SbsauxeJSLKJPXkSun2hMK8vCqaQXhbcGVVqrh-0-widget", "block_id": 104706576, "block_timestamp": "2023-11-01T18:42:23.305Z", "signer_id": "nearcon23.near", "widget_name": "Navbar", "source_code": "const ownerId = \"nearcon23.near\";\nconst apiUrl = \"https://gqqkd7l7mk.execute-api.us-east-1.amazonaws.com/mainnet/api/v1\";\n\nconst Navbar = styled.div`\n  z-index: 2;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  // padding: 0.75rem 20px 1.5rem 20px;\n  padding: 0 10px;\n  flex: none;\n  order: 0;\n  align-self: stretch;\n  flex-grow: 0;\n  position: sticky;\n  top: 0;\n  // padding-top: 32px;\n  // margin-bottom: 0.75rem;\n\n  // max-height: 2.5em;\n  // height: 100%;\n  // max-height: 5.5em;\n\n  height: 90px;\n\n  background-color: ${props.collapsible ? \"transparent\" : \"#FFffFF\"};\n  backdrop-filter: blur(8px);\n`;\n\nconst HideInMobile = styled.span`\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst LogoArea = styled.a`\n  display: block;\n  width: 10em;\n  padding: 0px;\n  gap: 0.7em;\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1em;\n  line-height: 1em;\n  color: #11181c;\n  transform: translateY(0.675em);\n\n  &:hover {\n    text-decoration: none;\n    color: #11181c;\n  }\n`;\n\nconst ActionArea = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  padding: 0px;\n  gap: 1em;\n`;\n\nconst logo = (\n  <LogoArea\n    href={`/${ownerId}/widget/Index`}\n    onClick={() => props.update({ tab: \"home\" })}\n  >\n    <Widget src={`${ownerId}/widget/Icons.NearconLogo`} />\n  </LogoArea>\n);\n\nconst Info = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0px;\n  gap: 0.5em;\n  flex: none;\n  order: 0;\n  align-self: stretch;\n  font-family: \"Mona Sans\";\n  font-style: normal;\n  font-weight: 500;\n  font-size: 1em;\n  line-height: 1em;\n  text-align: right;\n  color: #00EC97;\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst Trigger = styled.button`\n  display: none;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  border-radius: 100px;\n  padding: 0.5em;\n  border: none;\n  // background-color: #f9fafb;\n  background-color: #000000;\n  transition: all 0.25s ease-in-out;\n  width: 40px;\n  height: 40px;\n\n  @media screen and (max-width: 768px) {\n    display: flex;\n  }\n\n  // &[data-state=\"open\"] {\n  //   transform: rotate(-90deg);\n  // }\n\n  // &[data-state=\"closed\"] {\n  //   transform: rotate(0deg);\n  // }\n\n  transform: rotate(${props.collapsible === false ? \"0\" : \"-90\"}deg);\n`;\n\nconst info = <Info>Nov 7-10 + Lisbon</Info>;\n\nconst accountId = props.accountId || context.accountId;\nconst nearconId = props.nearconId;\n\nconst secretKey = Storage.get(\"newPrivateKey\", `${ownerId}/widget/Ticket.Page`)\n  ? Storage.get(\"newPrivateKey\", `${ownerId}/widget/Ticket.Page`)\n  : Storage.get(\"newPrivateKey\", `${ownerId}/widget/RegisterMobile.Index`);\n\nconst url = \"bafkreifunmukd4k2u7picjrdwvgenv2xte7nzvmnrip5gg45prc2bl7fie\";\n\nState.init({ img: null });\n\nconst uploadFileUpdateState = (body) => {\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: { Accept: \"application/json\" },\n    body,\n  }).then((res) => {\n    const cid = res.body.cid;\n\n    asyncFetch(\n      `${apiUrl}/users/${cid}/${secretKey}`,\n      {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json\",\n          Authorization: \"Bearer 83d2e488-68e3-11ee-8c99-0242ac120002\",\n          \"x-amzn-RequestId\": \"83d2e488-68e3-11ee-8c99-0242ac120002\",\n        },\n      }\n    )\n      .then((res) => {\n        console.log(\"SUCCESS\", res);\n      })\n      .catch((err) => {\n        console.log(\"ERR\", err);\n      });\n\n    State.update({ img: { cid } });\n  });\n};\n\nconst filesOnChange = (files) => {\n  if (files) {\n    State.update({ img: { uploading: true, cid: null } });\n    uploadFileUpdateState(files[0]);\n  }\n};\n\nconst actions = (\n  <ActionArea>\n    {!props.hideLocation && <> {info}</>}\n\n    {nearconId ? (\n      <Files\n        multiple={false}\n        accepts={[\"image/*\"]}\n        minFileSize={1}\n        clickable\n        onChange={filesOnChange}\n      >\n        {state.img?.uploading ? (\n          <div\n            style={{\n              width: 40,\n              height: 40,\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              display: \"flex\",\n            }}\n          >\n            <div\n              style={{\n                width: 25,\n                height: 25,\n                aspectRatio: \"1 / 1\",\n                objectFit: \"cover\",\n                borderRadius: \"50%\",\n                marginRight: 0,\n              }}\n              class=\"spinner-border\"\n              role=\"status\"\n            >\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n        ) : (\n          <img\n            style={{\n              maxWidth: 40,\n              width: \"100%\",\n              minWidth: 40,\n              aspectRatio: \"1 / 1\",\n              objectFit: \"cover\",\n              borderWidth: 0,\n              borderRadius: \"50%\",\n            }}\n            src={`https://ipfs.near.social/ipfs/${\n              state.img ? state.img.cid : props.cid ? props.cid : url\n            }`}\n            alt=\"profile\"\n          />\n        )}\n      </Files>\n    ) : (\n      <Widget src={`${ownerId}/widget/Register.Button`} />\n    )}\n  </ActionArea>\n);\n\nreturn (\n  <Navbar>\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        gap: 12,\n      }}\n    >\n      {!nearconId && (\n        <Trigger\n          onClick={() => {\n            props.update({\n              collapsible: !props.collapsible,\n            });\n          }}\n        >\n          <svg\n            width=\"20\"\n            height=\"14\"\n            viewBox=\"0 0 20 14\"\n            fill=\"red\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M1 7H19M1 1H19M1 13H19\"\n              stroke=\"#00ec97\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        </Trigger>\n      )}\n\n      {logo}\n    </div>\n\n    {actions}\n  </Navbar>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Navbar", "fact_widget_deployments_id": "53efe4f43a8610ceca9e24f5d22021c9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 14}