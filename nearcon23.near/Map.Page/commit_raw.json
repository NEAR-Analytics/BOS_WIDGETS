{"tx_hash": "HadH4w8j3fzyvyKkrBWE33Uk4KbiNH3DUicFrB4qDm5W", "action_id_social": "6tVrQWou6taU1xR5aoSy1FWBF2myMvBHr5pm3oeinzeX-0-widget", "block_id": 103377517, "block_timestamp": "2023-10-14T19:05:23.877Z", "signer_id": "nearcon23.near", "widget_name": "Map.Page", "source_code": "const accessToken = `pk.eyJ1IjoiMzMzMzMzMzMiLCJhIjoiY2xuYnJvNGQ4MGlueTJqcjdlbng0cWpycCJ9.pVVNrWeRzrqSdWxg2n-lqw`;\n\nconst coordinateObject = {\n  hacker: {\n    coordinates: [-9.103527750504185, 38.741422291924266],\n  },\n  community: {\n    coordinates: [-9.10412980335633, 38.74123958634596],\n  },\n  nearcon: {\n    coordinates: [-9.1062259067202, 38.73516922235015],\n  },\n};\n\nconst DataMap = {\n  \"Community HQ\": {\n    img: \"https://i.ibb.co/Hr1XRXj/community.png\",\n    address: \"Garagem Lisboa\",\n    map: \"https://www.google.com/maps/place/R.+Pereira+Henriques,+Lisboa,+Portugal/@38.7409173,-9.1060679,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df3bc717d7:0xa6dbc055f9d40a3f!8m2!3d38.7409131!4d-9.103493!16s%2Fg%2F1thhlsmg?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Rua%20Pereira%20Henriques%203,%201950-242%20Lisboa,%20Portugal&auid=6832312148092515891&ll=38.740628,-9.104362&lsp=9902&q=Garagem%20Lisboa\",\n  },\n  \"NEARCON HQ\": {\n    img: \"https://i.ibb.co/WzJYS9V/nearconhq.png\",\n    address: \"Convento Do Beato\",\n    map: \"https://www.google.com/maps/place/Convento+do+Beato/@38.7348554,-9.1088421,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933e0e05a00ab:0x1ab47681c49d3234!8m2!3d38.7348512!4d-9.1062672!16s%2Fm%2F0_qdlv1?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Alameda%20do%20Beato%2041,%201950-042%20Lisboa,%20Portugal&auid=16456445038167086154&ll=38.735012,-9.106280&lsp=9902&q=Convento%20do%20Beato\",\n  },\n  \"Hacker HQ\": {\n    img: \"https://i.ibb.co/YBdG3rk/hacker.png\",\n    address: \"Armazem 16\",\n    map: \"https://www.google.com/maps/place/R.+Pereira+Henriques+16,+1950-242+Lisboa,+Portugal/@38.7410407,-9.1060257,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df23292a97:0x66ead8aebe385527!8m2!3d38.7410365!4d-9.1034508!16s%2Fg%2F11c1yl_sby?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Rua%20Pereira%20Henriques%2016,%201950-242%20Lisboa,%20Portugal&ll=38.741024,-9.103644&q=Rua%20Pereira%20Henriques%2016\",\n  },\n};\n\ninitState({\n  coordinates: [-9.105177855038266, 38.738204404348055],\n  zoom: 13,\n  initialize: false,\n});\n\nif (props.hq) {\n  const data = coordinateObject[props.hq];\n  State.update({\n    coordinates: data.coordinates,\n    zoom: 17,\n    initialize: true,\n  });\n} else {\n  State.update({ initialize: true });\n}\n\nconst generatePopup = (image, heading, subtitle, link) =>\n  `<div id=\"${heading}\" style=\"display:flex;\"><img style=\"height:50px;width:50px; transform:scale(1.5);border-radius:0px;\" src=\"${image}\"/><a href=\"${link}\" target=\"_blank\" style=\"text-decoration:none; color:black;\"><div style=\"padding-left:25px;padding-right:0px;\"><p style=\"font-size:12px; font-weight:500;margin-bottom:-5px\">${heading}</p> <p style=\"font-size:9px; margin-top:0px\">${subtitle}</p></div></a></div>`;\n\nconst src = `\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>Display a popup</title>\n<meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\">\n<link href=\"https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css\" rel=\"stylesheet\">\n<script src=\"https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js\"></script>\n<link href=\"https://fonts.cdnfonts.com/css/mona-sans\" rel=\"stylesheet\"></link>\n<style>\nbody { margin: 0; padding: 0; }\n#map { position: absolute; top: 0; bottom: 0; width: 100%; }\n.mapboxgl-popup-content {padding:0px;border-radius:10px; overflow:hidden;width:190px;font-family: 'Mona-Sans', sans-serif;}\n*:focus {\n    outline: none;\n}\n</style>\n</head>\n<body>\n<div id=\"map\"></div>\n<script>\n\n\tmapboxgl.accessToken = 'pk.eyJ1IjoiMzMzMzMzMzMiLCJhIjoiY2xuYnJvNGQ4MGlueTJqcjdlbng0cWpycCJ9.pVVNrWeRzrqSdWxg2n-lqw';\n    const geojson = {\n        'type': 'FeatureCollection',\n        'features': [\n        {\n        'type': 'Feature',\n        'properties': {\n        'message': 'Foo',\n        'iconSize': [60, 60]\n        },\n        'geometry': {\n        'type': 'Point',\n        'coordinates': [-9.10412980335633, 38.74123958634596]\n        }\n        },\n        {\n        'type': 'Feature',\n        'properties': {\n        'message': 'Bar',\n        'iconSize': [50, 50]\n        },\n        'geometry': {\n        'type': 'Point',\n        'coordinates': [-9.1062259067202, 38.73516922235015]\n        }\n        },\n        {\n        'type': 'Feature',\n        'properties': {\n        'message': 'Baz',\n        'iconSize': [40, 40]\n        },\n        'geometry': {\n        'type': 'Point',\n        'coordinates': [-9.103527750504185, 38.741422291924266]\n        }\n        }\n        ]\n};\nconst map = new mapboxgl.Map({\ncontainer: 'map',\n// Choose from Mapbox's core styles, or make your own style with Mapbox Studio\nstyle: 'mapbox://styles/mapbox/dark-v11',\ncenter: [${state.coordinates[0]}, ${state.coordinates[1]}],\nzoom: ${state.zoom}\n});\n  \n\n\nfor (const marker of geojson.features) {\n// Create a DOM element for each marker.\nconst el = document.createElement('div');\nconst width = marker.properties.iconSize[0];\nconst height = marker.properties.iconSize[1];\nel.className = 'marker';\nel.style.width = \"15px\";\nel.style.height = \"15px\";\nel.style.border = '5px solid #fff'\nel.style.borderRadius = '100px';\nel.style.backgroundColor=\"#00ec97\";\nel.style.backgroundSize = '100%';\n \n// Add markers to the map.\nnew mapboxgl.Marker(el)\n.setLngLat(marker.geometry.coordinates)\n.addTo(map);\n}\nconst popup = new mapboxgl.Popup({ closeButton: false,closeOnClick:false,anchor:\"top-left\" })\n.setLngLat([-9.10412980335633, 38.74123958634596])\n.setHTML('${generatePopup(\n  \"https://i.ibb.co/Hr1XRXj/community.png\",\n  \"Community HQ\",\n  \"Garagem Lisboa\",\n  \"https://www.google.com/maps/place/R.+Pereira+Henriques,+Lisboa,+Portugal/@38.7409173,-9.1060679,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df3bc717d7:0xa6dbc055f9d40a3f!8m2!3d38.7409131!4d-9.103493!16s%2Fg%2F1thhlsmg?entry=ttu\"\n)}')\n.addTo(map);\n\nconst popup2 = new mapboxgl.Popup({ closeButton: false,closeOnClick:false,anchor:\"top\"})\n.setLngLat([-9.1062259067202, 38.73516922235015])\n.setHTML('${generatePopup(\n  \"https://i.ibb.co/WzJYS9V/nearconhq.png\",\n  \"NEARCON HQ\",\n  \"Convento Do Beato\",\n  \"https://www.google.com/maps/place/Convento+do+Beato/@38.7348554,-9.1088421,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933e0e05a00ab:0x1ab47681c49d3234!8m2!3d38.7348512!4d-9.1062672!16s%2Fm%2F0_qdlv1?entry=ttu\"\n)}')\n.addTo(map);\n\nconst popup3 = new mapboxgl.Popup({ closeButton: false,closeOnClick:false, })\n.setLngLat([-9.103527750504185, 38.741422291924266])\n.setHTML('${generatePopup(\n  \"https://i.ibb.co/YBdG3rk/hacker.png\",\n  \"Hacker HQ\",\n  \"Armazem 16\",\n  \"https://www.google.com/maps/place/R.+Pereira+Henriques+16,+1950-242+Lisboa,+Portugal/@38.7410407,-9.1060257,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df23292a97:0x66ead8aebe385527!8m2!3d38.7410365!4d-9.1034508!16s%2Fg%2F11c1yl_sby?entry=ttu\"\n)}')\n.addTo(map);\n  setTimeout(()=>{\n  document.getElementById(\"NEARCON HQ\").addEventListener('click', () => {\n  window.parent.postMessage(\"NEARCON HQ\", '*');\n  });\n   document.getElementById('Hacker HQ').addEventListener('click', () => {\n  window.parent.postMessage('Hacker HQ', '*');\n  });\n document.getElementById('Community HQ').addEventListener('click', () => {\n  window.parent.postMessage('Community HQ', '*');\n  });\n  },2000)\n</script>\n \n</body>\n</html>\n`;\n\nconst NoFlexInMobile = styled.div`\n  @media only screen and (max-width: 800px) {\n  display:block;\n  }\n  width:100%;\n  display:flex;\n  a {\n    font-size:8px !important;\n    text-align:center;\n  }\n`;\n\nconst CustomLink = ({ heading, image, link, subtitle, appleLink }) => (\n  <div\n    id={heading}\n    style={{\n      display: \"flex\",\n      alignItems: \"center\",\n      position: \"absolute\",\n      bottom: 100,\n      left: 0,\n      margin: 20,\n      borderRadius: 10,\n      overflow: \"hidden\",\n      width: \"calc(100% - 40px)\",\n      backgroundColor: \"white\",\n    }}\n  >\n    <img\n      style={{\n        height: \"150px\",\n        width: \"150px\",\n        transform: \"scale(1.2)\",\n        borderRadius: \"0px\",\n      }}\n      src={image}\n      alt={heading}\n    />\n    <div style={{ paddingLeft: \"25px\", paddingRight: \"45px\" }}>\n      <p\n        style={{\n          fontSize: \"20px\",\n          fontWeight: \"500\",\n          marginBottom: \"-5px\",\n        }}\n      >\n        {heading}\n      </p>\n      <p\n        style={{\n          fontSize: \"14px\",\n          marginTop: \"0px\",\n          marginBottom: \"8px\",\n        }}\n      >\n        {subtitle}\n      </p>\n      <NoFlexInMobile\n        style={{\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          gap: \"10px\",\n        }}\n      >\n        <a\n          style={{\n            backgroundColor: \"blue\",\n            color: \"white\",\n            padding: 10,\n            borderRadius: 5,\n            fontSize: 14,\n            display: \"block\",\n            marginBottom: 10,\n          }}\n          target=\"_blank\"\n          href={link}\n        >\n          Open on Google Maps\n        </a>\n        <a\n          style={{\n            backgroundColor: \"blue\",\n            color: \"white\",\n            padding: 10,\n            borderRadius: 5,\n            fontSize: 14,\n            display: \"block\",\n            marginBottom: 10,\n          }}\n          target=\"_blank\"\n          href={appleLink}\n        >\n          Open on Apple Maps\n        </a>\n      </NoFlexInMobile>\n    </div>\n  </div>\n);\n\nreturn (\n  <div>\n    {state.location && (\n      <CustomLink\n        heading={state.location}\n        image={DataMap[state.location].img}\n        subtitle={DataMap[state.location].address}\n        link={DataMap[state.location].map}\n        appleLink={DataMap[state.location].appleMaps}\n      />\n    )}\n    {state.initialize && (\n      <iframe\n        style={{ width: \"100%\", height: \"100vh\" }}\n        onMessage={(data) => {\n          State.update({ location: data });\n        }}\n        srcDoc={src}\n      />\n    )}\n  </div>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Map.Page", "fact_widget_deployments_id": "1a43001c143a7958db934fb48a13af05", "inserted_timestamp": "2023-10-14T20:50:08.875Z", "modified_timestamp": "2023-10-14T20:50:08.875Z", "__row_index": 0}