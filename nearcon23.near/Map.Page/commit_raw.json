{"tx_hash": "8n5pAr2ohaXmSLW34erVL8LH5gC5bpXUFzJZG2LvMVAh", "action_id_social": "9gTzEvfqyjk4eEQGeXhP6YdDXuUrobVFxwXjYzC27MTr-0-widget", "block_id": 104726258, "block_timestamp": "2023-11-02T00:43:41.953Z", "signer_id": "nearcon23.near", "widget_name": "Map.Page", "source_code": "const accessToken = `pk.eyJ1IjoiMzMzMzMzMzMiLCJhIjoiY2xuYnJvNGQ4MGlueTJqcjdlbng0cWpycCJ9.pVVNrWeRzrqSdWxg2n-lqw`;\n\nconst ownerId = \"nearcon23.near\";\n\nconst coordinateObject = {\n  hacker: {\n    coordinates: [-9.103527750504185, 38.741422291924266],\n  },\n  community: {\n    coordinates: [-9.10412980335633, 38.74123958634596],\n  },\n  nearcon: {\n    coordinates: [-9.1062259067202, 38.73516922235015],\n  },\n};\n\nconst DataMap = {\n  \"Community HQ\": {\n    img: \"https://i.ibb.co/Hr1XRXj/community.png\",\n    address: \"Garagem Lisboa\",\n    map: \"https://www.google.com/maps/place/R.+Pereira+Henriques,+Lisboa,+Portugal/@38.7409173,-9.1060679,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df3bc717d7:0xa6dbc055f9d40a3f!8m2!3d38.7409131!4d-9.103493!16s%2Fg%2F1thhlsmg?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Rua%20Pereira%20Henriques%203,%201950-242%20Lisboa,%20Portugal&auid=6832312148092515891&ll=38.740628,-9.104362&lsp=9902&q=Garagem%20Lisboa\",\n    images: [\n      \"https://ipfs.near.social/ipfs/bafkreidjxdiy2g5pkij633driuuup32bj5cak2a4rfiwhq6e64cketjqki\",\n    ],\n  },\n  \"NEARCON HQ\": {\n    img: \"https://i.ibb.co/WzJYS9V/nearconhq.png\",\n    address: \"Convento Do Beato\",\n    map: \"https://www.google.com/maps/place/Convento+do+Beato/@38.7348554,-9.1088421,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933e0e05a00ab:0x1ab47681c49d3234!8m2!3d38.7348512!4d-9.1062672!16s%2Fm%2F0_qdlv1?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Alameda%20do%20Beato%2041,%201950-042%20Lisboa,%20Portugal&auid=16456445038167086154&ll=38.735012,-9.106280&lsp=9902&q=Convento%20do%20Beato\",\n    images: [\n      \"https://ipfs.near.social/ipfs/bafkreihyehu2pzwoqy5msm6622mqajn5inhzkkstqxh3btgg4igg6mgqri\",\n      \"https://ipfs.near.social/ipfs/bafkreihccmkk4earnxlzbr6bzhac4rwv6enmwn4g64j3t4rcbks4unvkii\",\n    ],\n  },\n  \"Hacker HQ\": {\n    img: \"https://i.ibb.co/YBdG3rk/hacker.png\",\n    address: \"Armazem 16\",\n    map: \"https://www.google.com/maps/place/R.+Pereira+Henriques+16,+1950-242+Lisboa,+Portugal/@38.7410407,-9.1060257,17z/data=!3m1!4b1!4m6!3m5!1s0xd1933df23292a97:0x66ead8aebe385527!8m2!3d38.7410365!4d-9.1034508!16s%2Fg%2F11c1yl_sby?entry=ttu\",\n    appleMaps:\n      \"https://maps.apple.com/?address=Rua%20Pereira%20Henriques%2016,%201950-242%20Lisboa,%20Portugal&ll=38.741024,-9.103644&q=Rua%20Pereira%20Henriques%2016\",\n    images: [\n      \"https://ipfs.near.social/ipfs/bafkreigk7ackjppk4gmrpq4brjo3blcb6g4iwks3gi4iaphmndqqmvyxdu\",\n    ],\n  },\n};\n\ninitState({\n  coordinates: [-9.104958285463987, 38.73661701484848],\n  zoom: 14,\n  initialize: false,\n});\n\nif (props.hq) {\n  const data = coordinateObject[props.hq];\n  State.update({\n    coordinates: data.coordinates,\n    zoom: 17,\n    initialize: true,\n  });\n} else {\n  State.update({ initialize: true });\n}\n\nconst NoFlexInMobile = styled.div`\n  @media only screen and (max-width: 800px) {\n  display:block;\n  }\n  width:100%;\n  display:flex;\n  a {\n    font-size:10px !important;\n    text-align:center;\n  }\n`;\n\nconst BackgroundImage = styled.div`\n  height:100vh;\n  position:relative;\n  margin-top:-100vh;\n`;\n\nconst BackButton = styled.button`\n  background-color: black;\n  color: white;\n  width:50px;\n  height: 50px;\n  border-radius:15px;\n`;\nconst DownloadLink = styled.a`\n  background-color: black;\n  color: white;\n  width:50px;\n  height: 50px;\n  border-radius:15px;\n`;\n\nconst MapButton = styled.a`\n  background-color: black;\n  width: 300px;\n  padding:10px;\n  color: white;\n  margin:auto;\n  border-radius:15px;\n  display:flex;\n  text-align:center;\n  justify-content:center;\n  align-items:center;\n  font-family:Mona Sans;\n`;\n\nconst TopFlowButton = styled.div`\n  padding:10px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst TabDiv = styled.div`\n background-color: black;\n overflow:hidden;\n border-radius:15px;\n gap:10px;\n height:52px;\n padding:5px;\n p {\n  color:#FFFFFF;\n  transform: translate(0px,8px);\n  padding-left:10px;\n  padding-right: 10px;\n }\n display:flex;\n button {\n  display:flex !important;\n  border-radius:15px;\n  justify-content:center !important;\n  align-items: center !important;\n }\n`;\n\nconst [activeTab, setActiveTab] = useState(0);\n\nconst Tabs = () => {\n  return DataMap[state.location].images.length === 2 ? (\n    <TabDiv>\n      <button\n        onClick={() => {\n          setActiveTab(0);\n        }}\n        style={{\n          backgroundColor: activeTab === 0 ? \"#282826\" : \"black\",\n          opacity: activeTab === 1 ? 0.5 : 1,\n          borderWidth: 0,\n        }}\n      >\n        <p>Floor 0</p>\n      </button>\n      {DataMap[state.location].images.length === 2 && (\n        <button\n          onClick={() => {\n            setActiveTab(1);\n          }}\n          style={{\n            backgroundColor: activeTab === 1 ? \"#282826\" : \"black\",\n            opacity: activeTab === 0 ? 0.5 : 1,\n            borderWidth: 0,\n          }}\n        >\n          <p>Floor 1</p>\n        </button>\n      )}\n    </TabDiv>\n  ) : (\n    <></>\n  );\n};\n\nconst CustomLink = ({ heading, image, link, subtitle, appleLink, images }) => (\n  <>\n    <img\n      src={images[activeTab]}\n      style={{\n        width: \"100%\",\n        height: \"100vh\",\n        padding: 14,\n        objectFit: \"contain\",\n        top: 0,\n        left: 0,\n        backgroundColor: \"#3D434D\",\n      }}\n    />\n    <BackgroundImage>\n      <TopFlowButton>\n        <BackButton\n          onClick={() => {\n            State.update({ location: undefined });\n            setActiveTab(0);\n          }}\n        >\n          <div style={{ margin: \"auto\", width: \"fit-content\" }}>\n            <Widget src={`${ownerId}/widget/Icons.Back`} />\n          </div>\n        </BackButton>\n        <Tabs />\n        <DownloadLink target=\"_blank\" download href={images[activeTab]}>\n          <div style={{ margin: \"auto\", width: \"fit-content\", marginTop: 12 }}>\n            <Widget src={`${ownerId}/widget/Icons.Download`} />\n          </div>\n        </DownloadLink>\n      </TopFlowButton>\n      <div\n        style={{\n          width: \"fit-content\",\n          margin: \"auto\",\n          width: \"90%\",\n          position: \"absolute\",\n          textAlign: \"center\",\n          bottom: 90,\n          marginLeft: \"5%\",\n        }}\n      >\n        <MapButton target=\"_blank\" href={appleLink}>\n          <span style={{ marginRight: 5 }}>Open in Apple Maps</span>{\" \"}\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 18 18\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M17.5938 6.9375C17.5938 7.211 17.4851 7.47331 17.2917 7.6667C17.0983 7.8601 16.836 7.96875 16.5625 7.96875C16.289 7.96875 16.0267 7.8601 15.8333 7.6667C15.6399 7.47331 15.5312 7.211 15.5312 6.9375V3.92969L10.4171 9.04383C10.2234 9.23756 9.96062 9.3464 9.68664 9.3464C9.41266 9.3464 9.1499 9.23756 8.95617 9.04383C8.76244 8.8501 8.6536 8.58734 8.6536 8.31336C8.6536 8.03938 8.76244 7.77662 8.95617 7.58289L14.0703 2.46875H11.0625C10.789 2.46875 10.5267 2.3601 10.3333 2.1667C10.1399 1.97331 10.0312 1.711 10.0312 1.4375C10.0312 1.164 10.1399 0.901693 10.3333 0.708296C10.5267 0.514899 10.789 0.40625 11.0625 0.40625H16.5625C16.836 0.40625 17.0983 0.514899 17.2917 0.708296C17.4851 0.901693 17.5938 1.164 17.5938 1.4375V6.9375ZM13.8125 9C13.539 9 13.2767 9.10865 13.0833 9.30205C12.8899 9.49544 12.7812 9.75775 12.7812 10.0312V15.5312H2.46875V5.21875H7.96875C8.24225 5.21875 8.50456 5.1101 8.69795 4.9167C8.89135 4.72331 9 4.461 9 4.1875C9 3.914 8.89135 3.65169 8.69795 3.4583C8.50456 3.2649 8.24225 3.15625 7.96875 3.15625H2.125C1.66916 3.15625 1.23199 3.33733 0.90966 3.65966C0.587332 3.98199 0.40625 4.41916 0.40625 4.875V15.875C0.40625 16.3308 0.587332 16.768 0.90966 17.0903C1.23199 17.4127 1.66916 17.5938 2.125 17.5938H13.125C13.5808 17.5938 14.018 17.4127 14.3403 17.0903C14.6627 16.768 14.8438 16.3308 14.8438 15.875V10.0312C14.8438 9.75775 14.7351 9.49544 14.5417 9.30205C14.3483 9.10865 14.086 9 13.8125 9Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </MapButton>\n        <MapButton target=\"_blank\" href={link} style={{ marginTop: 15 }}>\n          <span style={{ marginRight: 5 }}>Open in Google Maps</span>{\" \"}\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 18 18\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M17.5938 6.9375C17.5938 7.211 17.4851 7.47331 17.2917 7.6667C17.0983 7.8601 16.836 7.96875 16.5625 7.96875C16.289 7.96875 16.0267 7.8601 15.8333 7.6667C15.6399 7.47331 15.5312 7.211 15.5312 6.9375V3.92969L10.4171 9.04383C10.2234 9.23756 9.96062 9.3464 9.68664 9.3464C9.41266 9.3464 9.1499 9.23756 8.95617 9.04383C8.76244 8.8501 8.6536 8.58734 8.6536 8.31336C8.6536 8.03938 8.76244 7.77662 8.95617 7.58289L14.0703 2.46875H11.0625C10.789 2.46875 10.5267 2.3601 10.3333 2.1667C10.1399 1.97331 10.0312 1.711 10.0312 1.4375C10.0312 1.164 10.1399 0.901693 10.3333 0.708296C10.5267 0.514899 10.789 0.40625 11.0625 0.40625H16.5625C16.836 0.40625 17.0983 0.514899 17.2917 0.708296C17.4851 0.901693 17.5938 1.164 17.5938 1.4375V6.9375ZM13.8125 9C13.539 9 13.2767 9.10865 13.0833 9.30205C12.8899 9.49544 12.7812 9.75775 12.7812 10.0312V15.5312H2.46875V5.21875H7.96875C8.24225 5.21875 8.50456 5.1101 8.69795 4.9167C8.89135 4.72331 9 4.461 9 4.1875C9 3.914 8.89135 3.65169 8.69795 3.4583C8.50456 3.2649 8.24225 3.15625 7.96875 3.15625H2.125C1.66916 3.15625 1.23199 3.33733 0.90966 3.65966C0.587332 3.98199 0.40625 4.41916 0.40625 4.875V15.875C0.40625 16.3308 0.587332 16.768 0.90966 17.0903C1.23199 17.4127 1.66916 17.5938 2.125 17.5938H13.125C13.5808 17.5938 14.018 17.4127 14.3403 17.0903C14.6627 16.768 14.8438 16.3308 14.8438 15.875V10.0312C14.8438 9.75775 14.7351 9.49544 14.5417 9.30205C14.3483 9.10865 14.086 9 13.8125 9Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </MapButton>\n      </div>\n    </BackgroundImage>\n  </>\n);\n\nreturn (\n  <div>\n    {state.location && (\n      <CustomLink\n        heading={state.location}\n        image={DataMap[state.location].img}\n        subtitle={DataMap[state.location].address}\n        link={DataMap[state.location].map}\n        appleLink={DataMap[state.location].appleMaps}\n        images={DataMap[state.location].images}\n      />\n    )}\n    {!state.location && state.initialize && (\n      <Widget\n        src={`${ownerId}/widget/Map.Iframe`}\n        props={{\n          state,\n          update: (d) => {\n            State.update(d);\n          },\n        }}\n      />\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Map.Page", "fact_widget_deployments_id": "802a2446837b7aec2aa467a5463ad977", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}