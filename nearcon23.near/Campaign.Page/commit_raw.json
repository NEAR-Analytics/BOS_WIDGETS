{"tx_hash": "6aEUtCp5XgoCSgza3J2C3svgJYM1SfijwbVhnhgCPMxR", "action_id_social": "Buto8c3TVdaX52hwHFc6o7kKWTxM7TdCZK3mNB8PQRJ6-0-widget", "block_id": 104706955, "block_timestamp": "2023-11-01T18:49:17.434Z", "signer_id": "nearcon23.near", "widget_name": "Campaign.Page", "source_code": "const ownerId = \"nearcon23.near\";\nconst apiUrl =\n  \"https://gqqkd7l7mk.execute-api.us-east-1.amazonaws.com/mainnet/api/v1\";\n\nconst Container = styled.div`\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  background-color: #00ec97;\n`;\nconst Content = styled.div`\n  padding: 20px;\n\n  display: flex;\n  flex-direction: column;\n\n  justify-content: center;\n  align-items: center;\n  \n  flex: 1;\n  position: relative;\n`;\nconst Button = styled.button`\n  margin: 20px;\n\n  background-color: #000000;\n  color: #FFFFFF;\n\n  height: 48px;\n  border-radius: 24px;\n  border: none;\n\n  font-familly: Mona Sans;\n\n  font-size: 18px;\n  font-weight: 600;\n  width: calc(100% - 40px);\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\nconst storedSecretKey = Storage.get(\n  \"newPrivateKey\",\n  `${ownerId}/widget/Ticket.Page`\n)\n  ? Storage.get(\"newPrivateKey\", `${ownerId}/widget/Ticket.Page`)\n  : Storage.get(\"newPrivateKey\", `${ownerId}/widget/RegisterMobile.Index`);\n\nconst [loading, setLoading] = useState(false);\nconst [campaign, setCampaign] = useState({});\n\nconst [redirectToMobile, setRedirectToMobile] = useState(false);\n\nconst [status, setStatus] = useState(\"\");\n\nconst handleClaim = () => {\n  console.log(\"-----\", campaign.amount, campaign._id, storedSecretKey);\n\n  setLoading(true);\n  asyncFetch(\n    `${apiUrl}/campaigns/claim/${campaign._id}/${campaign.amount}/${storedSecretKey}`,\n    {\n      method: \"POST\",\n      body: JSON.stringify({\n        amount: campaign.amount,\n        campaignId: campaign._id,\n      }),\n    }\n  )\n    .then((res) => {\n      console.log(\"===>\", res);\n\n      if (res.status === 200) {\n        setStatus(\"success\");\n      } else {\n        setStatus(\"failed\");\n      }\n      setLoading(true);\n\n      return setRedirectToMobile(true);\n    })\n    .catch((err) => {\n      setStatus(\"failed\");\n      console.log(\"getData error : \", err);\n      setLoading(true);\n    });\n};\n\nconst getData = () => {\n  asyncFetch(`${apiUrl}/campaigns/${props.campaignId}`)\n    .then((res) => {\n      setCampaign(res.body);\n    })\n    .catch((err) => {\n      console.log(\"getData error : \", err);\n    });\n};\n\nuseEffect(() => {\n  getData();\n}, [props.campaignId]);\n\nreturn (\n  <Container>\n    <Widget\n      props={{\n        nearconId: state.userData.nearconId,\n        cid: state.userData.cid,\n      }}\n      src={`${ownerId}/widget/Navbar`}\n    />\n\n    {status === \"success\" ? (\n      <Widget\n        src={`${ownerId}/widget/Campaign.Success`}\n        props={{\n          amount: campaign.amount,\n        }}\n      />\n    ) : status === \"failed\" ? (\n      <Widget\n        src={`${ownerId}/widget/Campaign.Failed`}\n        props={{\n          label: campaign?.name,\n        }}\n      />\n    ) : (\n      <>\n        <Container>\n          <svg\n            width=\"347\"\n            height=\"460\"\n            viewBox=\"0 0 347 460\"\n            fill=\"none\"\n            style={{\n              position: \"absolute\",\n              zIndex: 1,\n\n              top: 200,\n            }}\n          >\n            <g>\n              <path\n                d=\"M305.155 46.2263C246.264 -14.7871 149.151 -15.4025 89.4891 44.3802C87.2305 46.6434 85.0886 48.9777 83.0025 51.3426C80.9165 48.9777 78.7748 46.6434 76.5162 44.3802C16.8544 -15.4025 -80.2593 -14.7871 -139.15 46.2263C-196.797 105.953 -194.213 201.672 -135.577 260.427L49.8701 446.249C68.1671 464.583 97.833 464.583 116.13 446.249L301.577 260.427C360.213 201.672 362.797 105.953 305.15 46.2263H305.155Z\"\n                fill=\"#00fba2\"\n              />\n            </g>\n          </svg>\n\n          <Content>\n            <p\n              style={{\n                color: \"#096D50\",\n\n                fontFamily: \"Mona Sans\",\n                fontSize: 16,\n                fontWeight: 700,\n\n                margin: \"32px 0 8px 0\",\n                zIndex: 3,\n\n                position: \"absolute\",\n                top: 1,\n              }}\n            >\n              CODE FOUND\n            </p>\n\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                position: \"relative\",\n                height: 162,\n                width: 162,\n                zIndex: 13,\n              }}\n            >\n              <svg\n                width=\"162\"\n                height=\"162\"\n                viewBox=\"0 0 162 162\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                style={{\n                  position: \"absolute\",\n                  zIndex: 1,\n                }}\n              >\n                <circle\n                  cx=\"81\"\n                  cy=\"81\"\n                  r=\"80.5\"\n                  fill=\"#096D50\"\n                  stroke=\"#00EC97\"\n                  fill=\"#000000\"\n                  stroke=\"#000000\"\n                />\n              </svg>\n\n              <h1\n                style={{\n                  color: \"#FFFFFF\",\n                  zIndex: 5,\n                  margin: 0,\n\n                  fontSize: 72,\n                  fontWeight: 900,\n                  fontFamily: \"FK Grotesk\",\n                  lineHeight: \"100%\",\n                }}\n              >\n                ?\n              </h1>\n            </div>\n\n            <h1\n              style={{\n                color: \"#000000\",\n                fontFamily: \"FK Grotesk\",\n                fontSize: 42,\n                fontWeight: 400,\n\n                margin: \"32px 0 8px 0\",\n                zIndex: 12,\n              }}\n            >\n              Congrats!\n            </h1>\n            <h5\n              style={{\n                color: \"#000000\",\n                fontFamily: \"FK Grotesk\",\n                fontSize: 20,\n                fontStyle: \"normal\",\n                fontWeight: 400,\n                marginBottom: 32,\n                zIndex: 12,\n              }}\n            >\n              You found some NCON\n            </h5>\n\n            <Button\n              style={{\n                minHeight: 48,\n\n                zIndex: 12,\n              }}\n              onClick={() => handleClaim()}\n            >\n              {loading ? (\n                <div class=\"spinner-border text-light\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              ) : (\n                \"Reveal & Claim\"\n              )}\n            </Button>\n          </Content>\n        </Container>\n      </>\n    )}\n  </Container>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Campaign.Page", "fact_widget_deployments_id": "6e1805e0cc8e3d26070e9f5e05d9b3ae", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}