{"tx_hash": "DZUCare6kXLRPVHUN5V9iQUKzYpLaCxefqtKsT9VjTmh", "action_id_social": "5AThf7FcTDYTzS7bqRSjLAf3bpSVTMopcZit15DjvcLo-0-widget", "block_id": 111202390, "block_timestamp": "2024-01-24T13:01:06.145Z", "signer_id": "nearfortuneraffle.near", "widget_name": "nearfortuneraffle.raffle", "source_code": "const Image1 =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588123/rafflestore/weekBanner_cwsvjc.png\";\nconst Image2 =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/post1_e3ffre.png\";\n\nconst Wrapper = styled.div`\n    color: #fff;\n    text-align: center;\n    padding: 2rem;\n    --tw-bg-opacity: 1;\n    background-color: black;\n    border-radius: 0.75rem;\n    justify-content: space-evenly;\n    align-items: center;\n    flex-direction: column;\n    width: 25%;\n    display: flex;\n    margin-left: auto;\n    margin-right: auto;\n    @media screen and (max-width: 768px){\n        width: 90%;\n}\n}\n`;\nconst ImageGroup = styled.div`\n   display: flex;\n   width: 100%;\n}\n`;\n\nconst StyledImage = styled.img`\n   width: 50%;\n}\n`;\n\nconst ShareBtn = styled.button`\ncolor: #fff;\n    cursor: pointer;\n    padding: 1rem 0.5rem;\n    background-color: #003C8C; \n    border: 1px solid #e5e7eb;\n    border-radius: 0.75rem;\n    align-items: center;\n    display: flex;\n`;\n\nconst SharedIcon =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588098/rafflestore/x_abhrox.svg\";\n\nconst StyledIcon = styled.img`\n    width: 1rem;\n    max-width: 100%;\n    height: auto;\n`;\n\nconst Post = (\n  <Wrapper>\n    <h2>Entered</h2>\n    <ImageGroup>\n      <StyledImage src={Image1} alt=\"raffle pics\" />\n      <StyledImage src={Image2} alt=\"raffle pics\" />\n    </ImageGroup>\n    <p>\n      Thanks for entering the raffle! Winners will be emailed on Dec. 15 11:59pm\n    </p>\n    <ShareBtn>\n      <span>Share on twitter</span>\n    </ShareBtn>\n  </Wrapper>\n);\n\nconst backgroundImage =\n  \"https://res.cloudinary.com/zbsoft/image/upload/v1700160172/raffle/background.png\";\n\nconst bannerImg =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588123/rafflestore/weekBanner_cwsvjc.png\";\n\nconst sharDogIcon =\n  \"https://res.cloudinary.com/dfbqtfoxu/image/upload/v1700588115/rafflestore/gift_ebqnkb.svg\";\n\nState.init({ fullname: \"\", email: \"\", formSubmitted: false });\n\nconst formData = {\n  fullname: state.fullname,\n  email: state.email,\n};\n\nconst accountId = context.accountId;\nconst contractId = \"mint.sharddog.near\";\n\nconst returnedData = Social.get(`${accountId}/formData/*`);\n\nconsole.log(returnedData + \"Great\");\nconsole.log(formData);\n\nif (!contractId) {\n  return `Missing \"contractId\"`;\n}\n\nif (!accountId) {\n  return `Please login`;\n}\n\nfunction sendData(formData) {\n  console.log(\"send data function called\");\n  const apiUrl = \"https://rafflestore.000webhostapp.com/api/register.php\";\n\n  if (Object.keys(formData).length > 0) {\n    console.log(\"object not empty\");\n    console.log(JSON.stringify(formData));\n    asyncFetch(apiUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(formData),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          console.log(\"error communicating with the server\");\n        }\n\n        return res.json();\n      })\n      .then((data) => {\n        console.log(\"Server response:\", data);\n        console.log(\"API call success\");\n        // Handle the success response as needed\n      })\n      .catch((error) => {\n        console.log(\"Error:\", error);\n        // Handle errors\n      });\n  } else {\n    console.log(\"Object is empty\");\n  }\n}\n\nconst nfts = Near.view(contractId, \"nft_tokens_for_owner\", {\n  account_id: accountId,\n  from_index: \"0\",\n  limit: 200,\n});\n\nconst nftTitle = \"Kano is bos jollof - 1\";\nconst id = \"mint.sharddog.near:2cdbb07ea61d7a4175791ca1170ee4c3\";\nState.init({ nftCheck: false });\n\nfor (let i = 0; i < nfts.length; i++) {\n  if (nftTitle === nfts[i].metadata.title) {\n    State.update({ nftCheck: true });\n    break;\n  }\n}\n\nif (!nfts) {\n  return \"\";\n}\n\nconsole.log(state.nftCheck);\nconsole.log(state.email);\nconst Container = styled.div`\n\n`;\n\nconst Banner = styled.div`\nbackground-image: url(${backgroundImage});\npadding-bottom: 2rem;\nbackground-position: center;\nbackground-size: cover;\ndisplay: flex;\nalign-items: center;\nflex-direction: column;\nwidth: 100%;\nmargin-bottom: 2rem;\n`;\n\nconst StyledImg = styled.img`\nwidth: 50%;\nheight: auto;\ndisplay: block;\noverflow-clip-margin: content-box;\noverflow: clip;\n`;\n\nconst RaffleContent = styled.div`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\nwidth: 50%;\nmargin: 0 auto;\n@media screen and (max-width: 768px){\nwidth: 90%;\n}\n`;\n\nconst TitleContainer = styled.div`\npadding: 1rem 1.25rem;\nborder: 2px solid #e5e7eb;\nborder-radius: 10px;\nwidth: 100%;\n`;\n\nconst Title = styled.h4`\nfont-size: 24px;\n`;\n\nconst Description = styled.div`\ngap: 1rem;\nalign-items: flex-end;\ndisplay: flex;\n`;\n\nconst Text = styled.div`\nfont-size: 21px;\n`;\n\nconst InstructionWrapper = styled.div`\ntext-align: center;\nmargin: 4.3rem 0;\n`;\n\nconst InstructionContent = styled.p`\nfont-size: 23px; \nmargin: 1.2rem 0;\nline-height: 1.5;\n`;\n\nconst PrizeWrapper = styled.div`\n    align-items: center;\n    flex-direction: column;\n    width: 100%;\n    display: flex;\n    margin: 0 auto;\n`;\n\nconst PrizeTitle = styled.h3`\n    font-weight: 700;\n    font-size: 24px;\n    color: #000;\n`;\n\nconst PrizeContent = styled.div`\n    padding: 2.5rem;\n    border: 2px solid #e5e7eb;\n    border-radius: 0.75rem;\n    flex-direction: column;\n    align-items: center;\n    width: 50%;\n    display: flex;\n    @media screen and (max-width: 768px){\n    width: 90%;\n`;\n\nconst PrizeIcon = styled.div`\n    gap: 0.5rem;\n    display: flex;\n`;\n\nconst PrizeDetail = styled.ol`\n    font-size: .875rem;\n    line-height: 1.25rem;\n    padding: 1.25rem;\n    list-style: none;\n`;\n\nconst PrizeBtn = styled.button`\n    font-size: .875rem;\n    line-height: 1.25rem;\n    text-align: center;\n    padding: 0.5rem 1rem;\n    border-width: 1px;\n    border-radius: 1rem;\n    align-items: flex-end;\n    flex-direction: column;\n    display: flex;\n    gap: 10px;\n    cursor: pointer;\n    border: none;\n    background: none;\n\n`;\n\nconst EnterBtnWrapper = styled.div`\n    align-items: center;\n    flex-direction: column;\n    display: flex;\n    margin-top: 1.5rem;\n`;\n\nconst EnterBtn = styled.button`\n    color: #fff;\n    padding: 1rem 3rem;\n    background-color :#003C8C;\n    border-width: 1px;\n    border-radius: 0.75rem;\n    cursor: pointer;\n        margin-bottom: 10px;\n`;\n\nconst RaffleSummary = styled.div`\n    padding-top: 1rem;\n    border-top: 2px solid #e5e7eb;\n    justify-content: space-between;\n    width: 50%;\n    display: flex;\n    margin: 1.5rem 0 0.5rem;\n        @media screen and (max-width: 768px){\n    width: 90%;}\n`;\n\nconst CloseDate = styled.div`\n  width: 50%;\n`;\n\nconst Entries = styled.div`\n   width: 50%;\n`;\n\n// if (returnedData) {\n//   return Post;\n// }\n\nreturn (\n  <>\n    {!state.nftCheck ? (\n      <div\n        class=\"modal fade\"\n        id=\"raffleModal\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n                @\n              </h5>\n              <button\n                type=\"button\"\n                class=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form\">\n                <div class=\"mb-3\">\n                  <label for=\"name\" class=\"form-label\">\n                    Name\n                  </label>\n                  <input\n                    value={state.fullname || \"\"}\n                    onChange={(e) => State.update({ fullname: e.target.value })}\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"emainamel\"\n                    aria-describedby=\"nameHelp\"\n                  />\n                </div>\n                <div class=\"mb-3\">\n                  <label for=\"email\" class=\"form-label\">\n                    Email\n                  </label>\n                  <input\n                    value={state.email || \"\"}\n                    onChange={(e) => State.update({ email: e.target.value })}\n                    type=\"email\"\n                    class=\"form-control\"\n                    id=\"email\"\n                  />\n                </div>\n\n                <button\n                  data={formData}\n                  type=\"submit\"\n                  class=\"btn btn-primary\"\n                  onClick={() => sendData(formData)}\n                >\n                  Submit\n                </button>\n                <div id=\"terms\" class=\"form-text\">\n                  By continuing, you accept Near Fortune\u2019s terms of service and\n                  privacy policy.\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ) : (\n      <div\n        class=\"modal fade\"\n        id=\"raffleModal\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n                Sharddog NFT Check\n              </h5>\n              <button\n                style={{ marginLeft: \"20px\" }}\n                type=\"button\"\n                class=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div class=\"modal-body\">\n              Ops! You must have ShardDog - 1555 or Game Gallery NFT to enter\n              the raffle\n            </div>\n          </div>\n        </div>\n      </div>\n    )}\n\n    <Container>\n      <Banner>\n        <StyledImg src={bannerImg} alt=\"banner\" />\n      </Banner>\n      <RaffleContent>\n        <TitleContainer>\n          <Title>SharDog Raffle</Title>\n          <Description>\n            <img src={sharDogIcon} alt=\"shardDog icon\" />\n            <Text>Available for 3 winners</Text>\n          </Description>\n        </TitleContainer>\n        <InstructionWrapper>\n          <InstructionContent>\n            We would like to give you some free stuff, for your taking action\n            onchain.\n          </InstructionContent>\n          <InstructionContent>\n            If you have a <b>ShardDog - 1555</b> or <b>Game Gallery NFT</b> you\n            can enter the raffle to win!\n          </InstructionContent>\n        </InstructionWrapper>\n        <PrizeWrapper>\n          <PrizeTitle>You don\u2019t have any?</PrizeTitle>\n          <PrizeContent>\n            <PrizeIcon>\n              <PrizeBtn>\n                <img src={sharDogIcon} />\n                <span>ShardDog - 1555 </span>\n              </PrizeBtn>\n            </PrizeIcon>\n            <PrizeDetail>\n              <span>\n                <b>Prize to win:</b>\n              </span>\n              <li>1.10 $NEAR</li>\n              <li>2.T-shirt</li>\n              <li>3.Mystery Box</li>\n            </PrizeDetail>\n          </PrizeContent>\n        </PrizeWrapper>\n        <EnterBtnWrapper>\n          <EnterBtn\n            type=\"button\"\n            class=\"btn btn-primary\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#raffleModal\"\n          >\n            Enter\n          </EnterBtn>\n          <span\n            style={{\n              fontWeight: \"bold\",\n              fontSize: \"0.75rem\",\n              lineHeight: \"1rem\",\n            }}\n          >\n            By continuing, you accept Near Fortune\u2019s <a href=\"#\">terms</a> and{\" \"}\n            <a href=\"#\" class=\"underline\">\n              privacy\n            </a>\n            .\n          </span>\n        </EnterBtnWrapper>\n\n        <RaffleSummary>\n          <CloseDate>\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>CLOSES</h4>\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\n              Dec 13, 11:59 PM GMT+1\n            </p>\n          </CloseDate>\n          <Entries>\n            <h4 style={{ fontWeight: \"700\", margin: \"0\" }}>ENTRIES</h4>\n            <p style={{ fontSize: \"0.75rem\", lineHeight: \"1rem\" }}>\n              23 Entires\n            </p>\n          </Entries>\n        </RaffleSummary>\n      </RaffleContent>\n      <Widget src=\"nearfortuneraffle.near/widget/nearfortuneraffle.footer\" />\n    </Container>\n  </>\n);\n", "metadata": {"fork_of": "nearfortuneraffle.near/widget/nearfortuneraffle.raffle@111143139"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearfortuneraffle.near/widget/nearfortuneraffle.raffle", "fact_widget_deployments_id": "9526a4d1fc505b0809cf37330287f60f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 8}