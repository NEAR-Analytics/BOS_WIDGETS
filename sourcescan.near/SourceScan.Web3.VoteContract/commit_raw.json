{"tx_hash": "9Dei8iwduecqaBfmP2AvLPMgVooWSKbrCTS8Mxxs8a2r", "action_id_social": "5BAEgtDW1meZ1V6S3VxusEZymeEMbSaeG5H2yFvHNeKp-0-widget", "block_id": 112395006, "block_timestamp": "2024-02-08T15:50:45.347Z", "signer_id": "sourcescan.near", "widget_name": "SourceScan.Web3.VoteContract", "source_code": "const useNetwork = (mainnet, testnet) => {\n  return context.networkId === \"mainnet\" ? mainnet : testnet;\n};\n\nconst { getConfig } = VM.require(\n  `${useNetwork(\n    \"sourcescan.near\",\n    \"sourcescan.testnet\"\n  )}/widget/SourceScan.libs.constants`\n);\nif (!getConfig) {\n  return <div>loading...</div>;\n}\nconst config = getConfig(context.networkId);\n\nconst { CStack } = VM.require(\n  `${config.ownerId}/widget/SourceScan.UI.Components`\n);\nconst { UpVoteIcon, DownVoteIcon } = VM.require(\n  `${config.ownerId}/widget/SourceScan.UI.Icons`\n);\n\nif (!CStack || !UpVoteIcon || !DownVoteIcon) {\n  return <div>loading...</div>;\n}\n\n// Upvote, Downvote\nconst type = props.type;\nconst isUpvote = type === \"Upvote\";\nconst contractId = props.contractId;\nconst contract = props.contract;\n\nconst [votes, setVotes] = useState(-1);\n\nuseEffect(() => {\n  if (!contract) return;\n\n  let votes = 0;\n  contract.votes.forEach((vote) => {\n    if (vote.vote_type === type) votes++;\n  });\n  setVotes(votes);\n}, [contract]);\n\nconst vote = () => {\n  Near.call(config.contractId, \"vote_contract\", {\n    account_id: contractId,\n    is_upvote: isUpvote,\n  });\n};\n\nreturn (\n  <CStack>\n    <div onClick={vote}>\n      {type === \"Upvote\" ? (\n        <UpVoteIcon width={\"24px\"} height={\"24px\"} />\n      ) : (\n        <DownVoteIcon width={\"24px\"} height={\"24px\"} />\n      )}\n    </div>\n    <div>{votes}</div>\n  </CStack>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sourcescan.near/widget/SourceScan.Web3.VoteContract", "fact_widget_deployments_id": "4c49696068d739e67fe829f4ff018067", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}