{"tx_hash": "79sLQHhD6KuQdjcbA19bThiDvFv2GrqLu74Wx4N5bonD", "action_id_social": "BbAee9PzAKj66nqLLfyXXAciMAW7kkLUnA4DdDTzAsXb-0-widget", "block_id": 110963772, "block_timestamp": "2024-01-21T13:25:12.775Z", "signer_id": "sourcescan.near", "widget_name": "SourceScan.Web3.VoteComment", "source_code": "const { getConfig } = VM.require(\n  `sourcescan.near/widget/SourceScan.libs.constants`\n)\nconst config = getConfig(context.networkId)\n\nconst { Button, CStack } = VM.require(\n  `${config.ownerId}/widget/SourceScan.UI.Components`\n)\nconst { UpVoteIcon, DownVoteIcon } = VM.require(\n  `${config.ownerId}/widget/SourceScan.UI.Icons`\n)\n\nif (!Button || !CStack || !UpVoteIcon || !DownVoteIcon) {\n  return <div>loading...</div>\n}\n\n// Upvote, Downvote\nconst type = props.type\nconst isUpvote = type === 'Upvote'\nconst comment = props.comment\n\nconst [votes, setVotes] = useState(-1)\n\nuseEffect(() => {\n  if (!comment) return\n\n  let votes = 0\n  comment.votes.forEach((vote) => {\n    if (vote.vote_type === type) votes++\n  })\n  setVotes(votes)\n}, [comment])\n\nconst vote = () => {\n  Near.call(config.contractId, 'vote_comment', {\n    comment_id: comment.id,\n    is_upvote: isUpvote,\n  })\n}\n\nreturn (\n  <CStack>\n    <div onClick={vote}>\n      {type === 'Upvote' ? (\n        <UpVoteIcon width={'24px'} height={'24px'} />\n      ) : (\n        <DownVoteIcon width={'24px'} height={'24px'} />\n      )}\n    </div>\n    <div>{votes}</div>\n  </CStack>\n)\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sourcescan.near/widget/SourceScan.Web3.VoteComment", "fact_widget_deployments_id": "a9837672dd70a5f118654cf7e9535cd8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}