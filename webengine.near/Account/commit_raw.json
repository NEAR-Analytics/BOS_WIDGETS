{"tx_hash": "8FhjLkRgdhdVry8PCxUP4dL5yo8XQd3fmpN4JodPrR2B", "action_id_social": "9sbfAF9dtcEfwhHttvRTt4obp4zdjggx3ZqUPJjviqJH-0-widget", "block_id": 112966420, "block_timestamp": "2024-02-16T18:37:23.305Z", "signer_id": "webengine.near", "widget_name": "Account", "source_code": "import { useEffect, useState } from 'react';\nimport s from './Account.module.css';\n\ntype Props = {\n  accountId: string;\n};\n\ntype ProfileData = {\n  description?: string;\n  name?: string;\n  image?: {\n    ipfs_cid?: string;\n    url?: string;\n  };\n  tags?: string[];\n};\n\nfunction Account({ accountId }: Props) {\n  const defaults = {\n    name: accountId,\n    image: {\n      ipfs_cid: 'bafkreibiyqabm3kl24gcb2oegb7pmwdi6wwrpui62iwb44l7uomnn3lhbi',\n    },\n  };\n\n  const [profile, setProfile] = useState<ProfileData>();\n\n  const fetchProfile = async () => {\n    try {\n      const response = await fetch('https://api.near.social/get', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          keys: [`${accountId}/profile/**`],\n        }),\n      });\n      if (!response.ok) throw new Error('profile fetch error');\n      let p: ProfileData = (await response.json())?.[accountId]?.profile;\n      p = { ...defaults, ...p };\n      setProfile(p);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchProfile();\n  }, []);\n\n  return profile ? (\n    <div className={s.wrapper}>\n      <div className={s.avatar}>\n        <img src={ profile.image?.url || `https://ipfs.near.social/ipfs/${profile.image?.ipfs_cid}` } />\n      </div>\n      <p className={s.name}>{profile.name}</p>\n    </div>\n  ) : (\n    <>...</>\n  );\n}\n\nexport default Account as BWEComponent<Props>;", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/webengine.near/widget/Account", "fact_widget_deployments_id": "f25bf532556f415b920a1788948ea1d6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}