{"tx_hash": "H8agBcWdkfPR3Pd83gaahf5n4u87XCMUgQTE5JRMWH3h", "action_id_social": "GsZnBWi77qJZq2Bw1FgKWsBcXpeFnxCSGfyVYsZseGvz-0-widget", "block_id": 100673909, "block_timestamp": "2023-09-08T16:36:51.482Z", "signer_id": "ostolex.near", "widget_name": "StorageChecker", "source_code": "const storageNecessaryKb = props.storageNecessaryKb || 100;\nconst contractName = \"social.near\";\n\nconst storageAvailableData = Near.view(contractName, \"storage_balance_of\", {\n  account_id: context.accountId,\n});\n\nif (!storageAvailableData) {\n  return <h1>Waiting...</h1>;\n}\n\nconst storageAvailableInKb = storageAvailableData.available / Math.pow(10, 22);\n\nfunction depositStorage() {\n  const storageDepositAmount =\n    (storageNecessaryKb - storageAvailableInKb) / 100;\n  Near.call(\n    contractName,\n    \"storage_deposit\",\n    {},\n    300_000_000_000_000,\n    storageDepositAmount * Math.pow(10, 24)\n  );\n}\n\nif (storageAvailableInKb < storageNecessaryKb) {\n  return (\n    <>\n      <h1>\n        You have only {storageAvailableInKb}Kb of storage, but at least\n        {storageNecessaryKb}Kb is needed to perform operation.\n      </h1>\n      <h3>\n        You can add more balance by signing this transaction and adding deposit\n        (1NEAR = 100Kb)\n      </h3>\n      <button class=\"btn btn-success\" onClick={depositStorage}>\n        Deposit storage\n      </button>\n    </>\n  );\n}\n\nreturn (\n  <>\n    <div>You have enough storage balance!</div>\n    <button\n      class=\"btn btn-success\"\n      onClick={() => {\n        props.callback();\n      }}\n    >\n      Go further\n    </button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ostolex.near/widget/StorageChecker", "fact_widget_deployments_id": "30e07d36e848cc3cae8add9f519170d7", "inserted_timestamp": "2023-09-08T18:35:26.436Z", "modified_timestamp": "2023-09-08T18:35:26.436Z", "__row_index": 1}