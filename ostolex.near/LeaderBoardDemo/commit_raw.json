{"tx_hash": "7vCwF4FXWKpb3pJAJGhis4kpgouKn7xXBBCt2htiRewZ", "action_id_social": "FWU5KSGKtdGRbmwZ3umq2GE2obSR1Nau482Rhemkvu8H-0-widget", "block_id": 88679114, "block_timestamp": "2023-04-02T21:46:09.668Z", "signer_id": "ostolex.near", "widget_name": "LeaderBoardDemo", "source_code": "const names = [\n  \"Alex\",\n  \"Yurii\",\n  \"Dmitry\",\n  \"Nick\",\n  \"Maria\",\n  \"Larry\",\n  \"Legend\",\n  \"User222\",\n  \"BestPlayer\",\n  \"Gamer\",\n];\n\nconst data = [];\n\nfor (let i = 0; i < 500; i++) {\n  data.push({\n    name: names[Math.floor(Math.random() * names.length)],\n    score: Math.ceil(Math.random() * 1000),\n  });\n}\n\nState.init({\n  theme: \"light\",\n  displayNums: [],\n  lastIndex: 0,\n  orderBy: 1,\n  orderDirection: 1,\n  rerender: false,\n});\n\ndata.sort((a, b) => {\n  if (a.score < b.score) {\n    return -state.orderDirection;\n  } else if (a.score > b.score) {\n    return state.orderDirection;\n  } else {\n    return 0;\n  }\n});\n\nconst loadMore = (page) => {\n  console.log(state.lastIndex < data.length);\n  data\n    .slice(state.lastIndex, state.lastIndex + 100)\n    .forEach((i) => state.displayNums.push(i));\n  state.lastIndex += 100;\n  State.update();\n};\n\nconst hasMore = () => {\n  console.log(state.lastIndex < data.length);\n  if (state.lastIndex < data.length) {\n    return true;\n  }\n  return false;\n};\n\nconst changeOrder = () => {\n  if (state.orderDirection == 1) {\n    State.update({ orderDirection: -1, displayNums: [], lastIndex: 0 });\n  } else {\n    State.update({ orderDirection: 1, displayNums: [], lastIndex: 0 });\n  }\n};\n\nconst changeTheme = () => {\n  if (state.theme == \"light\") {\n    State.update({ theme: \"dark\" });\n  } else {\n    State.update({ theme: \"light\" });\n  }\n};\n\nreturn (\n  <>\n    <button onClick={changeOrder}>orderBy </button>\n    <button onClick={changeTheme}>{state.theme}</button>\n    <Widget\n      src=\"ostolex.near/widget/LeaderBoardWidget\"\n      props={{\n        thead: { User: \"name\", Score: \"score\" },\n        data: state.displayNums,\n        hasMore: hasMore,\n        loadMore: loadMore,\n        tableClass:\n          state.theme == \"light\" ? \"table table-striped\" : \"table table-dark\",\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ostolex.near/widget/LeaderBoardDemo", "fact_widget_deployments_id": "6c599906e2a840224eb048cad22d1035", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 1}