{"tx_hash": "9tWhR4mYvsRLUr3Ft4XsV2H7e3ASbrkqPKVLqmXy7BxA", "action_id_social": "3R5yzUyeWznSvzNzChQk9Vf6MPJBuGLKgU3eNCFxxecA-0-widget", "block_id": 87581891, "block_timestamp": "2023-03-18T16:33:43.384Z", "signer_id": "evrything.near", "widget_name": "Everything.All.Things", "source_code": "const ERROR_WIDGET = \"evrything.near/widget/Everything.Error\";\nconst LIMIT = 10;\nconst NUM_COLUMNS_SM = 1;\nconst NUM_COLUMNS_LG = 3;\n\n// const type = props.type;\n\n// if (!type) {\n//   return (\n//     <Widget\n//       src={ERROR_WIDGET}\n//       props={{\n//         message: `provided type: \"${props.type}\" is not valid.`,\n//       }}\n//     />\n//   );\n// }\n\nState.init({\n  widgets: [],\n  cursor: 0,\n});\n\nconst loadThings = async () =>\n  asyncFetch(\"https://monkfish-app-ginhc.ondigitalocean.app/graphql\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query:\n        'query findThingsByType($limit: Int, $offset: Int) { findThings(type: {is: \"efiz.near/type/Idea\" }, limit: $limit, offset: $offset) { id, name, type } }',\n    }),\n    variables: {\n      limit: LIMIT,\n      offset: state.cursor,\n    },\n  }).then((res) => {\n    if (res.body) {\n      const things = res.body.data?.findThings;\n\n      things.map((thing) => {\n        state.widgets.push(\n          <div key={thing.id}>\n            <Widget\n              src={\"evrything.near/widget/Everything.View.Thing\"}\n              props={{\n                thingId: thing.id,\n                type: thing.type,\n              }}\n            />\n          </div>\n        );\n      });\n\n      state.cursor = state.cursor + LIMIT;\n\n      State.update();\n    }\n  });\n\nreturn (\n  <InfiniteScroll\n    loadMore={loadThings}\n    hasMore={state.widgets.length % LIMIT === 0}\n  >\n    <Masonry breakpointCols={{ default: NUM_COLUMNS_LG, 800: NUM_COLUMNS_SM }}>\n      {state.widgets}\n    </Masonry>\n  </InfiniteScroll>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/evrything.near/widget/Everything.All.Things", "fact_widget_deployments_id": "7722c13d6cb2961b73e7180d2297edab", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}