{"tx_hash": "AHiFBdeL948epC74MnkspaR4EZEYZD46XXTzxWdVidkb", "action_id_social": "8ke6iL1UAEsttBhRkGqTJXGKZevKSsXFDb5doMZCPogq-0-widget", "block_id": 99808053, "block_timestamp": "2023-08-27T22:33:40.468Z", "signer_id": "vlmoon.near", "widget_name": "RecommendationFeed", "source_code": "const GRAPHQL_ENDPOINT =\r\n  props.GRAPHQL_ENDPOINT ||\r\n  \"https://queryapi-hasura-graphql-24ktefolwq-ew.a.run.app\";\r\n\r\nState.init({\r\n  posts: [],\r\n});\r\n\r\nconst createQuery = () => {\r\n  const indexerQueries = `\r\n  query GetMyFeed {\r\n    dataplatform_near_social_feed_posts(order_by: {block_height: desc}) {\r\n      account_id\r\n      block_timestamp\r\n      content\r\n      comments{account_id,block_height}\r\n      post_likes{account_id,block_height}\r\n    }\r\n  }\r\n`;\r\n  return indexerQueries;\r\n};\r\n\r\nfunction fetchGraphQL(operationsDoc, operationName, variables) {\r\n  return asyncFetch(`${GRAPHQL_ENDPOINT}/v1/graphql`, {\r\n    method: \"POST\",\r\n    headers: { \"x-hasura-role\": \"dataplatform_near\" },\r\n    body: JSON.stringify({\r\n      query: operationsDoc,\r\n      variables: variables,\r\n      operationName: operationName,\r\n    }),\r\n  });\r\n}\r\n\r\nfetchGraphQL(createQuery(type), queryName, {}).then((result) => {\r\n  if (result.status === 200 && result.body) {\r\n    if (result.body.errors) {\r\n      console.log(\"error:\", result.body.errors);\r\n      return;\r\n    }\r\n    let data = result.body.data;\r\n    if (data) {\r\n      const newPosts = data.dataplatform_near_social_feed_posts;\r\n      State.update({\r\n        posts: [...newPosts],\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\nconst renderData = (a) => {\r\n  return <div key={JSON.stringify(a)}>{JSON.stringify(a)}</div>;\r\n};\r\n\r\nconst renderedData = state.posts.map(renderData);\r\n\r\nreturn { renderedData };\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vlmoon.near/widget/RecommendationFeed", "fact_widget_deployments_id": "fe5b5aa877011cd3cf47739877b0a18d", "inserted_timestamp": "2023-08-28T00:34:14.653Z", "modified_timestamp": "2023-08-28T00:34:14.653Z", "__row_index": 6}