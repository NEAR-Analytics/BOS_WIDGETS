{"tx_hash": "EATHPMYVpSvmR4DEJ7cGLQnN1FhTx732xedteMg3SuCn", "action_id_social": "4udE56f69r3dqYbgZ2V844ke2m3WwMPPudCid2w4UPxo-0-widget", "block_id": 113626595, "block_timestamp": "2024-02-26T15:27:12.923Z", "signer_id": "v1.wireframes.near", "widget_name": "Components.Learning.TerminalCard", "source_code": "const text = props.text || \"\";\nconst state = props.state || \"\";\n\nconst code = `\n  <style>\n  html, body, #container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    max-height:80vh;\n    min-height:40vh;\n    margin: 0;\n    padding: 0;\n  }\n  </style>\n  <div id=\"container\"></div>\n  <script src=\"https://unpkg.com/monaco-editor@latest/min/vs/loader.js\"></script>\n  <script>\n  require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' }});\n  window.MonacoEnvironment = { getWorkerUrl: () => proxy };\n  let proxy = URL.createObjectURL(new Blob(['self.MonacoEnvironment = {baseUrl: \"https://unpkg.com/monaco-editor@latest/min/\" };importScripts(\"https://unpkg.com/monaco-editor@latest/min/vs/base/worker/workerMain.js\")'], { type: 'text/javascript' }));\n  \n  let code;\n  let editor;\n  window.addEventListener(\"message\", (e) => {\n      try { \n        code = JSON.parse(e.data).code \n        if (editor) {\n          editor.getModel().setValue(code)\n          document.body.style.opacity = 1;\n        }\n      } catch {}\n  })\n  \n  require([\"vs/editor/editor.main\"], function () {\n      monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n          noSemanticValidation: false,\n          noSyntaxValidation: false,\n          noSuggestionDiagnostics: false,\n          diagnosticCodesToIgnore: [1108],\n      });  \n  \n      editor = monaco.editor.create(document.getElementById('container'), {\n        value: ${JSON.stringify(text)}, // Set your default code here,\n        fixedOverflowWidgets: true,\n        language: 'javascript',\n        width: '100%',\n        fontSize: 16,\n        theme: 'vs-dark',\n        readOnly: true,  \n      });\n  \n      editor.getModel().onDidChangeContent(e => {\n        parent.postMessage(editor.getModel().getValue(), \"*\")\n      })\n  \n      if (code) {\n        document.body.style.opacity = 1;\n        editor.getModel().setValue(code)\n      }\n  });\n  </script>\n  `;\n\nconst StyledPre = styled.pre`\n  page-break-inside: avoid;\n  font-family: monospace;\n  font-size: 12px;\n  line-height: 1.6;\n  margin-bottom: 0.6em;\n  max-width: 100%;\n\n  display: flex;\n  word-wrap: break-word;\n  height: 50vh;\n  max-width: 80vw;\n  margin: auto;\n  max-height: 80vh;\n  min-height: 20vh;\n  position: relative;\n`;\n\nconst PreComponent = ({ children }) => {\n  return <StyledPre>{children}</StyledPre>;\n};\n\nreturn (\n  <>\n    <PreComponent>\n      <iframe\n        srcDoc={code}\n        style={{\n          width: \"100%\",\n          position: \"absolute\",\n          top: \"0\",\n          height: \"calc(100vh)\",\n          zIndex: 1,\n        }}\n      />\n      {state.script == null && openScript(true)}\n    </PreComponent>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/v1.wireframes.near/widget/Components.Learning.TerminalCard", "fact_widget_deployments_id": "a47ba1ef2fbe2cd0aab59a4ec764b671", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}