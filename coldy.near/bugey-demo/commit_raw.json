{"tx_hash": "C5hzsSDa3rjpxWdT9D9YLKuFGzaAdQWmcq6n2pm2XRqn", "action_id_social": "Gqb68EjfcDkmusZJXe6hfGaPaDfvfpHYu4yvwsbgqySG-0-widget", "block_id": 104544415, "block_timestamp": "2023-10-30T14:58:22.431Z", "signer_id": "coldy.near", "widget_name": "bugey-demo", "source_code": "State.init({\n  projectId: 1,\n  currentProject: null,\n  pendingProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  approvedProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  declinedProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  activeTab: \"pending\",\n});\n\nconst contractId = \"bugeye.learnclub.near\";\n\nconst getProjectsList = (page, limit) => {\n  return Near.view(contractId, \"get_projects\", {\n    page,\n    limit,\n  });\n};\n\nconst getProposalsByProject = (project_id, status, page, limit) => {\n  return Near.view(contractId, \"get_proposals_by_project\", {\n    project_id,\n    status,\n    page,\n    limit,\n  });\n};\n\nconst testView = () => {\n  const projects = getProjectsList(1, 50);\n  if (projects[0]) {\n    c;\n  }\n  console.log(projects);\n};\n\nconst tabStyle = {\n  display: \"flex\",\n  border: \"1px solid #ccc\",\n  backgroundColor: \"#f1f1f1\",\n};\n\nconst tabButtonStyle = {\n  background: \"inherit\",\n  border: \"none\",\n  outline: \"none\",\n  cursor: \"pointer\",\n  padding: \"14px 16px\",\n  transition: \"0.3s\",\n  fontSize: \"17px\",\n  flex: \"1\",\n  boxSizing: \"border-box\",\n};\n\nconst tabButtonHoverStyle = {\n  backgroundColor: \"#ddd\",\n};\n\nconst tabButtonActiveStyle = {\n  backgroundColor: \"#ccc\",\n};\n\nconst tabcontentStyle = {\n  display: \"none\",\n  padding: \"6px 12px\",\n  border: \"1px solid #ccc\",\n  borderTop: \"none\",\n};\n\nconst openTab = (tabName) => {\n  State.update({\n    activeTab: tabName,\n  });\n  console.log(state.activeTab);\n};\n\nconst setPendingProposals = () => {\n  const pendingProposalsData = getProposalsByProject(state.projectId, 0, 1, 10);\n  if (pendingProposalsData[0] && pendingProposalsData[1]) {\n    State.update({\n      pendingProposals: {\n        pages: pendingProposalsData[1],\n        proposals: pendingProposalsData[0],\n      },\n    });\n  }\n};\n\nconst viewProposals = (proposals) => {\n  if (proposals.length > 0) {\n    const proposalElements = proposals.map((proposal) => (\n      <div key={proposal.id} id={proposal.id} className=\"proposal\">\n        <div className=\"id\">\n          Issue Id: <strong>{proposal.id}</strong>\n        </div>\n        <div className=\"reward\">\n          Requested Reward:{\" \"}\n          <strong>\n            {proposal.price} Near{\" \"}\n            <a\n              href={`https://explorer.mainnet.near.org/accounts/${proposal.author_wallet}`}\n              target=\"_blank\"\n            >\n              (by {proposal.author_wallet})\n            </a>\n          </strong>\n        </div>\n        <div className=\"project\">\n          Project: <strong>{proposal.project_id}</strong>\n        </div>\n        <div className=\"description\">Proposal: {proposal.text}</div>\n      </div>\n    ));\n\n    return <div>{proposalElements}</div>;\n  } else {\n    return <div>No issues</div>;\n  }\n};\n\nconst setInitial = () => {\n  setPendingProposals();\n};\n\nsetInitial();\n\nreturn (\n  <div>\n    <div id=\"approvals-block\">\n      <h1 id=\"bug-eye-project-title\">Test</h1>\n      <div style={tabStyle} className=\"tab\">\n        <button\n          id=\"pending-tab\"\n          className={`tablinks ${\n            state.activeTab === \"pending\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"pending\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"pending\")}\n        >\n          Pending Issues\n        </button>\n        <button\n          id=\"approval-tab\"\n          className={`tablinks ${\n            state.activeTab === \"approved\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"approved\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"approved\")}\n        >\n          Approved Issues\n        </button>\n        <button\n          id=\"declined-tab\"\n          className={`tablinks ${\n            state.activeTab === \"declined\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"declined\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"declined\")}\n        >\n          Declined Issues\n        </button>\n      </div>\n      <div\n        id=\"pending\"\n        className={`tabcontent ${\n          state.activeTab === \"pending\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"pending\" && (\n          <div>\n            <h3>Pending Issues</h3>\n            <div id=\"proposals-pending-content\">\n              {viewProposals(state.pendingProposals.proposals)}\n            </div>\n          </div>\n        )}\n      </div>\n      <div\n        id=\"approved\"\n        className={`tabcontent ${\n          state.activeTab === \"approved\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"approved\" && (\n          <div>\n            <h3>Approved Issues</h3>\n            <div id=\"proposals-approved-content\">\n              Content for Approved Issues\n            </div>\n          </div>\n        )}\n      </div>\n      <div\n        id=\"declined\"\n        className={`tabcontent ${\n          state.activeTab === \"declined\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"declined\" && (\n          <div>\n            <h3>Declined Issues</h3>\n            <div id=\"proposals-declined-content\">\n              Content for Declined Issues\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n    <button onClick={testView}>test view</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/coldy.near/widget/bugey-demo", "fact_widget_deployments_id": "6e1ff383a3d09bfff98872b5f7732903", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}