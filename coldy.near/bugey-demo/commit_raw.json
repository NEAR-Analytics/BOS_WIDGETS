{"tx_hash": "5YtC5g5W3BvYgxYuFSci9uL6E12CFzFpg8SWts8MeCHL", "action_id_social": "GdxghyWKD4QATjssRDEmGbxD2yZzTV84QLMusUMTpDvK-0-widget", "block_id": 104541854, "block_timestamp": "2023-10-30T14:07:22.870Z", "signer_id": "coldy.near", "widget_name": "bugey-demo", "source_code": "State.init({\n  projectId: 1,\n  pendingProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  approvedProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  declinedProposals: {\n    pages: 1,\n    proposals: [],\n  },\n  activeTab: \"pending\",\n});\n\nconst contractId = \"bugeye.learnclub.near\";\n\nconst getProjectsList = (page, limit) => {\n  return Near.view(contractId, \"get_projects\", {\n    page,\n    limit,\n  });\n};\n\nconst getProposalsByProject = (project_id, status, page, limit) => {\n  return Near.view(contractId, \"get_proposals_by_project\", {\n    project_id,\n    status,\n    page,\n    limit,\n  });\n};\n\nconst testView = () => {\n  State.update({\n    projects: getProjectsList(1, 10),\n  });\n  const proposals = getProposalsByProject(state.projectId, 1, 1, 10);\n};\n\nconst tabStyle = {\n  display: \"flex\",\n  border: \"1px solid #ccc\",\n  backgroundColor: \"#f1f1f1\",\n};\n\nconst tabButtonStyle = {\n  background: \"inherit\",\n  border: \"none\",\n  outline: \"none\",\n  cursor: \"pointer\",\n  padding: \"14px 16px\",\n  transition: \"0.3s\",\n  fontSize: \"17px\",\n  flex: \"1\",\n  boxSizing: \"border-box\",\n};\n\nconst tabButtonHoverStyle = {\n  backgroundColor: \"#ddd\",\n};\n\nconst tabButtonActiveStyle = {\n  backgroundColor: \"#ccc\",\n};\n\nconst tabcontentStyle = {\n  display: \"none\",\n  padding: \"6px 12px\",\n  border: \"1px solid #ccc\",\n  borderTop: \"none\",\n};\n\nconst openTab = (tabName) => {\n  State.update({\n    activeTab: tabName,\n  });\n  console.log(state.activeTab);\n};\n\nconst setPendingProposals = () => {\n  const pendingProposalsData = getProposalsByProject(state.projectId, 0, 1, 10);\n  if (pendingProposalsData[0] && pendingProposalsData[1]) {\n    State.update({\n      pendingProposals: {\n        pages: pendingProposalsData[1],\n        proposals: pendingProposalsData[0],\n      },\n    });\n  }\n};\n\nconst viewProposals = (proposals) => {\n  let content = \"\";\n  if (proposals.length > 0) {\n    for (let proposal of proposals) {\n      content += `<div id=\"${proposal.id}\" class=\"proposal\">\n            <div class=\"id\">Issue Id: <strong>${proposal.id}</strong></div>\n            <div class=\"reward\">Requested Reward: <strong>${proposal.price} Near  <a href=\"https://explorer.mainnet.near.org/accounts/${proposal.author_wallet}\" target=\"_blank\">(by ${proposal.author_wallet})</a></strong></div>\n            <div class=\"project\">\n                Project: <strong>${proposal.project_id}</strong>\n            </div>\n            <div class=\"description\">Proposal: ${proposal.text}</div>\n        </div>`;\n    }\n  } else {\n    content = \"No issues\";\n  }\n  console.log(content);\n  return content;\n};\n\nconst setInitial = () => {\n  setPendingProposals();\n};\n\nsetInitial();\n\nreturn (\n  <div>\n    <div id=\"approvals-block\">\n      <h1 id=\"bug-eye-project-title\">Test</h1>\n      <div style={tabStyle} className=\"tab\">\n        <button\n          id=\"pending-tab\"\n          className={`tablinks ${\n            state.activeTab === \"pending\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"pending\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"pending\")}\n        >\n          Pending Issues\n        </button>\n        <button\n          id=\"approval-tab\"\n          className={`tablinks ${\n            state.activeTab === \"approved\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"approved\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"approved\")}\n        >\n          Approved Issues\n        </button>\n        <button\n          id=\"declined-tab\"\n          className={`tablinks ${\n            state.activeTab === \"declined\" ? \"active\" : \"\"\n          }`}\n          style={\n            state.activeTab === \"declined\"\n              ? { ...tabButtonStyle, ...tabButtonActiveStyle }\n              : tabButtonStyle\n          }\n          onClick={() => openTab(\"declined\")}\n        >\n          Declined Issues\n        </button>\n      </div>\n      <div\n        id=\"pending\"\n        className={`tabcontent ${\n          state.activeTab === \"pending\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"pending\" && (\n          <div>\n            <h3>Pending Issues</h3>\n            <div id=\"proposals-pending-content\">\n              {viewProposals(state.pendingProposals.proposals)}\n            </div>\n          </div>\n        )}\n      </div>\n      <div\n        id=\"approved\"\n        className={`tabcontent ${\n          state.activeTab === \"approved\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"approved\" && (\n          <div>\n            <h3>Approved Issues</h3>\n            <div id=\"proposals-approved-content\">\n              Content for Approved Issues\n            </div>\n          </div>\n        )}\n      </div>\n      <div\n        id=\"declined\"\n        className={`tabcontent ${\n          state.activeTab === \"declined\" ? \"activeTab\" : \"\"\n        }`}\n      >\n        {state.activeTab === \"declined\" && (\n          <div>\n            <h3>Declined Issues</h3>\n            <div id=\"proposals-declined-content\">\n              Content for Declined Issues\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n    <button onClick={testView}>test view</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/coldy.near/widget/bugey-demo", "fact_widget_deployments_id": "a7b7ebe30a1c1f02f2b57a4c9841d1ae", "inserted_timestamp": "2023-10-30T15:53:24.088Z", "modified_timestamp": "2023-10-30T15:53:24.088Z", "__row_index": 10}