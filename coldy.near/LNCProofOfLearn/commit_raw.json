{"tx_hash": "96w1zz6vbRj5rquJPrZvaHGeEusWErVcjwhVCFxbrEdh", "action_id_social": "F2NRHYU5H3GffWdETC9CUa4smCJWwWJNkpZw1DcWfP55-0-widget", "block_id": 102750627, "block_timestamp": "2023-10-06T13:01:46.356Z", "signer_id": "coldy.near", "widget_name": "LNCProofOfLearn", "source_code": "context.initialPage = 1;\ncontext.currentPage = context.initialPage;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  text-align: center;\n`;\n\nconst TableHeader = styled.th`\n  background-color: #f2f2f2;\n  padding: 8px;\n  border: 1px solid #ddd;\n`;\n\nconst TableCell = styled.td`\n  padding: 8px;\n  border: 1px solid #ddd;\n`;\n\nconst TableRow = styled.tr`\n  background-color: ${(props) => (props.even ? \"#f2f2f2\" : \"white\")};\n\n  &:hover {\n    background-color: #ddd;\n  }\n`;\n\nconst Pagination = styled.div`\n  text-align: center;\n  margin-top: 20px;\n`;\n\nconst PaginationButton = styled.button`\n  background-color: #008CBA;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  margin: 4px;\n  cursor: pointer;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #005f79;\n  }\n`;\n\nconst response = fetch(\n  `https://learnnear.club/wp-json/api/lnw-proof-of-learns-data?wallet=${context.accountId}&p=1`,\n  {\n    method: \"GET\",\n  }\n);\n\nif (response?.body?.error) {\n  return (\n    <>\n      <div class=\"container border border-info p-3\">\n        <h3 class=\"text-center\">\n          <span class=\"text-decoration-underline\">{response.body.message}</span>\n        </h3>\n      </div>\n    </>\n  );\n}\n\nconst pages = response?.body?.total_pages;\ncontext.data = response?.body?.data;\n\nconst handlePageChange = (newPage) => {\n  if (newPage >= 1 && newPage <= pages) {\n    context.currentPage = newPage;\n    const pgResponse = fetch(\n      `https://learnnear.club/wp-json/api/lnw-proof-of-learns-data?wallet=${context.accountId}&p=${newPage}`,\n      {\n        method: \"GET\",\n      }\n    );\n    console.log(context.currentPage);\n    console.log(context.data);\n    context.data = pgResponse?.body?.data;\n  }\n  render(\"<div>1</div>\");\n};\n\nreturn (\n  <>\n    <h2>Proof of learns for {context.accountId}</h2>\n    {context.data !== null ? (\n      <div>\n        <Table>\n          <thead>\n            <tr>\n              <TableHeader>Date</TableHeader>\n              <TableHeader>nLEARNs</TableHeader>\n              <TableHeader>Entry</TableHeader>\n            </tr>\n          </thead>\n          <tbody>\n            {context.data.map((item, index) => (\n              <TableRow key={index} even={index % 2 === 0}>\n                <TableCell>{item.date}</TableCell>\n                <TableCell>{item.creds}</TableCell>\n                <TableCell>{item.message}</TableCell>\n              </TableRow>\n            ))}\n          </tbody>\n        </Table>\n        <br />\n        <Pagination>\n          <PaginationButton\n            onClick={() => handlePageChange(context.currentPage - 1)}\n          >\n            Prev\n          </PaginationButton>\n          <span>{`Page ${context.currentPage} of ${pages}`}</span>\n          <PaginationButton\n            onClick={() => handlePageChange(context.currentPage + 1)}\n          >\n            Next\n          </PaginationButton>\n        </Pagination>\n      </div>\n    ) : (\n      <div>Loading ...</div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/coldy.near/widget/LNCProofOfLearn", "fact_widget_deployments_id": "c59ae839ce382a69797543e44888481d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}