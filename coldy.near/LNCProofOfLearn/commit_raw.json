{"tx_hash": "6v6J9FpqZzWz5PH6ozdQ393GMBBhRaDw9yTZLgCyXdjv", "action_id_social": "4Ls9QGec6Aj2cJp89PZ9i9wupd25NfCG9duTG69Waapd-0-widget", "block_id": 102749744, "block_timestamp": "2023-10-06T12:44:53.832Z", "signer_id": "coldy.near", "widget_name": "LNCProofOfLearn", "source_code": "const initialPage = 1;\nlet currentPage = initialPage;\nconst response = fetch(\n  `https://learnnear.club/wp-json/api/lnw-proof-of-learns-data?wallet=${context.accountId}&p=1`,\n  {\n    method: \"GET\",\n  }\n);\n\nif (response?.body?.error) {\n  return (\n    <>\n      <div class=\"container border border-info p-3\">\n        <h3 class=\"text-center\">\n          <span class=\"text-decoration-underline\">{response.body.message}</span>\n        </h3>\n      </div>\n    </>\n  );\n}\n\nconst pages = response?.body?.total_pages;\ncontext.data = response?.body?.data;\n\nconst handlePageChange = (newPage) => {\n  if (newPage >= 1 && newPage <= pages) {\n    currentPage = newPage;\n    const pgResponse = fetch(\n      `https://learnnear.club/wp-json/api/lnw-proof-of-learns-data?wallet=${context.accountId}&p=${newPage}`,\n      {\n        method: \"GET\",\n      }\n    );\n    context.data = pgResponse?.body?.data;\n  }\n};\n\nreturn (\n  <>\n    <h2>Proof of learns for {context.accountId}</h2>\n    {context.data !== null ? (\n      <div>\n        <table id=\"proof-of-learns-table\">\n          <tr>\n            <th>Date</th>\n            <th>nLEARNs</th>\n            <th>Entry</th>\n          </tr>\n          <div id=\"important-content\">\n            {context.data.map((item) => (\n              <tr>\n                <td>{item.date}</td>\n                <td>{item.creds}</td>\n                <td>{item.message}</td>\n              </tr>\n            ))}\n          </div>\n        </table>\n        <br />\n        <div className=\"pagination\">\n          <button onClick={() => handlePageChange(currentPage - 1)}>\n            Prev\n          </button>\n          <span>{`Page ${currentPage} of ${pages}`}</span>\n          <button onClick={() => handlePageChange(currentPage + 1)}>\n            Next\n          </button>\n        </div>\n      </div>\n    ) : (\n      <div>Loading ...</div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/coldy.near/widget/LNCProofOfLearn", "fact_widget_deployments_id": "6e5e90c8355f9aea2d7e12e574920319", "inserted_timestamp": "2023-10-06T14:39:26.240Z", "modified_timestamp": "2023-10-06T14:39:26.240Z", "__row_index": 2}