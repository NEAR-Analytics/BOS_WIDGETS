{"tx_hash": "8GUZpyEy25Jyb9tDogbrGVKVEAnbvXEDiQQvu1aBUPKt", "action_id_social": "DVtJ8sfguoytWZM6FWFzdNarANuDzaq5BKHfiEMs5dLP-0-widget", "block_id": 104579122, "block_timestamp": "2023-10-31T01:43:25.366Z", "signer_id": "owa-is-bos.near", "widget_name": "Maverick-LP-BinsModal", "source_code": "const BINS = props.bins ? props.bins : [];\nconst TOKENS = props.tokens ? props.tokens : {};\nconst setBins = props.setBins;\nconst closeModal = props.closeModal;\nconst allChecked = props.allChecked;\n\nState.init({\n  allChecked: allChecked,\n  allBins: BINS,\n});\n\nconst formatNumberToken = (n) => {\n  let result;\n\n  if (n == 0) {\n    return 0;\n  }\n\n  if (n >= 1000000) {\n    result = (n / 1000000).toFixed(2) + \"m\";\n  } else if (n >= 1000) {\n    result = (n / 1000).toFixed(2) + \"k\";\n  } else {\n    result = n.toFixed(2);\n  }\n\n  if (parseFloat(result) < 0.01) {\n    return \"<0.01\";\n  }\n\n  return result;\n};\n\nconst formatNumber = (n) => {\n  return n.toFixed(2);\n};\n\nconst handleSelectAllBins = () => {\n  const allChecked = !state.allChecked;\n  const newData = state.allBins.map((bin) => ({\n    ...bin,\n    selected: allChecked,\n  }));\n  State.update({ allChecked, allBins: newData });\n};\n\nconst handleSelectBin = (b) => {\n  const updatedBins = state.allBins.map((bin) => {\n    if (bin.binId === b.binId) {\n      return { ...bin, selected: !bin.selected };\n    }\n    return bin;\n  });\n  State.update({ allBins: updatedBins });\n  const countBinsToRemove = updatedBins.filter((b) => b.selected).length;\n  if (countBinsToRemove != state.allBins.length) {\n    State.update({ allChecked: false });\n  } else {\n    State.update({ allChecked: true });\n  }\n};\n\nconst getPoolsSelected = () => {\n  return state.allBins.filter((b) => b.selected).length;\n};\n\nreturn (\n  <div\n    style={{\n      width: \"350px\",\n      padding: \"22px\",\n      background: \"rgb(3, 5, 23)\",\n      color: \"rgb(255, 255, 255)\",\n      backgroundImage:\n        \"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))\",\n      margin: \"auto\",\n      position: \"absolute\",\n      overflowY: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"calc(100% - 64px)\",\n      maxWidth: \"600px\",\n      border: \"1px solid rgba(255, 255, 255, 0.1)\",\n      borderRadius: \"20px\",\n      right: \"0\",\n      left: \"0\",\n      top: \"10px\",\n      zIndex: \"100\",\n    }}\n  >\n    <div style={{ color: \"rgb(255, 255, 255)\" }}>\n      <div\n        style={{\n          minWidth: \"320px\",\n          borderRadius: \"8px\",\n          marginBottom: \"16px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          placeContent: \"space-between flex-start\",\n        }}\n      >\n        <div>{getPoolsSelected()} Bins Selected</div>\n        <div style={{ float: \"right\", right: \"16px\", position: \"absolute\" }}>\n          <button\n            style={{\n              display: \"inline-flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              position: \"relative\",\n              boxSizing: \"border-box\",\n              backgroundColor: \"transparent\",\n              outline: \"0px\",\n              border: \"0px\",\n              cursor: \"pointer\",\n              userSelect: \"none\",\n              verticalAlign: \"middle\",\n              appearance: \"none\",\n              textDecoration: \"none\",\n              textAlign: \"center\",\n              flex: \"0 0 auto\",\n              fontSize: \"1.5rem\",\n              padding: \"8px\",\n              borderRadius: \"50%\",\n              overflow: \"visible\",\n              transition:\n                \"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\n              color: \"rgb(158, 158, 158)\",\n              margin: \"-8px\",\n            }}\n            onClick={async () => {\n              closeModal();\n            }}\n          >\n            x\n          </button>\n        </div>\n      </div>\n      <h6\n        style={{\n          margin: \"0px\",\n          fontWeight: \"400\",\n          fontSize: \"0.75rem\",\n          lineHeight: \"1.57\",\n          color: \"rgba(255, 255, 255, 0.5)\",\n        }}\n      >\n        Select bins to remove liquidity.\n      </h6>\n      <div\n        style={{\n          display: \"flex\",\n          marginTop: \"16px\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <h5\n          style={{\n            margin: \"0px\",\n            lineHeight: \"1.35rem\",\n            fontWeight: \"600\",\n            fontSize: \"1rem\",\n          }}\n        >\n          Select All Bins\n        </h5>\n        <span\n          style={{\n            display: \"inline-flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            position: \"relative\",\n            boxSizing: \"border-box\",\n            backgroundColor: \"transparent\",\n            outline: \"0px\",\n            border: \"0px\",\n            margin: \"0px\",\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            verticalAlign: \"middle\",\n            appearance: \"none\",\n            textDecoration: \"none\",\n            borderRadius: \"50%\",\n            color: \"rgba(255, 255, 255, 0.5)\",\n            padding: \"0px\",\n          }}\n        >\n          <div class=\"form-check\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              checked={state.allChecked}\n              onChange={() => handleSelectAllBins()}\n            />\n          </div>\n        </span>\n      </div>\n      <div style={{ width: \"100%\", fontSize: \"0.875rem\", marginTop: \"15px\" }}>\n        <div style={{ height: \"230px\", overflow: \"auto\" }}>\n          <div\n            style={{\n              display: \"inline-flex\",\n              flexDirection: \"column\",\n              position: \"relative\",\n              minWidth: \"0px\",\n              padding: \"0px\",\n              margin: \"0px\",\n              border: \"0px\",\n              verticalAlign: \"top\",\n              width: \"100%\",\n            }}\n          >\n            {state.allBins.map((b, key) => {\n              return (\n                <div\n                  style={{\n                    color: \"rgb(255, 255, 255)\",\n                    backgroundImage:\n                      \"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))\",\n                    overflow: \"hidden\",\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.01)\",\n                    borderRadius: \"20px\",\n                    marginBottom: \"15px\",\n                  }}\n                >\n                  <label\n                    style={{\n                      cursor: \"pointer\",\n                      verticalAlign: \"middle\",\n                      display: \"flex\",\n                      marginLeft: \"0px\",\n                      marginRight: \"0px\",\n                      flexDirection: \"row-reverse\",\n                      alignItems: \"start\",\n                      padding: \"14px\",\n                      justifyContent: \"space-between\",\n                    }}\n                  >\n                    <div class=\"form-check\">\n                      <input\n                        class=\"form-check-input\"\n                        type=\"checkbox\"\n                        checked={b.selected}\n                        onChange={() => handleSelectBin(b)}\n                      />\n                    </div>\n                    <span\n                      style={{\n                        margin: \"0px\",\n                        fontWeight: \"400\",\n                        fontSize: \"1rem\",\n                        lineHeight: \"1.1875rem\",\n                      }}\n                    >\n                      <div style={{ padding: \"4px\", width: \"100%\" }}>\n                        <div style={{ display: \"flex\" }}>\n                          <h6\n                            style={{\n                              margin: \"0px 0px 8px\",\n                              fontWeight: \"450\",\n                              fontSize: \"1rem\",\n                              lineHeight: \"1.1875rem\",\n                              borderRadius: \"5px\",\n                              display: \"flex\",\n                            }}\n                          >\n                            <span\n                              style={{\n                                display: \"inline\",\n                                marginRight: \"5px\",\n                                fontSize: \"0.75rem\",\n                              }}\n                            >\n                              Id: {b.binId}\n                            </span>\n                            <span\n                              style={{\n                                display: \"inline\",\n                                marginRight: \"5px\",\n                                fontSize: \"0.75rem\",\n                              }}\n                            >\n                              Total Supply: {formatNumber(b.totalSupply)}\n                              <br /> Balance: {formatNumber(b.balance)}\n                            </span>\n                          </h6>\n                        </div>\n                        <h6\n                          style={{\n                            margin: \"0px 0px 8px\",\n                            fontWeight: \"400\",\n                            fontSize: \"0.75rem\",\n                            lineHeight: \"1.57\",\n                            color: \"rgba(255, 255, 255, 0.5)\",\n                          }}\n                        >\n                          Bin Position\n                        </h6>\n                        <div style={{ display: \"flex\" }}>\n                          <div\n                            style={{\n                              borderRadius: \"5px\",\n                              border: \"1px solid rgb(97, 97, 97)\",\n                              backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                              display: \"flex\",\n                              alignItems: \"center\",\n                              padding: \"3px\",\n                            }}\n                          >\n                            <img\n                              src={TOKENS.tokenALogo}\n                              style={{ height: \"17px\" }}\n                            />\n                            &nbsp;\n                            {formatNumberToken(b.reserveA)}\n                          </div>\n                          &nbsp;\n                          <div\n                            style={{\n                              borderRadius: \"5px\",\n                              border: \"1px solid rgb(97, 97, 97)\",\n                              backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                              display: \"flex\",\n                              alignItems: \"center\",\n                              padding: \"3px\",\n                            }}\n                          >\n                            <img\n                              src={TOKENS.tokenBLogo}\n                              style={{ height: \"17px\" }}\n                            />\n                            &nbsp;\n                            {formatNumberToken(b.reserveB)}\n                          </div>\n                        </div>\n                      </div>\n                    </span>\n                  </label>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <button\n          style={{\n            display: \"inline-flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            position: \"relative\",\n            boxSizing: \"border-box\",\n            outline: \"0px\",\n            border: \"0px\",\n            margin: \"15px 0px 0px\",\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            verticalAlign: \"middle\",\n            appearance: \"none\",\n            textDecoration: \"none\",\n            lineHeight: \"1.0625rem\",\n            minWidth: \"64px\",\n            backgroundColor: \"rgb(100, 0, 255)\",\n            borderRadius: \"0.625rem\",\n            textTransform: \"capitalize\",\n            padding: \"12px 18px\",\n            fontWeight: \"700\",\n            fontSize: \"1rem\",\n            width: \"100%\",\n          }}\n          onClick={async () => {\n            setBins(state.allBins, state.allChecked);\n          }}\n        >\n          Select\n        </button>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"name": "Maverick-LP-BinsModal"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/owa-is-bos.near/widget/Maverick-LP-BinsModal", "fact_widget_deployments_id": "b4d61e389acc0a6847ad9254ae168ef2", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}