{"tx_hash": "2DfWKzYVDCQyiEsX4QveFA5Pd8iaoeFuiqHgBvgzThgC", "action_id_social": "ANuMF1utxJSVoWxBAiSemrHBif64FGB7Ggz34DQsSrgc-0-widget", "block_id": 104586418, "block_timestamp": "2023-10-31T04:01:38.903Z", "signer_id": "owa-is-bos.near", "widget_name": "Maverick-LP-NewOptionsModal", "source_code": "let FEE = props.fee > 0 ? props.fee : 0.1;\nlet WIDTH = props.width > 0 ? props.width : 0.5;\nlet POOLNAME1 = props.poolName1;\nlet POOLNAME2 = props.poolName2;\nconst setFeeWidth = props.setFeeWidth;\nconst closeModal = props.closeModal;\n\nconsole.log(props);\n\nif (!state.filterPools) {\n  asyncFetch(`https://api.mav.xyz/api/v3/pools/324\n`)\n    .catch((err) => {\n      console.log(err);\n    })\n    .then((res) => {\n      const allPools = res.body.pools;\n      const filterPools = allPools.filter(\n        (p) => p.name == POOLNAME1 || p.name == POOLNAME2\n      );\n      if (!state.validated) {\n        State.update({\n          validated: true,\n          filterPools: filterPools,\n        });\n        validateOptions(FEE, WIDTH, filterPools);\n      }\n    });\n}\n\nconst stylesComponent = `\ninput[type=range] {\n  -webkit-appearance: none;\n  margin: 10px 0;\n  width: 100%;\n  background: none;\npadding: 0px;\n}\ninput[type=range]:focus {\n  outline: none;\n}\n  \ninput[type=range]::-webkit-slider-runnable-track {\n  height: 5px;\n  cursor: pointer;\n  animate: 0.2s;\n  background: #9B00CB;\n  border-radius: 5px;\n}\ninput[type=range]::-webkit-slider-thumb {\n  box-shadow: 0px 0px 0px #000000;\n  border: 1px solid #000000;\n  height: 18px;\n  width: 18px;\n  border-radius: 25px;\n  background: #EBEBEB;\n  cursor: pointer;\n  -webkit-appearance: none;\n  margin-top: -7px;\n}\n`;\n\nconst feeAllowedValues = [\n  0.002, 0.005, 0.008, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06, 0.07, 0.08, 0.09,\n  0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5, 0.75, 1.0, 2.0, 3.0,\n];\n\nconst widthAllowedValues = [\n  0.01, 0.02, 0.04, 0.1, 0.2, 0.4, 0.5, 1, 2, 5, 10, 25, 50,\n];\n\nState.init({\n  valueFeeRange: feeAllowedValues.indexOf(FEE),\n  valueWidthRange: widthAllowedValues.indexOf(WIDTH),\n  valueFee: FEE,\n  valueWidth: WIDTH,\n  validated: false,\n});\n\nconst handleSliderFeeChange = (event) => {\n  State.update({\n    valueFeeRange: event.target.value,\n    valueFee: feeAllowedValues[event.target.value],\n  });\n  validateOptions(feeAllowedValues[event.target.value], state.valueWidth);\n};\n\nconst handleSliderWidthChange = (event) => {\n  State.update({\n    valueWidthRange: event.target.value,\n    valueWidth: widthAllowedValues[event.target.value],\n  });\n  validateOptions(state.valueFee, widthAllowedValues[event.target.value]);\n};\n\nconst validateOptions = (fee, width, filterPools) => {\n  const existPool = filterPools\n    ? filterPools.filter((p) => p.fee * 100 == fee && p.width * 100 == width)\n    : state.filterPools.filter(\n        (p) => p.fee * 100 == fee && p.width * 100 == width\n      );\n\n  if (existPool.length > 0) {\n    State.update({\n      existPool: true,\n    });\n  } else {\n    State.update({\n      existPool: false,\n    });\n  }\n};\n\nconst formatNumberFee = (n) => {\n  if (n >= 0.01) {\n    return n.toFixed(2) + \" %\";\n  }\n  return n.toFixed(3) + \" %\";\n};\n\nconst formatNumberWidth = (n) => {\n  if (n < 0.1) {\n    return n.toFixed(2) + \" %\";\n  }\n  if (n < 1) {\n    return n.toFixed(1) + \" %\";\n  }\n  return n + \" %\";\n};\n\nconst css = fetch(\n  \"https://raw.githubusercontent.com/yaairnaavaa/Maverick/main/createPool.css\"\n).body;\n\nif (!css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    ${stylesComponent}\n`,\n  });\n}\n\nconst Theme = state.theme;\n\nreturn (\n  <Theme\n    style={{\n      width: \"350px\",\n      padding: \"22px\",\n      background: \"rgb(3, 5, 23)\",\n      color: \"rgb(255, 255, 255)\",\n      backgroundImage:\n        \"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))\",\n      margin: \"auto\",\n      position: \"absolute\",\n      overflowY: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"calc(100% - 64px)\",\n      maxWidth: \"600px\",\n      border: \"1px solid rgba(255, 255, 255, 0.1)\",\n      borderRadius: \"20px\",\n      right: \"0\",\n      left: \"0\",\n      top: \"10px\",\n      zIndex: \"100\",\n    }}\n  >\n    <div style={{ color: \"rgb(255, 255, 255)\" }}>\n      <div\n        style={{\n          minWidth: \"320px\",\n          borderRadius: \"8px\",\n          marginBottom: \"16px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          placeContent: \"space-between flex-start\",\n        }}\n      >\n        <div>Select Options</div>\n        <div style={{ float: \"right\", right: \"16px\", position: \"absolute\" }}>\n          <button\n            style={{\n              display: \"inline-flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              position: \"relative\",\n              boxSizing: \"border-box\",\n              backgroundColor: \"transparent\",\n              outline: \"0px\",\n              border: \"0px\",\n              cursor: \"pointer\",\n              userSelect: \"none\",\n              verticalAlign: \"middle\",\n              appearance: \"none\",\n              textDecoration: \"none\",\n              textAlign: \"center\",\n              flex: \"0 0 auto\",\n              fontSize: \"1.5rem\",\n              padding: \"8px\",\n              borderRadius: \"50%\",\n              overflow: \"visible\",\n              transition:\n                \"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\n              color: \"rgb(158, 158, 158)\",\n              margin: \"-8px\",\n            }}\n            onClick={async () => {\n              closeModal();\n            }}\n          >\n            x\n          </button>\n        </div>\n      </div>\n      {state.filterPools ? (\n        <div style={{ width: \"100%\", fontSize: \"0.875rem\", marginTop: \"15px\" }}>\n          <div\n            style={{\n              height: \"150px\",\n              overflow: \"auto\",\n              border: \"1px solid rgba(255, 255, 255, 0.1)\",\n              borderRadius: \"20px\",\n              padding: \"14px\",\n            }}\n          >\n            <div class=\"row\">\n              <div class=\"col-12\">\n                <span>Fee Tier:</span>\n              </div>\n              <div class=\"col-8\">\n                <input\n                  type=\"range\"\n                  min={0}\n                  max={23}\n                  step={1}\n                  value={state.valueFeeRange}\n                  onChange={handleSliderFeeChange}\n                  list=\"allowedValues\"\n                />\n              </div>\n              <div class=\"col-4\">\n                <span\n                  style={{\n                    display: \"flex\",\n                    width: \"100%\",\n                    justifyContent: \"center\",\n                    marginRight: \"5px\",\n                    fontSize: \"0.75rem\",\n                    border: \"1px solid rgb(97, 97, 97)\",\n                    borderRadius: \"5px\",\n                    padding: \"3px\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {formatNumberFee(state.valueFee)}\n                </span>\n              </div>\n            </div>\n            <div class=\"row mt-2\">\n              <div class=\"col-12\">\n                <span>Bin Width:</span>\n              </div>\n              <div class=\"col-8\">\n                <input\n                  type=\"range\"\n                  min={0}\n                  max={12}\n                  step={1}\n                  value={state.valueWidthRange}\n                  onChange={handleSliderWidthChange}\n                  list=\"allowedValues\"\n                />\n              </div>\n              <div class=\"col-4\">\n                <span\n                  style={{\n                    display: \"flex\",\n                    width: \"100%\",\n                    justifyContent: \"center\",\n                    marginRight: \"5px\",\n                    fontSize: \"0.75rem\",\n                    border: \"1px solid rgb(97, 97, 97)\",\n                    borderRadius: \"5px\",\n                    padding: \"3px\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {formatNumberWidth(state.valueWidth)}\n                </span>\n              </div>\n            </div>\n          </div>\n          {state.validated && !state.existPool ? (\n            <button\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                position: \"relative\",\n                boxSizing: \"border-box\",\n                outline: \"0px\",\n                border: \"0px\",\n                margin: \"15px 0px 0px\",\n                cursor: \"pointer\",\n                userSelect: \"none\",\n                verticalAlign: \"middle\",\n                appearance: \"none\",\n                textDecoration: \"none\",\n                lineHeight: \"1.0625rem\",\n                minWidth: \"64px\",\n                backgroundColor: \"rgb(100, 0, 255)\",\n                borderRadius: \"0.625rem\",\n                textTransform: \"capitalize\",\n                padding: \"12px 18px\",\n                fontWeight: \"700\",\n                fontSize: \"1rem\",\n                width: \"100%\",\n              }}\n              onClick={async () => {\n                setFeeWidth(state.valueFee, state.valueWidth);\n              }}\n            >\n              Select\n            </button>\n          ) : (\n            <button\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                position: \"relative\",\n                boxSizing: \"border-box\",\n                outline: \"0px\",\n                border: \"1px solid rgb(100, 0, 255)\",\n                margin: \"15px 0px 0px\",\n                userSelect: \"none\",\n                verticalAlign: \"middle\",\n                appearance: \"none\",\n                textDecoration: \"none\",\n                lineHeight: \"1.0625rem\",\n                minWidth: \"64px\",\n                borderRadius: \"0.625rem\",\n                textTransform: \"capitalize\",\n                padding: \"12px 18px\",\n                fontWeight: \"700\",\n                fontSize: \"1rem\",\n                width: \"100%\",\n                background: \"none\",\n              }}\n            >\n              Pool Already Deployed\n            </button>\n          )}\n        </div>\n      ) : (\n        <div class=\"titleStep\">Loading data...</div>\n      )}\n    </div>\n  </Theme>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/owa-is-bos.near/widget/Maverick-LP-NewOptionsModal", "fact_widget_deployments_id": "b1dc9021232375b29de96d3dc917c6e8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}