{"tx_hash": "BoerrR2RyHxuNtV2sCrh3PWuFmce38huqph7UTy8yzGK", "action_id_social": "HhBsWGhYjdpTEhQTPniQrWe9DdLerXb2ShCfLGRBGzee-0-widget", "block_id": 117618888, "block_timestamp": "2024-04-25T21:34:12.169Z", "signer_id": "owa-is-bos.near", "widget_name": "BOS-CreateNFT", "source_code": "// Address of the smart contract.\nconst nftContract = \"0x80fe30fc135dD9538fAE625a8761cCe5A51De69a\";\n\n// URL to the JSON file containing the ABI of the contract.\nconst nftMinterAbi = fetch(\n  \"https://raw.githubusercontent.com/open-web-academy/BOS-NFTMinter/main/NFTMinterABI.txt\"\n);\n\nif (!nftMinterAbi.ok) {\n  return \"Loading\";\n}\n\n// These lines use the useState hook to create state variables for assigning information.\nconst [sender, setSender] = useState(null);\nconst [tokens, setTokens] = useState([]);\n\nconst [title, setTitle] = useState(\"Example title\");\nconst [description, setDescription] = useState(\"Example description\");\nconst [receiver, setReceiver] = useState(\n  \"0x34149390029Bbf4f4D9E7AdEa715D7055e145C05\"\n);\nconst [minting, setMinting] = useState(false);\nconst [tabSelected, setTabSelected] = useState(\"mint\");\n\n//We define the navigation tabs of the component\nconst pills = [\n  { id: \"mint\", title: \"Mint\" },\n  { id: \"nftList\", title: \"NFT List\" },\n];\n\n// Validation to obtain the account we are connected to the component with\nif (!sender) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    setSender(accounts[0]);\n  }\n}\n\n// Method to obtain the tokens created in the smart contract.\nconst getTokens = () => {\n  const contract = new ethers.Contract(\n    nftContract,\n    nftMinterAbi.body,\n    Ethers.provider().getSigner()\n  );\n  let nfts = [];\n  contract.totalNFTs().then((res) => {\n    for (let i = 0; i < parseInt(res); i++) {\n      contract.getNFT(i).then((nft) => {\n        nfts.push(nft);\n        setTokens(nfts);\n      });\n    }\n  });\n};\n\nuseEffect(() => {\n  if (sender) {\n    getTokens();\n  }\n}, []);\n\n// Method to crate a new tokens in the smart contract.\nconst createToken = () => {\n  const contract = new ethers.Contract(\n    nftContract,\n    nftMinterAbi.body,\n    Ethers.provider().getSigner()\n  );\n\n  contract\n    .mintNFT(title, description, state.image.cid, receiver)\n    .then((res) => {\n      setMinting(true);\n\n      setTimeout(() => {\n        setTitle(\"Example title\");\n        setDescription(\"Example description\");\n        setReceiver(\"0x34149390029Bbf4f4D9E7AdEa715D7055e145C05\");\n        setMinting(false);\n        getTokens();\n      }, \"20000\");\n    });\n};\n\n// We define all the necessary styles for our component by using styled components.\nconst Wrapper = styled.div`\n* {\n  font-family: 'system-ui','Inter', 'Space Grotesk' !important;\n}\n\n.connectB {\n        background: #ECA227;\n        color: #1E1E1E;\n        font-weight: 700;\n        padding: 15px 20px;\n        border-radius: 1rem;\n        border: none;\n        &:hover {\n            background: #4A21A5;\n            color: white;\n        }: \n}\n\n.uploadIMG {\n        background: #ECA227;\n        color: #1E1E1E;\n        font-weight: 700;\n        padding: 15px 20px;\n        border-radius: 1rem;\n        border: none;\n        &:hover {\n            background: #4A21A5;\n            color: white;\n        }\n    }\n`;\n\nconst PillButtonActive = styled.div`\nfont-weight: 700;\nbackground-color: #ECA227;\ncolor: black;\nborder-radius: 10px;\nmargin: 0 10px 0 10px;\ncursor: pointer;\npadding: 7px 0 7px 0;\n  }\n`;\n\nconst PillButton = styled.div`\nfont-weight: 700;\ncursor: pointer;\nbackground-color: #1E1E1E;\ncolor: white;\npadding-bottom: 5px;\nborder-radius: 10px;\nmargin: 0 10px 0 10px;\npadding: 7px 0 7px 0;\n  }\n`;\n\nconst ItemBackground = styled.div`\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        background-repeat: no-repeat;\n        background-size: cover;\n        margin-bottom: -50px;\n        `;\n\nconst ItemContainer = styled.div`\n        margin-top: 30px;\n        box-sizing: border-box;\n        min-width: 320px;\n        width: 100%;\n        padding: 0px 32px;\n        position: relative;\n        `;\n\nconst ItemTitle = styled.h3`\n        text-align: center;\n        color: black;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 1rem;\n        `;\n\nconst ItemImage = styled.img`\n            width: 40px;\n            margin-right: 15px;\n        `;\n\nconst ItemSubTitle = styled.div`\n        text-align: center;\n        color: yellow;\n        margin-bottom: 5px;\n        `;\n\nconst ItemHeader = styled.div`\n        background: #ECA227;\n        color: #1E1E1E;\n        font-weight: 400;\n        font-size: 12px;\n        line-height: 1.6em;\n        border-radius: 20px;\n        margin: 0px;\n        padding: 20px;\n        box-shadow: none;\n        color: rgb(255, 255, 255);\n        `;\n\nconst ItemBody = styled.div`\n        font-weight: 400;\n        font-size: 1em;\n        line-height: 1.6em;\n        border-radius: 0px 0px 20px 20px;\n        margin: -20px 0px 0px;\n        padding: 32px;\n        box-shadow: none;\n        background: #1E1E1E;\n        color: black;\n        `;\n\nconst ItemMintNumber = styled.label`\n        font-size: 20px;\n        font-weight: 800;\n        color: black;\n        `;\n\nconst ItemMintButton = styled.button`\n        background: #ECA227;\n        color: #1E1E1E;\n        font-weight: 700;\n        padding: 15px 20px;\n        border-radius: 1rem;\n        border: none;\n        &:hover {\n            background: #4A21A5;\n            color: white;\n        }\n        `;\n\nconst Card = styled.div`\n        padding: 1em;\n        border: 1px solid #ECA227;\n        gap: 2em;\n        margin: 10px auto;\n        border-radius: .7em;\n`;\n\nconst ImageCard = styled.div`\n        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n        height:fit-content;\n        max-height:500px;\n        width: 90%;\n        max-width: 500px;\n        border-radius: 1rem;\n        &>img{\n            object-fit: contain;\n        }\n`;\n\n// FETCH CSS\nconst cssFont = fetch(\n  \"https://fonts.googleapis.com/css2?family=Lexend:wght@200;300;400;500;600;700;800\"\n).body;\nconst css = fetch(\n  \"https://nativonft.mypinata.cloud/ipfs/QmQNCGVCwmkPxcKqDdubvb8Goy5xP8md2MfWCAix7HxgGE\"\n).body;\n\nif (!cssFont || !css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    font-family: Lexend;\n    ${cssFont}\n    ${css}\n`,\n  });\n}\nconst Theme = state.theme;\n\n// Finally we render the component where we call the necessary methods to interact with the smart contract.\nreturn (\n  <Theme>\n    <Wrapper>\n      <div\n        style={{\n          display: \"flex\",\n          \"justify-content\": \"center\",\n        }}\n      ></div>\n      <br />\n      <ul\n        className=\"nav nav-pills nav-fill mb-4\"\n        id=\"pills-tab2\"\n        role=\"tablist2\"\n        style={{ \"margin-top\": \"15px\" }}\n      >\n        {pills.map(({ id, title }, i) => (\n          <li className=\"nav-item\" role=\"presentation\" key={i}>\n            {tabSelected == id ? (\n              <PillButtonActive\n                onClick={() => {\n                  setTabSelected(id);\n                  getTokens();\n                }}\n              >\n                {title}\n              </PillButtonActive>\n            ) : (\n              <PillButton\n                onClick={() => {\n                  setTabSelected(id);\n                  getTokens();\n                }}\n              >\n                {title}\n              </PillButton>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      <div\n        className=\"tab-content\"\n        id=\"pills-tabContent\"\n        style={{ display: \"flex\", \"justify-content\": \"center\" }}\n      >\n        {tabSelected == \"mint\" ? (\n          <ItemBackground>\n            <ItemContainer>\n              <ItemHeader>\n                <ItemTitle>\n                  <label>Create NFT</label>\n                </ItemTitle>\n              </ItemHeader>\n              <ItemBody>\n                {sender ? (\n                  !minting ? (\n                    <div class=\"row\" style={{ color: \"white\" }}>\n                      <div class=\"col-12\">\n                        <Card className=\"d-flex flex-column align-items-center\">\n                          {!!state.image.cid ?? (\n                            <ImageCard>\n                              <img\n                                src={`https://ipfs.io/ipfs/` + state.image.cid}\n                                alt=\"uploaded image\"\n                                width=\"100%\"\n                                height=\"100%\"\n                                className=\"rounded-3\"\n                              />\n                            </ImageCard>\n                          )}\n                          <div>\n                            <IpfsImageUpload\n                              image={state.image}\n                              className=\"btn border-0 rounded-3 uploadIMG\"\n                            />\n                          </div>\n                        </Card>\n                      </div>\n                      <div class=\"col-6\" style={{ alignContent: \"end\" }}>\n                        <div class=\"row\">\n                          <div class=\"col-12\">\n                            <div class=\"mb-3\">\n                              <label for=\"symbol\" class=\"form-label\">\n                                Title\n                              </label>\n                              <input\n                                value={title}\n                                class=\"form-control\"\n                                onChange={(e) => setTitle(e.target.value)}\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-6\">\n                        <div\n                          style={{\n                            height: \"100%\",\n                            display: \"flex\",\n                            \"justify-content\": \"center\",\n                            \"align-items\": \"center\",\n                          }}\n                        >\n                          <img\n                            src=\"https://ipfs.near.social/ipfs/bafkreifotevq6g6ralhvutlcssaasa7xbfjjc6mbo5hlnvgpxxgfmwswmq\"\n                            style={{\n                              height: \"150px\",\n                            }}\n                          ></img>\n                        </div>\n                      </div>\n                      <div class=\"col-6\">\n                        <div class=\"mb-3\">\n                          <label for=\"symbol\" class=\"form-label\">\n                            Description\n                          </label>\n                          <input\n                            value={description}\n                            class=\"form-control\"\n                            onChange={(e) => setDescription(e.target.value)}\n                          />\n                        </div>\n                      </div>\n                      <div class=\"col-6\">\n                        <div class=\"mb-3\">\n                          <label for=\"supply\" class=\"form-label\">\n                            Receiver\n                          </label>\n                          <input\n                            value={receiver}\n                            class=\"form-control\"\n                            placeholder=\"\"\n                            onChange={(e) => setReceiver(e.target.value)}\n                          />\n                        </div>\n                      </div>\n                      <div class=\"col-12\">\n                        <div class=\"mb-3\">\n                          <ItemMintButton\n                            onClick={async () => {\n                              createToken();\n                            }}\n                          >\n                            Mint\n                          </ItemMintButton>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <div\n                      class=\"row\"\n                      style={{ display: \"flex\", \"justify-content\": \"center\" }}\n                    >\n                      <img\n                        src=\"https://ipfs.near.social/ipfs/bafkreifotevq6g6ralhvutlcssaasa7xbfjjc6mbo5hlnvgpxxgfmwswmq\"\n                        style={{\n                          height: \"200px\",\n                          width: \"200px\",\n                        }}\n                      ></img>\n                      <br />\n                      <label\n                        style={{\n                          \"font-size\": \"20px\",\n                          \"font-weight\": \"400\",\n                          \"text-align\": \"center\",\n                          color: \"white\",\n                        }}\n                      >\n                        Minting...\n                      </label>\n                    </div>\n                  )\n                ) : (\n                  <div style={{ \"text-align\": \"center\" }}>\n                    <Web3Connect\n                      className=\"connectB\"\n                      connectLabel=\"Connect with Web3\"\n                    />\n                  </div>\n                )}\n              </ItemBody>\n            </ItemContainer>\n          </ItemBackground>\n        ) : (\n          <ItemBackground>\n            <ItemContainer>\n              <ItemHeader>\n                <ItemTitle>\n                  <label>NFT List</label>\n                </ItemTitle>\n              </ItemHeader>\n              <ItemBody>\n                <table className=\"table table-sm\">\n                  <thead>\n                    <tr class=\"p-3 mb-2 bg-primary text-white text-center\">\n                      <th>Id</th>\n                      <th>Title</th>\n                      <th>Description</th>\n                      <th>Img</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {tokens.map((data, key) => {\n                      return (\n                        <tr class=\"text-center\">\n                          <td>{key}</td>\n                          <td>{data[0]}</td>\n                          <td>{data[1]}</td>\n                          <td>\n                            <img\n                              src={\"https://ipfs.near.social/ipfs/\" + data[2]}\n                              style={{\n                                height: \"100px\",\n                                width: \"100px\",\n                              }}\n                            ></img>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </ItemBody>\n            </ItemContainer>\n          </ItemBackground>\n        )}\n      </div>\n    </Wrapper>\n  </Theme>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/owa-is-bos.near/widget/BOS-CreateNFT", "fact_widget_deployments_id": "83700d823086421e7e62a6ebf7e54f6a", "inserted_timestamp": "2024-04-25T22:40:25.925Z", "modified_timestamp": "2024-04-25T23:42:31.543Z", "__row_index": 0}