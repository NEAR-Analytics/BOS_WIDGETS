{"tx_hash": "9tt6duXkAHkYu9GkaDPRGaNT3ePepZqxR4AVVxoHdjpD", "action_id_social": "3LFUBJUsyD1RiJnHFTYzF7UJsDVw7aQBagG6XHP4e2f3-0-widget", "block_id": 104574583, "block_timestamp": "2023-10-31T00:18:52.010Z", "signer_id": "owa-is-bos.near", "widget_name": "Maverick-LP-OptionsModal", "source_code": "let POOLOPTIONS = props.poolOptions;\nlet POOLOPTIONSELECTED = props.poolOptionsSelected;\nconst setPoolOption = props.setPoolOption;\nconst closeModal = props.closeModal;\n\nconst getFeeWidthFormat = (n) => {\n  const decimalPart = (n % 1).toFixed(20).substring(2);\n  const zeroCount = decimalPart.match(/^0*/)[0].length;\n  var format = (n * 100).toFixed(zeroCount > 3 ? 3 : 2);\n  return format + \"%\";\n};\n\nconst formatNumber = (n) => {\n  if (n < 0.01 && n > 0) {\n    return \"<$0.01\";\n  } else if (n >= 1000000) {\n    return \"$\" + (n / 1000000).toFixed(2) + \"m\";\n  } else if (n >= 1000) {\n    return \"$\" + (n / 1000).toFixed(2) + \"k\";\n  } else {\n    return \"$\" + n.toFixed(2);\n  }\n};\n\nconst formatAPR = (n) => {\n  if (n == 0) {\n    return null;\n  }\n  const roundedNumber = (n * 100).toFixed(3);\n  const [integerPart, decimalPart] = roundedNumber.split(\".\");\n  const formattedInteger = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  const formattedNumber = `${formattedInteger}.${decimalPart}%`;\n  return formattedNumber;\n};\n\nconst getPercentageSelectedFormat = (n) => {\n  if (n < 1) {\n    return \"<1%\";\n  }\n  return n.toFixed(2) + \"%\";\n};\n\nconst handleSelectPoolOption = (selectedPool) => {\n  const updatedPoolOptions = state.allPoolOptions.map((pool) => {\n    if (pool.id === selectedPool.id) {\n      State.update({ poolOptionSelected: pool });\n      return { ...pool, selected: !pool.selected };\n    } else {\n      return { ...pool, selected: false };\n    }\n  });\n  State.update({ allPoolOptions: updatedPoolOptions });\n};\n\nconst setPercentageSelected = () => {\n  let poolOptions = POOLOPTIONS;\n  const totalTVL = poolOptions.reduce(\n    (total, pool) => total + pool.tvl.amount,\n    0\n  );\n  console.log(totalTVL);\n  for (let i = 0; i < poolOptions.length; i++) {\n    const tvlAmount = poolOptions[i].tvl.amount;\n    const percentageSelected = (tvlAmount * 100) / totalTVL;\n    poolOptions[i].percentageSelected = percentageSelected;\n  }\n\n  poolOptions.sort((a, b) => b.tvl.amount - a.tvl.amount);\n  console.log(poolOptions);\n\n  State.update({ allPoolOptions: poolOptions });\n  handleSelectPoolOption(POOLOPTIONSELECTED);\n};\n\nif (!state.allPoolOptions) {\n  setPercentageSelected();\n}\n\nreturn (\n  <div\n    style={{\n      width: \"350px\",\n      padding: \"22px\",\n      background: \"rgb(3, 5, 23)\",\n      color: \"rgb(255, 255, 255)\",\n      backgroundImage:\n        \"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))\",\n      margin: \"auto\",\n      position: \"absolute\",\n      overflowY: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"calc(100% - 64px)\",\n      maxWidth: \"600px\",\n      border: \"1px solid rgba(255, 255, 255, 0.1)\",\n      borderRadius: \"20px\",\n      right: \"0\",\n      left: \"0\",\n      top: \"10px\",\n      zIndex: \"100\",\n    }}\n  >\n    <div style={{ color: \"rgb(255, 255, 255)\" }}>\n      <div\n        style={{\n          minWidth: \"320px\",\n          borderRadius: \"8px\",\n          marginBottom: \"16px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          placeContent: \"space-between flex-start\",\n        }}\n      >\n        <div>Pool Options of {POOLOPTIONS[0].name}</div>\n        <div style={{ float: \"right\", right: \"16px\", position: \"absolute\" }}>\n          <button\n            style={{\n              display: \"inline-flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              position: \"relative\",\n              boxSizing: \"border-box\",\n              backgroundColor: \"transparent\",\n              outline: \"0px\",\n              border: \"0px\",\n              cursor: \"pointer\",\n              userSelect: \"none\",\n              verticalAlign: \"middle\",\n              appearance: \"none\",\n              textDecoration: \"none\",\n              textAlign: \"center\",\n              flex: \"0 0 auto\",\n              fontSize: \"1.5rem\",\n              padding: \"8px\",\n              borderRadius: \"50%\",\n              overflow: \"visible\",\n              transition:\n                \"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\n              color: \"rgb(158, 158, 158)\",\n              margin: \"-8px\",\n            }}\n            onClick={async () => {\n              closeModal();\n            }}\n          >\n            x\n          </button>\n        </div>\n      </div>\n      <h6\n        style={{\n          margin: \"0px\",\n          fontWeight: \"400\",\n          fontSize: \"0.75rem\",\n          lineHeight: \"1.57\",\n          color: \"rgba(255, 255, 255, 0.5)\",\n        }}\n      >\n        Select an item from the list\n      </h6>\n\n      <div style={{ width: \"100%\", fontSize: \"0.875rem\", marginTop: \"15px\" }}>\n        <div style={{ height: \"230px\", overflow: \"auto\" }}>\n          <div\n            style={{\n              display: \"inline-flex\",\n              flexDirection: \"column\",\n              position: \"relative\",\n              minWidth: \"0px\",\n              padding: \"0px\",\n              margin: \"0px\",\n              border: \"0px\",\n              verticalAlign: \"top\",\n              width: \"100%\",\n            }}\n          >\n            {state.allPoolOptions.map((po, key) => {\n              return (\n                <div\n                  style={{\n                    color: \"rgb(255, 255, 255)\",\n                    backgroundImage:\n                      \"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))\",\n                    overflow: \"hidden\",\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.01)\",\n                    borderRadius: \"20px\",\n                    marginBottom: \"15px\",\n                    cursor: \"pointer\",\n                  }}\n                  onClick={() => handleSelectPoolOption(po)}\n                >\n                  <div class=\"row\">\n                    <div class=\"col-10\" style={{ padding: \"20px\" }}>\n                      <span\n                        style={{\n                          margin: \"0px\",\n                          fontWeight: \"400\",\n                          fontSize: \"1rem\",\n                          lineHeight: \"1.1875rem\",\n                        }}\n                      >\n                        <div style={{ padding: \"4px\", width: \"100%\" }}>\n                          <div style={{ display: \"flex\" }}>\n                            <h6\n                              style={{\n                                margin: \"0px 0px 8px\",\n                                fontWeight: \"450\",\n                                fontSize: \"1rem\",\n                                lineHeight: \"1.1875rem\",\n                                borderRadius: \"5px\",\n                                display: \"flex\",\n                              }}\n                            >\n                              <span\n                                style={{\n                                  display: \"inline\",\n                                  marginRight: \"5px\",\n                                  fontSize: \"0.75rem\",\n                                  border: \"1px solid rgb(97, 97, 97)\",\n                                  borderRadius: \"5px\",\n                                  padding: \"3px\",\n                                  backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                                }}\n                              >\n                                {getFeeWidthFormat(po.fee)} Fee\n                              </span>\n                              <span\n                                style={{\n                                  display: \"inline\",\n                                  marginRight: \"5px\",\n                                  fontSize: \"0.75rem\",\n                                  border: \"1px solid rgb(97, 97, 97)\",\n                                  borderRadius: \"5px\",\n                                  padding: \"3px\",\n                                  backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                                }}\n                              >\n                                {getFeeWidthFormat(po.width)} Width\n                              </span>\n                            </h6>\n                          </div>\n                          <div class=\"row\" style={{ fontSize: \"10px\" }}>\n                            <div class=\"col-4\">\n                              <span\n                                style={{ color: \"rgba(255, 255, 255, 0.5)\" }}\n                              >\n                                TVL\n                              </span>\n                              <br />\n                              {formatNumber(po.tvl.amount)}\n                            </div>\n                            <div class=\"col-4\">\n                              <span\n                                style={{ color: \"rgba(255, 255, 255, 0.5)\" }}\n                              >\n                                Volume 24h\n                              </span>\n                              <br />\n                              {formatNumber(po.volume.amount)}\n                            </div>\n                            <div class=\"col-4\">\n                              <span\n                                style={{ color: \"rgba(255, 255, 255, 0.5)\" }}\n                              >\n                                Fees 24h\n                              </span>\n                              <br />\n                              {formatNumber(po.feeVolume)}\n                            </div>\n                          </div>\n                          <div\n                            class=\"row\"\n                            style={{ fontSize: \"10px\", marginTop: \"5px\" }}\n                          >\n                            <div class=\"col-4\">\n                              <span\n                                style={{\n                                  color:\n                                    po.tvlChange < 0\n                                      ? \"rgba(255, 255, 255, 0.5)\"\n                                      : \"rgb(38, 189, 0)\",\n                                }}\n                              >\n                                {formatAPR(po.tvlChange)}\n                              </span>\n                            </div>\n                            <div class=\"col-4\">\n                              <span\n                                style={{\n                                  color:\n                                    po.volumeChange < 0\n                                      ? \"rgba(255, 255, 255, 0.5)\"\n                                      : \"rgb(38, 189, 0)\",\n                                }}\n                              >\n                                {formatAPR(po.volumeChange)}\n                              </span>\n                            </div>\n                            <div class=\"col-4\">\n                              <span\n                                style={{\n                                  color:\n                                    po.feeChange < 0\n                                      ? \"rgba(255, 255, 255, 0.5)\"\n                                      : \"rgb(38, 189, 0)\",\n                                }}\n                              >\n                                {formatAPR(po.feeChange)}\n                              </span>\n                            </div>\n                          </div>\n\n                          <div\n                            class=\"row\"\n                            style={{ fontSize: \"10px\", marginTop: \"5px\" }}\n                          >\n                            <div\n                              class=\"col-12\"\n                              style={{\n                                display: \"flex\",\n                                justifyContent: \"start\",\n                              }}\n                            >\n                              <span\n                                style={{\n                                  display: \"inline\",\n                                  marginRight: \"5px\",\n                                  fontSize: \"0.75rem\",\n                                  border: \"1px solid rgb(97, 97, 97)\",\n                                  borderRadius: \"5px\",\n                                  padding: \"3px\",\n                                  backgroundColor: \"rgba(255, 255, 255, 0.15)\",\n                                }}\n                              >\n                                {getPercentageSelectedFormat(\n                                  po.percentageSelected\n                                )}{\" \"}\n                                select\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </span>\n                    </div>\n                    <div class=\"col-2\" style={{ padding: \"20px\" }}>\n                      <div class=\"form-check\">\n                        <input\n                          class=\"form-check-input\"\n                          type=\"checkbox\"\n                          checked={po.selected}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <button\n          style={{\n            display: \"inline-flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            position: \"relative\",\n            boxSizing: \"border-box\",\n            outline: \"0px\",\n            border: \"0px\",\n            margin: \"15px 0px 0px\",\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            verticalAlign: \"middle\",\n            appearance: \"none\",\n            textDecoration: \"none\",\n            lineHeight: \"1.0625rem\",\n            minWidth: \"64px\",\n            backgroundColor: \"rgb(100, 0, 255)\",\n            borderRadius: \"0.625rem\",\n            textTransform: \"capitalize\",\n            padding: \"12px 18px\",\n            fontWeight: \"700\",\n            fontSize: \"1rem\",\n            width: \"100%\",\n          }}\n          onClick={async () => {\n            setPoolOption(state.allPoolOptions, state.poolOptionSelected);\n          }}\n        >\n          Select\n        </button>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"name": "Maverick-LP-OptionsModal"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/owa-is-bos.near/widget/Maverick-LP-OptionsModal", "fact_widget_deployments_id": "94047b0387426cbd4e6ca8c2af983548", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}