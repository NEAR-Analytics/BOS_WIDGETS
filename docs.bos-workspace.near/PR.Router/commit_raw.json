{"tx_hash": "FRTg57cdMkSGA7VGKHyxaBwvJMqCnfbVB7igvXa3hXLj", "action_id_social": "EtJcfFoVE92JmgX1ZMrknWeqPRXbsBt7HkSZdcV6LUfW-0-widget", "block_id": 116558750, "block_timestamp": "2024-04-10T18:47:36.516Z", "signer_id": "docs.bos-workspace.near", "widget_name": "PR.Router", "source_code": "const { href } = VM.require(\"devs.near/widget/lib.url\") || {\n  href: () => \"/\",\n};\nconst Content = styled.div`\n  width: 100%;\n  height: 100%;\n`;\nfunction Router({ config, ...passProps }) {\n  const { routes, PageNotFound, debug, param } = config;\n  let activeRoute;\n  let activeRouteProps = {};\n  let params = {};\n  if (!param) param = \"page\";\n  const matchingRoute = routes.find((route) => {\n    // if no path is provided, match root path\n    if (passProps[param] === undefined && route.path === \"/\") {\n      return true;\n    } else if (passProps[param] === route.path.substring(1)) {\n      return true;\n    }\n    return false;\n  });\n  if (matchingRoute) {\n    activeRoute = matchingRoute;\n  } else {\n    // Fallback to dynamic path route if no other route matches\n    const dynamicPathRoute = routes.find((route) => {\n      const path = route.path.substring(1);\n      return path.startsWith(\":\") || path.startsWith(\"*\");\n    });\n    if (dynamicPathRoute) {\n      const key = dynamicPathRoute.path\n        .substring(1)\n        .replace(\"*\", \"\")\n        .replace(\":\", \"\");\n      activeRoute = dynamicPathRoute;\n      params = { _params: { [key]: passProps[param] || \"\" } };\n    } else {\n      activeRoute = PageNotFound;\n    }\n  }\n  if (activeRoute.element) {\n    activeRouteProps = {\n      ...activeRouteProps,\n      ...activeRoute.element.initialProps,\n    };\n  }\n  if (debug) {\n    return (\n      <div key={JSON.stringify(activeRoute)}>\n        <pre>{JSON.stringify(activeRoute, null, 2)}</pre>\n        <pre>{JSON.stringify(passProps, null, 2)}</pre>\n      </div>\n    );\n  } else {\n    return (\n      <Content key={param + JSON.stringify(activeRoute)}>\n        <Widget\n          src={activeRoute.element.src}\n          props={{ ...activeRouteProps, ...params }}\n          loading={<div style={{ height: \"100%\", width: \"100%\" }} />}\n        />\n      </Content>\n    );\n  }\n}\nreturn { Router };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/docs.bos-workspace.near/widget/PR.Router", "fact_widget_deployments_id": "706391712e274a07db536f41ab28a500", "inserted_timestamp": "2024-04-10T19:44:08.846Z", "modified_timestamp": "2024-04-10T19:44:08.846Z", "__row_index": 0}