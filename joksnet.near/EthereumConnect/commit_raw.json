{"tx_hash": "EepWH7CqnKAv8EVmMYhayj3VcuYDpKhGG6QukvdZgBMn", "action_id_social": "FBzdNshW6o47jTFzxV4NdVptWPJGj9M11z8CidXYYPGe-0-widget", "block_id": 105254227, "block_timestamp": "2023-11-08T23:08:58.379Z", "signer_id": "joksnet.near", "widget_name": "EthereumConnect", "source_code": "const signer = Ethers.send(\"eth_requestAccounts\")[0];\n\nconsole.log(\"signer\", signer);\n\nif (!state.chainId && signer) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\n\nfunction connectWallet() {\n  if (window.ethereum) {\n    window.ethereum.enable();\n  }\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  console.log(\"accounts\", accounts);\n  if (!accounts || accounts.length === 0) {\n    State.update({ error: \"Could not connect to wallet\" });\n  } else {\n    const account = accounts[0];\n    State.update({ account });\n  }\n}\n\nfunction retry() {\n  State.update({ error: undefined });\n}\n\nif (state.error) {\n  return (\n    <>\n      <p style={{ backgroundColor: \"red\", color: \"white\" }}>\n        Something happen: {state.error}\n      </p>\n      <button onClick={retry}>Retry</button>\n    </>\n  );\n}\n\nif (!state.chainId || !signer) {\n  return (\n    <p>\n      Please signin:\n      <button onClick={connectWallet}>Connect Wallet</button>\n    </p>\n  );\n}\nif (state.chainId !== 100) {\n  return <p>Switch to Gnosis</p>;\n}\n\nreturn (\n  <p>\n    Chain: {state.chainId} | Account: {sender}\n  </p>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/joksnet.near/widget/EthereumConnect", "fact_widget_deployments_id": "cb133a07729c929fd5f313d9e28f1502", "inserted_timestamp": "2023-11-09T00:56:57.392Z", "modified_timestamp": "2023-11-09T00:56:57.392Z", "__row_index": 1}