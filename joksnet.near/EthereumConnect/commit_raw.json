{"tx_hash": "E3V7EeCGUEyGtV5YeW3cZfd3iDA3hAmsq7fQpqJrh6RE", "action_id_social": "G7xxzgCkbTM7VCDPLr6duUegsDEsXnHMvCbwxYhYNvZ2-0-widget", "block_id": 105254655, "block_timestamp": "2023-11-08T23:16:37.391Z", "signer_id": "joksnet.near", "widget_name": "EthereumConnect", "source_code": "const signer = Ethers.send(\"eth_requestAccounts\")[0];\n\nconsole.log(\"signer\", signer);\n\nif (!state.chainId && signer) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\n\nfunction isConnected() {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  console.log(\"accounts\", accounts);\n  if (!accounts || accounts.length === 0) {\n    State.update({\n      error: \"Could not connect to wallet\",\n    });\n  } else {\n    const account = accounts[0];\n    State.update({ account });\n  }\n}\n\nfunction connectWallet() {\n  if (window.ethereum) {\n    ethereum.enable().then(isConnected);\n  } else {\n    isConnected();\n  }\n}\n\nfunction retry() {\n  State.update({ error: undefined });\n}\n\nif (state.error) {\n  return (\n    <>\n      <p style={{ backgroundColor: \"red\", color: \"white\" }}>\n        Something happen: {state.error}\n      </p>\n      <button onClick={retry}>Retry</button>\n    </>\n  );\n}\n\nif (!state.chainId || !signer) {\n  return (\n    <p>\n      <button onClick={connectWallet}>Connect Wallet</button>\n    </p>\n  );\n}\nif (state.chainId !== 100) {\n  return <p>Switch to Gnosis</p>;\n}\n\nreturn (\n  <p>\n    Chain: {state.chainId} | Account: {sender}\n  </p>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/joksnet.near/widget/EthereumConnect", "fact_widget_deployments_id": "e1f3147548f4ec52899fcd3d3418def8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}