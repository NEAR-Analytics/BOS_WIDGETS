{"tx_hash": "ES48TiuiiavBYfneNbSP9iuJP82Abp1Ca5uFWMHCpQKR", "action_id_social": "FEwGFwaKBJnj6AGeWJgBAgEHoiEi8s1Axyr6kjh2bUXa-0-widget", "block_id": 108337049, "block_timestamp": "2023-12-19T15:19:07.029Z", "signer_id": "likelyisland.near", "widget_name": "Omagotchi", "source_code": "const CHAIN_IDS = {\n  BITKUB_TESTNET: 25925,\n  ETH_JFIN_TESTNET: 3502,\n  EVMOS: 9001,\n};\n\nconst SUPPORT_CHAIN = [\n  {\n    chainIdNumber: CHAIN_IDS.BITKUB_TESTNET,\n    chainName: \"Bitkub Chain\",\n    chainId: \"0x\" + CHAIN_IDS.BITKUB_TESTNET.toString(16),\n    rpcUrls: [\"https://rpc-testnet.bitkubchain.io\"],\n    nativeCurrency: {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n  },\n  {\n    chainIdNumber: CHAIN_IDS.ETH_JFIN_TESTNET,\n    chainName: \"JFIN Chain\",\n    chainId: \"0x\" + CHAIN_IDS.ETH_JFIN_TESTNET.toString(16),\n    rpcUrls: [\"https://rpc.testnet.jfinchain.com\"],\n    nativeCurrency: {\n      name: \"Ethereum\",\n      symbol: \"JFIN\",\n      decimals: 18,\n    },\n  },\n  {\n    chainIdNumber: CHAIN_IDS.EVMOS,\n    chainName: \"Evmos\",\n    chainId: \"0x\" + CHAIN_IDS.EVMOS.toString(16),\n    rpcUrls: [\"https://evmos-evm.publicnode.com/\"],\n    nativeCurrency: {\n      name: \"EVMOS\",\n      symbol: \"EVMOS\",\n      decimals: 18,\n    },\n  },\n];\n\nconst CONTRACT_ADDRESS = \"0xD2f7f5F32e0CEf1900E1Fe9e19fA71c9Fbb5B0a9\";\n\nconst ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\",\n      },\n    ],\n    name: \"balanceOf\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"faucet\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"index\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"tokenOfOwnerByIndex\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"tokenURI\",\n    outputs: [\n      {\n        internalType: \"string\",\n        name: \"\",\n        type: \"string\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"cards\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n      {\n        internalType: \"enum MonsterLib.MonsterState\",\n        name: \"state\",\n        type: \"uint8\",\n      },\n      {\n        components: [\n          {\n            internalType: \"string\",\n            name: \"name\",\n            type: \"string\",\n          },\n          {\n            internalType: \"string\",\n            name: \"teenagerURI\",\n            type: \"string\",\n          },\n          {\n            internalType: \"string\",\n            name: \"adultURI\",\n            type: \"string\",\n          },\n          {\n            internalType: \"uint256\",\n            name: \"power\",\n            type: \"uint256\",\n          },\n          {\n            internalType: \"uint8\",\n            name: \"version\",\n            type: \"uint8\",\n          },\n        ],\n        internalType: \"struct MonsterLib.Monster\",\n        name: \"monster\",\n        type: \"tuple\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"exp\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"feed\",\n    outputs: [],\n    stateMutability: \"payable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"play\",\n    outputs: [],\n    stateMutability: \"payable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"evolve\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\n\nconst MONSTER_STATE = {\n  0: \"Larva\",\n  1: \"Teenager\",\n  2: \"Adult\",\n};\n\nconst Container = styled.div`\n  margin-top: 5px;\n  width: 800px;\n  height: 800px;\n  outline: 5px solid rgba(0, 0, 0, 1);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst GameContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  /* padding: 10px; */\n`;\n\nconst Background = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n`;\n\nconst SelectContainer = styled.div`\n  width: 80%;\n\n  .mt-3 {\n    margin-top: 3rem;\n  }\n`;\n\nconst FullContainer = styled.div`\n  width: 100%;\n  padding: 10px;\n`;\n\nconst CardContainer = styled.div`\n  width: 100%;\n  padding: 10px;\n  padding-right: 16px;\n`;\n\nconst StatContainer = styled.div`\n  background-color: #ffffff;\n  height: 190px;\n\n  h3 {\n    font-size: 20px;\n    line-height: 1.5;\n    font-weight: 800;\n  }\n\n  p {\n    font-size: 14px;\n    line-height: 1;\n    font-weight: 800;\n  }\n`;\n\nconst ActionButton = styled.div`\n  display: flex;\n  gap: 6px;\n  margin-top: 16px;\n`;\n\nconst ActionContainer = styled.div`\n  position: absolute;\n  bottom: 50%;\n  right: 55%;\n`;\n\n// State\n\nconst [walletAddress, setWalletAddress] = useState(\"\");\nconst [chainId, setChainId] = useState(\"\");\nconst [showLoader, setIsShowLoader] = useState(true);\nconst [isFauceting, setIsFauceting] = useState(false);\nconst [isError, setIsError] = useState(false);\nconst [nftOptions, setNftOptions] = useState([]);\nconst [selectedNft, setSelectedNft] = useState(null);\nconst [isFeeding, setIsFeeding] = useState(false);\nconst [isPlaying, setIsPlaying] = useState(false);\nconst [isEvolving, setIsEvolving] = useState(false);\nconst [background, setBackground] = useState(\"necromancer-lab\");\n\nconst disableActionButton = isFeeding || isPlaying || isEvolving;\n\nfunction handleSetupSignerInfo() {\n  try {\n    const provider = Ethers.provider();\n    if (provider) {\n      const addressPromise = provider\n        ?.getSigner()\n        ?.getAddress()\n        .then((address) => address);\n\n      const chainPromise = provider?.getNetwork().then((chain) => chain);\n\n      Promise.all([chainPromise, addressPromise]).then(([chain, address]) => {\n        setWalletAddress(address);\n        setChainId(chain.chainId);\n      });\n    }\n  } catch (error) {\n    setIsError(true);\n    console.error(error);\n  } finally {\n    setIsShowLoader(false);\n  }\n}\n\nfunction isSupportChain(targetChainId) {\n  return Object.values(CHAIN_IDS).includes(targetChainId);\n}\n\nfunction handleSwitchChain(chain) {\n  // Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: chain.chainId }]);\n\n  const param = {\n    chainId: chain.chainId,\n    chainName: chain.chainName,\n    rpcUrls: chain.rpcUrls,\n    nativeCurrency: chain.nativeCurrency,\n  };\n  Ethers.send(\"wallet_addEthereumChain\", [param]);\n}\n\nfunction getContract() {\n  const signer = Ethers.provider().getSigner();\n  const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);\n  return contract;\n}\n\nfunction faucetNft() {\n  setIsFauceting(true);\n  const contract = getContract();\n  contract\n    .faucet()\n    .then((tx) => {\n      tx.wait()\n        .catch((error) => {\n          throw error;\n        })\n        .finally(() => setIsFauceting(false));\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsFauceting(false);\n    });\n}\n\nfunction getNftOptions(totalNft, walletAddress) {\n  const contract = getContract();\n  const promises = [];\n\n  for (let i = 0; i < totalNft; i++) {\n    const promise = contract.callStatic\n      .tokenOfOwnerByIndex(walletAddress, i)\n      .then((tokenId) => tokenId.toNumber());\n    promises.push(promise);\n  }\n\n  Promise.all(promises)\n    .then((nftOptions) => {\n      const options = nftOptions.map((option) => {\n        const opt = getNftDetail(option).then(([stat, uri]) => {\n          const detail = fetch(uri).body;\n          return {\n            label: `${detail?.name || \"Monster Nft\"} #${option}`,\n            value: option,\n          };\n        });\n        return opt;\n      });\n      return Promise.all(options);\n    })\n    .then((detailedOptions) => {\n      setNftOptions(detailedOptions);\n    })\n    .catch((error) => {\n      console.error(\"Error:\", error);\n      setIsError(true);\n    })\n    .finally(() => setIsShowLoader(false));\n}\n\nfunction getNftDetail(tokenId) {\n  const contract = getContract();\n  const statPromise = contract.cards(tokenId).then((cardDetails) => {\n    const result = {\n      tokenId: cardDetails[0].toNumber(),\n      state: cardDetails[1],\n      monster: {\n        name: cardDetails[2][0],\n        teenagerURI: cardDetails[2][1],\n        adultURI: cardDetails[2][2],\n        power: cardDetails[2][3].toNumber(),\n        version: cardDetails[2][4],\n      },\n      exp: cardDetails[3].toNumber(),\n    };\n    return result;\n  });\n\n  const tokenUriPromise = contract.tokenURI(tokenId).then((tokenUri) => {\n    return tokenUri;\n  });\n\n  return Promise.all([statPromise, tokenUriPromise]);\n}\n\nfunction updateNftDetail() {\n  return getNftDetail(selectedNft.stat.tokenId)\n    .then(([stat, uri]) => {\n      return new Promise((resolve) => {\n        const detailInterval = setInterval(() => {\n          const detail = fetch(uri).body;\n          console.log({ detail });\n          if (detail) {\n            setSelectedNft({\n              detail,\n              stat,\n            });\n            clearInterval(detailInterval);\n            resolve();\n          }\n        }, 1000);\n      });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsError(true);\n      throw error;\n    });\n}\n\nfunction onSelectNft(e) {\n  if (!!e.target.value || !disableActionButton) {\n    setIsShowLoader(true);\n    handleSetBackground();\n    getNftDetail(e.target.value)\n      .then(([stat, uri]) => {\n        const detail = fetch(uri).body;\n        setSelectedNft({\n          detail,\n          stat,\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        setIsError(error);\n      })\n      .finally(() => setIsShowLoader(false));\n  }\n}\n\nfunction feedMonster() {\n  if (disableActionButton) return;\n  setIsFeeding(true);\n  const contract = getContract();\n\n  const fee = \"0.01\";\n  const options = {\n    value: ethers.utils.parseUnits(fee, \"ether\"),\n  };\n\n  contract\n    .feed(selectedNft.stat.tokenId, options)\n    .then((tx) => {\n      tx.wait()\n        .then(() => updateNftDetail().then(() => setIsFeeding(false)))\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsFeeding(false);\n    });\n}\n\nfunction playMonster() {\n  if (disableActionButton) return;\n  setIsPlaying(true);\n  const contract = getContract();\n\n  const fee = \"0.01\";\n  const options = {\n    value: ethers.utils.parseUnits(fee, \"ether\"),\n  };\n\n  contract\n    .play(selectedNft.stat.tokenId, options)\n    .then((tx) => {\n      tx.wait()\n        .then(() => {\n          updateNftDetail().then(() => setIsPlaying(false));\n        })\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsPlaying(false);\n    });\n}\n\nfunction evolveMonster() {\n  if (disableActionButton) return;\n  setIsEvolving(true);\n  handleSetBackground();\n  const contract = getContract();\n\n  contract\n    .evolve(selectedNft.stat.tokenId)\n    .then((tx) => {\n      tx.wait()\n        .then(() => {\n          updateNftDetail().then(() => setIsEvolving(false));\n        })\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsEvolving(false);\n    });\n}\n\nfunction handleSetBackground() {\n  let bg = \"\";\n\n  if (selectedNft.stat.state === 2) {\n    bg = \"arena\";\n  }\n\n  const backgrounds = [\n    \"necromancer-lab\",\n    \"city-square\",\n    \"forest\",\n    \"magical-forest\",\n    \"arena\",\n  ];\n  const randomNumber = Math.floor(Math.random() * backgrounds.length);\n  bg = backgrounds[randomNumber];\n\n  setBackground(bg);\n}\n\nuseEffect(() => {\n  handleSetupSignerInfo();\n}, []);\n\nuseEffect(() => {\n  if (walletAddress && isSupportChain(chainId) && !isFauceting && !isEvolving) {\n    setIsShowLoader(true);\n    const contract = getContract();\n    contract\n      .balanceOf(walletAddress)\n      .then((balance) => {\n        const totalNft = balance.toNumber();\n        getNftOptions(totalNft, walletAddress);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        setIsError(true);\n      });\n  }\n}, [walletAddress, chainId, isFauceting, isEvolving]);\n\nfunction Router() {\n  if (isError) {\n    return <p style={{ color: \"red\", fontWeight: 800 }}>Error</p>;\n  }\n\n  if (showLoader || isFauceting || isEvolving) {\n    return (\n      <img src=\"data:image/png;base64,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\" />\n    );\n  }\n\n  if (!walletAddress) {\n    return <Widget src=\"a3r0nz.near/widget/Omagotji-WalletConnectButton\" />;\n  }\n\n  if (!isSupportChain(chainId)) {\n    return (\n      <>\n        <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARuSURBVHgB7Z1NaFRXGIbftCm0i4RYWgs1MZEu2tJCZ1Go0DSdLmqXprjrot7b2XQXoXQpjrSrltJ252aYi4qCIJitLtQYRNFFFiKIyDhMjKjg+IuC0Xi+RMGfc2Ymk3uZd/R94CyS794w9zwzN9/5zrlngM6RuLZA2sroEG9AUCEhZEgIGRJChoSQ0Yt0ybk23sqBhULhi6GhITBSq9VypVKp2OLhB1ybASkRWkwtkyRZYKVcLi8nRY6QIrplkSEhZEgIGRJChoSQ0YP2WPD9MooiuAzFf0btZ2D+CrqS3g+AoZ3eUBzHcBlj6Mxl968+IWRICBkSQoaEkCEhZDQqLuaetJewbMrHt19/Atw56I3h0R10LY/uBq9r8ZoD5SyXffkDS8VIb0GyUVpWdG2bL+Dqb/4z7EVf+wevFe/9BvRt8IZ6eoLdux1L/fsSumWRISFkSAgZEkKGhJDR3py6FQp9dHNq2y7XdwA3diMt2hPSrVXbLLAxirWUSHvVyXPcuDWPH3/1L8iYiNdi/PvVYOToyTqK/1/wxsp/fYaRwXeQFRkLeYAjJ657Y9GmD8FKZfZe8HVnjQnxzigVCoXc6Oho4LS9EM0JTdZNT09vLJVKw76YCYl8AVvEFqpZoSIhrRDqv2q1GqwTKu0lQ0LIkBAyJIQMCSEjPA6p73LZ1HE04rufTredr0e/n1lsjahMfZP6IOyiG2OsGzuGdml2bn79uzi858ulHyo/+A+qXwier08IGRJChoSQISFkSAgZK6r2bnYV2/xXq4JxK7//V656Y+MbViP3aR8aMdD/FtLG/mZx4qOGx8ycvY0Dh656Y1t+GcZAX7jbhtesLCtckZBmJXRLMYNC3FzI5g6U4Af6e7GtiZBk/1xQyES0NtP5EN2yyJAQMiSEDAkhQ0LIkBAyJISMTJcBWb5emRrzxmw8wIqNkfKB1z0y+DayJPNeyfoCssDeLJ16w/C+TR1b/jyHmzfnkSbW0f9u/RisUAuZPHh1sfySJnYbZRaif+pkSAgZEkKGhJDR8X/qNollzccIbIIq3Sxr2F3yxdn73lgn092ndFyITQTFgfVZ5133jeB9pEl1dh7rxqa8seTvzzsyafYsumWRISFkSAgZEkKGhJAhIWRICBk2Dkl8gdrl+7lk/5x/RzniZ8yZsAV3PlzfBneUMyGxL1Dad6nomoSsgDj8QNIktKNcdyAhZEgIGRJChoSQISFkSAgZEkKGhJDRaO/38Gb8m9Z4t0rLr1+17ClQWwh35GTdGzv8xyxw6yHSpKf/TeS3Dnpj9gDrcp8ftPLI0RP1QOxSHDitrc34G+H/Diono+zmpdPC9hXJYuWi7aGSFlYeCdWsoO+g6n4khAwJIUNCyJAQMtrNskJECGzM/CIMqwRDWNYUN9nt7hkstU2QEvqEkCEhZEgIGRJChoSQkfbzIVYw297KgcdO1Te6OlUOhNTmFtdNTbZ4+AxeERIsFSkZW0upexbolkWGhJAhIWRICBkSQsZjVpQJlLJuMF4AAAAASUVORK5CYII=\" />\n        <h5 style={{ margin: 20, fontWeight: 800 }}>\n          You are on the wrong chain please switch to supported chain.\n        </h5>\n        {SUPPORT_CHAIN.map((chain) => (\n          <div\n            onClick={() => handleSwitchChain(chain)}\n            style={{ marginBottom: 16 }}\n          >\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n              props={{\n                label: `Switch to ${chain.chainName}`,\n                color: \"primary\",\n              }}\n            />\n          </div>\n        ))}\n      </>\n    );\n  }\n\n  if (!selectedNft) {\n    return (\n      <SelectContainer>\n        <p>Select your nft to start</p>\n        <Widget\n          src=\"a3r0nz.near/widget/Omagotji-Select\"\n          props={{\n            selectPlaceholder: nftOptions?.length\n              ? \"Select NFT\"\n              : \"You don't have Nft yet.\",\n            options: nftOptions,\n            onChange: (e) => onSelectNft(e),\n          }}\n        />\n        <p className=\"mt-3\">Don\u2019t have NFT ?</p>\n        <div onClick={() => faucetNft()}>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n            props={{ label: \"Faucet\", color: \"error\" }}\n          />\n        </div>\n      </SelectContainer>\n    );\n  }\n\n  const exp = selectedNft.stat.exp / 1000;\n  const canEvolve = exp >= 100 && selectedNft.stat.state < 2;\n\n  const monsterName = () => {\n    return selectedNft?.detail?.name || selectedNft?.stat?.monster?.name;\n  };\n\n  return (\n    <>\n      <GameContainer>\n        <ActionContainer>\n          {isFeeding && (\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-ActionAnimation\"\n              props={{ action: \"feed\" }}\n            />\n          )}\n          {isPlaying && (\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-ActionAnimation\"\n              props={{ action: \"play\" }}\n            />\n          )}\n        </ActionContainer>\n        <Background>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Scene\"\n            props={{ scene: background }}\n          />\n        </Background>\n        <FullContainer>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Select\"\n            props={{\n              selectPlaceholder: `${monsterName()} #${\n                selectedNft.stat.tokenId\n              }`,\n              options: nftOptions,\n              onChange: (e) => onSelectNft(e),\n            }}\n          />\n        </FullContainer>\n        <img src={selectedNft.detail.image} width={250} height={250} />\n        <CardContainer>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Card\"\n            props={{\n              children: (\n                <StatContainer>\n                  <h3>{monsterName()}</h3>\n                  <p>State: {MONSTER_STATE[selectedNft.stat.state]}</p>\n                  <p>Monster EXP ({exp}/100)</p>\n                  <Widget\n                    src=\"a3r0nz.near/widget/Omagotji-ProgressBar\"\n                    props={{ percent: exp, height: 22 }}\n                  />\n                  <ActionButton>\n                    <div onClick={() => feedMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Feed Him\",\n                          color: disableActionButton ? \"disabled\" : \"primary\",\n                        }}\n                      />\n                    </div>\n                    <div onClick={() => playMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Play with Him\",\n                          color: disableActionButton ? \"disabled\" : \"primary\",\n                        }}\n                      />\n                    </div>\n                    <div onClick={() => canEvolve && evolveMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Evolve\",\n                          color:\n                            canEvolve && !disableActionButton\n                              ? \"primary\"\n                              : \"disabled\",\n                        }}\n                      />\n                    </div>\n                  </ActionButton>\n                </StatContainer>\n              ),\n            }}\n          />\n        </CardContainer>\n      </GameContainer>\n    </>\n  );\n}\n\nreturn (\n  <Container>\n    <Router />\n  </Container>\n);\n", "metadata": {"fork_of": "likelyisland.near/widget/Omagotchi@108337032"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/likelyisland.near/widget/Omagotchi", "fact_widget_deployments_id": "7f2fcb0189cbcf9784e1ac825bda45e5", "inserted_timestamp": "2023-12-19T17:25:41.020Z", "modified_timestamp": "2023-12-19T17:53:59.533Z", "__row_index": 0}