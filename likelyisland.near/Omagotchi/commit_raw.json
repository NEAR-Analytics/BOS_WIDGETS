{"tx_hash": "Ba412tYYAbcF4y7zyRjruvTec4MdeCaqVTw7BGm4sUA8", "action_id_social": "FDgztNmVBkKcAoTNmLjGqciFXJiWiGSgrEVY4mY7yCNZ-0-widget", "block_id": 108236593, "block_timestamp": "2023-12-18T08:26:53.839Z", "signer_id": "likelyisland.near", "widget_name": "Omagotchi", "source_code": "const CHAIN_IDS = {\n  BITKUB_TESTNET: 25925,\n  ETH_JFIN_TESTNET: 3502,\n};\n\nconst SUPPORT_CHAIN = [\n  {\n    chainIdNumber: CHAIN_IDS.BITKUB_TESTNET,\n    chainName: \"Bitkub Chain\",\n    chainId: \"0x\" + CHAIN_IDS.BITKUB_TESTNET.toString(16),\n    rpcUrls: [\"https://rpc-testnet.bitkubchain.io\"],\n    currencySymbol: \"tKUB\",\n    nativeCurrency: {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n  },\n  {\n    chainIdNumber: CHAIN_IDS.ETH_JFIN_TESTNET,\n    chainName: \"JFIN Chain\",\n    chainId: \"0x\" + CHAIN_IDS.ETH_JFIN_TESTNET.toString(16),\n    rpcUrls: [\"https://rpc.testnet.jfinchain.com\"],\n    currencySymbol: \"jfin\",\n    nativeCurrency: {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n  },\n];\n\nconst CONTRACT_ADDRESS = \"0xD2f7f5F32e0CEf1900E1Fe9e19fA71c9Fbb5B0a9\";\n\nconst ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\",\n      },\n    ],\n    name: \"balanceOf\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"faucet\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"index\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"tokenOfOwnerByIndex\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"tokenURI\",\n    outputs: [\n      {\n        internalType: \"string\",\n        name: \"\",\n        type: \"string\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"cards\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n      {\n        internalType: \"enum MonsterLib.MonsterState\",\n        name: \"state\",\n        type: \"uint8\",\n      },\n      {\n        components: [\n          {\n            internalType: \"string\",\n            name: \"name\",\n            type: \"string\",\n          },\n          {\n            internalType: \"string\",\n            name: \"teenagerURI\",\n            type: \"string\",\n          },\n          {\n            internalType: \"string\",\n            name: \"adultURI\",\n            type: \"string\",\n          },\n          {\n            internalType: \"uint256\",\n            name: \"power\",\n            type: \"uint256\",\n          },\n          {\n            internalType: \"uint8\",\n            name: \"version\",\n            type: \"uint8\",\n          },\n        ],\n        internalType: \"struct MonsterLib.Monster\",\n        name: \"monster\",\n        type: \"tuple\",\n      },\n      {\n        internalType: \"uint256\",\n        name: \"exp\",\n        type: \"uint256\",\n      },\n    ],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"feed\",\n    outputs: [],\n    stateMutability: \"payable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"play\",\n    outputs: [],\n    stateMutability: \"payable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"uint256\",\n        name: \"tokenId\",\n        type: \"uint256\",\n      },\n    ],\n    name: \"evolve\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\n\nconst MONSTER_STATE = {\n  0: \"Larva\",\n  1: \"Teenager\",\n  2: \"Adult\",\n};\n\nconst Container = styled.div`\n  margin-top: 5px;\n  width: 800px;\n  height: 800px;\n  outline: 5px solid rgba(0, 0, 0, 1);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst GameContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  /* padding: 10px; */\n`;\n\nconst Background = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n`;\n\nconst SelectContainer = styled.div`\n  width: 80%;\n\n  .mt-3 {\n    margin-top: 3rem;\n  }\n`;\n\nconst FullContainer = styled.div`\n  width: 100%;\n  padding: 10px;\n`;\n\nconst CardContainer = styled.div`\n  width: 100%;\n  padding: 10px;\n  padding-right: 16px;\n`;\n\nconst StatContainer = styled.div`\n  background-color: #ffffff;\n  height: 190px;\n\n  h3 {\n    font-size: 20px;\n    line-height: 1.5;\n    font-weight: 800;\n  }\n\n  p {\n    font-size: 14px;\n    line-height: 1;\n    font-weight: 800;\n  }\n`;\n\nconst ActionButton = styled.div`\n  display: flex;\n  gap: 6px;\n  margin-top: 16px;\n`;\n\nconst ActionContainer = styled.div`\n  position: absolute;\n  bottom: 50%;\n  right: 55%;\n`;\n\n// State\n\nconst [walletAddress, setWalletAddress] = useState(\"\");\nconst [chainId, setChainId] = useState(\"\");\nconst [showLoader, setIsShowLoader] = useState(true);\nconst [isFauceting, setIsFauceting] = useState(false);\nconst [isError, setIsError] = useState(false);\nconst [nftOptions, setNftOptions] = useState([]);\nconst [selectedNft, setSelectedNft] = useState(null);\nconst [isFeeding, setIsFeeding] = useState(false);\nconst [isPlaying, setIsPlaying] = useState(false);\nconst [isEvolving, setIsEvolving] = useState(false);\nconst [background, setBackground] = useState(\"necromancer-lab\");\n\nconst disableActionButton = isFeeding || isPlaying || isEvolving;\n\nfunction handleSetupSignerInfo() {\n  try {\n    const provider = Ethers.provider();\n    if (provider) {\n      const addressPromise = provider\n        ?.getSigner()\n        ?.getAddress()\n        .then((address) => address);\n\n      const chainPromise = provider?.getNetwork().then((chain) => chain);\n\n      Promise.all([chainPromise, addressPromise]).then(([chain, address]) => {\n        setWalletAddress(address);\n        setChainId(chain.chainId);\n      });\n    }\n  } catch (error) {\n    setIsError(true);\n    console.error(error);\n  } finally {\n    setIsShowLoader(false);\n  }\n}\n\nfunction isSupportChain(targetChainId) {\n  return Object.values(CHAIN_IDS).includes(targetChainId);\n}\n\nfunction handleSwitchChain(chain) {\n  // Ethers.send(\"wallet_switchEthereumChain\", [{ chainId: chain.chainId }]);\n\n  const param = {\n    chainId: chain.chainId,\n    chainName: chain.chainName,\n    rpcUrls: chain.rpcUrls,\n    nativeCurrency: chain.nativeCurrency,\n  };\n  Ethers.send(\"wallet_addEthereumChain\", [param]);\n}\n\nfunction getContract() {\n  const signer = Ethers.provider().getSigner();\n  const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);\n  return contract;\n}\n\nfunction faucetNft() {\n  setIsFauceting(true);\n  const contract = getContract();\n  contract\n    .faucet()\n    .then((tx) => {\n      tx.wait()\n        .catch((error) => {\n          throw error;\n        })\n        .finally(() => setIsFauceting(false));\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsFauceting(false);\n    });\n}\n\nfunction getNftOptions(totalNft, walletAddress) {\n  const contract = getContract();\n  const promises = [];\n\n  for (let i = 0; i < totalNft; i++) {\n    const promise = contract.callStatic\n      .tokenOfOwnerByIndex(walletAddress, i)\n      .then((tokenId) => tokenId.toNumber());\n    promises.push(promise);\n  }\n\n  Promise.all(promises)\n    .then((nftOptions) => {\n      const options = nftOptions.map((option) => {\n        const opt = getNftDetail(option).then(([stat, uri]) => {\n          const detail = fetch(uri).body;\n          return {\n            label: `${detail?.name || \"Monster Nft\"} #${option}`,\n            value: option,\n          };\n        });\n        return opt;\n      });\n      return Promise.all(options);\n    })\n    .then((detailedOptions) => {\n      setNftOptions(detailedOptions);\n    })\n    .catch((error) => {\n      console.error(\"Error:\", error);\n      setIsError(true);\n    })\n    .finally(() => setIsShowLoader(false));\n}\n\nfunction getNftDetail(tokenId) {\n  const contract = getContract();\n  const statPromise = contract.cards(tokenId).then((cardDetails) => {\n    const result = {\n      tokenId: cardDetails[0].toNumber(),\n      state: cardDetails[1],\n      monster: {\n        name: cardDetails[2][0],\n        teenagerURI: cardDetails[2][1],\n        adultURI: cardDetails[2][2],\n        power: cardDetails[2][3].toNumber(),\n        version: cardDetails[2][4],\n      },\n      exp: cardDetails[3].toNumber(),\n    };\n    return result;\n  });\n\n  const tokenUriPromise = contract.tokenURI(tokenId).then((tokenUri) => {\n    return tokenUri;\n  });\n\n  return Promise.all([statPromise, tokenUriPromise]);\n}\n\nfunction updateNftDetail() {\n  return getNftDetail(selectedNft.stat.tokenId)\n    .then(([stat, uri]) => {\n      setTimeout(() => {\n        const detail = fetch(uri).body;\n\n        return setSelectedNft({\n          detail,\n          stat,\n        });\n      }, 5000);\n    })\n\n    .catch((error) => {\n      console.error(error);\n      setIsError(true);\n    });\n}\n\nfunction onSelectNft(e) {\n  if (!!e.target.value || !disableActionButton) {\n    setIsShowLoader(true);\n    handleSetBackground();\n    getNftDetail(e.target.value)\n      .then(([stat, uri]) => {\n        const detail = fetch(uri).body;\n        setSelectedNft({\n          detail,\n          stat,\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        setIsError(error);\n      })\n      .finally(() => setIsShowLoader(false));\n  }\n}\n\nfunction feedMonster() {\n  if (disableActionButton) return;\n  setIsFeeding(true);\n  const contract = getContract();\n\n  const fee = \"0.01\";\n  const options = {\n    value: ethers.utils.parseUnits(fee, \"ether\"),\n  };\n\n  contract\n    .feed(selectedNft.stat.tokenId, options)\n    .then((tx) => {\n      tx.wait()\n        .then(() => updateNftDetail().then(() => setIsFeeding(false)))\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsFeeding(false);\n    });\n}\n\nfunction playMonster() {\n  if (disableActionButton) return;\n  setIsPlaying(true);\n  const contract = getContract();\n\n  const fee = \"0.01\";\n  const options = {\n    value: ethers.utils.parseUnits(fee, \"ether\"),\n  };\n\n  contract\n    .play(selectedNft.stat.tokenId, options)\n    .then((tx) => {\n      tx.wait()\n        .then(() => {\n          updateNftDetail().then(() => setIsPlaying(false));\n        })\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsPlaying(false);\n    });\n}\n\nfunction evolveMonster() {\n  if (disableActionButton) return;\n  setIsEvolving(true);\n  handleSetBackground();\n  const contract = getContract();\n\n  contract\n    .evolve(selectedNft.stat.tokenId)\n    .then((tx) => {\n      tx.wait()\n        .then(() => {\n          updateNftDetail().then(() => setIsEvolving(false));\n        })\n        .catch((error) => {\n          console.error(error);\n          setIsError(true);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n      setIsEvolving(false);\n    });\n}\n\nfunction handleSetBackground() {\n  let bg = \"\";\n\n  if (selectedNft.stat.state === 2) {\n    bg = \"arena\";\n  }\n\n  const backgrounds = [\n    \"necromancer-lab\",\n    \"city-square\",\n    \"forest\",\n    \"magical-forest\",\n    \"arena\",\n  ];\n  const randomNumber = Math.floor(Math.random() * backgrounds.length);\n  bg = backgrounds[randomNumber];\n\n  setBackground(bg);\n}\n\nuseEffect(() => {\n  handleSetupSignerInfo();\n}, []);\n\nuseEffect(() => {\n  if (walletAddress && isSupportChain(chainId) && !isFauceting && !isEvolving) {\n    setIsShowLoader(true);\n    const contract = getContract();\n    contract\n      .balanceOf(walletAddress)\n      .then((balance) => {\n        const totalNft = balance.toNumber();\n        getNftOptions(totalNft, walletAddress);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        setIsError(true);\n      });\n  }\n}, [walletAddress, chainId, isFauceting, isEvolving]);\n\nfunction Router() {\n  if (isError) {\n    return <p style={{ color: \"red\", fontWeight: 800 }}>Error</p>;\n  }\n\n  if (showLoader || isFauceting || isEvolving) {\n    return (\n      <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWRSURBVHgB7ds7ixNdGADgo34KioiCWnlrtLAQES+NuPlqFQVttLER/AuCwuYrBP+A4G0LG63ES2O52VJUFAVFBS+IFl6KdfHOul/OsImT7GR2sknWFZ8Hzs7k5MyZN2FO3pkzsyEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADw55oVyFIaL2mV8QIzxj+BLKVq6c+orwSYQQzgDBs2bAjz5s1rqPv+/Xu4f/9+AGausVgOHz481izW1d4P7RvLKVPdrtxm+7x9lifpv0if5dBauc14KGh2AP5YTqF7p1wt/fF0fGBgILPB58+fw+7du8c+fvwYX/4bfl1jJ1np4sWLYe3atZnbnjx5sv/y5cv96bq89jVPnz4NBw8ebMh6+/btC0ePHs3sPy/+FvFUxj9LNFgtpaz+W8RjUrVNBnCPxWvpzZs3Z743PnBrSqFpkiwOxlbbLlmyZEJdXvs8sa/m7Wr958Wf1T40zt6XWvVPdxjA3VeOf/bv39+3ePHisGrVqvobV69eDe/fv6+/Hh0dDQcOHEiWDx486Lt582Y5Zrxt27YldUuXLk3axSxVqVTCrFm/EtTy5ctD9bo8vH37Nly/fj0zkB8/foRLly4lE3A1nz59SrarXtYn27179y48efIkybKxLor7efz4cWglth8aGsqM58OHD+HKlSvl8e8gLFq0KGzfvr1QPLdu3SqPTxRWghl/pqAbk1hJm3Pnzk3oo5qFGiZvqgf32PDwcEP/sU2z2Fdomvip9V896Ot1cT0t9h33kd5uy5Yt9ffjephkcqrX8aT7T8VTDhQiA0+jdMbqpE0nalk2vT537twwf/78hnZfv35tyJS98vPnzzAyMpLEEtdpj1nov0zWD0R1Eim8evWqocRT++lw7969sGLFirBy5cpw586dGFws5UAhMnALMSN0Oxums18nbbodQ8zA8Vq1uW46xKzbNJlHGwzgP8COHTvC2bNn6z8ocVmbGOpErb9e/2hkOXToUMNniLGcOnVq8O7du0PBJFZhBnALnWbfbg6KdevWJaXb0rPOrc44enVNHgdvnH1OO336dCn8ug1VCUzKAO6Rbh748dbT8+fPG/pcvXp1WLZsWehEOgO3irdX2fnFixfh9u3bYcGCBWH9+vUN8VT1BQoxiTU1PXuuN2sgxfvHW7duDdXbLPVy7dq10Kl0Bp5uJ06cSD5HPJXOUAqeky7EAG7hd1wX/s79zgR/82efKqfQLTRnpWPHjoUjR47kbhOfKtq5c2eyjBnmzJkzyenhhQsXkvfjMj7/XBPvtcb2cRlPKbtt4cKFYXBwsOH+6suXL5PMFz169GjSPjrJzjG7xlPkPXv2hOPHjxeOZ+/evcn3/eXLl7Br166sZ8UZZwAXtGbNmqTkiQfanDlzkvU4IJsHZe1aL90+PjrYq9sos2fPDps2bZpQH689i+okKz58+DBZbty4sa144iOk8dnpyZ4VxwBu9l/8Mzw83DcwMFBqnqWtaX5dq4uZtHqQ/peuHx0dbdnXt2/f6vvMa//s2bNKdXUo3a5a13f+/PnSmzdv6n3cuHGjPz4YkRfn69evJ+wz6/OOjIxU4j7bjado/7X1vPbx+0l9n5UABZVDsX9iLzqJ1Wn78iQxFtlP3j7Lk+xzqvHk9V80HnKYxAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIPwPr35rD5mvz8sAAAAASUVORK5CYII=\" />\n    );\n  }\n\n  if (!walletAddress) {\n    return <Widget src=\"a3r0nz.near/widget/Omagotji-WalletConnectButton\" />;\n  }\n\n  if (!isSupportChain(chainId)) {\n    return (\n      <>\n        <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARuSURBVHgB7Z1NaFRXGIbftCm0i4RYWgs1MZEu2tJCZ1Go0DSdLmqXprjrot7b2XQXoXQpjrSrltJ252aYi4qCIJitLtQYRNFFFiKIyDhMjKjg+IuC0Xi+RMGfc2Ymk3uZd/R94CyS794w9zwzN9/5zrlngM6RuLZA2sroEG9AUCEhZEgIGRJChoSQ0Yt0ybk23sqBhULhi6GhITBSq9VypVKp2OLhB1ybASkRWkwtkyRZYKVcLi8nRY6QIrplkSEhZEgIGRJChoSQ0YP2WPD9MooiuAzFf0btZ2D+CrqS3g+AoZ3eUBzHcBlj6Mxl968+IWRICBkSQoaEkCEhZDQqLuaetJewbMrHt19/Atw56I3h0R10LY/uBq9r8ZoD5SyXffkDS8VIb0GyUVpWdG2bL+Dqb/4z7EVf+wevFe/9BvRt8IZ6eoLdux1L/fsSumWRISFkSAgZEkKGhJDR3py6FQp9dHNq2y7XdwA3diMt2hPSrVXbLLAxirWUSHvVyXPcuDWPH3/1L8iYiNdi/PvVYOToyTqK/1/wxsp/fYaRwXeQFRkLeYAjJ657Y9GmD8FKZfZe8HVnjQnxzigVCoXc6Oho4LS9EM0JTdZNT09vLJVKw76YCYl8AVvEFqpZoSIhrRDqv2q1GqwTKu0lQ0LIkBAyJIQMCSEjPA6p73LZ1HE04rufTredr0e/n1lsjahMfZP6IOyiG2OsGzuGdml2bn79uzi858ulHyo/+A+qXwier08IGRJChoSQISFkSAgZK6r2bnYV2/xXq4JxK7//V656Y+MbViP3aR8aMdD/FtLG/mZx4qOGx8ycvY0Dh656Y1t+GcZAX7jbhtesLCtckZBmJXRLMYNC3FzI5g6U4Af6e7GtiZBk/1xQyES0NtP5EN2yyJAQMiSEDAkhQ0LIkBAyJISMTJcBWb5emRrzxmw8wIqNkfKB1z0y+DayJPNeyfoCssDeLJ16w/C+TR1b/jyHmzfnkSbW0f9u/RisUAuZPHh1sfySJnYbZRaif+pkSAgZEkKGhJDR8X/qNollzccIbIIq3Sxr2F3yxdn73lgn092ndFyITQTFgfVZ5133jeB9pEl1dh7rxqa8seTvzzsyafYsumWRISFkSAgZEkKGhJAhIWRICBk2Dkl8gdrl+7lk/5x/RzniZ8yZsAV3PlzfBneUMyGxL1Dad6nomoSsgDj8QNIktKNcdyAhZEgIGRJChoSQISFkSAgZEkKGhJDRaO/38Gb8m9Z4t0rLr1+17ClQWwh35GTdGzv8xyxw6yHSpKf/TeS3Dnpj9gDrcp8ftPLI0RP1QOxSHDitrc34G+H/Diono+zmpdPC9hXJYuWi7aGSFlYeCdWsoO+g6n4khAwJIUNCyJAQMtrNskJECGzM/CIMqwRDWNYUN9nt7hkstU2QEvqEkCEhZEgIGRJChoSQkfbzIVYw297KgcdO1Te6OlUOhNTmFtdNTbZ4+AxeERIsFSkZW0upexbolkWGhJAhIWRICBkSQsZjVpQJlLJuMF4AAAAASUVORK5CYII=\" />\n        <h5 style={{ margin: 20, fontWeight: 800 }}>\n          You are on the wrong chain please switch to supported chain.\n        </h5>\n        {SUPPORT_CHAIN.map((chain) => (\n          <div\n            onClick={() => handleSwitchChain(chain)}\n            style={{ marginBottom: 16 }}\n          >\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n              props={{\n                label: `Switch to ${chain.chainName}`,\n                color: \"primary\",\n              }}\n            />\n          </div>\n        ))}\n      </>\n    );\n  }\n\n  if (!selectedNft) {\n    return (\n      <SelectContainer>\n        <p>Select your nft to start</p>\n        <Widget\n          src=\"a3r0nz.near/widget/Omagotji-Select\"\n          props={{\n            selectPlaceholder: nftOptions?.length\n              ? \"Select NFT\"\n              : \"You don't have Nft yet.\",\n            options: nftOptions,\n            onChange: (e) => onSelectNft(e),\n          }}\n        />\n        <p className=\"mt-3\">Don\u2019t have NFT ?</p>\n        <div onClick={() => faucetNft()}>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n            props={{ label: \"Faucet\", color: \"error\" }}\n          />\n        </div>\n      </SelectContainer>\n    );\n  }\n\n  const exp = selectedNft.stat.exp / 1000;\n  const canEvolve = exp >= 100 && selectedNft.stat.state < 2;\n\n  const monsterName = () => {\n    return selectedNft?.detail?.name || selectedNft?.stat?.monster?.name;\n  };\n\n  return (\n    <>\n      <GameContainer>\n        <ActionContainer>\n          {isFeeding && (\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-ActionAnimation\"\n              props={{ action: \"feed\" }}\n            />\n          )}\n          {isPlaying && (\n            <Widget\n              src=\"a3r0nz.near/widget/Omagotji-ActionAnimation\"\n              props={{ action: \"play\" }}\n            />\n          )}\n        </ActionContainer>\n        <Background>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Scene\"\n            props={{ scene: background }}\n          />\n        </Background>\n        <FullContainer>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Select\"\n            props={{\n              selectPlaceholder: `${monsterName()} #${\n                selectedNft.stat.tokenId\n              }`,\n              options: nftOptions,\n              onChange: (e) => onSelectNft(e),\n            }}\n          />\n        </FullContainer>\n        <img src={selectedNft.detail.image} width={250} height={250} />\n        <CardContainer>\n          <Widget\n            src=\"a3r0nz.near/widget/Omagotji-Card\"\n            props={{\n              children: (\n                <StatContainer>\n                  <h3>{monsterName()}</h3>\n                  <p>State: {MONSTER_STATE[selectedNft.stat.state]}</p>\n                  <p>Monster EXP ({exp}/100)</p>\n                  <Widget\n                    src=\"a3r0nz.near/widget/Omagotji-ProgressBar\"\n                    props={{ percent: exp, height: 22 }}\n                  />\n                  <ActionButton>\n                    <div onClick={() => feedMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Feed Him\",\n                          color: disableActionButton ? \"disabled\" : \"primary\",\n                        }}\n                      />\n                    </div>\n                    <div onClick={() => playMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Play with Him\",\n                          color: disableActionButton ? \"disabled\" : \"primary\",\n                        }}\n                      />\n                    </div>\n                    <div onClick={() => canEvolve && evolveMonster()}>\n                      <Widget\n                        src=\"a3r0nz.near/widget/Omagotji-GeneralButton\"\n                        props={{\n                          label: \"Evolve\",\n                          color:\n                            canEvolve && !disableActionButton\n                              ? \"primary\"\n                              : \"disabled\",\n                        }}\n                      />\n                    </div>\n                  </ActionButton>\n                </StatContainer>\n              ),\n            }}\n          />\n        </CardContainer>\n      </GameContainer>\n    </>\n  );\n}\n\nreturn (\n  <Container>\n    <Router />\n  </Container>\n);\n", "metadata": {"fork_of": "ikhalas-work.near/widget/omagotchi@108235029"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/likelyisland.near/widget/Omagotchi", "fact_widget_deployments_id": "42bbb9d4a26942a214c505ffd435a80c", "inserted_timestamp": "2023-12-18T10:23:35.740Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}