{"tx_hash": "CsFpVcMSWGPKutrtv8QmoRKCvw3jPRYjGKiLMfghv8rB", "action_id_social": "3X7S5RDh6iRm8YQKz44RnX4KDPH8UbGZiwR5knj9cdeb-0-widget", "block_id": 114950710, "block_timestamp": "2024-03-18T11:08:30.646Z", "signer_id": "slimedragon.near", "widget_name": "AreWeFlippedYet", "source_code": "const INTEL_NEAR_POOL = 4663;\nconst NVIDIA_NEAR_POOL = 4547;\nconst REF_CONTRACT_ID = \"v2.ref-finance.near\";\nconst INTEL_TOTAL_SUPPLY = 100_000_000_000;\nconst NVIDIA_TOTAL_SUPPLY = 3_000_000_000_000;\nconst NEAR_DECIMALS = 24;\nconst INTEL_DECIMALS = 18;\nconst NVIDIA_DECIMALS = 8;\n\nconst [value, setValue] = useState(undefined);\n\nconst intelPool = Near.asyncView(REF_CONTRACT_ID, \"get_pool\", {\n  pool_id: INTEL_NEAR_POOL,\n});\nconst nvidiaPool = Near.asyncView(REF_CONTRACT_ID, \"get_pool\", {\n  pool_id: NVIDIA_NEAR_POOL,\n});\n\nPromise.all([intelPool, nvidiaPool]).then(([intel, nvidia]) => {\n  const intelInIntelPool = ethers.BigNumber.from(intel.amounts[1]).div(\n    ethers.BigNumber.from(10).pow(ethers.BigNumber.from(INTEL_DECIMALS))\n  );\n  const nearInIntelPool = ethers.BigNumber.from(intel.amounts[0]).div(\n    ethers.BigNumber.from(10).pow(ethers.BigNumber.from(INTEL_DECIMALS))\n  );\n  const intelCapInNear = nearInIntelPool\n    .mul(\n      ethers.BigNumber.from(INTEL_TOTAL_SUPPLY).mul(\n        ethers.BigNumber.from(10).pow(ethers.BigNumber.from(INTEL_DECIMALS))\n      )\n    )\n    .div(ethers.BigNumber.from(intelInIntelPool));\n\n  const nvidiaInNvidiaPool = ethers.BigNumber.from(nvidia.amounts[0]).div(\n    ethers.BigNumber.from(10).pow(ethers.BigNumber.from(NVIDIA_DECIMALS))\n  );\n  const nearInNvidiaPool = ethers.BigNumber.from(nvidia.amounts[1]).div(\n    ethers.BigNumber.from(10).pow(ethers.BigNumber.from(NVIDIA_DECIMALS))\n  );\n  const nvidiaCapInNear = nearInNvidiaPool\n    .mul(\n      ethers.BigNumber.from(NVIDIA_TOTAL_SUPPLY).mul(\n        ethers.BigNumber.from(10).pow(ethers.BigNumber.from(NVIDIA_DECIMALS))\n      )\n    )\n    .div(ethers.BigNumber.from(nvidiaInNvidiaPool));\n\n  setValue(intelCapInNear.mul(10000).div(nvidiaCapInNear).toNumber() / 10000);\n});\n\nreturn value === undefined ? (\n  \"Loading ...\"\n) : (\n  <>\n    <h1>Are we flipped yet?</h1>\n    {value > 1 ? (\n      <h3>Yes! INTEAR has flipped NEARVIDIA</h3>\n    ) : (\n      <h3>\n        Not yet! But INTEAR has achieved {(value * 100).toFixed(2)}% progress\n        towards flipping NEARVIDIA\n      </h3>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/slimedragon.near/widget/AreWeFlippedYet", "fact_widget_deployments_id": "fd0b947e4469cee5d4b9c3acf1e5656f", "inserted_timestamp": "2024-03-18T12:29:02.451Z", "modified_timestamp": "2024-03-18T12:29:02.451Z", "__row_index": 2}