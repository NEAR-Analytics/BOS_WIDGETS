{"tx_hash": "9oxaNnxt1LvTcspVSHxfbVGZvh9eDav4w91hoCh1oedd", "action_id_social": "7zNcaZtjeMwRTEZRJDY9kf9aTPAL1eqEhAnWGiey8gwH-0-widget", "block_id": 101528550, "block_timestamp": "2023-09-20T05:28:35.562Z", "signer_id": "gr8h.near", "widget_name": "LensProfileCommentsView", "source_code": "State.init({});\n\nconst Box = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  box-sizing: border-box;\n  text-align: center;\n  margin-left: 1rem;\n`;\n\nconst CommentBox = styled.div`\n  width: 100%;\n  border: 1px solid gray;\n  margin-bottom: 1rem;\n  padding: 2rem 5px;\n`;\n\nconst ImgPlaceholder = styled.div`\n  width: 80px;\n  height: 80px;\n`;\n\nconst CommentPostWrapper = styled.div``;\n\nconst CommentContentWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0 1rem;\n`;\n\nconst CommentDate = styled.p`\n  align-self: flex-end;\n`;\n\nconst CommentDescription = styled.h3`\n  align-self: flex-start;\n`;\nconst CommentContent = styled.p`\n  align-self: flex-start;\n`;\n\nconst SubHeading = styled.h2`\n  text-align: left;\n  font-size: 18px;\n`;\n\nconst SelectedProfileBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  border-bottom: 1px solid gray;\n`;\n\nfunction renderComments() {\n  return (\n    <>\n      <SelectedProfileBox>\n        <SubHeading>\n          @{props.selectedProfile.profile.handle} comments:\n        </SubHeading>\n      </SelectedProfileBox>\n      <br />\n      <Box>\n        {!props.comments || props.comments.length === 0 ? (\n          <div>No Comments so far.</div>\n        ) : (\n          props.comments.map((comment) => {\n            const metadata = comment?.metadata;\n            const createdAt = new Date(comment?.createdAt);\n\n            return (\n              <CommentBox class=\"p-3\">\n                {metadata?.media?.length > 0 &&\n                  [metadata.media[0]].map((media) => {\n                    const mimeType = media?.original?.mimeType;\n\n                    let url = media?.original?.url;\n                    if (url.startsWith(\"ipfs://\")) {\n                      url = url.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\");\n                    }\n\n                    return mimeType === \"video/mp4\" ? (\n                      <iframe\n                        src={media?.original?.url}\n                        width=\"100%\"\n                        height=\"100%\"\n                      />\n                    ) : mimeType?.startsWith(\"image\") ? (\n                      <img src={url} width={80} />\n                    ) : null;\n                  })}\n\n                <CommentPostWrapper>\n                  <Widget\n                    src={`${props.DEV_USER}/widget/LensProfilePostsView`}\n                    props={{ posts: [comment.mainPost] }}\n                  />\n                </CommentPostWrapper>\n\n                <CommentContentWrapper>\n                  <CommentDate>{createdAt.toDateString()}</CommentDate>\n\n                  <CommentDescription>\n                    <Markdown text={metadata?.description} />\n                  </CommentDescription>\n\n                  <CommentContent>\n                    <Markdown text={metadata?.content} />\n                  </CommentContent>\n                </CommentContentWrapper>\n              </CommentBox>\n            );\n          })\n        )}\n      </Box>\n    </>\n  );\n}\n\nconsole.log(\"LensProfileCommentsView, props: \", props, \" state: \", state);\n\nreturn <div>{renderComments()}</div>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gr8h.near/widget/LensProfileCommentsView", "fact_widget_deployments_id": "187000d1140fec46d0a3468fb7447a10", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}