{"tx_hash": "FQTfDMhvXY2Zu1j6B2rb9LVYsTKBDnFHbaWeC3Z84rLX", "action_id_social": "DkdpMBpi9eN8h8A6xPmpSXkeXzvociKZYYU4fxh3rPUQ-0-widget", "block_id": 120934886, "block_timestamp": "2024-06-11T14:21:09.619Z", "signer_id": "jibolaojo.near", "widget_name": "EasyPoll.ViewPoll", "source_code": "const widgetOwner = props.widgetOwner ?? \"easypoll-v0.ndc-widgets.near\";\nconst customWidgetOwner = \"jibolaojo.near\";\nconst src = props.src;\nconst href = props.href;\nconst editHref = props.editHref;\nconst accountId = props.accountId ?? context.accountId;\nconst tabs = props.tabs;\nconst indexVersion = props.indexVersion ?? \"4.0.0\";\nconst isHuman = props.isHuman;\nconst isOg = props.isOg;\nconst blockHeight = props.blockHeight ?? \"final\";\nconst showDraft = props.showDraft ?? false;\nconst isLoggedIn = accountId ? true : false;\n\nif (!src) {\n  return \"Please provide poll src\";\n}\n\nconst poll = Social.get(`${src}`, blockHeight);\nif (poll === null) {\n  return \"Loading...\";\n}\nif (poll === undefined) {\n  return \"404 Poll not found\";\n}\n\n// pretify\nconsole.log(\"poll\", poll);\n\npoll = JSON.parse(poll);\npoll.accountId = src.split(\"/\")[0];\n\nlet userAnswers = isLoggedIn\n  ? Social.index(`easypoll-${indexVersion}-answer`, `${src}`, {\n      accountId: accountId,\n    })\n  : [];\nif (!userAnswers) return \"\";\n\nreturn (\n  <>\n    <Widget\n      src={`${customWidgetOwner}/widget/EasyPoll.PollDetails`}\n      props={{\n        href: tabs.VIEW_POLL.href(src, blockHeight),\n        editHref: tabs.EDIT_POLL.href(src, blockHeight),\n        resultsHref: tabs.RESULTS.href(src, blockHeight),\n        deleteHref: tabs.DELETE_POLL.href(src, blockHeight),\n        widgetOwner,\n        blockHeight: blockHeight,\n        isHuman,\n        isOg,\n        poll: poll,\n        userAnswers: userAnswers,\n        indexVersion,\n        src,\n      }}\n    />\n  </>\n);\n", "metadata": {"fork_of": "easypoll-v0.ndc-widgets.near/widget/EasyPoll.ViewPoll@98841510"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jibolaojo.near/widget/EasyPoll.ViewPoll", "fact_widget_deployments_id": "ffcf5dc2560f499efb54b39f5cbf39c5", "inserted_timestamp": "2024-06-11T15:05:48.085Z", "modified_timestamp": "2024-06-11T16:05:39.036Z", "__row_index": 0}