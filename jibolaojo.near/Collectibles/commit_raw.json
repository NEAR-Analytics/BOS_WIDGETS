{"tx_hash": "8MM3isiJNXDBarfahFuu4BnDKz6vRY3Qeo4YNfsj9CNM", "action_id_social": "3zEbmXScYgpbm4aaGG4ummc2kYMSVmHQx15Dix3AzK6J-0-widget", "block_id": 106792518, "block_timestamp": "2023-11-29T07:37:33.984Z", "signer_id": "jibolaojo.near", "widget_name": "Collectibles", "source_code": "const operationsDoc = `\n  query MyQuery {\n    mb_views_nft_tokens(\n      order_by: {last_transfer_timestamp: desc}\n      where: {owner: {_eq: \"${\n        props.wallet_id || context.accountId\n      }\"}, _and: {burned_timestamp: {_is_null: true}, last_transfer_timestamp: {}}}\n    ) {\n      nft_contract_id\n      title\n      description\n      media\n      last_transfer_receipt_id\n      metadata_id\n      token_id\n      nft_contract_name\n      nft_contract_icon\n    }\n  }\n`;\n\nfunction fetchGraphQL() {\n  const result = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: operationsDoc,\n      variables: {},\n      operationName: \"MyQuery\",\n    }),\n  });\n  console.log(\"result\", result);\n  return result;\n}\n\nconst res = fetchGraphQL();\n\nif (!(res && res.body)) return \"...\";\n\nconst nfts = res.body.data.mb_views_nft_tokens;\nreturn (\n  <>\n    {nfts.map((nft) => (\n      <div\n        key={nft.contract_id + nft.token_id}\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          backgroundColor: \"#eee\",\n          padding: \"1rem\",\n          marginBottom: \"1rem\",\n          cursor: \"pointer\",\n        }}\n      >\n        <img\n          style={{ marginBottom: \"1rem\" }}\n          height={60}\n          width={60}\n          layout=\"intrinsic\"\n          src={\n            nft.media ??\n            \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n          }\n        />\n        <div\n          style={{\n            fontWeight: 500,\n            fontSize: \"1.125rem\",\n            textAlign: \"center\",\n          }}\n        >\n          <div>{nft.title}</div>\n          <div>[{nft.token_id}]</div>\n        </div>\n      </div>\n    ))}\n  </>\n);\n", "metadata": {"image": {}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jibolaojo.near/widget/Collectibles", "fact_widget_deployments_id": "543712e60e8535e6251cc4de20e9666a", "inserted_timestamp": "2023-11-29T09:39:36.666Z", "modified_timestamp": "2023-11-29T09:39:36.666Z", "__row_index": 1}