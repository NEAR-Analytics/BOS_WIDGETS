{"tx_hash": "Hs2yCQPMBX7mb59LAoPzuEMmcCFKXT7nabB4spqTpNsP", "action_id_social": "7axigXhVG8eAFgpz1JgeVvEg9fc5eYHZ1LKurTuGeWSw-0-widget", "block_id": 106792830, "block_timestamp": "2023-11-29T07:43:50.219Z", "signer_id": "jibolaojo.near", "widget_name": "Collectibles", "source_code": "const operationsDoc = `\n  query MyQuery {\n    mb_views_nft_tokens(\n      order_by: {last_transfer_timestamp: desc}\n      where: {owner: {_eq: \"${\n        props.wallet_id || context.accountId\n      }\"}, _and: {burned_timestamp: {_is_null: true}, last_transfer_timestamp: {}}}\n    ) {\n      nft_contract_id\n      title\n      description\n      media\n      last_transfer_receipt_id\n      metadata_id\n      token_id\n      nft_contract_name\n      nft_contract_icon\n    }\n  }\n`;\n\nfunction fetchGraphQL() {\n  const result = fetch(\"https://graph.mintbase.xyz/mainnet\", {\n    method: \"POST\",\n    headers: {\n      \"mb-api-key\": \"anon\",\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: operationsDoc,\n      variables: {},\n      operationName: \"MyQuery\",\n    }),\n  });\n  console.log(\"result\", result);\n  return result;\n}\n\nconst res = fetchGraphQL();\n\nif (!(res && res.body)) return \"...\";\n\nconst nfts = res.body.data.mb_views_nft_tokens;\nreturn (\n  <>\n    {nfts.map((nft) => (\n      <div\n        key={nft.contract_id + nft.token_id}\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          backgroundColor: \"#eee\",\n          padding: \"1rem\",\n          marginBottom: \"1rem\",\n          cursor: \"pointer\",\n        }}\n      >\n        <img\n          style={{ marginBottom: \"1rem\" }}\n          height={60}\n          width={60}\n          layout=\"intrinsic\"\n          src={\n            nft.media ??\n            \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n          }\n        />\n        <div\n          style={{\n            fontWeight: 500,\n            fontSize: \"1.125rem\",\n            textAlign: \"center\",\n          }}\n        >\n          <div>{nft.title}</div>\n          <div\n            style={{\n              overflowWrap: \"break-word\",\n              wordWrap: \"break-word\",\n              wordBreak: \"break-word\",\n            }}\n          >\n            [{nft.token_id}]\n          </div>\n        </div>\n      </div>\n    ))}\n  </>\n);\n", "metadata": {"image": {}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jibolaojo.near/widget/Collectibles", "fact_widget_deployments_id": "58d5ff3acfd0013d87a01789d1c0b64b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}