{"tx_hash": "5L9eMeWoaYDFoezkG6G9sdYu2STztRrCgCeGPUYEho8b", "action_id_social": "EnyU6zVUw3FuE55zjkHgPm1K3jZuewFnASAdxmPyV8iP-0-widget", "block_id": 102853648, "block_timestamp": "2023-10-07T21:13:14.638Z", "signer_id": "c5d50293c3a3ed146051462e6e02e469acda10b517bfffeb3d34652076f0cb7c", "widget_name": "Yaypeg", "source_code": "const lookup = (id) =>\n  `https://firebasestorage.googleapis.com/v0/b/yaypegsnft.appspot.com/o/illustration%2F${id}.png`;\n\nconst getId = (address) => {\n  if (!ethers.utils.isAddress(address)) return null;\n\n  return (\n    ethers.BigNumber.from(\n      ethers.utils.keccak256(ethers.utils.arrayify(address))\n    )\n      .mod(10000)\n      .toNumber() + 1\n  );\n};\n\nconst getYaypeg = (address) => {\n  if (!ethers.utils.isAddress(address)) return null;\n  const id = getId(address);\n\n  return asyncFetch(lookup(id)).then(\n    ({ body: { downloadTokens } }) =>\n      `https://firebasestorage.googleapis.com/v0/b/yaypegsnft.appspot.com/o/illustration%2F${id}.png?alt=media&firebase=${downloadTokens}`\n  );\n};\n\nconst ImageStyle = styled.img`\n    ${props.styles}\n    border-radius: 10px;\n`;\n\nconst Yaypeg = ({ address, width, height, gif }) => {\n  const [img, setImg] = useState(\"\");\n\n  useEffect(() => {\n    getYaypeg(address).then((y) => setImg(y));\n  }, []);\n\n  if (gif) {\n    return (\n      <ImageStyle\n        src={`https://firebasestorage.googleapis.com/v0/b/yaypegsnft.appspot.com/o/collection%2F${getId(\n          address\n        )}.gif?alt=media&firebase=undefined`}\n        width={width}\n        height={height}\n      />\n    );\n  }\n\n  if (!img) {\n    return <p>Loading...</p>;\n  }\n\n  return <ImageStyle src={img} width={width} height={height} />;\n};\n\nreturn <Yaypeg {...props} />;\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/c5d50293c3a3ed146051462e6e02e469acda10b517bfffeb3d34652076f0cb7c/widget/Yaypeg", "fact_widget_deployments_id": "1fad0cd90b3d70a4a849a660c5bac865", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}