{"tx_hash": "BCZNbAoH8SkAMPc41c3AN2kzcYqmX5AtVm7iNeafC7oY", "action_id_social": "23H8fdQjfQujm6P28H71PoHCJoX8YV2Szpo4FmvLXbX8-0-widget", "block_id": 103058465, "block_timestamp": "2023-10-10T14:56:12.010Z", "signer_id": "discover.near", "widget_name": "Project.Page", "source_code": "const NavUnderline = styled.ul`\n  border-bottom: 1px #eceef0 solid;\n\n  a {\n    color: #687076;\n    text-decoration: none;\n  }\n\n  a.active {\n    font-weight: bold;\n    color: #0c7283;\n    border-bottom: 4px solid #0c7283;\n  }\n`;\n\nconst Button = styled.button`\n  height: 40px;\n  font-size: 14px;\n  border-color: #e3e3e0;\n  background-color: #ffffff;\n`;\n\nconst Banner = styled.div`\n  max-width: 100%;\n  min-height: 240px;\n  height: 240px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`;\n\nconst { Feed } = VM.require(\"efiz.near/widget/Module.Feed\");\nFeed = Feed || (() => <></>);\n\nconst { creatorId, projectId } = props;\n\nconst data = Social.get(`${creatorId}/thing/${projectId}/**`, \"final\");\n\nif (!data) {\n  return <div>Project not found</div>;\n}\n\nconst projectData = JSON.parse(data[\"\"]);\n\nconst tabs = [\n  {\n    defaultActive: true,\n    title: \"Activity\",\n    iconClass: \"bi bi-house-door\",\n    module: () => (\n      <>\n        <Widget\n          src=\"devs.near/widget/Compose\"\n          props={{\n            index: {\n              post: JSON.stringify([\n                {\n                  key: {\n                    id: projectId,\n                    type: \"thing\",\n                  },\n                  value: {\n                    type: \"md\",\n                  },\n                },\n              ]),\n            },\n          }}\n        />\n        <Feed\n          index={[\n            {\n              action: \"post\",\n              key: {\n                type: \"thing\",\n                path: `${creatorId}/thing/${projectId}`,\n              },\n              options: {\n                limit: 10,\n                order: \"desc\",\n                accountId: props.accounts,\n              },\n              cacheOptions: {\n                ignoreCache: true,\n              },\n            },\n            {\n              action: \"repost\",\n              key: JSON.stringify({\n                type: \"thing\",\n                path: `${creatorId}/thing/${projectId}`,\n              }),\n              options: {\n                limit: 10,\n                order: \"desc\",\n                accountId: props.accounts,\n              },\n              cacheOptions: {\n                ignoreCache: true,\n              },\n            },\n          ]}\n          Item={(p) => (\n            <Widget\n              loading={<div className=\"w-100\" style={{ height: \"200px\" }} />}\n              src=\"mob.near/widget/MainPage.N.Post\"\n              props={{ accountId: p.accountId, blockHeight: p.blockHeight }}\n            />\n          )}\n        />\n      </>\n    ),\n  },\n  {\n    iconClass: \"bi bi-gear\",\n    title: \"Settings\",\n    module: () => (\n      <Widget\n        src=\"discover.near/widget/Project.Settings\"\n        props={{ thingId: projectId, data }}\n      />\n    ),\n  },\n  // ...(projectData.tabs || []),\n];\n\nState.init({\n  selectedTab: tabs[0],\n});\n\nconst { metadata } = data;\nconst { name, description, image, backgroundImage } = metadata;\n\nfunction Module({ module }) {\n  if (typeof module === \"function\") {\n    return module();\n  } else {\n    return <Widget src={module.src} />;\n  }\n}\n\nreturn (\n  <div className=\"d-flex flex-column gap-3 bg-white\">\n    <Banner\n      className=\"object-fit-cover\"\n      style={{\n        background: `center / cover no-repeat url(https://ipfs.near.social/ipfs/${backgroundImage.ipfs_cid})`,\n      }}\n    />\n\n    <div className=\"d-md-flex d-block justify-content-between container\">\n      <div className=\"d-md-flex d-block align-items-end\">\n        <div className=\"position-relative\">\n          <div style={{ width: 150, height: 100 }}>\n            <img\n              alt=\"Loading logo...\"\n              className=\"border border-3 border-white rounded-circle shadow position-absolute\"\n              width=\"150\"\n              height=\"150\"\n              src={`https://ipfs.near.social/ipfs/${image.ipfs_cid}`}\n              style={{ top: -50 }}\n            />\n          </div>\n        </div>\n\n        <div className=\"d-flex flex-column ps-3 pt-3 pb-2\">\n          <span className=\"h1 text-nowrap\">{name}</span>\n          <span className=\"text-secondary\">{description}</span>\n        </div>\n      </div>\n\n      <div className=\"d-flex align-items-end gap-3\">\n        <Button\n          className=\"btn btn-outline-primary\"\n          onClick={() => State.update({ selectedTab: tabs[3] })}\n        >\n          Configure Project\n        </Button>\n        <Button className=\"btn btn-outline-primary\">Join</Button>\n      </div>\n    </div>\n\n    <NavUnderline className=\"nav\">\n      {tabs &&\n        tabs.map(({ iconClass, title }, index) =>\n          title ? (\n            <li className=\"nav-item\" key={title}>\n              <div\n                className={[\n                  \"d-inline-flex gap-2\",\n                  state.selectedTab === title ? \"nav-link active\" : \"nav-link\",\n                ].join(\" \")}\n                style={{ cursor: \"pointer\" }}\n                onClick={() => State.update({ selectedTab: tabs[index] })}\n              >\n                <i className={iconClass} />\n                <span>{title}</span>\n              </div>\n            </li>\n          ) : null\n        )}\n    </NavUnderline>\n    <Content>\n      <Module module={state.selectedTab.module} />\n    </Content>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/discover.near/widget/Project.Page", "fact_widget_deployments_id": "78690ffc8cf115ac48ba50957f949c9c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}