{"tx_hash": "2GeicieqcK5mkLbLGxme9kgTomtXBjiaDkZgpUXf4LBN", "action_id_social": "6zFNFyNGNkaL5uJkhipLpacCpbuWpd8q4ChFDN8W5ztu-0-widget", "block_id": 106887866, "block_timestamp": "2023-11-30T20:44:22.602Z", "signer_id": "embeds.near", "widget_name": "EmbedPlugin", "source_code": "const { accountId, name, type, metadata, plugin } = props;\n\nconst installedEmbeds = JSON.parse(\n  Social.get(`${accountId}/settings/every/embed`, \"final\") || \"null\"\n);\n\nif (plugin) {\n  return (\n    <div\n      className=\"card\"\n      style={{\n        maxWidth: \"100%\",\n        height: \"200px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        // justifyContent: \"space-between\",\n        overflow: \"hidden\",\n      }}\n    >\n      <div>\n        <p>widgetSrc: {plugin.widgetSrc}</p>\n        <p>embedSrc: {plugin.embedSrc}</p>\n      </div>\n      {context.accountId && (\n        <div\n          className=\"pb-2\"\n          style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"4px\" }}\n        >\n          <button\n            onClick={() =>\n              Social.set({\n                settings: {\n                  every: {\n                    embed: [\n                      ...(installedEmbeds || []),\n                      {\n                        widgetSrc: plugin.widgetSrc,\n                        embedSrc: plugin.embedSrc,\n                      },\n                    ],\n                  },\n                },\n              })\n            }\n          >\n            install\n          </button>\n          <Widget\n            src=\"mob.near/widget/N.StarButton\"\n            props={{\n              notifyAccountId: accountId,\n              item: {\n                type: \"social\",\n                path: `${accountId}/${type}/${name}`,\n              },\n            }}\n          />\n          <Widget\n            src=\"mob.near/widget/N.LikeButton\"\n            props={{\n              notifyAccountId: accountId,\n              item: {\n                type: \"social\",\n                path: `${accountId}/${type}/${name}`,\n              },\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst data = JSON.parse(\n  Social.get(`${accountId}/plugin/embed/${name}`, \"final\") || \"null\"\n);\n\nif (!data) {\n  return <p>Loading... {`${accountId}/plugin/embed/${name}`}</p>;\n}\n\n// Use metadata.name if it exists, otherwise use the passed name\nconst displayName = metadata.name || name;\nconst defaultImage =\n  \"https://ipfs.near.social/ipfs/bafkreihi3qh72njb3ejg7t2mbxuho2vk447kzkvpjtmulsb2njd6m2cfgi\";\n\nreturn (\n  <div\n    className=\"card\"\n    style={{\n      maxWidth: \"100%\",\n      height: \"300px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      overflow: \"hidden\",\n    }}\n  >\n    <div\n      className=\"card-img-top\"\n      style={{\n        backgroundImage: `url(${metadata.backgroundImage || defaultImage})`,\n        height: \"80px\",\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n      }}\n    />\n\n    <div className=\"card-body\">\n      <Link\n        to={`/${accountId}/plugin/embed/${name}`}\n        style={{ textDecoration: \"none\" }}\n      >\n        <h5 className=\"card-title\">\n          {accountId}/{displayName}\n        </h5>\n      </Link>\n      {metadata.description && (\n        <p\n          className=\"card-text\"\n          style={{ overflow: \"hidden\", textOverflow: \"ellipsis\" }}\n        >\n          {metadata.description}\n        </p>\n      )}\n      {data && (\n        <>\n          <p>widgetSrc: {data.widgetSrc}</p>\n          <p>embedSrc: {data.embedSrc}</p>\n        </>\n      )}\n    </div>\n    {context.accountId && (\n      <div\n        className=\"pb-2\"\n        style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"4px\" }}\n      >\n        <button\n          onClick={() =>\n            Social.set({\n              settings: {\n                every: {\n                  embed: [\n                    ...(installedEmbeds || []),\n                    {\n                      widgetSrc: plugin.widgetSrc,\n                      embedSrc: plugin.embedSrc,\n                    },\n                  ],\n                },\n              },\n            })\n          }\n        >\n          install\n        </button>\n        <Widget\n          src=\"mob.near/widget/N.StarButton\"\n          props={{\n            notifyAccountId: accountId,\n            item: {\n              type: \"social\",\n              path: `${accountId}/${type}/${name}`,\n            },\n          }}\n        />\n        <Widget\n          src=\"mob.near/widget/N.LikeButton\"\n          props={{\n            notifyAccountId: accountId,\n            item: {\n              type: \"social\",\n              path: `${accountId}/${type}/${name}`,\n            },\n          }}\n        />\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/embeds.near/widget/EmbedPlugin", "fact_widget_deployments_id": "f3a325d7fc256d60ccefaa4e386196c6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}