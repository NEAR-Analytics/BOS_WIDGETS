{"tx_hash": "4avp5dAXzWhKM7Eg7pMFeQZJV1o5nAcVsnb5bguo9WR2", "action_id_social": "3MKAiseDBzfSfeejGfdTvwFVMg53Z8rHaD7Ls2L8ynTr-0-widget", "block_id": 104254977, "block_timestamp": "2023-10-26T15:52:18.089Z", "signer_id": "cc411bd6fe2452454bda180874ca97696c27a8769bf30afb94b1a296e738d8c6", "widget_name": "BOSparaIngenieros", "source_code": "const { id, doc, by } = props;\n\nconst final_id = \"2cab288f-90c5-f7c6-bda2-eda74b01fb92\";\n\nconst final_by = \"cc411bd6fe2452454bda180874ca97696c27a8769bf30afb94b1a296e738d8c6\";\n\nif (final_id !== \"??replace_with_id??\") {\n  id = final_id;\n}\n\nif (final_by !== \"??replace_with_account??\") {\n  by = final_by;\n}\n\nconst project = Social.get(`${by}/thing/project/${id}/**`);\nconst docs = Social.get(`${by}/document/${id}/*/title`);\n\nif (project === null || docs === null) return <></>;\nif (project === undefined) return <>Project not found</>;\n\nState.init({\n  doc: props.doc,\n  data: null,\n});\n\nif (state.doc) {\n  State.update({\n    data: Social.get(`${by}/document/${id}/${state.doc}/**`),\n  });\n} else {\n  State.update({\n    doc: Object.keys(docs || {})?.[0],\n  });\n}\n\nconst goTo = ({ doc }) => {\n  doc && State.update({ doc: doc });\n};\n\nconst href = ({ doc }) => {\n  return `#/createit.near/widget/p?id=${id}&by=${by}&doc=${doc}`;\n};\n\nconst unflattenDocuments = (inputObject) => {\n  if (!inputObject) {\n    return inputObject;\n  }\n  const result = {};\n  Object.keys(inputObject).forEach((key) => {\n    const keys = key.split(\".\");\n    let currentLevel = result;\n\n    keys.forEach((k, i) => {\n      if (i === keys.length - 1) {\n        if (currentLevel[k] && Object.keys(currentLevel[k] || {}).length > 0) {\n          Object.assign(currentLevel[k], inputObject[key]);\n        } else {\n          currentLevel[k] = inputObject[key];\n        }\n        currentLevel[k].path = key;\n      } else {\n        currentLevel[k] = currentLevel[k] || {};\n        currentLevel[k].children = currentLevel[k].children || {};\n        currentLevel = currentLevel[k].children;\n      }\n    });\n  });\n\n  return result;\n};\n\nreturn (\n  <Widget\n    src={\n      project.template.src || \"createit.near/widget/templates.project.doc\"\n    }\n    props={{\n      project: project.data,\n      theme: project.template.theme,\n      documents: docs,\n      folders: unflattenDocuments(docs),\n      activeDocument: state.doc,\n      activeDocumentData: state.data,\n      goTo,\n      href,\n    }}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cc411bd6fe2452454bda180874ca97696c27a8769bf30afb94b1a296e738d8c6/widget/BOSparaIngenieros", "fact_widget_deployments_id": "d859579f513ef4cb04d8a4afda704596", "inserted_timestamp": "2023-10-26T17:45:02.803Z", "modified_timestamp": "2023-10-26T17:45:02.803Z", "__row_index": 0}