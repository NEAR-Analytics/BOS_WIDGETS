{"tx_hash": "FtkcYzVADChwB4WJvR8doMTSo4xtpD19EnqhsP4bE7cg", "action_id_social": "ChKWK6voya1oxRmEEt63z6HcjCicL3iCnjNq477HM7QN-0-widget", "block_id": 95235451, "block_timestamp": "2023-06-28T15:15:01.297Z", "signer_id": "testingitagain.near", "widget_name": "Wallet-Viewer-Indexer-xyz", "source_code": "initState({\n  walletAddress: \"\",\n  nftData: [],\n});\n\nconst fetchData = () => {\n  State.update({ nftData: [] });\n\n  let data = fetch(\"https://api.indexer.xyz/graphql\", {\n    method: \"POST\",\n    headers: {\n      \"x-api-user\": \"daniel-prod-V2\",\n      \"x-api-key\": \"zLJkQsF.0624d9a07b804e068abe5c6c378bccb2\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `\n        query MyQuery {\n          near {\n            nft_meta(where: {nft_state: {owner: {_eq: \"${state.walletAddress}\"}}}) {\n              image\n              name\n              token_id\n              collection {\n                slug\n              }\n              rarity\n              ranking\n            }\n          }\n        }`,\n    }),\n  });\n\n  if (data) {\n    const nftData = data.body.data.near.nft_meta;\n    State.update({ nftData });\n  }\n};\n\nconst updateWalletAddress = (e) => {\n  State.update({ walletAddress: e.target.value });\n};\n\nconst getRarityColor = (rarity) => {\n  if (rarity < 0.1) {\n    return \"#ee0000\";\n  } else if (rarity < 0.25) {\n    return \"#ff9900\";\n  } else if (rarity < 0.5) {\n    return \"#ffc300\";\n  } else {\n    return \"#61c700\";\n  }\n};\n\nreturn (\n  <div\n    style={{\n      fontFamily: \"-apple-system, BlinkMacSystemFont, sans-serif\",\n      maxWidth: \"1200px\",\n      margin: \"0 auto\",\n      padding: \"20px\",\n    }}\n  >\n    <a href=\"https://indexer.xyz/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <img\n        src=\"https://indexer.xyz/indexer-logo-black.svg\"\n        alt=\"Indexer.xyz logo\"\n        style={{ height: \"1.5em\", verticalAlign: \"middle\" }}\n      />\n    </a>\n    <h1 style={{ fontSize: \"48px\", fontWeight: \"bold\", marginBottom: \"20px\" }}>\n      NFT Wallet Gallery\n    </h1>\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        marginBottom: \"30px\",\n        flexWrap: \"wrap\",\n      }}\n    >\n      <label\n        htmlFor=\"walletAddressInput\"\n        style={{ fontSize: \"16px\", marginRight: \"10px\" }}\n      >\n        Enter Wallet Address:\n      </label>\n      <input\n        type=\"text\"\n        id=\"walletAddressInput\"\n        value={state.walletAddress}\n        onChange={updateWalletAddress}\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: \"5px\",\n          padding: \"5px 10px\",\n          margin: \"0 10px 10px 0\",\n          flexGrow: 1,\n        }}\n      />\n      <button\n        onClick={fetchData}\n        style={{\n          backgroundColor: \"#0070c9\",\n          border: \"none\",\n          borderRadius: \"5px\",\n          color: \"#fff\",\n          cursor: \"pointer\",\n          padding: \"5px 10px\",\n          marginLeft: \"10px\",\n        }}\n      >\n        Fetch NFTs\n      </button>\n    </div>\n    {state.nftData.length > 0 && (\n      <div\n        style={{\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          gap: \"20px\",\n          justifyContent: \"center\",\n          marginTop: \"20px\",\n        }}\n      >\n        {state.nftData.map((nft) => (\n          <a\n            href={`https://www.tradeport.xyz/near/collection/${nft.collection.slug}/${nft.token_id}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{ textDecoration: \"none\", color: \"inherit\" }}\n          >\n            <div\n              style={{\n                backgroundColor: \"#f0f0f0\",\n                borderRadius: \"10px\",\n                boxShadow: \"0 2px 10px rgba(0, 0, 0, 0.1)\",\n                padding: \"20px\",\n                width: \"200px\",\n                textAlign: \"center\",\n              }}\n            >\n              <img\n                src={nft.image}\n                alt={nft.name}\n                style={{\n                  width: \"100%\",\n                  height: \"auto\",\n                  borderRadius: \"5px\",\n                  objectFit: \"cover\",\n                  marginBottom: \"15px\",\n                }}\n              />\n              <h3 style={{ fontSize: \"18px\", margin: \"0 0 10px\" }}>\n                {nft.name}\n              </h3>\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"space-between\",\n                  marginBottom: \"5px\",\n                }}\n              >\n                <span\n                  style={{\n                    backgroundColor: \"#3f51b5\",\n                    borderRadius: \"20px\",\n                    color: \"#fff\",\n                    display: \"inline-block\",\n                    fontSize: \"12px\",\n                    fontWeight: \"bold\",\n                    padding: \"3px 8px\",\n                  }}\n                >\n                  Rank: {Math.round(nft.ranking)}\n                </span>\n              </div>\n              <p style={{ fontSize: \"14px\", marginBottom: \"5px\" }}>\n                Token ID: {nft.token_id}\n              </p>\n              <p style={{ fontSize: \"14px\" }}>\n                Collection: {nft.collection.slug}\n              </p>\n            </div>\n          </a>\n        ))}\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/testingitagain.near/widget/Wallet-Viewer-Indexer-xyz", "fact_widget_deployments_id": "46faeb060bb640e721414aa6f4551cf4", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 0}