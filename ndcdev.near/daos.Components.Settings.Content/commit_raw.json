{"tx_hash": "6jMEVPpbhzQPP3n9dhXNi3uo3BuPM2DcjG7XfWnkggxB", "action_id_social": "G85oGhcKJxFFna7gVi8phq7FjvwNhjDZhZmhWge3fLgh-0-widget", "block_id": 117945457, "block_timestamp": "2024-04-30T10:44:40.891Z", "signer_id": "ndcdev.near", "widget_name": "daos.Components.Settings.Content", "source_code": "let { content, contractName } = VM.require(\n  `ndcdev.near/widget/daos.Config`,\n);\nif (!contractName || !content)\n  return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst { selectedDao } = props;\n\nconst Form = styled.div`\n  border-radius: 20px;\n  background: white;\n\n  label {\n    font-size: 14px;\n    margin-bottom: 5px;\n  }\n\n  .form-control.error {\n    border: 1px solid red;\n  }\n\n  .title {\n    b {\n      font-weight: 600;\n    }\n    font-weight: 300;\n\n    a {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst Contact = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  .form-element {\n    width: 100%;\n  }\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst [daoContent, setDaoContent] = useState({});\n\nuseEffect(() => {\n  if (selectedDao) {\n    setDaoContent(\n      selectedDao.metadata.content\n        ? JSON.parse(selectedDao.metadata.content)\n        : {\n            info: {},\n            guidance: {},\n          },\n    );\n  }\n}, [selectedDao]);\n\nconst handleSave = () => {\n  Near.call(contractName, \"edit_dao\", {\n    id: selectedDao.id,\n    body: {\n      title: selectedDao.title,\n      handle: selectedDao.handle,\n      dao_type: selectedDao.dao_type,\n      description: selectedDao.description,\n      logo_url: selectedDao.logo_url,\n      banner_url: selectedDao.banner_url,\n      account_id: selectedDao.account_id,\n    },\n    verticals: selectedDao.verticals,\n    metrics: selectedDao.metrics,\n    metadata: {\n      ...selectedDao.metadata,\n      content: JSON.stringify(daoContent),\n    },\n  });\n};\n\nreturn (\n  <Form className=\"d-flex flex-column gap-3\">\n    <Widget\n      src=\"near/widget/DIG.Tabs\"\n      props={{\n        variant: \"line\",\n        size: \"default\",\n        items: [\n          ...content.info.cards.map(({ title, icon }, index) => {\n            return {\n              name: (\n                <>\n                  <img style={{ width: \"20px\" }} src={icon} />\n                  {title}\n                </>\n              ),\n              value: index,\n              content: (\n                <Widget\n                  src={`ndcdev.near/widget/daos.Components.Settings.InfoCard`}\n                  props={{\n                    section: \"info\",\n                    key: title,\n                    selectedDao,\n                    daoContent,\n                    setDaoContent,\n                  }}\n                />\n              ),\n            };\n          }),\n          ...content.guidance.cards.map(({ title, icon }, index) => {\n            return {\n              name: title,\n              value: index + content.info.cards.length,\n              content: (\n                <Widget\n                  src={`ndcdev.near/widget/daos.Components.Settings.InfoCard`}\n                  props={{\n                    section: \"guidance\",\n                    key: title,\n                    selectedDao,\n                    daoContent,\n                    setDaoContent,\n                  }}\n                />\n              ),\n              icon,\n            };\n          }),\n        ],\n      }}\n    />\n\n    <button className=\"btn btn-primary\" onClick={handleSave}>\n      <i className=\"ph ph-pencil-simple fs-5\" />\n      Save\n    </button>\n  </Form>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Components.Settings.Content", "fact_widget_deployments_id": "189b6b430106a836f9dc143b4582dd9c", "inserted_timestamp": "2024-04-30T12:47:49.607Z", "modified_timestamp": "2024-04-30T12:47:49.607Z", "__row_index": 8}