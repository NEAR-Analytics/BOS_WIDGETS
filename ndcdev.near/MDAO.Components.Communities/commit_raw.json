{"tx_hash": "141U71EK1YFhNSP1V3P9wiQpsBiCspiTfjvj93aLSg5m", "action_id_social": "ETuf3pdGNxohFqm3KKQDXfUeUbQasfQaTAu6PG3EHnKo-0-widget", "block_id": 108624525, "block_timestamp": "2023-12-23T12:07:55.870Z", "signer_id": "ndcdev.near", "widget_name": "MDAO.Components.Communities", "source_code": "const maxLimit = props.limit || 1000;\nconst darkTheme = props.theme === \"dark\";\n\nconst STATUS = {\n  GOOD: [\"Yes\", \"Approved\", \"Yes, include in special request\"],\n  BAD: [\"No\"],\n};\n\nconst Item = styled.div`\n  width: 350px;\n  border-radius: 10px;\n  border: 2px solid;\n  border-color: ${(props) =>\n    darkTheme\n      ? \"#f0ddce\"\n      : STATUS.GOOD.includes(props.status)\n      ? \"rgb(89 230 146 / 50%)\"\n      : STATUS.BAD.includes(props.status)\n      ? \"rgb(255 121 121 / 50%)\"\n      : \"rgb(136 0 255 / 14%)\"};\n  box-shadow: 0px 30px 80px 0px rgba(0, 0, 0, 0.1);\n\n  .color-text {\n    background: ${darkTheme\n      ? \"linear-gradient(270deg, #efdcd1 -1.69%, #e0c6f7 43.78%, #adc3fb 99.83%)\"\n      : \"linear-gradient(270deg, rgb(161 54 255) -1.69%, rgb(45 56 208) 99.83%)\"};\n    background-clip: text;\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n  }\n\n  p {\n    font-size: 16px;\n    font-weight: 300;\n    margin: 0;\n  }\n\n  @media screen and (max-width: 786px) {\n    width: 100%;\n  }\n`;\n\nconst Badge = styled.div`\n  border-radius: 20px;\n  padding: 3px 10px;\n  font-size: 14px;\n  width: max-content;\n  background: ${(props) =>\n    STATUS.GOOD.includes(props.status)\n      ? \"rgb(89, 230, 146)\"\n      : STATUS.BAD.includes(props.status)\n      ? \"rgb(255, 121, 121)\"\n      : \"rgb(236 226 254)\"};\n  color: ${(props) =>\n    STATUS.GOOD.includes(props.status)\n      ? \"rgb(9, 52, 46)\"\n      : STATUS.BAD.includes(props.status)\n      ? \"rgb(52, 9, 9)\"\n      : \"rgb(138 79 255)\"};\n`;\n\nconst Img = styled.img`\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n`;\n\nconst [communities, setCommunities] = useState([]);\n\nconst fetchCommunities = () => {\n  const sheetId = \"1HxWjHWwtHFtyo2GIUgpe7Oru4CVz2EWyuuvf3wT9Ghg\";\n  const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;\n  const sheetName = \"Overall Data\";\n  const query = encodeURIComponent(\"Select *\");\n  const url = `${base}&sheet=${sheetName}&tq=${query}`;\n  const resp = fetch(url);\n\n  if (resp?.body) {\n    let jsonString = resp.body.match(/(?<=\"table\":).*(?=}\\);)/g)[0];\n    let json = JSON.parse(jsonString);\n\n    setCommunities(json.rows.map((item) => item.c));\n  }\n};\n\nfetchCommunities();\n\nif (communities.length === 0)\n  return (\n    <div className=\"d-flex justify-content-center align-items-center gap-2\">\n      <Widget src=\"flashui.near/widget/Loading\" /> <b>Loading communities...</b>\n    </div>\n  );\n\nconst Connect = ({ item }) => (\n  <Item\n    status={item[4].v}\n    className=\"d-flex flex-column gap-2 justify-content-between align-items-center\"\n  >\n    <Img src={item[5].v} />\n    <h4 className=\"bold color-text px-4 pt-4 text-center\">{item[1].v}</h4>\n    <Badge status={item[4].v}>{item[4].v || \"No status yet\"}</Badge>\n    <div className=\"pt-2 pb-4 text-center\">\n      <div className=\"mb-2\">Created at: {item[3].f}</div>\n      <a href={item[2].v} className=\"color-text\">\n        <span className=\"mr-4\">Learn More</span>\n        <i className=\"bi bi-chevron-right\" />\n      </a>\n    </div>\n  </Item>\n);\n\nconsole.log(communities);\n\nreturn (\n  <div className=\"d-flex flex-wrap gap-5 justify-content-center\">\n    {communities\n      .reverse()\n      .slice(0, maxLimit)\n      .map((item) => (\n        <Connect item={item} />\n      ))}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/MDAO.Components.Communities", "fact_widget_deployments_id": "dc3eda62002ddd938b846ccfa9dc27c2", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}