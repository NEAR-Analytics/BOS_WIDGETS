{"tx_hash": "F8rHeMscQVcaCJG8MiNghnjHsMcX9THSTstPQ1oN6n8N", "action_id_social": "5SHRCd45vrhbKNP7c9TcLV82ZaZmHAGid3FDP6jWKF1p-0-widget", "block_id": 113315559, "block_timestamp": "2024-02-21T22:38:49.170Z", "signer_id": "ndcdev.near", "widget_name": "daos.Pages.Proposals.List", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos.Config`);\n\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nlet { id, dao_id, type } = props;\n\nconst Container = styled.div`\n  width: 100%;\n  height: max-content;\n  padding: 3rem 0;\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n  }\n`;\n\nlet items = null;\n\nif (dao_id)\n  items = Near.view(contractName, \"get_dao_posts\", {\n    dao_id: parseInt(dao_id),\n  });\nelse if (id)\n  items = [Near.view(contractName, \"get_post_by_id\", { id: parseInt(id) })];\nelse items = Near.view(contractName, \"get_all_posts\", { page: 0, limit: 100 });\n\nif (!items) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nreturn (\n  <Container>\n    {id ? (\n      <Widget\n        src=\"ndcdev.near/widget/daos.Components.Item\"\n        props={{\n          item: items[0],\n          index: items[0].id,\n          type,\n          id: items[0].id,\n          showMoreDefault: items[0].id,\n          showCommentsDefault: true,\n        }}\n      />\n    ) : (\n      <>\n        <div className=\"mb-4\">\n          <a\n            style={{ fontSize: \"24px\" }}\n            className=\"btn-primary text-uppercase\"\n            href={`/ndcdev.near/widget/daos.App?page=create_proposal&dao_id=${dao_id}`}\n          >\n            create {type}\n          </a>\n        </div>\n        <div className=\"d-flex flex-column gap-4\">\n          {items &&\n            items\n              .filter((i) => i.post_type === type)\n              .map((item, index) => (\n                <Widget\n                  src=\"ndcdev.near/widget/daos.Components.Item\"\n                  props={{ item, index, type, id: item.id }}\n                />\n              ))}\n        </div>\n      </>\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Pages.Proposals.List", "fact_widget_deployments_id": "854b82e58f3d0aa6cd819806aae4be92", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}