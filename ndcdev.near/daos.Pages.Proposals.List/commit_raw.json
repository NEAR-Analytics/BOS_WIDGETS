{"tx_hash": "CjNY4EZm1ZM9wdAaXRk4kP3aqADAmG8hJj7E4t9h3bzx", "action_id_social": "31nMCCRPWLMPLLMDW9qYJ5kaJxntvM1RiMZaWFEkqv6T-0-widget", "block_id": 117370520, "block_timestamp": "2024-04-22T08:49:20.225Z", "signer_id": "ndcdev.near", "widget_name": "daos.Pages.Proposals.List", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos.Config`);\n\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nlet { dao_id, type, accountId } = props;\n\nlet items = null;\nlet dao = null;\n\nif (dao_id) {\n  dao = Near.view(contractName, \"get_dao_by_handle\", {\n    handle: dao_id,\n  });\n\n  if (!dao) <Widget src=\"flashui.near/widget/Loading\" />;\n\n  items = Near.view(contractName, \"get_dao_posts\", {\n    dao_id: dao.id,\n    page: 0,\n    limit: 100,\n  });\n\n  if (dao.owners.includes(context.accountId)) {\n    const inReviewItems = Near.view(contractName, \"get_dao_posts\", {\n      dao_id: dao.id,\n      page: 0,\n      limit: 100,\n      status: \"InReview\",\n    });\n\n    items = [...items, ...inReviewItems];\n  }\n} else if (accountId) {\n  items = Near.view(contractName, \"get_posts_by_author\", {\n    author: accountId,\n    page: 0,\n    limit: 100,\n  });\n\n  if (items.length === 0) {\n    items = Near.view(contractName, \"get_all_posts\", { page: 0, limit: 100 });\n    accountId = null;\n  }\n} else\n  items = Near.view(contractName, \"get_all_posts\", { page: 0, limit: 100 });\n\nif (!items) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst Table = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem 0 3rem 0;\n\n  .created {\n    color: #5c656a;\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n  }\n\n  .account-link {\n    color: #4855fc;\n  }\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst TableHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  background: #f8f8f8;\n  padding: 10px 16px;\n  jusify-content: flex-start;\n`;\n\nconst TableHeaderCell = styled.div`\n  padding: 0 0 0 10px;\n  display: flex;\n  flex: ${(props) => props.flex || 1};\n`;\n\nconst Mobile = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 3rem;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n`;\n\nreturn (\n  <>\n    {items.length === 0 ? (\n      <div className=\"w-100 my-5 d-flex justify-content-center align-tems-center\">\n        <h1>No active Reports</h1>\n      </div>\n    ) : (\n      <>\n        <Table>\n          <TableHeader>\n            <TableHeaderCell flex={0.7}>Status</TableHeaderCell>\n            <TableHeaderCell flex={1.5}>DAO</TableHeaderCell>\n            <TableHeaderCell> Modified </TableHeaderCell>\n            <TableHeaderCell flex={3}>Proposals states</TableHeaderCell>\n            <TableHeaderCell></TableHeaderCell>\n          </TableHeader>\n          {items\n            .sort((a, b) => b.created_at - a.created_at)\n            .map((row, index) => (\n              <Widget\n                src=\"ndcdev.near/widget/daos.Components.Post\"\n                props={{ item: row, index, type, rowId: row.id }}\n              />\n            ))}\n        </Table>\n        <Mobile>\n          {items\n            .sort((a, b) => b.created_at - a.created_at)\n            .map((row, index) => (\n              <Widget\n                src=\"ndcdev.near/widget/daos.Components.Post\"\n                props={{\n                  item: row,\n                  index,\n                  type,\n                  rowId: row.id,\n                  isMobile: true,\n                }}\n              />\n            ))}\n        </Mobile>\n      </>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Pages.Proposals.List", "fact_widget_deployments_id": "9262909d64816bdaeb5681cb97359404", "inserted_timestamp": "2024-04-22T10:34:18.464Z", "modified_timestamp": "2024-04-22T10:34:18.464Z", "__row_index": 23}