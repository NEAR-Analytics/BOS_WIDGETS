{"tx_hash": "7duo9QbjSmLRxhSi2m98FxxDSQ9oqGXMRuBtRxBAUykd", "action_id_social": "H8uzP7vVNZkUYyY6juHvFTpEFKjiQnBueAkcDcPVzcAN-0-widget", "block_id": 113429842, "block_timestamp": "2024-02-23T16:18:38.198Z", "signer_id": "ndcdev.near", "widget_name": "daos.Pages.Proposals.List", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos.Config`);\n\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nlet { dao_id, type, accountId } = props;\n\nconst Container = styled.div`\n  width: 100%;\n  height: max-content;\n  padding: 3rem 0;\n\n  .dao-img {\n    width: 50px;\n    height: 50px;\n  }\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n  }\n`;\n\nlet items = null;\nlet dao = null;\n\nif (dao_id) {\n  items = Near.view(contractName, \"get_dao_posts\", {\n    dao_id: parseInt(dao_id),\n  });\n  dao = Near.view(contractName, \"get_dao_by_id\", {\n    id: parseInt(dao_id),\n  });\n} else if (accountId)\n  items = Near.view(contractName, \"get_posts_by_author\", {\n    author: accountId,\n  });\nelse items = Near.view(contractName, \"get_all_posts\", { page: 0, limit: 100 });\n\nif (!items) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nreturn (\n  <Container>\n    <>\n      {dao_id ? (\n        <>\n          <h1>\n            <img className=\"dao-img\" src={dao.logo_url} />\n            {dao.title}\n          </h1>\n\n          <div className=\"mt-4\">\n            <a\n              style={{ fontSize: \"24px\" }}\n              className=\"btn-primary text-uppercase\"\n              href={`/ndcdev.near/widget/daos.App?page=create_proposal&dao_id=${dao_id}`}\n            >\n              create {type}\n            </a>\n          </div>\n        </>\n      ) : accountId ? (\n        <Widget\n          src={`ndcdev.near/widget/daos.Components.TopNavBar`}\n          props={props}\n        />\n      ) : (\n        <h1>All Proposals</h1>\n      )}\n      <div className=\"d-flex flex-column gap-4 mt-4\">\n        {items?.length ? (\n          items\n            .filter((i) => i.post_type === type)\n            .map((item, index) => (\n              <Widget\n                src=\"ndcdev.near/widget/daos.Components.Item\"\n                props={{ item, index, type, id: item.id }}\n              />\n            ))\n        ) : (\n          <div className=\"w-100 my-5 d-flex justify-content-center align-tems-center\">\n            <h1>No active {type}s</h1>\n          </div>\n        )}\n      </div>\n    </>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Pages.Proposals.List", "fact_widget_deployments_id": "fd3b2b9f5e90b3c2869395959d9bc14e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}