{"tx_hash": "43V7UmqXmyNpJpabjJP3ZkwhdQqGKn5SofLiFqM8FhJN", "action_id_social": "54G43bhgF3W7y6GLPuEHVuMATtDUSYKZxaJ56S4anQiy-0-widget", "block_id": 114274605, "block_timestamp": "2024-03-07T15:56:53.675Z", "signer_id": "ndcdev.near", "widget_name": "daos.Components.FileUploader", "source_code": "const fileAccept = props.fileAccept || \"*\";\nconst onChange = props.onChange;\nconst children = props.children;\nconst styles = props.styles;\nconst classNames = props.classNames;\n\nState.init({\n  uploading: false,\n  cid: null,\n  filename: \"\",\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nreturn (\n  <div style={styles ?? { width: \"max-content\" }}>\n    {/* {state.cid && (\n      <a href={ipfsUrl(state.cid)} download>\n        {state.filename}\n      </a>\n    )} */}\n    <Files\n      multiple={false}\n      accepts={[\"image/*\", \"video/*\", \".pdf\"]}\n      minFileSize={1}\n      clickable\n      className={\n        classNames ??\n        \"d-flex justify-content-center align-items-center attachment-button\"\n      }\n      onChange={(files) => {\n        if (!files || !files.length) return;\n\n        const [body] = files;\n        State.update({ uploading: true, cid: null });\n        asyncFetch(\"https://ipfs.near.social/add\", {\n          method: \"POST\",\n          headers: { Accept: \"application/json\" },\n          body,\n        }).then(({ body: { cid } }) => {\n          State.update({ cid, filename: body.name, uploading: false });\n          onChange(ipfsUrl(cid));\n        });\n      }}\n    >\n      {children ??\n        (state.cid ? (\n          <i className=\"bi bi-arrow-clockwise\" />\n        ) : (\n          <i className=\"bi bi-image\" />\n        ))}\n    </Files>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Components.FileUploader", "fact_widget_deployments_id": "f0276ffc1e33123c54e5ecbe4456be94", "inserted_timestamp": "2024-03-07T17:26:42.416Z", "modified_timestamp": "2024-03-07T17:26:42.416Z", "__row_index": 1}