{"tx_hash": "iKDrxA81KGVsnnQE3RS67xTtFDx2Mc7AcHmctE4XiWq", "action_id_social": "GRxsXBSvdyPdi8DcxVqgZbnHAQ8rQbBJMjQJ71CrMhsG-0-widget", "block_id": 115724906, "block_timestamp": "2024-03-29T15:09:07.249Z", "signer_id": "ndcdev.near", "widget_name": "daos.Pages.Settings", "source_code": "let { contractName, content } = VM.require(\n  `ndcdev.near/widget/daos.Config`,\n);\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 30px;\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n  }\n`;\n\nconst Wrapper = styled.div`\n  width: 100%;\n  display: flex;\n  gap: 1rem;\n  flex-direction: column;\n\n  textarea {\n    font-family: monospace;\n    font-size: 12px;\n  }\n\n  div[role=\"tablist\"] {\n    width: 100%;\n    overflow-x: scroll;\n\n    button {\n      text-wrap: nowrap;\n    }\n  }\n`;\n\nconst daos = Near.view(contractName, \"get_dao_list\", {});\n\nif (!daos) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst myDAOs = daos.filter((dao) => dao.owners.includes(context.accountId));\n\nif (myDAOs.length === 0)\n  return (\n    <Container>\n      <Wrapper>\n        <div className=\"w-100 h-100 d-flex flex-column justify-content-center align-items-center\">\n          <h2>You're not allowed for DAO settings</h2>\n          <p>Ask DAO member to add you through settings</p>\n        </div>\n      </Wrapper>\n    </Container>\n  );\n\nconst [selectedDao, setSelectedDao] = useState(myDAOs[0]);\n\nconst handleSelectDao = (e) =>\n  setSelectedDao(myDAOs.find((dao) => dao.id === parseInt(e.target.value)));\n\nreturn (\n  <Container>\n    <Wrapper>\n      <h2>Settings</h2>\n\n      <div className=\"form-element\">\n        <label className=\"form-label\">Select DAO</label>\n        <select\n          className=\"form-control\"\n          value={selectedDao.id}\n          onChange={handleSelectDao}\n        >\n          {myDAOs.map((dao) => (\n            <option value={dao.id}>{dao.title}</option>\n          ))}\n        </select>\n      </div>\n\n      <Widget\n        src=\"near/widget/DIG.Tabs\"\n        props={{\n          variant: \"line\",\n          size: \"default\",\n          items: [\n            {\n              name: \"General\",\n              value: 1,\n              content: (\n                <Widget\n                  src=\"ndcdev.near/widget/daos.Components.Settings.General\"\n                  props={{ selectedDao }}\n                />\n              ),\n              icon: \"ph ph-gear\",\n            },\n            {\n              name: \"Members\",\n              value: 2,\n              content: (\n                <Widget\n                  src=\"ndcdev.near/widget/daos.Components.Settings.Members\"\n                  props={{ selectedDao }}\n                />\n              ),\n              icon: \"ph ph-users\",\n            },\n            {\n              name: \"Contacts\",\n              value: 3,\n              content: (\n                <Widget\n                  src=\"ndcdev.near/widget/daos.Components.Settings.Contacts\"\n                  props={{ selectedDao }}\n                />\n              ),\n              icon: \"ph ph-link\",\n            },\n            {\n              name: \"Content\",\n              value: 4,\n              content: (\n                <Widget\n                  src=\"ndcdev.near/widget/daos.Components.Settings.Content\"\n                  props={{ selectedDao }}\n                />\n              ),\n              icon: \"ph ph-clipboard-text\",\n            },\n          ],\n        }}\n      />\n    </Wrapper>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Pages.Settings", "fact_widget_deployments_id": "863f0d243140cc53206b5490e1091023", "inserted_timestamp": "2024-03-29T16:32:07.178Z", "modified_timestamp": "2024-03-29T16:32:07.178Z", "__row_index": 0}