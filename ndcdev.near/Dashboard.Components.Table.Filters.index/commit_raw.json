{"tx_hash": "2SrfXaheuiTq82U1GK62NrssJPhtMEDVSsZ4Hkniw1Bv", "action_id_social": "FkkT5rvnJ6PykB1KqA3XPqKd5B4UQYYNMXnTVLUBCB7L-0-widget", "block_id": 111043147, "block_timestamp": "2024-01-22T14:50:59.562Z", "signer_id": "ndcdev.near", "widget_name": "Dashboard.Components.Table.Filters.index", "source_code": "const { FilterItem, SubFilterItem, FilterContainer } = VM.require(\n  `ndcdev.near/widget/Dashboard.Components.Table.Filters.styled`,\n);\n\nif (!FilterItem || !SubFilterItem || !FilterContainer)\n  return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst { ndcDAOs } = props;\n\nconst defaultDAOOption = \"All\";\nconst PERIODS = [\"daily\", \"weekly\", \"monthly\"];\nconst CURRENCIES = [\"near\", \"stable\"];\nconst FILTERS = [\n  {\n    text: \"DAO\",\n    hintText: \"NDC grassroots DAOs\",\n    options: [defaultDAOOption, ...ndcDAOs],\n  },\n  {\n    text: \"User Retetntion\",\n    hintText: \"Text TBD\",\n    options: PERIODS,\n  },\n  {\n    text: \"DAP's Used\",\n    hintText: \"Text TBD\",\n    options: PERIODS,\n  },\n  {\n    text: \"Aquisition Cost\",\n    hintText: \"Text TBD\",\n    options: CURRENCIES,\n  },\n];\n\nconst [loading, setLoading] = useState(false);\nconst [selectedDAOs, setSelectedDAOs] = useState([]);\nconst [filter, setFilter] = useState(\n  FILTERS.map((filter) => filter.options[0]),\n);\nconst [results, setResults] = useState(\n  ndcDAOs.map((daoId) => {\n    return { [daoId]: FILTERS.map((f) => \"-\") };\n  }),\n);\n\nconst fetchData = () => {\n  setLoading(true);\n  const daos = selectedDAOs.length ? selectedDAOs : ndcDAOs;\n\n  daos.map((daoId) => {\n    setResults[daoId] = [712, 4, 5];\n  });\n  setLoading(false);\n};\n\nuseEffect(() => fetchData(), [selectedDAOs, filter]);\n\nreturn (\n  <FilterContainer>\n    {FILTERS.map(({ text, hintText, options, value }, i) => (\n      <div className=\"d-flex flex-column gap-1\">\n        <FilterItem>\n          <Widget\n            src={`ndcdev.near/widget/Dashboard.Components.Select.index`}\n            props={{\n              containerClass: \"selected-container black\",\n              options,\n              values: (\n                <div className=\"d-flex align-items-center gap-2\">\n                  {text}\n                  <i className=\"bi bi-info-circle\" label={hintText} />\n                </div>\n              ),\n              onChange: (value) => {\n                let filterOptions = filter;\n                filterOptions[i] = value;\n                setFilter(filterOptions);\n              },\n            }}\n          />\n        </FilterItem>\n\n        <SubFilterItem>\n          <div>{filter[i]}</div>\n        </SubFilterItem>\n      </div>\n    ))}\n  </FilterContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/Dashboard.Components.Table.Filters.index", "fact_widget_deployments_id": "737ee4dee9799a406cb636868406d767", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}