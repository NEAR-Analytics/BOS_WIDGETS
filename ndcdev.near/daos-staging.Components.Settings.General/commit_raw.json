{"tx_hash": "EHWcxW7ybZmdgnHgH3KLTogqYvmoAhL2AeAjUc7hmvc6", "action_id_social": "5EiyyiiPDkEhKRrn2e9XNQKEjAGsqxtLZVwGQfYVcUXv-0-widget", "block_id": 115714422, "block_timestamp": "2024-03-29T11:20:43.464Z", "signer_id": "ndcdev.near", "widget_name": "daos-staging.Components.Settings.General", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos-staging.Config`);\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst { selectedDao } = props;\n\nconst Form = styled.div`\n  border-radius: 20px;\n  background: white;\n  padding: 3rem;\n\n  label {\n    font-size: 14px;\n    margin-bottom: 5px;\n  }\n\n  .form-control.error {\n    border: 1px solid red;\n  }\n\n  .title {\n    b {\n      font-weight: 600;\n    }\n    font-weight: 300;\n\n    a {\n      text-decoration: underline;\n    }\n  }\n\n  @media screen and (max-width: 768px) {\n    padding: 1rem;\n  }\n`;\n\nconst AutoComplete = styled.div`\n  margin: 5px 0;\n`;\n\nconst [daoTitle, setDaoTitle] = useState(\"\");\nconst [daoDescription, setDaoDescription] = useState(\"\");\nconst [daoLogoUrl, setDaoLogoUrl] = useState(\"\");\nconst [daoBannerUrl, setDaoBannerUrl] = useState(\"\");\nconst [daoAccountId, setDaoAccountId] = useState(\"\");\n\nuseEffect(() => {\n  if (selectedDao) {\n    setDaoTitle(selectedDao.title);\n    setDaoDescription(selectedDao.description);\n    setDaoLogoUrl(selectedDao.logo_url);\n    setDaoBannerUrl(selectedDao.banner_url);\n    setDaoAccountId(selectedDao.account_id);\n  }\n}, [selectedDao]);\n\nconst handleSave = () => {\n  Near.call(contractName, \"edit_dao\", {\n    id: selectedDao.id,\n    body: {\n      title: daoTitle,\n      handle: selectedDao.handle,\n      dao_type: selectedDao.dao_type,\n      description: daoDescription,\n      logo_url: daoLogoUrl,\n      banner_url: daoBannerUrl,\n      account_id: daoAccountId,\n    },\n    verticals: selectedDao.verticals,\n    metrics: selectedDao.metrics,\n    metadata: selectedDao.metadata,\n  });\n};\n\nreturn (\n  <div className=\"d-flex flex-column gap-3\">\n    <div className=\"form-element\">\n      <label className=\"form-label\">DAO wallet</label>\n      <input\n        className=\"form-control\"\n        type=\"text\"\n        value={daoAccountId}\n        onChange={(e) => setDaoAccountId(e.target.value)}\n      />\n    </div>\n\n    <div className=\"form-element\">\n      <label className=\"form-label\">Title</label>\n      <input\n        className=\"form-control\"\n        type=\"text\"\n        value={daoTitle}\n        onChange={(e) => setDaoTitle(e.target.value)}\n      />\n    </div>\n\n    <div className=\"form-element\">\n      <label className=\"form-label\">Description</label>\n      <Widget\n        src={`ndcdev.near/widget/daos-staging.Components.MarkdownEditor`}\n        props={{\n          element: { value: daoDescription },\n          handleChange: (_element, value) => setDaoDescription(value),\n        }}\n      />\n    </div>\n\n    <div className=\"form-element\">\n      <label className=\"form-label\">Logo URL</label>\n      {daoLogoUrl && (\n        <div className=\"mb-2 w-25\">\n          <img className=\"w-25 object-fit-contain\" src={daoLogoUrl} />\n        </div>\n      )}\n      <Widget\n        src={`ndcdev.near/widget/daos-staging.Components.FileUploader`}\n        props={{\n          onChange: (file) => setDaoLogoUrl(file),\n          children: (\n            <div role=\"button\" className=\"btn btn-secondary\">\n              Upload Logo\n            </div>\n          ),\n        }}\n      />\n    </div>\n\n    <div className=\"form-element\">\n      <label className=\"form-label\">Banner URL</label>\n      {daoBannerUrl && (\n        <div className=\"mb-2 w-100\">\n          <img className=\"object-fit-contain\" src={daoBannerUrl} />\n        </div>\n      )}\n      <Widget\n        src={`ndcdev.near/widget/daos-staging.Components.FileUploader`}\n        props={{\n          onChange: (file) => setDaoBannerUrl(file),\n\n          children: (\n            <div role=\"button\" className=\"btn btn-secondary\">\n              Upload Banner\n            </div>\n          ),\n        }}\n      />\n    </div>\n\n    <button className=\"btn btn-primary\" onClick={handleSave}>\n      <i className=\"ph ph-pencil-simple fs-5\" />\n      Save\n    </button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos-staging.Components.Settings.General", "fact_widget_deployments_id": "c0b13955168b7536a6a1f56cbcf7c14e", "inserted_timestamp": "2024-03-29T12:35:00.532Z", "modified_timestamp": "2024-03-29T13:29:16.475Z", "__row_index": 0}