{"tx_hash": "BciUasE11dLRvfXQbcJZ8ENmDgo3LVYWmsn29pj9Kvm1", "action_id_social": "HpjVRWoC5hfqmHLsjJamgs481G3igFxpvHfXEeqXWnUH-0-widget", "block_id": 117094329, "block_timestamp": "2024-04-18T08:48:30.934Z", "signer_id": "ndcdev.near", "widget_name": "daos.Components.Form", "source_code": "const {\n  form,\n  formEls,\n  setFormEls,\n  handleChange,\n  handleSave,\n  handleSelectDao,\n  handleAttachments,\n  attachments,\n  daos,\n  selectedDaoId,\n  id,\n} = props;\n\nconst TypeSection = styled.div`\n  border-radius: 50px;\n  background: rgba(255, 255, 255, 0.3);\n  text-align: center;\n  margin-right: 100px;\n  width: 100%;\n  text-transform: uppercase;\n  h4 {\n    font-weight: 600;\n    margin: 0;\n  }\n`;\n\nconst Form = styled.div`\n  border-radius: 20px;\n  background: white;\n  padding: 3rem;\n\n  label {\n    font-size: 14px;\n    margin-bottom: 5px;\n  }\n\n  .form-control.error {\n    border: 1px solid red;\n  }\n\n  .title {\n    b {\n      font-weight: 600;\n    }\n    font-weight: 300;\n\n    a {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: space-beetween;\n  gap: 1rem;\n  padding-top: 1rem;\n\n  @media screen and (max-width: 786px) {\n    flex-direction: column;\n  }\n`;\n\nconst MobileForm = styled.div`\n  @media screen and (max-width: 786px) {\n    padding-bottom: 2rem;\n  }\n`;\n\nconst UploadFileButton = styled.div`\n  @media screen and (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst [preview, setPreview] = useState(false);\n\nconst PreviewButton = () => (\n  <div className=\"btn-secondary\" onClick={() => setPreview(!preview)}>\n    <i className=\"ph ph-eye fs-6\" />\n    Preview\n  </div>\n);\n\nconst ProposalButton = () => (\n  <button\n    className=\"btn-primary\"\n    disabled={form[formEls.post_type].some(\n      (el) => el.required && !formEls[el.name],\n    )}\n    onClick={handleSave}\n  >\n    {id ? (\n      <>\n        <i className=\"ph ph-pencil-simple fs-6\" />\n        Edit\n      </>\n    ) : (\n      <>\n        <i className=\"ph ph-plus fs-6\" />\n        Create\n      </>\n    )}\n    {formEls.post_type}\n  </button>\n);\n\nreturn (\n  <>\n    {preview ? (\n      <MobileForm>\n        <Widget\n          src=\"ndcdev.near/widget/daos.Components.PostPreview\"\n          props={{\n            item: { ...formEls, dao_id: selectedDaoId, attachments },\n            index: 0,\n            post_type: formEls.post_type,\n            showMoreDefault: 0,\n            preview: true,\n            attachments,\n          }}\n        />\n        <ButtonContainer>\n          <PreviewButton />\n          <ProposalButton />\n        </ButtonContainer>\n      </MobileForm>\n    ) : (\n      <Form className=\"d-flex flex-column gap-3\">\n        {!id && (\n          <div\n            onClick={() => {\n              const newFormEl = formEls;\n              newFormEl.post_type =\n                formEls.post_type === \"Proposal\" ? \"Report\" : \"Proposal\";\n              setFormEls(newFormEl);\n            }}\n          >\n            <p className=\"mb-2\">Post type</p>\n            <div className=\"d-flex gap-3 align-items-center\">\n              <Widget src={`ndcdev.near/widget/daos.Components.Switch`} />\n              <TypeSection>\n                <h4>{formEls.post_type}</h4>\n              </TypeSection>\n            </div>\n          </div>\n        )}\n        <div className=\"form-element\">\n          <label>Select DAO</label>\n          <select\n            className=\"form-control\"\n            value={selectedDaoId}\n            onChange={handleSelectDao}\n            disabled={!!id}\n          >\n            {daos.map((dao) => (\n              <option value={dao.id}>{dao.name}</option>\n            ))}\n          </select>\n        </div>\n        {form[formEls.post_type].map((el) => (\n          <div className=\"form-element\">\n            <label for={el.name}>\n              {el.label}\n              {el.required && \"*\"}\n            </label>\n            {el.type === \"file\" ? (\n              <Widget\n                src={`ndcdev.near/widget/daos.Components.FileUploader`}\n                props={{\n                  onChange: (fileUrl) => handleChange(el, fileUrl),\n                }}\n              />\n            ) : el.type === \"textarea\" ? (\n              <div className=\"d-flex flex-wrap\">\n                <Widget\n                  src={`ndcdev.near/widget/daos.Components.MarkdownEditor`}\n                  props={{\n                    element: { ...el, value: formEls[el.name] ?? el.value },\n                    handleChange,\n                  }}\n                />\n              </div>\n            ) : el.type === \"tag\" ? (\n              <Widget\n                src={\"sayalot.near/widget/TagsEditor\"}\n                props={{\n                  label: \"Tags\",\n                  placeholder: \"Enter tags\",\n                  setTagsObject: (tags) => handleChange(el, Object.keys(tags)),\n                }}\n              />\n            ) : (\n              <input\n                className={`form-control ${error[el.name] && \"error\"}`}\n                type={el.type}\n                name={el.name}\n                min={el.min}\n                value={formEls[el.name] ?? \"\"}\n                onChange={(e) => handleChange(el, e.target.value)}\n              />\n            )}\n          </div>\n        ))}\n        <Widget\n          src={\"ndcdev.near/widget/daos.Components.Attachment\"}\n          props={{ attachments }}\n        />\n        <Widget\n          src={`ndcdev.near/widget/daos.Components.FileUploader`}\n          props={{\n            onChange: handleAttachments,\n            children: (\n              <UploadFileButton className=\"btn-primary outlined\">\n                <i className=\"ph ph-upload-simple fs-6\" />\n                Upload File\n              </UploadFileButton>\n            ),\n            styles: { width: \"90%\" },\n            classNames: \"\",\n          }}\n        />\n        <ButtonContainer>\n          <PreviewButton />\n          <ProposalButton />\n        </ButtonContainer>\n        <a\n          className=\"d-flex gap-2\"\n          target=\"_blank\"\n          href=\"https://docs.google.com/document/d/110CqEddPa-99JwM8iCl_kKJxdXLH6IlVePwubO5A55o/edit#heading=h.qya6e5j9ka46\"\n        >\n          <span>Near Digital Collective application form GUIDE</span>\n          <i className=\"ph ph-arrow-square-out fs-5\" />\n        </a>\n      </Form>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos.Components.Form", "fact_widget_deployments_id": "294a0cd74839cb22993f3ce0dce5343e", "inserted_timestamp": "2024-04-18T10:38:34.656Z", "modified_timestamp": "2024-04-18T10:38:34.656Z", "__row_index": 33}