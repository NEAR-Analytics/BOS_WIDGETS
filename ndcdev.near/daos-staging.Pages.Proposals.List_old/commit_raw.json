{"tx_hash": "EHWcxW7ybZmdgnHgH3KLTogqYvmoAhL2AeAjUc7hmvc6", "action_id_social": "5EiyyiiPDkEhKRrn2e9XNQKEjAGsqxtLZVwGQfYVcUXv-0-widget", "block_id": 115714422, "block_timestamp": "2024-03-29T11:20:43.464Z", "signer_id": "ndcdev.near", "widget_name": "daos-staging.Pages.Proposals.List_old", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos-staging.Config`);\n\nif (!contractName) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nlet { dao_id, type, accountId } = props;\n\nconst Container = styled.div`\n  width: 100%;\n  height: max-content;\n  padding: 0 0 5rem 0;\n\n  .dao-img {\n    width: 50px;\n    height: 50px;\n  }\n\n  h4 {\n    margin-bottom: 0;\n  }\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n    margin-bottom: 30px;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: left;\n  img {\n    margin-right: 1rem;\n  }\n\n  @media screen and (max-width: 768px) {\n    align-items: center;\n    flex-direction: column;\n    img {\n      margin-bottom: 1rem;\n    }\n  }\n`;\nconst SubmitProposal = styled.a`\n  background: rgb(164, 194, 253);\n  color: #fff !important;\n  border-radius: 10px;\n  padding: 10px 25px;\n  text-align: center;\n\n  @media screen and (max-width: 786px) {\n    width: 100%;\n  }\n`;\n\nlet items = null;\nlet dao = null;\n\nif (dao_id) {\n  dao = Near.view(contractName, \"get_dao_by_handle\", {\n    handle: dao_id,\n  });\n\n  if (!dao) <Widget src=\"flashui.near/widget/Loading\" />;\n\n  items = Near.view(contractName, \"get_dao_posts\", {\n    dao_id: dao.id,\n    page: 0,\n    limit: 100,\n  });\n} else if (accountId)\n  items = Near.view(contractName, \"get_posts_by_author\", {\n    author: accountId,\n    page: 0,\n    limit: 100,\n  });\nelse items = Near.view(contractName, \"get_all_posts\", { page: 0, limit: 100 });\n\nif (!items) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nreturn (\n  <Container>\n    <>\n      <Widget\n        src={`ndcdev.near/widget/daos-staging.Components.TopNavBar`}\n        props={{\n          ...props,\n          daoId: dao ? dao.handle : null,\n          accountId,\n          title: (\n            <div className=\"d-flex align-items-center gap-3\">\n              {dao ? <img className=\"dao-img\" src={dao.logo_url} /> : <></>}\n              <h4>\n                <b>\n                  {dao ? dao.title : accountId ? \"My\" : \"All\"}\n                  {type}s\n                </b>\n              </h4>\n            </div>\n          ),\n        }}\n      />\n\n      <div className=\"d-flex flex-column gap-4 mt-4\">\n        {items?.length ? (\n          items\n            .filter((i) => i.post_type === type)\n            .map((item, index) => (\n              <Widget\n                src=\"ndcdev.near/widget/daos-staging.Components.Post\"\n                props={{ item, index, type, id: item.id }}\n              />\n            ))\n        ) : (\n          <div className=\"w-100 my-5 d-flex justify-content-center align-tems-center\">\n            <h1>No active {type}s</h1>\n          </div>\n        )}\n      </div>\n    </>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos-staging.Pages.Proposals.List_old", "fact_widget_deployments_id": "6e9a59dcfc7f21b0a4b2e0019a83f2bd", "inserted_timestamp": "2024-03-29T12:35:00.532Z", "modified_timestamp": "2024-03-29T13:29:16.475Z", "__row_index": 0}