{"tx_hash": "EHWcxW7ybZmdgnHgH3KLTogqYvmoAhL2AeAjUc7hmvc6", "action_id_social": "5EiyyiiPDkEhKRrn2e9XNQKEjAGsqxtLZVwGQfYVcUXv-0-widget", "block_id": 115714422, "block_timestamp": "2024-03-29T11:20:43.464Z", "signer_id": "ndcdev.near", "widget_name": "daos-staging.Components.Post", "source_code": "let { contractName } = VM.require(`ndcdev.near/widget/daos-staging.Config`);\nconst { item, index, showMoreDefault, showCommentsDefault, type, preview } =\n  props;\n\nconst [itemState, setItemState] = useState(item);\nconst [showMore, setShowMore] = useState(null);\n\nconst dao = Near.view(contractName, \"get_dao_by_id\", {\n  id: parseInt(itemState.dao_id),\n});\n\nif (!dao) return <Widget src=\"flashui.near/widget/Loading\" />;\n\nconst TableRow = styled.div`\n  display: flex;\n  &:not(:last-child) {\n    border-bottom: 1px solid #e1e1e1;\n  }\n  :hover {\n    border-bottom: 1px solid #e3e3e0;\n    background: #fff;\n    box-shadow:\n      0px 97px 27px 0px rgba(0, 0, 0, 0),\n      0px 62px 25px 0px rgba(0, 0, 0, 0),\n      0px 35px 21px 0px rgba(0, 0, 0, 0.02),\n      0px 16px 16px 0px rgba(0, 0, 0, 0.03),\n      0px 4px 9px 0px rgba(0, 0, 0, 0.03);\n  }\n`;\n\nconst TableCell = styled.div`\n  padding: 16px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: ${(props) => props.flex || 1};\n  border-bottom: 1px solid #e1e1e1;\n\n  .title {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    line-clamp: 1;\n    -webkit-box-orient: vertical;\n  }\n`;\n\nconst StatusBadge = styled.span`\n  display: flex;\n  width: 86px;\n  height: 30px;\n  padding: 6px 12px;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  gap: 10px;\n  flex-shrink: 0;\n  border-radius: 4px;\n  background-color: ${(props) => props.background};\n  color: ${(props) => props.color};\n  border: 1px solid ${(props) => props.border};\n`;\n\nconst statusColors = {\n  New: { background: \"#8A92F9\", color: \"white\", border: \"#8A92F9\" },\n  Approved: { background: \"#2CE691\", color: \"white\", border: \"#2CE691\" },\n  Closed: { background: \"#CCC\", color: \"white\", border: \"#CCC\" },\n  \"In Review\": { background: \"#F6B86A\", color: \"white\", border: \"#F6B86A\" },\n  Rejected: { background: \"#FC6F60\", color: \"white\", border: \"#FC6F60\" },\n};\n\nconst ProposalsState = styled.div`\n  display: flex;\n  height: 30px;\n  padding: 2px 6px 2px 4px;\n  align-items: center;\n  gap: 8px;\n  border-radius: 4px;\n  border: 1px solid #e0f2ea;\n  background: #fff;\n  font-size: 12px;\n  font-weight: 600;\n  color: ${(props) => (props.approve ? \"#2CE691\" : \"#FC6F60\")};\n\n  i.ph {\n    font-size: 18px;\n  }\n`;\n\nconst ExpandCollapseIcon = styled.div`\n  display: flex;\n  align-items: center;\n  padding-left: 30px;\n  cursor: pointer;\n`;\n\nconst Container = styled.div`\n  display: flex;\n  gap: 10px;\n  .dao-img {\n    width: 32px;\n    height: 32px;\n  }\n  .created {\n    color: #5c656a;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 500;\n  }\n\n  .date {\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 500;\n  }\n`;\nconst ProposalCardWarpper = styled.div`\n  display: flex;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n  margin: 20px;\n  align-items: center;\n  flex-direction: column;\n  align-items: flex-end;\n`;\n\nconst ProposalCard = styled.div`\n  display: flex;\n`;\n\nconst ProposalContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding-right: 20px;\n`;\n\nconst ProposalHeader = styled.div`\n  font-size: 20px;\n  font-weight: bold;\n`;\n\nconst ProposalInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  color: #666;\n`;\n\nconst ProposalInfoItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #e1e1e1;\n  padding: 0.75rem 0;\n`;\n\nconst Description = styled.div`\n  color: #333;\n  font-size: 14px;\n  margin-bottom: 10px;\n  line-height: 20px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  line-clamp: 4;\n  -webkit-box-orient: vertical;\n`;\n\nconst Tags = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 10px;\n`;\n\nconst Tag = styled.span`\n  background: #e1e1e1;\n  border-radius: 10px;\n  padding: 5px 10px;\n  font-size: 12px;\n`;\n\nconst Button = styled.button`\n  background: #007aff;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n  &:hover {\n    background: #0056b3;\n  }\n`;\n\nconst Divider = styled.div`\n  width: 100%;\n  display: flex;\n  margin: 10px 0;\n  justify-content: space-between;\n  align-items: center;\n  align-self: stretch;\n  border-bottom: 1px solid\n    var(--NEAR-Primary-Colors-Off-White-Variation-1, #f0efe7);\n`;\n\nconst MobileContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: none;\n  }\n`;\n\nconst DesktopVersion = styled.div`\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nreturn (\n  <>\n    <MobileContainer>\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <Container>\n          <div>\n            <img className=\"dao-img\" src={dao.logo_url} />\n          </div>\n          <div className=\"d-flex flex-column\">\n            <span>{dao.title}</span>\n            <div>\n              <span className=\"created\">Updated at:</span>{\" \"}\n              <span className=\"date\">\n                {new Date(itemState.timestamp / 1000000).toLocaleDateString()}\n              </span>\n            </div>\n          </div>\n        </Container>\n        <StatusBadge {...statusColors[itemState.status]}>\n          {itemState.status}\n        </StatusBadge>\n      </div>\n      <ProposalHeader>{itemState.title}</ProposalHeader>\n      <div className=\"d-flex flex-wrap gap-1\">\n        <Widget\n          src={\"ndcdev.near/widget/daos-staging.Components.Clipboard\"}\n          props={{\n            text: `https://near.org/ndcdev.near/widget/daos.App?page=proposal&id=${itemState.id}`,\n          }}\n        />\n        <ProposalsState approve={itemState.state.dao_council_approved}>\n          <span>\n            {itemState.state.kyc_passed ? (\n              <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n            ) : (\n              <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n            )}\n          </span>{\" \"}\n          DAO Approved\n        </ProposalsState>\n\n        <ProposalsState approve={itemState.state.kyc_passed}>\n          {\" \"}\n          <span>\n            {itemState.state.kyc_passed ? (\n              <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n            ) : (\n              <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n            )}\n          </span>{\" \"}\n          KYC Approved\n        </ProposalsState>\n\n        <ProposalsState approve={itemState.state.report_accepted}>\n          {\" \"}\n          <span>\n            {itemState.state.report_accepted ? (\n              <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n            ) : (\n              <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n            )}\n          </span>{\" \"}\n          Report Approved\n        </ProposalsState>\n      </div>\n      <ProposalInfo>\n        <ProposalInfoItem>\n          <div style={{ width: \"12rem\" }}>Created By:</div>\n          <div>{itemState.author_id}</div>\n        </ProposalInfoItem>\n        <ProposalInfoItem>\n          <div style={{ width: \"12rem\" }}>Requested amount:</div>\n          <div style={{ \"font-size\": \"18px\" }}>\n            <b>${itemState.requested_amount ?? 0}</b>\n          </div>\n        </ProposalInfoItem>\n      </ProposalInfo>\n      <div className=\"d-flex justify-content-between align-items-center gap-3\">\n        <div className=\"d-flex justify-content-start w-100\">\n          <a\n            className=\"btn btn-secondary outlined w-100 text-nowrap\"\n            href={`/ndcdev.near/widget/daos-staging.App?page=report&id=${itemState.reports[0]}`}\n          >\n            Report\n          </a>\n        </div>\n        <div className=\"d-flex justify-content-end w-100\">\n          <a\n            className=\"btn btn-secondary w-100 text-nowrap\"\n            href={`/ndcdev.near/widget/daos-staging.App?page=proposal&id=${itemState.id}`}\n          >\n            Open Proposal\n            <i class=\"ph ph-arrow-square-out fs-6\"></i>\n          </a>\n        </div>\n      </div>\n    </MobileContainer>\n    <DesktopVersion>\n      <TableRow key={index}>\n        <TableCell flex={0.5}>\n          <StatusBadge {...statusColors[itemState.status]}>\n            {itemState.status}\n          </StatusBadge>\n        </TableCell>\n        <TableCell flex={2.5}>\n          <Container>\n            <div>\n              <img className=\"dao-img\" src={dao.logo_url} />\n            </div>\n            <div style={{ display: \"flex\", \"flex-direction\": \"column\" }}>\n              <div className=\"title\">{dao.title}</div>\n              <div>\n                <span className=\"created\">Created at:</span>{\" \"}\n                <span className=\"date\">\n                  {new Date(itemState.timestamp / 1000000).toDateString()}\n                </span>\n              </div>\n            </div>\n          </Container>\n        </TableCell>\n        <TableCell>\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n            <div className=\"created\"> Created by</div>\n            <a\n              className=\"account-link\"\n              href={`https://near.org/near/widget/ProfilePage?accountId=${itemState.author_id}`}\n            >\n              {itemState.author_id}\n            </a>\n          </div>\n        </TableCell>\n        <TableCell flex={3}>\n          <ProposalsState approve={itemState.state.dao_council_approved}>\n            <span>\n              {itemState.state.kyc_passed ? (\n                <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n              ) : (\n                <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n              )}\n            </span>{\" \"}\n            DAO Approved\n          </ProposalsState>\n\n          <ProposalsState approve={itemState.state.kyc_passed}>\n            {\" \"}\n            <span>\n              {itemState.state.kyc_passed ? (\n                <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n              ) : (\n                <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n              )}\n            </span>{\" \"}\n            KYC Approved\n          </ProposalsState>\n\n          <ProposalsState approve={itemState.state.report_accepted}>\n            {\" \"}\n            <span>\n              {itemState.state.report_accepted ? (\n                <i class=\"ph-fill fs-6 ph-check-circle\"></i>\n              ) : (\n                <i class=\"ph-fill fs-6 ph-x-circle\"></i>\n              )}\n            </span>{\" \"}\n            Report Approved\n          </ProposalsState>\n        </TableCell>\n        <TableCell>\n          <a\n            className=\"btn btn-secondary outlined\"\n            href={`/ndcdev.near/widget/daos-staging.App?page=proposal&id=${itemState.id}`}\n          >\n            Report\n          </a>\n          <ExpandCollapseIcon>\n            <i\n              class={`ph ph-caret-${showMore === index ? \"up\" : \"down\"} fs-5`}\n              onClick={() => setShowMore(showMore === index ? null : index)}\n            ></i>\n          </ExpandCollapseIcon>\n        </TableCell>\n      </TableRow>\n      {showMore === index && (\n        <ProposalCardWarpper>\n          <ProposalCard>\n            <ProposalContent>\n              <div className=\"d-flex justify-content-between gap-3\">\n                <ProposalHeader>{itemState.title}</ProposalHeader>\n                <Widget\n                  src={\"ndcdev.near/widget/daos-staging.Components.Clipboard\"}\n                  props={{\n                    text: `https://near.org/ndcdev.near/widget/daos.App?page=proposal&id=${itemState.id}`,\n                  }}\n                />\n              </div>\n              <ProposalInfo>\n                <ProposalInfoItem>\n                  <div style={{ width: \"12rem\" }}>Updated at:</div>\n                  <div>\n                    {itemState.timestamp\n                      ? new Date(itemState.timestamp / 1000000).toLocaleString()\n                      : new Date().toLocaleDateString()}\n                  </div>\n                </ProposalInfoItem>\n                <ProposalInfoItem>\n                  <div style={{ width: \"12rem\" }}>Requested amount:</div>\n                  <div>\n                    <b>${itemState.requested_amount ?? 0}</b>\n                  </div>\n                </ProposalInfoItem>\n              </ProposalInfo>\n            </ProposalContent>\n            <ProposalContent>\n              <Tags>\n                {itemState.labels?.map((tag) => (\n                  <Tag>#{tag}</Tag>\n                ))}\n              </Tags>\n              <Description>\n                <Widget\n                  src=\"ndcdev.near/widget/daos-staging.Components.MarkdownViewer\"\n                  props={{ text: itemState.description }}\n                />\n              </Description>\n            </ProposalContent>\n          </ProposalCard>\n          <div>\n            <a\n              className=\"btn btn-secondary\"\n              href={`/ndcdev.near/widget/daos-staging.App?page=proposal&id=${itemState.id}`}\n            >\n              Open Proposal\n              <i class=\"ph ph-arrow-square-out fs-6\"></i>\n            </a>\n          </div>\n        </ProposalCardWarpper>\n      )}\n    </DesktopVersion>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/daos-staging.Components.Post", "fact_widget_deployments_id": "5167e5064a146f549ce01cf4987370f9", "inserted_timestamp": "2024-03-29T12:35:00.532Z", "modified_timestamp": "2024-03-29T13:29:16.475Z", "__row_index": 4}