{"tx_hash": "7AdZSy8ij5SVwY2vNFs6TsNvCxr66MroUXD8XZp9fiCS", "action_id_social": "7dsnGYoXJxxnCVEchn1355Ei3RRUBr7mTCQPxnuCVyvQ-0-widget", "block_id": 109420927, "block_timestamp": "2024-01-02T17:21:57.010Z", "signer_id": "ndcdev.near", "widget_name": "MDAO.Components.Item", "source_code": "const { item, index } = props;\n\nlet { assets, content } = VM.require(`ndcdev.near/widget/MDAO.Config`);\nassets = assets.home;\ncontent = content.home;\nconst accountId = context.accountId;\n\nconst Container = styled.div`\n  width: 100%;\n  height: max-content;\n  padding: 3rem;\n\n  @media screen and (max-width: 786px) {\n    padding: 1rem;\n  }\n`;\n\nconst Card = styled.div`\n  border-radius: 10px;\n  background: #fff;\n  box-shadow: 0px 30px 80px 0px rgba(0, 0, 0, 0.1);\n  padding: 2rem 3rem;\n\n  h3 {\n    font-size: 24px;\n    font-style: normal;\n    font-weight: 600;\n    margin: 10px 0;\n  }\n\n  p {\n    font-size: 14px;\n  }\n\n  .metric {\n    border-radius: 10px;\n    height: 80px;\n    width: 120px;\n    background: linear-gradient(\n      258deg,\n      rgba(162, 195, 254, 0.5) 0%,\n      rgba(225, 197, 252, 0.5) 28.72%,\n      rgba(241, 220, 210, 0.5) 100%\n    );\n    @media screen and (max-width: 786px) {\n      width: 100%;\n    }\n  }\n\n  .info {\n    display: flex;\n    align-items: center;\n  }\n\n  .actions {\n    margin-top: 1rem;\n    gap: 3rem;\n\n    @media screen and (max-width: 786px) {\n      gap: 0;\n      justify-content: space-between;\n    }\n  }\n\n  .tag {\n    border-radius: 50px;\n    background: #a4c2fd;\n    width: 140px;\n    padding: 2px 0;\n    text-align: center;\n    color: white;\n  }\n\n  @media screen and (max-width: 786px) {\n    padding: 1.5rem;\n  }\n`;\n\nconst Replies = styled.div`\n  border-top: 1px solid #efefef;\n  padding-top: 1rem;\n`;\n\nconst [showMore, setShowMore] = useState(null);\nconst [showReply, setShowReply] = useState(false);\nconst [replies, setReplies] = useState([]);\nconst [liked, setLiked] = useState(false);\n\nconst likes = Social.index(\"graph\", \"v2.ndc.mdao.like\", { order: \"desc\" });\nlikes = likes ? likes.filter((like) => like.value.parentId === item.id) : [];\nconst myLike = likes ? likes.some((like) => like.value[accountId]) : false;\nsetLiked(myLike);\n\nconst handleLike = () => {\n  Social.set({\n    index: {\n      graph: JSON.stringify({\n        key: \"v2.ndc.mdao.like\",\n        value: {\n          parentId: item.id,\n          [accountId]: !myLike,\n        },\n      }),\n    },\n  });\n};\n\nconst CardItem = ({ item, index }) => (\n  <div>\n    <Card key={index} className=\"d-flex flex-column gap-3\">\n      <div className=\"d-flex justify-content-between\">\n        <Widget\n          src=\"mob.near/widget/Profile\"\n          props={{\n            accountId: item.accountId,\n            tooltip: true,\n          }}\n        />\n        <div className=\"d-flex gap-2\">\n          <small>\n            <i className=\"bi bi-clock\" />\n            {new Date(item.id).toLocaleDateString()}\n          </small>\n        </div>\n      </div>\n      <div className=\"d-flex flex-column gap-1\">\n        <h3>{item.project_name}</h3>\n        <div className=\"d-flex flex-column gap-1\">\n          {item.type === \"proposal\" && (\n            <div className=\"info\">\n              <small style={{ width: \"150px\" }}>Requested amount:</small>\n              <small>{item.requested_amount ?? 0} USD</small>\n            </div>\n          )}\n          <div className=\"info\">\n            <small style={{ width: \"150px\" }}>Requested sponsor:</small>\n            <div className=\"d-flex align-items-center gap-1\">\n              <small>\n                <Widget\n                  src=\"mob.near/widget/ProfileImage\"\n                  props={{\n                    accountId: content.daoAccountId,\n                    style: { height: \"20px\", width: \"20px\" },\n                  }}\n                />\n              </small>\n              <small>{content.dao}</small>\n            </div>\n          </div>\n          {item.attachments && (\n            <div className=\"info\">\n              <small style={{ width: \"150px\" }}>Attachments:</small>\n              <small>\n                <a href={item.attachments} download>\n                  <i className=\"bi bi-download\" />\n                  Download File\n                </a>\n              </small>\n            </div>\n          )}\n          {item.contact && (\n            <div className=\"info\">\n              <small style={{ width: \"150px\" }}>Contact telegram:</small>\n              <small>{item.contact}</small>\n            </div>\n          )}\n        </div>\n      </div>\n      <small>\n        <div\n          role=\"button\"\n          className=\"d-flex gap-2 align-items-center\"\n          onClick={() => setShowMore(showMore === index ? null : index)}\n        >\n          <i\n            className={`fs-5 bi ${\n              showMore === index ? \"bi-eye-slash\" : \"bi-eye\"\n            }`}\n          />\n          <b>See more</b>\n        </div>\n      </small>\n      {showMore === index && (\n        <>\n          {item.type === \"report\" ? (\n            <>\n              <div>\n                <small>\n                  <b>Metrics</b>\n                </small>\n                <div className=\"d-flex flex-wrap gap-2\">\n                  <div className=\"metric d-flex flex-column justify-content-center align-items-center\">\n                    <small>Audience</small>\n                    <b>{item[\"metric:audience\"]}%</b>\n                  </div>\n                  <div className=\"metric d-flex flex-column justify-content-center align-items-center\">\n                    <small>AER</small>\n                    <b>{item[\"metric:average_engagement_rate\"]}%</b>\n                  </div>\n                  <div className=\"metric d-flex flex-column justify-content-center align-items-center\">\n                    <small>Growth</small>\n                    <b>{item[\"metric:growth\"]}%</b>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <small>\n                  <b>\n                    Performance Statement: What is the biggest win (most\n                    improved part of project) during this funding period vs. the\n                    previous one (if applicable)?\n                  </b>\n                </small>\n                <Widget\n                  src=\"mob.near/widget/SocialMarkdown\"\n                  props={{ text: item[\"performance_statement:answer_1\"] }}\n                />\n              </div>\n              <div>\n                <small>\n                  <b>\n                    Performance statement: What is the biggest challenge your\n                    project is facing? What did not improve during this funding\n                    period?\n                  </b>\n                </small>\n                <Widget\n                  src=\"mob.near/widget/SocialMarkdown\"\n                  props={{ text: item[\"performance_statement:answer_2\"] }}\n                />\n              </div>\n            </>\n          ) : (\n            <div>\n              <Widget\n                src=\"mob.near/widget/SocialMarkdown\"\n                props={{ text: item.description }}\n              />\n            </div>\n          )}\n        </>\n      )}\n\n      {item.tag && (\n        <div className=\"d-flex flex-wrap gap-2\">\n          {item.tag?.map((tag) => (\n            <div className=\"tag\">{tag}</div>\n          ))}\n        </div>\n      )}\n      <div className=\"actions d-flex\">\n        <div role=\"button\" className=\"d-flex gap-2\" onClick={handleLike}>\n          {likes.length}\n          <i className={`bi bi-heart${liked ? \"-fill\" : \"\"}`} /> Like\n        </div>\n        <div\n          role=\"button\"\n          className=\"d-flex gap-2\"\n          onClick={() => setShowReply(!showReply)}\n        >\n          <i className=\"bi bi-chat\" />\n          Reply\n        </div>\n      </div>\n\n      <Replies>\n        {showReply && (\n          <Widget\n            src=\"ndcdev.near/widget/MDAO.Components.ReplyItem\"\n            props={{ item, showCreate: true }}\n          />\n        )}\n      </Replies>\n    </Card>\n  </div>\n);\n\nreturn <CardItem item={item} index={index} />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ndcdev.near/widget/MDAO.Components.Item", "fact_widget_deployments_id": "722301151782f463c5c56c644fda969f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}