{"tx_hash": "CGGvmuGvT7nKjPrWt4XWHULkJN2PCqqYu75L38YQTzNK", "action_id_social": "3aBVkKM2PDCFvTCTvxfzZLPHu5VuJRrAxrCqiQkh1euf-0-widget", "block_id": 120647493, "block_timestamp": "2024-06-07T16:12:51.711Z", "signer_id": "kirrruuusha.near", "widget_name": "New-Draft-0", "source_code": "State.init({\r\n  accountIdContext: \"\",\r\n  accountIdProps: \"\",\r\n  mentorPhoto: \"\",\r\n  mentorName: \"Mentor Name\",\r\n  mentorPoints: 0,\r\n  studentsCounter: 0,\r\n  students: [],\r\n  studentRequests: [],\r\n  currentAppThemeMode: \"lightMode\",\r\n  currentRoute: \"studentsPage\",\r\n  profileName: \"\",\r\n  profileDiscription: \"\",\r\n  creatProfileName: \"\",\r\n  creatProfileDiscription: \"\",\r\n  addNewStudent: \"\",\r\n  editDescription: \"\",\r\n  ifAddStudent: true,\r\n  studentArray: [],\r\n  arreyWhitIndexForAddStudent: [],\r\n  heashForDeletnumb: {},\r\n  flagForFindStdudentByID: false,\r\n  idFindStudent: \"\",\r\n  vrifyOurStudent: \"\",\r\n});\r\n\r\nconst TecherPossibilities = {\r\n  init: () => {\r\n    const accountIdContext = context.accountId;\r\n    if (!accountIdContext) {\r\n      return \"No account ID\";\r\n    }\r\n    const accountIdProps = props.accountId;\r\n    const profile = Social.getr(`${state.accountIdContext}/profile`);\r\n    State.update({\r\n      accountIdProps: accountIdProps,\r\n      accountIdContext: accountIdContext,\r\n      profileName: profile.name,\r\n      profileDiscription: profile.discription,\r\n    });\r\n  },\r\n  initProfile: () => {\r\n    Social.set({\r\n      profile: {\r\n        name: state.creatProfileName,\r\n        discription: state.creatProfileDiscription,\r\n      },\r\n    });\r\n  },\r\n  initNameProfile: () => {\r\n    Social.set({\r\n      profile: {\r\n        name: state.creatProfileName,\r\n      },\r\n    });\r\n  },\r\n  initDiscriptionProfile: () => {\r\n    Social.set({\r\n      profile: {\r\n        discription: state.creatProfileDiscription,\r\n      },\r\n    });\r\n  },\r\n  getStudent: (pageNumber, pageSize) => {\r\n    // \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u043c \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0438 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0434\u043b\u044f \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0438\r\n    const startIndex = (pageNumber - 1) * pageSize;\r\n    const endIndex = startIndex + pageSize;\r\n    let studentArray = [];\r\n    let arreyWhitIndexForAddStudent = [];\r\n    let heashForDeletnumb = {};\r\n    if (state.accountIdProps) {\r\n      for (let i = startIndex; i < endIndex; i++) {\r\n        const student = Social.get(`${state.accountIdProps}/mystudents/${i}`);\r\n        if (student) {\r\n          studentArray.push(student);\r\n          heashForDeletnumb[student] = i;\r\n        } else {\r\n          arreyWhitIndexForAddStudent.push(i);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = startIndex; i < endIndex; i++) {\r\n        const student = Social.get(`${state.accountIdContext}/mystudents/${i}`);\r\n        if (student) {\r\n          studentArray.push(student);\r\n          heashForDeletnumb[student] = i;\r\n        } else {\r\n          arreyWhitIndexForAddStudent.push(i);\r\n        }\r\n      }\r\n    }\r\n    State.update({\r\n      studentArray: studentArray,\r\n      arreyWhitIndexForAddStudent: arreyWhitIndexForAddStudent,\r\n      heashForDeletnumb: heashForDeletnumb,\r\n    });\r\n  },\r\n  updateDiscription: (student) => {\r\n    Social.set({\r\n      profile: {\r\n        discriptionsStudent: {\r\n          [student]: state.editDescription,\r\n        },\r\n      },\r\n    });\r\n  },\r\n  deleteStudent: (student) => {\r\n    const indexForDeleteNumb = state.heashForDeletnumb[student];\r\n    Social.set({\r\n      mystudents: {\r\n        [indexForDeleteNumb]: null,\r\n      },\r\n      myStudentsForFind: {\r\n        [student]: false,\r\n      },\r\n    });\r\n  },\r\n  addStudent: () => {\r\n    const newStudent = state.addNewStudent;\r\n    const ifAlreadyHaveStudent = Social.get(\r\n      `${state.accountIdContext}/myStudentsForFind/${newStudent}`\r\n    );\r\n    const sliceForVerification = newStudent.slice(\r\n      newStudent.length - 5,\r\n      newStudent.length\r\n    );\r\n    if (sliceForVerification == \".near\" && ifAlreadyHaveStudent != `true`) {\r\n      let indexForAddStudent = 0;\r\n      if (\r\n        state.studentArray.length > 0 &&\r\n        state.arreyWhitIndexForAddStudent.length > 0\r\n      ) {\r\n        indexForAddStudent = state.arreyWhitIndexForAddStudent[0];\r\n      } else if (\r\n        state.studentArray.length > 0 &&\r\n        state.arreyWhitIndexForAddStudent.length == 0\r\n      ) {\r\n        while (state.arreyWhitIndexForAddStudent.length == 0) {\r\n          const student = Social.get(\r\n            `${state.accountIdContext}/mystudents/${indexForAddStudent}`\r\n          );\r\n          if (!student) {\r\n            State.update({\r\n              arreyWhitIndexForAddStudent: student,\r\n            });\r\n            break;\r\n          }\r\n          indexForAddStudent++;\r\n        }\r\n      } else if (\r\n        state.studentArray.length == 0 &&\r\n        !state.arreyWhitIndexForAddStudent.length == 0\r\n      ) {\r\n        indexForAddStudent = 0;\r\n      }\r\n      Social.set({\r\n        mystudents: {\r\n          [indexForAddStudent]: state.addNewStudent,\r\n        },\r\n        myStudentsForFind: {\r\n          [newStudent]: true,\r\n        },\r\n      });\r\n      State.update({\r\n        ifAddStudent: true,\r\n      });\r\n    } else {\r\n      State.update({\r\n        ifAddStudent: false,\r\n      });\r\n    }\r\n  },\r\n  findStudentByID: () => {\r\n    const idaccound = state.idFindStudent;\r\n    const isOurStudent = Social.get(\r\n      `${state.accountIdContext}/myStudentsForFind/${idaccound}`\r\n    );\r\n    if (isOurStudent == `true`) {\r\n      State.update({\r\n        vrifyOurStudent: idaccound,\r\n      });\r\n    } else {\r\n      State.update({\r\n        vrifyOurStudent: \"\",\r\n      });\r\n    }\r\n  },\r\n};\r\n\r\nTecherPossibilities.init();\r\nTecherPossibilities.getStudent(1, 10);\r\n\r\nfunction descriptionForStudent(account_id) {\r\n  const discriprionalIN = Social.get(`${account_id}/profile/discription`);\r\n  return discriprionalIN;\r\n}\r\n\r\nfunction ourDescriptionForStudent(account_id) {\r\n  const discriprionalIN = Social.get(\r\n    `${state.accountIdContext}/profile/discriptionsStudent/${account_id}`\r\n  );\r\n  if (discriprionalIN == null) {\r\n    return \"no info\";\r\n  }\r\n  return discriprionalIN;\r\n}\r\n\r\nreturn (\r\n  <div\r\n    style={{\r\n      background:\r\n        \"linear-gradient(-45deg, #5F8AFA, #FFFFFF, #FFFFFF, #FFFFFF, #A463B0)\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      padding: \"2rem\",\r\n    }}\r\n  >\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        textAlign: \"center\",\r\n        fontFamily: \"'Manrope', sans-serif\",\r\n      }}\r\n    >\r\n      <h1 style={{ fontWeight: \"bold\" }}>Mentor HUB</h1>\r\n      <h3>Make the world around you the better place</h3>\r\n      <Widget\r\n        src=\"near/widget/\"\r\n        props={{\r\n          accountId,\r\n          style: { width: \"7rem\", height: \"7rem\" },\r\n          className: \"mb-2\",\r\n          imageClassName: \"rounded-circle w-100 h-100 img-thumbnail d-block\",\r\n          thumbnail: false,\r\n        }}\r\n      />\r\n      <Widget src=\"near/widget/#\" props={{ profileName }} />\r\n      <h3\r\n        style={{\r\n          marginTop: \"20px\",\r\n        }}\r\n      >\r\n        My Students\r\n      </h3>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          margin: \"15px\",\r\n        }}\r\n      >\r\n        <Widget\r\n          src=\"near/widget/#\"\r\n          props={{\r\n            accountId: student,\r\n            descriptionForStudent: student,\r\n            ourDescriptionForStudent: student,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kirrruuusha.near/widget/New-Draft-0", "fact_widget_deployments_id": "7ef060bce708f553bb3a3be864490bc9", "inserted_timestamp": "2024-06-07T17:05:29.118Z", "modified_timestamp": "2024-06-07T18:04:52.419Z", "__row_index": 8}