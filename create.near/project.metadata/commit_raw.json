{"tx_hash": "FapAbzBk2Dh6d5DQvmEBaZDaapP457zux8NesPgwc9eU", "action_id_social": "JAt6h2z3EjpnKyWhrsVf4aQAGicwRtyX1gnLLmRwcoc3-0-widget", "block_id": 109956138, "block_timestamp": "2024-01-09T05:06:18.581Z", "signer_id": "create.near", "widget_name": "project.metadata", "source_code": "const { project } = props;\n\nconst objectDiff = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  const keys = aKeys.concat(bKeys.filter((item) => aKeys.indexOf(item) < 0));\n  const result = {};\n  keys.forEach((key) => {\n    if (Array.isArray(a[key]) && Array.isArray(b[key])) {\n      a[key].forEach((item, index) => {\n        if (item !== b[key][index]) {\n          result[key] = b[key];\n        }\n      });\n    } else if (\n      a[key] &&\n      typeof a[key] === \"object\" &&\n      b[key] &&\n      typeof b[key] === \"object\"\n    ) {\n      result[key] = objectDiff(a[key], b[key]);\n    } else if (a[key] != b[key]) result[key] = b[key];\n  });\n  return result;\n};\n\nconst handleUpdateProject = (new_project) => {\n  const diff = objectDiff(project, new_project);\n  // if no diff, return\n  if (Object.keys(diff).length === 0) return;\n\n  const tags = {};\n  new_project.tags.forEach((tag) => {\n    tags[tag] = \"\";\n  });\n\n  props.handle[\"project\"].update(project.id, {\n    data: {\n      title: new_project.title,\n      logo: new_project.logo,\n      tags: tags,\n      description: new_project.description,\n    },\n  });\n};\n\nreturn (\n  <Widget\n    src=\"create.near/widget/project.form\"\n    props={{\n      handleCreateProject: handleUpdateProject,\n      defaultProject: project,\n      buttonChildren: \"Update Project\",\n    }}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/create.near/widget/project.metadata", "fact_widget_deployments_id": "f1e07f4c0d6f117088fba43915a2a74c", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}