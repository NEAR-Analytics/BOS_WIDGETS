{"tx_hash": "FapAbzBk2Dh6d5DQvmEBaZDaapP457zux8NesPgwc9eU", "action_id_social": "JAt6h2z3EjpnKyWhrsVf4aQAGicwRtyX1gnLLmRwcoc3-0-widget", "block_id": 109956138, "block_timestamp": "2024-01-09T05:06:18.581Z", "signer_id": "create.near", "widget_name": "editor.index", "source_code": "let timeoutId;\n\nconst debounce = (func, delay) => {\n  if (!delay) {\n    delay = 300;\n  }\n  clearTimeout(timeoutId);\n  timeoutId = setTimeout(func, delay);\n};\n\n\nconst { project: projectId, handle } = props;\n\nconst path = handle[\"document\"].getSelected(projectId);\nconst doc = handle[\"document\"].get(path);\n\nconst on = {\n  change: (k, v) => {\n    debounce(() => handle[\"document\"].update(projectId, path, { [k]: v }));\n  },\n  publish: () => handle[\"document\"].publish(projectId, path),\n};\n\nconst lastUpdated = doc.metadata.updatedAt;\nconst isBuffer = doc._.inBuffer;\n\nconst Root = styled.div`\n  min-height: max(300px, 80vh);\n  width: 100%;\n  border-radius: 16px;\n  background-color: #f9fbfe;\n  color: #000;\n  display: flex;\n  gap: 4px;\n  border: 1px solid var(--c__border-color);\n\n  --c__border-color: rgb(209, 213, 219);\n\n\n  .c__left {\n    min-height: inherit;\n    border-radius: inherit;\n    width: min(300px, 100%);\n  }\n\n  .c__right {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 0;\n    margin: 1rem 1rem 1rem 0rem;\n    background-color: #fff;\n    padding: 1rem;\n  }\n\n  .c__header {\n    padding: .5rem 1rem;\n    width: 100%;\n    border-radius: 16px;\n    background-color: #fff;\n    border: 1px solid var(--c__border-color);\n    margin-bottom: 1rem;\n\n    input {\n      font-size: 20px;\n      margin: 0 auto;\n      background: none !important;\n      outline: none !important;\n      border: none !important;\n      box-shadow: none !important;\n    }\n  }\n\n  .c__tabs {\n    width: 100%;\n    padding: 0 1rem;\n    display: flex;\n    justify-content: flex-end;\n    gap: 1rem;\n\n    button {\n      outline: none;\n      background: none;\n      padding: 0.5rem 1rem;\n      border-radius: 16px;x\n      cursor: pointer;\n      font-size: 16px;\n      font-weight: 600;\n      color: #000;\n      transition: all 0.3s;\n      transform: translateY(1px);\n      border-radius: 16px 16px 0 0;\n      border: 1px solid transparent;\n      border-bottom: none;\n      \n      &.active {\n        border-color: var(--c__border-color);\n        background-color: #fff;\n      }\n    }\n  }\n\n  .c__editor {\n    width: 100%;\n    padding: 1rem;\n    border: 1px solid var(--c__border-color);\n    border-bottom: none;\n    border-radius: 16px 16px 0 0 ;\n    min-height: 450px;\n  }\n\n  .c__footer {\n    width: 100%;\n    padding: 1rem;\n    border-radius: 0 0 16px 16px;\n    background-color: #fff;\n    border: 1px solid var(--c__border-color);\n    border-top: none;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  `;\n\nconst Folders = props.templates[\"Folders\"];\n// We can create layout files that look just like this one\n// They are stateless\n// It holds the styles and gets passed the definitions\n// for the components it shows.\n// Folders can then be swapped out for other \"Folders\" templates, it just has to follow the props\nreturn (\n  <>\n    <Root>\n      <div className=\"c__left\">\n        {/* And just reference the component here */}\n        <Widget src={Folders} props={props} />\n      </div>\n      <div className=\"c__right\" key={path}>\n        {/*\n         * We can now swap out the editor below\n         */}\n        <Widget src=\"create.near/widget/editor.ui\" props={{\n          key: path,\n          data: doc.data,\n          on,\n          ...props,\n        }} />\n        <div className=\"c__footer\">\n          <span>\n            {isBuffer ? \"Draft auto-saved \" : \"Last published \"} at{\" \"}\n            {new Date(lastUpdated).toLocaleTimeString(\"en-US\", {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n            })}\n            .\n          </span>\n          <div>\n            <Widget src=\"nearui.near/widget/Input.Button\" props={{\n              children: \"Publish\",\n              variant: \"success\",\n              onClick: on.publish,\n              disabled: !isBuffer,\n            }} />\n          </div>\n        </div>\n      </div>\n    </Root>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/create.near/widget/editor.index", "fact_widget_deployments_id": "d0ac041b7fff372ad4e52ecfd0991d2a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}