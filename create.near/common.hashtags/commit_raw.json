{"tx_hash": "3J2TitYzUosmmb6fJwHmvSgai3SPYHK3BGDmsKUaDy2W", "action_id_social": "3A2DB3CPmMbA6sXhnKU6Z5SsykkmPpHh26d7uT68WsLz-0-widget", "block_id": 110796575, "block_timestamp": "2024-01-19T13:31:10.813Z", "signer_id": "create.near", "widget_name": "common.hashtags", "source_code": "const findHashtags = (str) => {\r\n  const regexp = /\\B\\#\\w\\w+\\b/g;\r\n  let match;\r\n  let tags = [];\r\n  while ((match = regexp.exec(str)) !== null) {\r\n    tags.push(match[0]);\r\n  }\r\n  return tags;\r\n};\r\n\r\nconst getPosts = () => {\r\n  const posts = Social.index(\"post\", \"main\", {});\r\n  return posts || [];\r\n};\r\n\r\nlet allPosts = getPosts();\r\n\r\nlet hashtags = [];\r\nallPosts.forEach((item) => {\r\n  const post = Social.get(`${item.accountId}/post/main`, item.blockHeight);\r\n  if (post) {\r\n    hashtags.push(JSON.parse(post).text);\r\n  }\r\n});\r\n\r\nlet tagCount = {};\r\nhashtags.forEach((item) => {\r\n  const tags = findHashtags(item);\r\n  tags.forEach((tag) => {\r\n    let normalizedTag = tag.toLowerCase();\r\n    tagCount[normalizedTag] = (tagCount[normalizedTag] || 0) + 1;\r\n  });\r\n});\r\n\r\nlet entries = Object.entries(tagCount);\r\nlet sortedHashtags = entries.sort((a, b) => b[1] - a[1]).slice(0, 888);\r\nconst Wrapper = styled.div`\r\n--gray1:#dbe1e8;--gray2:#b2becd;--gray3:#6c7983;--gray4:#454e56;--gray5:#2a2e35;--gray6:#12181b;--nav-width:4em;--font-body:\"sofia-pro\",sans-serif;--font-head:\"sofia-pro\",sans-serif;--font-code:\"attribute-mono\",monospace;--font-size:20px;--max-width-bp:768px;--orange-pink:linear-gradient(to bottom right,var(--orange-light),var(--orange-dark) 85%);--green-grad:linear-gradient(to bottom right,var(--green-light),var(--green-dark) 85%);--background:var(--gray6);--text-color:var(--gray2);--h-color:#fff;--nav-shadow:4px 0 10px -3px #010101;--card-shadow:0 4px 8px rgba(0,0,0,0.38);--toc-shadow:rgba(0,0,0,0.7) 0px 10px 20px 0px;--nav-bg:var(--gray5);--tag-bg:var(--gray4);--code-bg:#22262f;--card-bg:var(--gray5);--overlay-bg:rgba(0,0,0,0.9);--h-border:2px dashed var(--nav-bg);--nav-border:2px dashed var(--text-color);--card-radius:0.25em;transition: all .3s ease\r\n\r\n.container {\r\n    background: var(--background);\r\n    color: var(--text-color);\r\n    margin: 0;\r\n    font-family: var(--font-body);\r\n    font-size: var(--font-size);\r\n    display: flex;\r\n    min-height: 100vh;\r\n    flex-direction: column\r\n}\r\n\r\n.tag {\r\n    display: inline-block;\r\n    border-radius: 3px;\r\n    padding: .2em .5em .3em;\r\n    border-radius: 2px;\r\n    background: var(--tag-bg);\r\n    color: #fff;\r\n    font-weight: 555;\r\n    margin: .25em .1em\r\n}\r\n\r\nh1.tag {\r\n    margin-left: 0;\r\n    margin-right: 0\r\n}\r\n\r\n.tag-sm {\r\n    font-size: .7em;\r\n    display: inline-block;\r\n    letter-spacing: .15ch;\r\n    font-weight: 400\r\n}\r\n\r\n.tag-lg {\r\n    font-size: 1.2em;\r\n    border-radius: 4px\r\n}\r\n\r\n\r\n`;\r\nreturn (\r\n  <>\r\n    <Wrapper class=\"container\">\r\n      {sortedHashtags.length > 0 &&\r\n        sortedHashtags.map((item, index) => (\r\n          <a href={`https://near.social/?hashtag=${item[0].replace(\"#\", \"\")}`}>\r\n            <span className={`tag tag-${index} tag-lg`}>\r\n              {item[0].replace(\"#\", \"\")} - {item[1]}\r\n            </span>\r\n          </a>\r\n        ))}\r\n    </Wrapper>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/create.near/widget/common.hashtags", "fact_widget_deployments_id": "62471e210db503b03544d379cf9bae94", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}