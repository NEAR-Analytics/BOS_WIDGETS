{"tx_hash": "2fdV2LFCLs6sHz2yEkTeT19DkeDdazvSQbN91m397Xca", "action_id_social": "E3W5voo4HsXzKqPg2QswaNeMcuabPRQPE3JvKdNBW2PF-0-widget", "block_id": 96850660, "block_timestamp": "2023-07-19T16:46:59.148Z", "signer_id": "c74edb82759f476010ce8363e6be15fcb3cfebf9be6320d6cdc3588f1a5b4c0e", "widget_name": "APRText", "source_code": "function hexToNumString(hex) {\n  return ethers.BigNumber.from(hex).toString();\n}\n/**\n * @param {string} chainId\n * @param {string} poolId\n * @returns {APRApiResponse | undefined}\n */\nconst getApr = (chainId, poolId) => {\n  console.log(\"poolId\", poolId);\n  console.log(\"chainId\", chainId);\n  const url = `https://api.balancer.fi/pools/${chainId}/${poolId}`;\n  const res = fetch(url).body;\n  return res;\n};\nconst pools = fetch(graphqlUrl, {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ query }),\n}).body.data.pools;\n\nfunction formatAPR(aprRes) {\n  const total = aprRes?.apr.tokenAprs.total;\n  const apr =\n    typeof total === \"number\" || typeof total === \"string\"\n      ? parseInt(total) / 100 + \"%\"\n      : \"N/A\";\n  return apr;\n}\n\nconst missingProps = [];\nif (!props.poolId) missingProps.push(\"poolId (string)\");\nif (!props.chainId) missingProps.push(\"chainId (string)\");\nif (missingProps.length > 0) {\n  return (\n    <pre className=\"card text-white bg-danger pt-3 px-3\">\n      {`APR missing props:\n\n- ${missingProps.join(\"\\n- \")}`}\n    </pre>\n  );\n}\n\nconst chainId = props.chainId;\nconst poolId = props.poolId;\nconst aprRes = getApr(chainId, poolId);\nconst apr = formatAPR(aprRes);\n\nreturn <>{apr}</>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/c74edb82759f476010ce8363e6be15fcb3cfebf9be6320d6cdc3588f1a5b4c0e/widget/APRText", "fact_widget_deployments_id": "0e3b9a8f8c6a50c97ed1a512e22e0727", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 2}