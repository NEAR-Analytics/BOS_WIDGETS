{"tx_hash": "Z4DxR6jC7rZaR9qC51SBVBXSSFdcHhqrw7Rmo2xfGYJ", "action_id_social": "3G15Sofhz2qsTYSGFGRawuMPiuwsFgQY6zRyV879hTdm-0-widget", "block_id": 107933058, "block_timestamp": "2023-12-14T15:18:01.795Z", "signer_id": "mctery.near", "widget_name": "Air3LoadFiles", "source_code": "State.init({\r\n  uploading: false,\r\n  cid: context.accountId || undefined,\r\n  cid_img: context.accountId\r\n    ? Social.get(\r\n        `https://i.near.social/magic/large/https://near.social/magic/img/account/${context.accountId}`\r\n      )\r\n    : undefined,\r\n  filename: null,\r\n  onload: true,\r\n\r\n  //config\r\n  near_DB: \"\",\r\n  livecoinURL: \"https://api.livecoinwatch.com\",\r\n  livecoinAPI: \"2e83cac3-4860-4889-a994-9baaf91c873a\",\r\n  ipfsUrl: \"https://ipfs.near.social/ipfs/\",\r\n});\r\n\r\nfunction _init() {\r\n  let getWallet = \"\";\r\n\r\n  setTimeout(() => {\r\n    State.update({ onload: false });\r\n  }, 1000);\r\n}\r\n\r\nfunction fetchData(url, method, data) {\r\n  try {\r\n    let response = fetch(url, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-api-key\": `${state.livecoinAPI}`,\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    return response.ok ? response.body : false;\r\n  } catch (e) {\r\n    console.log(\"error :\", e);\r\n  }\r\n}\r\n\r\nfunction getConnectWallet() {}\r\n\r\nasync function getLiveCoins() {\r\n  let dataset = [];\r\n\r\n  let liveCoins = fetchData(`${state.livecoinURL + \"/coins/list\"}`, \"POST\", {\r\n    currency: \"USD\",\r\n    sort: \"rank\",\r\n    order: \"ascending\",\r\n    offset: 0,\r\n    limit: 10,\r\n    meta: true,\r\n  });\r\n\r\n  function priceFormat(price) {\r\n    return price.toLocaleString(\"en-US\", {\r\n      style: \"currency\",\r\n      currency: \"USD\",\r\n    });\r\n  }\r\n\r\n  if(liveCoins.length > 0) {\r\n    return liveCoins.map((i, index) => {\r\n      return (\r\n            <div class=\"col-12 col-sm-6\">\r\n              <div class=\"card widget-card border-light shadow-sm\">\r\n                <div class=\"card-body p-4\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-8\">\r\n                      <h5 class=\"card-title widget-card-title mb-3\">{i.code}</h5>\r\n                      <h4 class=\"card-subtitle text-body-secondary m-0\">\r\n                        {priceFormat(i.rate)}\r\n                      </h4>\r\n                    </div>\r\n                    <div class=\"col-4\">\r\n                      <div class=\"d-flex justify-content-end\">\r\n                        <div class=\"lh-1 text-white rounded-circle p-3 d-flex align-items-center justify-content-center\">\r\n                          <img src={i.png64} alt={i.name} width={80} />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <div class=\"d-flex align-items-center mt-3\">\r\n                        <span class=\"lh-1 me-3 bg-danger-subtle text-danger rounded-circle p-1 d-flex align-items-center justify-content-center\">\r\n                          <i class=\"bi bi-arrow-right-short bsb-rotate-45\"></i>\r\n                        </span>\r\n                        <div>\r\n                          <p class=\"fs-7 mb-0\">-9%</p>\r\n                          <p class=\"fs-7 mb-0 text-secondary\">since last week</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n      )\r\n    })\r\n  }\r\n}\r\n\r\n//return\r\nif (state.onload) {\r\n  _init();\r\n\r\n  return (\r\n    <div>\r\n      <h5>Test Files</h5>\r\n      <p>is Loading...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nif (!state.onload) {\r\n  return (\r\n    <div class=\"container\">\r\n      <div>\r\n        <div class=\"navbar navbar-expand-lg bg-body-tertiary\">\r\n          <div class=\"container-fluid\">\r\n            <a class=\"navbar-brand\" href=\"#\">\r\n              Air3 Drive\r\n            </a>\r\n            <button\r\n              class=\"btn btn-light\"\r\n              type=\"button\"\r\n              onclick={() => {\r\n                getConnectWallet();\r\n              }}\r\n            >\r\n              Connect\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div class=\"row justify-content-md-center text-center\">\r\n        <div class=\"col col-lg-12 mt-5\">\r\n          <h5>Files Upload Header</h5>\r\n          <p>Please Connect your Wallet to Upload Files.</p>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"60\"\r\n            width=\"75\"\r\n            viewBox=\"0 0 384 512\"\r\n          >\r\n            <path d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 408c0 13.3-10.7 24-24 24s-24-10.7-24-24V305.9l-31 31c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l72-72c9.4-9.4 24.6-9.4 33.9 0l72 72c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-31-31V408z\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div class=\"row justify-content-center py-5 my-4 border-top\">\r\n        <div class=\"col-12 col-lg-10 col-xl-8 col-xxl-7\">\r\n          <div class=\"row gy-4\">\r\n            {getLiveCoins()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top\">\r\n        <div class=\"col-md-4 d-flex align-items-center\">\r\n          <a class=\"mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1\">\r\n            Air3 Drive Developer\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mctery.near/widget/Air3LoadFiles", "fact_widget_deployments_id": "a6507fe5fc6a05ece8ed78d806b0a0d6", "inserted_timestamp": "2023-12-14T17:22:52.574Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}