{"tx_hash": "78NTCFBPYj3F3yp4QE4LiUzetviyXsTJ8NJoRF6ryRYR", "action_id_social": "9C2VU7Kzn9j5mQ1j9iXbKaRkUzGr27Ynm1EW9MiBFykm-0-widget", "block_id": 113956320, "block_timestamp": "2024-03-02T15:47:45.619Z", "signer_id": "webbrowser.near", "widget_name": "OpenWebBrowser.Pages.SignCode", "source_code": "const { signMessage } = props;\n\nconst Main = styled.div`\n    width:100%;\n    height:100vh;\n`;\n\nconst [selectedOption, setSelectedOption] = useState(\"\");\n\nconst widgets = Social.getr(`${context.accountId}/widget`);\nconst getSelectedOptionEncoded = () => {\n  const code = widgets[selectedOption][\"\"];\n  const encoded = ethers.utils.sha256(Buffer.from(code));\n\n  return encoded?.substring(2, encoded.length);\n};\n\nreturn (\n  <Main>\n    <select\n      onChange={(e) => {\n        setSelectedOption(e.target.value);\n      }}\n    >\n      <option>Choose a component</option>\n      {Object.keys(widgets)?.map((option) => (\n        <option>{option}</option>\n      ))}\n    </select>\n    <button\n      onClick={() => {\n        signMessage(getSelectedOptionEncoded()).then(({signature, nonce, publicKey}) => {\n          Social.set({\n            routes: {\n              index: {\n                component: selectedOption,\n                signature: {\n                  publicKey,\n                  value: signature,\n                  nonce\n                },\n              },\n            },\n          });\n        });\n      }}\n    >\n      Sign\n    </button>\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/webbrowser.near/widget/OpenWebBrowser.Pages.SignCode", "fact_widget_deployments_id": "5193130c65e2573314c5efc33b4c00e3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}