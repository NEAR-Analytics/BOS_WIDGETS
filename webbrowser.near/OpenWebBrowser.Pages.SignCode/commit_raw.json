{"tx_hash": "9Qqct2DBwaQLrP1ciPsxbBWD8S9gmzSotXXwpbnaCnC4", "action_id_social": "2ExjPxR4fDmoxt5bbvsJwQwuHQaJHBJKce4SaV7QKJoX-0-widget", "block_id": 113956515, "block_timestamp": "2024-03-02T15:52:03.974Z", "signer_id": "webbrowser.near", "widget_name": "OpenWebBrowser.Pages.SignCode", "source_code": "const { signMessage } = props;\n\nconst Main = styled.div`\n    width:100%;\n    height:100vh;\n`;\n\nconst [selectedOption, setSelectedOption] = useState(\"\");\n\nconsole.log(Social.getr(\"mattb.near/routes/*/*\"));\n\nconst widgets = Social.getr(`${context.accountId}/widget`);\nconst getSelectedOptionEncoded = () => {\n  const code = widgets[selectedOption][\"\"];\n  const encoded = ethers.utils.sha256(Buffer.from(code));\n\n  return encoded?.substring(2, encoded.length);\n};\n\nreturn (\n  <Main>\n    <select\n      onChange={(e) => {\n        setSelectedOption(e.target.value);\n      }}\n    >\n      <option>Choose a component</option>\n      {Object.keys(widgets)?.map((option) => (\n        <option>{option}</option>\n      ))}\n    </select>\n    <button\n      onClick={() => {\n        signMessage(getSelectedOptionEncoded()).then(({signature, nonce, publicKey}) => {\n          Social.set({\n            routes: {\n              index: {\n                signature: {\n                  component: selectedOption,\n                  publicKey,\n                  value: signature,\n                  nonce\n                },\n              },\n            },\n          });\n        });\n      }}\n    >\n      Sign\n    </button>\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/webbrowser.near/widget/OpenWebBrowser.Pages.SignCode", "fact_widget_deployments_id": "c948968de112e15d32f98b59afebd6eb", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}