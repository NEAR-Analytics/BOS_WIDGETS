{"tx_hash": "9dFnpR3e64S8regUgDDAC9ov2vxq4b9B69S56ta4Gmnq", "action_id_social": "3SpgAcPKAUsxNsinv5FzEbUFiTR1P9j5QPJcjFDxnZbA-0-widget", "block_id": 113957957, "block_timestamp": "2024-03-02T16:23:45.062Z", "signer_id": "webbrowser.near", "widget_name": "OpenWebBrowser.Pages.SignCode", "source_code": "const { signMessage } = props;\n\nconst Main = styled.div`\n    width:100%;\n    height:100vh;\n`;\n\nconst [selectedOption, setSelectedOption] = useState(\"\");\n\nconst widgets = Social.getr(`${context.accountId}/widget`);\nconst getSelectedOptionEncoded = () => {\n  const code = widgets[selectedOption][\"\"];\n  console.log(code);\n  const encoded = ethers.utils.sha256(Buffer.from(code));\n\n  return encoded?.substring(2, encoded.length);\n};\n\nreturn (\n  <Main>\n    <select\n      onChange={(e) => {\n        setSelectedOption(e.target.value);\n      }}\n    >\n      <option>Choose a component</option>\n      {Object.keys(widgets)?.map((option) => (\n        <option>{option}</option>\n      ))}\n    </select>\n    <button\n      onClick={() => {\n        signMessage(getSelectedOptionEncoded()).then(\n          ({ signature, nonce, publicKey }) => {\n            Social.set({\n              routes: {\n                index: {\n                  component: selectedOption,\n                  signature: {\n                    publicKey,\n                    value: signature,\n                    nonce,\n                  },\n                },\n              },\n            });\n          }\n        );\n      }}\n    >\n      Sign\n    </button>\n  </Main>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/webbrowser.near/widget/OpenWebBrowser.Pages.SignCode", "fact_widget_deployments_id": "08ce35fe6c80d473148e7b30f4fdf15e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}