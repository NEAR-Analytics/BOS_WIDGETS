{"tx_hash": "2tvZABYqH8f6wNr2ukEbZmkgBinJEipN7kueiKBsWZoL", "action_id_social": "43BtFtehFxB52MfQHWBHKQAhm3UEn2QQqNWr9dx7qQHb-0-widget", "block_id": 107824448, "block_timestamp": "2023-12-13T07:36:01.887Z", "signer_id": "vanshika.near", "widget_name": "CrossTheRoad", "source_code": "const RoadCrosserGame = () => {\n  const [characterPosition, setCharacterPosition] = useState(40);\n  const [gameOver, setGameOver] = useState(false);\n  const [roads, setRoads] = useState([\n    { top: 200, carPosition: 50, cars: [0] },\n    { top: 300, carPosition: 30, cars: [0] },\n    { top: 400, carPosition: 70, cars: [0] },\n  ]);\n\n  const characterStyle = {\n    position: \"absolute\",\n    left: \"50%\",\n    bottom: `${characterPosition}px`,\n    transform: \"translateX(-50%)\",\n    width: \"30px\",\n    height: \"30px\",\n    backgroundColor: \"red\",\n  };\n\n  const roadStyle = {\n    position: \"absolute\",\n    left: \"0\",\n    width: \"100%\",\n    height: \"50px\",\n    backgroundColor: \"gray\",\n  };\n\n  const carStyle = {\n    position: \"absolute\",\n    width: \"30px\",\n    height: \"30px\",\n  };\n\n  const handleMoveForward = () => {\n    if (!gameOver) {\n      setCharacterPosition(characterPosition + 10);\n    }\n  };\n\n  const handleMoveBackward = () => {\n    if (!gameOver && characterPosition > 0) {\n      setCharacterPosition(characterPosition - 10);\n    }\n  };\n\n  const restartGame = () => {\n    setCharacterPosition(40);\n    setGameOver(false);\n    setRoads([\n      { top: 200, carPosition: 50, cars: [0] },\n      { top: 300, carPosition: 30, cars: [0] },\n      { top: 400, carPosition: 70, cars: [0] },\n    ]);\n  };\n\n  const moveCars = () => {\n    setRoads((prevRoads) =>\n      prevRoads.map((road) => {\n        const newCars = road.cars.map((pos) =>\n          pos >= 100 ? road.cars.length * 10 : pos + 1\n        );\n        return { ...road, cars: newCars };\n      })\n    );\n  };\n\n  useEffect(() => {\n    const gameInterval = setInterval(() => {\n      moveCars();\n\n      // Check for collision with cars\n      const isCollision = roads.some((road) =>\n        road.cars.some(\n          (pos) =>\n            characterPosition <= road.top + 30 &&\n            characterPosition + 30 >= road.top &&\n            road.carPosition + pos >= 50 &&\n            road.carPosition + pos <= 80\n        )\n      );\n\n      if (isCollision) {\n        setGameOver(true);\n      }\n\n      // Check for successful crossing\n      if (characterPosition >= 500) {\n        const allRoadsCrossed = roads.every(\n          (road) => characterPosition >= road.top + 30\n        );\n        if (allRoadsCrossed) {\n          setGameOver(true);\n        }\n      }\n\n      // Clear interval if the game is over\n      if (gameOver) {\n        clearInterval(gameInterval);\n      }\n    }, 100);\n\n    return () => {\n      clearInterval(gameInterval);\n    };\n  }, [characterPosition, roads, gameOver]);\n\n  return (\n    <div>\n      {roads.map((road, index) => (\n        <div key={index} style={{ ...roadStyle, top: `${road.top}px` }}>\n          {road.cars.map((pos, carIndex) => (\n            <div\n              key={carIndex}\n              style={{\n                ...carStyle,\n                left: `${road.carPosition + pos}%`,\n                backgroundColor: carIndex % 2 === 0 ? \"blue\" : \"green\",\n              }}\n            ></div>\n          ))}\n        </div>\n      ))}\n      <div style={characterStyle}></div>\n      {gameOver ? (\n        <div>\n          <p>{characterPosition >= 500 ? \"You Won!\" : \"Game Over\"}</p>\n          <button onClick={restartGame}>Restart Game</button>\n        </div>\n      ) : (\n        <div>\n          <button onClick={handleMoveBackward}>Move Backward</button>\n          <button onClick={handleMoveForward}>Move Forward</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nreturn <RoadCrosserGame />;\n", "metadata": {"description": "You need to cross the road to win the game", "image": {"ipfs_cid": "bafkreifzut7eyiflinrgxet4orlubfwud2lcntcoyczo2kkxhvythhsfti"}, "name": "CrossTheRoad", "tags": {"cars": "", "game": "", "near": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vanshika.near/widget/CrossTheRoad", "fact_widget_deployments_id": "f902a3558fa46f521ef72a21f3ec74ae", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}