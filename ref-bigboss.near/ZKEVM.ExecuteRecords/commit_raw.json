{"tx_hash": "HNX9k916DAQw3yFpVfQyKWsRZYyDT6PxbvD1QrpfrgDX", "action_id_social": "9ESU8ed8kQXPrAsougjQtocykDLSaQAUJY2D9LhK9ME6-0-widget", "block_id": 97300486, "block_timestamp": "2023-07-25T12:47:59.672Z", "signer_id": "ref-bigboss.near", "widget_name": "ZKEVM.ExecuteRecords", "source_code": "\nconst Container = styled.div`\n  .pageTitle{\n    display:flex;\n    align-items:center;\n    margin-top:14px;\n    img{\n      margin-right:14px;\n    }\n    span{\n      font-size:32px;\n      color:#fff;\n      font-weight:700;\n    }\n  }\n  .recordList{\n    display:flex;\n    flex-direction:column;\n    justify-content:space-between;\n    border:1px solid #332C4B;\n    background-color:#181A27;\n    padding-top:12px;\n    border-radius:16px;\n    margin-top:20px;\n    min-height:200px;\n    table{\n      width:100%;\n      tbody tr:hover{\n        background-color:#373A53;\n      }\n      tr th {\n        color:#91A2AE;\n        font-size:14px;\n        height:34px;\n        border-bottom:1px solid #332C4B;\n        .arrow{\n          cursor:pointer;\n        }\n      }\n      tr td{\n        color:#fff;\n        height:42px;\n        font-size:14px;\n      }\n      tr th:nth-child(1), tr td:nth-child(1) {\n        padding-left:22px;\n      }\n      tr th:nth-last-child(1), tr td:nth-last-child(1){\n        padding-right:22px;\n      }\n      tr .head_th{\n        position:relative;\n        display:inline-flex;\n        cursor:pointer;\n        .select{\n          display:none;\n          position:absolute;\n          width:190px;\n          border-radius:16px;\n          background-color:#373A53;\n          padding:10px;\n          top: 26px;\n          left: -20px;\n          &.show{\n            display:block;\n          }\n          &.hide{\n            display:none;\n          }\n          .item{\n            display:flex;\n            align-items:center;\n            justify-content:space-between;\n            height:36px;\n            border-radius:10px;\n            padding:0 12px;\n            font-size:14px;\n            color:#fff;\n            font-weight:400;\n            cursor:pointer;\n            margin:5px 0;\n            .selected_icon{\n              display:none;\n            }\n            &:hover, &.active{\n              background-color:rgba(24, 26, 39, 0.3);\n            }\n            &.active .selected_icon{\n              display:block;\n            }\n          }\n        }\n        \n      }\n    }\n    .emptyText{\n      display:flex;\n      justify-content:center;\n      font-size:18px;\n      color:#4F5375;\n      font-weight:500;\n    }\n    .page{\n      display:flex;\n      justify-content:flex-end;\n      align-items:center;\n      height:42px;\n      border-top:1px solid #332C4B;\n      font-size:14px;\n      color:#91A2AE;\n      gap:6px;\n      padding:0 16px;\n      .cur_page{\n        position:relative;\n        top:1px;\n        margin:0 10px;\n      }\n      svg{\n        cursor:pointer;\n      }\n      .disabled{\n        opacity:0.3;\n        svg{\n          cursor:not-allowed;\n        }\n      }\n    }\n  }\n`\nconst Back = styled.a`\n  display:flex;\n  align-items:center;\n  img{\n    margin-right:14px;\n    cursor:pointer;\n  }\n  span{\n    color:#979ABE;\n    font-size:18px;\n    font-weight:500;\n    cursor:pointer;\n  }\n  &:hover{\n    text-decoration:none;\n  }\n`\nconst left_most_icon = <svg width=\"10\" height=\"13\" viewBox=\"0 0 10 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<g>\n<path d=\"M2.77733 5.77071C2.35628 6.16574 2.35628 6.83426 2.77733 7.22928L6.31579 10.5491C6.95436 11.1482 8 10.6954 8 9.81976L8 3.18023C8 2.30462 6.95436 1.85185 6.31579 2.45095L2.77733 5.77071Z\" fill=\"#7E8A93\"/>\n<path d=\"M1 3V10\" stroke=\"#7E8A93\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</g>\n</svg>;\nconst left_icon = <svg width=\"6\" height=\"9\" viewBox=\"0 0 6 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M0.777329 3.77071C0.356276 4.16574 0.356276 4.83426 0.777328 5.22928L4.31579 8.54905C4.95436 9.14816 6 8.69538 6 7.81976L6 1.18023C6 0.304619 4.95436 -0.148155 4.31579 0.450951L0.777329 3.77071Z\" fill=\"#7E8A93\"/>\n</svg>\n\nconst right_most_icon = <svg width=\"10\" height=\"13\" viewBox=\"0 0 10 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M7.22267 5.77071C7.64372 6.16574 7.64372 6.83426 7.22267 7.22928L3.68421 10.5491C3.04564 11.1482 2 10.6954 2 9.81976L2 3.18023C2 2.30462 3.04564 1.85185 3.68421 2.45095L7.22267 5.77071Z\" fill=\"#7E8A93\"/>\n<path d=\"M9 3V10\" stroke=\"#7E8A93\" stroke-width=\"1.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>;\n\n\nconst right_icon = <svg width=\"6\" height=\"9\" viewBox=\"0 0 6 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5.22267 3.77071C5.64372 4.16574 5.64372 4.83426 5.22267 5.22928L1.68421 8.54905C1.04564 9.14816 -4.6751e-07 8.69538 -4.29236e-07 7.81976L-1.39013e-07 1.18023C-1.00738e-07 0.304619 1.04564 -0.148155 1.68421 0.450951L5.22267 3.77071Z\" fill=\"#7E8A93\"/>\n</svg>\n\nconst arrow_down_icon = <svg width=\"10\" height=\"6\" viewBox=\"0 0 10 6\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5.70705 5.29289C5.31653 5.68342 4.68336 5.68342 4.29284 5.29289L0.707053 1.70711C0.0770878 1.07714 0.523254 -9.15906e-07 1.41416 -8.38021e-07L8.58573 -2.11062e-07C9.47664 -1.33177e-07 9.9228 1.07714 9.29284 1.70711L5.70705 5.29289Z\" fill=\"#91A2AE\"/>\n</svg>\n\nconst selected_icon = <svg width=\"12\" height=\"9\" viewBox=\"0 0 12 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M1 2.84615L4.47826 7L11 1\" stroke=\"#9E75FF\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n</svg>; \n\nconst copy_icon = <svg width=\"11\" height=\"12\" viewBox=\"0 0 11 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<rect x=\"1\" y=\"3\" width=\"7\" height=\"8\" rx=\"2\" stroke=\"#5285DF\"/>\n<path d=\"M2.72754 3.27246L2.72754 3C2.72754 1.89543 3.62297 1 4.72754 1H7.99941C9.10398 1 9.99941 1.89543 9.99941 3V7.36288C9.99941 8.36692 9.18548 9.18085 8.18144 9.18085V9.18085\" stroke=\"#5285DF\"/>\n</svg>\n;\nconst select_action_list = [\n  {id: '', name: 'All Actions'},\n  {id: 'Swap', name: 'Swap'},\n  {id: 'Bridge', name: 'Bridge'},\n  {id: 'Lending', name: 'Lending'},\n  // {id: 'Staking', name: 'Staking'},\n];\nconst select_template_list = [\n  {id: '', name: 'All Templates'},\n  {id: 'ZkEvm', name: 'ZkEvm'},\n  {id: 'ZkEvm-bridge', name: 'Bridge'},\n  {id: 'AAVE', name: 'AAVE'}\n];\nconst select_status_list = [\n  {id: '', name: 'All Status'},\n  {id: 'Success', name: 'Success'},\n  {id: 'Failed', name: 'Failed'}\n];\nState.init({\n  record_list: [],\n  action_select_box_status: false, // true \u663e\u793a\uff0c false \u5173\u95ed\n  template_select_box_status: false, // true \u663e\u793a\uff0c false \u5173\u95ed\n  status_select_box_status: false, // true \u663e\u793a\uff0c false \u5173\u95ed\n\n  search_action: '',\n  search_template: '',\n  search_status: '',\n  total_page_size: '',\n  total_page: 1,\n  current_page: 1,\n  page_size: 20,\n})\nconst eth_account_id = Ethers.send(\"eth_requestAccounts\", [])[0];\nfunction get_my_records_list_by_condition() {\n  // account_info todo\n  const params_str = `account_id=${eth_account_id}&page_number=${state.current_page}&page_size=${state.page_size}&action_type=${state.search_action}&action_status=${state.search_status}&template=${state.search_template}&account_info=`\n  asyncFetch(`http://139.162.85.48:8100/get-action-records-by-account?${params_str}`).then((res) => {\n    const { action_list, page_number, total_page, total_size } = JSON.parse(res.body || {}).data || {};\n\n    State.update({\n      record_list: action_list,\n      total_page_size: total_size,\n      total_page,\n      current_page: page_number,\n    })\n  });\n}\nfunction get_current_page_range() {\n  const start = (state.current_page - 1) * state.page_size + 1;\n  const end = start - 1 + state.record_list.length;\n  return `${Math.min(start, end)}-${end}`;\n} \nif (eth_account_id) {\n  get_my_records_list_by_condition();\n}\nfunction getTime(timestamp) {\n  var myDate = new Date(Big(timestamp).mul(1000).toNumber());\n  var year = myDate.getFullYear();\n  var month = Number(myDate.getMonth() + 1) + \"\";\n  var date = myDate.getDate() + \"\";\n  var hour = myDate.getHours() < 10 ? \"0\" + myDate.getHours() : myDate.getHours(); \n  var minute = myDate.getMinutes() < 10 ? \"0\" + myDate.getMinutes() : myDate.getMinutes(); \n  var second = myDate.getSeconds() < 10 ? \"0\" + myDate.getSeconds() : myDate.getSeconds();\n    if (date.length == 1) {\n        date = \"0\" + date\n    }\n    if (month.length == 1) {\n        month = \"0\" + month\n    }\n   return year + '-' + month + '-' + date + ' ' + hour + ':' + minute + ':' + second + '  ';\n}\nconst template_icons = {\n  'ZkEvm': 'https://ipfs.near.social/ipfs/bafkreiftqxncp4pt36z5mcfzizbkccoufksmz2f4zhnproxv4krfb5qmsm',\n  'ZkEvm-bridge': 'https://ipfs.near.social/ipfs/bafkreigu2kdqzug45li74xcdhokazx7gv2yopml6x5bwrnjrkx2qsjrsni',\n  'AAVE': 'https://ipfs.near.social/ipfs/bafkreibveumzusupe5rvk4nffzdipquvatfg5lagg7c6jaor2b3hgigw5e'\n}\nlet timer;\nconst duration = 500;\nfunction click_left_most() {\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    State.update({\n      current_page: 1,\n    })\n  }, duration)\n  \n}\nfunction click_left() {\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    if (state.current_page - 1 >= 1) {\n      State.update({\n        current_page: state.current_page - 1,\n      })\n    }\n  }, duration)\n}\nfunction click_right() {\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    if (state.current_page + 1 <= state.total_page) {\n      State.update({\n        current_page: state.current_page + 1\n      })\n    }\n  }, duration)\n  \n}\nfunction click_right_most() {\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    State.update({\n      current_page: state.total_page\n    })\n  }, duration)\n}\nfunction switch_action_select() {\n  State.update({\n    action_select_box_status: !state.action_select_box_status,\n    template_select_box_status: false,\n    status_select_box_status: false,\n  })\n}\nfunction switch_template_select() {\n  State.update({\n    template_select_box_status: !state.template_select_box_status,\n    action_select_box_status:false,\n    status_select_box_status: false,\n  })\n}\nfunction switch_status_select() {\n  State.update({\n    status_select_box_status: !state.status_select_box_status,\n    action_select_box_status:false,\n    template_select_box_status:false,\n  })\n}\nfunction displayTx(tx) {\n  // EsdWX6...mLsG\n  if (tx && tx.length > 10) {\n    return tx.slice(0, 6) + '...' + tx.slice(tx.length - 4)\n  }\n  return tx;\n}\nfunction goTxDetail(record) {\n  return ''\n}\nconst Status = styled.span`\n   color: ${(props) => props.status == 'Success' ? '#93FFCB': '#7C7F96'};\n`\nconst Tx = styled.div`\n  display:flex;\n  align-items:center;\n  gap:8px;\n  a{\n    text-decoration:underline;\n    color:#fff;\n    font-size:14px;\n  }\n  a:hover{\n    color:#fff;\n  }\n  .copy{\n    cursor:pointer;\n  }\n\n\n`\nreturn <Container>\n <Back href=\"/warmup\">\n   <img src=\"https://ipfs.near.social/ipfs/bafkreig7ezlwthp2u6gsoifpvbsjcepuyvtx33uyjaentqwvcoh64unvd4\"></img>\n   <span>Back</span>\n </Back>\n <div className=\"pageTitle\">\n   <img src=\"https://ipfs.near.social/ipfs/bafkreia7hmyccnbvwwx6abuohry4xbjnmsg2bslip7tdns6jx5xg2vpbde\"></img>\n   <span className=\"\">My Execute Records</span>\n </div>\n <div className=\"recordList\">\n  <table>\n     <thead>\n       <tr>\n         <th>Quest</th>\n         <th>\n          <div className=\"head_th\" onClick={(e) => {switch_action_select(e)}}>\n            Action\n            <span className=\"arrow\" style={{marginLeft: '8px'}}>{arrow_down_icon}</span>\n            <div className={`select ${state.action_select_box_status ? 'show': 'hide'}`}>\n              {\n                select_action_list.map((item) => {\n                  return <div key={item.name} onClick={() => {\n                    State.update({\n                      search_action: item.id,\n                      current_page:1\n                    })\n                  }} className={`item ${state.search_action == item.id ? 'active': ''}`}>\n                    {item.name}\n                    <span className=\"selected_icon\">{selected_icon}</span>\n                </div>\n                })\n              }\n            </div>\n          </div>\n         </th>\n         <th>\n          <div className=\"head_th\" onClick={switch_template_select}>\n            Template\n            <span className=\"arrow\" style={{marginLeft: '5px'}}>{arrow_down_icon}</span>\n            <div className={`select ${state.template_select_box_status ? 'show': 'hide'}`}>\n              {\n                select_template_list.map((item) => {\n                  return <div key={item.name} onClick={() => {\n                    State.update({\n                      search_template: item.id,\n                      current_page:1\n                    })\n                  }} className={`item ${state.search_template == item.id ? 'active': ''}`}>\n                    {item.name}\n                    <span className=\"selected_icon\">{selected_icon}</span>\n                </div>\n                })\n              }\n            </div>\n          </div>\n         </th> \n         <th>\n          <div className=\"head_th\" onClick={switch_status_select}>\n            Status\n            <span className=\"arrow\" style={{marginLeft: '5px'}}>{arrow_down_icon}</span>\n            <div className={`select ${state.status_select_box_status ? 'show': 'hide'}`}>\n              {\n                select_status_list.map((item) => {\n                  return <div key={item.name} onClick={() => {\n                    State.update({\n                      search_status: item.id,\n                      current_page:1\n                    })\n                  }} className={`item ${state.search_status == item.id ? 'active': ''}`}>\n                    {item.name}\n                    <span className=\"selected_icon\">{selected_icon}</span>\n                </div>\n                })\n              }\n            </div>\n          </div>\n         </th>\n         <th>\n           Time\n        </th>\n         <th>Tx</th>\n       </tr>\n     </thead>\n     <tbody>\n      {\n        state.record_list.map((record, index) => {\n          return  <tr key={index}>\n          <td>{record.action_title}</td>\n          <td>{record.action_type}</td>\n          <td>\n            <img width=\"16\" height=\"16\" src={template_icons[record.template]} style={{marginRight: '6px'}}></img>\n            {record.template}</td>\n           <td>\n            <Status status={record.action_status}>{record.action_status}</Status>\n           </td>\n          <td>{getTime(record.timestamp)}</td>\n          <td>\n            <Tx href={goTxDetail(record)}>\n              <a href=\"\">{displayTx(record.tx_id)}</a>\n              {\n                record.tx_id ? <span onClick={() => {\n                  clipboard.writeText(record.tx_id);\n                }} className=\"copy\">{copy_icon}</span>: null\n              }\n            </Tx>\n           </td>\n        </tr>\n        })\n      }\n     \n     </tbody>\n  </table>\n  {\n    state.record_list.length == 0 ?  <div className=\"emptyText\">No result found</div>: null\n  }\n \n  <div className=\"page\">\n      <span className={`${state.current_page == 1 ? 'disabled': ''}`} onClick={click_left_most}>{left_most_icon}</span>\n      <span className={`${state.current_page == 1 ? 'disabled': ''}`} onClick={click_left}>{left_icon}</span>\n      <span className=\"cur_page\">{get_current_page_range()} of {state.total_page_size}</span>\n      <span className={`${state.current_page == state.total_page ? 'disabled': ''}`} onClick={click_right}>{right_icon}</span>\n      <span className={`${state.current_page == state.total_page ? 'disabled': ''}`} onClick={click_right_most}>{right_most_icon}</span>  \n  </div>\n </div>\n</Container>", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ref-bigboss.near/widget/ZKEVM.ExecuteRecords", "fact_widget_deployments_id": "6378450c4fa4823ffe6b9a733af3e61d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 23}