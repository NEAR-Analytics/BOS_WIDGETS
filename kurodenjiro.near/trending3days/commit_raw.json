{"tx_hash": "Bu9eiZDxLnTECLovjesG987VGv9x4Du1VNhwwi5fcxuc", "action_id_social": "45HgdjKQL3N8BvTaUgLhd8PJQpyUF6EAPjAa9iQgpLrW-0-widget", "block_id": 107148242, "block_timestamp": "2023-12-04T16:29:42.768Z", "signer_id": "kurodenjiro.near", "widget_name": "trending3days", "source_code": "const findHashtags = (str) => {\r\n  const regexp = /\\B\\#\\w\\w+\\b/g;\r\n  let match;\r\n  let tags = [];\r\n  while ((match = regexp.exec(str)) !== null) {\r\n    tags.push(match[0]);\r\n  }\r\n  return tags;\r\n};\r\nconst respBlock = fetch(\"https://api.nearblocks.io/v1/stats\");\r\n\r\n// 3 days\r\nconst newBlock3Days = Math.round(\r\n  parseInt(respBlock.body.stats[0].block) -\r\n    (3 * 24 * 3600) / parseInt(respBlock.body.stats[0].avg_block_time)\r\n);\r\n\r\nlet BlockHeightPost3Days = [];\r\nconst getBlockHeight3daysPost = Social.index(\"post\", \"main\", {\r\n  from: newBlock3Days,\r\n  limit: 99999,\r\n});\r\ngetBlockHeight3daysPost.forEach((item) => {\r\n  BlockHeightPost3Days.push({\r\n    accountId: item.accountId,\r\n    blockHeight: item.blockHeight,\r\n  });\r\n});\r\n\r\nlet post3days = [];\r\nBlockHeightPost3Days.forEach((item) => {\r\n  const post = Social.get(`${item.accountId}/post/main`, item.blockHeight);\r\n  if (post) {\r\n    post3days.push(JSON.parse(post).text);\r\n  }\r\n});\r\n\r\nlet tagCount3Days = {};\r\npost3days.forEach((item) => {\r\n  const tags = findHashtags(item);\r\n  if (tags.length > 0) {\r\n    tags.forEach((tag) => {\r\n      if (tagCount3Days[tag]) {\r\n        tagCount3Days[tag] = tagCount3Days[tag] + 1;\r\n      } else {\r\n        tagCount3Days[tag] = 1;\r\n      }\r\n    });\r\n  }\r\n});\r\nlet entries3days = Object.entries(tagCount3Days);\r\nlet post3daySorted = entries3days.sort((b, a) => a[1] - b[1]);\r\nconst Wrapper = styled.div`\r\n--red:#ff3860;--red-dark:#ff1443;--red-light:#ff5c7c;--blue:#498afb;--blue-dark:#2674fa;--blue-light:#6ca0fc;--orange:#fa8142;--orange-dark:#f96a1f;--orange-light:#fb9865;--green:#09c372;--green-dark:#07a15e;--green-light:#0be586;--purple:#9166cc;--purple-dark:#7d4bc3;--purple-light:#a481d5;--yellow:#ffdd57;--yellow-dark:#ffd633;--yellow-light:#ffe47a;--pink:#ff4088;--pink-dark:#ff1c72;--pink-light:#ff649e;--gray0:#f8f8f8;--gray1:#dbe1e8;--gray2:#b2becd;--gray3:#6c7983;--gray4:#454e56;--gray5:#2a2e35;--gray6:#12181b;--nav-width:4em;--font-body:\"sofia-pro\",sans-serif;--font-head:\"sofia-pro\",sans-serif;--font-code:\"attribute-mono\",monospace;--font-size:20px;--max-width-bp:768px;--orange-pink:linear-gradient(to bottom right,var(--orange-light),var(--orange-dark) 85%);--green-grad:linear-gradient(to bottom right,var(--green-light),var(--green-dark) 85%);--background:var(--gray6);--text-color:var(--gray2);--h-color:#fff;--nav-shadow:4px 0 10px -3px #010101;--card-shadow:0 4px 8px rgba(0,0,0,0.38);--toc-shadow:rgba(0,0,0,0.7) 0px 10px 20px 0px;--nav-bg:var(--gray5);--tag-bg:var(--gray4);--code-bg:#22262f;--card-bg:var(--gray5);--overlay-bg:rgba(0,0,0,0.9);--h-border:2px dashed var(--nav-bg);--nav-border:2px dashed var(--text-color);--card-radius:0.25em;transition: all .3s ease\r\n\r\n.container {\r\n    background: var(--background);\r\n    color: var(--text-color);\r\n    margin: 0;\r\n    font-family: var(--font-body);\r\n    font-size: var(--font-size);\r\n    display: flex;\r\n    min-height: 100vh;\r\n    flex-direction: column\r\n}\r\n\r\n.tag {\r\n    display: inline-block;\r\n    border-radius: 3px;\r\n    padding: .2em .5em .3em;\r\n    border-radius: 2px;\r\n    background: var(--tag-bg);\r\n    color: var(--text-color);\r\n    font-weight: 600;\r\n    margin: .25em .1em\r\n}\r\n\r\nh1.tag {\r\n    margin-left: 0;\r\n    margin-right: 0\r\n}\r\n\r\n.tag-sm {\r\n    font-size: .7em;\r\n    display: inline-block;\r\n    letter-spacing: .15ch;\r\n    font-weight: 400\r\n}\r\n\r\n.tag-lg {\r\n    font-size: 1.2em;\r\n    border-radius: 4px\r\n}\r\n\r\n.tag-bg {\r\n    background: var(--background)\r\n}\r\n\r\n.tag-green,.tag-pro {\r\n    background: var(--green);\r\n    color: #fff\r\n}\r\n\r\n.tag-purple {\r\n    background: var(--purple);\r\n    color: #fff\r\n}\r\n\r\n.tag-contrast {\r\n    background: var(--text-color);\r\n    color: var(--background)\r\n}\r\n\r\n.tag-0 {\r\n  color: #313244;\r\n    background: #adecf3\r\n}\r\n.tag-1 {\r\n    background: #f0db4f;\r\n    color: #000\r\n}\r\n\r\n\r\n.tag-2 {\r\n    background: #2775c3;\r\n    color: #fff\r\n}\r\n\r\n.tag-3 {\r\n    background: #dc0530;\r\n    color: #fff\r\n}\r\n\r\n.tag-4 {\r\n    background: #ffcb2b;\r\n    color: #12181a\r\n}\r\n\r\n.tag-5 {\r\n    background: #41b883;\r\n    color: #35495e\r\n}\r\n\r\n.tag-6 {\r\n    background: var(--pink);\r\n    color: var(--gray5)\r\n}\r\n\r\n.tag-7 {\r\n    background: #90c53f;\r\n    color: #46483d\r\n}\r\n\r\n.tag-8 {\r\n    background: var(--blue);\r\n    color: #fff\r\n}\r\n\r\n.tag-9 {\r\n    background: #54c5f8;\r\n    color: #003b6c\r\n}\r\n\r\n.tag-10 {\r\n    background: #33a668;\r\n    color: #f8d845\r\n}\r\n\r\n.tag-11 {\r\n    background: #a4c34a;\r\n    color: #fff\r\n}\r\n\r\n.tag-12 {\r\n    color: #fff;\r\n    background: #6675e0\r\n}\r\n\r\n.tag-13 {\r\n    color: #fff;\r\n    background: var(--purple-light)\r\n}\r\n\r\n.tag-14 {\r\n    color: #ffda5d;\r\n    background: #3879ab\r\n}\r\n\r\n.tag-15 {\r\n    color: #fff;\r\n    background: #ff3e00\r\n}\r\n\r\n.tag-16 {\r\n    color: #00d8ff;\r\n    background: #222\r\n}\r\n\r\n.tag-17 {\r\n    color: #fff;\r\n    background: #000\r\n}\r\n\r\n.tag-minimum-viable-product,.tag-mvp {\r\n    color: #fff;\r\n    background-image: linear-gradient(90deg,#ff8901,#db1d5f);\r\n    font-weight: 700\r\n}\r\n\r\n.tag-18 {\r\n    background: #313244;\r\n    color: #4a8afc\r\n}\r\n\r\n.tag-19 {\r\n    color: #e0234e;\r\n    background: #000\r\n}\r\n\r\n.tag-20 {\r\n    color: #fff;\r\n    background: #e10097\r\n}\r\n\r\n`;\r\nreturn (\r\n  <>\r\n    <Wrapper class=\"container\">\r\n      {post3daySorted.length > 0 &&\r\n        post3daySorted\r\n          .filter((item, index) => index <= 20)\r\n          .map((item, index) => (\r\n            <a href={`https://near.social/?hashtag=${item[0]}`}>\r\n              <span className={`tag tag-${index} tag-lg`}>\r\n                {item[0].replace(\"#\", \"\")}\r\n              </span>\r\n            </a>\r\n          ))}\r\n    </Wrapper>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kurodenjiro.near/widget/trending3days", "fact_widget_deployments_id": "592bc280d23ac1f2ace1f4db2341f782", "inserted_timestamp": "2023-12-04T18:31:12.933Z", "modified_timestamp": "2023-12-20T03:22:11.422Z", "__row_index": 2}