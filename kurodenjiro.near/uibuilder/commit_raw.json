{"tx_hash": "CsNehbTtsJKLo282EXZk6d7ncD6HPD5Hap9waiTWNnCJ", "action_id_social": "7AurxNgRrkMienJzuPXjBjR7HzbMXSLhXj4avZUa7JCy-0-widget", "block_id": 105295196, "block_timestamp": "2023-11-09T12:57:27.188Z", "signer_id": "kurodenjiro.near", "widget_name": "uibuilder", "source_code": "State.init({\r\n  blockList: {},\r\n  openModalBlock: false,\r\n  clickedModalBlock: false,\r\n  clientName: props.clientName ? props.clientName : \"\",\r\n  clientId: props.clientId ? props.clientId : null,\r\n  showModalClient: false,\r\n  selectBlock,\r\n  selectPositionBlock,\r\n  widgetUrl,\r\n  widgetProps,\r\n  widgetName: \"\",\r\n  widgetLogo: [],\r\n  name: \"\",\r\n  description: \"\",\r\n  website: \"\",\r\n  image: {\r\n    ipfs_cid: \"\",\r\n  },\r\n  exportList,\r\n  clicked: false,\r\n  export: false,\r\n  img: null,\r\n  tags,\r\n  choose,\r\n  blockWidgetPattern,\r\n});\r\n\r\nconst addBlock = (widgetUrl, widgetProps) => {\r\n  const blockList = state.blockList;\r\n  const id = Date.now();\r\n  const block = {\r\n    [id]: {\r\n      widgetUrl: widgetUrl,\r\n      props: widgetProps || {},\r\n      type: \"block\",\r\n    },\r\n  };\r\n  Object.assign(blockList, block);\r\n  State.update({ blockList: blockList, openModalBlock: false });\r\n};\r\nconst selectWidget = (widgetUrl) => {\r\n  if (state.selectBlock) {\r\n    const blockList = state.blockList;\r\n    const selectBlock = state.selectBlock;\r\n    const block = {\r\n      [\"block-\" + state.selectPositionBlock]: {\r\n        widgetUrl: widgetUrl,\r\n        props: widgetProps || {},\r\n        type: \"block\",\r\n      },\r\n    };\r\n    Object.assign(blockList[selectBlock], block);\r\n    console.log(blockList);\r\n    State.update({ blockList: blockList, openModalBlock: false });\r\n  } else {\r\n    addBlock(widgetUrl, {});\r\n  }\r\n  State.update({ selectBlock: null, selectPositionBlock: null });\r\n};\r\nconst selectLayout = (layoutType) => {\r\n  const blockList = state.blockList;\r\n  const id = Date.now();\r\n  const block = {\r\n    [id]: { layoutType: layoutType, type: \"layout\" },\r\n  };\r\n  Object.assign(blockList, block);\r\n  State.update({ blockList: blockList, openModalBlock: false });\r\n};\r\nconst removeBlock = (blockId) => {\r\n  const blockList = state.blockList;\r\n  delete blockList[blockId];\r\n  State.update({ blockList: blockList });\r\n};\r\nconst removeBlockLayout = (blockId, PositionBlock) => {\r\n  const blockList = state.blockList;\r\n  delete blockList[blockId][PositionBlock];\r\n  State.update({ blockList: blockList });\r\n};\r\nconst openModalBlock = (e, type) => {\r\n  if (type == \"show\") {\r\n    State.update({ openModalBlock: true, clicked: false });\r\n  }\r\n  if (type == \"close\") {\r\n    State.update({ selectBlock: null, selectPositionBlock: null });\r\n    State.update({ openModalBlock: false });\r\n  }\r\n};\r\n\r\nconst loadWidgetList = () => {\r\n  const exportListData = Social.get(\r\n    `${context.accountId}/magicbuild/widgetList`\r\n  );\r\n  if (exportListData) {\r\n    const exportList = JSON.parse(exportListData);\r\n    State.update({ exportList: exportList });\r\n  }\r\n};\r\n\r\nloadWidgetList();\r\n\r\nconst onInputChangeClientName = ({ target }) => {\r\n  State.update({ clientName: target.value });\r\n  State.update({ clicked: false });\r\n};\r\nconst showModal = (e, type) => {\r\n  if (type == \"show\") {\r\n    State.update({ displayModal: true, clicked: false });\r\n  }\r\n  if (type == \"close\") {\r\n    State.update({ displayModal: false });\r\n  }\r\n};\r\nconst showModalClient = (e, type) => {\r\n  if (type == \"show\") {\r\n    State.update({ showModalClient: true, clicked: false });\r\n  }\r\n  if (type == \"close\") {\r\n    State.update({ showModalClient: false });\r\n  }\r\n};\r\nconst saveClient = (e) => {\r\n  if (!state.clicked) {\r\n    State.update({ clicked: true });\r\n    if (state.clientName.length < 5) {\r\n      State.update({\r\n        error: \"Name requires more than 5 characters\",\r\n      });\r\n    } else {\r\n      const saveData = {\r\n        magicbuild: {\r\n          blockList: blockList,\r\n        },\r\n      };\r\n      Social.set(saveData, {\r\n        force: true,\r\n        onCommit: () => {\r\n          State.update({ displayModal: false });\r\n        },\r\n        onCancel: () => {},\r\n      });\r\n    }\r\n  }\r\n};\r\nconst loadData = () => {\r\n  const widgetListGet = Social.get(\r\n    `${context.accountId}/magicbuild/widgetList`\r\n  );\r\n  if (widgetListGet) {\r\n    const widgetList = JSON.parse(widgetListGet);\r\n    const widgetLogo = {};\r\n    for (const widget of widgetList) {\r\n      const logoWidgets = Social.get(\r\n        `${context.accountId}/widget/${widget.widgetName}/metadata/image/ipfs_cid`\r\n      );\r\n      const widgetName = widget.widgetName;\r\n      if (logoWidgets) Object.assign(widgetLogo, { [widgetName]: logoWidgets });\r\n    }\r\n    State.update({ widgetLogo: widgetLogo });\r\n    State.update({ clientList: clientListData });\r\n  }\r\n  const blockWidgetPattern = {\r\n    button1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0001\",\r\n      props: \"button\",\r\n      type: \"block\",\r\n    },\r\n    button2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0002\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0003\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button4: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0004\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button5: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0005\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button6: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0006\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button7: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0007\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button8: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0008\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button9: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0009\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button10: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0010\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    button11: {\r\n      widgetUrl: \"marketplacebos.near/widget/Button.ButtonP.Button0011\",\r\n      props: { text: \"button\" },\r\n      type: \"block\",\r\n    },\r\n    cbd1: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0001\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    cbd2: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0002\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    cbd3: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0003\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    cbd4: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0004\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    cbd5: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0005\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    cbd6: {\r\n      widgetUrl: \"marketplacebos.near/widget/CB.CBP.CB0006\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0001\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0002\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0003\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card4: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0004\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card5: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0005\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    card6: {\r\n      widgetUrl: \"marketplacebos.near/widget/Card.CardP.Card0006\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    input1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0001\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    input2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0002\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    input3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0003\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Loader.LoaderP.Loader0001\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Loader.LoaderP.Loader0002\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Loader.LoaderP.Loader0003\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader4: {\r\n      widgetUrl: \"marketplacebos.near/widget/Loader.LoaderP.Loader0004\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader5: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0005\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader6: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0006\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader7: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0007\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    loader8: {\r\n      widgetUrl: \"marketplacebos.near/widget/Input.InputP.Input0008\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    radio1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Radio.RadioP.Radio0001\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    radio2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Radio.RadioP.Radio0002\",\r\n      props: {},\r\n      type: \"block\",\r\n    },\r\n    pattern1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0001\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0002\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0003\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern4: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0004\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern5: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0005\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern6: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0006\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    pattern7: {\r\n      widgetUrl: \"marketplacebos.near/widget/Pattern.PatternP.Pattern0006\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    chart1: {\r\n      widgetUrl: \"marketplacebos.near/widget/Chart.ChartP.Chart0001\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    chart2: {\r\n      widgetUrl: \"marketplacebos.near/widget/Chart.ChartP.Chart0002\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    chart3: {\r\n      widgetUrl: \"marketplacebos.near/widget/Chart.ChartP.Chart0003\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n    chart4: {\r\n      widgetUrl: \"marketplacebos.near/widget/Chart.ChartP.Chart0004\",\r\n      props: { text: \"text\" },\r\n      type: \"block\",\r\n    },\r\n  };\r\n  State.update({ blockWidgetPattern: blockWidgetPattern });\r\n};\r\nloadData();\r\nconst onInputChangeWidgetUrl = (e) => {\r\n  State.update({ widgetUrl: e.target.value });\r\n};\r\nconst onInputChangeWidgetProps = (e) => {\r\n  State.update({ widgetPropst: e.target.value });\r\n};\r\n\r\nconst onInputChangeWidgetName = ({ target }) => {\r\n  State.update({ widgetName: target.value });\r\n  State.update({ clicked: false });\r\n  State.update({ export: false });\r\n};\r\nconst onInputChangeWidgetTitle = ({ target }) => {\r\n  State.update({ name: target.value });\r\n};\r\nconst onInputChangeWidgetDescription = ({ target }) => {\r\n  State.update({ description: target.value });\r\n};\r\nconst onInputChangeWidgetWebsite = ({ target }) => {\r\n  State.update({ website: target.value });\r\n};\r\nconst uploadFileUpdateState = (body) => {\r\n  asyncFetch(\"https://ipfs.near.social/add\", {\r\n    method: \"POST\",\r\n    headers: { Accept: \"application/json\" },\r\n    body,\r\n  }).then((res) => {\r\n    const cid = res.body.cid;\r\n    State.update({ image: { ipfs_cid: cid } });\r\n    State.update({ img: { cid } });\r\n  });\r\n};\r\n\r\nconst filesOnChange = (files) => {\r\n  if (files) {\r\n    State.update({ img: { uploading: true, cid: null } });\r\n    uploadFileUpdateState(files[0]);\r\n  }\r\n};\r\nconst taggedWidgets = Social.keys(`*/widget/*/metadata/tags/*`, \"final\");\r\nlet tags = [];\r\nif (Object.keys(taggedWidgets)) {\r\n  Object.keys(taggedWidgets).forEach((item) => {\r\n    if (taggedWidgets[item].widget) {\r\n      if (Object.keys(taggedWidgets[item].widget).length > 0) {\r\n        Object.keys(taggedWidgets[item].widget).forEach((item1) => {\r\n          if (taggedWidgets[item].widget[item1].metadata.tags) {\r\n            if (\r\n              Object.keys(taggedWidgets[item].widget[item1].metadata.tags)\r\n                .length > 0\r\n            ) {\r\n              Object.keys(\r\n                taggedWidgets[item].widget[item1].metadata.tags\r\n              ).forEach((tag) => {\r\n                tags.push(tag);\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nState.update({ tags: tags });\r\nconst openModal = () => {\r\n  State.update({ clicked: false });\r\n  State.update({ export: false });\r\n};\r\n\r\nconst exportForm = () => {\r\n  if (!state.clicked) {\r\n    State.update({ clicked: true });\r\n    const exportListData = Social.get(\r\n      `${context.accountId}/magicbuild/widgetList`\r\n    );\r\n    const exporttList = JSON.parse(exportListData) || [];\r\n    const isExist = false;\r\n    exporttList.forEach((item, index) => {\r\n      if (item.widgetName == state.widgetName) {\r\n        exporttList[index].widgetName = state.widgetName;\r\n        isExist = true;\r\n      }\r\n    });\r\n    if (!isExist) {\r\n      exporttList.push({ widgetName: state.widgetName });\r\n    }\r\n    const exportSource = \"return <>\";\r\n    for (const blockId of Object.keys(state.blockList)) {\r\n      console.log(state.blockList[blockId]);\r\n      if (state.blockList[blockId].type == \"block\") {\r\n        exportSource += `<Widget src={\"${\r\n          state.blockList[blockId].widgetUrl\r\n        }\"} props={JSON.parse(${JSON.stringify(\r\n          state.blockList[blockId].props\r\n        )})} />`;\r\n      }\r\n      if (state.blockList[blockId].type == \"layout\") {\r\n        if (state.blockList[blockId].layoutType == \"50-50\") {\r\n          exportSource += `<div class=\"row mb-3\">`;\r\n          exportSource += `<div class=\"col-md-6 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-1\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-1\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `<div class=\"col-md-6 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-2\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-2\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `</div>`;\r\n        }\r\n        if (state.blockList[blockId].layoutType == \"33-66\") {\r\n          exportSource += `<div class=\"row mb-3\">`;\r\n          exportSource += `<div class=\"col-md-3 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-1\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-1\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `<div class=\"col-md-9 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-2\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-2\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>\r\n          </div>`;\r\n        }\r\n        if (state.blockList[blockId].layoutType == \"66-33\") {\r\n          exportSource += `<div class=\"row mb-3\">`;\r\n          exportSource += `<div class=\"col-md-9 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-1\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-1\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n\r\n          exportSource += `<div class=\"col-md-3 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-2\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-2\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `</div>`;\r\n        }\r\n        if (state.blockList[blockId].layoutType == \"33-33-33\") {\r\n          exportSource += `<div class=\"row mb-3\">`;\r\n          exportSource += ` <div class=\"col-md-4 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-1\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-1\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `<div class=\"col-md-4 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-2\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-2\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n\r\n          exportSource += `<div class=\"col-md-4 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-3\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-3\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `</div>`;\r\n        }\r\n        if (state.blockList[blockId].layoutType == \"25-50-25\") {\r\n          exportSource += `<div class=\"row mb-3\">`;\r\n          exportSource += ` <div class=\"col-md-3 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-1\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-1\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `<div class=\"col-md-6 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-2\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-2\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `<div class=\"col-md-3 p-2\">`;\r\n          exportSource += `<Widget src={\"${\r\n            state.blockList[blockId][\"block-3\"].widgetUrl\r\n          }\"} props={JSON.parse(${JSON.stringify(\r\n            state.blockList[blockId][\"block-3\"].props\r\n          )})} /> `;\r\n          exportSource += `</div>`;\r\n          exportSource += `</div>`;\r\n        }\r\n      }\r\n    }\r\n    exportSource += \" </>\";\r\n    console.log(state.blockList);\r\n    const data = {\r\n      widget: {\r\n        [state.widgetName]: {\r\n          \"\": exportSource,\r\n          metadata: {\r\n            name: state.name,\r\n            description: state.description,\r\n            linktree: {\r\n              website: state.website,\r\n            },\r\n            image: {\r\n              ipfs_cid: state.img.cid,\r\n            },\r\n            tags: tagsObj,\r\n          },\r\n        },\r\n      },\r\n      magicbuild: { widgetList: exporttList },\r\n    };\r\n    Social.set(data, {\r\n      force: true,\r\n      onCommit: () => {\r\n        State.update({ export: true });\r\n      },\r\n      onCancel: () => {\r\n        State.update({ clicked: false });\r\n      },\r\n    });\r\n  }\r\n};\r\nreturn (\r\n  <div class=\"container \">\r\n    {state.openModalBlock && (\r\n      <>\r\n        <div\r\n          style={{ display: \"block\" }}\r\n          className={`modal fade show`}\r\n          id=\"addBlock\"\r\n          tabindex=\"-1\"\r\n          aria-labelledby=\"addBlockLabel\"\r\n        >\r\n          <div class=\"modal-dialog modal-lg\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"addBlockLabel\">\r\n                  Choose Block\r\n                </h1>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn-close\"\r\n                  onClick={(e) => openModalBlock(e, \"close\")}\r\n                ></button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n                <ul class=\"nav nav-tabs\" role=\"tablistBlock\">\r\n                  <li class=\"nav-item\" role=\"presentation\">\r\n                    <span\r\n                      class=\"nav-link px-3 active\"\r\n                      id=\"block-list-tab\"\r\n                      data-bs-toggle=\"pill\"\r\n                      data-bs-target=\"#pills-block-list\"\r\n                      type=\"button\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"pills-block-list\"\r\n                      aria-selected=\"true\"\r\n                    >\r\n                      Block\r\n                    </span>\r\n                  </li>\r\n                  {!state.selectBlock && (\r\n                    <li class=\"nav-item\" role=\"presentation\">\r\n                      <span\r\n                        class=\"nav-link px-3 \"\r\n                        id=\"layout-tab\"\r\n                        data-bs-toggle=\"pill\"\r\n                        data-bs-target=\"#pills-layout-list\"\r\n                        type=\"button\"\r\n                        role=\"tab\"\r\n                        aria-controls=\"pills-layout-list\"\r\n                        aria-selected=\"true\"\r\n                      >\r\n                        Layout\r\n                      </span>\r\n                    </li>\r\n                  )}\r\n\r\n                  <li class=\"nav-item\" role=\"presentation\">\r\n                    <span\r\n                      class=\"nav-link px-3\"\r\n                      id=\"export-list-tab\"\r\n                      data-bs-toggle=\"pill\"\r\n                      data-bs-target=\"#pills-export-list\"\r\n                      type=\"button\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"pills-export-list\"\r\n                      aria-selected=\"true\"\r\n                    >\r\n                      Your Exported\r\n                    </span>\r\n                  </li>\r\n                  <li class=\"nav-item\" role=\"presentation\">\r\n                    <span\r\n                      class=\"nav-link px-3\"\r\n                      id=\"export-self-customize-tab\"\r\n                      data-bs-toggle=\"pill\"\r\n                      data-bs-target=\"#pills-self-customize-list\"\r\n                      type=\"button\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"pills-self-customize-list\"\r\n                      aria-selected=\"true\"\r\n                    >\r\n                      Self-customize\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n\r\n                <div class=\"tab-content\">\r\n                  <div\r\n                    class=\"tab-pane fade \"\r\n                    id={`pills-layout-list`}\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby={`pills-tab-layout-list`}\r\n                    tabindex=\"0\"\r\n                  >\r\n                    <div class=\"row m-3 overflow-auto \">\r\n                      <div class=\"col m-2\">\r\n                        <div\r\n                          class=\"card p-2 align-items-center\"\r\n                          style={{ width: \"130px\" }}\r\n                          onClick={(e) => selectLayout(\"50-50\")}\r\n                        >\r\n                          <svg\r\n                            width=\"48\"\r\n                            height=\"48\"\r\n                            viewBox=\"0 0 48 48\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            aria-hidden=\"true\"\r\n                            focusable=\"false\"\r\n                          >\r\n                            <path\r\n                              fill-rule=\"evenodd\"\r\n                              clip-rule=\"evenodd\"\r\n                              d=\"M39 12C40.1046 12 41 12.8954 41 14V34C41 35.1046 40.1046 36 39 36H9C7.89543 36 7 35.1046 7 34V14C7 12.8954 7.89543 12 9 12H39ZM39 34V14H25V34H39ZM23 34H9V14H23V34Z\"\r\n                            ></path>\r\n                          </svg>\r\n                          <div class=\"card-body p-0\">\r\n                            <span\r\n                              class=\"card-text  d-inline-block text-truncate \"\r\n                              style={{\r\n                                maxWidth: \"120px\",\r\n                                fontWeight: \"bold\",\r\n                              }}\r\n                            >\r\n                              50/50\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col m-2\">\r\n                        <div\r\n                          class=\"card p-2 align-items-center\"\r\n                          style={{ width: \"130px\" }}\r\n                          onClick={(e) => selectLayout(\"33-66\")}\r\n                        >\r\n                          <svg\r\n                            width=\"48\"\r\n                            height=\"48\"\r\n                            viewBox=\"0 0 48 48\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            aria-hidden=\"true\"\r\n                            focusable=\"false\"\r\n                          >\r\n                            <path\r\n                              fill-rule=\"evenodd\"\r\n                              clip-rule=\"evenodd\"\r\n                              d=\"M39 12C40.1046 12 41 12.8954 41 14V34C41 35.1046 40.1046 36 39 36H9C7.89543 36 7 35.1046 7 34V14C7 12.8954 7.89543 12 9 12H39ZM39 34V14H20V34H39ZM18 34H9V14H18V34Z\"\r\n                            ></path>\r\n                          </svg>\r\n                          <div class=\"card-body p-0\">\r\n                            <span\r\n                              class=\"card-text  d-inline-block text-truncate \"\r\n                              style={{\r\n                                maxWidth: \"120px\",\r\n                                fontWeight: \"bold\",\r\n                              }}\r\n                            >\r\n                              33/66\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col m-2 \">\r\n                        <div\r\n                          class=\"card p-2 align-items-center\"\r\n                          style={{ width: \"130px\" }}\r\n                          onClick={(e) => selectLayout(\"66-33\")}\r\n                        >\r\n                          <svg\r\n                            width=\"48\"\r\n                            height=\"48\"\r\n                            viewBox=\"0 0 48 48\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            aria-hidden=\"true\"\r\n                            focusable=\"false\"\r\n                          >\r\n                            <path\r\n                              fill-rule=\"evenodd\"\r\n                              clip-rule=\"evenodd\"\r\n                              d=\"M39 12C40.1046 12 41 12.8954 41 14V34C41 35.1046 40.1046 36 39 36H9C7.89543 36 7 35.1046 7 34V14C7 12.8954 7.89543 12 9 12H39ZM39 34V14H30V34H39ZM28 34H9V14H28V34Z\"\r\n                            ></path>\r\n                          </svg>\r\n                          <div class=\"card-body p-0\">\r\n                            <span\r\n                              class=\"card-text  d-inline-block text-truncate \"\r\n                              style={{\r\n                                maxWidth: \"120px\",\r\n                                fontWeight: \"bold\",\r\n                              }}\r\n                            >\r\n                              66/33\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col m-2 \">\r\n                        <div\r\n                          class=\"card p-2 align-items-center\"\r\n                          style={{ width: \"130px\" }}\r\n                          onClick={(e) => selectLayout(\"33-33-33\")}\r\n                        >\r\n                          <svg\r\n                            width=\"48\"\r\n                            height=\"48\"\r\n                            viewBox=\"0 0 48 48\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            aria-hidden=\"true\"\r\n                            focusable=\"false\"\r\n                          >\r\n                            <path\r\n                              fill-rule=\"evenodd\"\r\n                              d=\"M41 14a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h30a2 2 0 0 0 2-2V14zM28.5 34h-9V14h9v20zm2 0V14H39v20h-8.5zm-13 0H9V14h8.5v20z\"\r\n                            ></path>\r\n                          </svg>\r\n                          <div class=\"card-body p-0\">\r\n                            <span\r\n                              class=\"card-text  d-inline-block text-truncate \"\r\n                              style={{\r\n                                maxWidth: \"120px\",\r\n                                fontWeight: \"bold\",\r\n                              }}\r\n                            >\r\n                              33/33/33\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"col m-2 \">\r\n                        <div\r\n                          class=\"card p-2 align-items-center\"\r\n                          style={{ width: \"130px\" }}\r\n                          onClick={(e) => selectLayout(\"25-50-25\")}\r\n                        >\r\n                          <svg\r\n                            width=\"48\"\r\n                            height=\"48\"\r\n                            viewBox=\"0 0 48 48\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            aria-hidden=\"true\"\r\n                            focusable=\"false\"\r\n                          >\r\n                            <path\r\n                              fill-rule=\"evenodd\"\r\n                              d=\"M41 14a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h30a2 2 0 0 0 2-2V14zM31 34H17V14h14v20zm2 0V14h6v20h-6zm-18 0H9V14h6v20z\"\r\n                            ></path>\r\n                          </svg>\r\n                          <div class=\"card-body p-0\">\r\n                            <span\r\n                              class=\"card-text  d-inline-block text-truncate \"\r\n                              style={{\r\n                                maxWidth: \"120px\",\r\n                                fontWeight: \"bold\",\r\n                              }}\r\n                            >\r\n                              25/50/25\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    class=\"tab-pane fade  \"\r\n                    id={`pills-export-list`}\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby={`pills-export-list`}\r\n                    tabindex=\"0\"\r\n                  >\r\n                    <div\r\n                      class=\"row m-3 overflow-auto \"\r\n                      style={{ height: \"600px\" }}\r\n                    >\r\n                      {state.exportList &&\r\n                        state.exportList.map((widget, index) => (\r\n                          <div class=\"col m-2\">\r\n                            <div\r\n                              class=\"card p-2 align-items-center\"\r\n                              style={{ width: \"130px\", height: \"180px\" }}\r\n                              onClick={(e) =>\r\n                                selectWidget(\r\n                                  `${context.accountId}/widget/${widget.widgetName}`\r\n                                )\r\n                              }\r\n                            >\r\n                              <img\r\n                                src={\r\n                                  state.widgetLogo[widget.widgetName]\r\n                                    ? `https://ipfs.near.social/ipfs/${\r\n                                        state.widgetLogo[widget.widgetName]\r\n                                      }`\r\n                                    : \"https://ipfs.near.social/ipfs/bafkreido7gsk4dlb63z3s5yirkkgrjs2nmyar5bxyet66chakt2h5jve6e\"\r\n                                }\r\n                                class=\"card-img-top\"\r\n                                alt=\"...\"\r\n                              />\r\n                              <div class=\"card-body p-0\">\r\n                                <span\r\n                                  class=\"card-text  d-inline-block text-truncate \"\r\n                                  style={{\r\n                                    maxWidth: \"120px\",\r\n                                    fontWeight: \"bold\",\r\n                                  }}\r\n                                >\r\n                                  {widget.widgetName}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    class=\"tab-pane fade \"\r\n                    id={`pills-self-customize-list`}\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby={`pills-tab-self-customize-list`}\r\n                    tabindex=\"0\"\r\n                  >\r\n                    <div class=\"row m-3\">\r\n                      <div class=\"form-group col-md-12 \">\r\n                        <div class=\"card mb-2\">\r\n                          <div class=\"card-header\">Block</div>\r\n                          <div class=\"card-body\">\r\n                            <div class=\"form-group\">\r\n                              <label>Widget Url:</label>\r\n                              <input\r\n                                class=\"form-control\"\r\n                                value={state.widgetUrl}\r\n                                onChange={(e) => onInputChangeWidgetUrl(e)}\r\n                              />\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                              <label>Props:</label>\r\n                              <input\r\n                                class=\"form-control\"\r\n                                value={state.widgetProps}\r\n                                onChange={(e) => onInputChangeWidgetProps(e)}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"card\">\r\n                          <div class=\"card-header\" id=\"headingOne\">\r\n                            <h5 class=\"mb-0\">\r\n                              <button class=\"btn btn-link\">Preview</button>\r\n                            </h5>\r\n                          </div>\r\n\r\n                          <div id=\"collapseOne\" class=\"collapse show\">\r\n                            <div class=\"card-body\">\r\n                              {state.widgetUrl ? (\r\n                                <Widget\r\n                                  src={state.widgetUrl}\r\n                                  props={state.props || null}\r\n                                />\r\n                              ) : (\r\n                                \"\"\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"text-mute pt-2\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={(e) => {\r\n                              addBlock(state.widgetUrl, state.widgetProps);\r\n                            }}\r\n                            class=\"btn btn-primary\"\r\n                          >\r\n                            Add\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-secondary\"\r\n                  onClick={(e) => openModalBlock(e, \"close\")}\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"modal-backdrop fade show\"></div>\r\n      </>\r\n    )}\r\n    <div class=\"row mb-3\">\r\n      <div class=\"form-group col-md-9 border rounded p-3 border-2\">\r\n        <div>\r\n          {Object.keys(state.blockList) &&\r\n            Object.keys(state.blockList).map((blockId, index) => (\r\n              <div class=\"row border rounded p-3 border-2 m-2 \">\r\n                {state.blockList[blockId].type == \"block\" && (\r\n                  <>\r\n                    <Widget\r\n                      src={state.blockList[blockId].widgetUrl}\r\n                      props={state.blockList[blockId].props}\r\n                    />\r\n                  </>\r\n                )}\r\n                {state.blockList[blockId].type == \"layout\" && (\r\n                  <>\r\n                    <div class=\"row pb-2\">\r\n                      <div class=\"col-sm-11 \">\r\n                        <h6>\r\n                          <span class=\"text-info\">\r\n                            {state.blockList[blockId].layoutType}\r\n                          </span>\r\n                        </h6>\r\n                      </div>\r\n                      <div class=\"col-sm-1 \">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={(e) => removeBlock(blockId)}\r\n                          class=\"btn-close\"\r\n                        ></button>\r\n                      </div>\r\n                    </div>\r\n                    {state.blockList[blockId].layoutType == \"50-50\" && (\r\n                      <div class=\"row align-items-center\">\r\n                        <div class=\"col-sm-6 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-1\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-1\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-1\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-1\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-1\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 1,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-6 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-2\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-2\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-2\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-2\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-2\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 2,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {state.blockList[blockId].layoutType == \"33-66\" && (\r\n                      <div class=\"row align-items-center\">\r\n                        <div class=\"col-sm-3 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-1\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-1\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-1\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-1\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-1\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 1,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-9 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-2\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-2\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-2\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-2\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-2\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 2,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {state.blockList[blockId].layoutType == \"66-33\" && (\r\n                      <div class=\"row align-items-center\">\r\n                        <div class=\"col-sm-9 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-1\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-1\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-1\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-1\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-1\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 1,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-3 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-2\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-2\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-2\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-2\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-2\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 2,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {state.blockList[blockId].layoutType == \"33-33-33\" && (\r\n                      <div class=\"row align-items-center\">\r\n                        <div class=\"col-sm-4 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-1\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-1\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-1\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-1\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-1\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 1,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-4 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-2\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-2\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-2\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-2\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-2\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 2,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-4 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-3\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-3\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-3\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-3\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-3\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 3,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {state.blockList[blockId].layoutType == \"25-50-25\" && (\r\n                      <div class=\"row align-items-center\">\r\n                        <div class=\"col-sm-3 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-1\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-1\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-1\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-1\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-1\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 1,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-6 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-2\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-2\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-2\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-2\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-2\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 2,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"col-sm-3 border rounded p-3 border-2  \">\r\n                          {state.blockList[blockId][\"block-3\"] ? (\r\n                            <>\r\n                              <div class=\"row pb-2\">\r\n                                <div class=\"col-sm-11 \">\r\n                                  <h6>\r\n                                    <span class=\"text-info\">\r\n                                      {\r\n                                        state.blockList[blockId][\"block-3\"]\r\n                                          .widgetUrl\r\n                                      }\r\n                                    </span>\r\n                                  </h6>\r\n                                </div>\r\n                                <div class=\"col-sm-1 \">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) =>\r\n                                      removeBlockLayout(blockId, \"block-3\")\r\n                                    }\r\n                                    class=\"btn-close\"\r\n                                  ></button>\r\n                                </div>\r\n                              </div>\r\n                              <Widget\r\n                                src={\r\n                                  state.blockList[blockId][\"block-3\"].widgetUrl\r\n                                }\r\n                                props={\r\n                                  state.blockList[blockId][\"block-3\"].props\r\n                                }\r\n                              />\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                openModalBlock(e, \"show\");\r\n                                State.update({\r\n                                  selectBlock: blockId,\r\n                                });\r\n                                State.update({\r\n                                  selectPositionBlock: 3,\r\n                                });\r\n                              }}\r\n                              class=\"btn btn-outline-primary btn-lg btn-block\"\r\n                            >\r\n                              Add Block +\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={(e) => openModalBlock(e, \"show\")}\r\n          class=\"btn btn-outline-primary btn-lg btn-block\"\r\n        >\r\n          Add Block +\r\n        </button>\r\n      </div>\r\n      <div class=\"form-group col-md-3 \">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Custom</div>\r\n          <div class=\"card-body\">\r\n            <ul class=\"nav nav-tabs\" role=\"tablistBlock\">\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <span\r\n                  class=\"nav-link px-3 active\"\r\n                  id=\"export-button\"\r\n                  data-bs-toggle=\"pill\"\r\n                  data-bs-target=\"#export-button\"\r\n                  type=\"button\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"export-button\"\r\n                  aria-selected=\"true\"\r\n                >\r\n                  Export to Widget\r\n                </span>\r\n              </li>\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <span\r\n                  class=\"nav-link px-3 \"\r\n                  id=\"layout-tab-home\"\r\n                  data-bs-toggle=\"pill\"\r\n                  data-bs-target=\"#pills-layout-list\"\r\n                  type=\"button\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"pills-layout-list\"\r\n                  aria-selected=\"true\"\r\n                >\r\n                  CSS\r\n                </span>\r\n              </li>\r\n            </ul>\r\n\r\n            <div class=\"tab-content\">\r\n              <div\r\n                class=\"tab-pane fade show active \"\r\n                id={`export-button`}\r\n                role=\"tabpanel\"\r\n                aria-labelledby={`export-buttont`}\r\n                tabindex=\"0\"\r\n              >\r\n                <div class=\"row m-1\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary btn-block m-1\"\r\n                    data-bs-toggle=\"modal\"\r\n                    data-bs-target={`#export-${Date.now()}`}\r\n                    onClick={openModal}\r\n                  >\r\n                    Export\r\n                  </button>\r\n                  <div\r\n                    class=\"modal fade\"\r\n                    id={`export-${Date.now()}`}\r\n                    tabindex=\"-2\"\r\n                    aria-labelledby=\"exportLabel\"\r\n                    aria-hidden=\"true\"\r\n                  >\r\n                    <div class=\"modal-dialog\">\r\n                      <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n                          <h1 class=\"modal-title fs-5\" id=\"exportLabel\">\r\n                            Export Widget\r\n                          </h1>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn-close\"\r\n                            data-bs-dismiss=\"modal\"\r\n                            aria-label=\"Close\"\r\n                          ></button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                          {state.export && state.widgetName ? (\r\n                            <>\r\n                              <div class=\"alert alert-primary\" role=\"alert\">\r\n                                <a\r\n                                  href={`https://near.social/${context.accountId}/widget/${state.widgetName}`}\r\n                                >\r\n                                  {`https://near.social/${context.accountId}/widget/${state.widgetName}`}\r\n                                </a>\r\n                              </div>\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <div class=\"form-group\">\r\n                                <label>Widget URL</label>\r\n                                <input\r\n                                  class=\"form-control\"\r\n                                  defaultValue={state.widgetName || \"\"}\r\n                                  onChange={(e) => onInputChangeWidgetName(e)}\r\n                                />\r\n                                <small class=\"form-text text-muted\">\r\n                                  A new widget configured with the form will be\r\n                                  created.\r\n                                </small>\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label>Name</label>\r\n                                <input\r\n                                  class=\"form-control\"\r\n                                  defaultValue={state.name || \"\"}\r\n                                  onChange={(e) => onInputChangeWidgetTitle(e)}\r\n                                />\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label>Description</label>\r\n                                <input\r\n                                  class=\"form-control\"\r\n                                  defaultValue={state.description || \"\"}\r\n                                  onChange={(e) =>\r\n                                    onInputChangeWidgetDescription(e)\r\n                                  }\r\n                                />\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label></label>\r\n                                <Files\r\n                                  multiple={false}\r\n                                  accepts={[\"image/*\"]}\r\n                                  minFileSize={1}\r\n                                  clickable\r\n                                  className=\"btn btn-outline-primary\"\r\n                                  onChange={filesOnChange}\r\n                                >\r\n                                  {state.img?.uploading ? (\r\n                                    <> Uploading </>\r\n                                  ) : (\r\n                                    \"Upload Logo Application\"\r\n                                  )}\r\n                                </Files>\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label></label>\r\n                                {state.img && !state.img.uploading ? (\r\n                                  <img\r\n                                    class=\"rounded w-50 h-50\"\r\n                                    style={{ objectFit: \"cover\" }}\r\n                                    src={`https://ipfs.near.social/ipfs/${state.img.cid}`}\r\n                                    alt=\"upload preview\"\r\n                                  />\r\n                                ) : (\r\n                                  \"\"\r\n                                )}\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label>Website</label>\r\n                                <input\r\n                                  class=\"form-control\"\r\n                                  defaultValue={state.website || \"\"}\r\n                                  onChange={(e) =>\r\n                                    onInputChangeWidgetWebsite(e)\r\n                                  }\r\n                                />\r\n                              </div>\r\n                              <div class=\"form-group pt-2\">\r\n                                <label>Tags</label>\r\n\r\n                                <Typeahead\r\n                                  options={state.tags || []}\r\n                                  multiple\r\n                                  onChange={(value) => {\r\n                                    State.update({ choose: value });\r\n                                  }}\r\n                                  placeholder=\"Input tag...\"\r\n                                />\r\n                              </div>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-secondary\"\r\n                            data-bs-dismiss=\"modal\"\r\n                          >\r\n                            Close\r\n                          </button>\r\n\r\n                          <button\r\n                            type=\"button\"\r\n                            disabled={state.clicked}\r\n                            onClick={exportForm}\r\n                            class=\"btn btn-primary\"\r\n                          >\r\n                            Export\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={(e) => showModalClient(e, \"show\")}\r\n                    class=\"btn btn-success btn-block m-1\"\r\n                  >\r\n                    Save Client\r\n                  </button>\r\n                  {state.showModalClient && (\r\n                    <>\r\n                      <div\r\n                        style={{ display: \"block\" }}\r\n                        className={`modal fade show`}\r\n                        id=\"createClient\"\r\n                        tabindex=\"-1\"\r\n                        aria-labelledby=\"createClientLabel\"\r\n                      >\r\n                        <div class=\"modal-dialog\">\r\n                          <div class=\"modal-content\">\r\n                            <div class=\"modal-header\">\r\n                              <h1\r\n                                class=\"modal-title fs-5\"\r\n                                id=\"createClientLabel\"\r\n                              >\r\n                                Save Client\r\n                              </h1>\r\n                              <button\r\n                                type=\"button\"\r\n                                class=\"btn-close\"\r\n                                onClick={(e) => showModalClient(e, \"close\")}\r\n                              ></button>\r\n                            </div>\r\n                            <div class=\"modal-body\">\r\n                              <div class=\"form-group\">\r\n                                <label>Name</label>\r\n                                <input\r\n                                  class=\"form-control\"\r\n                                  value={state.clientName}\r\n                                  onChange={(e) => onInputChangeClientName(e)}\r\n                                />\r\n                              </div>\r\n                              <small class=\"form-text text-muted\">\r\n                                A new Client will be created.\r\n                              </small>\r\n\r\n                              {state.error && (\r\n                                <p class=\"text-danger\" role=\"alert\">\r\n                                  {state.error}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                            <div class=\"modal-footer\">\r\n                              <button\r\n                                type=\"button\"\r\n                                class=\"btn btn-secondary\"\r\n                                onClick={(e) => showModalClient(e, \"close\")}\r\n                              >\r\n                                Close\r\n                              </button>\r\n                              <button\r\n                                type=\"button\"\r\n                                disabled={state.clicked}\r\n                                onClick={(e) => saveClient(e)}\r\n                                class=\"btn btn-primary\"\r\n                              >\r\n                                Save\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"modal-backdrop fade show\"></div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kurodenjiro.near/widget/uibuilder", "fact_widget_deployments_id": "50d7f50d8d1bc4a65fb78b2e9f49d859", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}