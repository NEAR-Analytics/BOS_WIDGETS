{"tx_hash": "FrLAwzawiQ2bcharB3FfRPuoFv373PRpt71Q7mCTT4Ru", "action_id_social": "14ahayaw3zwbjQwS3DkVQqkgXTs9YVVvEZ47CbvzCQMm-0-widget", "block_id": 107565942, "block_timestamp": "2023-12-10T03:01:24.743Z", "signer_id": "mohaa.near", "widget_name": "create", "source_code": "// if (\n//   !props.accountId ||\n//   !context.accountId ||\n//   context.accountId === props.accountId\n// ) {\n//   return \"\";\n// }\nconst datas = Social.keys(`${context.accountId}`, undefined, {\n  values_only: true,\n});\nconsole.log(datas);\nconst connectEdge = Social.keys(\n  `${context.accountId}/graph/connect/${props.accountId}`,\n  undefined,\n  {\n    values_only: true,\n  }\n);\n\nconst inverseEdge = Social.keys(\n  `${props.accountId}/graph/connect/${context.accountId}`,\n  undefined,\n  {\n    values_only: true,\n  }\n);\n\nconst loading = connectEdge === null || inverseEdge === null;\nconst isConnected = Object.keys(connectEdge || {}).length > 0;\nconst isInverse = Object.keys(inverseEdge || {}).length > 0;\nconst type = connect ? \"disconnect\" : \"connect\";\n\nconst datum = {\n  graph: { connect: { [props.accountId]: isConnected ? null : \"\" } },\n  index: {\n    graph: JSON.stringify({\n      key: \"connect\",\n      value: {\n        type,\n        accountId: props.accountId,\n      },\n    }),\n    notify: JSON.stringify({\n      key: props.accountId,\n      value: {\n        type,\n      },\n    }),\n  },\n};\n\nState.init({\n  dropName: \"\",\n  dropSymbol: \"\",\n  dropDescription: \"\",\n  bannerImage:\n    \"https://img.freepik.com/free-photo/abstract-colorful-splash-3d-background-generative-ai-background_60438-2493.jpg?size=626&ext=jpg&ga=GA1.1.844735360.1701308085&semt=sph\",\n  profileImage:\n    \"https://t3.ftcdn.net/jpg/03/91/19/22/240_F_391192211_2w5pQpFV1aozYQhcIw3FqA35vuTxJKrB.jpg\",\n  network: \"\",\n  dropURL: \"\",\n  maxSupply: \"\",\n  walletAddress: \"\",\n  saleRoyalty: \"\",\n  priceByEther: \"\",\n});\nconst data = {\n  formData: {\n    bannerImage: `ipfs://${state.bannerImage.cid}`,\n    profileImage: `ipfs://${state.profileImage.cid}`,\n    network: state.network,\n    dropName: state.dropName,\n    dropSymbol: state.dropSymbol,\n    dropURL: state.dropURL,\n    dropDescription: state.dropDescription,\n    maxSupply: state.maxSupply,\n    walletAddress: state.walletAddress,\n    saleRoyalty: state.saleRoyalty,\n    priceByEther: state.priceByEther,\n  },\n};\nconst submitForm = (e) => {\n  e.preventDefault();\n  const metadata = {\n    bannerImage: `ipfs://${state.bannerImage.cid}`,\n    profileImage: `ipfs://${state.profileImage.cid}`,\n    network: state.network,\n    dropName: state.dropName,\n    dropSymbol: state.dropSymbol,\n    dropURL: state.dropURL,\n    dropDescription: state.dropDescription,\n    maxSupply: state.maxSupply,\n    walletAddress: state.walletAddress,\n    saleRoyalty: state.saleRoyalty,\n    priceByEther: state.priceByEther,\n  };\n\n  asyncFetch(\"https://ipfs.near.social/add\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n    },\n    body: metadata,\n  })\n    .then((res) => {\n      if (res && res.body && res.body.cid) {\n        const cid = res.body.cid;\n        const Id = Math.floor(Math.random() * (9999999 - 100000 + 1) + 100000);\n        console.log(\"in the promise\", res, Id);\n      } else {\n        console.error(\"Unexpected response structure:\", res);\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error during form submission:\", error);\n    });\n};\n\nconst profilebanner = {\n  position: \"relative\",\n  overflow: \"hidden\",\n};\n\nconst bannerimage = {\n  width: \"100%\",\n  height: \"auto\",\n  display: \"block\",\n};\n\nconst profilecontainer = {\n  position: \"relative\",\n  top: \"30%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n};\n\nconst profileimage = {\n  borderRadius: \"50%\",\n  width: \"150px\" /* Adjust the width as needed */,\n  height: \"150px\" /* Adjust the height as needed */,\n  objectFit: \"cover\",\n  border:\n    \"5px solid #fff\" /* Optional: Add a border around the profile image */,\n};\nconst placeholder = state.network\n  ? \"Price by \" + state.network\n  : \"Price by Near\";\n\nreturn (\n  <>\n    <div class=\"container border border-info p-3 text-center\">\n      <div class=\"row\">\n        <div class=\"col-md-6 bg-success\">\n          <div class=\"card\" style={{ width: \"18rem\", textAlign: \"center\" }}>\n            <div class=\"profilebanner\" style={profilebanner}>\n              {state.bannerImage.cid ? (\n                <img\n                  src={`https://ipfs.near.social/ipfs/${state.bannerImage.cid}`}\n                  alt=\"uploaded\"\n                  class=\"bannerimage\"\n                  style={bannerimage}\n                />\n              ) : (\n                <img\n                  src={`https://img.freepik.com/free-photo/minimalistic-geometric-background-with-charts-generative-ai_169016-29527.jpg?size=626&ext=jpg&ga=GA1.1.844735360.1701308085&semt=sph`}\n                  alt=\"uploaded\"\n                  class=\"bannerimage\"\n                  style={bannerimage}\n                />\n              )}\n\n              <div class=\"profilecontainer\" style={profilecontainer}>\n                {state.profileImage.cid ? (\n                  <img\n                    src={`https://ipfs.near.social/ipfs/${state.profileImage.cid}`}\n                    alt=\"uploaded\"\n                    class=\"profileimage\"\n                    style={profileimage}\n                  />\n                ) : (\n                  <img\n                    src={`https://img.freepik.com/premium-photo/human-icon-3d-render-illustration_567294-4058.jpg?size=626&ext=jpg&ga=GA1.1.844735360.1701308085&semt=ais`}\n                    alt=\"uploaded\"\n                    class=\"profileimage\"\n                    style={profileimage}\n                  />\n                )}\n              </div>\n            </div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\" style={{ fontWeight: \"bold\" }}>\n                {state.dropName !== \"\" ? state.dropName : \"Name\"}\n              </h5>\n              <p class=\"card-text\">\n                {state.dropSymbol !== \"\" ? state.dropSymbol : \"Symbol\"}\n              </p>\n              <p>\n                {state.dropDescription !== \"\"\n                  ? state.dropDescription\n                  : \"Description\"}\n              </p>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <div>\n            <div className=\"container row\">\n              <Web3Connect />\n\n              <div>\n                Banner Image picture: <br />\n                <IpfsImageUpload image={state.bannerImage} />\n              </div>\n            </div>\n            <div className=\"container row\">\n              <div>\n                Profile Image: <br />\n                <IpfsImageUpload image={state.profileImage} />\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"exampleFormControlSelect1\">Network</label>\n              <select\n                class=\"form-control\"\n                id=\"network\"\n                onChange={(e) => {\n                  State.update({ [e.target.id]: e.target.value });\n                }}\n              >\n                <option>Near</option>\n                <option>Ethereum</option>\n                <option>Solana</option>\n                <option>Polygon</option>\n              </select>\n            </div>\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"dropName\"\n              value={state.dropName}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Drop Name\"\n              class=\"form-control\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"dropSymbol\"\n              value={state.dropSymbol}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Drop Symbol\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"dropURL\"\n              value={state.dropURL}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Drop URL\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"dropDescription\"\n              value={state.dropDescription}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Drop Description\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"maxSupply\"\n              value={state.maxSupply}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Max Supply\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"walletAddress\"\n              value={state.walletAddress}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Wallet Address to receive Royalty\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"saleRoyalty\"\n              value={state.saleRoyalty}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder=\"Secondary Sales Royalty Percentage\"\n            />\n            <p></p>\n            <input\n              type=\"text\"\n              id=\"priceByEther\"\n              value={state.priceByEther}\n              onChange={(e) => {\n                State.update({ [e.target.id]: e.target.value });\n              }}\n              placeholder={placeholder}\n            />\n            <p></p>\n            <a\n              class=\"btn btn-primary\"\n              href=\"https://near.org/mohaa.near/widget/profile\"\n            >\n              Continue\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </>\n);\n", "metadata": {"fork_of": "mohaa.near/widget/create@107565132"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/mohaa.near/widget/create", "fact_widget_deployments_id": "e33fef516686042d2a05abbc954e6de7", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 11}