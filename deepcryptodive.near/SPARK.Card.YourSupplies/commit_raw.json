{"tx_hash": "3gxsCiFQnZTVgdUNBKjY7QNYF1nRhSbBm4KM9PCLW6kn", "action_id_social": "9qYmiZNxZDEzFY97ioLFhCqdRV7EzSeyeM8wkCj9JA4s-0-widget", "block_id": 104942941, "block_timestamp": "2023-11-04T20:36:03.437Z", "signer_id": "deepcryptodive.near", "widget_name": "SPARK.Card.YourSupplies", "source_code": "const {\n  config,\n  chainId,\n  yourSupplies,\n  onActionSuccess,\n  showWithdrawModal,\n  setShowWithdrawModal,\n  healthFactor,\n  withdrawETHGas,\n  withdrawERC20Gas,\n  formatHealthFactor,\n} = props;\n\nState.init({\n  data: undefined,\n});\n\nconst WithdrawButton = ({ data }) => (\n  <Widget\n    src={`guessme.near/widget/ZKEVM.AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Withdraw\",\n      onClick: () => {\n        State.update({ data });\n        setShowWithdrawModal(true);\n      },\n    }}\n  />\n);\n\nreturn (\n  <>\n    <Widget\n      src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsView`}\n      props={{\n        config,\n        style: {\n          marginTop: \"16px\",\n        },\n        title: \"Your Supplied\",\n        body:\n          !yourSupplies || yourSupplies.length === 0 ? (\n            <Widget\n              src={`guessme.near/widget/ZKEVM.AAVE.Card.CardEmpty`}\n              props={{\n                config,\n                children: \"Nothing supplied yet\",\n              }}\n            />\n          ) : (\n            <>\n              {/* mobileView */}\n              {yourSupplies.map((row) => (\n                <Widget\n                  src={`${config.ownerId}/widget/AAVE.Card.CardContainer`}\n                  props={{\n                    children: [\n                      <Widget\n                        src={`${config.ownerId}/widget/AAVE.Card.Divider`}\n                        props={{ config }}\n                      />,\n                      <Widget\n                        src={`${config.ownerId}/widget/AAVE.Card.CardsBody`}\n                        props={{\n                          config,\n                          children: [\n                            <Widget\n                              src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                              props={{\n                                children: [\n                                  <img\n                                    width={64}\n                                    height={64}\n                                    src={\n                                      row.symbol === \"GNO\"\n                                        ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                        : row.symbol === \"WXDAI\" ||\n                                          row.symbol === \"XDAI\"\n                                        ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                        : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                                    }\n                                  />,\n                                  <div>\n                                    <div className=\"token-title\">\n                                      {row.symbol}\n                                    </div>\n                                    <div className=\"token-chain\">\n                                      {row.name}\n                                    </div>\n                                  </div>,\n                                ],\n                              }}\n                            />,\n                            <Widget\n                              src={`${config.ownerId}/widget/AAVE.Card.CardDataWrapper`}\n                              props={{\n                                children: [\n                                  <div className=\"card-data-row\">\n                                    <div className=\"card-data-key\">\n                                      Supply Balance\n                                    </div>\n                                    <div className=\"card-data-value\">\n                                      <div>\n                                        {Number(row.underlyingBalance).toFixed(\n                                          7\n                                        )}\n                                      </div>\n                                      <div>\n                                        ${\" \"}\n                                        {Number(\n                                          row.underlyingBalanceUSD\n                                        ).toFixed(2)}\n                                      </div>\n                                    </div>\n                                  </div>,\n                                  <div className=\"card-data-row\">\n                                    <div className=\"card-data-key\">\n                                      Supply APY\n                                    </div>\n                                    <div className=\"card-data-value\">{`${(\n                                      Number(row.supplyAPY) * 100\n                                    ).toFixed(2)} %`}</div>\n                                  </div>,\n                                ],\n                              }}\n                            />,\n                            <WithdrawButton data={row} />,\n                          ],\n                        }}\n                      />,\n                    ],\n                  }}\n                />\n              ))}\n              {/* pcView */}\n              <Widget\n                src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsTable`}\n                props={{\n                  config,\n                  headers: [\"Asset\", \"Supply Balance\", \"Supply APY\", \"\"],\n                  data: yourSupplies.map((row) => {\n                    return [\n                      <Widget\n                        src={`guessme.near/widget/ZKEVM.AAVE.Card.TokenWrapper`}\n                        props={{\n                          children: [\n                            <img\n                              width={32}\n                              height={32}\n                              //Hardcoded some URLs for novel tokens in Spark\n                              src={\n                                row.symbol === \"GNO\"\n                                  ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                  : row.symbol === \"WXDAI\" ||\n                                    row.symbol === \"XDAI\"\n                                  ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                  : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                              }\n                            />,\n                            <div>\n                              <div className=\"token-title\">{row.symbol}</div>\n                              <div className=\"token-chain\">{row.name}</div>\n                            </div>,\n                          ],\n                        }}\n                      />,\n                      <div>\n                        <div className=\"primaryStyle\">\n                          {Number(row.underlyingBalance).toFixed(7)}\n                        </div>\n                        <div className=\"token-balance-value\">\n                          $ {Number(row.underlyingBalanceUSD).toFixed(2)}\n                        </div>\n                      </div>,\n                      <span className=\"primaryStyle\">\n                        {(Number(row.supplyAPY) * 100).toFixed(2)}%\n                      </span>,\n                      <WithdrawButton data={row} />,\n                    ];\n                  }),\n                }}\n              />\n            </>\n          ),\n      }}\n    />\n    {showWithdrawModal && (\n      <Widget\n        src={`guessme.near/widget/ZKEVM.AAVE.Modal.WithdrawModal`}\n        props={{\n          config,\n          chainId,\n          data: {\n            ...state.data,\n            healthFactor,\n          },\n          onActionSuccess,\n          withdrawETHGas,\n          withdrawERC20Gas,\n          formatHealthFactor,\n          onRequestClose: () => setShowWithdrawModal(false),\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/deepcryptodive.near/widget/SPARK.Card.YourSupplies", "fact_widget_deployments_id": "bb3770973c557b3aa5a68b8e7e103706", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}