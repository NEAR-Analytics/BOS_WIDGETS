{"tx_hash": "JCZCSb6zuXgUJyJ2H6PM56mpf29GFg5RT6LQFK45t3AW", "action_id_social": "DCQL35qFu29G95xN6F6GLP4LRZNSvXyxRysuE7X2RhBJ-0-widget", "block_id": 104942969, "block_timestamp": "2023-11-04T20:36:33.774Z", "signer_id": "deepcryptodive.near", "widget_name": "SPARK.Card.AssetsToSupply", "source_code": "const {\n  config,\n  assetsToSupply,\n  showSupplyModal,\n  setShowSupplyModal,\n  onActionSuccess,\n  chainId,\n  healthFactor,\n  formatHealthFactor,\n  depositETHGas,\n  depositERC20Gas,\n} = props;\n\nState.init({\n  data: undefined,\n});\n\nconst SupplyButton = ({ data }) => (\n  <Widget\n    src={`guessme.near/widget/ZKEVM.AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Supply\",\n      onClick: () => {\n        State.update({ data });\n        setShowSupplyModal(true);\n      },\n    }}\n  />\n);\n\nreturn (\n  <>\n    <Widget\n      src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsView`}\n      props={{\n        config,\n        style: {\n          marginTop: \"10px\",\n        },\n        title: \"Assets to supply\",\n        body:\n          !assetsToSupply || assetsToSupply.length === 0 ? (\n            <Widget\n              src={`guessme.near/widget/ZKEVM.AAVE.Card.CardEmpty`}\n              props={{\n                config,\n                children: \"Nothing supplied yet\",\n              }}\n            />\n          ) : (\n            <>\n              {/* pcView */}\n              <Widget\n                src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsTable`}\n                props={{\n                  config,\n                  headers: [\n                    \"Asset\",\n                    \"Wallet Balance\",\n                    \"Supply APY\",\n                    \"Collateral\",\n                    \"\",\n                  ],\n                  data: assetsToSupply.map((row) => [\n                    <Widget\n                      src={`guessme.near/widget/ZKEVM.AAVE.Card.TokenWrapper`}\n                      props={{\n                        children: [\n                          <img\n                            width={32}\n                            height={32}\n                            src={\n                              row.symbol === \"GNO\"\n                                ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                : row.symbol === \"WXDAI\" ||\n                                  row.symbol === \"XDAI\"\n                                ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                            }\n                          />,\n                          <div>\n                            <div className=\"token-title\">{row.symbol}</div>\n                            <div className=\"token-chain\">{row.name}</div>\n                          </div>,\n                        ],\n                      }}\n                    />,\n                    <div>\n                      <div className=\"primaryStyle\">\n                        {Number(row.balance).toFixed(7)}\n                      </div>\n                      <div className=\"token-balance-value\">\n                        $ {row.balanceInUSD}\n                      </div>\n                    </div>,\n                    <span className=\"primaryStyle\">\n                      {(Number(row.supplyAPY) * 100).toFixed(2)}%\n                    </span>,\n                    <div style={{ paddingLeft: \"50px\" }}>\n                      {(row.isIsolated ||\n                        (!row.isIsolated && !row.usageAsCollateralEnabled)) &&\n                        \"\"}\n                      {!row.isIsolated && row.usageAsCollateralEnabled && (\n                        <img\n                          src={`${config.ipfsPrefix}/bafkreibsy5fzn67veowyalveo6t34rnqvktmok2zutdsp4f5slem3grc3i`}\n                          width={16}\n                          height={16}\n                        />\n                      )}\n                    </div>,\n                    <SupplyButton data={row} />,\n                  ]),\n                }}\n              />\n              {/* mobile view */}\n              {assetsToSupply.map((row) => {\n                return (\n                  <Widget\n                    src={`${config.ownerId}/widget/AAVE.Card.CardContainer`}\n                    props={{\n                      children: [\n                        <Widget\n                          src={`${config.ownerId}/widget/AAVE.Card.CardsBody`}\n                          props={{\n                            config,\n                            children: [\n                              <Widget\n                                src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                                props={{\n                                  children: [\n                                    <img\n                                      width={64}\n                                      height={64}\n                                      src={\n                                        row.symbol === \"GNO\"\n                                          ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                          : row.symbol === \"WXDAI\" ||\n                                            row.symbol === \"XDAI\"\n                                          ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                          : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                                      }\n                                    />,\n                                    <div>\n                                      <div className=\"token-title\">\n                                        {row.symbol}\n                                      </div>\n                                      <div className=\"token-chain\">\n                                        {row.name}\n                                      </div>\n                                    </div>,\n                                  ],\n                                }}\n                              />,\n                              <Widget\n                                src={`${config.ownerId}/widget/AAVE.Card.CardDataWrapper`}\n                                props={{\n                                  children: [\n                                    <div className=\"card-data-row\">\n                                      <div className=\"card-data-key\">\n                                        Wallet Balance\n                                      </div>\n                                      <div className=\"card-data-value\">\n                                        <div>\n                                          {Number(row.balance).toFixed(7)}\n                                        </div>\n                                        <div>$ {row.balanceInUSD}</div>\n                                      </div>\n                                    </div>,\n                                    <div className=\"card-data-row\">\n                                      <div className=\"card-data-key\">\n                                        Supply APY\n                                      </div>\n                                      <div className=\"card-data-value\">{`${(\n                                        Number(row.supplyAPY) * 100\n                                      ).toFixed(2)} %`}</div>\n                                    </div>,\n                                    <div className=\"card-data-row\">\n                                      <div className=\"card-data-key\">\n                                        Can be Collateral\n                                      </div>\n                                      <div className=\"card-data-value\">\n                                        {row.isIsolated && \"\u2014\"}\n                                        {!row.isIsolated && (\n                                          <>\n                                            {row.usageAsCollateralEnabled && (\n                                              <img\n                                                src={`${config.ipfsPrefix}/bafkreibsy5fzn67veowyalveo6t34rnqvktmok2zutdsp4f5slem3grc3i`}\n                                                width={16}\n                                                height={16}\n                                              />\n                                            )}\n                                            {!row.usageAsCollateralEnabled && (\n                                              <img\n                                                src={`${config.ipfsPrefix}/bafkreie5skej6q2tik3qa3yldkep4r465poq33ay55uzp2p6hty2ifhkmq`}\n                                                width={16}\n                                                height={16}\n                                              />\n                                            )}\n                                          </>\n                                        )}\n                                      </div>\n                                    </div>,\n                                  ],\n                                }}\n                              />,\n                              <SupplyButton data={row} />,\n                            ],\n                          }}\n                        />,\n                        <Widget\n                          src={`${config.ownerId}/widget/AAVE.Card.Divider`}\n                          props={{ config }}\n                        />,\n                      ],\n                    }}\n                  />\n                );\n              })}\n            </>\n          ),\n      }}\n    />\n    {showSupplyModal && (\n      <Widget\n        src={`guessme.near/widget/ZKEVM.AAVE.Modal.SupplyModal`}\n        props={{\n          config,\n          onRequestClose: () => setShowSupplyModal(false),\n          data: {\n            ...state.data,\n            healthFactor,\n          },\n          onActionSuccess,\n          chainId,\n          depositETHGas,\n          depositERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/deepcryptodive.near/widget/SPARK.Card.AssetsToSupply", "fact_widget_deployments_id": "54b3969ea0da58573b36e82eaa96c6d1", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}