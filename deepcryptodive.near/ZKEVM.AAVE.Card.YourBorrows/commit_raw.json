{"tx_hash": "9NSNpjw1VbfhYX66HqsqQSY5YtePF91UboSh72BTJdsP", "action_id_social": "9eL1DnBMBnkrbcCNeQL2BX3JnUunJV4Td1M6ZWJuJgg4-0-widget", "block_id": 104943311, "block_timestamp": "2023-11-04T20:42:39.712Z", "signer_id": "deepcryptodive.near", "widget_name": "ZKEVM.AAVE.Card.YourBorrows", "source_code": "const {\n  config,\n  yourBorrows,\n  showRepayModal,\n  showBorrowModal,\n  setShowRepayModal,\n  setShowBorrowModal,\n  onActionSuccess,\n  chainId,\n  repayETHGas,\n  repayERC20Gas,\n  borrowETHGas,\n  borrowERC20Gas,\n  formatHealthFactor,\n} = props;\n\nState.init({\n  data: undefined,\n});\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  @media (min-width: 640px) {\n    flex-direction: row;\n  }\n`;\n\nconst BorrowButton = ({ data }) => (\n  <Widget\n    src={`guessme.near/widget/ZKEVM.AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Borrow\",\n      onClick: () => {\n        State.update({ data });\n        setShowBorrowModal(true);\n      },\n    }}\n  />\n);\n\nconst RepayButton = ({ data }) => (\n  <Widget\n    src={`guessme.near/widget/ZKEVM.AAVE.PrimaryButton`}\n    props={{\n      config,\n      children: \"Repay\",\n      onClick: () => {\n        State.update({ data });\n        setShowRepayModal(true);\n      },\n    }}\n  />\n);\n\nif (!yourBorrows) {\n  return <div />;\n}\n\nconst { debts, ...yourBorrowsCommonParams } = yourBorrows;\n\nreturn (\n  <>\n    <Widget\n      src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsView`}\n      props={{\n        config,\n        style: {\n          marginTop: \"16px\",\n        },\n        title: \"Your Borrowed\",\n        body: (\n          <>\n            {!debts || debts.length === 0 ? (\n              <Widget\n                src={`guessme.near/widget/ZKEVM.AAVE.Card.CardEmpty`}\n                props={{\n                  config,\n                  children: \"Nothing borrowed yet\",\n                }}\n              />\n            ) : (\n              <>\n                {/* mobile view */}\n                {debts.map((row) => (\n                  <Widget\n                    src={`${config.ownerId}/widget/AAVE.Card.CardContainer`}\n                    props={{\n                      children: [\n                        <Widget\n                          src={`${config.ownerId}/widget/AAVE.Card.Divider`}\n                          props={{ config }}\n                        />,\n                        <Widget\n                          src={`${config.ownerId}/widget/AAVE.Card.CardsBody`}\n                          props={{\n                            config,\n                            children: [\n                              <Widget\n                                src={`${config.ownerId}/widget/AAVE.Card.TokenWrapper`}\n                                props={{\n                                  children: [\n                                    <img\n                                      width={64}\n                                      height={64}\n                                      src={\n                                        row.symbol === \"GNO\"\n                                          ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                          : row.symbol === \"WXDAI\" ||\n                                            row.symbol === \"XDAI\"\n                                          ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                          : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                                      }\n                                    />,\n                                    <div>\n                                      <div className=\"token-title\">\n                                        {row.symbol}\n                                      </div>\n                                      <div className=\"token-chain\">\n                                        {row.name}\n                                      </div>\n                                    </div>,\n                                  ],\n                                }}\n                              />,\n                              <Widget\n                                src={`${config.ownerId}/widget/AAVE.Card.CardDataWrapper`}\n                                props={{\n                                  children: [\n                                    <div className=\"card-data-row\">\n                                      <div className=\"card-data-key\">Debt</div>\n                                      <div className=\"card-data-value\">\n                                        <div>\n                                          {Number(row.variableBorrows).toFixed(\n                                            7\n                                          )}\n                                        </div>\n                                        <div>\n                                          ${\" \"}\n                                          {Number(\n                                            row.variableBorrowsUSD\n                                          ).toFixed(2)}\n                                        </div>\n                                      </div>\n                                    </div>,\n                                    <div className=\"card-data-row\">\n                                      <div className=\"card-data-key\">APY</div>\n                                      <div className=\"card-data-value\">{`${(\n                                        Number(row.variableBorrowAPY) * 100\n                                      ).toFixed(2)} %`}</div>\n                                    </div>,\n                                  ],\n                                }}\n                              />,\n                              <ButtonGroup>\n                                <RepayButton\n                                  data={{ ...row, ...yourBorrowsCommonParams }}\n                                />\n                                <BorrowButton\n                                  data={{\n                                    ...row,\n                                    ...yourBorrowsCommonParams,\n                                  }}\n                                />\n                              </ButtonGroup>,\n                            ],\n                          }}\n                        />,\n                      ],\n                    }}\n                  />\n                ))}\n                {/* pc view */}\n                <Widget\n                  src={`guessme.near/widget/ZKEVM.AAVE.Card.CardsTable`}\n                  props={{\n                    config,\n                    headers: [\"Asset\", \"Debt\", \"APY\", \"\"],\n                    data: debts.map((row) => {\n                      return [\n                        <Widget\n                          src={`guessme.near/widget/ZKEVM.AAVE.Card.TokenWrapper`}\n                          props={{\n                            children: [\n                              <img\n                                width={32}\n                                height={32}\n                                src={\n                                  row.symbol === \"GNO\"\n                                    ? \"https://ipfs.near.social/ipfs/bafkreibdtyo65gd4cvjjylw3etf6sw4ipvwmvqvfv267maqwp77gu2hovm\"\n                                    : row.symbol === \"WXDAI\" ||\n                                      row.symbol === \"XDAI\"\n                                    ? \"https://ipfs.near.social/ipfs/bafkreieu6n7cav63nwjj5klcsxrk26eo5pqkc4u7xzfle2bjgi5ijm7ipe\"\n                                    : `https://app.aave.com/icons/tokens/${row.symbol.toLowerCase()}.svg`\n                                }\n                              />,\n                              <div>\n                                <div className=\"token-title\">{row.symbol}</div>\n                                <div className=\"token-chain\">{row.name}</div>\n                              </div>,\n                            ],\n                          }}\n                        />,\n                        <div>\n                          <div className=\"primaryStyle\">\n                            {Number(row.variableBorrows).toFixed(7)}\n                          </div>\n                          <div className=\"token-balance-value\">\n                            $ {Number(row.variableBorrowsUSD).toFixed(2)}\n                          </div>\n                        </div>,\n                        <span className=\"primaryStyle\">\n                          {(Number(row.variableBorrowAPY) * 100).toFixed(2)} %\n                        </span>,\n                        <ButtonGroup>\n                          <RepayButton\n                            data={{ ...row, ...yourBorrowsCommonParams }}\n                          />\n                          <BorrowButton\n                            data={{\n                              ...row,\n                              ...yourBorrowsCommonParams,\n                            }}\n                          />\n                        </ButtonGroup>,\n                      ];\n                    }),\n                  }}\n                />\n              </>\n            )}\n          </>\n        ),\n      }}\n    />\n    {showRepayModal && (\n      <Widget\n        src={`guessme.near/widget/ZKEVM.AAVE.Modal.RepayModal`}\n        props={{\n          config,\n          onRequestClose: () => setShowRepayModal(false),\n          data: state.data,\n          onActionSuccess,\n          onlyOneBorrow: debts.length === 1,\n          chainId,\n          repayETHGas,\n          repayERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n    {showBorrowModal && (\n      <Widget\n        src={`guessme.near/widget/ZKEVM.AAVE.Modal.BorrowModal`}\n        props={{\n          config,\n          onRequestClose: () => setShowBorrowModal(false),\n          data: state.data,\n          onActionSuccess,\n          chainId,\n          borrowETHGas,\n          borrowERC20Gas,\n          formatHealthFactor,\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/deepcryptodive.near/widget/ZKEVM.AAVE.Card.YourBorrows", "fact_widget_deployments_id": "15a4ae3cc41ff68f4af35a8d38820607", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}