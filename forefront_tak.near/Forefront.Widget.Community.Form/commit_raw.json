{"tx_hash": "3vixW9E7DpXzrAb541i4dhy2AhJLszE3TGCxCEYKuf2B", "action_id_social": "GkXB4AepEamRKkLsydyHb6hti1evvhJFXAWVUgmRfeTe-0-widget", "block_id": 115381582, "block_timestamp": "2024-03-24T15:45:41.866Z", "signer_id": "forefront_tak.near", "widget_name": "Forefront.Widget.Community.Form", "source_code": "const themeColor = props.themeColor;\r\n\r\nconst projecttheme = {\r\n  height: \"130px\",\r\n  align: \"center\",\r\n  description: \"Submit your Information to power Forefront Tak\",\r\n  brand: \"Forefront Tak Community\",\r\n  fontsize: \"40px\",\r\n  fontweight: \"40px\",\r\n  afterbrand: \"Form\",\r\n  afterbrandcolor: themeColor?.dynamic_header?.afterbrandcolor || \"#789efb\",\r\n  fontbrand: \" Arial, sans-serif\",\r\n  color1brand: themeColor?.dynamic_header?.color1brand || \"#000\",\r\n  color2brand: themeColor?.dynamic_header?.color2brand || \"#806ce1\",\r\n  colordescription: themeColor?.dynamic_header?.colordescription || \"#806ce1\",\r\n  fontsubtitle: \" Arial, sans-serif\",\r\n  background:\r\n    themeColor?.dynamic_header?.background ||\r\n    \"radial-gradient(circle, rgba(210,202,250,1) 0%, rgba(230,230,231,0.01) 0%, rgba(235,238,255,1) 100%, rgba(235,231,253,1) 100%, rgba(255,241,241,1) 100%, rgba(46,52,90,1) 100%);\",\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  gap: 3em;\r\n  padding-bottom: 3em;\r\n`;\r\n\r\nconst Header = styled.h1`\r\n  font-style: normal;\r\n  font-weight: 700;\r\n  font-size: 2em;\r\n  line-height: 1.4em;\r\n  text-align: center;\r\n  color: #000000;\r\n`;\r\n\r\nconst Form = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  width: 60%;\r\n  gap: 1em;\r\n`;\r\n\r\nconst FormFooter = styled.div`\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n`;\r\n\r\nState.init({\r\n  contract_address: \"\",\r\n  contract_addressError: \"\",\r\n  protocol: \"\",\r\n  protocolError: \"\",\r\n  contract_name: \"\",\r\n  contract_nameError: \"\",\r\n  label: null,\r\n  labelError: \"\",\r\n  sublabel: null,\r\n  sublabelError: \"\",\r\n  discord: \"\",\r\n  discordError: \"\",\r\n  accountsWithPermissions: [],\r\n  accountsWithPermissionsIsFetched: false,\r\n});\r\n\r\nif (!state.accountsWithPermissionsIsFetched) {\r\n  Near.asyncView(\r\n    \"social.near\",\r\n    \"debug_get_permissions\",\r\n    { account_id: context.accountId },\r\n    \"final\",\r\n    false\r\n  ).then((data) =>\r\n    State.update({\r\n      accountsWithPermissions: data\r\n        .map(([info]) => info)\r\n        .filter((info) => \"AccountId\" in info)\r\n        .map(({ AccountId }) => AccountId),\r\n      accountsWithPermissionsIsFetched: true,\r\n    })\r\n  );\r\n}\r\n\r\nconst validateForm = () => {\r\n  return (\r\n    state.contract_address &&\r\n    state.contract_addressError === \"\" &&\r\n    state.label &&\r\n    state.labelError === \"\" &&\r\n    state.sublabel &&\r\n    state.sublabelError === \"\" &&\r\n    state.protocol &&\r\n    state.protocolError === \"\" &&\r\n    state.contract_name &&\r\n    state.contract_nameError === \"\" &&\r\n    (!state.discord || state.discordError === \"\")\r\n  );\r\n};\r\n\r\nlet address = (\r\n  <Widget\r\n    src={`lord1.near/widget/Text`}\r\n    props={{\r\n      label: \"Paste your wallet address *\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"address.near\",\r\n      value: state.contract_address,\r\n      onChange: (contract_address) => State.update({ contract_address }),\r\n      validate: () => {\r\n        if (state.contract_address.length < 5) {\r\n          State.update({\r\n            contract_addressError: \"Name must be at least 5 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (state.contract_address.length > 100) {\r\n          State.update({\r\n            contract_addressError: \"Name must be less than 100 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        State.update({ contract_addressError: \"\" });\r\n      },\r\n      error: state.contract_addressError,\r\n    }}\r\n  />\r\n);\r\nlet protocols = (\r\n  <Widget\r\n    src={`lord1.near/widget/Text`}\r\n    props={{\r\n      label: \"Twitter handle *\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"@Twitter_handle\",\r\n      value: state.protocol,\r\n      onChange: (protocol) => State.update({ protocol }),\r\n      validate: () => {\r\n        if (state.protocol.length < 2) {\r\n          State.update({\r\n            protocolError: \"Name must be at least 2 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (state.protocol.length > 100) {\r\n          State.update({\r\n            protocolError: \"Name must be less than 100 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        State.update({ protocolError: \"\" });\r\n      },\r\n      error: state.protocolError,\r\n    }}\r\n  />\r\n);\r\n\r\nlet name = (\r\n  <Widget\r\n    src={`lord1.near/widget/Text`}\r\n    props={{\r\n      label: \"Telegram handle *\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"@Telegram_handle\",\r\n      value: state.contract_name,\r\n      onChange: (contract_name) => State.update({ contract_name }),\r\n      validate: () => {\r\n        if (state.contract_name.length < 5) {\r\n          State.update({\r\n            contract_nameError: \"Name must be at least 5 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (state.contract_name.length > 100) {\r\n          State.update({\r\n            contract_nameError: \"Name must be less than 100 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        State.update({ contract_nameError: \"\" });\r\n      },\r\n      error: state.contract_nameError,\r\n    }}\r\n  />\r\n);\r\n\r\nlet labels = (\r\n  <Widget\r\n    src={`lord1.near/widget/Dropdown`}\r\n    props={{\r\n      label: \"Your Role *\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"\",\r\n      options: [\r\n        { text: \"Community Member\", value: \"member\" },\r\n        { text: \"Contributor\", value: \"contributor\" },\r\n        { text: \"Degen\", value: \"degen\" },\r\n      ],\r\n      dev: state.label,\r\n      update: (label) => State.update({ label }),\r\n      setError: (labelError) => State.update({ labelError }),\r\n      error: state.labelError,\r\n    }}\r\n  />\r\n);\r\nlet sublabels = (\r\n  <Widget\r\n    src={`lord1.near/widget/Dropdown`}\r\n    props={{\r\n      label: \"How did you hear about Forefront Tak *\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"\",\r\n      options: [\r\n        {\r\n          text: \"Twitter\",\r\n          value: \"twitter\",\r\n        },\r\n        {\r\n          text: \"Campaign \",\r\n          value: \"campaign \",\r\n        },\r\n        { text: \"Telegram\", value: \"telegram\" },\r\n        { text: \"Medium\", value: \"medium\" },\r\n        { text: \"Discord\", value: \"discord\" },\r\n        { text: \"Other\", value: \"other\" },\r\n      ],\r\n      dev: state.sublabel,\r\n      update: (sublabel) => State.update({ sublabel }),\r\n      setError: (sublabelError) => State.update({ sublabelError }),\r\n      error: state.sublabelError,\r\n    }}\r\n  />\r\n);\r\nlet discords = (\r\n  <Widget\r\n    src={`lord1.near/widget/Text`}\r\n    props={{\r\n      label: \"Discord Handle\",\r\n      placeholdercolor: themeColor?.form?.placeholdercolor,\r\n      inputbackgroundcolor: themeColor?.form?.inputbackgroundcolor,\r\n      inputcolor: themeColor?.form?.inputcolor,\r\n      labelcolor: themeColor?.form?.labelcolor,\r\n      placeholder: \"@Discord_handle\",\r\n      value: state.discord,\r\n      onChange: (discord) => State.update({ discord }),\r\n      validate: () => {\r\n        if (state.discord.length < 2) {\r\n          State.update({\r\n            discordError: \"Name must be at least 2 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (state.discord.length > 20) {\r\n          State.update({\r\n            discordError: \"Name must be less than 20 characters\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        State.update({ discordError: \"\" });\r\n      },\r\n      error: state.discordError,\r\n    }}\r\n  />\r\n);\r\n\r\nreturn (\r\n  <div\r\n    className=\"my-4 shadow-sm  rounded-4\"\r\n    style={{ background: themeColor?.sbt_area?.section_bg }}\r\n  >\r\n    <div className=\"row g-4 w-100 pb-2 mx-0\">\r\n      <div className=\"col-12\">\r\n        <div\r\n          style={{ background: themeColor?.sbt_area?.card_bg }}\r\n          className=\"shadow-sm rounded-4 \"\r\n        >\r\n          <Widget src=\"lord1.near/widget/header-dynamic\" props={projecttheme} />\r\n\r\n          <Container>\r\n            <Form>\r\n              {address}\r\n              {protocols}\r\n              {name}\r\n              {labels}\r\n              {sublabels}\r\n              {discords}\r\n              <FormFooter>\r\n                <Widget\r\n                  src={`contribut3.near/widget/Buttons.Green`}\r\n                  props={{\r\n                    disabled: !validateForm(),\r\n                    onClick: () => {\r\n                      Social.set({\r\n                        index: JSON.stringify({\r\n                          value: {\r\n                            gateway: \"forefront_gateway\",\r\n                            method: \"forefront_form\",\r\n                            address: state.contract_address,\r\n                            twitter: state.protocol,\r\n                            telegram: state.contract_name,\r\n                            role: state.label.value,\r\n                            referral: state.sublabel.value,\r\n                            discord_handle: state.discord,\r\n                          },\r\n                        }),\r\n                      });\r\n                    },\r\n                    text: (\r\n                      <>\r\n                        <svg\r\n                          width=\"17\"\r\n                          height=\"18\"\r\n                          viewBox=\"0 0 17 18\"\r\n                          fill=\"none\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                          <path\r\n                            d=\"M2.875 16.5V12.75M2.875 5.25V1.5M1 3.375H4.75M1 14.625H4.75M9.25 2.25L7.94937 5.63165C7.73786 6.18157 7.6321 6.45653 7.46765 6.68781C7.32189 6.8928 7.1428 7.07189 6.93781 7.21765C6.70653 7.3821 6.43157 7.48786 5.88165 7.69937L2.5 9L5.88165 10.3006C6.43157 10.5121 6.70653 10.6179 6.93781 10.7824C7.1428 10.9281 7.32189 11.1072 7.46765 11.3122C7.6321 11.5435 7.73786 11.8184 7.94937 12.3684L9.25 15.75L10.5506 12.3684C10.7621 11.8184 10.8679 11.5435 11.0324 11.3122C11.1781 11.1072 11.3572 10.9281 11.5622 10.7824C11.7935 10.6179 12.0684 10.5121 12.6184 10.3006L16 9L12.6184 7.69937C12.0684 7.48786 11.7935 7.3821 11.5622 7.21765C11.3572 7.07189 11.1781 6.8928 11.0324 6.68781C10.8679 6.45653 10.7621 6.18157 10.5506 5.63165L9.25 2.25Z\"\r\n                            stroke=\"#11181C\"\r\n                            stroke-width=\"1.66667\"\r\n                            stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\"\r\n                          />\r\n                        </svg>\r\n                        Submit Form\r\n                      </>\r\n                    ),\r\n                  }}\r\n                />\r\n              </FormFooter>\r\n            </Form>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": {"fork_of": "lord1.near/widget/Community_Form@109901832"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/forefront_tak.near/widget/Forefront.Widget.Community.Form", "fact_widget_deployments_id": "db1f1fbbea013dedf95448d39924931f", "inserted_timestamp": "2024-03-24T17:28:32.506Z", "modified_timestamp": "2024-03-24T17:28:32.506Z", "__row_index": 0}