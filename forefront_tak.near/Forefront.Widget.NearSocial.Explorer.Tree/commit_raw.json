{"tx_hash": "BriKzaCV8my8JE1cPQAnTQRYumWLWGydzPhWVcxYhDHA", "action_id_social": "GRtnbKLK9J4gcRt31CYV7WFFQ84MqsQstbW86rGC3JVU-0-widget", "block_id": 114405893, "block_timestamp": "2024-03-09T17:36:48.738Z", "signer_id": "forefront_tak.near", "widget_name": "Forefront.Widget.NearSocial.Explorer.Tree", "source_code": "/**\r\n * Takes in a rootPath and rootType\r\n */\r\nconst themeColor = props.themeColor;\r\nconst rootPath = props.rootPath || context.accountId || \"\";\r\nconst rootType = props.rootType || \"account\";\r\nconst rootNode = props.rootNode || {};\r\n\r\nState.init({\r\n  path: rootPath,\r\n  type: rootType,\r\n  history: [rootPath],\r\n});\r\n\r\nfunction setPath(path) {\r\n  State.update({ path });\r\n}\r\n\r\nfunction setHistory(history) {\r\n  State.update({ history });\r\n}\r\n\r\nfunction setType(type) {\r\n  State.update({ type });\r\n}\r\n\r\nfunction setRoot(newPath, newType) {\r\n  State.update({\r\n    path: newPath,\r\n    type: newType,\r\n  });\r\n}\r\n\r\n// WHEN A NEW ROOT IS SET //\r\n// GET DATA AT THIS PATH //\r\nfunction getNode(path, type) {\r\n  const parts = path.split(\"/\");\r\n  let value = {};\r\n\r\n  // ACCOUNT //\r\n  if (type === \"account\") {\r\n    if (parts.length > 1) {\r\n      // GRAPH // FOLLOW // BACK TO ACCOUNT : WORKING\r\n      setRoot(parts[3], \"account\");\r\n    } else {\r\n      if (parts[0] !== \"*\") {\r\n        parts.push(\"**\");\r\n      }\r\n      value = Social.get(parts.join(\"/\"), \"final\");\r\n      return value;\r\n    }\r\n    // THING //\r\n  } else if (type === \"thing\") {\r\n    // path: \"everything\"\r\n    // type: \"thing\"\r\n    return rootNode; // Or should \"everything\" be \"*\"?\r\n    // PROFILE //\r\n  } else if (type === \"profile\") {\r\n    value = Social.get(parts.join(\"/\"), \"final\");\r\n    // POST : WIP //\r\n  } else if (type === \"post\") {\r\n    value = path;\r\n    // NAMETAG : WIP //\r\n  } else if (type === \"nametag\") {\r\n    if (parts.length > 2) {\r\n      if (parts.length === 3) {\r\n        // BACK TO ACCOUNT\r\n        setRoot(parts[3], \"account\");\r\n      } else if (parts.length === 4) {\r\n        // ALL TAGS BY ACCOUNT\r\n        value = Social.keys(`${parts[0]}/profile/tags/*`, \"final\");\r\n      } else {\r\n        // THIS TAG\r\n        value = parts[5];\r\n      }\r\n    }\r\n  } else {\r\n    parts.push(\"**\");\r\n    value = Social.get(parts.join(\"/\"), \"final\");\r\n    return value;\r\n  }\r\n}\r\n\r\nconst node = getNode(state.path, state.type);\r\n\r\nreturn (\r\n  <Widget\r\n    src=\"forefront_tak.near/widget/Forefront.Widget.NearSocial.Explorer.Node\"\r\n    props={{\r\n      label: state.path,\r\n      node,\r\n      type: state.type,\r\n      path: state.path,\r\n      setPath: setPath,\r\n      history: state.history,\r\n      setHistory: setHistory,\r\n      setType: setType,\r\n      isRoot: true,\r\n      themeColor: themeColor,\r\n    }}\r\n  />\r\n);\r\n", "metadata": {"fork_of": "lord1.near/widget/component-growth@110572702"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/forefront_tak.near/widget/Forefront.Widget.NearSocial.Explorer.Tree", "fact_widget_deployments_id": "16e808d68335e0b0cb666dfc1fd5e4f1", "inserted_timestamp": "2024-03-09T19:24:39.232Z", "modified_timestamp": "2024-03-09T19:24:39.232Z", "__row_index": 0}