{"tx_hash": "FMqb7gvhbpZyeDVH3R8PVJ1NQpZnZ9vSxDmUzLGAZ4nP", "action_id_social": "2WafY1AYUdfztxp3rpjiSaA19L7AQEdfESU9qNLYwBiQ-0-widget", "block_id": 114405982, "block_timestamp": "2024-03-09T17:38:49.437Z", "signer_id": "forefront_tak.near", "widget_name": "Forefront.Widget.NearSocial.Explorer.View", "source_code": "const path = props.path;\r\nconst type = props.type;\r\nconst themeColor = props.themeColor;\r\nif (path.endsWith(\"/\")) {\r\n  path = path.slice(0, -1);\r\n}\r\n\r\nconst parts = path.split(\"/\");\r\nlet value = {};\r\n\r\nconsole.log(`path: ${path}, type: ${type}`);\r\n\r\n// ACCOUNT //\r\nif (type === \"account\") {\r\n  if (parts.length > 1) {\r\n    return (\r\n      <Widget\r\n        src=\"forefront_tak.near/widget/Forefront.Widget.NearSocial.Explorer.Tree\"\r\n        props={{\r\n          rootPath: parts[parts.length - 1],\r\n          rootType: type,\r\n          themeColor,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  // THING //\r\n} else if (type === \"thing\") {\r\n  // path: \"everything\"\r\n  // type: \"thing\"\r\n  return \"VIEW: thing\";\r\n  // WIDGET //\r\n} else if (type === \"widget\") {\r\n  return <Widget src={path} />;\r\n  // PROFILE //\r\n} else if (type === \"graph\") {\r\n  parts.push(\"**\");\r\n  value = Social.get(parts.join(\"/\"), \"final\");\r\n} else if (type === \"index\") {\r\n  value = Social.get(parts.join(\"/\"), \"final\");\r\n} else if (type === \"profile\") {\r\n  value = Social.get(parts.join(\"/\"), \"final\");\r\n  return <p>{value}</p>;\r\n} else if (type === \"settings\") {\r\n  return (\r\n    <Widget\r\n      src=\"efiz.near/widget/Every.Setting\"\r\n      props={{ accountId: parts[0] }}\r\n    />\r\n  );\r\n} else if (type === \"post\") {\r\n  // Replace this with a better component\r\n  // with hashtag filter\r\n\r\n  if (parts[0].endsWith(\".near\")) {\r\n    const index = {\r\n      action: parts[1],\r\n      key: parts[2],\r\n      options: {\r\n        limit: 10,\r\n        order: \"desc\",\r\n        accountId: parts[0],\r\n      },\r\n    };\r\n\r\n    function renderItem(a) {\r\n      if (a.value.type === \"md\") {\r\n        return (\r\n          <Widget\r\n            src=\"near/widget/Posts.Post\"\r\n            props={{ accountId: a.accountId, blockHeight: a.blockHeight }}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <Widget\r\n        src=\"efiz.near/widget/MergedIndexFeed\"\r\n        props={{ index, renderItem, disableCaching: true }}\r\n      />\r\n    );\r\n  } else {\r\n    let hashtagFilter = [];\r\n    if (parts[2] !== \"main\") {\r\n      hashtagFilter = [{ name: parts[2], required: true }];\r\n    }\r\n    return (\r\n      <Widget\r\n        src=\"efiz.near/widget/Community.Posts\"\r\n        props={{\r\n          communityHashtags: hashtagFilter,\r\n          communityMembers: [],\r\n          exclusive: false,\r\n          allowPublicPosting: true,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n} else {\r\n  value = Social.get(parts.join(\"/\"), \"final\");\r\n  value = JSON.parse(value);\r\n}\r\n\r\nconst text = `\r\n\\`\\`\\`json\r\n${JSON.stringify(value, undefined, 2)}\r\n\\`\\`\\`\r\n`;\r\nreturn <Markdown text={text} />;\r\n", "metadata": {"fork_of": "lord1.near/widget/component-growth@110572702"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/forefront_tak.near/widget/Forefront.Widget.NearSocial.Explorer.View", "fact_widget_deployments_id": "a2c509a0d47e5f803079d5df66413c88", "inserted_timestamp": "2024-03-09T19:24:39.232Z", "modified_timestamp": "2024-03-09T19:24:39.232Z", "__row_index": 0}