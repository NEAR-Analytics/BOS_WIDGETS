{"tx_hash": "5FUoxDbmPJCRo6g4UcyVrTa7dmW9dA5SBd6dYev8qJ3V", "action_id_social": "96cXEmfYEnYBsNk5isHC63XunCnigvV6LhJANSx8grRk-0-widget", "block_id": 116868634, "block_timestamp": "2024-04-15T02:36:24.635Z", "signer_id": "devs.near", "widget_name": "adapter.sputnik-dao", "source_code": "const call = ({ daoId, methodName, args, deposit }) => {\n  Near.call([\n    {\n      contractName: daoId,\n      methodName,\n      args,\n      deposit: deposit,\n      gas: \"219000000000000\",\n    },\n  ]);\n};\nconst addProposal = ({ daoId, proposal }) => {\n  const policy = Near.view(daoId, \"get_policy\");\n  if (policy === null) {\n    return \"Loading...\"; // lol what does this do...\n  }\n  const deposit = policy.proposal_bond;\n  call({\n    daoId,\n    methodName: \"add_proposal\",\n    args: {\n      proposal,\n    },\n    deposit,\n  });\n};\nconst createFunctionCallProposal = ({\n  daoId,\n  receiver_id,\n  method_name,\n  args,\n}) => {\n  const proposal_args = Buffer.from(JSON.stringify(args), \"utf-8\").toString(\n    \"base64\"\n  );\n  addProposal({\n    daoId,\n    proposal: {\n      description: `call ${method_name} to ${receiver_id}`,\n      kind: {\n        FunctionCall: {\n          receiver_id,\n          actions: [\n            {\n              method_name,\n              args: proposal_args,\n              deposit: \"100000000000000000000000\",\n              gas: \"219000000000000\",\n            },\n          ],\n        },\n      },\n    },\n  });\n};\nconst create = (v) => {\n  createFunctionCallProposal({\n    daoId: \"build.sputnik-dao.near\",\n    receiver_id: \"social.near\",\n    method_name: \"set\",\n    args: {\n      data: {\n        \"build.sputnik-dao.near\": {\n          post: {\n            main: JSON.stringify(v),\n          },\n          index: {\n            post: JSON.stringify({\n              key: \"main\",\n              value: {\n                type: \"md\",\n              },\n            }),\n          },\n        },\n      },\n    },\n  });\n};\nreturn { createFunctionCallProposal, create };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devs.near/widget/adapter.sputnik-dao", "fact_widget_deployments_id": "30e3a1840a5bc4e6c7160d18754d69d1", "inserted_timestamp": "2024-04-15T04:38:44.803Z", "modified_timestamp": "2024-04-15T05:22:37.742Z", "__row_index": 0}