{"tx_hash": "BToHuuWGwbiiNwQt59sL2jGiEq2Z1oMPg4XmAcP2G4yu", "action_id_social": "8Rj9Tv1fhegVqp5MaYp1ebvDz7w7gcgsuuSLcFPi2rWo-0-widget", "block_id": 110566164, "block_timestamp": "2024-01-16T18:07:51.053Z", "signer_id": "devs.near", "widget_name": "Router", "source_code": "const routes = props.routes;\nif (!routes) {\n  routes = [];\n}\nconst Navigator = props.Navigator;\n\nState.init({\n  CurrentWidget: null,\n});\n\nfunction init() {\n  if (!state.CurrentWidget) {\n    // TODO: check from local storage or props\n    const initialSrc = Object.values(props.routes)[0].src;\n    State.update({ CurrentWidget: initialSrc });\n    // () => <Widget src={initialSrc.path} blockHeight={initialSrc.blockHeight} />\n  }\n}\n\ninit();\n\n// Function to handle navigation\nfunction handleNavigate(newRoute, passProps) {\n  const currentSrc = props.routes[newRoute]?.src;\n  State.update({ CurrentWidget: currentSrc, passProps });\n}\n\n// const activePage = pages.find((p) => p.active);\n\n// const navigate = (v, params) => {\n//   State.update({ page: v, project: params?.project });\n//   const url = Url.construct(\"#/devs.near/widget/home\", params);\n//   Storage.set(\"url\", url);\n// };\n\nfunction RouterLink({ to, children, passProps }) {\n  return (\n    <span\n      onClick={() => handleNavigate(to, passProps)}\n      key={\"link-to-\" + to}\n      style={{ cursor: \"pointer\" }}\n    >\n      {children}\n    </span>\n  );\n}\n\n// Render the current widget or a default message if the route is not found\nreturn (\n  <div>\n    {/* Navigation buttons -- this should be passed to a Navigator widget */}\n    <div>\n      <Widget\n        src={Navigator.src.path || \"devs.near/widget/Navigator\"}\n        blockHeight={Navigator.src.blockHeight || \"final\"}\n        props={{ RouterLink, routes: props.routes }}\n      />\n    </div>\n    {/** This could already render all of the children, but just put them as display none (lazy loading) */}\n    {state.CurrentWidget ? (\n      <Widget\n        src={state.CurrentWidget.path}\n        blockHeight={state.CurrentWidget.blockHeight}\n        props={{ RouterLink, ...state.passProps }}\n      />\n    ) : (\n      <div>{JSON.stringify(state.CurrentWidget)}</div>\n    )}\n  </div>\n);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/devs.near/widget/Router", "fact_widget_deployments_id": "4a154bd53a8a4f6c463b4654c7e7f36b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}