{"tx_hash": "HrxNEfrjrHWi65yvrt92c3FXSxktGDTc55NpyeEaWtKc", "action_id_social": "DGmUiJ34cbGUpEaLC1Zh712LNR4u6GPXa2EA4Y5ocso8-0-widget", "block_id": 121135360, "block_timestamp": "2024-06-14T08:53:40.770Z", "signer_id": "urbitlabs.near", "widget_name": "pokeUrbit", "source_code": "let { api } = props;\nUrbit.setApi(api);\n\nconst Label = styled.span`\n  font-size: 16px;\n`;\n\nconst Form = styled.div`\n  max-width: 300px;\n  margin: auto;\n  text-align: center;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 5px;\n  border: 1px solid #bbc0c1;\n  border-radius: 10px;\n`;\n\nconst Section = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f5f5f5;\n  padding: 20px;\n  border-radius: 10px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin: 10px;\n  box-sizing: border-box;\n  overflow: hidden;\n`;\n\nconst Button = styled.button`\n  width: auto;\n  padding: 5px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  background-color: white;\n  border: 1px solid #bbc0c1;\n  color: black;\n  cursor: pointer;\n  border-radius: 5px;\n`;\n\nconst [pokeApp, setPokeApp] = useState(\"\");\nconst [pokeMark, setPokeMark] = useState(\"\");\nconst [pokeJson, setPokeJson] = useState(\"\");\nconst [pokeStatus, setPokeStatus] = useState(\"\");\n\nconst handlePokeButton = () => {\n  let parsedJson = JSON.parse(pokeJson);\n\n  if (pokeApp === \"near-storage\" && pokeMark === \"near-store\") {\n    const value = JSON.stringify(parsedJson[\"set-item\"].val);\n    parsedJson = {\n      ...parsedJson,\n      \"set-item\": {\n        ...parsedJson[\"set-item\"],\n        val: value,\n      },\n    };\n  }\n\n  Urbit.poke(\n    pokeApp,\n    pokeMark,\n    parsedJson,\n    () => {\n      setPokeStatus(`Poke to ${pokeApp} succeeded!`);\n      setPokeApp(\"\");\n      setPokeMark(\"\");\n      setPokeJson(\"\");\n      setTimeout(() => setPokeStatus(\"\"), 4000);\n    },\n    () => {\n      setPokeStatus(`Poke to ${pokeApp} failed`);\n      setTimeout(() => setPokeStatus(\"\"), 4000);\n    }\n  );\n};\n\nreturn (\n  <Section>\n    <Form>\n      <Label>{`Poke ~${api.ship}`}</Label>\n      <br />\n      <Label>App</Label>\n      <Input\n        type=\"text\"\n        value={pokeApp}\n        onChange={(e) => setPokeApp(e.target.value)}\n        name=\"pokeApp\"\n        placeholder=\"hood\"\n      />\n      <Label>Mark</Label>\n      <Input\n        type=\"text\"\n        value={pokeMark}\n        onChange={(e) => setPokeMark(e.target.value)}\n        name=\"pokeMark\"\n        placeholder=\"helm-hi\"\n      />\n      <Label>JSON</Label>\n      <Input\n        type=\"text\"\n        value={pokeJson}\n        onChange={(e) => setPokeJson(e.target.value)}\n        name=\"pokeJson\"\n        placeholder={`\"hi ~${api.ship}\"`}\n      />\n      <Button onClick={handlePokeButton}>Send Poke</Button>\n    </Form>\n    <p>{pokeStatus}</p>\n  </Section>\n);\n", "metadata": {"fork_of": "urbitlabs.near/widget/pokeUrbit@119636638"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/urbitlabs.near/widget/pokeUrbit", "fact_widget_deployments_id": "dcefda9d131524396f7de2e30d7fe5c1", "inserted_timestamp": "2024-06-14T10:54:59.940Z", "modified_timestamp": "2024-06-14T10:54:59.940Z", "__row_index": 1}