{"tx_hash": "5L4h5KMgbx59QuBxjVcv69J5GbUWmWkUCH1fCNcLnG85", "action_id_social": "45u76DGnzGUQTqcZ8sDFJasxGbkNgyFsQAKvNcahyojw-0-widget", "block_id": 101899571, "block_timestamp": "2023-09-25T04:53:22.009Z", "signer_id": "chanon.near", "widget_name": "ChatGPT", "source_code": "// handle only ask once\n// handle waiting process to display\n\nState.init({\n  apiKey: \"\",\n  askQuestion: \"\",\n  respAnswer: \"Waiting for answer ...\",\n});\n\nconst queryURI = \"https://api.openai.com/v1/chat/completions\";\nconst token = \"Bearer \"; // fill api keys\nlet data = {\n  model: \"gpt-3.5-turbo\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"plan a 30 days trip to usa.\",\n    },\n  ],\n  temperature: 1,\n  top_p: 1,\n  n: 1,\n  stream: false,\n  max_tokens: 250,\n  presence_penalty: 0,\n  frequency_penalty: 0,\n};\nconst fetchAskChatGPT = (queryURI) => {\n  data.messages[0].content = state.askQuestion;\n  return asyncFetch(queryURI, {\n    method: \"POST\",\n    headers: {\n      Authorization: token + state.apiKey,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n};\n\nconst handleAskChatGPT = () => {\n  fetchAskChatGPT(queryURI).then((res) => {\n    // load into infinities scrolls\n    State.update({ respAnswer: res.body.choices[0].message.content });\n    console.log(res.body.choices[0].message.content);\n  });\n};\n\nreturn (\n  <div>\n    <input\n      value={state.apiKey}\n      onChange={(e) => State.update({ apiKey: e.target.value })} // react\n      placeholder=\"Please paste your chatgpt api key\"\n    />\n    <input\n      value={state.askQuestion}\n      onChange={(e) => State.update({ askQuestion: e.target.value })}\n      placeholder=\"Please type your question\"\n    />\n\n    <button class=\"btn btn-success\" onClick={handleAskChatGPT} disabled={false}>\n      Ask ChatGPT for DEPA\n    </button>\n    <div>{state.respAnswer}</div>\n  </div>\n);\n", "metadata": {"description": "Demo for DEPA BOS Game Course", "image": {"url": "https://www.depa.or.th/storage/app/media/Logo.png"}, "linktree": {"website": "depagoa.com"}, "tags": {"depa": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chanon.near/widget/ChatGPT", "fact_widget_deployments_id": "589888c6bde845f8fa014a453bf3cdc1", "inserted_timestamp": "2023-09-25T06:44:38.804Z", "modified_timestamp": "2023-09-25T06:44:38.804Z", "__row_index": 0}