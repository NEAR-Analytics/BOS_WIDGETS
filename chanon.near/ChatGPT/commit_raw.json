{"tx_hash": "4QdF6jqzP1JV79jVrssgDqGU9QQ2uH17wWLsf6PBoyMb", "action_id_social": "F6hN7r1o4mAaQjPjQ8HWoicq4o8L6heGaJmGvYFNHpzb-0-widget", "block_id": 100812002, "block_timestamp": "2023-09-10T13:20:06.148Z", "signer_id": "chanon.near", "widget_name": "ChatGPT", "source_code": "// handle only ask once\n// handle waiting process to display\n\nState.init({\n  apiKey: \"\",\n  askQuestion: \"\",\n  respAnswer: \"Waiting for answer ...\",\n});\n\nconst queryURI = \"https://api.openai.com/v1/chat/completions\";\nconst token = \"Bearer \"; // fill api keys\nlet data = {\n  model: \"gpt-3.5-turbo\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"plan a 30 days trip to usa.\",\n    },\n  ],\n  temperature: 1,\n  top_p: 1,\n  n: 1,\n  stream: false,\n  max_tokens: 250,\n  presence_penalty: 0,\n  frequency_penalty: 0,\n};\nconst fetchAskChatGPT = (queryURI) => {\n  data.messages[0].content = state.askQuestion;\n  return asyncFetch(queryURI, {\n    method: \"POST\",\n    headers: {\n      Authorization: token + state.apiKey,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n};\n\nconst handleAskChatGPT = () => {\n  fetchAskChatGPT(queryURI).then((res) => {\n    // load into infinities scrolls\n    State.update({ respAnswer: res.body.choices[0].message.content });\n    console.log(res.body.choices[0].message.content);\n  });\n};\n\nreturn (\n  <div>\n    <input\n      value={state.apiKey}\n      onChange={(e) => State.update({ apiKey: e.target.value })}\n      placeholder=\"Please paste your chatgpt api key\"\n    />\n    <input\n      value={state.askQuestion}\n      onChange={(e) => State.update({ askQuestion: e.target.value })}\n      placeholder=\"Please type your question\"\n    />\n\n    <button class=\"btn btn-success\" onClick={handleAskChatGPT} disabled={false}>\n      Ask ChatGPT\n    </button>\n    <div>{state.respAnswer}</div>\n  </div>\n);\n", "metadata": {"tags": {"ethdenver2023": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chanon.near/widget/ChatGPT", "fact_widget_deployments_id": "4eac018a57f25ae9fd92fc43050b5707", "inserted_timestamp": "2023-09-10T15:24:39.409Z", "modified_timestamp": "2023-09-10T15:24:39.409Z", "__row_index": 4}