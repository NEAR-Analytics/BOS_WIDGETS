{"tx_hash": "39uAV6mb4xbN1ALzxWizodSVVSneJhGL45DXSxjfmX7V", "action_id_social": "DUDCModsyYR41AdcuoNXjoYV5xPhskYA63SfsNed8FHP-0-widget", "block_id": 101921675, "block_timestamp": "2023-09-25T12:00:45.240Z", "signer_id": "chanon.near", "widget_name": "ChainlinkPriceFeed", "source_code": "State.init({\n  btc: 0.0, // USD\n});\n\nif (\n  state.chainId === undefined &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\n\n// Support only Sepolia Testnet\nif (state.chainId !== 11155111) {\n  return (\n    <div>\n      <h3>Wrong Network - We currently support the Sepolia testnet</h3>\n    </div>\n  );\n}\n\nconst DataConsumerV3 = \"0x4ABaD1D789AD951eCC39cCcf4606562250FE6ADd\"; // ETH/USD\n\nconst dataConsumerV3Abi = fetch(\n  \"https://gist.githubusercontent.com/taforyou/f9b0f927810911aa57e55be807808d15/raw/fab9410d6eaac9fe084f34bd1bc0f11358163d6a/gistfile1.json\"\n);\nif (!dataConsumerV3Abi.ok) {\n  return \"dataConsumerV3Abi is not ok\";\n}\n\nconst iface = new ethers.utils.Interface(dataConsumerV3Abi.body);\n\nconst getStakedBalance = (receiver) => {\n  const encodedData = iface.encodeFunctionData(\n    \"getChainlinkDataFeedLatestAnswer\"\n  );\n\n  return Ethers.provider()\n    .call({\n      to: DataConsumerV3,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      console.log(\"rawBalance \", parseInt(rawBalance, 16) / 100000000);\n      State.update({ btc: parseInt(rawBalance, 16) / 100000000 });\n    });\n};\n\nconst getDataFromChainlinkSmartContract = () => {\n  getStakedBalance().then((res) => {\n    console.log(res.body.choices[0].message.content);\n  });\n};\n\nreturn (\n  <div>\n    <label>BTC Price is {state.btc}</label>\n\n    <button class=\"btn btn-success\" onClick={getDataFromChainlinkSmartContract}>\n      Get BTC Price\n    </button>\n  </div>\n);\n", "metadata": {"name": "ChainlinkPriceFeed", "tags": {"chainlink": "", "depa": "", "ethdenver2023": null}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chanon.near/widget/ChainlinkPriceFeed", "fact_widget_deployments_id": "3d672893ae6b5e3a233e907655d55f03", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}