{"tx_hash": "8iVocFUnFkafeNMvDKRiaCvGLZzfxcCfHzRcebWvEcQ", "action_id_social": "ABqznjSDcJ6byeTWsxHGr5qo9msrYBHKJEXnSp1j3snw-0-widget", "block_id": 116124218, "block_timestamp": "2024-04-04T16:28:46.376Z", "signer_id": "ac.mintbase.near", "widget_name": "storage_details", "source_code": "const storageBalances = props.storageBalances || {};\nconst expandedContracts = props.expandedContracts || {};\n\nconst ContractCard = styled.div`\n  background-color: #ffffff;\n  border-radius: 10px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  width: 100%;\n`;\n\nconst ContractHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n`;\n\nconst ContractDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 1rem;\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n`;\n\nconst Button = styled.button`\n  padding: 0.5rem 1rem;\n  font-size: 1rem;\n  color: #F5F7F8;\n  background-color: #272829;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  margin-top: 0.5rem;\n\n  &:hover {\n    background-color: #31363f;\n  }\n`;\n\nconst toggleContract = (contractId) => {\n  Near.call(\"test.near\", \"toggle_contract\", { contract_id: contractId });\n};\n\nconst storageWithdraw = (contractId) => {\n  Near.call(contractId, \"storage_withdraw\", {}, \"30000000000000\", \"1\");\n};\n\nconst storageUnregister = (contractId) => {\n  Near.call(contractId, \"storage_unregister\", {}, \"30000000000000\", \"1\");\n};\n\nreturn Object.entries(storageBalances)\n  .filter(\n    ([_, storageBalanceOf]) =>\n      storageBalanceOf != null &&\n      !!storageBalanceOf.total &&\n      !!storageBalanceOf.available\n  )\n  .map(([contractId, storageBalanceOf]) => {\n    const total = Big(storageBalanceOf.total)\n      .div(Big(10).pow(24))\n      .round(3)\n      .toString();\n    const available = Big(storageBalanceOf.available)\n      .div(Big(10).pow(24))\n      .round(3)\n      .toString();\n    return (\n      <ContractCard key={contractId}>\n        <ContractHeader onClick={() => toggleContract(contractId)}>\n          <label style={{ color: \"#272829\" }}>\ud83d\udcdd {contractId}</label>\n          <span>{expandedContracts[contractId] ? \"\u25b2\" : \"\u25bc\"}</span>\n        </ContractHeader>\n        {expandedContracts[contractId] && (\n          <ContractDetails>\n            <div style={{ color: \"#272829\" }}>\u5df2\u62b5\u62bc: {total}</div>\n            <div style={{ color: \"#272829\" }}>\u53ef\u7528: {available}</div>\n            <ButtonGroup>\n              {storageBalanceOf.available &&\n                Number(storageBalanceOf.available) > 0 && (\n                  <Button onClick={() => storageWithdraw(contractId)}>\n                    \u91cb\u653e {available} NEAR\n                  </Button>\n                )}\n              <Button onClick={() => storageUnregister(contractId)}>\n                \u70ba {total} NEAR \u8a3b\u92b7\u5e33\u6236\n              </Button>\n            </ButtonGroup>\n          </ContractDetails>\n        )}\n      </ContractCard>\n    );\n  });\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/ac.mintbase.near/widget/storage_details", "fact_widget_deployments_id": "191120e155a88299c247f11890eb9f90", "inserted_timestamp": "2024-04-04T17:32:58.816Z", "modified_timestamp": "2024-04-04T18:35:57.019Z", "__row_index": 0}