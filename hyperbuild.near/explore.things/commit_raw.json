{"tx_hash": "CC9GcHy83rphSqwYdFGRGRyFvEi4uTU9wceCkLZk2NT3", "action_id_social": "4DSN3SK9hpm79UiPYgKx3J9sAV4XbSPNkc15u1u7PCXy-0-widget", "block_id": 120166680, "block_timestamp": "2024-05-31T23:45:45.327Z", "signer_id": "hyperbuild.near", "widget_name": "explore.things", "source_code": "const type = props.type ?? \"type\";\nconst [searchTerm, setSearchTerm] = useState(\"\");\nconst [hideDetails, setHideDetails] = useState(true);\nconst [selectedPath, setSelectedPath] = useState(null);\nconst [object, setObject] = useState(Social.get(`*/${type}/*`, \"final\") || {});\nconst [filteredResults, setFilteredResults] = useState([]);\nuseEffect(() => {\n  const results = {};\n  Object.entries(object).forEach(([creator, detail]) => {\n    const entries = detail[type] || {};\n    Object.keys(entries).forEach((id) => {\n      const path = `${creator}/${type}/${id}`;\n      if (path.includes(searchTerm)) {\n        if (!results[id]) {\n          results[id] = { count: 0, accounts: new Set() };\n        }\n        results[id].count++;\n        results[id].accounts.add(creator);\n      }\n    });\n  });\n  setFilteredResults(\n    Object.entries(results)\n      .sort((a, b) => b[1].count - a[1].count)\n      .map(([id, data]) => ({\n        id,\n        accounts: Array.from(data.accounts),\n        count: data.count,\n      }))\n  );\n}, [searchTerm, object]);\nconst handleInputChange = (event) => {\n  setSearchTerm(event.target.value);\n};\nconst toggleModal = (path) => {\n  setSelectedPath(path);\n  setHideDetails(!hideDetails);\n};\nconst Profiles = styled.a`\n  display: inline-block;\n  position: relative;\n  img {\n    object-fit: cover;\n    border-radius: 50%;\n    width: 100%;\n    height: 100%;\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\n  }\n  &:hover img {\n    transform: scale(1.1);\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n  }\n`;\nreturn (\n  <div className=\"m-3\">\n    <input\n      type=\"text\"\n      value={searchTerm}\n      onChange={handleInputChange}\n      placeholder={`\ud83d\udd2d  Search for a type of things...`}\n    />\n    {!hideDetails ? (\n      <div className=\"m-3 mt-4\">\n        <Widget\n          src=\"hack.near/widget/explore.creators\"\n          props={{ id: selectedPath.split(\"/\").pop() }}\n        />\n        <button className=\"m-2 btn-sm\" onClick={() => toggleModal(\"\")}>\n          Reset\n        </button>\n        <Widget\n          src=\"hack.near/widget/explore.view\"\n          props={{ path: selectedPath, showInput: false }}\n        />\n      </div>\n    ) : (\n      <div className=\"m-3 mt-4\">\n        {filteredResults.map(({ id, accounts, count }) => (\n          <div className=\"d-flex flex-row justify-content-between\">\n            <h5 className=\"mt-2\">\n              <b>{id}</b>\n            </h5>\n            <div>\n              {accounts.map((creator) => (\n                <Profiles\n                  key={creator}\n                  onClick={() => toggleModal(`${creator}/${type}/${id}`)}\n                >\n                  <span className=\"d-inline-block\">\n                    <Widget\n                      src=\"mob.near/widget/ProfileImage\"\n                      props={{\n                        accountId: creator,\n                        imageStyle: {\n                          height: \"38px\",\n                          width: \"38px\",\n                        },\n                        imageClassName: \"\",\n                      }}\n                    />\n                  </span>\n                </Profiles>\n              ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hyperbuild.near/widget/explore.things", "fact_widget_deployments_id": "685e08899898298612ff4d13bb1754df", "inserted_timestamp": "2024-06-01T02:00:15.259Z", "modified_timestamp": "2024-06-01T02:00:15.259Z", "__row_index": 0}