{"tx_hash": "CC9GcHy83rphSqwYdFGRGRyFvEi4uTU9wceCkLZk2NT3", "action_id_social": "4DSN3SK9hpm79UiPYgKx3J9sAV4XbSPNkc15u1u7PCXy-0-widget", "block_id": 120166680, "block_timestamp": "2024-05-31T23:45:45.327Z", "signer_id": "hyperbuild.near", "widget_name": "explore.view.node", "source_code": "const key = props.key;\nconst label = props.label;\nconst node = props.node;\nconst type = props.type;\nconst path = props.path;\nconst setPath = props.setPath;\nconst history = props.history;\nconst setHistory = props.setHistory;\nconst setType = props.setType;\nconst isRoot = props.isRoot;\nconst styles = {\n  subject: {\n    fontFamily: \"Arial, sans-serif\",\n    fontWeight: \"bold\", // Bold text\n    cursor: \"pointer\",\n  },\n};\n\nState.init({\n  expanded: false,\n});\nfunction handleExpand() {\n  State.update({ expanded: !state.expanded });\n}\nfunction handleInto() {\n  // Check if node is an object and not null\n  if (node && typeof node === \"object\") {\n    setPath(path);\n    setHistory([...history, path]);\n    setType(type);\n  } else {\n    console.error(\"Invalid node structure\");\n  }\n}\nfunction handleBack() {\n  const newPath = history[history.length - 2] || \"\";\n  setPath(newPath);\n  setHistory(history.slice(0, -1));\n}\n// Basic Button Style\nconst Button = styled.button`\n  text-transform: lowercase !important;\n  display: inline-block;\n  text-align: center;\n  text-decoration: none;\n  border: 2px outset #333;\n  background-color: #f5f5f5;\n  cursor: pointer;\n  color: #333;\n`;\nconst ChildNode = styled.div`\n  margin-left: ${String(path).split(\"/\").length * 4}px;\n`;\nfunction renderView() {\n  // Root vs Leaf?\n  return <Widget src=\"efiz.near/widget/View\" props={{ path, type }} />;\n}\nfunction getType() {\n  const parts = String(path).split(\"/\");\n  if (parts.length === 1) {\n    return \"account\";\n  } else if (parts.length === 2) {\n    return parts[1];\n  } else {\n    const standard = parts[1];\n    if (standard === \"thing\") {\n      // We're gonna grab the type from the thing itself\n    }\n    return standard;\n  }\n}\n\nreturn (\n  <div>\n    <div>\n      {/** CONTROLLER */}\n      {history.length > 1 && isRoot && (\n        <Button onClick={handleBack}>back</Button>\n      )}\n      {isRoot ? (\n        <div style={styles?.subject}>{label} (root)</div>\n      ) : (\n        <div style={styles?.subject}>{path}</div>\n      )}\n      <Button onClick={handleExpand}>{state.expanded ? \"-\" : \"+\"}</Button>\n    </div>\n    {state.expanded && (\n      <div>\n        {/** EDGES */}\n        {node && typeof node === \"object\" ? (\n          Object.entries(node).map(([key, val]) => (\n            <ChildNode>\n              <Widget\n                src=\"hyperbuild.near/widget/explore.view.node\"\n                props={{\n                  key,\n                  label: key,\n                  node: val,\n                  type: getType(),\n                  path: `${path}/${key}`,\n                  setPath: setPath,\n                  history,\n                  setHistory: setHistory,\n                  isRoot: false,\n                }}\n              />\n            </ChildNode>\n          ))\n        ) : (\n          <>\n            {/** VIEW */}\n            <div>{renderView()}</div>\n          </>\n        )}\n      </div>\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hyperbuild.near/widget/explore.view.node", "fact_widget_deployments_id": "6e2b91c41ecc7659f88469b44f7d5899", "inserted_timestamp": "2024-06-01T02:00:15.259Z", "modified_timestamp": "2024-06-01T02:00:15.259Z", "__row_index": 0}