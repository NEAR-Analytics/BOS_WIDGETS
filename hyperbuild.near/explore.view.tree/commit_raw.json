{"tx_hash": "CC9GcHy83rphSqwYdFGRGRyFvEi4uTU9wceCkLZk2NT3", "action_id_social": "4DSN3SK9hpm79UiPYgKx3J9sAV4XbSPNkc15u1u7PCXy-0-widget", "block_id": 120166680, "block_timestamp": "2024-05-31T23:45:45.327Z", "signer_id": "hyperbuild.near", "widget_name": "explore.view.tree", "source_code": "const labelStyles = {\n  fontFamily: \"Arial, sans-serif\",\n  fontSize: \"1.2em\", // Slightly larger font size\n  fontWeight: \"bold\", // Bold text\n  marginRight: \"10px\",\n};\n/**\n * Takes in a rootPath and rootType\n */\nconst rootPath = props.rootPath || context.accountId || \"hyperfiles.near\";\nconst rootType = props.rootType || \"account\";\nconst rootNode = props.rootNode || {};\nconst [inputValue, setInputValue] = useState(\"\");\nState.init({\n  path: rootPath,\n  type: rootType,\n  history: [rootPath],\n});\nfunction setPath(path) {\n  State.update({ path });\n}\nfunction setHistory(history) {\n  State.update({ history });\n}\nfunction setType(type) {\n  State.update({ type });\n}\nfunction setRoot(newPath, newType) {\n  State.update({\n    path: newPath,\n    type: newType,\n  });\n}\nconst handleInputChange = (event) => {\n  setInputValue(event.target.value);\n};\nconst handleExploreClick = () => {\n  setPath(inputValue); // Assuming setPath updates the state as needed\n};\n// WHEN A NEW ROOT IS SET //\n// GET DATA AT THIS PATH //\nfunction getNode(path, type) {\n  const parts = path.split(\"/\");\n  let value = {};\n  // ACCOUNT //\n  if (type === \"account\") {\n    if (parts.length > 1) {\n      // GRAPH // FOLLOW // BACK TO ACCOUNT : WORKING\n      setRoot(parts[3], \"account\");\n    } else {\n      if (parts[0] !== \"*\") {\n        parts.push(\"**\");\n      }\n      value = Social.get(parts.join(\"/\"), \"final\");\n      return value;\n    }\n    // THING //\n  } else if (type === \"thing\") {\n    // path: \"everything\"\n    // type: \"thing\"\n    return rootNode; // Or should \"everything\" be \"*\"?\n    // PROFILE //\n  } else if (type === \"profile\") {\n    value = Social.get(parts.join(\"/\"), \"final\");\n    // POST : WIP //\n  } else if (type === \"post\") {\n    value = path;\n    // NAMETAG : WIP //\n  } else if (type === \"nametag\") {\n    if (parts.length > 2) {\n      if (parts.length === 3) {\n        // BACK TO ACCOUNT\n        setRoot(parts[3], \"account\");\n      } else if (parts.length === 4) {\n        // ALL TAGS BY ACCOUNT\n        value = Social.keys(`${parts[0]}/profile/tags/*`, \"final\");\n      } else {\n        // THIS TAG\n        value = parts[5];\n      }\n    }\n  } else {\n    parts.push(\"**\");\n    value = Social.get(parts.join(\"/\"), \"final\");\n    return value;\n  }\n}\nconst node = getNode(state.path, state.type);\nreturn (\n  <div className=\"p-3 border bg-light\">\n    <label htmlFor=\"pathInput\" style={labelStyles}>\n      Enter Profile Account ID:\n    </label>\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\n      <input\n        id=\"pathInput\"\n        type=\"text\"\n        value={inputValue}\n        onChange={handleInputChange}\n        placeholder=\"e.g. hyperfiles.near\"\n      />\n      <button onClick={handleExploreClick}>Load Data Tree</button>\n    </div>\n    <hr />\n    <Widget\n      src=\"hyperbuild.near/widget/explore.view.node\"\n      props={{\n        label: state.path,\n        node,\n        type: state.type,\n        path: state.path,\n        setPath: setPath,\n        history: state.history,\n        setHistory: setHistory,\n        setType: setType,\n        isRoot: true,\n        styles: {\n          subject: {\n            fontFamily: \"Arial, sans-serif\",\n            fontSize: \"2em\",\n            lineHeight: \"1.25\",\n            fontWeight: 300,\n            cursor: \"pointer\",\n          },\n        },\n      }}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hyperbuild.near/widget/explore.view.tree", "fact_widget_deployments_id": "bb3be64f12952abab8224cb9c97a4491", "inserted_timestamp": "2024-06-01T02:00:15.259Z", "modified_timestamp": "2024-06-01T02:00:15.259Z", "__row_index": 0}