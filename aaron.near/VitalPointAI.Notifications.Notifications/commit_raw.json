{"tx_hash": "E8iwmv6NJZLhTKsMwtVFNeokcRvMPib1jREzHtp85EqY", "action_id_social": "2hfdHty1hF2gRRd188QGAuwBnXMYdHpSCnYXfUj63Ss2-0-widget", "block_id": 104719315, "block_timestamp": "2023-11-01T22:37:31.456Z", "signer_id": "aaron.near", "widget_name": "VitalPointAI.Notifications.Notifications", "source_code": "let {\n  isLocalStorageSupported,\n  isNotificationSupported,\n  isPermisionGranted,\n  isPushManagerSupported,\n  handleTurnOn,\n  handleOnCancel,\n  getNotificationLocalStorage,\n  handleOnCancelBanner,\n  accountId,\n  showLimit,\n  showInBox,\n  bannerBorderRadius,\n  iOSDevice,\n  iOSVersion,\n  recomendedIOSVersion,\n  navigate,\n} = props;\n\nshowInBox = showInBox ?? false;\n\nconst Header = styled.div`\n  display: flex;\n  padding: ${(props) =>\n    props.showInBox ? \"16px 16px 16px 24px\" : \"48px 16px 24px 16px\"};\n  align-items: center;\n  align-self: stretch;\n`;\n\nconst Title = styled.div`\n  flex: 1 0 0;\n  font: var(--text-xl);\n  color: var(--sand12);\n  font-weight: 500;\n`;\n\nconst Settings = styled(\"Link\")`\n  display: flex;\n  width: 40px;\n  height: 40px;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  border-radius: 50px;\n  border: 1px solid var(--sand6);\n  background: var(--sand1);\n`;\n\nconst Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 592px;\n  margin: ${(props) => (props.showInBox ? \"\" : \"0 auto\")};\n\n  .notification-item {\n    &:first-child {\n      border-top: none;\n    }\n  }\n`;\n\nconst bannerNotNowTS = getNotificationLocalStorage()?.bannerNotNowTS;\nconst permission = getNotificationLocalStorage()?.permission;\n\nState.init({\n  showBanner: !bannerNotNowTS && !permission,\n});\n\nconst checkShowBanner = () => {\n  const bannerNotNowTS = getNotificationLocalStorage()?.bannerNotNowTS;\n  const permission = getNotificationLocalStorage()?.permission;\n  State.update({ showBanner: !bannerNotNowTS && !permission });\n};\n\nreturn (\n  <Card className={showInBox ? \"\" : \"container-xl\"} showInBox={showInBox}>\n    <Header showInBox={showInBox}>\n      <Title>Notifications</Title>\n      <Widget\n        src=\"aaron.near/widget/VitalPointAI.DIG.Button\"\n        props={{\n          navigate,\n          icon: \"ph-bold ph-gear-six\",\n          variant: \"secondary\",\n          fill: \"outline\",\n        }}\n      />\n    </Header>\n    {state.showBanner && (\n      <Widget\n        src=\"near/widget/NearOrg.Notifications.Banner\"\n        props={{\n          handleTurnOn: async () => {\n            handleTurnOn(accountId, checkShowBanner);\n          },\n          handleOnCancel: () => {\n            handleOnCancelBanner();\n            checkShowBanner();\n          },\n          radius: bannerBorderRadius,\n          iOSDevice,\n          iOSVersion,\n          recomendedIOSVersion,\n        }}\n      />\n    )}\n\n    <Widget\n      src=\"aaron.near/widget/VitalPointAI.Notifications.NotificationsList\"\n      props={{ showLimit, showInBox }}\n    />\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/aaron.near/widget/VitalPointAI.Notifications.Notifications", "fact_widget_deployments_id": "ed0d2bd557c15e08dfd897d6f4c958ba", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}