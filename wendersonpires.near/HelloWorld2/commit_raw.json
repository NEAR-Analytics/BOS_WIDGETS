{"tx_hash": "9e8mWbrzcBvLAzn78Vm4SjK9aWojehHtwAzheDU6nvUB", "action_id_social": "EFhCXXjVYW9MnfBMb3jDicirdH8mpUGkefu5tDEQp4ic-0-widget", "block_id": 114340313, "block_timestamp": "2024-03-08T16:50:49.592Z", "signer_id": "wendersonpires.near", "widget_name": "HelloWorld2", "source_code": "State.init({ stores: [] });\n\nconst useStore = (storeKey, obj) => {\n  // store was not initialized yet & obj is available...\n  if (!state.stores.includes(storeKey) && obj) {\n    const initParsedObj = {};\n    Object.keys(obj).forEach(\n      (key) => (initParsedObj[`${storeKey}_${key}`] = obj[key])\n    );\n\n    const updatedStores = state.stores\n      ? [...state.stores, storeKey]\n      : [storeKey];\n    State.update({ ...state, ...initParsedObj, stores: updatedStores });\n  }\n\n  //   if obj is not sent, then, return its \"values\" and \"update\" method\n  if (!obj) {\n    const getParsedObj = {};\n    Object.keys(state).forEach((key) => {\n      if (key.includes(`${storeKey}_`)) {\n        getParsedObj[key.replace(`${storeKey}_`, \"\")] = state[key];\n      }\n    });\n    return {\n      // values\n      ...getParsedObj,\n      // update method\n      update: (updateObj) => {\n        const updateParsedObj = {};\n        Object.keys(updateObj).forEach(\n          (key) => (updateParsedObj[`${storeKey}_${key}`] = updateObj[key])\n        );\n        State.update(updateParsedObj);\n      },\n    };\n  }\n\n  // if obj is sent, then, return \"update\" and \"getValues\"\n  return {\n    update: (updateObj) => {\n      const updateParsedObj = {};\n      Object.keys(updateObj).forEach(\n        (key) => (updateParsedObj[`${storeKey}_${key}`] = updateObj[key])\n      );\n      State.update(updateParsedObj);\n    },\n    getValues: () => {\n      const getParsedObj = {};\n      Object.keys(state).forEach((key) => {\n        if (key.includes(`${storeKey}_`)) {\n          getParsedObj[key.replace(`${storeKey}_`, \"\")] = state[key];\n        }\n      });\n      return getParsedObj;\n    },\n  };\n};\n\nconst Home = () => {\n  const fooStore = useStore(\"fooStore\", { username: \"wendz\", age: 12 });\n  const useFoo = fooStore.getValues();\n  const { username, age } = useFoo;\n\n  const setName = () => fooStore.update({ username: `day - ${Date.now()}` });\n\n  return (\n    <>\n      <p>\n        Hello {username}. Your age is {age}\n      </p>\n      <button onClick={setName}>Change name</button>\n      <br />\n      <br />\n      <Counter />\n    </>\n  );\n};\n\nconst Counter = () => {\n  const useFoo = useStore(\"fooStore\");\n  const { username, update } = useFoo;\n\n  const setNameAgain = () => update({ username: `Mak Lovin - ${Date.now()}` });\n\n  return (\n    <>\n      <p>butikin name: {username}</p>\n      <button onClick={setNameAgain}>Change Butikin name</button>\n    </>\n  );\n};\n\nreturn <Home />;\n", "metadata": {"fork_of": "wendersonpires.near/widget/HelloWorld@102475434"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/wendersonpires.near/widget/HelloWorld2", "fact_widget_deployments_id": "119fd99d444d14230b8e502ae5f7a177", "inserted_timestamp": "2024-03-08T18:27:11.788Z", "modified_timestamp": "2024-03-08T18:27:11.788Z", "__row_index": 0}