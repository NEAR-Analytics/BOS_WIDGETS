{"tx_hash": "8Z718nfbf8FXMqRkk9RsNfgrzHTaqp9kt1Ah89RPtxGh", "action_id_social": "CKgU7NpRaEtrLqXvPsh7xFbym2Xdba1Z15o98MXQhXLV-0-widget", "block_id": 113916454, "block_timestamp": "2024-03-02T00:59:50.278Z", "signer_id": "mob.near", "widget_name": "Tokens.Inner", "source_code": "const accountId = props.accountId;\nif (!accountId) {\n  return \"\";\n}\nconst [tokens, setTokens] = useState(false);\nconst [loading, setLoading] = useState(true);\n\nuseEffect(() => {\n  setTokens(false);\n  setLoading(true);\n  asyncFetch(\n    `https://api.fastnear.com/v0/account/${accountId}/ft_with_balances`\n  )\n    .then((res) => {\n      if (!res.ok) {\n        console.error(\"Failed to fetch ft_with_balances\", res);\n        return;\n      }\n      setTokens(res.body.tokens);\n    })\n    .finally(() => setLoading(false));\n}, [accountId]);\n\nconst Wrapper = styled.div`\n.header {\n  margin-bottom: 1em;\n}\n.token {\n  margin-bottom: 1em;\n  overflow: hidden;\n}\n`;\n\nconst renderToken = (tokenId, balance) => {\n  return (\n    <Widget\n      loading=\"\"\n      src=\"mob.near/widget/Tokens.TokenWithBalance\"\n      props={{ tokenId, balance }}\n    />\n  );\n};\n\nreturn (\n  <Wrapper>\n    <div className=\"header\">\n      Fungible Tokens of\n      <Widget src=\"mob.near/widget/N.ProfileLine\" props={{ accountId }} />\n    </div>\n    <div className=\"actions\">\n      {tokens\n        ? Object.entries(tokens)\n            .filter(([tokenId, balance]) => balance !== null)\n            .map(([tokenId, balance]) => (\n              <div key={tokenId} className=\"token\">\n                {renderToken(tokenId, balance)}\n              </div>\n            ))\n        : \"Loading\"}\n    </div>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/Tokens.Inner", "fact_widget_deployments_id": "278bda064adcd74abf81bb6fec04a945", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 5}