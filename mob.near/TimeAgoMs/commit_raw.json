{"tx_hash": "5BqzpFH4Xpm5JmHNTCjEH2VFu9Yid7pV39Jz2B7PdDYP", "action_id_social": "Gy6NpJeHez6Kavdkb6QtBWzEaXsGLjfev4tU1dYLcTGJ-0-widget", "block_id": 113254687, "block_timestamp": "2024-02-21T01:04:16.662Z", "signer_id": "mob.near", "widget_name": "TimeAgoMs", "source_code": "if (!props.timeMs) {\n  return \"unknown\";\n}\n\nconst timeMs = parseFloat(props.timeMs);\nconst [dateNow, setDateNow] = useState(new Date());\n\nconst date = new Date(timeMs);\nconst title = `${date.toLocaleTimeString([], {\n  hour: \"2-digit\",\n  minute: \"2-digit\",\n})} ${date.toLocaleDateString([], {\n  day: \"numeric\",\n  month: \"short\",\n  year: \"numeric\",\n})}`;\n\nconst timeAgo = (diffSec) =>\n  diffSec < 60000\n    ? `${(diffSec / 1000) | 0}s`\n    : diffSec < 3600000\n    ? `${(diffSec / 60000) | 0}m`\n    : diffSec < 86400000\n    ? `${(diffSec / 3600000) | 0}h`\n    : date.getFullYear() === dateNow.getFullYear()\n    ? date.toLocaleString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n      })\n    : date.toLocaleString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n        year: \"numeric\",\n      });\n\nconst timeoutDelay = (diffSec) =>\n  diffSec < 60000\n    ? 1000\n    : diffSec < 3600000\n    ? (((diffSec / 60000) | 0) + 1) * 60000 - diffSec\n    : 60000;\n\nconst diffSec = dateNow.getTime() - timeMs;\n\nuseEffect(() => {\n  const id = setTimeout(() => {\n    setDateNow(new Date());\n  }, timeoutDelay(diffSec));\n\n  return () => {\n    clearTimeout(id);\n  };\n}, [dateNow]);\n\nreturn (\n  <span className={props.className} title={title}>\n    {timeAgo(diffSec)}\n  </span>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/TimeAgoMs", "fact_widget_deployments_id": "a4149117938f4069eeca24341ed8256f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}