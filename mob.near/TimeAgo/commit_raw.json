{"tx_hash": "CYRK4oPz4nDAgWYkv4UfXSEZWghdMFAqdzCT93CgY67r", "action_id_social": "AtZwbR6pM71mrZJ2pQqkrLJSpnH7ynCrwzsGbEdvBDS8-0-widget", "block_id": 97556750, "block_timestamp": "2023-07-28T20:50:45.925Z", "signer_id": "mob.near", "widget_name": "TimeAgo", "source_code": "if (props.now) {\n  return \"now\";\n}\n\nconst keyPath = props.keyPath;\nlet blockHeight = props.blockHeight ? parseInt(props.blockHeight) : undefined;\n\nif (blockHeight === undefined && keyPath) {\n  blockHeight = Social.keys(keyPath, undefined, {\n    return_type: \"BlockHeight\",\n  });\n  if (blockHeight === null) {\n    return \"Loading\";\n  }\n  keyPath.split(\"/\").forEach((key) => {\n    blockHeight = blockHeight[key];\n  });\n}\n\nif (!blockHeight) {\n  return \"unknown\";\n}\n\nconst res = fetch(`https://api.near.social/time?blockHeight=${blockHeight}`);\nif (!res) {\n  return \"Loading\";\n}\nif (!res.ok || res.body === \"null\") {\n  return \"unknown\";\n}\n\nconst timeMs = parseFloat(res.body);\n\nconst date = new Date(timeMs);\nconst title = `${date.toLocaleTimeString([], {\n  hour: \"2-digit\",\n  minute: \"2-digit\",\n})} ${date.toLocaleDateString([], {\n  day: \"numeric\",\n  month: \"short\",\n  year: \"numeric\",\n})}`;\n\nconst timeAgo = (diffSec) =>\n  diffSec < 60000\n    ? `${(diffSec / 1000) | 0}s`\n    : diffSec < 3600000\n    ? `${(diffSec / 60000) | 0}m`\n    : diffSec < 86400000\n    ? `${(diffSec / 3600000) | 0}h`\n    : `${(diffSec / 86400000) | 0}d`;\n\nreturn (\n  <span className={props.className} title={title}>\n    {timeAgo(Date.now() - timeMs)}\n  </span>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/TimeAgo", "fact_widget_deployments_id": "7d38716e63a5829427e9673064d98775", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 4}