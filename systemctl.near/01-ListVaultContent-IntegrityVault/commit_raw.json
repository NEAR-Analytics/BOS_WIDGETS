{"tx_hash": "HYtz68kmZEVvc3QtFMCAVvTLb6dD1oopNhATNAWQ2xea", "action_id_social": "SLEKfpodnA7aQ6BmZMEHejYAW6FGkJF8kRZLwfhz37D-0-widget", "block_id": 105929084, "block_timestamp": "2023-11-17T21:47:27.345Z", "signer_id": "systemctl.near", "widget_name": "01-ListVaultContent-IntegrityVault", "source_code": "const accountId = props.accountId ?? context.accountId; // Get Account ID\nlet blockHeight = props.blockHeight ? parseInt(props.blockHeight) : undefined; // Set initial BlockHeight\nconst profile = Social.getr(`${accountId}/profile`); // Get Profile Data\nconst entry =\n  props.entry ?? Social.getr(`${accountId}/postEvidenceData`, blockHeight); // Get last Evidence Entry\n\n// Styled component (For evidence)\nconst Wrapper = styled.div`\n  width: 100%;\n  display: flex;\n  padding: 2rem 3rem;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 2rem;\n  border-radius: 0.5rem;\n  border: 1px solid var(--ui-elements-light, #eceef0);\n  background: var(--background-light, #fafafa);\n`;\n\n// Styled component CONTAINER (For loading animation)\nconst Container = styled.div`\n  padding: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\n// Styled component Loader (For loading animation)\nconst Loader = styled.div`\n  border-width: 0.5rem;\n  border-style: solid;\n  border-color: purple purple purple purple;\n  width: 3.625rem;\n  height: 3.625rem;\n  border-radius: 50%;\n  position: relative;\n  -webkit-animation: spin 2s infinite;\n  animation: spin 2s infinite;\n\n  &:before,\n  &:after {\n    content: \"\";\n    width: 0.5rem;\n    height: 0.5rem;\n    border-radius: 50%;\n    background: purple;\n    position: absolute;\n    left: 0.125rem;\n  }\n\n  &:before {\n    top: 0.063rem;\n  }\n\n  &:after {\n    bottom: 0.063rem;\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\n// If the current user is not logged, show loading animation\nif (!entry) {\n  return (\n    <Container>\n      <Loader />\n    </Container>\n  );\n}\n\n// If the current user has no data, show loading animation\nif (!props.entry && !blockHeight) {\n  blockHeight = Social.keys(`${accountId}/postEvidenceData`, undefined, {\n    return_type: \"BlockHeight\",\n  })[accountId];\n  if (!blockHeight) {\n    return (\n      <Container>\n        <Loader />\n      </Container>\n    );\n  }\n}\n\n// Get Profile link\nconst profileLink = (c) => (\n  <a\n    className=\"text-decoration-none\"\n    href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n  >\n    {c}\n  </a>\n);\n\nconst listEvidenceData = []; // Array vacio\n\nconst indexData = Social.keys(`${accountId}/postEvidenceData`, \"final\", {\n  return_type: \"History\",\n});\n\nindexData[accountId].postEvidenceData.forEach((ii) => {\n  let singleEntry = Social.getr(`${accountId}/postEvidenceData`, ii);\n  listEvidenceData.push(singleEntry);\n});\n\n// console.log(listEvidenceData)\n\n// Evidence\nreturn (\n  <div style={{ maxWidth: \"100%\" }}>\n    {/* Profile Wiget */}\n    <Widget src={\"mob.near/widget/ProfileLarge\"} />\n\n    {/* Evidence container */}\n    <div className=\"d-flex align-items-start\">\n      <div className=\"ms-2 flex-grow-1\" style={{ minWidth: 0 }}>\n        {/* Iterate over listEvidenceData and render each entry */}\n        {listEvidenceData.reverse().map((entry, index) => (\n          <div\n            key={index}\n            style={{\n              padding: \"1.5rem 0\",\n              borderTop: \"1px solid #e9e9e9\",\n              borderBottom: \"1px solid #e9e9e9\",\n            }}\n          >\n            {/* Entry Title */}\n            <div style={{ padding: \"1rem 0 0 1.5rem\" }}>\n              {entry.data.title && <b>Title: {entry.data.title}</b>}\n            </div>\n\n            {/* Entry Date */}\n            <div style={{ padding: \"1rem 0 0 1.5rem\" }}>\n              {entry.id && <span>Entry ID: {entry.id}</span>}\n            </div>\n\n            {/* Entry observations */}\n            <div style={{ padding: \"1rem 0 0 1.5rem\" }}>\n              {entry.data.context && <span>Obs: {entry.data.context}</span>}\n            </div>\n\n            {/* Evidence URL */}\n            <div style={{ padding: \"1rem 0 0 1.5rem\" }}>\n              {entry.data.fileURL && (\n                <a href={entry.data.fileURL}>IPFS URL: {entry.data.fileURL}</a>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/systemctl.near/widget/01-ListVaultContent-IntegrityVault", "fact_widget_deployments_id": "acab073bb27e31d874057e23faf991f7", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}