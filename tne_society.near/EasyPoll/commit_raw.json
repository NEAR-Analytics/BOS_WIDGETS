{"tx_hash": "4cJwwMwYBaMBRv8atvmyWv7ofXi4SiZZA2UdZxVEeZ7h", "action_id_social": "3oxSaK2DwF4dV7T6zaRpXhYXmqCqsoePJyFQ7KZo78hc-0-widget", "block_id": 96314351, "block_timestamp": "2023-07-12T17:24:48.287Z", "signer_id": "tne_society.near", "widget_name": "EasyPoll", "source_code": "const widgetOwner = \"sking.near\";\r\n\r\nconst page = (props.page ?? \"OFFICIAL_POLLS\").toUpperCase();\r\n\r\nconst tabs = {\r\n  OFFICIAL_POLLS: {\r\n    text: \"Official Polls by NDC\",\r\n    description:\r\n      \"Explore polls officially conducted by the NDC. These are verified, authoritative, and can provide valuable insights! Participating in the Official Polls by the NDC may eventually contribute to your on-chain reputation!\",\r\n    href: `#/${widgetOwner}/widget/EasyPoll?page=official_polls`,\r\n    active: page === \"OFFICIAL_POLLS\",\r\n  },\r\n  PUBLIC_POLLS: {\r\n    text: \"All Public Polls\",\r\n    description:\r\n      \"Dive into the world of public opinion. These are polls created by users like you, a melting pot of diverse thoughts and perspectives!\",\r\n    href: `#/${widgetOwner}/widget/EasyPoll?page=public_polls`,\r\n    active: page === \"PUBLIC_POLLS\",\r\n  },\r\n  MY_POLLS: {\r\n    text: \"My Polls\",\r\n    description:\r\n      \"Your personal polling station! Manage and review your own polls, watch them gain traction, and get insights from responses.\",\r\n    href: `#/${widgetOwner}/widget/EasyPoll?page=my_polls`,\r\n    active: page === \"MY_POLLS\",\r\n  },\r\n  CREATE_POLL: {\r\n    href: `#/${widgetOwner}/widget/EasyPoll?page=create_poll`,\r\n    active: page === \"CREATE_POLL\",\r\n    hideSidebar: true,\r\n  },\r\n  DELETE_POLL: {\r\n    href: (src, blockHeight) =>\r\n      `#/${widgetOwner}/widget/EasyPoll?page=delete_poll&src=${src}`,\r\n    active: page === \"DELETE_POLL\",\r\n    hideSidebar: true,\r\n  },\r\n  EDIT_POLL: {\r\n    href: (src, blockHeight) =>\r\n      `#/${widgetOwner}/widget/EasyPoll?page=create_poll&src=${src}`,\r\n    active: page === \"EDIT_POLL\",\r\n    hideSidebar: true,\r\n  },\r\n  VIEW_POLL: {\r\n    href: (src, blockHeight) =>\r\n      `#/${widgetOwner}/widget/EasyPoll?page=view_poll&src=${src}`,\r\n    active: page === \"VIEW_POLL\",\r\n    hideSidebar: true,\r\n  },\r\n  RESULTS: {\r\n    href: (src, blockHeight) =>\r\n      `#/${widgetOwner}/widget/EasyPoll?page=results&src=${src}`,\r\n    active: page === \"RESULTS\",\r\n    hideSidebar: true,\r\n  },\r\n};\r\n\r\nconst getFirstSBTToken = () => {\r\n  const view = Near.view(\"registry.i-am-human.near\", \"sbt_tokens_by_owner\", {\r\n    account: `${context.accountId}`,\r\n    issuer: \"fractal.i-am-human.near\",\r\n  });\r\n  return view?.[0]?.[1]?.[0];\r\n};\r\n\r\nconst whitelist = [\r\n  \"neardigitalcollective.near\",\r\n  \"blaze.near\",\r\n  \"jlw.near\",\r\n  \"yuensid.near\",\r\n  \"chloe.near\",\r\n];\r\n\r\nconst blackList = []; // use it to hide bad users\r\n\r\nconst indexVersion = \"4.0.0\";\r\n\r\nconst hasSBTToken = getFirstSBTToken() !== undefined;\r\n\r\nconst canOperate = hasSBTToken || whitelist.includes(context.accountId);\r\n\r\nconst SectionHeader = styled.h2`\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  letter-spacing: -1px;\r\n`;\r\n\r\nconst SectionDescription = styled.p`\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  padding-bottom: 8px;\r\n  opacity: 0.6;\r\n  color: \"#828688\";\r\n`;\r\n\r\n// Styles\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: stretch;\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  max-width: 100%;\r\n  background: #fff;\r\n  margin: auto;\r\n  margin-bottom: 2rem;\r\n\r\n  a {\r\n    color: #4f46e5;\r\n  }\r\n\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n  }\r\n  @media (min-width: 900px) {\r\n    gap: 40px;\r\n  }\r\n`;\r\n\r\nconst SidebarWrapper = styled.div`\r\n  flex: 1;\r\n  width: 100%;\r\n  min-height: 100%;\r\n  display: ${tabs[page].hideSidebar ? \"none\" : \"initial\"};\r\n\r\n  @media (min-width: 768px) {\r\n    max-width: 300px;\r\n  }\r\n`;\r\nconst MainWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 3;\r\n  width: 100%;\r\n  min-height: 100%;\r\n`;\r\n\r\nconst isLoggedIn = context.accountId ? true : false;\r\n\r\nreturn (\r\n  <>\r\n    <Widget src={`${widgetOwner}/widget/Common.OpenSansFont`} />\r\n    <div\r\n      style={{\r\n        backgroundColor: \"#fff\",\r\n        fontStyle: \"normal\",\r\n        borderRadius: \"20px\",\r\n        fontFamily: \"Open Sans, sans-serif\",\r\n        margin: \"auto\",\r\n      }}\r\n    >\r\n      <div className=\"d-flex flex-wrap gap-3 justify-content-between align-items-center pb-1\">\r\n        <a\r\n          className=\"d-flex align-items-center text-decoration-none\"\r\n          href={tabs.OFFICIAL_POLLS.href}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 188.35 188.35\"\r\n            height={40}\r\n            width={40}\r\n          >\r\n            <rect\r\n              width={188.35}\r\n              height={188.35}\r\n              rx={55.32}\r\n              ry={55.32}\r\n              fill=\"#4f46e5\"\r\n            />\r\n            <rect\r\n              width={19.21}\r\n              height={24.02}\r\n              x={55.75}\r\n              y={103.78}\r\n              fill=\"#ffd50d\"\r\n            />\r\n            <rect\r\n              width={19.21}\r\n              height={43.23}\r\n              x={84.57}\r\n              y={84.57}\r\n              fill=\"#ffd50d\"\r\n            />\r\n            <rect\r\n              width={19.21}\r\n              height={67.25}\r\n              x={113.63}\r\n              y={60.55}\r\n              fill=\"#ffd50d\"\r\n            />\r\n          </svg>\r\n          <h3\r\n            style={{\r\n              margin: \"0 0.5rem\",\r\n              color: \"#000\",\r\n              fontWeight: \"500\",\r\n              fontSize: \"28px\",\r\n              letterSpacing: \"-1px\",\r\n            }}\r\n          >\r\n            EasyPoll\r\n          </h3>\r\n        </a>\r\n\r\n        <div className=\"p-2 ms-auto\">\r\n          <p\r\n            style={{\r\n              margin: \"0\",\r\n              fontWeight: \"bold\",\r\n              fontSize: \"15px\",\r\n              color: hasSBTToken ? \"#239F28\" : \"#DD5E56\",\r\n            }}\r\n          >\r\n            {!isLoggedIn\r\n              ? \"Sign In To Use EasyPoll\"\r\n              : hasSBTToken\r\n              ? \"Verified Human\"\r\n              : \"Non-Verified Human\"}\r\n          </p>\r\n        </div>\r\n\r\n        {isLoggedIn &&\r\n          (hasSBTToken ? (\r\n            !tabs.CREATE_POLL.active && (\r\n              <a href={tabs.CREATE_POLL.href} className=\"text-decoration-none\">\r\n                <Widget\r\n                  src=\"rubycop.near/widget/NDC.StyledComponents\"\r\n                  props={{\r\n                    Button: {\r\n                      text: \"Create a Poll\",\r\n                      icon: <i className=\"bi bi-plus-lg\" />,\r\n                      onClick: handleClickFunction,\r\n                    },\r\n                  }}\r\n                />\r\n              </a>\r\n            )\r\n          ) : (\r\n            <a\r\n              href=\"https://i-am-human.app\"\r\n              target=\"_blank\"\r\n              className=\"text-decoration-none\"\r\n            >\r\n              <Widget\r\n                src=\"rubycop.near/widget/NDC.StyledComponents\"\r\n                props={{\r\n                  Button: {\r\n                    text: \"Verify as Human\",\r\n                    icon: (\r\n                      // should be replaced with I-AM-HUMAN logo svg but I couldn't find it :(\r\n                      <img\r\n                        height={25}\r\n                        width={25}\r\n                        style={{\r\n                          filter: \"brightness(100)\",\r\n                        }}\r\n                        src=\"data:image/png;base64,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\"\r\n                      />\r\n                    ),\r\n                    className: \"primary dark d-flex gap-2 align-items-center\",\r\n                    onClick: () => {},\r\n                  },\r\n                }}\r\n              />\r\n            </a>\r\n          ))}\r\n      </div>\r\n      <Wrapper>\r\n        <SidebarWrapper>\r\n          <Widget\r\n            src={`${widgetOwner}/widget/EasyPoll.Sidebar`}\r\n            props={{ tabs }}\r\n          />\r\n        </SidebarWrapper>\r\n\r\n        <MainWrapper className=\"pt-4 pb-3\">\r\n          {tabs[page].text && <SectionHeader>{tabs[page].text}</SectionHeader>}\r\n          {tabs[page].description && (\r\n            <SectionDescription>{tabs[page].description}</SectionDescription>\r\n          )}\r\n          {page === \"OFFICIAL_POLLS\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.Polls`}\r\n              props={{\r\n                indexVersion,\r\n                filterByUser: whitelist,\r\n                skipHumanVericationFor: whitelist,\r\n                blackList,\r\n                tabs,\r\n                type: \"official\",\r\n              }}\r\n            />\r\n          ) : page === \"PUBLIC_POLLS\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.Polls`}\r\n              props={{\r\n                indexVersion,\r\n                skipHumanVericationFor: whitelist,\r\n                onlyVerifiedHumans: false,\r\n                blackList,\r\n                tabs,\r\n              }}\r\n            />\r\n          ) : page === \"MY_POLLS\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.MyPolls`}\r\n              props={{\r\n                indexVersion,\r\n                blackList,\r\n                tabs,\r\n                whitelist,\r\n                widgetOwner,\r\n              }}\r\n            />\r\n          ) : page === \"VIEW_POLL\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.ViewPoll`}\r\n              props={{\r\n                shouldDisplayViewAll: false,\r\n                tabs,\r\n                isHuman: hasSBTToken,\r\n                src: props.src,\r\n                blockHeight: props.blockHeight,\r\n                indexVersion,\r\n              }}\r\n            />\r\n          ) : page === \"CREATE_POLL\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.CreatePoll`}\r\n              props={{\r\n                indexVersion,\r\n                blockHeight: props.blockHeight,\r\n                src: props.src,\r\n                whitelist,\r\n              }}\r\n            />\r\n          ) : page === \"RESULTS\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.Results`}\r\n              props={{\r\n                blockHeight: props.blockHeight,\r\n                src: props.src,\r\n                indexVersion,\r\n              }}\r\n            />\r\n          ) : page === \"DELETE_POLL\" ? (\r\n            <Widget\r\n              src={`${widgetOwner}/widget/EasyPoll.DeletePoll`}\r\n              props={{\r\n                blockHeight: props.blockHeight,\r\n                src: props.src,\r\n                tabs,\r\n              }}\r\n            />\r\n          ) : (\r\n            \"404\"\r\n          )}\r\n        </MainWrapper>\r\n      </Wrapper>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/tne_society.near/widget/EasyPoll", "fact_widget_deployments_id": "cb3aa4a2ecdc557cdf2fcf79fe38e613", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 8}