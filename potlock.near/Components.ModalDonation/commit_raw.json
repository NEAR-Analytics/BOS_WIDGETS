{"tx_hash": "H1aXjU9WaL3m5gYPm3a3gXyfwooKvNZtqXW23msBg8iU", "action_id_social": "FheVovfiK4d7vycKHidcDbiRhSmA27b45UTykZZediEL-0-widget", "block_id": 111914885, "block_timestamp": "2024-02-02T06:59:02.026Z", "signer_id": "potlock.near", "widget_name": "Components.ModalDonation", "source_code": "const { setAmount, setProjectId, setNote, setReferrerId, setCurrency } = props;\nconst donationContractId = \"donate.potlock.near\";\nconst [amount, setAmounts] = useState(\"1\");\nconst [isBreakDown, setIsBreakDown] = useState(true);\nconst [msg, setMsg] = useState(\"\");\nconst [note, setNotes] = useState(\"\");\nconst [isNote, setIsNote] = useState(false);\nconst [action, setAction] = useState([]);\nconst isReferrerId = props.referrerId;\nconst [onSelect, setOnSelect] = useState(\"near\");\n\nconst MIN_REQUIRED_DONATION_AMOUNT_PER_PROJECT = 0.1;\nconst cardData = Social.getr(`${props.projectId}/profile`);\nState.init({\n  isModalDonationOpen: false,\n  isModalDonationSucessOpen: false,\n});\n\nconst getBalance = () => {\n  const res = fetch(`https://api.nearblocks.io/v1/account/${context.accountId}`);\n\n  if (!(res && res.body)) return \"...\";\n\n  const native_balance = res.body.account[0].amount / 1e24;\n  const unspendable_balance = 0.05 + res.body.account[0].storage_usage / 1e5;\n  const spendable_balance = native_balance - unspendable_balance;\n  return spendable_balance.toFixed(4);\n};\n\nconst getInputValidation = () => {\n  if (onSelect == \"near\") {\n    if (Number(amount) > getBalance()) {\n      return \"1px solid var(--Neutral-200,#ff1232)\";\n    } else {\n      return \"1px solid var(--Neutral-200, #dbdbdb)\";\n    }\n  } else {\n    if (Number(amount) > Number(getBalance()) * Number(getPriceUSD())) {\n      return \"1px solid var(--Neutral-200,#ff1232)\";\n    } else {\n      return \"1px solid var(--Neutral-200, #dbdbdb)\";\n    }\n  }\n};\n\nconst ModalDonate = ({ isOpen, onClose, children }) => {\n  if (!isOpen) return \"\";\n  return (\n    <Modal onClick={onClose}>\n      <ModalContainer onClick={(e) => e.stopPropagation()}>{children}</ModalContainer>\n    </Modal>\n  );\n};\n\nconst getPriceUSD = () => {\n  //https://api.nearblocks.io/v1/stats\n  const res = fetch(`https://api.nearblocks.io/v1/stats`, { mode: \"cors\" });\n  return res.body.stats[0].near_price;\n};\n\nconst handleChangeBreakDown = () => {\n  setIsBreakDown(() => !isBreakDown);\n};\n\nconst Modal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-top: ${0.8 + 50}px;\n  padding-right: 32px;\n  // padding-right: 500px;\n  z-index: 1000;\n\n  @media screen and (max-width: 768px) {\n    padding-right: 8px;\n  }\n`;\n\nconst ModalContainer = styled.div`\n  width: 500px;\n  padding: 24px 0px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 20px 20px 32px -4px rgba(93, 93, 93, 0.06);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  max-height: 90vh;\n  max-width: 90vw;\n  z-index: 1000;\n`;\n\nconst ModalHeader = styled.div`\n  width: 100%;\n  height: 100%;\n  padding: 10px 0px;\n  padding-right: 20px;\n  background: #fafafa;\n  border-radius: 6px;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 173px;\n  display: inline-flex;\n`;\n\nconst CloseHeader = styled.div`\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\n\nconst CloseButton = styled.div`\n  width: 14px;\n  height: 14px;\n  font-size: 25px;\n  font-weight: 300;\n  color: rgba(112, 107, 107, 0.8);\n  cursor: pointer;\n`;\n\nconst ModalHeaderText = styled.div`\n  text-align: center;\n  color: #292929;\n  font-size: 20px;\n  font-family: Mona Sans;\n  font-weight: 600;\n  line-height: 24px;\n  word-wrap: break-word;\n`;\n\nconst ModalBody = styled.div`\n  width: 100%;\n  height: 100%;\n  padding: 20px 20px;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: 24px;\n  display: inline-flex;\n`;\n\nconst ContentMedia = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  align-self: stretch;\n`;\n\nconst Icon = styled.img`\n  width: 20px;\n  height: 20px;\n  margin-top: -5px;\n`;\n\nconst ContentMediaImage = styled.img`\n  width: 24px;\n  height: 24px;\n  border-radius: 24px;\n`;\nconst ContentMediaText = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  flex: 1 0 0;\n`;\n\nconst TextDecMedia = styled.div`\n  color: var(--Neutral-950, #292929);\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n\n  /* Title/small/14px:semibold */\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 24px; /* 171.429% */\n`;\n\nconst TextDesMedia = styled.div`\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  align-self: stretch;\n  overflow: hidden;\n  color: var(--Neutral-500, #7b7b7b);\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n  text-overflow: ellipsis;\n\n  /* Body/Medium/14px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 24px; /* 171.429% */\n`;\n\nconst FormAmountHeader = styled.div`\n  display: flex;\n  align-items: baseline;\n  align-self: stretch;\n  margin-bottom: -20px;\n`;\n\nconst LabelAmount = styled.label`\n  color: var(--Neutral-950, #292929);\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n\n  /* Label/Large/14px:Medium */\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 500;\n`;\n\nconst FormInputAmount = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  align-self: stretch;\n  border: ${getInputValidation()};\n  border-radius: 6px;\n`;\n\nconst CboxSelect = styled.select`\n  display: flex;\n  padding: 10px 16px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  border-radius: 25px;\n  border: none;\n  width: 100px;\n  background: #fff;\n  outline: none;\n`;\nconst CboxSelectOption = styled.option`\n  color: var(--Neutral-950, #292929);\n  font-feature-settings: \"salt\" on;\n  font-family: \"Mona Sans\";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 24px; /* 171.429% */\n`;\nconst FormInput = styled.div`\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n  border-radius: 6px;\n  border-left: 1px solid var(--Neutral-200, #dbdbdb);\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  outline: none;\n`;\nconst AmountInput = styled.input`\n  flex: 1 0 0;\n  color: var(--Neutral-500, #7b7b7b);\n  text-align: left;\n  font-feature-settings: \"ss01\" on, \"salt\" on, \"liga\" off;\n\n  /* Label/Large/14px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n  border: none;\n  padding: 5px 10px;\n  width: 100%;\n  outline: none;\n`;\n\nconst NoteInput = styled.input`\n  margin-top: 20px;\n  margin-left: 10px;\n  flex: 1 0 0;\n  color: var(--Neutral-500, ${note.length > 150 ? \"#ff1232\" : \"#7b7b7b\"});\n  text-align: left;\n  font-feature-settings: \"ss01\" on, \"salt\" on, \"liga\" off;\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n  border: 1px solid var(--Neutral-200, ${note.length > 150 ? \"#ff1232\" : \"#dbdbdb\"});\n  border-radius: 6px;\n  padding: 5px 10px;\n  width: 100%;\n  outline: none;\n`;\nconst FormSubNumer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  align-self: stretch;\n`;\nconst SubNumber = styled.span`\n  margin-top: -15px;\n  color: var(--Neutral-500, #7b7b7b);\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n  /* Label/Medium/11px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 13px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 16px; /* 145.455% */\n`;\n\nconst SubTitleBalance = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-self: stretch;\n  margin-top: -10px;\n`;\n\nconst LabelPrice = styled.label`\n  color: var(--Neutral-500, #7b7b7b);\n  text-align: right;\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n  /* Label/Medium/11px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 16px; /* 145.455% */\n`;\n\nconst LabelBalance = styled.label`\n  color: var(--Neutral-500, #7b7b7b);\n  text-align: right;\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n\n  /* Label/Medium/11px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 16px; /* 145.455% */\n`;\n\nconst BreakDownContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 8px;\n  align-self: stretch;\n`;\n\nconst BreakDownButton = styled.button`\n  display: flex;\n  padding: 10px 0px;\n  justify-content: flex-end;\n  align-items: flex-end;\n  gap: 8px;\n  align-self: stretch;\n  outline: none;\n  background: none;\n  border: none;\n`;\n\nconst TextBreakDown = styled.div`\n  color: var(--Neutral-950, #292929);\n  text-align: right;\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n\n  /* Label/Large/14px:Medium */\n  font-family: \"Mona Sans\";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px; /* 142.857% */\n`;\n\nconst IconBreakDown = styled.img`\n  width: 18px;\n  height: 18px;\n`;\n\nconst ContentBreakDown = styled.div`\n  display: flex;\n  padding: 16px;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 12px;\n  align-self: stretch;\n  border-radius: 8px;\n  border: 1px solid var(--Neutral-100, #f0f0f0);\n  background: var(--Colors-Grey-SystemWhite, #fff);\n`;\n\nconst FormContentBreakDown = styled.div`\n  display: flex;\n  height: 22px;\n  align-items: center;\n  gap: 16px;\n  align-self: stretch;\n`;\n\nconst TextFormBreakDown = styled.div`\n  color: var(--Neutral-500, #7b7b7b);\n  font-feature-settings: \"ss01\" on, \"salt\" on, \"liga\" off;\n\n  /* Label/Large/14px:regular */\n  font-family: \"Mona Sans\";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n`;\n\nconst AmountBreakDown = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 8px;\n  flex: 1 0 0;\n`;\n\nconst IconNearBreakDown = styled.img`\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  filter: grayscale(120%);\n`;\nconst TextNote = styled.div`\n  width: 100%;\n  height: 1px;\n  display: flex;\n  border-top: 1px solid var(--Neutral-200, #dbdbdb);\n  padding-top: 40px;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: 8px;\n`;\nconst IconNear = styled.img`\n  width: 18px;\n  height: 18px;\n  border-radius: 28px;\n  filter: grayscale(120%);\n  margin-top: -5px;\n`;\nconst FtIconNear = styled.img`\n  width: 22px;\n  height: 22px;\n  border-radius: 28px;\n  filter: grayscale(120%);\n`;\nconst ButtonNote = styled.button`\n  color: var(--Neutral-950, #292929);\n  font-feature-settings: \"ss01\" on, \"salt\" on;\n\n  /* Label/Large/14px:Medium */\n  font-family: \"Mona Sans\";\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px; /* 142.857% */\n  outline: none;\n  background: none;\n  border: none;\n  margin-left: 10px;\n`;\n\nconst FooterModal = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 16px;\n  align-self: stretch;\n`;\n\nconst DonateButton = styled.button`\n  display: flex;\n  padding: 12px 16px;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  border-radius: 6px;\n  background: var(--Primary-600, #dd3345);\n\n  /* Button/main shadow */\n  box-shadow: 0px -2px 0px 0px #464646 inset, 0px 0px 0px 1px #464646;\n  outline: none;\n  border: none;\n  color: #fff;\n  &:hover {\n    background: #fef6ee;\n    color: #000000;\n  }\n`;\nconst AddToCartButton = styled.button`\n  border: none;\n  background: none;\n  color: #dd3345;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n  padding: 12px 16px;\n`;\n\nconst TitleMsg = styled.span`\n  color: red;\n`;\n\nconst changeSelect = (e) => {\n  setOnSelect(e.target.value);\n};\n\nconst onChangeAmount = (e) => {\n  const amount = e.target.value;\n  amount = amount.replace(/[^\\d,.]/g, \"\"); // remove all non-numeric characters except for decimal\n  if (amount === \".\") amount = \"0.\";\n  onSelect == \"near\"\n    ? Number(amount) > getBalance()\n      ? setMsg(\"The amount of money in your account is not enough.\")\n      : setMsg(\"\")\n    : Number(amount) > Number(getBalance()) * Number(getPriceUSD())\n    ? setMsg(\"The amount of money in your account is not enough.\")\n    : setMsg(\"\");\n  setAmounts(amount);\n};\n\nconst projectAllocation = () => {\n  const amount = Number(amount);\n  const ref = isReferrerId == undefined ? 0.95 : 0.925;\n  return (amount * ref).toFixed(3);\n};\n\nconst protocalFees = () => {\n  const amount = Number(amount);\n  return (amount * 0.05).toFixed(3);\n};\n\nconst referrerFees = () => {\n  const amount = Number(amount);\n  if (isReferrerId) {\n    return (amount * 0.25).toFixed(3);\n  }\n};\n// console.log(props);\nconst handleDonate = () => {\n  setAmount(amount);\n  setProjectId(props.projectId);\n  setNote(note);\n  setReferrerId(props.referrerId);\n  setCurrency(onSelect);\n  if (Number(amount) > 0) {\n    const transactions = [];\n    const amountFloat = onSelect == \"near\" ? amount : Number(amount).toFixed(3);\n    const amountIndivisible = new Big(parseFloat(amountFloat)).mul(new Big(10).pow(24));\n    const donateContractArgs = {};\n    donateContractArgs.recipient_id = props.projectId;\n    donateContractArgs.referrer_id = props.referrerId;\n    if (note) {\n      donateContractArgs.message = note;\n    }\n    transactions.push({\n      contractName: donationContractId,\n      methodName: \"donate\",\n      args: donateContractArgs,\n      deposit: amountIndivisible.toString(),\n    });\n    Near.call(transactions);\n  }\n};\n\nreturn (\n  <>\n    <ModalDonate\n      isOpen={props.isModalDonationOpen ? props.isModalDonationOpen : state.isModalDonationOpen}\n      onClose={\n        props.onDonationClose\n          ? props.onDonationClose\n          : () => State.update({ isModalDonationOpen: false })\n      }\n    >\n      <ModalHeader>\n        <ModalHeaderText>Donate to project</ModalHeaderText>\n        <CloseHeader>\n          <CloseButton\n            onClick={() => {\n              state.isModalDonationOpen == true\n                ? State.update({ isModalDonationOpen: false })\n                : props.onClose();\n            }}\n          >\n            X\n          </CloseButton>\n        </CloseHeader>\n      </ModalHeader>\n      <ModalBody>\n        <ContentMedia>\n          <ContentMediaImage\n            src={\n              cardData\n                ? `https://ipfs.near.social/ipfs/${cardData.image.ipfs_cid}`\n                : \"https://ipfs.near.social/ipfs/bafkreic4fqr5zanjr4ffe6cunq7tukbmqhcr47or3fmur2bzlvrmd7gdse\"\n            }\n            alt={\"logo\"}\n          />\n          <ContentMediaText>\n            <TextDecMedia>{cardData.name}</TextDecMedia>\n            <TextDesMedia>{cardData.description}</TextDesMedia>\n          </ContentMediaText>\n        </ContentMedia>\n        <FormAmountHeader>\n          <LabelAmount>Amount</LabelAmount>\n        </FormAmountHeader>\n        <FormInputAmount>\n          <Widget\n            src={`potlock.near/widget/Inputs.Select`}\n            props={{\n              noLabel: true,\n              placeholder: \"\",\n              options: [\n                { text: \"NEAR\", value: \"near\" },\n                { text: \"USD\", value: \"usd\" },\n              ],\n              containerStyles: {\n                width: \"auto\",\n              },\n              value: { text: onSelect.toUpperCase(), value: onSelect },\n              onChange: ({ text, value }) => {\n                setOnSelect(value);\n              },\n              inputStyles: {\n                border: \"none\",\n                borderRight: \"1px #F0F0F0 solid\",\n                boxShadow: \"none\",\n                borderRadius: \"4px 0px 0px 4px\",\n                width: \"auto\",\n                padding: \"12px 16px\",\n                boxShadow: \"0px -2px 0px rgba(93, 93, 93, 0.24) inset\",\n              },\n              iconLeft:\n                onSelect == \"near\" ? (\n                  <FtIconNear\n                    src={\n                      \"https://s3-alpha-sig.figma.com/img/8cc9/7cfb/5a58fb149e537ae5ea03b9d97cd11c2a?Expires=1707091200&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4&Signature=qQbfzhPe~lml8Lk-A27HSS2mhwQhpvaZL3-Nsoj7qtiKgQCX~galYPrQYHI59dSCLAjyomlBiGm0GJNI8~YwL43CVOqaptW0HHgliMo2fs0lmGpfBPEYWiPexu-NtpbdLwkAObem4CE2Wmjk4CysTx2f4mBVc43gcjvxiv2tuPcyVnjTZ7ByCe2qjQvs-D01YTmfP7n~nGtnVWCYqcHZ26pXq9FaN3Ssse6dNedBQWFMM~2UQej3p5dUXgqGDhfYxMABsjemVA1SrMJAFMYK1ZyE5k~MOnWtytWh~jgYvXXKUWSKRmP1aXMdHfBkVIAHoRI7rSnA7IhECie8lvUu6Q__\"\n                    }\n                    alt={\"Icon Near\"}\n                  />\n                ) : (\n                  \"$\"\n                ),\n            }}\n          />\n          <FormInput>\n            <AmountInput\n              type={\"number\"}\n              placeholder={0}\n              value={amount}\n              onChange={(e) => onChangeAmount(e)}\n              autoFocus={isNote ? false : true}\n            />\n          </FormInput>\n        </FormInputAmount>\n        <SubTitleBalance>\n          <LabelPrice>1 NEAR = ${Number(getPriceUSD()).toFixed(2)}</LabelPrice>\n          {onSelect == \"near\" ? (\n            <LabelBalance>\n              Account balance: {getBalance().toString()}\n              <IconNear\n                src={\n                  \"https://s3-alpha-sig.figma.com/img/8cc9/7cfb/5a58fb149e537ae5ea03b9d97cd11c2a?Expires=1707091200&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4&Signature=qQbfzhPe~lml8Lk-A27HSS2mhwQhpvaZL3-Nsoj7qtiKgQCX~galYPrQYHI59dSCLAjyomlBiGm0GJNI8~YwL43CVOqaptW0HHgliMo2fs0lmGpfBPEYWiPexu-NtpbdLwkAObem4CE2Wmjk4CysTx2f4mBVc43gcjvxiv2tuPcyVnjTZ7ByCe2qjQvs-D01YTmfP7n~nGtnVWCYqcHZ26pXq9FaN3Ssse6dNedBQWFMM~2UQej3p5dUXgqGDhfYxMABsjemVA1SrMJAFMYK1ZyE5k~MOnWtytWh~jgYvXXKUWSKRmP1aXMdHfBkVIAHoRI7rSnA7IhECie8lvUu6Q__\"\n                }\n                alt={\"Icon Near\"}\n              />\n            </LabelBalance>\n          ) : (\n            <LabelBalance>\n              Account balance: {(Number(getBalance()) * Number(getPriceUSD())).toFixed(2)} $\n            </LabelBalance>\n          )}\n        </SubTitleBalance>\n        <TitleMsg>{msg}</TitleMsg>\n        <BreakDownContainer>\n          <BreakDownButton onClick={handleChangeBreakDown}>\n            <TextBreakDown>{!isBreakDown ? \"Hide breakdown\" : \"Show breakdown\"}</TextBreakDown>\n            {isBreakDown ? (\n              <IconBreakDown\n                src={\"https://cdn.icon-icons.com/icons2/1883/PNG/512/caretsymbol_120671.png\"}\n                alt={\"icon breakdown\"}\n              />\n            ) : (\n              <IconBreakDown\n                src={\"https://cdn.icon-icons.com/icons2/1883/PNG/512/downarrow_120663.png\"}\n                alt={\"icon breakdown\"}\n              />\n            )}\n          </BreakDownButton>\n          {!isBreakDown && (\n            <ContentBreakDown>\n              <FormContentBreakDown>\n                <TextFormBreakDown>\n                  Project allocation ({isReferrerId == undefined ? \"95%\" : \"92.5%\"})\n                </TextFormBreakDown>\n                <AmountBreakDown>\n                  {projectAllocation()}\n                  {onSelect == \"near\" ? (\n                    <IconNearBreakDown\n                      src={\n                        \"https://s3-alpha-sig.figma.com/img/8cc9/7cfb/5a58fb149e537ae5ea03b9d97cd11c2a?Expires=1707091200&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4&Signature=qQbfzhPe~lml8Lk-A27HSS2mhwQhpvaZL3-Nsoj7qtiKgQCX~galYPrQYHI59dSCLAjyomlBiGm0GJNI8~YwL43CVOqaptW0HHgliMo2fs0lmGpfBPEYWiPexu-NtpbdLwkAObem4CE2Wmjk4CysTx2f4mBVc43gcjvxiv2tuPcyVnjTZ7ByCe2qjQvs-D01YTmfP7n~nGtnVWCYqcHZ26pXq9FaN3Ssse6dNedBQWFMM~2UQej3p5dUXgqGDhfYxMABsjemVA1SrMJAFMYK1ZyE5k~MOnWtytWh~jgYvXXKUWSKRmP1aXMdHfBkVIAHoRI7rSnA7IhECie8lvUu6Q__\"\n                      }\n                      alt={\"logo near amount\"}\n                    />\n                  ) : (\n                    \"$\"\n                  )}\n                </AmountBreakDown>\n              </FormContentBreakDown>\n              <FormContentBreakDown>\n                <TextFormBreakDown>Protocol fees (5%)</TextFormBreakDown>\n                <AmountBreakDown>\n                  {protocalFees()}\n                  {onSelect == \"near\" ? (\n                    <IconNearBreakDown\n                      src={\n                        \"https://s3-alpha-sig.figma.com/img/8cc9/7cfb/5a58fb149e537ae5ea03b9d97cd11c2a?Expires=1707091200&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4&Signature=qQbfzhPe~lml8Lk-A27HSS2mhwQhpvaZL3-Nsoj7qtiKgQCX~galYPrQYHI59dSCLAjyomlBiGm0GJNI8~YwL43CVOqaptW0HHgliMo2fs0lmGpfBPEYWiPexu-NtpbdLwkAObem4CE2Wmjk4CysTx2f4mBVc43gcjvxiv2tuPcyVnjTZ7ByCe2qjQvs-D01YTmfP7n~nGtnVWCYqcHZ26pXq9FaN3Ssse6dNedBQWFMM~2UQej3p5dUXgqGDhfYxMABsjemVA1SrMJAFMYK1ZyE5k~MOnWtytWh~jgYvXXKUWSKRmP1aXMdHfBkVIAHoRI7rSnA7IhECie8lvUu6Q__\"\n                      }\n                      alt={\"logo near amount\"}\n                    />\n                  ) : (\n                    \"$\"\n                  )}\n                </AmountBreakDown>\n              </FormContentBreakDown>\n              <FormContentBreakDown>\n                <TextFormBreakDown>\n                  Referral fees ({isReferrerId == undefined ? \"0%\" : \"2.5%\"})\n                </TextFormBreakDown>\n                <AmountBreakDown>\n                  {referrerFees()}\n                  {onSelect == \"near\" ? (\n                    <IconNearBreakDown\n                      src={\n                        \"https://s3-alpha-sig.figma.com/img/8cc9/7cfb/5a58fb149e537ae5ea03b9d97cd11c2a?Expires=1707091200&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4&Signature=qQbfzhPe~lml8Lk-A27HSS2mhwQhpvaZL3-Nsoj7qtiKgQCX~galYPrQYHI59dSCLAjyomlBiGm0GJNI8~YwL43CVOqaptW0HHgliMo2fs0lmGpfBPEYWiPexu-NtpbdLwkAObem4CE2Wmjk4CysTx2f4mBVc43gcjvxiv2tuPcyVnjTZ7ByCe2qjQvs-D01YTmfP7n~nGtnVWCYqcHZ26pXq9FaN3Ssse6dNedBQWFMM~2UQej3p5dUXgqGDhfYxMABsjemVA1SrMJAFMYK1ZyE5k~MOnWtytWh~jgYvXXKUWSKRmP1aXMdHfBkVIAHoRI7rSnA7IhECie8lvUu6Q__\"\n                      }\n                      alt={\"logo near amount\"}\n                    />\n                  ) : (\n                    \"$\"\n                  )}\n                </AmountBreakDown>\n              </FormContentBreakDown>\n            </ContentBreakDown>\n          )}\n        </BreakDownContainer>\n        <TextNote>\n          <ButtonNote onClick={() => setIsNote(true)}>\n            <Icon\n              src={\n                \"https://as2.ftcdn.net/v2/jpg/03/85/70/05/1000_F_385700599_zHy52k8yhKZcD3VHpkWJI1P6bSMahlnW.jpg\"\n              }\n              alt={\"icon\"}\n            />\n            Add Note\n          </ButtonNote>\n        </TextNote>\n        {isNote && (\n          <NoteInput\n            placeholder={\"Please enter your note\"}\n            value={note}\n            onChange={(e) => setNotes(e.target.value)}\n            autoFocus\n          />\n        )}\n        {isNote && (\n          <FormSubNumer>\n            <SubNumber>{note.length}/150</SubNumber>\n          </FormSubNumer>\n        )}\n        <FooterModal>\n          <AddToCartButton\n            onClick={(e) => {\n              e.preventDefault();\n              if (existsInCart) {\n                props.removeProjectsFromCart([props.projectId]);\n              } else {\n                props.addProjectsToCart([\n                  {\n                    id: props.projectId,\n                    amount: amount,\n                    ft: onSelect == \"near\" ? \"NEAR\" : \"USD\",\n                    price: getPriceUSD(),\n                    note: note,\n                    referrerId: props.referrerId,\n                  },\n                ]);\n                if (props.showModal) {\n                  props.onClose();\n                  props.setIsCartModalOpen(true);\n                }\n              }\n            }}\n          >\n            Add to cart\n          </AddToCartButton>\n          <DonateButton onClick={handleDonate}>Donate</DonateButton>\n        </FooterModal>\n      </ModalBody>\n    </ModalDonate>\n    <Widget\n      src={`${props.ownerId}/widget/Components.ModalDonationSuccess`}\n      props={{\n        ...props,\n        transactionHashes: props.transactionHashes,\n        onClose: () => State.update({ isModalDonationOpen: false }),\n        onOpen: () => State.update({ isModalDonationOpen: true }),\n        onDonation: {\n          priceNear: Number(getPriceUSD()).toFixed(2),\n        },\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Components.ModalDonation", "fact_widget_deployments_id": "535ce1df488e19be4c18efd6f6bedda5", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}