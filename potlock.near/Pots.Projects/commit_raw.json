{"tx_hash": "3h2YPa4Z2KJRNmF5o5GP2QuuJWHsqZej8j4dTkziC73a", "action_id_social": "5zKeUECUosaM6wKPJ3hZoGRaQ4otPo5VnATNgdGqhkDR-0-widget", "block_id": 113842234, "block_timestamp": "2024-02-29T21:46:38.995Z", "signer_id": "potlock.near", "widget_name": "Pots.Projects", "source_code": "// Card Skeleton - Loading fallback\nconst loadingSkeleton = styled.keyframes`\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.4;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nconst CardSkeletonContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 447px;\n  width: 100%;\n  max-width: 400px;\n  border-radius: 12px;\n  background: white;\n  box-shadow: 0px -2px 0px #dbdbdb inset;\n  border: 1px solid #dbdbdb;\n  margin-left: auto;\n  margin-right: auto;\n  overflow: hidden;\n  animation-name: ${loadingSkeleton};\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n`;\n\nconst HeaderSkeleton = styled.div`\n  display: block;\n  width: 100%;\n  height: 168px;\n  background: #eee;\n`;\n\nconst ProfileImageSkeleton = styled.div`\n  background: #e0e0e0;\n  margin-left: 32px;\n  transform: translateY(148px);\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  border-radius: 999px;\n`;\n\nconst TitleSkeleton = styled.div`\n  width: 120px;\n  height: 24px;\n  background: #eee;\n  margin-left: 24px;\n  margin-top: 24px;\n`;\n\nconst DescriptionSkeleton = styled.div`\n  width: 83%;\n  height: 48px;\n  background: #eee;\n  margin-left: 24px;\n  margin-top: 24px;\n`;\n\nconst TagSkeleton = styled.div`\n  background: #eee;\n  border-radius: 4px;\n  height: 34px;\n  width: 110px;\n  margin: 24px;\n`;\n\nconst FooterItemSkeleton = styled.div`\n  width: 150px;\n  height: 40px;\n  background: #eee;\n\n  @media screen and (max-width: 390px) {\n    width: 100px;\n  }\n`;\n\nconst DonationsInfoContainerSkeleton = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  width: 100%;\n  border-top: 1px #f0f0f0 solid;\n`;\n\nconst DonationsInfoItemSkeleton = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  align-items: center;\n`;\n\nconst CardSkeleton = () => (\n  <CardSkeletonContainer>\n    <HeaderSkeleton />\n    <ProfileImageSkeleton />\n    <TitleSkeleton />\n    <DescriptionSkeleton />\n    <TagSkeleton />\n    <DonationsInfoContainerSkeleton>\n      <DonationsInfoItemSkeleton>\n        <FooterItemSkeleton />\n      </DonationsInfoItemSkeleton>\n      <DonationsInfoItemSkeleton>\n        <FooterItemSkeleton />\n      </DonationsInfoItemSkeleton>\n    </DonationsInfoContainerSkeleton>\n  </CardSkeletonContainer>\n);\n\n// get projects\nconst { ownerId, potId, potDetail, sybilRequirementMet } = props;\nconst { calculatePayouts } = VM.require(\"potlock.near/widget/utils\") || {\n  calculatePayouts: () => {},\n};\nconst projects = Near.view(potId, \"get_approved_applications\", {});\n\nif (!projects) return <div class=\"spinner-border text-secondary\" role=\"status\" />;\n\nconst { public_round_start_ms, public_round_end_ms } = potDetail;\n\nconst now = Date.now();\nconst publicRoundOpen = now >= public_round_start_ms && now < public_round_end_ms;\n\nconst allDonationsForPot = Near.view(potId, \"get_public_round_donations\", {}) || [];\n\nconst payouts = useMemo(() => {\n  if (allDonationsForPot.length)\n    return calculatePayouts(allDonationsForPot, potDetail.matching_pool_balance);\n}, [allDonationsForPot]);\n\nreturn (\n  <>\n    <Widget\n      src={`${ownerId}/widget/Pots.NavOptionsMobile`}\n      props={{\n        ...props,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Project.ListSection`}\n      props={{\n        ...props,\n        maxCols: 2,\n        items: projects,\n        renderItem: (project) => {\n          return (\n            <Widget\n              src={`${ownerId}/widget/Project.Card`}\n              loading={<CardSkeleton />}\n              props={{\n                ...props,\n                potId,\n                projectId: project.project_id,\n                allowDonate:\n                  sybilRequirementMet &&\n                  publicRoundOpen &&\n                  project.project_id !== context.accountId,\n                requireVerification: !sybilRequirementMet,\n                payoutDetails: payouts[project.project_id],\n              }}\n            />\n          );\n        },\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.Projects", "fact_widget_deployments_id": "5d8c0ef6eeec909546ddcbb964740dc3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 7}