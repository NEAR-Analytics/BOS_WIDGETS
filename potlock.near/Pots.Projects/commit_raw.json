{"tx_hash": "91W4Wu4MVsgCW9UPPvcyfwqET4tKrsxWbsJaQKwjatYb", "action_id_social": "99iXz4fPUoiJh9TmKxZ6mDbbRSXbmNAfKYqMTzS49QQ8-0-widget", "block_id": 113708856, "block_timestamp": "2024-02-27T21:21:51.972Z", "signer_id": "potlock.near", "widget_name": "Pots.Projects", "source_code": "// get projects\nconst { ownerId, potId, potDetail, sybilRequirementMet } = props;\nconst { calculatePayouts } = VM.require(\"potlock.near/widget/utils\") || {\n  calculatePayouts: () => {},\n};\nconst projects = Near.view(potId, \"get_approved_applications\", {});\n\nif (!projects) return <div class=\"spinner-border text-secondary\" role=\"status\" />;\n\nconst { public_round_start_ms, public_round_end_ms } = potDetail;\n\nconst now = Date.now();\nconst publicRoundOpen = now >= public_round_start_ms && now < public_round_end_ms;\n\nconst allDonationsForPot = Near.view(potId, \"get_public_round_donations\", {}) || [];\n\nconst payouts = useMemo(() => {\n  if (allDonationsForPot.length)\n    return calculatePayouts(allDonationsForPot, potDetail.matching_pool_balance);\n}, [allDonationsForPot]);\n\nreturn (\n  <>\n    <Widget\n      src={`${ownerId}/widget/Pots.NavOptionsMobile`}\n      props={{\n        ...props,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Project.ListSection`}\n      props={{\n        ...props,\n        maxCols: 2,\n        items: projects,\n        renderItem: (project) => {\n          return (\n            <Widget\n              src={`${ownerId}/widget/Project.Card`}\n              loading={\n                <div\n                  style={{\n                    width: \"320px\",\n                    height: \"500px\",\n                    borderRadius: \"12px\",\n                    background: \"white\",\n                    boxShadow: \"0px -2px 0px #464646 inset\",\n                    border: \"1px solid #292929\",\n                  }}\n                />\n              }\n              props={{\n                ...props,\n                potId,\n                projectId: project.project_id,\n                allowDonate:\n                  sybilRequirementMet &&\n                  publicRoundOpen &&\n                  project.project_id !== context.accountId,\n                requireVerification: !sybilRequirementMet,\n                payoutDetails: payouts[project.project_id],\n              }}\n            />\n          );\n        },\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.Projects", "fact_widget_deployments_id": "dfaf33aa3628ca76865b502abe3fa889", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 6}