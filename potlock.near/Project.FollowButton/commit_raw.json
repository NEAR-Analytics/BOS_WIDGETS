{"tx_hash": "4Z59Msk66hRH8T8NxXvhWxTzJvwHjgeEayubbS2KdMuW", "action_id_social": "AsMtvZG5k39oZ8a5oyutqHzSs1dEDs9MPqE9t6XnZjrq-0-widget", "block_id": 115588449, "block_timestamp": "2024-03-27T15:18:16.507Z", "signer_id": "potlock.near", "widget_name": "Project.FollowButton", "source_code": "const { ownerId } = props;\nif (\n  !props.accountId ||\n  !context.accountId ||\n  context.accountId === props.accountId\n) {\n  return \"\";\n}\nconst followEdge = Social.keys(\n  `${context.accountId}/graph/follow/${props.accountId}`,\n  undefined,\n  {\n    values_only: true,\n  }\n);\nconst inverseEdge = Social.keys(\n  `${props.accountId}/graph/follow/${context.accountId}`,\n  undefined,\n  {\n    values_only: true,\n  }\n);\nconst loading = followEdge === null || inverseEdge === null;\nconst follow = followEdge && Object.keys(followEdge).length;\nconst inverse = inverseEdge && Object.keys(inverseEdge).length;\nconst type = follow ? \"unfollow\" : \"follow\";\nconst socialArgs = {\n  data: {\n    [context.accountId]: {\n      graph: { follow: { [props.accountId]: follow ? null : \"\" } },\n      index: {\n        graph: JSON.stringify({\n          key: \"follow\",\n          value: {\n            type,\n            accountId: props.accountId,\n          },\n        }),\n        notify: JSON.stringify({\n          key: props.accountId,\n          value: {\n            type,\n          },\n        }),\n      },\n    },\n  },\n};\nconst buttonText = loading\n  ? \"Loading\"\n  : follow\n  ? \"Following\"\n  : inverse\n  ? \"Follow back\"\n  : \"Follow\";\nconst FollowContainer = styled.div`\n  position: relative;\n  cursor: pointer;\n  border-radius: 6px;\n  border: 1px solid #dd3345;\n  font-size: 14px;\n  font-weight: 600;\n  color: #dd3345;\n  word-wrap: break-word;\n  transition: all 300ms;\n  &::before {\n    background: #dd3345;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    content: \"Unfollow\";\n    color: white;\n    opacity: 0;\n    transition: all 300ms;\n  }\n  :hover {\n    background: #dd3345;\n    color: white;\n    ${buttonText === \"Following\"\n      ? `\n      ::before {\n        opacity: 1;\n      }\n    `\n      : \"\"}\n  }\n`;\nreturn (\n  <FollowContainer\n    onClick={() => {\n      const transactions = [\n        {\n          contractName: \"social.near\",\n          methodName: \"set\",\n          deposit: Big(JSON.stringify(socialArgs).length * 0.00003).mul(\n            Big(10).pow(24)\n          ),\n          args: socialArgs,\n        },\n      ];\n      Near.call(transactions);\n    }}\n  >\n    {buttonText}\n  </FollowContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.FollowButton", "fact_widget_deployments_id": "cd2fcecf8a47f5c1df6cb1a715a6d0fa", "inserted_timestamp": "2024-03-27T16:32:19.732Z", "modified_timestamp": "2024-03-27T16:32:19.732Z", "__row_index": 2}