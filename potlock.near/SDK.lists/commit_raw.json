{"tx_hash": "9M2eWBsvEDPbU5fXtEZhatMysLKgJFdWPnn2ytu92ooh", "action_id_social": "2EwUFhhr9gaLjEn67jkYHXheTgNRTzp4CPt4mCKfV1eg-0-widget", "block_id": 115589483, "block_timestamp": "2024-03-27T15:40:08.198Z", "signer_id": "potlock.near", "widget_name": "SDK.lists", "source_code": "return ({ env }) => {\n  const contractId =\n    env === \"staging\" ? \"lists.staging.potlock.near\" : \"lists.potlock.near\";\n  // const contractId = \"lists.staging.potlock.near\";\n  const potlockRegistryListId = 1;\n  const ListsSDK = {\n    getContractId: () => contractId,\n    getList: (listId) => {\n      return Near.view(contractId, \"get_list\", { list_id: listId });\n    },\n    getPotlockRegistry: () => {\n      return ListsSDK.getList(potlockRegistryListId);\n    },\n    isRegistryAdmin: (accountId) => {\n      const registry = ListsSDK.getPotlockRegistry();\n      return registry.admins && registry.admins.includes(accountId);\n    },\n    getRegistrations: (listId) => {\n      return Near.view(contractId, \"get_registrations_for_list\", {\n        list_id: listId || potlockRegistryListId,\n      });\n    },\n    getRegistration: (listId, registrantId) => {\n      const registrations = Near.view(\n        contractId,\n        \"get_registrations_for_registrant\",\n        {\n          registrant_id: registrantId,\n        }\n      );\n      if (registrations) {\n        const registration = registrations.find(\n          (registration) =>\n            registration.list_id === (listId || potlockRegistryListId)\n        );\n        return Near.view(contractId, \"get_registration\", {\n          registration_id: registration.id,\n        });\n      }\n    },\n    asyncGetRegistration: (listId, registrantId) => {\n      // return Near.asyncView(contractId, \"get_project_by_id\", { project_id: projectId });\n      return Near.asyncView(contractId, \"get_registrations_for_registrant\", {\n        registrant_id: registrantId,\n      }).then((registrations) => {\n        if (registrations) {\n          const registration = registrations.find(\n            (registration) =>\n              registration.list_id === (listId || potlockRegistryListId)\n          );\n          return Near.asyncView(contractId, \"get_registration\", {\n            registration_id: registration.id,\n          });\n        }\n      });\n    },\n    isRegistrationApproved: (listId, registrantId) => {\n      const registration = ListsSDK.getRegistration(listId, registrantId);\n      return registration && registration.status === \"Approved\";\n    },\n  };\n  return ListsSDK;\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/SDK.lists", "fact_widget_deployments_id": "540f87ccfc172c2a8992a23e5bafee5c", "inserted_timestamp": "2024-03-27T17:31:11.616Z", "modified_timestamp": "2024-03-27T17:31:11.616Z", "__row_index": 1}