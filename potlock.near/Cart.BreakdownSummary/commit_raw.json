{"tx_hash": "E189jqQjq6iZjvvgggPqZP6bxynewR8Rc1tUD8ZYryAs", "action_id_social": "egnpzD2KrN2ch3PQmQQDjqfbhzZEdTfkEnxrTu2fdxc-0-widget", "block_id": 112977555, "block_timestamp": "2024-02-16T22:32:18.382Z", "signer_id": "potlock.near", "widget_name": "Cart.BreakdownSummary", "source_code": "const {\n  basisPointsToPercent,\n  referrerId,\n  amountNear,\n  bypassProtocolFee,\n  DONATION_CONTRACT_ID,\n  recipientId,\n} = props;\n\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst CHEVRON_DOWN_URL =\n  IPFS_BASE_URL + \"bafkreiabkwyfxq6pcc2db7u4ldweld5xcjesylfuhocnfz7y3n6jw7dptm\";\nconst CHEVRON_UP_URL =\n  IPFS_BASE_URL + \"bafkreibdm7w6zox4znipjqlmxr66wsjjpqq4dguswo7evvrmzlnss3c3vi\";\n\nconst FtIcon = styled.img`\n  width: 20px;\n  height: 20px;\n`;\n\nconst BreakdownSummary = styled.div`\n  display: flex;\n  flex-direction: column;\n  // justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  cursor: pointer;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  // background: pink;\n  width: 100%;\n`;\n\nconst BreakdownTitle = styled.div`\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n  word-wrap: break-word;\n`;\n\nconst ChevronIcon = styled.img`\n  width: 24px;\n  height: 24px;\n  margin-left: 8px;\n`;\n\nconst BreakdownDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 8px;\n  gap: 12px;\n  padding: 16px;\n  border-radius: 8px;\n  border: 1px #dbdbdb solid;\n  background: #fafafa;\n`;\n\nconst BreakdownItem = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n`;\n\nconst BreakdownItemLeft = styled.div`\n  color: #7b7b7b;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 400;\n  word-wrap: break-word;\n`;\n\nconst BreakdownItemRight = styled.div`\n  display: flex;\n  flex-direction: row;\n  // justify-content: flex-end;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst BreakdownAmount = styled.div`\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 500;\n  word-wrap: break-word;\n`;\n\nState.init({\n  showBreakdown: false,\n});\n\nconst donationContractConfig = Near.view(DONATION_CONTRACT_ID, \"get_config\", {});\n\nif (!donationContractConfig) return \"\";\n\nconst {\n  protocol_fee_basis_points: protocolFeeBasisPoints,\n  referral_fee_basis_points: referralFeeBasisPoints,\n  protocol_fee_recipient_account: protocolFeeRecipientAccount,\n} = donationContractConfig;\n\nconst TOTAL_BASIS_POINTS = 10_000;\nlet projectAllocationBasisPoints =\n  TOTAL_BASIS_POINTS - (bypassProtocolFee ? 0 : protocolFeeBasisPoints);\nif (referrerId) {\n  projectAllocationBasisPoints -= referralFeeBasisPoints;\n}\nconst projectAllocationPercent = basisPointsToPercent(projectAllocationBasisPoints);\nconst projectAllocationAmount =\n  (parseFloat(amountNear) * projectAllocationBasisPoints) / TOTAL_BASIS_POINTS;\nconst protocolFeePercent = basisPointsToPercent(protocolFeeBasisPoints);\nconst protocolFeeAmount = (parseFloat(amountNear) * protocolFeeBasisPoints) / TOTAL_BASIS_POINTS;\nconst referrerFeePercent = basisPointsToPercent(referralFeeBasisPoints);\nconst referrerFeeAmount = (parseFloat(amountNear) * referralFeeBasisPoints) / TOTAL_BASIS_POINTS;\n\nconst nearIconUrl = props.SUPPORTED_FTS.NEAR.iconUrl;\n\nreturn (\n  <BreakdownSummary\n    style={props.containerStyle || {}}\n    onClick={() => State.update({ showBreakdown: !state.showBreakdown })}\n  >\n    <Header style={props.headerStyle || {}}>\n      <BreakdownTitle style={{ fontSize: \"14px\", lineHeight: \"16px\" }}>\n        {state.showBreakdown ? \"Hide\" : \"Show\"} breakdown\n      </BreakdownTitle>\n      <ChevronIcon src={state.showBreakdown ? CHEVRON_UP_URL : CHEVRON_DOWN_URL} />\n    </Header>\n    {state.showBreakdown && (\n      <BreakdownDetails>\n        {!bypassProtocolFee && (\n          <BreakdownItem>\n            <BreakdownItemLeft>\n              Protocol fee ({protocolFeePercent}% to {protocolFeeRecipientAccount})\n            </BreakdownItemLeft>\n            <BreakdownItemRight>\n              <BreakdownAmount>\n                {protocolFeeAmount ? protocolFeeAmount.toFixed(2) : \"-\"}\n              </BreakdownAmount>\n              <FtIcon src={props.SUPPORTED_FTS.NEAR.iconUrl} />\n            </BreakdownItemRight>\n          </BreakdownItem>\n        )}\n        {referrerId && (\n          <BreakdownItem>\n            <BreakdownItemLeft>\n              Referrer fee ({referrerFeePercent}% to {referrerId})\n            </BreakdownItemLeft>\n            <BreakdownItemRight>\n              <BreakdownAmount>\n                {referrerFeeAmount ? referrerFeeAmount.toFixed(2) : \"-\"}\n              </BreakdownAmount>\n              <FtIcon src={props.SUPPORTED_FTS.NEAR.iconUrl} />\n            </BreakdownItemRight>\n          </BreakdownItem>\n        )}\n        <BreakdownItem>\n          <BreakdownItemLeft>On-Chain Storage</BreakdownItemLeft>\n          <BreakdownItemRight>\n            <BreakdownAmount>{\"<0.01\"}</BreakdownAmount>\n            <FtIcon src={props.SUPPORTED_FTS.NEAR.iconUrl} />\n          </BreakdownItemRight>\n        </BreakdownItem>\n        <BreakdownItem>\n          <BreakdownItemLeft>\n            Project allocation (~{projectAllocationPercent}% to {recipientId || \"project\"})\n          </BreakdownItemLeft>\n          <BreakdownItemRight>\n            <BreakdownAmount>~{projectAllocationAmount.toFixed(2)}</BreakdownAmount>\n            <FtIcon src={props.SUPPORTED_FTS.NEAR.iconUrl} />\n          </BreakdownItemRight>\n        </BreakdownItem>\n      </BreakdownDetails>\n    )}\n  </BreakdownSummary>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Cart.BreakdownSummary", "fact_widget_deployments_id": "74efca426cdf5ce50cf4fa62a9f63f29", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 16}