{"tx_hash": "4Z59Msk66hRH8T8NxXvhWxTzJvwHjgeEayubbS2KdMuW", "action_id_social": "AsMtvZG5k39oZ8a5oyutqHzSs1dEDs9MPqE9t6XnZjrq-0-widget", "block_id": 115588449, "block_timestamp": "2024-03-27T15:18:16.507Z", "signer_id": "potlock.near", "widget_name": "Cart.BreakdownSummary", "source_code": "const { referrerId, totalAmount, bypassProtocolFee, recipientId, ftIcon } =\n  props;\nconst { basisPointsToPercent } = VM.require(\"potlock.near/widget/utils\") || {\n  basisPointsToPercent: () => 0,\n};\nconst { SUPPORTED_FTS } = VM.require(\"potlock.near/widget/constants\") || {\n  SUPPORTED_FTS: {},\n};\nlet DonateSDK =\n  VM.require(\"potlock.near/widget/SDK.donate\") ||\n  (() => ({\n    getConfig: () => {},\n  }));\nDonateSDK = DonateSDK({ env: props.env });\nconst donationContractConfig = DonateSDK.getConfig();\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst CHEVRON_DOWN_URL =\n  IPFS_BASE_URL + \"bafkreiabkwyfxq6pcc2db7u4ldweld5xcjesylfuhocnfz7y3n6jw7dptm\";\nconst CHEVRON_UP_URL =\n  IPFS_BASE_URL + \"bafkreibdm7w6zox4znipjqlmxr66wsjjpqq4dguswo7evvrmzlnss3c3vi\";\nconst SvgIcon = styled.svg`\n  width: 20px;\n  height: 20px;\n`;\nconst BreakdownSummary = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  cursor: pointer;\n  .breakdown-details {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-top: 8px;\n    gap: 12px;\n    border-radius: 8px;\n    border: 1px #dbdbdb solid;\n    background: #fafafa;\n    transition: all 300ms ease-in-out;\n    &.hidden {\n      visibility: hidden;\n      height: 0;\n      opacity: 0;\n      transform: translateY(100px);\n    }\n  }\n`;\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n`;\nconst BreakdownTitle = styled.div`\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n  word-wrap: break-word;\n`;\nconst ChevronIcon = styled.svg`\n  width: 1rem;\n  height: 1rem;\n  margin-left: 8px;\n  transition: all 300ms ease-in-out;\n`;\nconst BreakdownDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 8px;\n  gap: 12px;\n  padding: 16px;\n  border-radius: 8px;\n  border: 1px #dbdbdb solid;\n  background: #fafafa;\n  transition: all 300ms ease-in-out;\n`;\nconst BreakdownItem = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 16px;\n  gap: 16px;\n  :first-of-type {\n    padding-top: 1rem;\n  }\n  :last-of-type {\n    padding-bottom: 1rem;\n  }\n`;\nconst BreakdownItemLeft = styled.div`\n  color: #7b7b7b;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 400;\n  word-wrap: break-word;\n`;\nconst BreakdownItemRight = styled.div`\n  display: flex;\n  flex-direction: row;\n  // justify-content: flex-end;\n  align-items: center;\n  gap: 8px;\n`;\nconst BreakdownAmount = styled.div`\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 500;\n  word-wrap: break-word;\n`;\nconst Icon = styled.img`\n  width: 24px;\n  height: 24px;\n`;\nconst NearIcon = (props) => (\n  <SvgIcon\n    {...props}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    id=\"near-logo\"\n  >\n    <rect width=\"24\" height=\"24\" rx=\"12\" fill=\"#CECECE\" />\n    <path\n      d=\"M15.616 6.61333L13.1121 10.3333C12.939 10.5867 13.2719 10.8933 13.5117 10.68L15.9756 8.53333C16.0422 8.48 16.1354 8.52 16.1354 8.61333V15.32C16.1354 15.4133 16.0155 15.4533 15.9623 15.3867L8.50388 6.45333C8.26415 6.16 7.91787 6 7.53163 6H7.26526C6.5727 6 6 6.57333 6 7.28V16.72C6 17.4267 6.5727 18 7.27858 18C7.71809 18 8.13097 17.7733 8.3707 17.3867L10.8746 13.6667C11.0477 13.4133 10.7148 13.1067 10.475 13.32L8.0111 15.4533C7.94451 15.5067 7.85128 15.4667 7.85128 15.3733V8.68C7.85128 8.58667 7.97114 8.54667 8.02442 8.61333L15.4828 17.5467C15.7225 17.84 16.0821 18 16.4551 18H16.7214C17.4273 18 18 17.4267 18 16.72V7.28C18 6.57333 17.4273 6 16.7214 6C16.2686 6 15.8557 6.22667 15.616 6.61333Z\"\n      fill=\"black\"\n    />\n  </SvgIcon>\n);\nState.init({\n  showBreakdown: false,\n});\nif (!donationContractConfig) return \"\";\nconst {\n  protocol_fee_basis_points: protocolFeeBasisPoints,\n  referral_fee_basis_points: referralFeeBasisPoints,\n  protocol_fee_recipient_account: protocolFeeRecipientAccount,\n} = donationContractConfig;\nconst TOTAL_BASIS_POINTS = 10_000;\nlet projectAllocationBasisPoints =\n  TOTAL_BASIS_POINTS - (bypassProtocolFee ? 0 : protocolFeeBasisPoints);\nif (referrerId) {\n  projectAllocationBasisPoints -= referralFeeBasisPoints;\n}\nconst projectAllocationPercent = basisPointsToPercent(\n  projectAllocationBasisPoints\n);\nconst projectAllocationAmount =\n  (parseFloat(totalAmount) * projectAllocationBasisPoints) / TOTAL_BASIS_POINTS;\nconst protocolFeePercent = basisPointsToPercent(protocolFeeBasisPoints);\nconst protocolFeeAmount =\n  (parseFloat(totalAmount) * protocolFeeBasisPoints) / TOTAL_BASIS_POINTS;\nconst referrerFeePercent = basisPointsToPercent(referralFeeBasisPoints);\nconst referrerFeeAmount =\n  (parseFloat(totalAmount) * referralFeeBasisPoints) / TOTAL_BASIS_POINTS;\nconst nearIconUrl = SUPPORTED_FTS.NEAR.iconUrl;\nreturn (\n  <BreakdownSummary\n    style={props.containerStyle || {}}\n    onClick={() => State.update({ showBreakdown: !state.showBreakdown })}\n  >\n    <Header style={props.headerStyle || {}}>\n      <BreakdownTitle style={{ fontSize: \"14px\", lineHeight: \"16px\" }}>\n        {state.showBreakdown ? \"Hide\" : \"Show\"} breakdown\n      </BreakdownTitle>\n      <ChevronIcon\n        style={{\n          rotate: state.showBreakdown ? \"0deg\" : \"180deg\",\n        }}\n        viewBox=\"0 0 12 8\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M6 0.295013L0 6.29501L1.41 7.70501L6 3.12501L10.59 7.70501L12 6.29501L6 0.295013Z\"\n          fill=\"#7B7B7B\"\n        />\n      </ChevronIcon>\n    </Header>\n    <div\n      className={`breakdown-details ${!state.showBreakdown ? \"hidden\" : \"\"}`}\n      active={state.showBreakdown}\n    >\n      {!bypassProtocolFee && (\n        <BreakdownItem>\n          <BreakdownItemLeft>\n            Protocol fee ({protocolFeePercent}% to {protocolFeeRecipientAccount}\n            )\n          </BreakdownItemLeft>\n          <BreakdownItemRight>\n            <BreakdownAmount>\n              {protocolFeeAmount ? protocolFeeAmount.toFixed(2) : \"-\"}\n            </BreakdownAmount>\n            {ftIcon ? <Icon src={ftIcon} /> : <NearIcon />}{\" \"}\n          </BreakdownItemRight>\n        </BreakdownItem>\n      )}\n      {referrerId && (\n        <BreakdownItem>\n          <BreakdownItemLeft>\n            Referrer fee ({referrerFeePercent}% to {referrerId})\n          </BreakdownItemLeft>\n          <BreakdownItemRight>\n            <BreakdownAmount>\n              {referrerFeeAmount ? referrerFeeAmount.toFixed(2) : \"-\"}\n            </BreakdownAmount>\n            {ftIcon ? <Icon src={ftIcon} /> : <NearIcon />}\n          </BreakdownItemRight>\n        </BreakdownItem>\n      )}\n      <BreakdownItem>\n        <BreakdownItemLeft>On-Chain Storage</BreakdownItemLeft>\n        <BreakdownItemRight>\n          <BreakdownAmount>{\"<0.01\"}</BreakdownAmount>\n          {ftIcon ? <Icon src={ftIcon} /> : <NearIcon />}\n        </BreakdownItemRight>\n      </BreakdownItem>\n      <BreakdownItem>\n        <BreakdownItemLeft>\n          Project allocation (~{projectAllocationPercent}% to{\" \"}\n          {recipientId || \"project\"})\n        </BreakdownItemLeft>\n        <BreakdownItemRight>\n          <BreakdownAmount>\n            ~{projectAllocationAmount.toFixed(2)}\n          </BreakdownAmount>\n          {ftIcon ? <Icon src={ftIcon} /> : <NearIcon />}\n        </BreakdownItemRight>\n      </BreakdownItem>\n    </div>\n  </BreakdownSummary>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Cart.BreakdownSummary", "fact_widget_deployments_id": "50b15644594afc3408d9bdde8a6693d5", "inserted_timestamp": "2024-03-27T16:32:19.732Z", "modified_timestamp": "2024-03-27T16:32:19.732Z", "__row_index": 19}