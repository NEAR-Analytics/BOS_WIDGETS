{"tx_hash": "BqeM3Ywrc6fsJGRBfTmgj9VLZufr74kUFAWeWG4uzbeu", "action_id_social": "CbcXWw3Bg8VRMuq2gTqPrRBAjKnvCgLnqJrKCkR4mXx5-0-widget", "block_id": 115722656, "block_timestamp": "2024-03-29T14:20:36.213Z", "signer_id": "potlock.near", "widget_name": "Project.Pots", "source_code": "const { projectId } = props;\n\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\") || {\n  ownerId: \"\",\n};\n\nlet PotFactorySDK =\n  VM.require(\"potlock.near/widget/SDK.potfactory\") ||\n  (() => ({\n    getPots: () => {},\n  }));\nPotFactorySDK = PotFactorySDK({ env: props.env });\nconst pots = PotFactorySDK.getPots();\n\nconst PotSDK = VM.require(\"potlock.near/widget/SDK.pot\") || {\n  asyncGetApprovedApplications: () => {},\n};\n\nconst [potIds, setPotIds] = useState(null); // ids[] of pots that approved project\nconst [loading, setLoading] = useState(true); // ids[] of pots that approved project\n\nconst getApprovedApplications = (potId) =>\n  PotSDK.asyncGetApprovedApplications(potId)\n    .then((applications) => {\n      if (applications.some((app) => app.project_id === projectId)) {\n        setPotIds([...(potIds || []), potId]);\n      }\n      if (pots[pots.length - 1].id === potId) setLoading(false);\n    })\n    .catch(() => console.log(`Error fetching approved applications for ${potId}`));\n\nif (pots && loading) {\n  pots.forEach((pot) => {\n    getApprovedApplications(pot.id);\n  });\n}\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  > div {\n    padding-top: 0rem;\n  }\n  @media screen and (max-width: 1400px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  @media screen and (max-width: 768px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n`;\n\nconst NoResults = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 68px 105px;\n  border-radius: 12px;\n  background: #f6f5f3;\n  .text {\n    font-family: \"Lora\";\n    max-width: 290px;\n    font-size: 22px;\n    font-style: italic;\n    font-weight: 500;\n    color: #292929;\n  }\n  img {\n    width: 60%;\n  }\n  @media screen and (max-width: 768px) {\n    flex-direction: column-reverse;\n    padding: 24px 16px;\n    .text {\n      font-size: 16px;\n    }\n    img {\n      width: 100%;\n    }\n  }\n`;\n\nconst PotCard = ({ potId }) => (\n  <Widget\n    src={`${ownerId}/widget/Pots.Card`}\n    props={{\n      ...props,\n      potId,\n      tab: \"pots\",\n    }}\n  />\n);\n\nreturn loading ? (\n  \"Loading...\"\n) : potIds.length ? (\n  <Container>\n    {potIds.map((potId) => (\n      <PotCard potId={potId} />\n    ))}\n  </Container>\n) : (\n  <NoResults>\n    <div className=\"text\">This project has not participated in any pots yet.</div>\n    <img\n      src=\"https://ipfs.near.social/ipfs/bafkreibcjfkv5v2e2n3iuaaaxearps2xgjpc6jmuam5tpouvi76tvfr2de\"\n      alt=\"pots\"\n    />\n  </NoResults>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.Pots", "fact_widget_deployments_id": "df49e61d5bcdf5efa0410b8a495f2b16", "inserted_timestamp": "2024-03-29T15:31:57.070Z", "modified_timestamp": "2024-03-29T15:31:57.070Z", "__row_index": 5}