{"tx_hash": "DrEPwaDWQFFp45anJbQYZ2nrYK9Eu9QuW79WW2K2CBgE", "action_id_social": "8xe7PkfDNduLfHNZNZYoQqed2EGVRZmUmjtA3Fw2BxVC-0-widget", "block_id": 113756789, "block_timestamp": "2024-02-28T14:39:10.520Z", "signer_id": "potlock.near", "widget_name": "Project.Pots", "source_code": "const { POT_FACTORY_CONTRACT_ID, projectId } = props;\n\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\") || {\n  ownerId: \"\",\n};\n\n// ids[] of pots that approved project\nconst [potIds, setPotIds] = useState(null);\nconst [potsConfig, setPotsConfig] = useState(null);\n\nconst getApprovedApplications = (potId) =>\n  Near.asyncView(potId, \"get_approved_applications\", {})\n    .then((applications) => {\n      if (applications.some((app) => app.project_id === projectId))\n        setPotIds([...(potIds || []), potId]);\n    })\n    .catch((err) => console.log(`Error fetching approved applications for ${potId}`));\n\nif (!potIds) {\n  Near.asyncView(POT_FACTORY_CONTRACT_ID, \"get_pots\", {})\n    .then((pots) => {\n      pots.forEach((pot) => {\n        getApprovedApplications(pot.id);\n      });\n    })\n    .catch((err) => console.log(\"error fetching pots\", err));\n}\n\nif (!potsConfig) {\n  Near.asyncView(POT_FACTORY_CONTRACT_ID, \"get_config\", {}).then((potFactoryConfig) => {\n    setPotsConfig(potFactoryConfig);\n  });\n}\n\nconst Container = styled.div`\n  > div {\n    padding-top: 0rem;\n  }\n`;\n\nreturn potIds ? (\n  <Container>\n    <Widget\n      src={`${ownerId}/widget/Project.ListSection`}\n      props={{\n        ...props,\n        tab: \"pots\",\n        items: potIds,\n        itemsAll: potsConfig,\n        renderItem: (pot) => (\n          <Widget\n            src={`${ownerId}/widget/Pots.Card`}\n            props={{\n              ...props,\n              potId: pot,\n              potConfig: potsConfig[pot],\n            }}\n          />\n        ),\n        maxCols: 2,\n      }}\n    />\n  </Container>\n) : (\n  <div>Loading...</div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.Pots", "fact_widget_deployments_id": "e21e6190ac4861bef3bd628ffe02273a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}