{"tx_hash": "4Z59Msk66hRH8T8NxXvhWxTzJvwHjgeEayubbS2KdMuW", "action_id_social": "AsMtvZG5k39oZ8a5oyutqHzSs1dEDs9MPqE9t6XnZjrq-0-widget", "block_id": 115588449, "block_timestamp": "2024-03-27T15:18:16.507Z", "signer_id": "potlock.near", "widget_name": "Project.FundingRaised", "source_code": "const {\n  donations,\n  potPayouts,\n  directDonations,\n  matchingRoundDonations,\n  profile,\n} = props;\nconst { ownerId, SUPPORTED_FTS } = VM.require(\n  \"potlock.near/widget/constants\"\n) || {\n  ownerId: \"\",\n  SUPPORTED_FTS: {},\n};\nconst NoResults = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 80px 1rem;\n  border-radius: 12px;\n  gap: 24px;\n  background: #f6f5f3;\n  .text {\n    font-family: \"Lora\";\n    font-size: 22px;\n    font-style: italic;\n    font-weight: 500;\n    color: #292929;\n  }\n  img {\n    width: 100%;\n    max-width: 604px;\n  }\n  @media screen and (max-width: 768px) {\n    padding: 1.5rem 1rem;\n    .text {\n      font-size: 16px;\n    }\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst Line = styled.div`\n  width: 100%;\n  background: #c7c7c7;\n  height: 1px;\n  margin: 3rem 0;\n`;\nconst externalFunding = profile.plFundingSources\n  ? JSON.parse(profile.plFundingSources)\n  : [];\n// Get total donations & Unique donors count\nconst [totalDonationAmountNear, uniqueDonors, totalMatched] = useMemo(() => {\n  let totalNear = Big(0);\n  const uniqueDonors = [\n    ...new Set(donations.map((donation) => donation.donor_id)),\n  ];\n  donations.forEach((donation) => {\n    if (donation.ft_id === \"near\" || donation.base_currency === \"NEAR\") {\n      totalNear = totalNear.plus(Big(donation.total_amount || donation.amount));\n    }\n  });\n  const totalDonationAmountNear = SUPPORTED_FTS[\"NEAR\"].fromIndivisible(\n    totalNear.toString()\n  );\n  let totalMatched = Big(0);\n  potPayouts.forEach((payout) => {\n    totalMatched = totalMatched.plus(Big(payout.amount));\n  });\n  totalMatched = SUPPORTED_FTS[\"NEAR\"].fromIndivisible(totalMatched.toString());\n  return [totalDonationAmountNear, uniqueDonors?.length, totalMatched];\n}, [donations]);\nreturn externalFunding.length === 0 && donations.length === 0 ? (\n  <NoResults>\n    <img\n      src=\"https://ipfs.near.social/ipfs/bafkreif5awokaip363zk6zqrsgmpehs6rap3w67engc4lxdlk4x6iystru\"\n      alt=\"pots\"\n    />\n    <div className=\"text\">No funds have been raised for this project.</div>\n  </NoResults>\n) : (\n  <Container>\n    {externalFunding.length > 0 && (\n      <Widget\n        src={`${ownerId}/widget/Project.ExternalFunding`}\n        props={{ ...props, externalFunding }}\n      />\n    )}\n    {externalFunding.length > 0 && donations.length > 0 && <Line />}\n    {donations.length > 0 && (\n      <Widget\n        src={`${ownerId}/widget/Project.PotlockFunding`}\n        props={{\n          ...props,\n          totalDonationAmountNear,\n          uniqueDonors,\n          totalMatched,\n        }}\n      />\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.FundingRaised", "fact_widget_deployments_id": "7c24f0d240088861e7b157e1de551e4a", "inserted_timestamp": "2024-03-27T16:32:19.732Z", "modified_timestamp": "2024-03-27T16:32:19.732Z", "__row_index": 1}