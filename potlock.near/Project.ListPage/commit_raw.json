{"tx_hash": "B2HmkWFzj4KrYJPdEQDb11LjsKYoZoWno8GjCcFRndG2", "action_id_social": "CvV4fAjZWmy86xfDt1tNAZF9ehSLjksMjjAKq7oVuY1h-0-widget", "block_id": 117451231, "block_timestamp": "2024-04-23T12:57:47.994Z", "signer_id": "potlock.near", "widget_name": "Project.ListPage", "source_code": "const { getTagsFromSocialProfileData, getTeamMembersFromSocialProfileData } = VM.require(\n  \"potlock.near/widget/utils\"\n) || {\n  getTagsFromSocialProfileData: () => [],\n  getTeamMembersFromSocialProfileData: () => [],\n};\n\nconst { HomeBannerBackground } = VM.require(\"potlock.near/widget/Pots.HomeBannerBackground\") || {\n  HomeBannerBackground: () => {},\n};\n\n// Card Skeleton - Loading fallback\nconst loadingSkeleton = styled.keyframes`\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.4;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nconst CardSkeletonContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 447px;\n  width: 100%;\n  max-width: 400px;\n  border-radius: 12px;\n  background: white;\n  box-shadow: 0px -2px 0px #dbdbdb inset;\n  border: 1px solid #dbdbdb;\n  margin-left: auto;\n  margin-right: auto;\n\n  animation-name: ${loadingSkeleton};\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n`;\n\nconst HeaderSkeleton = styled.div`\n  display: block;\n  width: 100%;\n  height: 168px;\n  background: #eee;\n`;\n\nconst ProfileImageSkeleton = styled.div`\n  background: #e0e0e0;\n  margin-left: 32px;\n  transform: translateY(148px);\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  border-radius: 999px;\n`;\n\nconst TitleSkeleton = styled.div`\n  width: 120px;\n  height: 24px;\n  background: #eee;\n  margin-left: 24px;\n  margin-top: 24px;\n`;\n\nconst DescriptionSkeleton = styled.div`\n  width: 83%;\n  height: 48px;\n  background: #eee;\n  margin-left: 24px;\n  margin-top: 24px;\n`;\n\nconst TagSkeleton = styled.div`\n  background: #eee;\n  border-radius: 4px;\n  height: 34px;\n  width: 110px;\n  margin: 24px;\n`;\n\nconst FooterItemSkeleton = styled.div`\n  width: 150px;\n  height: 40px;\n  background: #eee;\n\n  @media screen and (max-width: 390px) {\n    width: 100px;\n  }\n`;\n\nconst DonationsInfoContainerSkeleton = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  width: 100%;\n  border-top: 1px #f0f0f0 solid;\n`;\n\nconst DonationsInfoItemSkeleton = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  align-items: center;\n`;\n\nconst CardSkeleton = () => (\n  <CardSkeletonContainer>\n    <HeaderSkeleton />\n    <ProfileImageSkeleton />\n    <TitleSkeleton />\n    <DescriptionSkeleton />\n    <TagSkeleton />\n    <DonationsInfoContainerSkeleton>\n      <DonationsInfoItemSkeleton>\n        <FooterItemSkeleton />\n      </DonationsInfoItemSkeleton>\n      <DonationsInfoItemSkeleton>\n        <FooterItemSkeleton />\n      </DonationsInfoItemSkeleton>\n    </DonationsInfoContainerSkeleton>\n  </CardSkeletonContainer>\n);\n\n// ListPage Content\n\nconst { tab } = props;\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\") || {\n  ownerId: \"\",\n};\nconst { yoctosToUsd } = VM.require(\"potlock.near/widget/utils\") || { yoctosToUsd: () => \"\" };\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst HERO_BACKGROUND_IMAGE_URL =\n  IPFS_BASE_URL + \"bafkreiewg5afxbkvo6jbn6jgv7zm4mtoys22jut65fldqtt7wagar4wbga\";\n\nconst headerTitleFontSizePx = 88;\n\nconst HeaderContainer = styled.div`\n  width: 100%;\n  // background: #fffaf4;\n  // background: white;\n  padding: 80px 64px;\n\n  @media (max-width: 768px) {\n    padding: 36px 24px;\n  }\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst HeaderTitle = styled.div`\n  color: #2e2e2e;\n  font-size: ${headerTitleFontSizePx}px;\n  font-weight: 500;\n  word-wrap: break-word;\n  position: relative;\n  text-align: center;\n  z-index: 1;\n  position: relative;\n  font-family: \"Lora\";\n  @media (max-width: 768px) {\n    font-size: 48px;\n  }\n`;\n\nconst HeaderDescription = styled.div`\n  color: #2e2e2e;\n  font-size: 32px;\n  font-weight: 400;\n  word-wrap: break-word;\n  max-width: 866px;\n  text-align: center;\n  margin-top: 32px;\n\n  @media (max-width: 768px) {\n    font-size: 24px;\n    text-align: center;\n  }\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 32px;\n  margin-top: 32px;\n`;\n\nconst Underline = styled.div`\n  position: absolute;\n  top: ${headerTitleFontSizePx - 40}px;\n  left: -40px;\n  z-index: -1;\n\n  @media (max-width: 768px) {\n    top: 30px;\n    left: -30px;\n  }\n`;\n\nconst containerStyle = props.containerStyle ?? {};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n`;\n\nconst HeroOuter = styled.div`\n  padding: 136px 64px;\n`;\n\nconst HeroInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: center;\n  margin-bottom: 24px;\n  padding: 24px 64px 24px 64px;\n\n  @media screen and (max-width: 768px) {\n    padding: 16px 24px;\n  }\n`;\n\nconst SectionTitle = styled.div`\n  font-size: 24px;\n  font-weight: 600;\n  color: #2e2e2e;\n  font-family: \"Mona Sans\", sans-serif;\n`;\n\nconst ProjectsCount = styled.div`\n  color: #7b7b7b;\n  font-size: 24px;\n  font-weight: 400;\n  margin-left: 32px;\n\n  @media screen and (max-width: 768px) {\n    margin-left: 16px;\n  }\n`;\n\nconst ProjectsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  overflow-y: hidden;\n  padding-top: 5px;\n`;\n\nconst HeroContainer = styled.div`\n  width: 100%;\n  min-height: 700px;\n  position: relative;\n\n  @media screen and (max-width: 768px) {\n    min-height: 600px;\n  }\n`;\n\nconst Hero = styled.img`\n  width: 100%;\n  height: 100%;\n  display: block;\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst InfoCardsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  margin: 40px 0;\n  gap: 40px;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    gap: 24px;\n    // justify-content: center;\n  }\n`;\n\nconst Button = styled.button`\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 24px;\n  background: #dd3345;\n  overflow: hidden;\n  box-shadow: 0px -2.700000047683716px 0px #4a4a4a inset;\n  border-radius: 6px;\n  border: 1px solid #4a4a4a;\n  gap: 8px;\n  display: inline-flex;\n  text-align: center;\n  color: white;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst ButtonRegisterProject = styled.a`\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 24px;\n  background: #fef6ee;\n  overflow: hidden;\n  box-shadow: 0px -2.700000047683716px 0px #4a4a4a inset;\n  border-radius: 6px;\n  border: 1px solid #4a4a4a;\n  gap: 8px;\n  display: inline-flex;\n  text-align: center;\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst Stats = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 48px;\n  margin-top: 40px;\n\n  @media screen and (max-width: 768px) {\n    gap: 16px;\n  }\n`;\n\nconst StatsTitle = styled.div`\n  color: #292929;\n  font-size: 44px;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  gap: 8px;\n  font-weight: 600;\n\n  @media screen and (max-width: 768px) {\n    font-size: 30px;\n    font-weight: 500;\n    gap: 5px;\n  }\n`;\n\nconst StatsSubTitle = styled.div`\n  color: #525252;\n  font-size: 14px;\n\n  @media screen and (max-width: 768px) {\n    font-size: 12px;\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding-top: 64px;\n  @media screen and (max-width: 768px) {\n    padding-top: 64px;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  width: 100%;\n`;\n\nconst Title = styled.div`\n  color: rgb(41, 41, 41);\n  font-style: normal;\n  font-size: 18px;\n  font-weight: 600;\n`;\n\nconst ContainerHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: 1.5rem;\n`;\n\nconst ProjectList = styled.div`\n  display: grid;\n  gap: 31px;\n  padding-bottom: 3rem;\n  // For mobile devices (1 column)\n  @media screen and (max-width: 739px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n\n  // For tablet devices (2 columns)\n  @media screen and (min-width: 740px) and (max-width: 1023px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  // For desktop devices (3 columns)\n  @media screen and (min-width: 1024px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n`;\n\nconst FilterWrapper = styled.div`\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  .filter-menu {\n    left: 0;\n    right: auto;\n  }\n  .left-side-menu {\n    left: auto;\n    right: 0;\n  }\n  @media screen and (max-width: 768px) {\n    flex-wrap: wrap;\n    > div:nth-of-type(2) {\n      width: 100%;\n      order: -1;\n      flex: auto;\n    }\n    .filter-menu {\n      width: 250px !important;\n    }\n    .left-side-menu {\n      right: auto;\n      left: 0;\n    }\n  }\n`;\n\nState.init({\n  isModalOpen: false,\n  successfulDonation: null,\n});\n\nlet ListsSDK =\n  VM.require(\"potlock.near/widget/SDK.lists\") ||\n  (() => ({\n    getRegistrations: () => {},\n    isRegistryAdmin: () => {},\n  }));\nListsSDK = ListsSDK({ env: props.env });\n\nconst accountId = context.accountId;\nconst isRegistryAdmin = ListsSDK.isRegistryAdmin(context.accountId);\nconst allRegistrations = ListsSDK.getRegistrations() || [];\nconst isRegisteredProject = allRegistrations.find(\n  (registration) => registration.registrant_id === accountId\n);\n\nlet DonateSDK =\n  VM.require(\"potlock.near/widget/SDK.donate\") ||\n  (() => ({\n    getConfig: () => {},\n  }));\nDonateSDK = DonateSDK({ env: props.env });\n\nconst [projects, approvedProjects] = useMemo(() => {\n  allRegistrations.sort((a, b) =>\n    b.status === \"Approved\" ? -1 : a.status === \"Approved\" ? 1 : a.status.localeCompare(b.status)\n  );\n  allRegistrations.sort((a, b) => b.submitted_ms - a.submitted_ms);\n\n  const approvedProjects = allRegistrations.filter((project) => project.status === \"Approved\");\n  return [allRegistrations, approvedProjects];\n}, allRegistrations);\n\nconst featuredProjectIds = [\"v1.foodbank.near\", \"potlock.near\", \"yearofchef.near\"];\nconst featuredProjects = useMemo(\n  () => projects.filter((project) => featuredProjectIds.includes(project.registrant_id)),\n  projects\n);\nconst [totalDonation, setTotalDonation] = useState(0);\nconst [totalDonated, setTotalDonated] = useState(0);\nconst [filteredProjects, setFilteredProjects] = useState(approvedProjects);\nconst [searchTerm, setSearchTerm] = useState(\"\");\nconst [sort, setSort] = useState(\"Sort\");\n\nconst tagsList = {\n  Category: [\n    {\n      label: \"Desci\",\n      val: \"Desci\",\n    },\n    {\n      label: \"Open Source\",\n      val: \"Open Source\",\n    },\n    {\n      label: \"Non Profit\",\n      val: \"Non Profit\",\n    },\n    {\n      label: \"Social Impact\",\n      val: \"Social Impact\",\n    },\n    {\n      label: \"Climate\",\n      val: \"Climate\",\n    },\n    {\n      label: \"Public Good\",\n      val: \"Public Good\",\n    },\n    {\n      label: \"Community\",\n      val: \"Community\",\n    },\n    {\n      label: \"Education\",\n      val: \"Education\",\n    },\n  ],\n  Status: [\n    {\n      label: \"All\",\n      val: \"all\",\n    },\n    {\n      label: \"Approved\",\n      val: \"Approved\",\n    },\n    {\n      label: \"Pending\",\n      val: \"Pending\",\n    },\n    {\n      label: \"Rejected\",\n      val: \"Rejected\",\n    },\n    {\n      label: \"Graylisted\",\n      val: \"Graylisted\",\n    },\n    {\n      label: \"Blacklisted\",\n      val: \"Blacklisted\",\n    },\n  ],\n};\n\nuseEffect(() => {\n  if (filteredProjects.length < 1) {\n    setFilteredProjects(approvedProjects);\n  }\n}, [projects]);\n\nconst donateConfig = DonateSDK.getConfig();\nif (donateConfig && !totalDonated && !totalDonation) {\n  const lastDonationAmount = yoctosToUsd(donateConfig.net_donations_amount);\n  setTotalDonated(lastDonationAmount);\n  setTotalDonation(donateConfig.total_donations_count);\n}\n\nconst donateRandomly = () => {\n  State.update({\n    isModalOpen: true,\n    successfulDonation: null,\n  });\n};\n\nconst containerStyleHeader = {\n  position: \"absolute\",\n  height: \"100%\",\n  top: 0,\n  left: 0,\n  marginBottom: \"24px\",\n  background: \"radial-gradient(80% 80% at 40.82% 50%, white 25%, rgba(255, 255, 255, 0) 100%)\",\n};\n\nconst SORT_FILTERS = {\n  NEW_TO_OLD: \"Newest to Oldest\",\n  OLD_TO_NEW: \"Oldest to Newest\",\n  // MOST_TO_LEAST_DONATIONS: \"Most to Least Donations\",\n  // LEAST_TO_MOST_DONATIONS: \"Least to Most Donations\",\n};\n\nconst sortHighestToLowest = (projects) => {\n  const sort = (a, b) => {\n    return parseFloat(b.total) - parseFloat(a.total);\n  };\n  const projectLength = projects.length;\n\n  for (let i = 0; i < projectLength - 1; i++) {\n    for (let j = 0; j < projectLength - 1 - i; j++) {\n      if (sort(projects[j], projects[j + 1]) > 0) {\n        const temp = projects[j];\n        projects[j] = projects[j + 1];\n        projects[j + 1] = temp;\n      }\n    }\n  }\n\n  setFilteredProjects(projects);\n};\n\nconst sortLowestToHighest = (projects) => {\n  const sort = (a, b) => {\n    return parseFloat(b.total) - parseFloat(a.total);\n  };\n  const projectLength = projects.length;\n\n  for (let i = 0; i < projectLength - 1; i++) {\n    for (let j = 0; j < projectLength - 1 - i; j++) {\n      if (sort(projects[j], projects[j + 1]) < 0) {\n        const temp = projects[j];\n        projects[j] = projects[j + 1];\n        projects[j + 1] = temp;\n      }\n    }\n  }\n\n  setFilteredProjects(projects);\n};\n\nconst sortNewToOld = (projects) => {\n  const projectLength = projects.length;\n\n  for (let i = 0; i < projectLength - 1; i++) {\n    for (let j = 0; j < projectLength - i - 1; j++) {\n      if (projects[j].submitted_ms < projects[j + 1].submitted_ms) {\n        const temp = projects[j];\n        projects[j] = projects[j + 1];\n        projects[j + 1] = temp;\n      }\n    }\n  }\n  setFilteredProjects(projects);\n};\n\nconst sortOldToNew = (projects) => {\n  const projectLength = projects.length;\n\n  for (let i = 0; i < projectLength - 1; i++) {\n    for (let j = 0; j < projectLength - i - 1; j++) {\n      if (projects[j].submitted_ms > projects[j + 1].submitted_ms) {\n        const temp = projects[j];\n        projects[j] = projects[j + 1];\n        projects[j + 1] = temp;\n      }\n    }\n  }\n  setFilteredProjects(projects);\n};\n\nconst handleSortChange = (sortType) => {\n  setSort(sortType);\n  switch (sortType) {\n    case \"All\":\n      setFilteredProjects(filteredProjects);\n      break;\n    case \"Newest to Oldest\":\n      sortNewToOld(filteredProjects);\n      break;\n    case \"Oldest to Newest\":\n      sortOldToNew(filteredProjects);\n      break;\n    case \"Most to Least Donations\":\n      sortHighestToLowest(filteredProjects);\n      break;\n    case \"Least to Most Donations\":\n      sortLowestToHighest(filteredProjects);\n      break;\n  }\n};\n\nconst searchByWords = (projects, searchTerm) => {\n  searchTerm = searchTerm.toLowerCase().trim();\n  let results = [];\n  // const dataArr = projects;\n  // let alldata = [];\n  projects.forEach((project) => {\n    const { registrant_id, status } = project;\n    const data = Social.getr(`${registrant_id}/profile`);\n    // alldata.push(data);\n    if (registrant_id.includes(searchTerm) || status.toLowerCase().includes(searchTerm)) {\n      results.push(project);\n    } else if (data) {\n      if (\n        data.description.toLowerCase().includes(searchTerm) ||\n        data.name.toLowerCase().includes(searchTerm) ||\n        getTagsFromSocialProfileData(data).join(\"\").toLowerCase().includes(searchTerm) ||\n        getTeamMembersFromSocialProfileData(data).join(\"\").toLowerCase().includes(searchTerm)\n      ) {\n        results.push(project);\n      }\n    }\n  });\n  setFilteredProjects(results);\n};\n\nconst checkAllTrue = (arr) => arr.every((item) => item === true);\n\nconst filterProjects = (filters) =>\n  projects.filter((item) => {\n    const filterVals = Object.keys(filters).map((type) => {\n      if (filters[type].length === 0) return true;\n\n      if (type === \"Category\") {\n        const data = Social.getr(`${item.registrant_id}/profile`);\n        const tagsForProfile = getTagsFromSocialProfileData(data);\n        return filters[type].some((tag) => tagsForProfile.includes(tag));\n      }\n\n      if (type === \"Status\") {\n        if (filters[type].includes(\"all\")) return true;\n        return filters[type].includes(item.status);\n      }\n      return true;\n    });\n    return checkAllTrue(filterVals);\n  });\nconst handleTag = (selectedFilters) => {\n  const projectFilterBySearch = filterProjects(selectedFilters);\n  console.log(\"projectFilterBySearch\", projectFilterBySearch);\n\n  setFilteredProjects(projectFilterBySearch);\n};\n\nconst getRandomProject = () => {\n  if (projects) {\n    const randomIndex = Math.floor(Math.random() * projects.length);\n    return projects[randomIndex]?.registrant_id;\n  }\n};\n\nreturn (\n  <>\n    <HeroContainer>\n      <HeaderContainer style={containerStyleHeader}>\n        <HeaderContent>\n          <HeaderTitle>\n            Transforming\n            <Underline>\n              <svg\n                width=\"340\"\n                height=\"42\"\n                viewBox=\"0 0 340 42\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M7.29967 39C-14.0566 35.9491 49.9788 32.436 71.4774 30.6444C151.734 23.9564 232.915 20.5161 312.9 15\"\n                  stroke=\"#DD3345\"\n                  stroke-width=\"5\"\n                  stroke-linecap=\"round\"\n                />\n                <path\n                  d=\"M31.2997 27C9.94337 23.9491 73.9788 20.436 95.4774 18.6444C175.734 11.9564 256.915 8.51608 336.9 3\"\n                  stroke=\"#DD3345\"\n                  stroke-width=\"5\"\n                  stroke-linecap=\"round\"\n                />\n              </svg>\n            </Underline>\n          </HeaderTitle>\n          <HeaderTitle>Funding for Public Goods</HeaderTitle>\n          <HeaderDescription>\n            Discover impact projects, donate directly, & participate in funding rounds.\n          </HeaderDescription>\n        </HeaderContent>\n\n        <ButtonsContainer>\n          <Button onClick={donateRandomly}>Donate Randomly</Button>\n          <ButtonRegisterProject\n            href={\n              isRegisteredProject ? `?tab=project&projectId=${accountId}` : \"?tab=createproject\"\n            }\n          >\n            {isRegisteredProject ? \"View Your Project\" : \"Register Your Project\"}\n          </ButtonRegisterProject>\n        </ButtonsContainer>\n        <Widget src=\"potlock.near/widget/Project.DonationStats\" />\n      </HeaderContainer>\n    </HeroContainer>\n    <Content>\n      <ContainerHeader>\n        <Header>\n          <Title>Featured Projects</Title>\n        </Header>\n\n        <ProjectList>\n          {(featuredProjects || []).map((project) => {\n            return (\n              <Widget\n                src={`${ownerId}/widget/Project.Card`}\n                loading={\n                  <div\n                    style={{\n                      width: \"355px\",\n                      height: \"455px\",\n                      borderRadius: \"12px\",\n                      background: \"white\",\n                      boxShadow: \"0px -2px 0px #dbdbdb inset\",\n                      border: \"1px solid #dbdbdb\",\n                    }}\n                  />\n                }\n                props={{\n                  ...props,\n                  projectId: project.registrant_id,\n                  allowDonate: true,\n                }}\n              />\n            );\n          })}\n        </ProjectList>\n      </ContainerHeader>\n      <Header>\n        <Title>\n          All Projects\n          <span style={{ color: \"#DD3345\", marginLeft: \"8px\", fontWeight: 600 }}>\n            {filteredProjects.length}\n          </span>\n        </Title>\n        <FilterWrapper>\n          <Widget\n            src={`${ownerId}/widget/Inputs.FilterDropdown`}\n            props={{\n              ...props,\n              onClick: handleTag,\n              multipleOptions: true,\n              options: tagsList,\n              defaultSelected: {\n                Status: [\"Approved\"],\n              },\n              menuClass: \"filter-menu\",\n            }}\n          />\n          <Widget\n            src={`${ownerId}/widget/Project.SearchBar`}\n            props={{\n              title: sort,\n              tab: tab,\n              numItems: filteredProjects.length,\n              itemName: \"project\",\n              sortList: Object.values(SORT_FILTERS),\n              FilterMenuClass: `left-side-menu`,\n              setSearchTerm: (value) => {\n                searchByWords(projects, value);\n              },\n              handleSortChange: (filter) => {\n                handleSortChange(filter);\n              },\n            }}\n          />\n        </FilterWrapper>\n      </Header>\n      <ProjectsContainer>\n        {filteredProjects.length ? (\n          <Widget\n            src={`${ownerId}/widget/Project.ListSection`}\n            props={{\n              ...props,\n              items: filteredProjects,\n              shouldShuffle: !isRegistryAdmin,\n              renderItem: (project) => {\n                return (\n                  <Widget\n                    src={`${ownerId}/widget/Project.Card`}\n                    loading={<CardSkeleton />}\n                    props={{\n                      ...props,\n                      projectId: project.registrant_id,\n                      allowDonate: true,\n                      // allowDonate:\n                      //   sybilRequirementMet &&\n                      //   publicRoundOpen &&\n                      //   project.project_id !== accountId,\n                      // requireVerification: !sybilRequirementMet,\n                    }}\n                  />\n                );\n              },\n            }}\n          />\n        ) : (\n          <div style={{ alignSelf: \"flex-start\", margin: \"24px 0px\" }}>No results</div>\n        )}\n      </ProjectsContainer>\n    </Content>\n    {state.isModalOpen && (\n      <Widget\n        src={`${ownerId}/widget/ModalDonation.Main`}\n        props={{\n          ...props,\n          isModalOpen: state.isModalOpen,\n          projectId: getRandomProject(),\n          onClose: () =>\n            State.update({\n              isModalOpen: false,\n            }),\n          openDonationModalSuccess: (donation) => {\n            State.update({\n              isModalOpen: false,\n              successfulDonation: donation,\n            });\n          },\n        }}\n      />\n    )}\n    {state.successfulDonation && (\n      <Widget\n        src={`${ownerId}/widget/Project.ModalSuccess`}\n        props={{\n          ...props,\n          successfulDonation: state.successfulDonation,\n          isModalOpen: state.successfulDonation != null,\n          onClose: () =>\n            State.update({\n              successfulDonation: null,\n            }),\n        }}\n      />\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.ListPage", "fact_widget_deployments_id": "77992ceba4bdd163e37a08c4cc256bf5", "inserted_timestamp": "2024-04-30T19:47:44.840Z", "modified_timestamp": "2024-04-30T19:47:44.840Z", "__row_index": 0}