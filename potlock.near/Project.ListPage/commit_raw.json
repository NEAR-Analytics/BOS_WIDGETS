{"tx_hash": "GqFPhYC3bLNrRst673MU8K6tqa2oHpc1Mk6WDLrtUsQg", "action_id_social": "77eNnEdNfW45XeLcJUtLCfzpV1fykHwj1AdnbFE9bBZ2-0-widget", "block_id": 110355516, "block_timestamp": "2024-01-14T03:45:20.810Z", "signer_id": "potlock.near", "widget_name": "Project.ListPage", "source_code": "const { ownerId } = props;\nconst registryId = \"registry.potlock.near\";\n\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst HERO_BACKGROUND_IMAGE_URL =\n  IPFS_BASE_URL + \"bafkreiewg5afxbkvo6jbn6jgv7zm4mtoys22jut65fldqtt7wagar4wbga\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n`;\n\nconst HeroOuter = styled.div`\n  padding: 136px 64px;\n`;\n\nconst HeroInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: center;\n  margin-bottom: 24px;\n  padding: 24px 64px 24px 64px;\n\n  @media screen and (max-width: 768px) {\n    padding: 16px 24px;\n  }\n`;\n\nconst SectionTitle = styled.div`\n  font-size: 24px;\n  font-weight: 600;\n  color: #2e2e2e;\n  font-family: Mona-Sans;\n`;\n\nconst ProjectsCount = styled.div`\n  color: #7b7b7b;\n  font-size: 24px;\n  font-weight: 400;\n  margin-left: 32px;\n\n  @media screen and (max-width: 768px) {\n    margin-left: 16px;\n  }\n`;\n\nconst ProjectsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  // padding: 0px 64px 96px 64px;\n  // background: #fafafa;\n\n  @media screen and (max-width: 768px) {\n    margin-top: 200px;\n  }\n`;\n\nconst HeroContainer = styled.div`\n  width: 100%;\n  min-height: 700px;\n  position: relative;\n`;\n\nconst Hero = styled.img`\n  width: 100%;\n  height: 100%;\n  display: block;\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst InfoCardsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  margin: 40px 0;\n  gap: 40px;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    gap: 24px;\n    // justify-content: center;\n  }\n`;\n\nconst userIsAdmin = props.registryAdmins && props.registryAdmins.includes(context.accountId);\n\nconst projects = useMemo(\n  () =>\n    userIsAdmin\n      ? props.registeredProjects\n      : props.registeredProjects.filter((project) => project.status === \"Approved\"),\n  [props.registeredProjects, userIsAdmin]\n);\n\nconst [totalDonations, totalDonors] = useMemo(() => {\n  if (!props.donations) {\n    return [\"\", \"\", \"\"];\n  }\n  let totalDonations = new Big(\"0\");\n  let donors = {};\n  props.donations.forEach((donation) => {\n    const totalAmount = new Big(donation.total_amount);\n    const referralAmount = new Big(donation.referrer_fee || \"0\");\n    const protocolAmount = new Big(donation.protocol_fee || \"0\");\n    totalDonations = totalDonations.plus(totalAmount.minus(referralAmount).minus(protocolAmount));\n    donors[donation.donor_id] = true;\n  });\n  return [totalDonations.div(1e24).toNumber().toFixed(2), Object.keys(donors).length];\n}, [props.donations]);\n\nreturn (\n  <>\n    <HeroContainer>\n      <Hero src={HERO_BACKGROUND_IMAGE_URL} alt=\"hero\" />\n      <Widget\n        src={`${ownerId}/widget/Components.Header`}\n        props={{\n          title1: \"Transforming\",\n          title2: \"Funding for Public Goods\",\n          description:\n            \"Discover impact projects, donate directly, or get automatic referral fees for raising donations\",\n          centered: true,\n          containerStyle: {\n            position: \"absolute\",\n            height: \"100%\",\n            top: 0,\n            left: 0,\n            marginBottom: \"24px\",\n            background:\n              \"radial-gradient(80% 80% at 40.82% 50%, white 25%, rgba(255, 255, 255, 0) 100%)\",\n          },\n          // buttonPrimary: (\n          //   <Widget\n          //     src={`${ownerId}/widget/Components.Button`}\n          //     props={{\n          //       type: \"primary\",\n          //       text: \"Explore projects\",\n          //       disabled: false,\n          //       style: { padding: \"16px 24px\" },\n          //     }}\n          //   />\n          // ),\n          buttonSecondary: (\n            <Widget\n              src={`${ownerId}/widget/Components.Button`}\n              props={{\n                type: \"secondary\",\n                text: \"Create project\",\n                disabled: false,\n                href: `?tab=createproject`,\n                style: { padding: \"16px 24px\" },\n              }}\n            />\n          ),\n          // TODO: refactor this\n          children: totalDonations && (\n            <InfoCardsContainer>\n              <Widget\n                src={`${ownerId}/widget/Components.InfoCard`}\n                props={{\n                  infoTextPrimary: props.nearToUsd\n                    ? `$${(totalDonations * props.nearToUsd).toFixed(2)}`\n                    : `${totalDonations} N`,\n                  infoTextSecondary: \"Total Contributed\",\n                }}\n              />\n              <Widget\n                src={`${ownerId}/widget/Components.InfoCard`}\n                props={{\n                  infoTextPrimary: totalDonors,\n                  infoTextSecondary: \"Unique Donors\",\n                }}\n              />\n              <Widget\n                src={`${ownerId}/widget/Components.InfoCard`}\n                props={{\n                  infoTextPrimary: props.donations ? props.donations.length : \"-\",\n                  infoTextSecondary: \"Donations\",\n                }}\n              />\n            </InfoCardsContainer>\n          ),\n        }}\n      />\n    </HeroContainer>\n    <ProjectsContainer>\n      <Widget\n        src={`${ownerId}/widget/Components.ListSection`}\n        props={{\n          items: projects,\n          ...props,\n        }}\n      />\n    </ProjectsContainer>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.ListPage", "fact_widget_deployments_id": "4615129f748e398c7b3ad6212f09f352", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 42}