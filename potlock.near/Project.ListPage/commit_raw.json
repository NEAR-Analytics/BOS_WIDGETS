{"tx_hash": "9kn5L1AUEGvKGCnZ3J2zywpy3rx5PufzVkqmii2LV5hn", "action_id_social": "GhSU4UkL6nhbRovntCnJBh9f1SpdTbqGYgXWgQuKF9wS-0-widget", "block_id": 113531640, "block_timestamp": "2024-02-25T04:41:33.269Z", "signer_id": "potlock.near", "widget_name": "Project.ListPage", "source_code": "const { userIsRegistryAdmin, tab } = props;\nconst { DONATION_CONTRACT_ID, ownerId } = VM.require(\"potlock.near/widget/constants\") || {\n  DONATION_CONTRACT_ID: \"\",\n  ownerId: \"\",\n};\nconst { yoctosToUsd } = VM.require(\"potlock.near/widget/utils\") || { yoctosToUsd: () => \"\" };\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst HERO_BACKGROUND_IMAGE_URL =\n  IPFS_BASE_URL + \"bafkreiewg5afxbkvo6jbn6jgv7zm4mtoys22jut65fldqtt7wagar4wbga\";\n\nconst loraCss = fetch(\"https://fonts.googleapis.com/css2?family=Lora&display=swap\").body;\n\nconst headerTitleFontSizePx = 88;\n\nconst HeaderContainer = styled.div`\n  width: 100%;\n  // background: #fffaf4;\n  // background: white;\n  padding: 80px 64px;\n\n  @media (max-width: 768px) {\n    padding: 36px 24px;\n  }\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst HeaderTitle = styled.div`\n  color: #2e2e2e;\n  font-size: ${headerTitleFontSizePx}px;\n  font-weight: 500;\n  word-wrap: break-word;\n  position: relative;\n  text-align: center;\n  z-index: 1;\n  position: relative;\n  font-family: \"Lora\";\n  ${loraCss}\n\n  @media (max-width: 768px) {\n    font-size: 48px;\n  }\n`;\n\nconst HeaderDescription = styled.div`\n  color: #2e2e2e;\n  font-size: 32px;\n  font-weight: 400;\n  word-wrap: break-word;\n  max-width: 866px;\n  text-align: center;\n  margin-top: 32px;\n\n  @media (max-width: 768px) {\n    font-size: 24px;\n    text-align: center;\n  }\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 32px;\n  margin-top: 32px;\n`;\n\nconst Underline = styled.div`\n  position: absolute;\n  top: ${headerTitleFontSizePx - 40}px;\n  left: -40px;\n  z-index: -1;\n\n  @media (max-width: 768px) {\n    top: 30px;\n    left: -30px;\n`;\nconst containerStyle = props.containerStyle ?? {};\n\nconst showStats = !props.tab || props.tab == \"projects\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n`;\n\nconst HeroOuter = styled.div`\n  padding: 136px 64px;\n`;\n\nconst HeroInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: center;\n  margin-bottom: 24px;\n  padding: 24px 64px 24px 64px;\n\n  @media screen and (max-width: 768px) {\n    padding: 16px 24px;\n  }\n`;\n\nconst SectionTitle = styled.div`\n  font-size: 24px;\n  font-weight: 600;\n  color: #2e2e2e;\n  font-family: Mona-Sans;\n`;\n\nconst ProjectsCount = styled.div`\n  color: #7b7b7b;\n  font-size: 24px;\n  font-weight: 400;\n  margin-left: 32px;\n\n  @media screen and (max-width: 768px) {\n    margin-left: 16px;\n  }\n`;\n\nconst ProjectsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  // padding: 0px 64px 96px 64px;\n  // background: #fafafa;\n\n  // @media screen and (max-width: 768px) {\n  //   margin-top: 200px;\n  // }\n`;\n\nconst HeroContainer = styled.div`\n  width: 100%;\n  min-height: 700px;\n  position: relative;\n\n  @media screen and (max-width: 768px) {\n    min-height: 600px;\n  }\n`;\n\nconst Hero = styled.img`\n  width: 100%;\n  height: 100%;\n  display: block;\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n`;\n\nconst InfoCardsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  margin: 40px 0;\n  gap: 40px;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    gap: 24px;\n    // justify-content: center;\n  }\n`;\n\nconst Button = styled.button`\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 24px;\n  background: #dd3345;\n  overflow: hidden;\n  box-shadow: 0px -2.700000047683716px 0px #4a4a4a inset;\n  border-radius: 6px;\n  border: 1px solid #4a4a4a;\n  gap: 8px;\n  display: inline-flex;\n  text-align: center;\n  color: white;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst ButtonRegisterProject = styled.a`\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 24px;\n  background: #fef6ee;\n  overflow: hidden;\n  box-shadow: 0px -2.700000047683716px 0px #4a4a4a inset;\n  border-radius: 6px;\n  border: 1px solid #4a4a4a;\n  gap: 8px;\n  display: inline-flex;\n  text-align: center;\n  color: #2e2e2e;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 600;\n\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst Stats = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 48px;\n  margin-top: 40px;\n\n  @media screen and (max-width: 768px) {\n    gap: 16px;\n  }\n`;\n\nconst StatsTitle = styled.div`\n  color: #292929;\n  font-size: 44px;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  gap: 8px;\n  font-weight: 600;\n\n  @media screen and (max-width: 768px) {\n    font-size: 30px;\n    font-weight: 500;\n    gap: 5px;\n  }\n`;\n\nconst StatsSubTitle = styled.div`\n  color: #525252;\n  font-size: 14px;\n\n  @media screen and (max-width: 768px) {\n    font-size: 12px;\n  }\n`;\n\nState.init({\n  isModalOpen: false,\n  successfulDonation: null,\n});\n\nconst [totalDonation, setTotalDonation] = useState(0);\nconst [totalDonated, setTotalDonated] = useState(0);\n\nNear.asyncView(DONATION_CONTRACT_ID, \"get_config\", {}).then((result) => {\n  const lastDonationAmount = yoctosToUsd(result.net_donations_amount);\n  setTotalDonated(lastDonationAmount);\n  setTotalDonation(result.total_donations_count);\n});\n\nconst donateRandomly = () => {\n  State.update({\n    isModalOpen: true,\n    successfulDonation: null,\n  });\n};\n\nconst PotlockRegistrySDK = VM.require(\"potlock.near/widget/SDK.registry\") || (() => ({}));\nconst registry = PotlockRegistrySDK({ env: props.env }) || {\n  getProjects: () => [],\n  isRegistryAdmin: () => false,\n};\n\nconst projects = registry.getProjects() || [];\n\nif (!registry.isRegistryAdmin(context.accountId)) {\n  projects = projects.filter((project) => project.status === \"Approved\");\n}\n\nconst handleDonateRandomly = (e) => {\n  e.preventDefault();\n  props.openDonateToProjectModal();\n};\n\nconst containerStyleHeader = {\n  position: \"absolute\",\n  height: \"100%\",\n  top: 0,\n  left: 0,\n  marginBottom: \"24px\",\n  background: \"radial-gradient(80% 80% at 40.82% 50%, white 25%, rgba(255, 255, 255, 0) 100%)\",\n};\n\nreturn (\n  <>\n    <HeroContainer>\n      <Hero src={HERO_BACKGROUND_IMAGE_URL} alt=\"hero\" />\n      <HeaderContainer style={containerStyleHeader}>\n        <HeaderContent>\n          <HeaderTitle>\n            Transforming\n            <Underline>\n              <svg\n                width=\"340\"\n                height=\"42\"\n                viewBox=\"0 0 340 42\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M7.29967 39C-14.0566 35.9491 49.9788 32.436 71.4774 30.6444C151.734 23.9564 232.915 20.5161 312.9 15\"\n                  stroke=\"#DD3345\"\n                  stroke-width=\"5\"\n                  stroke-linecap=\"round\"\n                />\n                <path\n                  d=\"M31.2997 27C9.94337 23.9491 73.9788 20.436 95.4774 18.6444C175.734 11.9564 256.915 8.51608 336.9 3\"\n                  stroke=\"#DD3345\"\n                  stroke-width=\"5\"\n                  stroke-linecap=\"round\"\n                />\n              </svg>\n            </Underline>\n          </HeaderTitle>\n          <HeaderTitle>Funding for Public Goods</HeaderTitle>\n          <HeaderDescription>\n            Discover impact projects, donate directly, & participate in funding rounds.\n          </HeaderDescription>\n        </HeaderContent>\n\n        <ButtonsContainer>\n          {/* <Widget\n            src={`${ownerId}/widget/Project.ButtonDonateRandomly`}\n            props={{\n              ...props,\n            }}\n          /> */}\n          <Button onClick={donateRandomly}>Donate Randomly</Button>\n          {state.isModalOpen && (\n            <Widget\n              src={`${ownerId}/widget/Project.ModalDonation`}\n              props={{\n                ...props,\n                isModalOpen: state.isModalOpen,\n                onClose: () =>\n                  State.update({\n                    isModalOpen: false,\n                  }),\n                openDonationModalSuccess: (donation) => {\n                  State.update({\n                    isModalOpen: false,\n                    successfulDonation: donation,\n                  });\n                },\n              }}\n            />\n          )}\n          {state.successfulDonation && (\n            <Widget\n              src={`${ownerId}/widget/Project.ModalSuccess`}\n              props={{\n                ...props,\n                successfulDonation: state.successfulDonation,\n                isModalOpen: state.successfulDonation != null,\n                onClose: () =>\n                  State.update({\n                    successfulDonation: null,\n                  }),\n              }}\n            />\n          )}\n          {/* <Widget\n            src={`${ownerId}/widget/Components.Button`}\n            props={{\n              type: \"secondary\",\n              text: \"Register Your Project\",\n              disabled: false,\n              href: props.hrefWithParams(`?tab=createproject`),\n              style: { padding: \"16px 24px\" },\n            }}\n          /> */}\n          <ButtonRegisterProject href={\"?tab=createproject\"}>\n            Register Your Project\n          </ButtonRegisterProject>\n        </ButtonsContainer>\n        <Widget src=\"potlock.near/widget/Project.DonationStats\" />\n      </HeaderContainer>\n    </HeroContainer>\n    <ProjectsContainer>\n      <Widget\n        src={`${ownerId}/widget/Project.ListSection`}\n        props={{\n          ...props,\n          items: projects,\n          renderItem: (project) => {\n            return (\n              <Widget\n                src={`${ownerId}/widget/Project.Card`}\n                loading={\n                  <div\n                    style={{\n                      width: \"355px\",\n                      height: \"455px\",\n                      borderRadius: \"12px\",\n                      background: \"white\",\n                      boxShadow: \"0px -2px 0px #dbdbdb inset\",\n                      border: \"1px solid #dbdbdb\",\n                    }}\n                  />\n                }\n                props={{\n                  ...props,\n                  // potId,\n                  projectId: project.id,\n                  allowDonate: true,\n                  // allowDonate:\n                  //   sybilRequirementMet &&\n                  //   publicRoundOpen &&\n                  //   project.project_id !== context.accountId,\n                  // requireVerification: !sybilRequirementMet,\n                }}\n              />\n            );\n          },\n        }}\n      />\n    </ProjectsContainer>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.ListPage", "fact_widget_deployments_id": "ae67e2cdfb6a0524faaa693ac20fc508", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 22}