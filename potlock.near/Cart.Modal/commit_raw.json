{"tx_hash": "CnxjnvGQ5bFLgtv9GjQ38HnUUDsiYxT9gMSE5FbCkVcQ", "action_id_social": "HGfKcnPykmhDij5jBBnmwxFEAmZqaxpWfMxCh9XCsUYE-0-widget", "block_id": 116843197, "block_timestamp": "2024-04-14T18:11:44.276Z", "signer_id": "potlock.near", "widget_name": "Cart.Modal", "source_code": "const { getCartItemCount, getCart, removeItemsFromCart } = VM.require(\n  \"potlock.near/widget/SDK.cart\"\n) ?? {\n  getCartItemCount: () => 0,\n  getCart: () => {},\n  removeItemsFromCart: () => {},\n};\n\nconst { href } = VM.require(\"devs.near/widget/lib.url\") || {\n  href: () => {},\n};\n\nconst navHeightPx = 110;\nconst navHeightPxMobile = 96;\n\nconst cart = getCart();\nconst numCartItems = getCartItemCount();\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.3);\n  backdrop-filter: blur(4px);\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-end;\n  padding-top: ${navHeightPx * 0.8 + 50}px;\n  padding-right: 32px;\n  z-index: 1000;\n\n  @media screen and (max-width: 768px) {\n    padding-right: 8px;\n  }\n`;\n\nconst ModalContainer = styled.div`\n  width: 383px;\n  border-radius: 12px;\n  box-shadow: 0px 0px 0px 1px rgba(41, 41, 41, 0.1), 0px 8px 12px -4px rgba(41, 41, 41, 0.1),\n    0px 20px 32px -10px rgba(41, 41, 41, 0.1), 0px 32px 44px -16px rgba(41, 41, 41, 0.1);\n  padding: 24px 0px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  position: relative;\n  max-height: 80vh;\n  max-width: 90vw;\n  overflow-y: scroll;\n`;\n\nconst ModalHeader = styled.div`\n  width: 100%;\n  // height: 100%;\n  padding: 24px 24px 8px 24px;\n  justify-content: space-between;\n  align-items: flex-start;\n  display: inline-flex;\n  // background: pink;\n  border-bottom: 1px #dbdbdb solid;\n  position: relative;\n`;\n\nconst ModalHeaderText = styled.div`\n  text-align: center;\n  color: #2e2e2e;\n  font-size: 14px;\n  font-family: \"Mona Sans\", sans-serif;\n  font-weight: 600;\n  line-height: 16px;\n  word-wrap: break-word;\n`;\n\nconst NoProjectsText = styled.div`\n  text-align: center;\n  color: #2e2e2e;\n  font-size: 16px;\n  font-weight: 500;\n  margin-top: 24px;\n  width: 100%;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 24px 24px 0 24px;\n`;\n\nconst Ear = styled.div`\n  width: 16px;\n  height: 16px;\n  transform: rotate(45deg);\n  transform-origin: 0 0;\n  background: white;\n  position: absolute;\n  top: -11px;\n  right: 32px;\n  z-index: 1000;\n`;\n\nconst CartModal = ({ Trigger }) => {\n  Trigger = Trigger ?? (() => <></>);\n\n  return (\n    <Widget\n      src={\"devs.near/widget/Modal\"}\n      props={{\n        Trigger: Trigger,\n        ModalOverlay: ModalOverlay,\n        ModalContainer: ModalContainer,\n        Content: () => (\n          <>\n            <ModalHeader>\n              <ModalHeaderText>Donation cart</ModalHeaderText>\n              <ModalHeaderText>\n                {numCartItems}{\" \"}\n                <span style={{ fontWeight: 400, color: \"#7B7B7B\" }}>\n                  {numCartItems === 1 ? \"project\" : \"projects\"}\n                </span>\n              </ModalHeaderText>\n            </ModalHeader>\n            {numCartItems === 0 ? (\n              <NoProjectsText>Your cart is empty! \ud83d\udcb8</NoProjectsText>\n            ) : (\n              (Object.keys(cart) ?? []).map((projectId) => {\n                return (\n                  <Widget\n                    src={\"potlock.near/widget/Cart.CartModalItem\"}\n                    props={{\n                      ...props,\n                      projectId,\n                      removeProjectsFromCart: (projectIds) => {\n                        removeItemsFromCart({ id: projectIds });\n                        if (numCartItems === 1) {\n                          setIsModalOpen(false);\n                        }\n                      },\n                    }}\n                  />\n                );\n              })\n            )}\n            <ButtonContainer>\n              <Widget\n                src={\"potlock.near/widget/Components.Button\"}\n                props={{\n                  type: \"primary\",\n                  text: \"Proceed to donate\",\n                  disabled: numCartItems === 0,\n                  href: href({\n                    widgetSrc: \"potlock.near/widget/Index\",\n                    params: { tab: \"cart\", referrerId: props.referrerId },\n                  }),\n                  style: {\n                    width: \"100%\",\n                    marginBottom: \"16px\",\n                  },\n                }}\n              />\n              <Widget\n                src={\"potlock.near/widget/Components.Button\"}\n                props={{\n                  type: numCartItems === 0 ? \"primary\" : \"secondary\",\n                  text: \"Continue shopping\",\n                  onClick: () => setIsModalOpen(false),\n                  style: {\n                    width: \"100%\",\n                  },\n                }}\n              />\n            </ButtonContainer>\n            <Ear />\n          </>\n        ),\n      }}\n    />\n  );\n};\n\nreturn { CartModal };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Cart.Modal", "fact_widget_deployments_id": "8f45a6a696009c313a125daef37ac02e", "inserted_timestamp": "2024-04-14T21:59:53.056Z", "modified_timestamp": "2024-04-14T21:59:53.056Z", "__row_index": 0}