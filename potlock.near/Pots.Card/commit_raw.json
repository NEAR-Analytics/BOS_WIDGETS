{"tx_hash": "5wggebv9HnnHcbkWGxu3as6nDVaikbGusSWw8ea21amn", "action_id_social": "9cgkB7ZRjaKUJune8RPiHwaRBfjcvwiY7qb3uhznJo8b-0-widget", "block_id": 113311091, "block_timestamp": "2024-02-21T21:06:34.406Z", "signer_id": "potlock.near", "widget_name": "Pots.Card", "source_code": "const { ownerId, potId, yoctosToNear, yoctosToUsd } = props;\n\nconst MAX_DESCRIPTION_LENGTH = 100;\nconst MAX_TITLE_LENGTH = 36;\n\nconst Card = styled.a`\n  display: flex;\n  flex-direction: column;\n  // width: 100%;\n  // max-width: 45%;\n  min-width: 320px;\n  min-height: 300px;\n  // border-radius: 12px;\n  background: white;\n  box-shadow: 0px -2px 0px #464646 inset;\n  border: 1px solid #292929;\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst CardSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 16px;\n  padding: 32px;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Title = styled.div`\n  color: #292929;\n  font-size: 22px;\n  font-weight: 600;\n  line-height: 28px;\n  word-wrap: break-word;\n`;\n\nconst Description = styled.div`\n  color: #525252;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 28px;\n  word-wrap: break-word;\n`;\n\nconst Subtitle = styled.span`\n  color: #7b7b7b;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  word-wrap: break-word;\n`;\n\nconst potConfig = Near.view(potId, \"get_config\", {});\n\nif (!potConfig)\n  return (\n    <Card style={{ justifyContent: \"center\", alignItems: \"center\" }}>\n      {potConfig == null ? (\n        <div class=\"spinner-border text-secondary\" role=\"status\" />\n      ) : (\n        <div>Pot {potId} not found.</div>\n      )}\n    </Card>\n  );\n\nconst {\n  pot_name,\n  pot_description,\n  base_currency,\n  public_donations_count,\n  matching_pool_balance,\n  application_start_ms,\n  application_end_ms,\n  public_round_start_ms,\n  public_round_end_ms,\n} = potConfig;\n// console.log(\"potConfig\", potConfig);\n\n// const totalAmount =\n//   props.SUPPORTED_FTS[base_currency.toUpperCase()].fromIndivisible(total_public_donations);\n\nconst description = !pot_description\n  ? \"No description\"\n  : pot_description.length > MAX_DESCRIPTION_LENGTH\n  ? `${pot_description.slice(0, MAX_DESCRIPTION_LENGTH)}...`\n  : pot_description;\n\nconst title = !pot_name\n  ? \"No title\"\n  : pot_name.length > MAX_TITLE_LENGTH\n  ? `${pot_name.slice(0, MAX_TITLE_LENGTH)}...`\n  : pot_name;\n\nconst now = Date.now();\nconst applicationNotStarted = now < application_start_ms;\nconst applicationOpen = now >= application_start_ms && now < application_end_ms;\nconst publicRoundNotStarted = now < public_round_start_ms;\nconst publicRoundOpen = now >= public_round_start_ms && now < public_round_end_ms;\n// const publicRoundOpen = true;\nconst publicRoundClosed = now >= public_round_end_ms;\n\nconst amountNear = yoctosToNear(matching_pool_balance);\nconst amountUsd = yoctosToUsd(matching_pool_balance);\n\nreturn (\n  <Card href={props.hrefWithEnv(`?tab=pot&potId=${potId}`)}>\n    <CardSection>\n      <Title>{title}</Title>\n      <Description>{description}</Description>\n    </CardSection>\n    <CardSection style={{ background: \"#F6F5F3\", borderTop: \"1px #7B7B7B solid\" }}>\n      <Title>\n        {amountNear}\n        {amountUsd && (\n          <span style={{ fontSize: \"14px\", fontWeight: 400, lineHeight: \"24px\" }}>{amountUsd}</span>\n        )}\n        <span style={{ color: \"#7B7B7B\", marginLeft: \"8px\", fontSize: \"14px\" }}>Matching Pool</span>\n      </Title>\n      {/* Application tag */}\n      {applicationOpen && (\n        <Widget\n          src={`${ownerId}/widget/Pots.Tag`}\n          props={{\n            ...props,\n            backgroundColor: \"#EFFEFA\",\n            borderColor: \"#33DDCB\",\n            textColor: \"#023131\",\n            text: props.daysUntil(application_end_ms) + \" left to apply\",\n            textStyle: { fontWeight: 500, marginLeft: \"8px\" },\n            preElements: (\n              <Widget\n                src={`${ownerId}/widget/Components.Indicator`}\n                props={{\n                  colorOuter: \"#CAFDF3\",\n                  colorInner: \"#33DDCB\",\n                  animate: true,\n                }}\n              />\n            ),\n          }}\n        />\n      )}\n      {/* Matching round tag */}\n      {publicRoundOpen && (\n        <Widget\n          src={`${ownerId}/widget/Pots.Tag`}\n          props={{\n            ...props,\n            backgroundColor: publicRoundOpen ? \"#F7FDE8\" : \"#EBEBEB\",\n            borderColor: publicRoundOpen ? \"#9ADD33\" : \"#DBDBDB\",\n            textColor: publicRoundOpen ? \"#192C07\" : \"#192C07\",\n            text: publicRoundOpen\n              ? props.daysUntil(public_round_end_ms) + \" left to donate\"\n              : \"Round closed\",\n            textStyle: { fontWeight: 500, marginLeft: \"8px\" },\n            preElements: (\n              <Widget\n                src={`${ownerId}/widget/Components.Indicator`}\n                props={{\n                  colorOuter: publicRoundOpen ? \"#D7F5A1\" : \"#DBDBDB\",\n                  colorInner: publicRoundOpen ? \"#9ADD33\" : \"#A6A6A6\",\n                  animate: publicRoundOpen,\n                }}\n              />\n            ),\n          }}\n        />\n      )}\n    </CardSection>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.Card", "fact_widget_deployments_id": "9563a888c27af0dc4043a879e687f7c6", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 24}