{"tx_hash": "GiHbunhdy6BQ6SeWg9ckUKUQdK1RPR9aQ5Uqa9yscmrc", "action_id_social": "AVrf2FHuudY8SDk9nZ7xbSG4KkwnLAtLeHHhZUHokuuM-0-widget", "block_id": 114631123, "block_timestamp": "2024-03-13T13:35:20.136Z", "signer_id": "potlock.near", "widget_name": "Pots.Card", "source_code": "const { potId } = props;\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\") || {\n  ownerId: \"\",\n};\nconst { daysUntil, yoctosToNear, yoctosToUsd } = VM.require(\"potlock.near/widget/utils\") || {\n  daysUntil: () => \"\",\n  yoctosToNear: () => \"\",\n  yoctosToUsd: () => \"\",\n};\n\nconst PotSDK = VM.require(\"potlock.near/widget/SDK.pot\") || {\n  getConfig: () => {},\n};\nconst potConfig = PotSDK.getConfig(potId);\n\nconst MAX_DESCRIPTION_LENGTH = 100;\nconst MAX_TITLE_LENGTH = 36;\n\nconst Card = styled.a`\n  display: flex;\n  flex-direction: column;\n  min-width: 320px;\n  min-height: 300px;\n  border-radius: 8px;\n  background: white;\n  box-shadow: 0px -2px 0px 0px #464646 inset, 0px 0px 0px 1px #464646;\n  padding-bottom: 5px;\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nconst CardSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 16px;\n  padding: 32px;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Title = styled.div`\n  color: #292929;\n  font-size: 22px;\n  font-weight: 600;\n  line-height: 28px;\n  word-wrap: break-word;\n  > div {\n    font-weight: inherit;\n  }\n`;\n\nconst Description = styled.div`\n  color: #525252;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 28px;\n  word-wrap: break-word;\n  a {\n    color: rgb(123, 123, 123);\n  }\n`;\n\nconst Subtitle = styled.span`\n  color: #7b7b7b;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 20px;\n  word-wrap: break-word;\n`;\n\nif (!potConfig)\n  return (\n    <Card style={{ justifyContent: \"center\", alignItems: \"center\" }}>\n      {potConfig == null ? (\n        <div class=\"spinner-border text-secondary\" role=\"status\" />\n      ) : (\n        <div>Pot {potId} not found.</div>\n      )}\n    </Card>\n  );\n\nconst {\n  pot_name,\n  pot_description,\n  base_currency,\n  public_donations_count,\n  matching_pool_balance,\n  application_start_ms,\n  application_end_ms,\n  public_round_start_ms,\n  public_round_end_ms,\n} = potConfig;\n// console.log(\"potConfig\", potConfig);\n\n// const totalAmount =\n//   props.SUPPORTED_FTS[base_currency.toUpperCase()].fromIndivisible(total_public_donations);\n\nconst description = !pot_description\n  ? \"No description\"\n  : pot_description.length > MAX_DESCRIPTION_LENGTH\n  ? `${pot_description.slice(0, MAX_DESCRIPTION_LENGTH)}...`\n  : pot_description;\n\nconst title = !pot_name\n  ? \"No title\"\n  : pot_name.length > MAX_TITLE_LENGTH\n  ? `${pot_name.slice(0, MAX_TITLE_LENGTH)}...`\n  : pot_name;\n\nconst now = Date.now();\nconst applicationNotStarted = now < application_start_ms;\nconst applicationOpen = now >= application_start_ms && now < application_end_ms;\nconst publicRoundNotStarted = now < public_round_start_ms;\nconst publicRoundOpen = now >= public_round_start_ms && now < public_round_end_ms;\n// const publicRoundOpen = true;\nconst publicRoundClosed = now >= public_round_end_ms;\n\nconst amountNear = yoctosToNear(matching_pool_balance);\nconst amountUsd = yoctosToUsd(matching_pool_balance);\n\nreturn (\n  <Card href={props.hrefWithParams(`?tab=pot&potId=${potId}`)}>\n    <CardSection>\n      <Title>{title}</Title>\n      <Description>\n        <Markdown text={description} />\n      </Description>\n    </CardSection>\n    <CardSection style={{ background: \"#F6F5F3\", borderTop: \"1px #7B7B7B solid\" }}>\n      <Title>\n        <div>\n          {amountNear}{\" \"}\n          <span style={{ color: \"#7B7B7B\", marginLeft: \"8px\", fontSize: \"14px\" }}>in pot</span>\n        </div>\n        {amountUsd && (\n          <span style={{ fontSize: \"14px\", fontWeight: 400, lineHeight: \"24px\" }}>{amountUsd}</span>\n        )}\n      </Title>\n      {/* Application tag */}\n      {applicationOpen && (\n        <Widget\n          src={`${ownerId}/widget/Pots.Tag`}\n          props={{\n            ...props,\n            backgroundColor: \"#EFFEFA\",\n            borderColor: \"#33DDCB\",\n            textColor: \"#023131\",\n            text: daysUntil(application_end_ms) + \" left to apply\",\n            textStyle: { fontWeight: 500, marginLeft: \"8px\" },\n            preElements: (\n              <Widget\n                src={`${ownerId}/widget/Components.Indicator`}\n                props={{\n                  colorOuter: \"#CAFDF3\",\n                  colorInner: \"#33DDCB\",\n                  animate: true,\n                }}\n              />\n            ),\n          }}\n        />\n      )}\n      {/* Matching round tag */}\n      {publicRoundOpen && (\n        <Widget\n          src={`${ownerId}/widget/Pots.Tag`}\n          props={{\n            ...props,\n            backgroundColor: publicRoundOpen ? \"#F7FDE8\" : \"#EBEBEB\",\n            borderColor: publicRoundOpen ? \"#9ADD33\" : \"#DBDBDB\",\n            textColor: publicRoundOpen ? \"#192C07\" : \"#192C07\",\n            text: publicRoundOpen\n              ? daysUntil(public_round_end_ms) + \" left to donate\"\n              : \"Round closed\",\n            textStyle: { fontWeight: 500, marginLeft: \"8px\" },\n            preElements: (\n              <Widget\n                src={`${ownerId}/widget/Components.Indicator`}\n                props={{\n                  colorOuter: publicRoundOpen ? \"#D7F5A1\" : \"#DBDBDB\",\n                  colorInner: publicRoundOpen ? \"#9ADD33\" : \"#A6A6A6\",\n                  animate: publicRoundOpen,\n                }}\n              />\n            ),\n          }}\n        />\n      )}\n    </CardSection>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.Card", "fact_widget_deployments_id": "57a3667915617ba0393b0c5b510eb836", "inserted_timestamp": "2024-03-13T15:28:03.303Z", "modified_timestamp": "2024-03-13T15:28:03.303Z", "__row_index": 23}