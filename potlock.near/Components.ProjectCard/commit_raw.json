{"tx_hash": "BqeM3Ywrc6fsJGRBfTmgj9VLZufr74kUFAWeWG4uzbeu", "action_id_social": "CbcXWw3Bg8VRMuq2gTqPrRBAjKnvCgLnqJrKCkR4mXx5-0-widget", "block_id": 115722656, "block_timestamp": "2024-03-29T14:20:36.213Z", "signer_id": "potlock.near", "widget_name": "Components.ProjectCard", "source_code": "const { id, review_notes, status, totalAmount } = props;\nconst { getTagsFromSocialProfileData } = VM.require(\"potlock.near/widget/utils\") || {\n  getTagsFromSocialProfileData: () => [],\n};\nconst IPFS_BASE_URL = \"https://ipfs.near.social/ipfs/\";\nconst cardData = Social.getr(`${id}/profile`);\n\nlet DonateSDK =\n  VM.require(\"potlock.near/widget/SDK.donate\") ||\n  (() => ({\n    getDonationsForRecipient: () => {},\n  }));\nDonateSDK = DonateSDK({ env: props.env });\n\nconst donationsForProject = DonateSDK.getDonationsForRecipient(id);\n\nconst Card = styled.a`\n  display: flex;\n  flex-direction: column;\n  width: 408px;\n  border-radius: 2px;\n  background: white;\n  box-shadow: 0px -2px 0px #dbdbdb inset;\n  border: 1px solid #292929;\n  &:hover {\n    text-decoration: none;\n    cursor: pointer;\n  }\n  @media screen and (max-width: 768px) {\n    width: 340px;\n  }\n  min-height: 429px;\n  margin-left: auto;\n  margin-right: auto;\n  height: max-content;\n  overflow: hidden;\n`;\n\nconst CardBody = styled.div`\n  position: relative;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  flex-grow: 1;\n`;\n\nconst CardImage = styled.img`\n  height: 150px;\n  min-height: 150px;\n  width: 100%;\n  object-fit: cover;\n`;\n\nconst CardTitle = styled.div`\n  color: #292929;\n  font-size: 17px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 24px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst CardDescription = styled.div`\n  color: #292929;\n  font-size: 17px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 28px;\n  flex-grow: 1;\n`;\n\nconst CardTag = styled.div`\n  color: #292929;\n  width: max-content;\n  white-space: nowrap;\n  padding: 8px;\n  border-radius: 4px;\n  box-shadow: 0px -1px 0px 0px #c7c7c7 inset, 0px 0px 0px 0.5px #c7c7c7;\n  border: 1px solid #c7c7c7;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n`;\n\nconst CardTagContainer = styled.div`\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n`;\n\nconst CardAvatar = styled.img`\n  position: absolute;\n  top: -20px;\n  left: 24px;\n  border-radius: 100%;\n  width: 40px;\n  height: 40px;\n  border: 3px solid #fff;\n`;\n\nconst CardFooter = styled.div`\n  border-top: 1px solid #000;\n  padding: 16px 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst TotalDonate = styled.div`\n  color: #292929;\n  font-size: 17px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 24px;\n`;\n\nconst DonationButton = styled.button`\n  padding: 12px 16px;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px;\n  background: #fef6ee;\n  border-radius: 6px;\n  border: none;\n  box-shadow: 0px -2px 0px 0px #464646 inset, 0px 0px 0px 1px #464646;\n  &:hover {\n    background: #dd3345;\n    color: #fff;\n  }\n`;\n\nconst AddToCartButton = styled.button`\n  border: none;\n  background: none;\n  color: #dd3345;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n  padding: 12px 16px;\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 10px;\n  align-items: center;\n`;\n\nconst getCategory = (category) => {\n  switch (category) {\n    case \"social-impact\":\n      return \"Social Impact\";\n    case \"non-profit\":\n      return \"Non Profit\";\n    case \"climate\":\n      return \"Climate\";\n    case \"public-good\":\n      return \"Public Good\";\n    case \"de-sci\":\n      return \"Desci\";\n    case \"open-source\":\n      return \"Open Source\";\n    case \"community\":\n      return \"Community\";\n    case \"education\":\n      return \"Education\";\n  }\n};\n\nconst projectUrl = props.hrefWithParams(`?tab=project&projectId=${id}`);\n\nconst tags = getTagsFromSocialProfileData(cardData);\n\nreturn (\n  <>\n    <Card href={projectUrl}>\n      <CardImage\n        src={\n          cardData && cardData?.backgroundImage && cardData?.backgroundImage?.ipfs_cid\n            ? `${IPFS_BASE_URL}${cardData.backgroundImage.ipfs_cid}`\n            : \"https://ipfs.near.social/ipfs/bafkreih4i6kftb34wpdzcuvgafozxz6tk6u4f5kcr2gwvtvxikvwriteci\"\n        }\n        alt=\"background\"\n      />\n      <CardBody>\n        <CardAvatar\n          src={\n            cardData && cardData?.image && cardData?.image?.ipfs_cid\n              ? `${IPFS_BASE_URL}${cardData.image.ipfs_cid}`\n              : \"https://ipfs.near.social/ipfs/bafkreih4i6kftb34wpdzcuvgafozxz6tk6u4f5kcr2gwvtvxikvwriteci\"\n          }\n          alt=\"avatar\"\n        />\n        <CardTitle>{cardData?.name}</CardTitle>\n        <CardDescription>\n          {cardData && cardData?.description.length > 60\n            ? cardData.description.slice(0, 70) + \"...\"\n            : cardData.description}\n        </CardDescription>\n        <CardTagContainer>\n          {tags.map((tag) => (\n            <CardTag key={tag}>{tag}</CardTag>\n          ))}\n        </CardTagContainer>\n      </CardBody>\n      <CardFooter>\n        <TotalDonate>\n          ${totalAmount(donationsForProject)} <span style={{ fontWeight: 400 }}>Raised</span>\n        </TotalDonate>\n        <ButtonGroup>\n          <AddToCartButton\n            onClick={(e) => {\n              e.preventDefault();\n              if (existsInCart) {\n                props.removeProjectsFromCart([props.id]);\n              } else {\n                props.addProjectsToCart([\n                  {\n                    id: props.id,\n                    amount: \"1\",\n                    ft: \"NEAR\",\n                    referrerId: props.referrerId,\n                  },\n                ]);\n                if (props.showModal) {\n                  props.setIsCartModalOpen(true);\n                }\n              }\n            }}\n          >\n            Add to cart\n          </AddToCartButton>\n          <DonationButton\n            onClick={(e) => {\n              e.preventDefault();\n              props.openDonateToProjectModal(props.id);\n            }}\n          >\n            Donate\n          </DonationButton>\n        </ButtonGroup>\n      </CardFooter>\n    </Card>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Components.ProjectCard", "fact_widget_deployments_id": "c578c2575815a57c944590fab1f9564b", "inserted_timestamp": "2024-03-29T15:31:57.070Z", "modified_timestamp": "2024-03-29T15:31:57.070Z", "__row_index": 0}