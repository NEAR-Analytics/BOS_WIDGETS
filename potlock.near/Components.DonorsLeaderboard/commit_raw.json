{"tx_hash": "2Pef6gXRz9U1kysCUfHosVY1vmQRJh6ujKWWMP2MWuJ9", "action_id_social": "3R2QriWE7NzJcBFALmxYn4b6niPHGHgPCe2qW44dBj2A-0-widget", "block_id": 112687547, "block_timestamp": "2024-02-12T15:43:29.046Z", "signer_id": "potlock.near", "widget_name": "Components.DonorsLeaderboard", "source_code": "const { ownerId, donations } = props;\nconst nearToUsd = props.nearToUsd || 1;\n\nconst [page, setPage] = useState(0);\nconst perPage = 30; // need to be less than 50\n\nconst nearLogo =\n  \"https://ipfs.near.social/ipfs/bafkreib2cfbayerbbnoya6z4qcywnizqrbkzt5lbqe32whm2lubw3sywr4\";\n\nconst { getTimePassed, _address, calcDonations, reverseArr } = VM.require(\n  `${ownerId}/widget/Components.DonorsUtils`\n);\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  .transcation {\n    display: grid;\n    width: 100%;\n    overflow-x: scroll;\n    .header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 1rem 0;\n      gap: 1rem;\n      background: var(--primary-color);\n      color: white;\n      div {\n        width: 150px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n    }\n  }\n`;\n\nconst TrRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  gap: 1rem;\n  padding: 1rem 0;\n  border-bottom: 1px solid #0000003e;\n  &:last-of-type {\n    border-bottom-color: transparent;\n  }\n  > div,\n  > span {\n    width: 150px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: 600;\n  }\n\n  .price {\n    display: flex;\n    gap: 4px;\n    align-items: center;\n    font-weight: 600;\n    img {\n      width: 14px;\n    }\n  }\n  .address {\n    width: 200px;\n    color: var(--primary-color);\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    padding: 10px;\n    border-radius: 2px;\n    transition: all 200ms;\n    > div {\n      margin-right: 1rem;\n      margin-left: 0;\n    }\n    :hover {\n      background: var(--primary-color);\n      color: white;\n    }\n  }\n`;\n\nconst totalDonations = 0;\ndonations.forEach((donation) => {\n  totalDonations += donation.amount;\n});\n\nreturn (\n  <Container>\n    <div className=\"transcation\">\n      <div className=\"header\">\n        <div>Rank</div>\n        <div style={{ width: \"200px\" }}>Address</div>\n        <div>Amount</div>\n        <div>Amount (USD)</div>\n        <div>Percentage Share</div>\n      </div>\n      {donations.slice(page * perPage, (page + 1) * perPage).map((donation, idx) => {\n        const { donor_id, amount } = donation;\n\n        return (\n          <TrRow>\n            <div>#{idx + 1 + page * perPage}</div>\n\n            <a\n              href={\"https://near.org/near/widget/ProfilePage?accountId=\" + donor_id}\n              className=\"address\"\n              target=\"_blank\"\n            >\n              <Widget\n                src=\"mob.near/widget/ProfileImage\"\n                props={{ accountId: donor_id, style: { width: \"2rem\", height: \"2rem\" } }}\n              />\n              {_address(donor_id)}{\" \"}\n            </a>\n\n            <div className=\"price\">\n              {amount.toFixed(2)}\n\n              <img src={nearLogo} alt=\"NEAR\" />\n            </div>\n            <div>${(amount * nearToUsd).toFixed(2)}</div>\n            <div>{((amount * 100) / totalDonations).toFixed(2)}%</div>\n          </TrRow>\n        );\n      })}\n    </div>\n    <Widget\n      src=\"baam25.near/widget/pagination\"\n      props={{\n        onClick: (page) => {\n          setPage(page);\n        },\n        data: donations,\n        page: page,\n        perPage: perPage,\n        bgColor: \"var(--primary-color)\",\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Components.DonorsLeaderboard", "fact_widget_deployments_id": "4cf3f427f04245793e666947f4c00099", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 16}