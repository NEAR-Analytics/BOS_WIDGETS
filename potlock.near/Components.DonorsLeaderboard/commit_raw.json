{"tx_hash": "BqeM3Ywrc6fsJGRBfTmgj9VLZufr74kUFAWeWG4uzbeu", "action_id_social": "CbcXWw3Bg8VRMuq2gTqPrRBAjKnvCgLnqJrKCkR4mXx5-0-widget", "block_id": 115722656, "block_timestamp": "2024-03-29T14:20:36.213Z", "signer_id": "potlock.near", "widget_name": "Components.DonorsLeaderboard", "source_code": "const { sponsors, sortedDonations, filter, currentTab, tab } = props;\nconst donations = currentTab === \"sponsors\" ? sponsors : sortedDonations;\nconst isInPot = tab === \"pot\";\n\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\");\nconst { nearToUsd } = VM.require(\"potlock.near/widget/utils\") || {\n  nearToUsd: 1,\n};\n\nconst [currentPage, setCurrentPage] = useState(1);\nconst perPage = 30; // need to be less than 50\n\nuseEffect(() => {\n  setCurrentPage(1);\n}, [filter]);\n\nconst nearLogo =\n  \"https://ipfs.near.social/ipfs/bafkreicdcpxua47eddhzjplmrs23mdjt63czowfsa2jnw4krkt532pa2ha\";\n\nconst { getTimePassed, _address, calcNetDonationAmount, reverseArr } = VM.require(\n  `${ownerId}/widget/Components.DonorsUtils`\n);\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  .transcation {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    font-size: 14px;\n    .header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 10px;\n      gap: 1rem;\n      background: #f6f5f3;\n      color: #292929;\n      div {\n        width: 130px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-weight: 600;\n      }\n    }\n    .address {\n      width: 190px !important;\n      margin-right: auto;\n      justify-content: start !important;\n    }\n    .rank {\n      width: 80px !important;\n    }\n  }\n  @media only screen and (max-width: 768px) {\n    .transcation {\n      font-size: 12px;\n      .header {\n        padding: 10px 0;\n        div {\n          width: 80px;\n        }\n      }\n    }\n  }\n  @media only screen and (max-width: 480px) {\n    .transcation {\n      font-size: 9px;\n      .address {\n        width: 120px !important;\n      }\n    }\n  }\n`;\n\nconst TrRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  gap: 1rem;\n  padding: 20px 10px;\n  > div,\n  > span {\n    width: 130px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .price {\n    display: flex;\n    gap: 1rem;\n    align-items: center;\n    img {\n      width: 1.5rem;\n    }\n  }\n  .address {\n    color: #292929;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    border-radius: 2px;\n    transition: all 200ms;\n    .profile-image {\n      width: 2rem;\n      height: 2rem;\n      margin-right: 1rem;\n    }\n  }\n  @media only screen and (max-width: 768px) {\n    padding: 10px 0;\n    > div,\n    > span {\n      width: 80px;\n    }\n    .price {\n      gap: 8px;\n      img {\n        width: 1.25rem;\n      }\n    }\n    .address .profile-image {\n      width: 1.5rem;\n      height: 1.5rem;\n      margin-right: 0.5rem;\n    }\n  }\n  @media only screen and (max-width: 480px) {\n    .price img {\n      width: 1rem;\n    }\n  }\n`;\n\nconst NoResult = styled.div`\n  font-size: 2rem;\n  text-align: center;\n`;\n\nconst totalDonations = 0;\ndonations.forEach((donation) => {\n  totalDonations += donation.amount;\n});\n\nconst ProfileImg = ({ donor_id }) => (\n  <Widget src=\"mob.near/widget/ProfileImage\" props={{ accountId: donor_id, style: {} }} />\n);\n\nreturn donations.length ? (\n  <Container>\n    <div className=\"transcation\">\n      <div className=\"header\">\n        <div className=\"rank\">Rank</div>\n        <div className=\"address\">Donor</div>\n        <div>Amount</div>\n        {isInPot && <div>Percentage</div>}\n        {nearToUsd && !isInPot && <div>Amount (USD)</div>}\n      </div>\n      {donations.slice((currentPage - 1) * perPage, currentPage * perPage).map((donation, idx) => {\n        const { donor_id, amount, percentage_share } = donation;\n\n        return (\n          <TrRow>\n            <div className=\"rank\">#{idx + 1 + (currentPage - 1) * perPage}</div>\n\n            <a\n              href={props.hrefWithParams(`?tab=profile&accountId=${donor_id}`)}\n              className=\"address\"\n              target=\"_blank\"\n            >\n              <ProfileImg donor_id={donor_id} />\n\n              {_address(donor_id, 15)}\n            </a>\n\n            <div className=\"price\">\n              <img src={nearLogo} alt=\"NEAR\" />\n              {amount.toFixed(2).replace(/[.,]00$/, \"\")}\n            </div>\n            {isInPot && <div>{percentage_share}%</div>}\n            {nearToUsd && !isInPot && <div>~${(amount * nearToUsd).toFixed(2)}</div>}\n          </TrRow>\n        );\n      })}\n    </div>\n    <Widget\n      src={`${ownerId}/widget/Components.Pagination`}\n      props={{\n        onPageChange: (page) => {\n          setCurrentPage(page);\n        },\n        data: donations,\n        currentPage,\n        perPage: perPage,\n        bgColor: \"#292929\",\n      }}\n    />\n  </Container>\n) : (\n  <NoResult>No Donations</NoResult>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Components.DonorsLeaderboard", "fact_widget_deployments_id": "6b82aad91e126b6b6f3f1c0ee358a2e4", "inserted_timestamp": "2024-03-29T15:31:57.070Z", "modified_timestamp": "2024-03-29T15:31:57.070Z", "__row_index": 8}