{"tx_hash": "7sNt4JFDaCifXbbt4BDJsKGpaGWu1hJrbXG12YT841UT", "action_id_social": "HEkFeNcpnUHAdVgQuvZoebNSSuYpE7EgXiuypox8Dw9d-0-widget", "block_id": 114230426, "block_timestamp": "2024-03-06T23:00:42.421Z", "signer_id": "potlock.near", "widget_name": "Pots.Donations", "source_code": "// get donations\nconst { potId, potDetail } = props;\nconst { ownerId, SUPPORTED_FTS } = VM.require(\"potlock.near/widget/constants\") || {\n  ownerId: \"\",\n  SUPPORTED_FTS: {},\n};\nconst { getTimePassed, _address } = VM.require(`${ownerId}/widget/Components.DonorsUtils`) || {\n  getTimePassed: () => \"\",\n  _address: (address) => address,\n};\n\nconst PotSDK = VM.require(\"potlock.near/widget/SDK.pot\") || {\n  getPublicRoundDonations: () => {},\n};\nconst publicRoundDonations = PotSDK.getPublicRoundDonations(potId);\n\nState.init({\n  allDonations: null,\n  filteredDonations: [],\n});\n\nif (publicRoundDonations && !state.allDonations) {\n  State.update({ filteredDonations: publicRoundDonations, allDonations: publicRoundDonations });\n}\n\nif (!state.allDonations) return <div class=\"spinner-border text-secondary\" role=\"status\" />;\n\n// console.log(\"donations: \", donations);\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  .donations-table {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-top: 24px;\n    padding-bottom: 1rem;\n    border: 1px solid rgba(41, 41, 41, 0.5);\n    box-shadow: 0px 4px 12px -4px rgba(82, 82, 82, 0.2), 0px 2px 4px -2px rgba(82, 82, 82, 0.3);\n  }\n  @media screen and (min-width: 375px) and (max-width: 768px) {\n    width: 99%;\n  }\n  @media screen and (max-width: 390px) {\n    width: 98%;\n  }\n`;\n\nconst OuterTextContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  @media screen and (max-width: 768px) {\n    padding-right: 10px;\n  }\n`;\n\nconst OuterText = styled.div`\n  color: #7b7b7b;\n  font-size: 14px;\n  font-weight: 500;\n  text-transform: uppercase;\n  line-height: 24px;\n  letter-spacing: 1.12px;\n  word-wrap: break-word;\n`;\n\nconst DonationsCount = styled.div`\n  color: #dd3345;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 24px;\n`;\n\nconst TableContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 0.5px rgba(41, 41, 41, 0.5) solid;\n  box-shadow: 0px 4px 12px -4px rgba(82, 82, 82, 0.2);\n  border-radius: 2px;\n  width: 100%;\n  overflow-x: auto;\n  flex-wrap: nowrap;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  background: #f6f5f3;\n  width: 100%;\n`;\n\nconst HeaderItem = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: space-between;\n  justify-content: flex-start;\n  padding: 10px 20px;\n  width: ${100 / columns.length}%;\n`;\n\nconst HeaderItemText = styled.div`\n  color: #292929;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 24px;\n  word-wrap: break-word;\n`;\n\nconst SearchBarContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n  border-bottom: 1px #dbdbdb solid;\n  padding: 12px 24px;\n`;\n\nconst SearchBar = styled.input`\n  background: none;\n  width: 100%;\n  outline: none;\n  border: none;\n  color: #525252;\n  &:focus {\n    outline: none;\n    border: none;\n  }\n  @media only screen and (max-width: 480px) {\n    font-size: 12px;\n  }\n`;\n\nconst SearchIcon = styled.div`\n  display: flex;\n  width: 24px;\n  height: 24px;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst { base_currency } = potDetail;\n\nconst searchDonations = (searchTerm) => {\n  // filter donations that match the search term (donor_id, project_id)\n  const filteredDonations = state.allDonations.filter((donation) => {\n    const { donor_id, project_id } = donation;\n    const searchFields = [donor_id, project_id];\n    return searchFields.some((field) => field.toLowerCase().includes(searchTerm.toLowerCase()));\n  });\n  return filteredDonations;\n};\n\nconst ProfileImg = (address) => (\n  <Widget\n    src={`${ownerId}/widget/Project.ProfileImage`}\n    props={{\n      ...props,\n      accountId: address,\n      style: {},\n    }}\n  />\n);\n\nreturn (\n  <Container>\n    <Widget\n      src={`${ownerId}/widget/Pots.NavOptionsMobile`}\n      props={{\n        ...props,\n      }}\n    />\n    <OuterTextContainer>\n      <OuterText>all donations</OuterText>\n      <DonationsCount>{state.allDonations.length}</DonationsCount>\n    </OuterTextContainer>\n    <div className=\"donations-table\">\n      <SearchBarContainer>\n        <SearchIcon>\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M15.7549 14.2549H14.9649L14.6849 13.9849C15.6649 12.8449 16.2549 11.3649 16.2549 9.75488C16.2549 6.16488 13.3449 3.25488 9.75488 3.25488C6.16488 3.25488 3.25488 6.16488 3.25488 9.75488C3.25488 13.3449 6.16488 16.2549 9.75488 16.2549C11.3649 16.2549 12.8449 15.6649 13.9849 14.6849L14.2549 14.9649V15.7549L19.2549 20.7449L20.7449 19.2549L15.7549 14.2549ZM9.75488 14.2549C7.26488 14.2549 5.25488 12.2449 5.25488 9.75488C5.25488 7.26488 7.26488 5.25488 9.75488 5.25488C12.2449 5.25488 14.2549 7.26488 14.2549 9.75488C14.2549 12.2449 12.2449 14.2549 9.75488 14.2549Z\"\n              fill=\"#C7C7C7\"\n            />\n          </svg>\n        </SearchIcon>\n        <SearchBar\n          placeholder=\"Search donations\"\n          onChange={({ target: { value } }) => {\n            const filteredDonations = searchDonations(value);\n            State.update({ filteredDonations });\n          }}\n        />\n      </SearchBarContainer>\n      <Widget\n        src={`${ownerId}/widget/Components.DonorsTrx`}\n        props={{\n          ...props,\n          allDonations: state.filteredDonations,\n        }}\n      />\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.Donations", "fact_widget_deployments_id": "edc3d9c0f8542822dde5c961621fb427", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 18}