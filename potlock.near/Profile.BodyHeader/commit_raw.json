{"tx_hash": "BqeM3Ywrc6fsJGRBfTmgj9VLZufr74kUFAWeWG4uzbeu", "action_id_social": "CbcXWw3Bg8VRMuq2gTqPrRBAjKnvCgLnqJrKCkR4mXx5-0-widget", "block_id": 115722656, "block_timestamp": "2024-03-29T14:20:36.213Z", "signer_id": "potlock.near", "widget_name": "Profile.BodyHeader", "source_code": "const {\n  profile: { name },\n  ownerId,\n  accountId,\n  projectId,\n} = props;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0 4rem;\n  margin-bottom: 66px;\n  width: 100%;\n  gap: 0.5rem;\n  @media screen and (max-width: 768px) {\n    padding: 0 1rem;\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n  flex-wrap: wrap;\n  gap: 2rem;\n  @media only screen and (max-width: 480px) {\n    flex-direction: column;\n  }\n`;\n\nconst Info = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  flex: 1;\n`;\n\nconst NameContainer = styled.div`\n  display: flex;\n  width: 100%;\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-items: end;\n  gap: 1rem;\n`;\n\nconst Name = styled.div`\n  font-size: 40px;\n  font-weight: 500;\n  color: #2e2e2e;\n  line-height: 1;\n  font-family: \"Lora\";\n\n  @media screen and (max-width: 768px) {\n    font-size: 32px;\n    line-height: 40px;\n  }\n`;\n\nconst AccountInfoContainer = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nconst AccountId = styled.div`\n  font-size: 16px;\n  font-weight: 400;\n  @media screen and (max-width: 768px) {\n    font-size: 14px;\n  }\n`;\n\nconst ShareIconContainer = styled.img`\n  width: 24px;\n  height: 24px;\n\n  @media screen and (max-width: 768px) {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ShareIcon = (\n  <ShareIconContainer\n    src=\"https://ipfs.near.social/ipfs/bafkreia3xywhwwxloqjo7622r623u32vmhdxa2at6ecvd2ityga6c2rcgm\"\n    alt=\"share-icon\"\n  />\n);\n\nconst policy = Near.view(props.projectId, \"get_policy\", {});\nconst isDao = !!policy;\n\nconst userHasPermissions = useMemo(() => {\n  if (!policy) return false;\n  // TODO: break this out (NB: duplicated in Project.CreateForm)\n  const userRoles = policy.roles.filter((role) => {\n    if (role.kind === \"Everyone\") return true;\n    return role.kind.Group && role.kind.Group.includes(context.accountId);\n  });\n  const kind = \"call\";\n  const action = \"AddProposal\";\n  // Check if the user is allowed to perform the action\n  const allowed = userRoles.some(({ permissions }) => {\n    return (\n      permissions.includes(`${kind}:${action}`) ||\n      permissions.includes(`${kind}:*`) ||\n      permissions.includes(`*:${action}`) ||\n      permissions.includes(\"*:*\")\n    );\n  });\n  return allowed;\n}, [policy]);\n\nconst isOwner = projectId === context.accountId;\nconst isPermissionedMember = isDao && userHasPermissions;\nconst canEdit = isOwner || isPermissionedMember;\n\nreturn (\n  <Header>\n    <Container>\n      <Info>\n        <NameContainer>\n          <Name>{name.length > 25 ? name.slice(0, 25).trim() + \"...\" : name}</Name>\n          <AccountInfoContainer>\n            <AccountId>\n              @{\" \"}\n              {(projectId || accountId).length > 15\n                ? (projectId || accountId).slice(0, 15).trim() + \"...\"\n                : projectId || accountId}\n            </AccountId>\n            <Widget\n              src={`${ownerId}/widget/Project.CopyIcon`}\n              props={{\n                textToCopy: projectId ? projectId : accountId,\n                customStyle: `height: 18px;`,\n              }}\n            />\n          </AccountInfoContainer>\n          {canEdit && (\n            <Widget\n              src={`${ownerId}/widget/Components.Button`}\n              props={{\n                type: \"secondary\",\n                text: \"Edit profile\",\n                style: { marginLeft: \"auto\" },\n                disabled: false,\n                href: props.hrefWithParams(`?tab=editproject&projectId=${projectId}`),\n              }}\n            />\n          )}\n          {accountId === context.accountId && !projectId && (\n            <Widget\n              src={`${ownerId}/widget/Components.Button`}\n              props={{\n                type: \"secondary\",\n                style: { marginLeft: \"auto\" },\n                text: \"Edit profile\",\n                disabled: false,\n                href: props.hrefWithParams(`?tab=editprofile`),\n              }}\n            />\n          )}\n        </NameContainer>\n        <Widget\n          src={`${ownerId}/widget/Profile.Tags`}\n          props={{\n            ...props,\n          }}\n        />\n        <Widget\n          src={`${ownerId}/widget/Profile.Linktree`}\n          props={{\n            ...props,\n          }}\n        />\n      </Info>\n      {projectId && (\n        <Widget\n          src={`${ownerId}/widget/Project.DonationsInfo`}\n          props={{\n            ...props,\n            accountId: projectId || accountId,\n          }}\n        />\n      )}\n    </Container>\n  </Header>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Profile.BodyHeader", "fact_widget_deployments_id": "dea83aab813354c9488f87699ee43b86", "inserted_timestamp": "2024-03-29T15:31:57.070Z", "modified_timestamp": "2024-03-29T15:31:57.070Z", "__row_index": 0}