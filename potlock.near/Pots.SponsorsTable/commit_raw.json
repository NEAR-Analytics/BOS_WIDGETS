{"tx_hash": "6qgGnM2WnkMYxj6se19x3rj3Fg4DRTATtbmutvgasKtG", "action_id_social": "2kdxDYm4DD9R8E9qr3pryj4EPQbCrca89m3xHCKZWipf-0-widget", "block_id": 115596619, "block_timestamp": "2024-03-27T18:11:41.743Z", "signer_id": "potlock.near", "widget_name": "Pots.SponsorsTable", "source_code": "const { sponsors, filter, tab, hrefWithParams } = props;\nconst isInPot = tab === \"pot\";\nconst { ownerId } = VM.require(\"potlock.near/widget/constants\");\nconst { nearToUsd } = VM.require(\"potlock.near/widget/utils\") || {\n  nearToUsd: 1,\n};\nconst [currentPage, setCurrentPage] = useState(1);\nconst perPage = 30; // need to be less than 50\nuseEffect(() => {\n  setCurrentPage(1);\n}, [filter]);\nconst nearLogo =\n  \"https://ipfs.near.social/ipfs/bafkreicdcpxua47eddhzjplmrs23mdjt63czowfsa2jnw4krkt532pa2ha\";\nconst { getTimePassed, _address, calcNetDonationAmount, reverseArr } =\n  VM.require(`${ownerId}/widget/Components.DonorsUtils`);\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  border-radius: 6px;\n  border: 1px solid #7b7b7b;\n  overflow: hidden;\n  .transcation {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    font-size: 14px;\n    .header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 0.5rem 1rem;\n      gap: 1rem;\n      color: #7b7b7b;\n      div {\n        display: flex;\n        align-items: center;\n        font-weight: 600;\n        &:last-of-type {\n          justify-content: flex-end;\n        }\n      }\n    }\n    .address {\n      width: 190px;\n      margin-right: auto;\n      justify-content: start !important;\n    }\n    .rank {\n      width: 40px;\n      margin-right: 2rem;\n      justify-content: center;\n    }\n  }\n  @media only screen and (max-width: 768px) {\n    .transcation {\n      font-size: 12px;\n      .header {\n        padding: 0.5rem;\n      }\n      .rank {\n        margin-right: 0;\n        width: 30px;\n      }\n    }\n  }\n  @media only screen and (max-width: 480px) {\n    .transcation .address {\n      width: 135px;\n      flex: 1;\n    }\n  }\n`;\nconst TrRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  gap: 1rem;\n  padding: 1rem;\n  border-top: 1px solid #c7c7c7;\n  > div {\n    display: flex;\n    align-items: center;\n  }\n  .address {\n    color: #292929;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    border-radius: 2px;\n    transition: all 200ms;\n    .profile-image {\n      width: 1.5rem;\n      height: 1.5rem;\n      margin-right: 1rem;\n    }\n  }\n  .sponsors-amount {\n    justify-content: flex-end;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  }\n  @media only screen and (max-width: 768px) {\n    padding: 1rem 0.5rem;\n  }\n`;\nconst Percentage = styled.div`\n  background: #ebebeb;\n  box-shadow: 0px -1px 0px 0px #dbdbdb inset, 0px 0px 0px 0.5px #dbdbdb;\n  border-radius: 4px;\n  padding: 2px 4px;\n  min-width: 60px;\n  text-align: right;\n`;\nconst NoResult = styled.div`\n  font-size: 1.125rem;\n  text-align: center;\n`;\nconst totalDonations = 0;\nsponsors.forEach((donation) => {\n  totalDonations += donation.amount;\n});\nconst ProfileImg = ({ donor_id }) => (\n  <Widget\n    src=\"mob.near/widget/ProfileImage\"\n    props={{ accountId: donor_id, style: {} }}\n  />\n);\nreturn sponsors.length ? (\n  <Container>\n    <div className=\"transcation\">\n      <div className=\"header\">\n        <div className=\"rank\">Rank</div>\n        <div className=\"address\">Donor</div>\n        <div>Amount</div>\n        {nearToUsd && !isInPot && <div>Amount (USD)</div>}\n      </div>\n      {sponsors\n        .slice((currentPage - 1) * perPage, currentPage * perPage)\n        .map((donation, idx) => {\n          const { donor_id, amount, percentage_share } = donation;\n          return (\n            <TrRow>\n              <div className=\"rank\">\n                #{idx + 1 + (currentPage - 1) * perPage}\n              </div>\n              <a\n                href={hrefWithParams(`?tab=profile&accountId=${donor_id}`)}\n                className=\"address\"\n                target=\"_blank\"\n              >\n                <ProfileImg donor_id={donor_id} />\n                <OverlayTrigger\n                  placement=\"top\"\n                  overlay={<Tooltip>{donor_id}</Tooltip>}\n                >\n                  <div> {_address(donor_id, 15)}</div>\n                </OverlayTrigger>\n              </a>\n              <div className=\"sponsors-amount\">\n                {amount.toFixed(2).replace(/[.,]00$/, \"\")}N{\" \"}\n                <Percentage>\n                  {percentage_share === \"0\" ? \"<0.01\" : percentage_share}%\n                </Percentage>{\" \"}\n              </div>\n            </TrRow>\n          );\n        })}\n    </div>\n    <Widget\n      src={`${ownerId}/widget/Components.Pagination`}\n      props={{\n        onPageChange: (page) => {\n          setCurrentPage(page);\n        },\n        data: sponsors,\n        currentPage,\n        perPage: perPage,\n        bgColor: \"#292929\",\n      }}\n    />\n  </Container>\n) : (\n  <NoResult>No Sponsors</NoResult>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Pots.SponsorsTable", "fact_widget_deployments_id": "ae59b009bf9344d6c3fb933d6e8ed6a2", "inserted_timestamp": "2024-03-27T19:30:46.766Z", "modified_timestamp": "2024-03-27T19:30:46.766Z", "__row_index": 2}