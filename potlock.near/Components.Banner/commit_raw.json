{"tx_hash": "CZ4cNi8MpWt6tbUTw5D4u1mvGKmyRdNnjM2vVy4dH1Kq", "action_id_social": "DfDbPxXJ3LTLKotXcbmk8aSwpLtPBycCL7LSTQBgEYNK-0-widget", "block_id": 117690964, "block_timestamp": "2024-04-26T21:13:56.629Z", "signer_id": "potlock.near", "widget_name": "Components.Banner", "source_code": "let PotFactorySDK =\n  VM.require(\"potlock.near/widget/SDK.potfactory\") ||\n  (() => ({\n    getPots: () => {},\n  }));\n\nconst PotSDK = VM.require(\"potlock.near/widget/SDK.pot\") || {\n  asyncGetConfig: () => {},\n};\n\nconst [activeRounds, setActiveRounds] = useState([]);\n\nPotFactorySDK = PotFactorySDK({ env: props.env });\n\nconst pots = PotFactorySDK.getPots();\n\nconst now = Date.now();\n\nuseEffect(() => {\n  if (pots) {\n    pots.forEach((pot) => {\n      PotSDK.asyncGetConfig(pot.id)\n        .then((potConfig) => {\n          const { public_round_start_ms, public_round_end_ms } = potConfig;\n          if (public_round_start_ms < now && public_round_end_ms > now) {\n            setActiveRounds((prevActiveRounds) => [\n              ...prevActiveRounds,\n              {\n                ...potConfig,\n                pot_id: pot.id,\n              },\n            ]);\n          }\n        })\n        .catch((e) => {\n          console.error(\"error getting pot detail: \", e);\n        });\n    });\n  }\n}, [pots]);\n\nconst Wrapper = styled.div`\n  height: ${(props) => (props.active ? \"48px\" : \"0px !important\")};\n  @media screen and (max-width: 768px) {\n    height: 36px;\n  }\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  height: ${(props) => (props.active ? \"48px\" : \"0px !important\")};\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  z-index: 999;\n  background: #7fc41e;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .text {\n    font-size: 22px;\n    font-weight: 500;\n    letter-spacing: 0.015em;\n    text-transform: uppercase;\n    display: flex;\n    gap: 1rem;\n    .link {\n      display: flex;\n      align-items: center;\n      font-weight: 600;\n      gap: 4px;\n      color: white;\n      text-decoration: underline;\n      transition: transform 300ms ease-in-out;\n      img {\n        transition: rotate 300ms ease-in-out;\n        height: 1em;\n        width: fit-content;\n      }\n      :hover {\n        transform: translateX(4px);\n        img {\n          rotate: 45deg;\n        }\n      }\n    }\n  }\n  @media screen and (max-width: 992px) {\n    .text {\n      font-size: 1rem;\n    }\n  }\n  @media screen and (max-width: 768px) {\n    height: 36px;\n    .text {\n      font-size: 12px;\n      gap: 0.5rem;\n    }\n  }\n`;\nconst isSingleRound = activeRounds.length === 1;\nconst limit = isSingleRound ? 20 : 10;\nconst potName =\n  activeRounds[0].pot_name.length > limit\n    ? activeRounds[0].pot_name.slice(0, limit).trim() + \"...\"\n    : activeRounds[0].pot_name;\n\nconst textForOneRound = `${potName} round is live`;\nconst textForMultipleRounds = `Pot round is live for ${potName} and +${\n  activeRounds.length - 1\n} More`;\n\nreturn (\n  <Wrapper active={!!activeRounds.length}>\n    <Container active={!!activeRounds.length}>\n      <div className=\"text\">\n        {isSingleRound ? textForOneRound : textForMultipleRounds}\n        <a\n          href={props.hrefWithParams(\n            isSingleRound ? `?tab=pot&potId=${activeRounds[0].pot_id}` : `?tab=pots`\n          )}\n          className=\"link\"\n        >\n          {isSingleRound ? \"Donate\" : \"Check Now\"}\n          <img\n            src=\"https://ipfs.near.social/ipfs/bafkreigots5l4o5d3a4zksfimch3gvqw7ezb2quundmjwml33abo5atgwi\"\n            alt=\"arrow\"\n          />\n        </a>\n      </div>\n    </Container>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Components.Banner", "fact_widget_deployments_id": "65fffd2a0d617b18a716f8e7b801a650", "inserted_timestamp": "2024-04-26T22:40:24.736Z", "modified_timestamp": "2024-04-26T22:40:24.736Z", "__row_index": 4}