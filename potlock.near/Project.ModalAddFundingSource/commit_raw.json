{"tx_hash": "Hgrchv5oLuqRiG7b45fTaUG63BqDR3sM94KG85JNoJrW", "action_id_social": "Djzwn59TtaXv3K3ppFwrkzFNFFz86j4ko1pDzn43LeCU-0-widget", "block_id": 112561024, "block_timestamp": "2024-02-10T20:41:01.895Z", "signer_id": "potlock.near", "widget_name": "Project.ModalAddFundingSource", "source_code": "const {\n  ownerId,\n  isModalOpen,\n  onClose,\n  handleAddFundingSource,\n  fundingSources,\n  fundingSourceIndex,\n} = props;\n\n// console.log(\"props in add funding source modal: \", props);\n\nState.init({\n  investorName: fundingSources[fundingSourceIndex]?.investorName || \"\",\n  investorNameError: \"\",\n  description: fundingSources[fundingSourceIndex]?.description || \"\",\n  descriptionError: \"\",\n  denomination: fundingSources[fundingSourceIndex]?.denomination || \"\",\n  denominationError: \"\",\n  amountReceived: fundingSources[fundingSourceIndex]?.amountReceived || \"\",\n  amountReceivedError: \"\",\n});\n\n// console.log(\"state in add funding source modal: \", state);\n\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\nconst MONEY_ICON_URL =\n  IPFS_BASE_URL + \"bafkreiem3zqv4smaflel54lwtl65d7zbulkan3vnfor4fi2sqn3n5p7tpe\";\nconst CLOSE_ICON_URL =\n  IPFS_BASE_URL + \"bafkreifyg2vvmdjpbhkylnhye5es3vgpsivhigkjvtv2o4pzsae2z4vi5i\";\n\nconst ModalHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  background: #f6f5f3;\n  padding: 10px 20px;\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n`;\n\nconst ModalHeaderText = styled.div`\n  font-size: 16px;\n  font-weight: 600;\n  color: #292929;\n  line-height: 24px;\n  word-wrap: break-word;\n  margin-left: 8px;\n`;\n\nconst ModalBody = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 16px 20px 32px 20px;\n  gap: 24px;\n`;\n\nconst Icon = styled.img`\n  width: 24px;\n  height: 24px;\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nreturn (\n  <Widget\n    src={`${ownerId}/widget/Components.Modal`}\n    props={{\n      isModalOpen,\n      onClose,\n      overlayStyle: {\n        zIndex: 1000,\n      },\n      contentStyle: {\n        padding: \"0px\",\n      },\n      children: (\n        <>\n          <ModalHeader>\n            <div></div>\n            <Row>\n              <Icon src={MONEY_ICON_URL} />\n              <ModalHeaderText>Add Past Funding Source</ModalHeaderText>\n            </Row>\n            <Icon src={CLOSE_ICON_URL} onClick={onClose} />\n          </ModalHeader>\n          <ModalBody>\n            <Widget\n              src={`${ownerId}/widget/Inputs.Text`}\n              props={{\n                label: \"Name of investor\",\n                placeholder: \"Enter investor name\",\n                value: state.investorName,\n                onChange: (val) => State.update({ investorName: val }),\n                validate: () => {\n                  if (state.investorName.length < 3) {\n                    State.update({ investorNameError: \"Must be at least 3 characters\" });\n                    return;\n                  }\n                  if (state.investorName.length > 50) {\n                    State.update({ investorNameError: \"Must be less than 50 characters\" });\n                    return;\n                  }\n                  State.update({ investorNameError: \"\" });\n                },\n                error: state.investorNameError,\n              }}\n            />\n            <Widget\n              src={`${ownerId}/widget/Inputs.TextArea`}\n              props={{\n                label: \"Description\",\n                placeholder: \"Type description\",\n                value: state.description,\n                onChange: (description) => State.update({ description }),\n                validate: () => {\n                  if (state.description.length > 500) {\n                    State.update({ descriptionError: \"Must be less than 500 characters\" });\n                    return;\n                  }\n                  State.update({ descriptionError: \"\" });\n                },\n                error: state.descriptionError,\n              }}\n            />\n            <Widget\n              src={`${ownerId}/widget/Inputs.Text`}\n              props={{\n                label: \"Denomination of investment\",\n                placeholder: \"e.g. NEAR, USD, USDC, etc.\",\n                value: state.denomination,\n                onChange: (val) => State.update({ denomination: val.toUpperCase() }),\n                validate: () => {\n                  if (state.denomination.length < 3) {\n                    State.update({ denominationError: \"Must be at least 3 characters\" });\n                    return;\n                  }\n                  if (state.denomination.length > 10) {\n                    State.update({ denominationError: \"Must be less than 10 characters\" });\n                    return;\n                  }\n                  State.update({ denominationError: \"\" });\n                },\n                error: state.denominationError,\n              }}\n            />\n            <Widget\n              src={`${ownerId}/widget/Inputs.Text`}\n              props={{\n                label: \"Investment amount\",\n                placeholder: \"e.g. 1000\",\n                value: state.amountReceived,\n                onChange: (val) => State.update({ amountReceived: val }),\n                validate: () => {\n                  // TODO: VALIDATE AMOUNT\n                  if (isNaN(state.amountReceived)) {\n                    State.update({ amountReceivedError: \"Must be a number\" });\n                    return;\n                  }\n                  State.update({ amountReceivedError: \"\" });\n                },\n                error: state.amountReceivedError,\n              }}\n            />\n            <Row style={{ width: \"100%\", justifyContent: \"flex-end\" }}>\n              <Widget\n                src={`${ownerId}/widget/Components.Button`}\n                props={{\n                  type: \"primary\",\n                  text: \"Add Funding Source\",\n                  disabled:\n                    !state.investorName ||\n                    !!state.investorNameError ||\n                    !state.description ||\n                    !!state.descriptionError ||\n                    !state.denomination ||\n                    !!state.denominationError ||\n                    !state.amountReceived ||\n                    !!state.amountReceivedError,\n                  onClick: () => {\n                    const fundingSource = {\n                      investorName: state.investorName,\n                      description: state.description,\n                      denomination: state.denomination,\n                      amountReceived: state.amountReceived,\n                    };\n                    State.update({\n                      investorName: \"\",\n                      investorNameError: \"\",\n                      description: \"\",\n                      descriptionError: \"\",\n                      denomination: \"\",\n                      denominationError: \"\",\n                      amountReceived: \"\",\n                      amountReceivedError: \"\",\n                    });\n                    handleAddFundingSource(fundingSource);\n                  },\n                }}\n              />\n            </Row>\n          </ModalBody>\n        </>\n      ),\n    }}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.ModalAddFundingSource", "fact_widget_deployments_id": "a452be371c5bb90b29826c80a2df0d56", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}