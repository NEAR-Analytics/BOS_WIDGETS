{"tx_hash": "Ars7f4sSfhRwtzE1a2ELCCo1puYaeMpKmCSV2FRvzVVs", "action_id_social": "CSL1gXHc9mUDP1ehNpSEWgGtAhNisSkhdrPSupxRCFmH-0-widget", "block_id": 112470577, "block_timestamp": "2024-02-09T14:48:38.652Z", "signer_id": "potlock.near", "widget_name": "Project.BannerHeader", "source_code": "const { ownerId } = props;\nconst accountId = props.projectId;\nif (!accountId) {\n  return \"No account ID\";\n}\n\nconst editable = props.bgImageOnChange && props.profileImageOnChange;\n\n// console.log(props);\n\n// const link =\n//   props.link &&\n//   (props.link === true\n//     ? `https://near.social/mob.near/widget/ProfilePage?accountId=${accountId}`\n//     : props.link);\n\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\n\nif (profile === null) {\n  return \"Loading\";\n}\n\nconst name = profile.name || \"No-name profile\";\nconst image = profile.image;\nconst backgroundImage = props.backgroundImage || profile.backgroundImage;\nconst profileImage = props.profileImage || image;\nconst tags = Object.keys(profile.tags ?? {});\nconst imageStyle = props.imageStyle ?? {};\nconst backgroundStyle = props.backgroundStyle ?? {};\nconst containerStyle = props.containerStyle ?? {};\n\nconst Container = styled.div`\n  padding-left: 64px;\n  @media screen and (max-width: 768px) {\n    padding-left: 16px;\n    border-radius: 0;\n  }\n`;\n\nconst ProfileImageContainer = styled.div`\n  transform: ${(props) => `translateY(${props.profileImageTranslateYPx || 240}px);`}\n  width: ${props.imageStyle?.width ?? \"80px\"};\n  height: ${props.imageStyle?.height ?? \"80px\"};\n\n  img {\n    width: ${props.imageStyle?.width ?? \"80px\"};\n    height: ${props.imageStyle?.height ?? \"80px\"};\n\n    @media screen and (max-width: 768px) {\n      // width: 64px;\n      // height: 64px;\n      width: ${props.imageStyle?.width ?? \"64px\"};\n      height: ${props.imageStyle?.height ?? \"64px\"};\n    }\n  }\n\n  @media screen and (max-width: 768px) {\n    // transform: translateY(248px);\n    transform: ${(props) => `translateY(${props.profileImageTranslateYPxMobile || 248}px);`}\n\n    width: 64px;\n    height: 64px;\n  }\n\n  svg {\n    position: absolute;\n    top: 40px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    opacity: 0; // Start with the image invisible\n    transition: opacity 0.3s;\n    z-index: 2; // Ensure the image is on top\n    pointer-events: none;\n  }\n\n  ${\n    editable &&\n    `\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 80px;\n    border-radius: 50%;\n    background-color: rgba(45.9, 45.9, 45.9, 0); // Start with transparent overlay\n    transition: background-color 0.3s; // Smooth transition for the overlay\n    pointer-events: none;\n\n    @media screen and (max-width: 768px) {\n      height: 64px;\n    }\n\n  }\n\n  &:hover {\n    cursor: pointer;\n\n    &:after {\n      background-color: rgba(45.9, 45.9, 45.9, 0.4); // Dark overlay with 40% opacity on hover\n    }\n\n    svg {\n      opacity: 1; // Make the image visible on hover\n    }\n  }\n  `\n  }\n`;\n\nconst backgroundStyleHeightPx = parseInt(backgroundStyle?.height?.replace(\"px\", \"\"));\n\nconst BackgroundImageContainer = styled.div`\n  svg {\n    position: absolute;\n    top: ${backgroundStyleHeightPx / 2}px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    opacity: 0; // Start with the image invisible\n    transition: opacity 0.3s;\n    z-index: 2; // Ensure the image is on top\n    pointer-events: none;\n  }\n\n  ${editable &&\n  `\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: ${backgroundStyle.height ?? \"100%\"};\n    background-color: rgba(45.9, 45.9, 45.9, 0); // Start with transparent overlay\n    transition: background-color 0.3s; // Smooth transition for the overlay\n    pointer-events: none;\n  }\n\n  &:hover {\n    cursor: pointer;\n\n    &:after {\n      background-color: rgba(45.9, 45.9, 45.9, 0.4); // Dark overlay with 40% opacity on hover\n    }\n\n    svg {\n      opacity: 1; // Make the image visible on hover\n    }\n  }\n  `}\n`;\n\n// console.log(\"state in banner header: \", state);\n// console.log(\"props in banner header: \", props);\n// console.log(\"background image: \", backgroundImage);\n// console.log(\"image style: \", imageStyle);\n// console.log(\"profile image: \", profileImage);\n\nconst CameraSvg = ({ height }) => (\n  <svg\n    width={height}\n    height={height}\n    viewBox={`0 0 48 48`}\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <mask\n      id=\"mask0_3178_2528\"\n      style={{ maskType: \"alpha\" }}\n      maskUnits=\"userSpaceOnUse\"\n      x=\"0\"\n      y=\"0\"\n      width={height}\n      height={height}\n    >\n      <rect width={height} height={height} fill=\"#D9D9D9\" />\n    </mask>\n    <g mask=\"url(#mask0_3178_2528)\">\n      <path\n        d=\"M5 40.35C4.2 40.35 3.5 40.05 2.9 39.45C2.3 38.85 2 38.15 2 37.35V11.7C2 10.9333 2.3 10.2417 2.9 9.625C3.5 9.00833 4.2 8.7 5 8.7H12.35L16 4.35H29.7V7.35H17.4L13.75 11.7H5V37.35H39V16.65H42V37.35C42 38.15 41.6917 38.85 41.075 39.45C40.4583 40.05 39.7667 40.35 39 40.35H5ZM39 11.65V7.35H34.7V4.35H39V0H42V4.35H46.35V7.35H42V11.65H39ZM21.975 33C24.3917 33 26.4167 32.1833 28.05 30.55C29.6833 28.9167 30.5 26.8917 30.5 24.475C30.5 22.0583 29.6833 20.0417 28.05 18.425C26.4167 16.8083 24.3917 16 21.975 16C19.5583 16 17.5417 16.8083 15.925 18.425C14.3083 20.0417 13.5 22.0583 13.5 24.475C13.5 26.8917 14.3083 28.9167 15.925 30.55C17.5417 32.1833 19.5583 33 21.975 33ZM21.975 30C20.3917 30 19.0833 29.475 18.05 28.425C17.0167 27.375 16.5 26.0583 16.5 24.475C16.5 22.8917 17.0167 21.5833 18.05 20.55C19.0833 19.5167 20.3917 19 21.975 19C23.5583 19 24.875 19.5167 25.925 20.55C26.975 21.5833 27.5 22.8917 27.5 24.475C27.5 26.0583 26.975 27.375 25.925 28.425C24.875 29.475 23.5583 30 21.975 30Z\"\n        fill=\"white\"\n      />\n    </g>\n  </svg>\n);\n\nreturn (\n  <Container className=\"pt-0 position-relative\" style={{ ...containerStyle }}>\n    {backgroundImage && (\n      <BackgroundImageContainer>\n        <Widget\n          src=\"mob.near/widget/Image\"\n          props={{\n            image: backgroundImage,\n            alt: \"profile background\",\n            className: \"position-absolute w-100\",\n            style: { ...backgroundStyle, pointerEvents: \"none\" },\n            fallbackUrl:\n              \"https://ipfs.near.social/ipfs/bafkreih4i6kftb34wpdzcuvgafozxz6tk6u4f5kcr2gwvtvxikvwriteci\",\n          }}\n        />\n        <CameraSvg height={48} />\n        {editable && (\n          <Files\n            multiple={false}\n            accepts={[\"image/*\"]}\n            minFileSize={1}\n            style={{\n              zIndex: 4,\n              width: \"100%\",\n              height: backgroundStyle.height ?? \"100%\",\n              position: \"absolute\",\n            }}\n            clickable\n            onChange={props.bgImageOnChange}\n          />\n        )}\n      </BackgroundImageContainer>\n      // <BackgroundImageContainer>\n      //   <CameraSvg height={48} />\n      //   {editable && (\n      //     <Files\n      //       multiple={false}\n      //       accepts={[\"image/*\"]}\n      //       minFileSize={1}\n      //       style={{\n      //         width: \"100%\",\n      //         height: backgroundStyle.height ?? \"100%\",\n      //       }}\n      //       clickable\n      //       onChange={props.bgImageOnChange}\n      //     >\n      //       <Widget\n      //         src=\"mob.near/widget/Image\"\n      //         props={{\n      //           image: backgroundImage,\n      //           alt: \"profile background\",\n      //           className: \"position-absolute w-100\",\n      //           style: { ...backgroundStyle },\n      //           fallbackUrl:\n      //             \"https://ipfs.near.social/ipfs/bafkreih4i6kftb34wpdzcuvgafozxz6tk6u4f5kcr2gwvtvxikvwriteci\",\n      //         }}\n      //       />\n      //     </Files>\n      //   )}\n      // </BackgroundImageContainer>\n    )}\n    {/* \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\"; */}\n    <ProfileImageContainer\n      class=\"profile-picture d-inline-block\"\n      profileImageTranslateYPx={props.profileImageTranslateYPx}\n      profileImageTranslateYPxMobile={props.profileImageTranslateYPxMobile}\n    >\n      <CameraSvg height={24} />\n      <Files\n        multiple={false}\n        accepts={[\"image/*\"]}\n        minFileSize={1}\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: \"100%\",\n          overflow: \"hidden\",\n        }}\n        clickable\n        onChange={props.profileImageOnChange}\n      >\n        {/* <Widget\n          src=\"mob.near/widget/Image\"\n          props={{\n            image: profileImage,\n            alt: \"profile avatar\",\n            className:\n              \"position-absolute w-100 rounded-circle w-100 img-thumbnail d-block overflow-hidden mb-2\",\n            style: { ...imageStyle },\n            fallbackUrl:\n              \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n          }}\n        /> */}\n        <Widget\n          src={`${ownerId}/widget/Project.ProfileImage`}\n          // image={profileImage}\n          props={{\n            profile,\n            accountId,\n            style: { ...imageStyle },\n            // imageStyle: { ...imageStyle },\n            className: \"mb-2\",\n            imageClassName: \"rounded-circle w-100 img-thumbnail d-block\",\n            thumbnail: false,\n            image: profileImage,\n          }}\n        />\n      </Files>\n    </ProfileImageContainer>\n    {props.children && props.children}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/potlock.near/widget/Project.BannerHeader", "fact_widget_deployments_id": "cf904cc1dbe895b1ed7d3198669eb34b", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}