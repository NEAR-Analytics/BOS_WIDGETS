{"tx_hash": "8YKCLEVwJx3hb7zxepwni5qKJVyAQn64Vx9k8d4aDGfb", "action_id_social": "GbLjxAwTF6zfuF2QJHzZHtJYZckhCR9jat4vKmu6cVNc-0-widget", "block_id": 96234997, "block_timestamp": "2023-07-11T16:35:45.164Z", "signer_id": "rubycop.near", "widget_name": "NDC.Elections.Houses", "source_code": "const { houses, selectedHouse, handleSelect, myVotes } = props;\n\nconst housesMapping = {\n  CouncilOfAdvisors: {\n    title: \"Council Of Advisors\",\n    src: \"https://bafkreidejnek5zzwlhd3lxnr7s3tvtrgul6jobfpikbs7zjkpuovxdz7je.ipfs.nftstorage.link\",\n  },\n  HouseOfMerit: {\n    title: \"House of Merit\",\n    src: \"https://bafkreihoomeeaeyqerqftn3n7yb2jrnmqtpwgpsl3xpelek6qmly3qzob4.ipfs.nftstorage.link\",\n  },\n  TransparencyCommission: {\n    title: \"Transparency Commission\",\n    src: \"https://bafkreihcog3rs2gj4wgwfixk6yqir7k3csyaqiqwcvm2gedlh6dlvr7ik4.ipfs.nftstorage.link\",\n  },\n};\n\nconst Small = styled.small`\n  font-weight: 400;\n`;\n\nconst H6 = styled.h6`\n  margin-bottom: 0;\n  font-weight: 600;\n`;\n\nconst ImgContainer = styled.div`\n  margin-right: 20px;\n`;\n\nconst CompletedIcon = styled.i`\n  border-radius: 50%;\n  padding-bottom: 0;\n  color: #239f28;\n  background: #cee9cf;\n\n  &:before {\n    vertical-align: -0.2rem;\n  }\n`;\n\nconst ItemContainer = styled.div`\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n  border: 1px solid;\n  background: ${(props) =>\n    props.selected\n      ? \"linear-gradient(90deg, #9333EA 0%, #4F46E5 100%)\"\n      : \"#FFFFFF\"};\n  border-color: ${(props) => (props.selected ? \"#4F46E5\" : \"#ffffff\")};\n  color: ${(props) => (props.selected ? \"white\" : \"inherit\")};\n\n  &:hover {\n    border: 1px solid #4F46E5;\n    background: ${(props) =>\n      props.selected\n        ? \"linear-gradient(90deg, #9333EA 0%, #4F46E5 100%)\"\n        : \"linear-gradient(90deg, rgba(147, 51, 234, 0.08) 0%, rgba(79, 70, 229, 0.08) 100%)\"};\n    box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.05);\n  }\n`;\n\nconst Stepper = styled.div`\n  background: #FDFEFF;\n  box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.2);\n  border-radius: 8px;\n  padding: 16px;\n\n  h3, h4 {\n    margin: 0 3px;\n  }\n`;\n\nconst ProgressBar = styled.div`\n  margin-top: 8px;\n  border-radius: 100px;\n  background: #F5F5F5;\n  padding: 3px;\n  height: 21px;\n\n`;\n\nconst DoneBar = styled.div`\n  border-radius: 100px;\n  background: #239F28;\n  height: 100%;\n`;\n\nconst CompleteText = styled.span`\n  color: #239F28;\n  margin-bottom: 0px;\n  font-weight: 900;\n  font-size: 22px;\n`;\n\nState.init({ step: 1 });\n\nconst votesLeft = (house) =>\n  house.seats - myVotes.filter((vote) => vote.house === house.typ).length;\n\nconst completedCount = () => {\n  const step = 0;\n  houses.map((house) => {\n    step += votesLeft(house) === 0 ? 1 : 0;\n  });\n  State.update({ step });\n};\n\nconst HouseItem = ({ house }) => (\n  <ItemContainer\n    role=\"button\"\n    className=\"d-flex p-3 px-4 align-items-center mb-3 justify-content-between\"\n    onClick={() => handleSelect(house)}\n    selected={selectedHouse === house.id}\n  >\n    <div className=\"d-flex align-items-center\">\n      <ImgContainer>\n        <Widget\n          src=\"mob.near/widget/Image\"\n          props={{\n            image: { url: housesMapping[house.typ].src },\n            alt: housesMapping[house.typ].title,\n            style: {\n              height: \"40px\",\n              objectFit: \"cover\",\n              maxHeight: \"40px\",\n              borderRadius: \"50%\",\n            },\n            fallbackUrl:\n              \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n          }}\n        />\n      </ImgContainer>\n      <div>\n        <h6>{housesMapping[house.typ].title}</h6>\n        <Small>\n          {votesLeft(house)} / {house.seats} votes left\n        </Small>\n      </div>\n    </div>\n    <div>\n      {votesLeft(house) === 0 && (\n        <CompletedIcon\n          className=\"bi bi-check-circle fs-5\"\n          selected={selectedHouse === house.id}\n        />\n      )}\n    </div>\n  </ItemContainer>\n);\n\nreturn (\n  <div className=\"h-100\">\n    <div className=\"align-items-start\">\n      {houses.map((house) => (\n        <HouseItem house={house} />\n      ))}\n    </div>\n    <Stepper className=\"align-items-end\">\n      <div className=\"d-flex justify-content-between\">\n        <div>Your voting progress</div>\n        <div>\n          <CompleteText> {state.step}</CompleteText>/\n          <span className=\"text-secondary\">{houses.length}</span>\n          <span className=\"text-secondary\">Houses</span>\n        </div>\n      </div>\n      <ProgressBar className=\"position-relative\">\n        {state.step > 0 && <DoneBar className={`col-${state.step * 4}`} />}\n        <div className=\"position-absolute top-0 start-50\">\n          <small>\n            <b className={`${state.step > 1 ? \"text-light\" : \"inherit\"}`}>\n              {state.step === 3 ? 100 : state.step * 33} %\n            </b>\n          </small>\n        </div>\n      </ProgressBar>\n    </Stepper>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rubycop.near/widget/NDC.Elections.Houses", "fact_widget_deployments_id": "a941f7c119ea99c37c3da0704c489955", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 40}