{"tx_hash": "DKjJuYB249at2MpckvRUV7eP2Y3hsaAvz56Hcx6f5Gja", "action_id_social": "GcwXCqFBR4nc5AXwuFbduqCqpP3aerNQSgX5VQU6qqJS-0-widget", "block_id": 98854861, "block_timestamp": "2023-08-15T10:37:22.782Z", "signer_id": "rubycop.near", "widget_name": "Common.Compose", "source_code": "const { handleChange, rows, placeholder, type, withoutSeparator, getMentions } =\n  props;\n\nState.init({\n  text: props.initialText || \"\",\n});\n\nconst onSelect = (id) => {\n  let text = id;\n\n  if (!withoutSeparator) {\n    text = state.text.replace(/[\\s]{0,1}@[^\\s]*$/, \"\");\n    text = `${text} @${id}`.trim() + \" \";\n  }\n  State.update({ text, showAccountAutocomplete: false });\n\n  if (getMentions) getMentions(id);\n  if (handleChange) handleChange(text);\n};\n\nconst onChange = (text) => {\n  const showAccountAutocomplete = withoutSeparator\n    ? true\n    : /@[\\w][^\\s]*$/.test(text);\n  State.update({ text, showAccountAutocomplete });\n\n  if (handleChange) handleChange(text);\n};\n\nconst Input = styled.input`\n  padding: 8px 10px;\n  width: 100%;\n  background: #ffffff;\n  border: 1px solid #d0d6d9;\n  border-radius: 8px;\n  font-size: 14px;\n  color: #828688;\n`;\n\nconst Textarea = styled.textarea`\n  padding: 8px 10px;\n  width: 100%;\n  background: #ffffff;\n  border: 1px solid #d0d6d9;\n  border-radius: 8px;\n  font-size: 14px;\n  color: #828688;\n`;\n\nconst InputField = () => {\n  return type === \"input\" ? (\n    <Input\n      value={state.text || \"\"}\n      onInput={(event) => onChange(event.target.value)}\n      onKeyUp={(event) => {\n        if (event.key === \"Escape\")\n          State.update({ showAccountAutocomplete: false });\n      }}\n      placeholder={placeholder ?? \"\"}\n    />\n  ) : (\n    <Textarea\n      value={state.text || \"\"}\n      onInput={(event) => onChange(event.target.value)}\n      onKeyUp={(event) => {\n        if (event.key === \"Escape\")\n          State.update({ showAccountAutocomplete: false });\n      }}\n      rows={rows ?? 5}\n      placeholder={placeholder ?? \"\"}\n    />\n  );\n};\n\nreturn (\n  <>\n    <InputField />\n    {state.showAccountAutocomplete && (\n      <div className=\"pt-1 w-100 overflow-hidden\">\n        <Widget\n          src=\"rubycop.near/widget/AccountAutocomplete\"\n          props={{\n            term: withoutSeparator ? state.text : state.text.split(\"@\").pop(),\n            onSelect: onSelect,\n            onClose: () => State.update({ showAccountAutocomplete: false }),\n          }}\n        />\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rubycop.near/widget/Common.Compose", "fact_widget_deployments_id": "5b2bd111d562dfcbc1115717e7258ba5", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 67}