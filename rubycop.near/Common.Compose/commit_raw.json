{"tx_hash": "5T1iT3HAgBrjkNa2J2pzx11uPtotTAyT4yV2CYjvnfgT", "action_id_social": "3M8jveSrtEDGasoG7brP3UmnktFXNQjgmMiQuKoyGR1w-0-widget", "block_id": 98664621, "block_timestamp": "2023-08-12T21:43:13.207Z", "signer_id": "rubycop.near", "widget_name": "Common.Compose", "source_code": "const { handleChange, rows, placeholder } = props;\n\nState.init({\n  text: props.initialText || \"\",\n});\n\nconst onSelect = (id) => {\n  let text = state.text.replace(/[\\s]{0,1}@[^\\s]*$/, \"\");\n  text = `${text} @${id}`.trim() + \" \";\n  State.update({ text, showAccountAutocomplete: false });\n\n  if (handleChange) handleChange(text);\n};\n\nconst onChange = (text) => {\n  const showAccountAutocomplete = /@[\\w][^\\s]*$/.test(text);\n  State.update({ text, showAccountAutocomplete });\n\n  if (handleChange) handleChange(text);\n};\n\nconst Textarea = styled.textarea`\n  padding: 8px 10px;\n  width: 100%;\n  background: #ffffff;\n  border: 1px solid #d0d6d9;\n  border-radius: 8px;\n  font-size: 14px;\n  color: #828688;\n`;\n\nreturn (\n  <>\n    <Textarea\n      value={state.text || \"\"}\n      onInput={(event) => onChange(event.target.value)}\n      onKeyUp={(event) => {\n        if (event.key === \"Escape\")\n          State.update({ showAccountAutocomplete: false });\n      }}\n      rows={rows ?? 5}\n      placeholder={placeholder ?? \"\"}\n    />\n    {state.showAccountAutocomplete && (\n      <div className=\"pt-1 w-100 overflow-hidden\">\n        <Widget\n          src=\"rubycop.near/widget/AccountAutocomplete\"\n          props={{\n            term: state.text.split(\"@\").pop(),\n            onSelect: onSelect,\n            onClose: () => State.update({ showAccountAutocomplete: false }),\n          }}\n        />\n      </div>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rubycop.near/widget/Common.Compose", "fact_widget_deployments_id": "e05dda74561eff6b60d2effca338aa59", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 13}