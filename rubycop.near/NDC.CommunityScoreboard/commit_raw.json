{"tx_hash": "5GZPJEzdrZgv4qeNRAfMHHkUvBoTwGAmHhMPc7bsREns", "action_id_social": "DsgY6WTPF1HZX7UkmpT3uWLe55UizrfNNgD51mKCWksK-0-widget", "block_id": 100027045, "block_timestamp": "2023-08-30T20:12:45.249Z", "signer_id": "rubycop.near", "widget_name": "NDC.CommunityScoreboard", "source_code": "const { community, vertical } = props;\n\nState.init({\n  data: [],\n});\n\nif (!community || !vertical)\n  return (\n    <>\n      <p>Props are missing in query string. Correct url should looks like</p>\n      <small className=\"text-secondary\">\n        https://near.org/rubycop.near/widget/NDC.CommunityScoreboard?community=zomland&vertical=gaming\n      </small>\n    </>\n  );\n\nasyncFetch(\n  `https://scoreboard-ophc7vkxsq-uc.a.run.app/scoreboard?communityName=${community}&communityVertical=${vertical}`,\n  {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n  }\n).then((res) => {\n  if (res.body) State.update({ data: res.body.data });\n});\n\nconst Loader = () => (\n  <span\n    className=\"spinner-grow spinner-grow-sm me-1\"\n    role=\"status\"\n    aria-hidden=\"true\"\n  />\n);\n\nconst UserName = styled.div`\n  color: inherit !important;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  padding-top: 2px;\n  width: 200px;\n`;\n\nconst Tag = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 4px 8px;\n  border: 1px solid #4ba6ee;\n  color: #4ba6ee;\n  border-radius: 100px;\n  font-weight: 500;\n  font-size: 11px;\n`;\n\nif (state.data.length === 0)\n  return (\n    <>\n      <Loader /> Fetching data ...\n    </>\n  );\n\nreturn (\n  <div className=\"d-flex justify-content-center w-100\">\n    <div className=\"w-50\">\n      <h1>NDC Community users</h1>\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <h3>\n          <b>{community}</b>\n        </h3>\n        <Tag>{vertical}</Tag>\n      </div>\n      <small>Total users: {state.data.length}</small>\n      <hr className=\"my-2\" />\n      {state.data.length > 0 ? (\n        state.data\n          .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n          .map((user) => (\n            <div className=\"d-flex justify-content-between align-items-center p-1\">\n              <Widget\n                src=\"near/widget/AccountProfileOverlay\"\n                props={{\n                  accountId: user.account,\n                  children: (\n                    <div className=\"d-flex justify-items-center\">\n                      <Widget\n                        src=\"mob.near/widget/ProfileImage\"\n                        props={{\n                          accountId: user.account,\n                          imageClassName: \"rounded-circle w-100 h-100\",\n                          style: {\n                            width: \"24px\",\n                            height: \"24px\",\n                            marginRight: 5,\n                          },\n                        }}\n                      />\n                      <UserName>{user.account}</UserName>\n                    </div>\n                  ),\n                }}\n              />\n\n              <small className=\"text-secondary\">\n                {new Date(user.created_at).toLocaleDateString(\"en-US\", {\n                  day: \"2-digit\",\n                  month: \"short\",\n                })}\n                &middot;\n                {new Date(user.created_at).toLocaleTimeString(\"en-US\", {\n                  hour: \"2-digit\",\n                })}\n              </small>\n            </div>\n          ))\n      ) : (\n        <div>\n          <Loader /> Fetching users\n        </div>\n      )}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rubycop.near/widget/NDC.CommunityScoreboard", "fact_widget_deployments_id": "eb33b32f04f7e7ce231dce75f4d526ae", "inserted_timestamp": "2023-08-30T22:18:42.220Z", "modified_timestamp": "2023-08-30T22:18:42.220Z", "__row_index": 22}