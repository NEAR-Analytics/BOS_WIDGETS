{"tx_hash": "EvfhZVqBu7dXHwQ8JrQ7mjavnjpQEhouv1FQ6A2G2SYQ", "action_id_social": "8pFX5GjZWHyHCKcyF55aZTkZthSkVeepBY6fxnBcbMFr-0-widget", "block_id": 110980687, "block_timestamp": "2024-01-21T18:17:04.474Z", "signer_id": "dapdapbos.near", "widget_name": "Utils.Allowance", "source_code": "const { tokenAddress, owner, spender, decimals, updateAllowance } = props;\n\nconst AllowanceABI = [\n  \"function allowance(address owner, address spender) external view returns (uint256)\",\n];\n\nfunction getAllowance(_tokenAddress, _owner, _spender) {\n  const TokenContract = new ethers.Contract(\n    _tokenAddress,\n    AllowanceABI,\n    Ethers.provider()\n  );\n  TokenContract.allowance(_owner, _spender)\n    .then((allowanceRaw) => {\n      console.info(`get ${_tokenAddress} allowance:`, allowanceRaw.toString());\n\n      //for use: ethers.utils.formatUnits(allowanceRaw,decimals)\n      updateAllowance(allowanceRaw);\n    })\n    .catch((e) => {\n      console.log(\"getAllowance_error\", e);\n    });\n}\n\nif (tokenAddress && owner && spender) {\n  getAllowance(tokenAddress, owner, spender);\n}\n\nreturn \"\";\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dapdapbos.near/widget/Utils.Allowance", "fact_widget_deployments_id": "dd8069efe51174ebccefd9cb34ca8e4d", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}