{"tx_hash": "7LQC4TtBePAtCUUXEiuC4qfJFCrAHi2rgK2NBMTnd645", "action_id_social": "9oKSysswdRBa5gGFZRU8VbqMm9XdadW9sxSMZogikhit-0-widget", "block_id": 119835261, "block_timestamp": "2024-05-27T06:34:38.381Z", "signer_id": "dapdapbos.near", "widget_name": "Staking.Hyperlock.V2Button", "source_code": "const {\n  amount,\n  title,\n  account,\n  id,\n  symbol,\n  price,\n  handler,\n  handleApprove,\n  checkAllowance,\n  onSuccess,\n  onError,\n} = props;\n\nif (Big(amount || 0).eq(0)) {\n  return (\n    <button className=\"button primary\" disabled>\n      Enter An Amount\n    </button>\n  );\n}\n\nif (state.loading) {\n  return (\n    <button className=\"button primary\" disabled>\n      <Widget\n        src=\"bluebiu.near/widget/0vix.LendingLoadingIcon\"\n        props={{\n          size: 16,\n        }}\n      />\n    </button>\n  );\n}\n\nuseEffect(() => {\n  if (title === \"Withdraw\") {\n    State.update({\n      approved: true,\n    });\n    return;\n  }\n  State.update({\n    loading: true,\n  });\n  checkAllowance(amount, (approved) => {\n    State.update({\n      loading: false,\n      approved,\n    });\n  });\n}, [amount]);\n\nreturn (\n  <button\n    className=\"button primary\"\n    disabled={state.loading}\n    onClick={() => {\n      State.update({\n        loading: true,\n      });\n      if (!state.approved) {\n        handleApprove(\n          amount,\n          () => {\n            State.update({\n              loading: false,\n              approved: true,\n            });\n          },\n          () => {\n            State.update({\n              loading: false,\n            });\n          }\n        );\n        return;\n      }\n      handler({\n        type: \"V2\",\n        amount,\n        id,\n        method: title === \"Deposit\" ? \"stake\" : \"unstake\",\n        symbol,\n        price,\n        onSuccess: () => {\n          State.update({\n            loading: false,\n          });\n          onSuccess?.();\n        },\n        onError: () => {\n          State.update({\n            loading: false,\n          });\n          onError?.();\n        },\n      });\n    }}\n  >\n    {state.approved ? title : \"Approve\"}\n  </button>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dapdapbos.near/widget/Staking.Hyperlock.V2Button", "fact_widget_deployments_id": "4658a6cba2cd6d4e8d843c628bfb32a6", "inserted_timestamp": "2024-05-27T08:20:54.371Z", "modified_timestamp": "2024-05-27T09:05:03.748Z", "__row_index": 0}