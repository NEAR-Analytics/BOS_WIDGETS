{"tx_hash": "ADdCy8wS9LTCP87nqHSYFHoG8eRCcsHPpdmAVRAqZnWK", "action_id_social": "DeytzReJNY7W6Jkg6tvS3Ak3Q4rUWdjiYqKURQfc5eqA-0-widget", "block_id": 107355974, "block_timestamp": "2023-12-07T11:35:08.328Z", "signer_id": "dapdapbos.near", "widget_name": "Scroll.Uniswap.Swap.CurrencyInput", "source_code": "// styled area\n\nconst account = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nconst Wrapper = styled.div`\n  border-radius: 16px;\n  padding: 20px;\n  background: var(--input-bg-color);\n  border: 1px solid var(--input-bg-color);\n`;\nconst InputField = styled.div`\n  margin-right: 8px;\n  width: calc(100% - 165px);\n`;\nconst InputWarpper = styled.div`\n  height: 46px;\n  padding: 10px 0px;\n  @media (max-width: 768px) {\n    height: 40px;\n  }\n`;\nconst Input = styled.input`\n  font-size: 32px;\n  color: var(--input-text-color);\n  font-weight: 500;\n  background-color: transparent;\n  outline: none;\n  border: none;\n  height: 40px;\n  vertical-align: bottom;\n  width: 100%;\n  @media (max-width: 768px) {\n    font-size: 32px;\n    line-height: normal;\n  }\n`;\nconst Value = styled.div`\n  padding-top: 10px;\n  color: var(--secondary-text-color);\n  font-size: 14px;\n  line-height: 16px;\n`;\nconst CurrencyField = styled.div`\n  flex-shrink: 0;\n`;\n\nconst CurrencySelect = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: 1px solid var(--currency-border-color);\n  border-radius: 8px;\n  padding: 3px 10px 3px 8px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  cursor: pointer;\n  background: var(--currency-bg-color);\n\n  svg {\n    color: var(--currency-text-color);\n  }\n  @media (max-width: 768px) {\n    svg {\n      width: 12px !important;\n    }\n    padding: 0px 12px 0px 6px;\n  }\n`;\n\nconst CurrencySelectNoToken = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: 1px solid var(--currency-empty-border-color);\n  border-radius: 8px;\n  padding: 6px 10px 6px 10px;\n  background: var(--currency-empty-bg-color);\n  color: var(--currency-empty-text-color);\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  cursor: pointer;\n  svg {\n    color: var(--currency-empty-text-color);\n  }\n  @media (max-width: 768px) {\n    svg {\n      width: 12px !important;\n    }\n    padding: 4px 14px 4px 17px;\n  }\n  &.disabled {\n    opacity: 0.3;\n  }\n`;\n\nconst CurrencyWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 32px;\n  @media (max-width: 768px) {\n    width: calc(100% - 12px);\n  }\n`;\n\nconst CurrencySymbol = styled.div`\n  font-size: 18px;\n  color: var(--currency-text-color);\n  margin-left: 7px;\n  white-space: nowrap;\n  .fz-14 {\n    font-size: 14px;\n  }\n  @media (max-width: 768px) {\n    width: calc(100% - 30px);\n    text-overflow: ellipsis;\n    overflow: hidden;\n    font-size: 14px;\n    .fz-14 {\n      font-size: 12px;\n    }\n  }\n`;\nconst Amount = styled.div`\n  padding-top: 18px;\n  color: var(--secondary-text-color);\n  font-size: 14px;\n  line-height: 16px;\n  text-align: right;\n  cursor: pointer;\n`;\nconst InputLabel = styled.div`\n  color: var(--currency-label-color);\n  font-size: 14px;\n  font-weight: 400;\n  line-height: normal;\n`;\nconst Main = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n`;\n// styled area end\n\nState.init({\n  balanceLoaded: false,\n  balance: \"0\",\n});\n\nconst utils = {\n  balanceFormated: () => {\n    if (!props.currency?.address || !props.isCorrectNetwork) return \"-\";\n    if (!state.balanceLoaded) return \"Loading\";\n    if (state.balance === \"0\" || Big(state.balance).eq(0)) return \"0\";\n    if (Big(state.balance).lt(0.0001)) return \"<0.0001\";\n    return Big(state.balance).toFixed(4, 0);\n  },\n};\n\nconst handlers = {\n  handleDisplayCurrencySelect: () => {\n    if (!props.account) return;\n    State.update({\n      balanceLoaded: false,\n    });\n    props?.onCurrencySelectOpen();\n  },\n  handleInputChange: (ev) => {\n    if (isNaN(Number(ev.target.value))) return;\n    props.onAmountChange?.(ev.target.value);\n  },\n};\n\nreturn (\n  <Wrapper style={{ borderColor: state.inputing ? \"#756b68\" : \"#fff0dd\" }}>\n    {props.account && (\n      <Widget\n        src=\"dapdapbos.near/widget/Uniswap.Swap.CurrencyBalance\"\n        props={{\n          address: props.currency?.address,\n          chainIdNotSupport: !props.isCorrectNetwork,\n          onLoad: (balance) => {\n            State.update({\n              balance: ethers.utils.formatUnits(\n                balance,\n                props.currency.decimals\n              ),\n              balanceLoaded: true,\n            });\n            props?.onUpdateCurrencyBalance(balance);\n          },\n        }}\n      />\n    )}\n    <InputLabel>{props.labelText}</InputLabel>\n    <Main>\n      <InputField>\n        <InputWarpper>\n          <Input\n            value={props.amount}\n            disabled={props.disabled}\n            onChange={handlers.handleInputChange}\n            placeholder=\"0\"\n            onFocus={() => {\n              State.update({\n                inputing: true,\n              });\n            }}\n            onBlur={() => {\n              State.update({\n                inputing: false,\n              });\n            }}\n          />\n        </InputWarpper>\n        <Value>\n          \u2248{\" \"}\n          <Widget\n            src=\"dapdapbos.near/widget/Linea.Uniswap.Swap.FormatValue\"\n            props={{\n              symbol: props.currency.symbol,\n              amount: props.amount,\n              prev: \"$\",\n            }}\n          />\n        </Value>\n      </InputField>\n      <CurrencyField>\n        {props.currency.symbol ? (\n          <CurrencySelect onClick={handlers.handleDisplayCurrencySelect}>\n            <CurrencyWrapper>\n              {props.currency && (\n                <Widget\n                  src=\"dapdapbos.near/widget/Linea.Uniswap.Swap.TokenIcon\"\n                  props={{\n                    size: 22,\n                    token: props.currency,\n                  }}\n                />\n              )}\n              <CurrencySymbol>{props.currency.symbol}</CurrencySymbol>\n            </CurrencyWrapper>\n            <Widget src=\"dapdapbos.near/widget/Uniswap.Swap.ArrowIcon\" />\n          </CurrencySelect>\n        ) : (\n          <CurrencySelectNoToken\n            onClick={handlers.handleDisplayCurrencySelect}\n            className={`${\n              account ? !props.isCorrectNetwork && \"disabled\" : \"\"\n            }`}\n          >\n            <span\n              className=\"fz-14\"\n              style={{\n                whiteSpace: \"nowrap\",\n              }}\n            >\n              Select token\n            </span>\n\n            <Widget src=\"dapdapbos.near/widget/Uniswap.Swap.ArrowIcon\" />\n          </CurrencySelectNoToken>\n        )}\n        <Amount\n          onClick={() => {\n            const formatedBalance = utils.balanceFormated();\n            if (![\"-\", \"Loading\", \"0\"].includes(formatedBalance))\n              props.onAmountChange?.(state.balance);\n          }}\n        >\n          Balance:{\" \"}\n          <span\n            style={{\n              textDecoration: props.disabled ? \"none\" : \"underline\",\n              color: \"#101010\",\n            }}\n          >\n            {utils.balanceFormated()}\n          </span>\n        </Amount>\n      </CurrencyField>\n    </Main>\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dapdapbos.near/widget/Scroll.Uniswap.Swap.CurrencyInput", "fact_widget_deployments_id": "ce25f9eff911c323f25e563503976e0a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}