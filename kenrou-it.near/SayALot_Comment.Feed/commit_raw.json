{"tx_hash": "8968JtfAJfdBKzqDxor1AVWdSPRo4ntnXBVpJKa4GCD6", "action_id_social": "BZQRZmWm3wjRCx5B7BpuvKyiA8vUk3QqHDDrqXjrvgbZ-0-widget", "block_id": 98087312, "block_timestamp": "2023-08-04T22:32:01.371Z", "signer_id": "kenrou-it.near", "widget_name": "SayALot_Comment.Feed", "source_code": "const realArticleId = props.realArticleId;\r\nif (!realArticleId) {\r\n  return \"Article id not provided\";\r\n}\r\n\r\nconst isDebug = props.isDebug;\r\n\r\nconst addressForArticles = isDebug ? \"test_sayALotArticle\" : \"sayALotArticle\";\r\nconst addressForComments = isDebug\r\n  ? \"test_sayalot-comments\"\r\n  : \"sayalot-comments\";\r\nconst authorForWidget = \"sayalot.near\";\r\nState.init({ showReply: false });\r\nconst accountId = props.accountId;\r\nconst blockHeight =\r\n  props.blockHeight === \"now\" ? \"now\" : parseInt(props.blockHeight);\r\nconst content =\r\n  props.content ??\r\n  JSON.parse(\r\n    Social.get(\r\n      `${accountId}/${addressForArticles}/${addressForComments}`,\r\n      blockHeight\r\n    ) ?? \"null\"\r\n  );\r\n\r\nconst parentItem = content.item;\r\nconst highlight = !!props.highlight;\r\nconst raw = !!props.raw;\r\n\r\nconst item = {\r\n  type: \"social\",\r\n  path: `${accountId}/post/comment`,\r\n  blockHeight,\r\n};\r\n\r\n//TODO - adress should be changed\r\nconst link = `#/mob.near/widget/MainPage.Comment.Page?accountId=${accountId}&blockHeight=${blockHeight}`;\r\n\r\nconsole.log(\r\n  \"props: \",\r\n  `{accountId: ${accountId}, blockHeight: ${blockHeight}, link: ${link}, postType: \"comment\" }`\r\n);\r\n\r\nreturn (\r\n  <>\r\n    <div\r\n      className={`pt-3 border-top pb-2 ${\r\n        highlight ? \"bg-warning bg-opacity-10\" : \"\"\r\n      }`}\r\n    >\r\n      <Widget\r\n        src=\"mob.near/widget/MainPage.Post.Header\"\r\n        props={{ accountId, blockHeight, link, postType: \"comment\" }}\r\n      />\r\n      <div className=\"mt-2 text-break\">\r\n        <Widget\r\n          src=\"mob.near/widget/MainPage.Post.Content\"\r\n          props={{ content, raw }}\r\n        />\r\n      </div>\r\n      {blockHeight !== \"now\" && (\r\n        <div className=\"mt-1 d-flex\">\r\n          {parentItem && (\r\n            <Widget\r\n              src=\"mob.near/widget/CommentButton\"\r\n              props={{\r\n                onClick: () => State.update({ showReply: !state.showReply }),\r\n              }}\r\n            />\r\n          )}\r\n\r\n          <Widget\r\n            src={`${authorForWidget}/widget/SayALot_Reactions`}\r\n            props={{\r\n              // notifyAccountId,\r\n              item,\r\n              realArticleId,\r\n              isDebug,\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n    {state.showReply && (\r\n      <div className=\"mb-2\" key=\"reply\">\r\n        <Widget\r\n          src={`${authorForWidget}/widget/SayALot_Comment.Compose`}\r\n          props={{\r\n            isDebug,\r\n            initialText: `${accountId}, `,\r\n            // notifyAccountId: extractNotifyAccountId(parentItem),\r\n            item: parentItem,\r\n            onComment: () => State.update({ showReply: false }),\r\n          }}\r\n        />\r\n      </div>\r\n    )}\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kenrou-it.near/widget/SayALot_Comment.Feed", "fact_widget_deployments_id": "03195ceca1214769b311f85a5ca2c6db", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}