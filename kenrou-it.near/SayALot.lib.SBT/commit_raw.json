{"tx_hash": "HQY7JpJ141nu1oAFxEKD4S4buBpomaJEvaiJ56jrPPE3", "action_id_social": "B2JtcDPMEcK3SRkbFwGmL8wu5peET7ZZm1UiVXgQiPDG-0-widget", "block_id": 102261551, "block_timestamp": "2023-09-30T00:32:23.472Z", "signer_id": "kenrou-it.near", "widget_name": "SayALot.lib.SBT", "source_code": "const { isTest, stateUpdate, libCalls } = props;\n\nlet resultLibCalls = [];\n\nfunction isValidUser(props) {\n  const { accountId, sbtName } = props;\n  console.log(0, accountId);\n  const userSBTs = Near.view(\n    \"registry.i-am-human.near\",\n    \"sbt_tokens_by_owner\",\n    {\n      account: accountId,\n    }\n  );\n\n  const result =\n    userSBTs.find((sbt) => {\n      return sbt[0] === sbtName;\n    }) !== undefined;\n  resultLibCalls = resultLibCalls.filter((call) => {\n    return call.functionName !== \"isValidUser\";\n  });\n  // return true;\n\n  return result;\n}\n\nfunction libCall(call) {\n  if (call.functionName === \"isValidUser\") {\n    return isValidUser(call.props);\n  }\n}\n\nif (libCalls && libCalls.length > 0) {\n  const updateObj = {};\n  resultLibCalls = [...libCalls];\n  libCalls.forEach((call) => {\n    updateObj[call.key] = libCall(call);\n  });\n\n  updateObj.libCalls = resultLibCalls;\n  stateUpdate(updateObj);\n}\n\nreturn <></>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kenrou-it.near/widget/SayALot.lib.SBT", "fact_widget_deployments_id": "e4957e5c6a22889aeb08452ddd0f4c5f", "inserted_timestamp": "2023-09-30T02:33:37.784Z", "modified_timestamp": "2023-09-30T02:33:37.784Z", "__row_index": 36}