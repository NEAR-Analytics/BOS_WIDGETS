{"tx_hash": "3DkLV7EhxJD9APmroYYvzcpXXrhGfurygiwTTjRSRXj8", "action_id_social": "8tqd5BVd6gg8YTyJ8DFcdrRbK4KzuMF6vaCmZchYuhfw-0-widget", "block_id": 116689891, "block_timestamp": "2024-04-12T14:22:14.159Z", "signer_id": "nearblocksonbos.near", "widget_name": "includes.Utils.formats", "source_code": "function MainComponent() {\n  function yoctoToNear(yocto, format) {\n    const YOCTO_PER_NEAR = Big(10).pow(24).toString();\n\n    const near = Big(yocto).div(YOCTO_PER_NEAR).toString();\n\n    return format ? localFormat(near) : near;\n  }\n  function truncateString(str, maxLength, suffix) {\n    if (str.length <= maxLength) {\n      return str;\n    }\n    return str.substring(0, maxLength) + suffix;\n  }\n  function currency(number) {\n    let absNumber = new Big(number).abs();\n\n    const suffixes = ['', 'K', 'M', 'B', 'T', 'Q'];\n    let suffixIndex = 0;\n\n    while (absNumber.gte(1000) && suffixIndex < suffixes.length - 1) {\n      absNumber = absNumber.div(1000); // Divide using big.js's div method\n      suffixIndex++;\n    }\n\n    const formattedNumber = absNumber.toFixed(2); // Format with 2 decimal places\n\n    return (\n      (number < '0' ? '-' : '') + formattedNumber + ' ' + suffixes[suffixIndex]\n    );\n  }\n\n  function dollarFormat(number) {\n    const bigNumber = new Big(number);\n\n    // Format to two decimal places without thousands separator\n    const formattedNumber = bigNumber.toFixed(2);\n\n    // Add comma as a thousands separator\n    const parts = formattedNumber.split('.');\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n    const dollarFormattedNumber = `${parts.join('.')}`;\n\n    return dollarFormattedNumber;\n  }\n\n  function formatCustomDate(inputDate) {\n    var date = new Date(inputDate);\n\n    // Array of month names\n    var monthNames = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec',\n    ];\n\n    // Get month and day\n    var month = monthNames[date.getMonth()];\n    var day = date.getDate();\n\n    // Create formatted date string in \"MMM DD\" format\n    var formattedDate = month + ' ' + (day < 10 ? '0' + day : day);\n\n    return formattedDate;\n  }\n\n  function localFormat(number) {\n    const bigNumber = Big(number);\n    const formattedNumber = bigNumber\n      .toFixed(5)\n      .replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,'); // Add commas before the decimal point\n    return formattedNumber.replace(/\\.?0*$/, ''); // Remove trailing zeros and the dot\n  }\n\n  function priceFormat(number) {\n    const bigNumber = Big(number);\n    const formattedNumber = bigNumber\n      .toFixed(8)\n      .replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,'); // Add commas before the decimal point\n    return formattedNumber.replace(/\\.?0*$/, ''); // Remove trailing zeros and the dot\n  }\n\n  function convertToMetricPrefix(numberStr) {\n    const prefixes = ['', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y']; // Metric prefixes\n\n    let result = new Big(numberStr);\n    let count = 0;\n\n    while (result.abs().gte('1e3') && count < prefixes.length - 1) {\n      result = result.div(1e3);\n      count++;\n    }\n\n    // Check if the value is an integer or has more than two digits before the decimal point\n    if (result.abs().lt(1e2) && result.toFixed(2) !== result.toFixed(0)) {\n      result = result.toFixed(2);\n    } else {\n      result = result.toFixed(0);\n    }\n\n    return result.toString() + ' ' + prefixes[count];\n  }\n\n  function gasFee(gas, price) {\n    const near = yoctoToNear(Big(gas).mul(Big(price)).toString(), true);\n\n    return `${near}`;\n  }\n  function formatNumber(value) {\n    let bigValue = new Big(value);\n    const suffixes = ['', 'K', 'M', 'B', 'T'];\n    let suffixIndex = 0;\n\n    while (bigValue.gte(10000) && suffixIndex < suffixes.length - 1) {\n      bigValue = bigValue.div(1000);\n      suffixIndex++;\n    }\n\n    const formattedValue = bigValue.toFixed(1).replace(/\\.0+$/, '');\n    return `${formattedValue} ${suffixes[suffixIndex]}`;\n  }\n  function getTimeAgoString(timestamp) {\n    const currentUTC = Date.now();\n    const date = new Date(timestamp);\n    const seconds = Math.floor((currentUTC - date.getTime()) / 1000);\n\n    const intervals = {\n      year: seconds / (60 * 60 * 24 * 365),\n      month: seconds / (60 * 60 * 24 * 30),\n      week: seconds / (60 * 60 * 24 * 7),\n      day: seconds / (60 * 60 * 24),\n      hour: seconds / (60 * 60),\n      minute: seconds / 60,\n    };\n\n    if (intervals.year >= 1) {\n      return (\n        Math.floor(intervals.year) +\n        ' year' +\n        (Math.floor(intervals.year) > 1 ? 's' : '') +\n        ' ago'\n      );\n    } else if (intervals.month >= 1) {\n      return (\n        Math.floor(intervals.month) +\n        ' month' +\n        (Math.floor(intervals.month) > 1 ? 's' : '') +\n        ' ago'\n      );\n    } else if (intervals.day >= 1) {\n      return (\n        Math.floor(intervals.day) +\n        ' day' +\n        (Math.floor(intervals.day) > 1 ? 's' : '') +\n        ' ago'\n      );\n    } else if (intervals.hour >= 1) {\n      return (\n        Math.floor(intervals.hour) +\n        ' hour' +\n        (Math.floor(intervals.hour) > 1 ? 's' : '') +\n        ' ago'\n      );\n    } else if (intervals.minute >= 1) {\n      return (\n        Math.floor(intervals.minute) +\n        ' minute' +\n        (Math.floor(intervals.minute) > 1 ? 's' : '') +\n        ' ago'\n      );\n    } else {\n      return 'a few seconds ago';\n    }\n  }\n  function formatWithCommas(number) {\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  }\n  function formatTimestampToString(timestamp) {\n    const date = new Date(timestamp);\n\n    // Format the date to 'YYYY-MM-DD HH:mm:ss' format\n    const formattedDate = date.toISOString().replace('T', ' ').split('.')[0];\n\n    return formattedDate;\n  }\n\n  function convertToUTC(timestamp, hour) {\n    const date = new Date(timestamp);\n\n    // Get UTC date components\n    const utcYear = date.getUTCFullYear();\n    const utcMonth = ('0' + (date.getUTCMonth() + 1)).slice(-2); // Adding 1 because months are zero-based\n    const utcDay = ('0' + date.getUTCDate()).slice(-2);\n    const utcHours = ('0' + date.getUTCHours()).slice(-2);\n    const utcMinutes = ('0' + date.getUTCMinutes()).slice(-2);\n    const utcSeconds = ('0' + date.getUTCSeconds()).slice(-2);\n\n    // Array of month abbreviations\n    const monthAbbreviations = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec',\n    ];\n    const monthIndex = Number(utcMonth) - 1;\n    // Format the date as required (Jul-25-2022 16:25:37)\n    let formattedDate =\n      monthAbbreviations[monthIndex] +\n      '-' +\n      utcDay +\n      '-' +\n      utcYear +\n      ' ' +\n      utcHours +\n      ':' +\n      utcMinutes +\n      ':' +\n      utcSeconds;\n\n    if (hour) {\n      // Convert hours to 12-hour format\n      let hour12 = parseInt(utcHours);\n      const ampm = hour12 >= 12 ? 'PM' : 'AM';\n      hour12 = hour12 % 12 || 12;\n\n      // Add AM/PM to the formatted date (Jul-25-2022 4:25:37 PM)\n      formattedDate =\n        monthAbbreviations[monthIndex] +\n        '-' +\n        utcDay +\n        '-' +\n        utcYear +\n        ' ' +\n        hour12 +\n        ':' +\n        utcMinutes +\n        ':' +\n        utcSeconds +\n        ' ' +\n        ampm;\n    }\n\n    return formattedDate;\n  }\n\n  function weight(number) {\n    let sizeInBytes = new Big(number);\n\n    if (sizeInBytes.lt(0)) {\n      throw new Error('Invalid input. Please provide a non-negative number.');\n    }\n\n    const suffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    let suffixIndex = 0;\n\n    while (sizeInBytes.gte(1000) && suffixIndex < suffixes.length - 1) {\n      sizeInBytes = sizeInBytes.div(1000); // Assign the result back to sizeInBytes\n      suffixIndex++;\n    }\n\n    const formattedSize = sizeInBytes.toFixed(2) + ' ' + suffixes[suffixIndex];\n\n    return formattedSize;\n  }\n\n  function capitalizeWords(str) {\n    const words = str.split('_');\n    const capitalizedWords = words.map(\n      (word) => word.charAt(0).toUpperCase() + word.slice(1),\n    );\n    const result = capitalizedWords.join(' ');\n    return result;\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  function capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  function toSnakeCase(str) {\n    return str\n      .replace(/[A-Z]/g, (match) => '_' + match.toLowerCase())\n      .replace(/^_/, '');\n  }\n\n  function dollarNonCentFormat(number) {\n    const bigNumber = new Big(number).toFixed(0);\n\n    // Extract integer part and format with commas\n    const integerPart = bigNumber.toString();\n    const formattedInteger = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n    return formattedInteger;\n  }\n\n  function serialNumber(index, page, perPage) {\n    return index + 1 + (page - 1) * perPage;\n  }\n\n  function shortenToken(token) {\n    return truncateString(token, 14, '');\n  }\n\n  function shortenTokenSymbol(token) {\n    return truncateString(token, 5, '');\n  }\n\n  function gasPercentage(gasUsed, gasAttached) {\n    if (!gasAttached) return 'N/A';\n\n    const formattedNumber = (Big(gasUsed).div(Big(gasAttached)) * 100).toFixed(\n      2,\n    );\n    return `${formattedNumber}%`;\n  }\n\n  function shortenHex(address) {\n    return `${address && address.substr(0, 6)}...${address.substr(-4)}`;\n  }\n  function formatDate(dateString) {\n    const inputDate = new Date(dateString);\n\n    const days = [\n      'Sunday',\n      'Monday',\n      'Tuesday',\n      'Wednesday',\n      'Thursday',\n      'Friday',\n      'Saturday',\n    ];\n    const months = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December',\n    ];\n\n    const dayOfWeek = days[inputDate.getDay()];\n    const month = months[inputDate.getMonth()];\n    const day = inputDate.getDate();\n    const year = inputDate.getFullYear();\n\n    const formattedDate = dayOfWeek + ', ' + month + ' ' + day + ', ' + year;\n    return formattedDate;\n  }\n  return {\n    currency,\n    dollarFormat,\n    formatCustomDate,\n    localFormat,\n    convertToMetricPrefix,\n    gasFee,\n    getTimeAgoString,\n    formatWithCommas,\n    formatTimestampToString,\n    convertToUTC,\n    weight,\n    capitalizeWords,\n    capitalizeFirstLetter,\n    capitalize,\n    toSnakeCase,\n    dollarNonCentFormat,\n    serialNumber,\n    shortenToken,\n    shortenTokenSymbol,\n    gasPercentage,\n    shortenHex,\n    formatNumber,\n    formatDate,\n    priceFormat,\n  };\n}\n\nreturn MainComponent(props, context);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/includes.Utils.formats", "fact_widget_deployments_id": "527952cc058ce85ab635c0cd12af301f", "inserted_timestamp": "2024-04-12T15:35:37.051Z", "modified_timestamp": "2024-04-12T15:35:37.051Z", "__row_index": 0}