{"tx_hash": "75BP5KmofCYS4exbem82jZF5PdMenPh6ckstkPnePSAs", "action_id_social": "E8QtqzHCXmGmSDyKVLTkRbtTVmD5CQgNhrUXTJc72ntg-0-widget", "block_id": 119546004, "block_timestamp": "2024-05-23T06:47:31.801Z", "signer_id": "nearblocksonbos.near", "widget_name": "includes.Common.Receipts.RlpTransaction", "source_code": "\n\n\n\nfunction MainComponent({ pretty }) {\n  const decoded = pretty && Buffer.from(pretty, 'base64');\n  const parsed = decoded && JSON.parse(decoded.toString());\n\n  const [format, setFormat] = useState('rlp');\n\n  function decodeTransaction(parsed) {\n    if (!parsed || !parsed.tx_bytes_b64) {\n      return;\n    }\n    const input = ethers.utils.base64.decode(parsed.tx_bytes_b64);\n\n    const data = ethers.utils.parseTransaction(input);\n\n    data.value = data.value.toString();\n    data.gasPrice = data.gasPrice.toNumber();\n    data.gasLimit = data.gasLimit.toNumber();\n\n    parsed.tx_bytes_b64 = data;\n\n    return parsed;\n  }\n\n  const [displayedArgs, setDisplayedArgs] = useState(\n    parsed && JSON.stringify(decodeTransaction(parsed), null, 2),\n  );\n\n  const handleFormatChange = (event) => {\n    const selectedFormat = event.target.value;\n    setFormat(selectedFormat);\n    let transformedArgs;\n    switch (selectedFormat) {\n      case 'rlp':\n        const data = decodeTransaction(parsed);\n        transformedArgs = data && JSON.stringify(data, null, 2);\n        break;\n      case 'table':\n        const tableData = decodeTransaction(parsed);\n        transformedArgs = tableData && tableData?.tx_bytes_b64;\n        break;\n      default:\n        transformedArgs = parsed && JSON.stringify(parsed, null, 2);\n    }\n    setDisplayedArgs(transformedArgs);\n  };\n\n  return (\n    <>\n      <>\n        {format === 'table' ? (\n          <div\n            className=\"table-container overflow-auto border rounded-lg bg-gray-100 dark:bg-black-200 dark:border-black-200 p-3 mt-3\"\n            style={{ height: '150px' }}\n          >\n            <table className=\"table-auto w-full border-collapse\">\n              <thead>\n                <tr>\n                  <th className=\"border px-4 py-2\">Name</th>\n                  <th className=\"border px-4 py-2\">Data</th>\n                </tr>\n              </thead>\n              <tbody>\n                {displayedArgs &&\n                  Object.entries(displayedArgs).map(([key, value]) => (\n                    <tr key={key}>\n                      <td className=\"border px-4 py-2\">{key}</td>\n                      <td className=\"border px-4 py-2\">\n                        {JSON.stringify(value)}\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          <textarea\n            readOnly\n            rows={4}\n            value={displayedArgs}\n            className=\"block appearance-none outline-none w-full border rounded-lg bg-gray-100 dark:bg-black-200 dark:border-black-200  p-3 mt-3 resize-y\"\n          ></textarea>\n        )}\n        <select\n          className=\"opacity-2 pr-5 pl-1 mt-2 border rounded-md mb-2 text-sm focus:outline-none\"\n          value={format}\n          onChange={handleFormatChange}\n        >\n          <option value=\"default\">Default View</option>\n          <option value=\"rlp\">RLP Decoded</option>\n          <option value=\"table\">Table View</option>\n        </select>\n      </>\n    </>\n  );\n}\n\nreturn MainComponent(props, context);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/includes.Common.Receipts.RlpTransaction", "fact_widget_deployments_id": "9e38e9176016ee973c654f015f05db3b", "inserted_timestamp": "2024-05-23T08:51:25.517Z", "modified_timestamp": "2024-05-23T08:51:25.517Z", "__row_index": 0}