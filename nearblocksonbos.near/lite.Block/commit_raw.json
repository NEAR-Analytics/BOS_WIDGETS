{"tx_hash": "FvdRP1PiPmnptX7mFcnPuhYGERZRiajbKdrNWBasgZJb", "action_id_social": "56iEW1bdwo8f8XNCtUHwY4sJdoetA6bLcHayHpWeubQn-0-widget", "block_id": 121020858, "block_timestamp": "2024-06-12T18:24:59.507Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.Block", "source_code": "let ErrorSkeleton = window?.ErrorSkeleton || (() => <></>);\nlet BlockSkeleton = window?.BlockSkeleton || (() => <></>);\nlet Skeleton = window?.Skeleton || (({ children }) => <>{children}</>);\nconst Block = ({ hash, rpcUrl }) => {\n  let { rpcFetch } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.fetcher`\n  );\n  let { nsToDateTime, yoctoToNear, yoctoToTgas } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.convertor`\n  );\n  let { formatNumber } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.formatter`\n  );\n  let { shortenString } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.utils`\n  );\n  if (\n    !rpcFetch ||\n    !nsToDateTime ||\n    !yoctoToNear ||\n    !yoctoToTgas ||\n    !formatNumber ||\n    !shortenString\n  )\n    return <BlockSkeleton />;\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [block, setBlock] = useState(null);\n  useEffect(() => {\n    if (rpcFetch && rpcUrl && hash) {\n      const blockId = !isNaN(Number(hash)) ? Number(hash) : hash;\n      rpcFetch(rpcUrl, \"block\", { block_id: blockId })\n        .then((response) => setBlock(response))\n        .catch(setError)\n        .finally(() => setLoading(false));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hash, rpcUrl]);\n  const gas = useMemo(() => {\n    let limit = 0;\n    let used = 0;\n    let fee = \"0\";\n    if (block) {\n      limit = block.chunks.reduce((acc, curr) => acc + curr.gas_limit, 0);\n      used = block.chunks.reduce((acc, curr) => acc + curr.gas_used, 0);\n      fee = Big(used).mul(Big(block.header.gas_price)).toString();\n    }\n    return { fee, limit, used };\n  }, [block]);\n  if (error) {\n    return (\n      <Widget\n        key=\"error\"\n        loading={<ErrorSkeleton />}\n        props={{ title: \"Error Fetching Block\" }}\n        src={`nearblocksonbos.near/widget/lite.Atoms.Error`}\n      />\n    );\n  }\n  return (\n    <div className=\"relative container mx-auto\">\n      <div className=\"pt-7 pb-[26px] px-5\">\n        <Skeleton className=\"block h-[48px] lg:h-[54px] w-56\" loading={loading}>\n          <h1 className=\"flex items-center font-heading font-medium text-[32px] lg:text-[36px] tracking-[0.1px] mr-4\">\n            {formatNumber(String(block?.header.height ?? 0), 2)}\n            <Widget\n              key=\"copy\"\n              props={{\n                buttonClassName: \"ml-3\",\n                className: \"text-primary w-6\",\n                text: String(block?.header.height),\n              }}\n              src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n            />\n          </h1>\n        </Skeleton>\n      </div>\n      <div className=\"flex flex-wrap\">\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Hash</h2>\n          <Skeleton\n            className=\"block h-[39px] w-48 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: shortenString(block?.header.hash ?? \"\"),\n                  tooltip: block?.header.hash,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n              <Widget\n                key=\"copy\"\n                props={{\n                  buttonClassName: \"ml-1\",\n                  className: \"text-primary w-4\",\n                  text: block?.header.hash,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Time</h2>\n          <Skeleton\n            className=\"block h-[39px] w-60 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[24px]\">\n              {nsToDateTime(\n                block?.header.timestamp_nanosec ?? \"0\",\n                \"DD/MM/YY hh:mm:ss AA\"\n              )}\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Author</h2>\n          <Skeleton\n            className=\"block h-[39px] w-52 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: (\n                    <Link href={`/address/${block?.author}`}>\n                      {shortenString(block?.author ?? \"\")}\n                    </Link>\n                  ),\n                  tooltip: block?.author,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n              <Widget\n                key=\"copy\"\n                props={{\n                  buttonClassName: \"ml-1\",\n                  className: \"text-primary w-4\",\n                  text: block?.author,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Gas Used</h2>\n          <Skeleton\n            className=\"block h-[39px] w-32 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToTgas(String(gas.used)), 0)} Tgas\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Gas Price</h2>\n          <Skeleton\n            className=\"block h-[39px] w-48 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToTgas(block?.header.gas_price ?? \"0\"), 4)} \u24c3 /\n              Tgas\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Gas Limit</h2>\n          <Skeleton\n            className=\"block h-[39px] w-36 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToTgas(String(gas.limit)), 0)} Tgas\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Gas Fee</h2>\n          <Skeleton\n            className=\"block h-[39px] w-36 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToNear(gas.fee), 6)} \u24c3\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Shards</h2>\n          <Skeleton\n            className=\"block h-[39px] w-10 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              {block?.header.chunks_included ?? 0}\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Parent Hash</h2>\n          <Skeleton\n            className=\"block h-[39px] w-48 overflow-hidden\"\n            loading={loading}\n          >\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: (\n                    <Link href={`/blocks/${block?.header.prev_hash}`}>\n                      {shortenString(block?.header.prev_hash ?? \"\")}\n                    </Link>\n                  ),\n                  tooltip: block?.header.prev_hash,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n              <Widget\n                key=\"copy\"\n                props={{\n                  buttonClassName: \"ml-1\",\n                  className: \"text-primary w-4\",\n                  text: block?.header.prev_hash,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n      </div>\n    </div>\n  );\n};\nreturn Block(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.Block", "fact_widget_deployments_id": "1dd8875d397b4c29a4f842dc77a0f2b9", "inserted_timestamp": "2024-06-12T20:05:24.439Z", "modified_timestamp": "2024-06-12T20:05:24.439Z", "__row_index": 0}