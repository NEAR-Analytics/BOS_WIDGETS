{"tx_hash": "FvdRP1PiPmnptX7mFcnPuhYGERZRiajbKdrNWBasgZJb", "action_id_social": "56iEW1bdwo8f8XNCtUHwY4sJdoetA6bLcHayHpWeubQn-0-widget", "block_id": 121020858, "block_timestamp": "2024-06-12T18:24:59.507Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.Txn", "source_code": "let ErrorSkeleton = window?.ErrorSkeleton || (() => <></>);\nlet TxnSkeleton = window?.TxnSkeleton || (() => <></>);\nlet TxnTabsSkeleton = window?.TxnTabsSkeleton || (() => <></>);\nlet Skeleton = window?.Skeleton || (({ children }) => <>{children}</>);\nconst Txn = ({ hash, rpcUrl }) => {\n  let { rpcFetch } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.fetcher`\n  );\n  let { nsToDateTime, yoctoToNear } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.convertor`\n  );\n  let { formatNumber } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.formatter`\n  );\n  let { depositAmount, shortenString, txnFee } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.utils`\n  );\n  if (\n    !rpcFetch ||\n    !nsToDateTime ||\n    !yoctoToNear ||\n    !formatNumber ||\n    !depositAmount ||\n    !shortenString ||\n    !txnFee\n  )\n    return <TxnSkeleton />;\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState({\n    block: true,\n    txn: true,\n  });\n  const [txn, setTxn] = useState(null);\n  const [block, setBlock] = useState(null);\n  useEffect(() => {\n    if (rpcFetch && rpcUrl && hash) {\n      rpcFetch(rpcUrl, \"tx\", {\n        sender_account_id: \"bowen\",\n        tx_hash: hash,\n        wait_until: \"NONE\",\n      })\n        .then((response) => {\n          setTxn(response);\n          rpcFetch(rpcUrl, \"block\", {\n            block_id: response.transaction_outcome.block_hash,\n          })\n            .then((response) => setBlock(response))\n            .catch(setError)\n            .finally(() => setLoading((state) => ({ ...state, block: false })));\n        })\n        .catch(setError)\n        .finally(() => setLoading((state) => ({ ...state, txn: false })));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hash, rpcUrl]);\n  if (error) {\n    return (\n      <Widget\n        key=\"error\"\n        loading={<ErrorSkeleton />}\n        props={{ title: \"Error Fetching Txn\" }}\n        src={`nearblocksonbos.near/widget/lite.Atoms.Error`}\n      />\n    );\n  }\n  return (\n    <div className=\"relative container mx-auto\">\n      <div className=\"pt-7 pb-[26px] px-5\">\n        <Skeleton\n          className=\"block h-[48px] lg:h-[54px] w-[300px]\"\n          loading={loading.txn}\n        >\n          <h1 className=\"flex items-center font-heading font-medium text-[32px] lg:text-[36px] tracking-[0.1px] mr-4\">\n            <span className=\"truncate\">{shortenString(hash)}</span>\n            <Widget\n              key=\"copy\"\n              props={{\n                buttonClassName: \"ml-3\",\n                className: \"text-primary w-6\",\n                text: hash,\n              }}\n              src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n            />\n          </h1>\n        </Skeleton>\n      </div>\n      <div className=\"flex flex-wrap\">\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">From</h2>\n          <Skeleton className=\"block h-[39px] w-[200px]\" loading={loading.txn}>\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: (\n                    <Link href={`/address/${txn?.transaction.signer_id}`}>\n                      {shortenString(txn?.transaction.signer_id ?? \"\")}\n                    </Link>\n                  ),\n                  tooltip: txn?.transaction.signer_id,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n              <Widget\n                key=\"copy\"\n                props={{\n                  buttonClassName: \"ml-1\",\n                  className: \"text-primary w-4\",\n                  text: txn?.transaction.signer_id,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">To</h2>\n          <Skeleton className=\"block h-[39px] w-[200px]\" loading={loading.txn}>\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: (\n                    <Link href={`/address/${txn?.transaction.receiver_id}`}>\n                      {shortenString(txn?.transaction.receiver_id ?? \"\")}\n                    </Link>\n                  ),\n                  tooltip: txn?.transaction.receiver_id,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n              <Widget\n                key=\"copy\"\n                props={{\n                  buttonClassName: \"ml-1\",\n                  className: \"text-primary w-4\",\n                  text: txn?.transaction.receiver_id,\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Block</h2>\n          <Skeleton className=\"block h-[39px] w-32\" loading={loading.block}>\n            <div className=\"font-heading font-medium text-[26px]\">\n              <Widget\n                key=\"tooltip\"\n                props={{\n                  children: (\n                    <Link href={`/blocks/${block?.header.height}`}>\n                      {formatNumber(String(block?.header.height ?? 0), 0)}\n                    </Link>\n                  ),\n                  tooltip: (\n                    <span>\n                      <span className=\"mr-1\">{block?.header.hash}</span>\n                      <Widget\n                        key=\"copy\"\n                        loading={<span className=\"block w-4 h-4 truncate\" />}\n                        props={{\n                          buttonClassName: \"h-4 align-text-bottom\",\n                          className: \"w-4\",\n                          text: block?.header.hash,\n                        }}\n                        src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n                      />\n                    </span>\n                  ),\n                }}\n                src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n              />\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Time</h2>\n          <Skeleton\n            className=\"block h-[39px] w-[280px]\"\n            loading={loading.block}\n          >\n            <div className=\"font-heading font-medium text-[24px]\">\n              {nsToDateTime(\n                block?.header.timestamp_nanosec ?? \"0\",\n                \"DD/MM/YY hh:mm:ss AA\"\n              )}\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Amount</h2>\n          <Skeleton className=\"block h-[39px] w-28\" loading={loading.txn}>\n            <div className=\"font-heading font-medium text-[24px]\">\n              {formatNumber(\n                yoctoToNear(depositAmount(txn?.transaction.actions ?? [])),\n                6\n              )}{\" \"}\n              \u24c3\n            </div>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Fee</h2>\n          <Skeleton className=\"block h-[39px] w-[140px]\" loading={loading.txn}>\n            <div className=\"font-heading font-medium text-[24px]\">\n              {formatNumber(\n                yoctoToNear(\n                  txnFee(\n                    txn?.receipts_outcome ?? [],\n                    txn?.transaction_outcome.outcome.tokens_burnt ?? \"0\"\n                  )\n                ),\n                6\n              )}{\" \"}\n              \u24c3\n            </div>\n          </Skeleton>\n        </div>\n      </div>\n      <Widget\n        key=\"tabs\"\n        loading={<TxnTabsSkeleton />}\n        props={{ hash, rpcUrl }}\n        src={`nearblocksonbos.near/widget/lite.Txn.Tabs`}\n      />\n    </div>\n  );\n};\nreturn Txn(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.Txn", "fact_widget_deployments_id": "2b64b1d802a0c53fe2962dae041c2100", "inserted_timestamp": "2024-06-12T20:05:24.439Z", "modified_timestamp": "2024-06-12T20:05:24.439Z", "__row_index": 0}