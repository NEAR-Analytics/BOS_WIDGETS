{"tx_hash": "FvdRP1PiPmnptX7mFcnPuhYGERZRiajbKdrNWBasgZJb", "action_id_social": "56iEW1bdwo8f8XNCtUHwY4sJdoetA6bLcHayHpWeubQn-0-widget", "block_id": 121020858, "block_timestamp": "2024-06-12T18:24:59.507Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.Txn.Action", "source_code": "let TxnActionSkeleton = window?.TxnActionSkeleton || (() => <></>);\nlet JsonView = window?.JsonView || (({ children }) => <pre>{children}</pre>);\nconst kind = {\n  addKey: {\n    bg: \"bg-bg-key-add\",\n    text: \"Access Key Created\",\n  },\n  createAccount: {\n    bg: \"bg-bg-account-add\",\n    text: \"Account Created\",\n  },\n  delegateAction: {\n    bg: \"bg-bg-function\",\n    text: \"Delegate Action\",\n  },\n  deleteAccount: {\n    bg: \"bg-bg-account-delete\",\n    text: \"Account Deleted\",\n  },\n  deleteKey: {\n    bg: \"bg-bg-key-delete\",\n    text: \"Access Key Deleted\",\n  },\n  deployContract: {\n    bg: \"bg-bg-contract\",\n    text: \"Contract Deployed\",\n  },\n  functionCall: {\n    bg: \"bg-bg-function\",\n    text: \"\",\n  },\n  stake: {\n    bg: \"bg-bg-stake\",\n    text: \"Restake\",\n  },\n  transfer: {\n    bg: \"bg-bg-transfer\",\n    text: \"Transfer\",\n  },\n};\nconst prettify = (args) => {\n  try {\n    return JSON.stringify(JSON.parse(atob(args)), undefined, 2);\n  } catch (error) {\n    return args;\n  }\n};\nconst Action = ({ action, open, setOpen }) => {\n  let { yoctoToNear } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.convertor`\n  );\n  let { formatNumber } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.formatter`\n  );\n  let { shortenString } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.utils`\n  );\n  if (!yoctoToNear || !formatNumber || !shortenString)\n    return <TxnActionSkeleton />;\n  const method =\n    action.kind === \"functionCall\"\n      ? action.args.methodName\n      : kind[action.kind].text;\n  const args = useMemo(() => {\n    if (action.kind === \"functionCall\" && action.args.args) {\n      return prettify(action.args.args);\n    }\n    return \"\";\n  }, [action]);\n  return (\n    <div>\n      <button\n        className={`h-7 text-sm text-black rounded py-1 px-3 ${\n          kind[action.kind].bg\n        }`}\n        onClick={() => setOpen((o) => !o)}\n      >\n        {method.length > 22 ? (\n          <Widget\n            key=\"tooltip\"\n            props={{\n              children: shortenString(method, 10, 10, 22),\n              tooltip: method,\n            }}\n            src={`nearblocksonbos.near/widget/lite.Atoms.Tooltip`}\n          />\n        ) : (\n          method\n        )}\n        <span className=\"inline-flex items-center justify-center w-3\">\n          {open ? \"-\" : \"+\"}\n        </span>\n      </button>\n      <span className=\"font-semibold text-xs\">\n        {action.kind === \"transfer\"\n          ? `${formatNumber(yoctoToNear(action.args.deposit), 6)} \u24c3`\n          : null}\n      </span>\n      {open && args && (\n        <div className=\"px-4 py-6\">\n          <JsonView>{args}</JsonView>\n        </div>\n      )}\n    </div>\n  );\n};\nreturn Action(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.Txn.Action", "fact_widget_deployments_id": "4f4be486f3dffa483d26e31a36cfcac9", "inserted_timestamp": "2024-06-12T20:05:24.439Z", "modified_timestamp": "2024-06-12T20:05:24.439Z", "__row_index": 2}