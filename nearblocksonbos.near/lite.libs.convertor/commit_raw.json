{"tx_hash": "6QZKTQHJbre9RsdmjAPKxGwwcR2bYwQDLnUGpuRG34cF", "action_id_social": "9CYpW14k6hNHfEBSLQSDxhZmU9mbaJCyTqEAsgxqMx72-0-widget", "block_id": 120910813, "block_timestamp": "2024-06-11T06:41:50.245Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.libs.convertor", "source_code": "const YOCTO_PER_NEAR = Big(10).pow(24);\nconst MS_PER_NS = Big(10).pow(6);\nconst T_GAS = Big(10).pow(12);\nconst convertor = () => {\n  const yoctoToNear = (value) => {\n    const yocto = Big(value);\n    return yocto.div(YOCTO_PER_NEAR).toString();\n  };\n  const yoctoToTgas = (value) => {\n    const near = Big(yoctoToNear(value));\n    return near.mul(T_GAS).toString();\n  };\n  const nsToMs = (value) => {\n    const ns = Big(value);\n    return ns.div(MS_PER_NS).toNumber();\n  };\n  const nsToDateTime = (value, format) => {\n    const date = new Date(nsToMs(value));\n    const year = date.getFullYear().toString();\n    const year2 = date.getFullYear().toString().slice(2);\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n    const day = date.getDate().toString().padStart(2, \"0\");\n    const hour = date.getHours();\n    const hour12 = (hour % 12 || 12).toString().padStart(2, \"0\");\n    const minute = date.getMinutes().toString().padStart(2, \"0\");\n    const second = date.getSeconds().toString().padStart(2, \"0\");\n    const ampm = hour >= 12 ? \"PM\" : \"AM\";\n    const replacements = {\n      YYYY: year,\n      YY: year2,\n      MM: month,\n      DD: day,\n      HH: hour.toString().padStart(2, \"0\"),\n      hh: hour12,\n      mm: minute,\n      ss: second,\n      AA: ampm,\n    };\n    let formatted = format;\n    for (const [token, value] of Object.entries(replacements)) {\n      formatted = formatted.replace(token, value);\n    }\n    return formatted;\n  };\n  const nsToTimeAgo = (value) => {\n    const now = new Date().getTime();\n    const diff = now - nsToMs(value);\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const week = day * 7;\n    const month = day * 30;\n    const year = day * 365;\n    const intervals = [\n      { value: second, unit: \"second\" },\n      { value: minute, unit: \"minute\" },\n      { value: hour, unit: \"hour\" },\n      { value: day, unit: \"day\" },\n      { value: week, unit: \"week\" },\n      { value: month, unit: \"month\" },\n      { value: year, unit: \"year\" },\n    ];\n    for (const interval of intervals) {\n      if (diff >= interval.value) {\n        const count = Math.floor(diff / interval.value);\n        return `${count} ${interval.unit}${count > 1 ? \"s\" : \"\"} ago`;\n      }\n    }\n    return \"just now\";\n  };\n  return { nsToMs, nsToDateTime, nsToTimeAgo, yoctoToNear, yoctoToTgas };\n};\nreturn convertor(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.libs.convertor", "fact_widget_deployments_id": "cdb1e36c72f6efef5bea038732464bad", "inserted_timestamp": "2024-06-11T08:04:49.294Z", "modified_timestamp": "2024-06-11T08:04:49.294Z", "__row_index": 0}