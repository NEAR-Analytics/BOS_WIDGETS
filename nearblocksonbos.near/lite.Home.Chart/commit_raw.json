{"tx_hash": "FvdRP1PiPmnptX7mFcnPuhYGERZRiajbKdrNWBasgZJb", "action_id_social": "56iEW1bdwo8f8XNCtUHwY4sJdoetA6bLcHayHpWeubQn-0-widget", "block_id": 121020858, "block_timestamp": "2024-06-12T18:24:59.507Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.Home.Chart", "source_code": "let HomeChartSkeleton = window?.HomeChartSkeleton || (() => <></>);\nconst Chart = () => {\n  let { apiFetch } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.fetcher`\n  );\n  let { formatNumber } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.formatter`\n  );\n  if (!apiFetch || !formatNumber) return <HomeChartSkeleton />;\n  const [charts, setCharts] = useState(null);\n  useEffect(() => {\n    if (apiFetch) {\n      apiFetch(`https://api.nearblocks.io/v1/charts/latest`)\n        .then((response) => setCharts(response?.charts))\n        .catch(console.log);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const srcDoc = useMemo(() => {\n    let series = [];\n    let categories = [];\n    if (charts?.length) {\n      series = charts?.map((chart) => ({\n        date: new Date(chart.date).toLocaleDateString(\"en-US\", {\n          day: \"numeric\",\n          month: \"short\",\n          weekday: \"long\",\n          year: \"numeric\",\n        }),\n        price: `$${formatNumber(chart.near_price ?? \"0\", 2)}`,\n        txns: formatNumber(chart.txns, 0),\n        y: Number(chart.txns),\n      }));\n      series.reverse();\n      categories = series.map((stat) => stat.date);\n    }\n    return `\n      <html>\n        <head>\n          <title>Highcharts Line Chart</title>\n          <script src=\"https://cdn.jsdelivr.net/npm/highcharts@11.4.3/highcharts.min.js\"></script>\n        </head>\n        <body style=\"margin: 0\">\n          <div id=\"container\" style=\"width: 100%; height: 280px\"></div>\n          <script>\n            document.addEventListener(\"DOMContentLoaded\", function () {\n              Highcharts.chart(\"container\", {\n                chart: {\n                  spacingTop: 0,\n                  spacingBottom: 0,\n                  spacingLeft: 0,\n                  spacingRight: 0,\n                  backgroundColor: \"transparent\"\n                },\n                title: {\n                  text: undefined,\n                },\n                xAxis: {\n                  visible: false,\n                  categories: ${JSON.stringify(categories)},\n                },\n                yAxis: {\n                  visible: false,\n                },\n                series: [\n                  {\n                    name: \"Transactions\",\n                    type: \"spline\",\n                    data: ${JSON.stringify(series)},\n                    lineWidth: 3\n                  },\n                ],\n                tooltip: {\n                  formatter: function () {\n                    return '<span style=\"font-size:10px\">' + this.point.date + '</span><br/>${\n                      context.networkId === \"testnet\"\n                        ? \"\"\n                        : \"Price: <b>' + this.point.price + '</b><br/>\"\n                    }Transactions: <b>' + this.point.txns + '</b>'\n                  }\n                },\n                legend: {\n                  enabled: false,\n                },\n                plotOptions: {\n                  spline: {\n                    marker: {\n                      radius: 0,\n                      states: {\n                        hover: {\n                          radius: 4\n                        }\n                      }\n                    },\n                  },\n                },\n                exporting: {\n                  enabled: false,\n                },\n                credits: {\n                  enabled: false,\n                },\n              });\n            });\n          </script>\n        </body>\n      </html>\n    `;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [charts]);\n  return (\n    <div className=\"flex flex-col pt-4 pb-6\">\n      <iframe\n        className=\"w-full overflow-hidden border-none\"\n        srcDoc={srcDoc}\n        style={{ height: 280 }}\n      />\n    </div>\n  );\n};\nreturn Chart(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.Home.Chart", "fact_widget_deployments_id": "c1d42a145788c5c2ff19019ccb6bff0a", "inserted_timestamp": "2024-06-12T20:05:24.439Z", "modified_timestamp": "2024-06-12T20:05:24.439Z", "__row_index": 0}