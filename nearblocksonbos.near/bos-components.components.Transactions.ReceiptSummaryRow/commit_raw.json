{"tx_hash": "GB3MvHqdCyxDCMF5oXzpF6WGwhKta1Y2NgKcQwe5W71X", "action_id_social": "24tc8D2LdfUiy5CCgP9UFxJdbzC8qxkQ6FNcxT1mms1E-0-widget", "block_id": 120863299, "block_timestamp": "2024-06-10T15:25:41.042Z", "signer_id": "nearblocksonbos.near", "widget_name": "bos-components.components.Transactions.ReceiptSummaryRow", "source_code": "/**\n * Component: TransactionsReceiptSummaryRow\n * Author: Nearblocks Pte Ltd\n * License: Business Source License 1.1\n * Description: Details of Transaction Receipt Summary Row on Near Protocol.\n * @interface Props\n * @param {string} [network] - The network data to show, either mainnet or testnet\n * @param {Function} [t] - A function for internationalization (i18n) provided by the next-translate package.\n * @param {RPCTransactionInfo} [rpcTxn] - RPC data of the transaction.\n * @param {TransactionInfo} [txn] - Information related to a transaction.\n * @param {ReceiptsPropsInfo} [receipt] -  receipt of the transaction.\n * @param {string} ownerId - The identifier of the owner of the component.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* INCLUDE COMPONENT: \"includes/icons/FaLongArrowAltRight.jsx\" */\nconst FaLongArrowAltRight = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\">\n      <path\n        d=\"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216\"\n        fill=\"#ffffff\"\n      />\n    </svg>\n  );\n};/* END_INCLUDE COMPONENT: \"includes/icons/FaLongArrowAltRight.jsx\" */\n/* INCLUDE COMPONENT: \"includes/Common/Skeleton.jsx\" */\n/**\n * @interface Props\n * @param {string} [className] - The CSS class name(s) for styling purposes.\n */\n\n\n\n\n\nconst Skeleton = (props) => {\n  return (\n    <div\n      className={`bg-gray-200 dark:bg-black-200 rounded shadow-sm animate-pulse ${props.className}`}\n    ></div>\n  );\n};/* END_INCLUDE COMPONENT: \"includes/Common/Skeleton.jsx\" */\n\nfunction MainComponent(props) {\n  const { network, receipt, ownerId, txn } = props;\n\n  const { getConfig, handleRateLimit, yoctoToNear, fiatValue } = VM.require(\n    `${ownerId}/widget/includes.Utils.libs`,\n  );\n\n  const { convertToMetricPrefix } = VM.require(\n    `${ownerId}/widget/includes.Utils.formats`,\n  );\n\n  const [statsData, setStatsData] = useState({} );\n  const config = getConfig && getConfig(network);\n  useEffect(() => {\n    function fetchStatsDatas() {\n      if (txn) {\n        asyncFetch(`${config.backendUrl}stats`)\n          .then(\n            (res\n\n\n\n\n) => {\n              const resp = res?.body?.stats?.[0];\n              if (res.status === 200) {\n                setStatsData(resp);\n              } else {\n                handleRateLimit(res, fetchStatsDatas);\n              }\n            },\n          )\n          .catch(() => {});\n      }\n    }\n\n    if (config.backendUrl) {\n      fetchStatsDatas();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [txn, config.backendUrl]);\n\n  const currentPrice = statsData?.near_price || 0;\n  function formatActionKind(actionKind) {\n    return actionKind.replace(/([a-z])([A-Z])/g, '$1 $2');\n  }\n  const getGasAttached = (actions) => {\n    const gasAttached = actions\n      .map((action) => action.args)\n      .filter(\n        (args) => 'gas' in args,\n      );\n\n    if (gasAttached.length === 0) {\n      return '0';\n    }\n\n    return gasAttached.reduce(\n      (acc, args) =>\n        Big(acc || '0')\n          .plus(args.gas)\n          .toString(),\n      '0',\n    );\n  };\n\n  let gasAttached = receipt?.actions ? getGasAttached(receipt?.actions) : '0';\n\n  return (\n    <>\n      {receipt &&\n        receipt?.actions?.map((action, i) => (\n          <tr key={action.args?.method_name + i}>\n            <td className=\"px-6 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium whitespace-nowrap\">\n              {formatActionKind(action.action_kind)}\n            </td>\n            <td className=\"px-4 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium whitespace-nowrap\">\n              {action.args?.method_name}\n            </td>\n            <td className=\"px-4 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium\">\n              {receipt?.predecessor_id ? (\n                <div className=\"word-break\">\n                  <Link\n                    href={`/address/${receipt?.predecessor_id}`}\n                    className=\"hover:no-underline\"\n                  >\n                    <a className=\"text-green-500 dark:text-green-250 hover:no-underline inline-block truncate max-w-[120px]\">\n                      {receipt?.predecessor_id}\n                    </a>\n                  </Link>\n                </div>\n              ) : (\n                ''\n              )}\n            </td>\n            <td>\n              {' '}\n              <div className=\"w-5 h-5 p-1 bg-green-100 rounded-full text-center flex justify-center items-center mx-auto text-white\">\n                <FaLongArrowAltRight />\n              </div>\n            </td>\n            <td className=\"px-4 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium\">\n              {receipt?.receiver_id ? (\n                <div className=\"word-break\">\n                  <Link\n                    href={`/address/${receipt?.receiver_id}`}\n                    className=\"hover:no-underline\"\n                  >\n                    <a className=\"text-green-500 dark:text-green-250 hover:no-underline inline-block truncate max-w-[120px]\">\n                      {receipt?.receiver_id}\n                    </a>\n                  </Link>\n                </div>\n              ) : (\n                ''\n              )}\n            </td>\n\n            <td className=\"px-4 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium whitespace-nowrap\">\n              <span>\n                {action.args?.deposit\n                  ? yoctoToNear(action.args?.deposit, true)\n                  : action.args?.deposit ?? '0'}{' '}\n                \u24c3\n                {currentPrice && network === 'mainnet'\n                  ? ` ($${fiatValue(\n                      yoctoToNear(action.args?.deposit ?? 0, false),\n                      currentPrice,\n                    )})`\n                  : ''}\n              </span>\n            </td>\n            <td className=\"px-4 py-4 text-sm text-nearblue-600 dark:text-neargray-10 font-medium whitespace-nowrap\">{`${\n              gasAttached !== '0' ? convertToMetricPrefix(gasAttached) : '0 '\n            }gas`}</td>\n          </tr>\n        ))}\n\n      {receipt?.outcome?.outgoing_receipts?.length > 0 && (\n        <>\n          {receipt?.outcome?.outgoing_receipts?.map((rcpt) => (\n            <Fragment key={rcpt?.receipt_id}>\n              {\n                <Widget\n                  src={`${ownerId}/widget/bos-components.components.Transactions.ReceiptSummaryRow`}\n                  props={{\n                    receipt: rcpt,\n                    borderFlag: true,\n                    txn: txn,\n                    network: network,\n                    Link,\n                    ownerId,\n                  }}\n                  loading={\n                    <tr className=\"hover:bg-blue-900/5 h-[57px]\">\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-tiny \">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                      <td className=\"px-4 py-4 whitespace-nowrap text-sm text-nearblue-600 dark:text-neargray-10\">\n                        <Skeleton className=\"w-full h-4\" />\n                      </td>\n                    </tr>\n                  }\n                />\n              }\n            </Fragment>\n          ))}\n        </>\n      )}\n    </>\n  );\n}\n\nreturn MainComponent(props, context);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/bos-components.components.Transactions.ReceiptSummaryRow", "fact_widget_deployments_id": "59669d2b10ea88f7a6728b2fb7d916c3", "inserted_timestamp": "2024-06-10T17:04:56.483Z", "modified_timestamp": "2024-06-10T17:04:56.483Z", "__row_index": 3}