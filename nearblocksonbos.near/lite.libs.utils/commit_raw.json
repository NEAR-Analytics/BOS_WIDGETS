{"tx_hash": "6QZKTQHJbre9RsdmjAPKxGwwcR2bYwQDLnUGpuRG34cF", "action_id_social": "9CYpW14k6hNHfEBSLQSDxhZmU9mbaJCyTqEAsgxqMx72-0-widget", "block_id": 120910813, "block_timestamp": "2024-06-11T06:41:50.245Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.libs.utils", "source_code": "const utils = () => {\n  const depositAmount = (actions) => {\n    return actions\n      .map((action) => {\n        if (typeof action === \"string\") return \"0\";\n        if (\"FunctionCall\" in action) return action.FunctionCall.deposit;\n        if (\"Transfer\" in action) return action.Transfer.deposit;\n        return \"0\";\n      })\n      .reduce((acc, deposit) => Big(acc).plus(deposit).toString(), \"0\");\n  };\n  const txnFee = (receiptsOutcome, txnTokensBurnt) => {\n    return receiptsOutcome\n      .map((receipt) => receipt.outcome.tokens_burnt)\n      .reduce((acc, fee) => Big(acc).add(fee).toString(), txnTokensBurnt);\n  };\n  const gasLimit = (actions) => {\n    const gasAttached = actions\n      .map((action) => action.args)\n      .filter((args) => \"gas\" in args);\n    if (gasAttached.length === 0) return \"0\";\n    return gasAttached.reduce(\n      (acc, args) => Big(acc).add(args.gas).toString(),\n      \"0\"\n    );\n  };\n  const refund = (receipts) => {\n    return receipts\n      .filter(\n        (nestedReceipt) =>\n          \"outcome\" in nestedReceipt && nestedReceipt.predecessorId === \"system\"\n      )\n      .reduce((acc, nestedReceipt) => {\n        let gasDeposit = \"0\";\n        if (\"outcome\" in nestedReceipt) {\n          gasDeposit = nestedReceipt.actions\n            .map((action) =>\n              \"deposit\" in action.args ? action.args.deposit : \"0\"\n            )\n            .reduce((acc, deposit) => Big(acc).add(deposit).toString(), \"0\");\n        }\n        return Big(acc).add(gasDeposit).toString();\n      }, \"0\");\n  };\n  const shortenString = (string, prefixLen, suffixLen, minLen) => {\n    const text = String(string);\n    const prefix = prefixLen ?? 6;\n    const suffix = suffixLen ?? 7;\n    const threshold = minLen ?? 15;\n    if (text.length <= threshold) return text;\n    return `${text.slice(0, prefix)}...${text.slice(-suffix)}`;\n  };\n  return {\n    depositAmount,\n    gasLimit,\n    refund,\n    shortenString,\n    txnFee,\n  };\n};\nreturn utils(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.libs.utils", "fact_widget_deployments_id": "241004cf9457424bbb01003f2c043e48", "inserted_timestamp": "2024-06-11T08:04:49.294Z", "modified_timestamp": "2024-06-11T08:04:49.294Z", "__row_index": 0}