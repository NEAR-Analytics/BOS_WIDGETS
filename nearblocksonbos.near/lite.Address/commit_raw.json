{"tx_hash": "Bc84XF9hGLYQ2pu8rit3Qz8usNro989yK5WGdYX59nVr", "action_id_social": "P4tgqaTC7pRSZnc6kSsRsnuSxGMt4BzEZXYA6PqATf6-0-widget", "block_id": 120947475, "block_timestamp": "2024-06-11T18:33:20.708Z", "signer_id": "nearblocksonbos.near", "widget_name": "lite.Address", "source_code": "let Skeleton = window?.Skeleton || (({ children }) => <>{children}</>);\nconst Address = ({ id, rpcUrl }) => {\n  let { apiFetch, rpcFetch } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.fetcher`\n  );\n  let { yoctoToNear } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.convertor`\n  );\n  let { formatNumber, formatSize } = VM.require(\n    `nearblocksonbos.near/widget/lite.libs.formatter`\n  );\n  if (!apiFetch || !rpcFetch || !yoctoToNear || !formatNumber || !formatSize)\n    return null;\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState({\n    address: true,\n    stats: true,\n  });\n  const [stats, setStats] = useState(null);\n  const [address, setAddress] = useState(null);\n  const ACCOUNT_CODE_HASH = \"11111111111111111111111111111111\";\n  const value = formatNumber(\n    Big(yoctoToNear(address?.amount ?? \"0\"))\n      .mul(stats?.near_price ?? \"0\")\n      .toString(),\n    2\n  );\n  useEffect(() => {\n    if (rpcFetch && rpcUrl && id) {\n      rpcFetch(rpcUrl, \"query\", {\n        account_id: id,\n        finality: \"final\",\n        request_type: \"view_account\",\n      })\n        .then((response) => setAddress(response))\n        .catch(setError)\n        .finally(() => setLoading((state) => ({ ...state, address: false })));\n    }\n    if (apiFetch) {\n      apiFetch(`https://api.nearblocks.io/v1/stats`)\n        .then((response) => setStats(response?.stats?.[0]))\n        .catch(console.log)\n        .finally(() => setLoading((state) => ({ ...state, stats: false })));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, rpcUrl]);\n  const KeysLoader = () => (\n    <div className=\"relative rounded-lg overflow-auto bg-bg-box border border-border-body my-6\">\n      <table className=\"table-auto border-collapse w-full\">\n        <thead>\n          <tr>\n            <th className=\"w-[300px] font-normal text-xs text-text-label uppercase text-left pl-6 pr-4 py-4\">\n              Public Key\n            </th>\n            <th className=\"w-[84px] font-normal text-xs text-text-label uppercase text-left px-4 py-4\">\n              Access\n            </th>\n            <th className=\"w-[160px] font-normal text-xs text-text-label uppercase text-left px-4 py-4\">\n              Contract\n            </th>\n            <th className=\"w-[240px] font-normal text-xs text-text-label uppercase text-left px-4 py-4\">\n              Methods\n            </th>\n            <th className=\"w-[112px] font-normal text-xs text-text-label uppercase text-left pl-4 pr-6 py-4\">\n              Allowance\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td className=\"px-6\" colSpan={5}>\n              <span className=\"block w-full border-b border-b-border-body\" />\n            </td>\n          </tr>\n          {[...Array(25).keys()].map((key) => (\n            <tr key={key}>\n              <td className=\"h-[46px] pl-6 pr-4 py-4\">\n                <span className=\"flex\">\n                  <Skeleton className=\"h-5 w-[190px]\" loading>\n                    &nbsp;\n                  </Skeleton>\n                </span>\n              </td>\n              <td className=\"h-[46px] px-4 py-4\">\n                <span className=\"flex\">\n                  <Skeleton className=\"h-5 w-[64px]\" loading>\n                    &nbsp;\n                  </Skeleton>\n                </span>\n              </td>\n              <td className=\"h-[46px] px-4 py-4\">\n                <span className=\"flex\">\n                  <Skeleton className=\"h-5 w-[100px]\" loading>\n                    &nbsp;\n                  </Skeleton>\n                </span>\n              </td>\n              <td className=\"h-[46px] px-4 py-4\">\n                <span className=\"flex\">\n                  <Skeleton className=\"h-5 w-[160px]\" loading>\n                    &nbsp;\n                  </Skeleton>\n                </span>\n              </td>\n              <td className=\"h-[46px] pl-4 pr-6 py-4\">\n                <span className=\"flex\">\n                  <Skeleton className=\"h-5 w-[64px]\" loading>\n                    &nbsp;\n                  </Skeleton>\n                </span>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n  if (error) {\n    return (\n      <Widget\n        key=\"error\"\n        props={{ title: \"Error Fetching Address\" }}\n        src={`nearblocksonbos.near/widget/lite.Atoms.Error`}\n      />\n    );\n  }\n  return (\n    <div className=\"relative container mx-auto\">\n      <div className=\"pt-7 pb-[26px] px-5\">\n        <Skeleton className=\"block h-[54px] w-full\" loading={loading.address}>\n          <h1 className=\"flex items-center font-heading font-medium text-[36px] tracking-[0.1px] mr-4\">\n            <span className=\"truncate\">{id}</span>\n            <Widget\n              key=\"copy\"\n              props={{\n                buttonClassName: \"ml-3\",\n                className: \"text-primary w-6\",\n                text: id,\n              }}\n              src={`nearblocksonbos.near/widget/lite.Atoms.Copy`}\n            />\n          </h1>\n        </Skeleton>\n      </div>\n      <div className=\"flex flex-wrap\">\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Balance</h2>\n          <Skeleton className=\"block h-[39px] w-32\" loading={loading.address}>\n            <p className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToNear(address?.amount ?? \"0\"), 2)} \u24c3\n            </p>\n          </Skeleton>\n        </div>\n        {context.networkId === \"mainnet\" && (\n          <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n            <h2 className=\"font-medium text-sm mb-0.5\">Value</h2>\n            <Skeleton\n              className=\"block h-[39px] w-32\"\n              loading={loading.address || loading.stats}\n            >\n              <p className=\"font-heading font-medium text-[26px]\">${value}</p>\n            </Skeleton>\n          </div>\n        )}\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Validator Stake</h2>\n          <Skeleton className=\"block h-[39px] w-32\" loading={loading.address}>\n            <p className=\"font-heading font-medium text-[26px]\">\n              {formatNumber(yoctoToNear(address?.locked ?? \"0\"), 2)} \u24c3\n            </p>\n          </Skeleton>\n        </div>\n        <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n          <h2 className=\"font-medium text-sm mb-0.5\">Storage Used</h2>\n          <Skeleton className=\"block h-[39px] w-32\" loading={loading.address}>\n            <p className=\"font-heading font-medium text-[26px]\">\n              {formatSize(String(address?.storage_usage ?? 0), 2)}\n            </p>\n          </Skeleton>\n        </div>\n        {context.networkId === \"mainnet\" && (\n          <div className=\"w-full sm:w-1/2 lg:w-1/3 pl-5 mb-6 h-[60px]\">\n            <h2 className=\"font-medium text-sm mb-0.5\">Type</h2>\n            <Skeleton className=\"block h-[39px] w-28\" loading={loading.address}>\n              <p className=\"font-heading font-medium text-[24px]\">\n                {address?.code_hash === ACCOUNT_CODE_HASH\n                  ? \"Account\"\n                  : \"Contract\"}\n              </p>\n            </Skeleton>\n          </div>\n        )}\n      </div>\n      <div className=\"px-5 my-8\">\n        <button className=\"font-bold border-b-[3px] border-text-body py-1\">\n          Access Keys\n        </button>\n        <Widget\n          key=\"keys\"\n          loading={<KeysLoader />}\n          props={{ id, rpcUrl }}\n          src={`nearblocksonbos.near/widget/lite.Address.Keys`}\n        />\n      </div>\n    </div>\n  );\n};\nreturn Address(props);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocksonbos.near/widget/lite.Address", "fact_widget_deployments_id": "18e58075beea7bbd6756347d724b67b0", "inserted_timestamp": "2024-06-11T20:04:24.152Z", "modified_timestamp": "2024-06-11T20:04:24.152Z", "__row_index": 0}