{"tx_hash": "3axpDD69QaCrBv2QViZejd7TPwaKtWyRhQCBxbz2BT46", "action_id_social": "CFpWU3jNWPqLmCq7wTbvzGra6adc9xZA26azxt5RtckB-0-widget", "block_id": 97322063, "block_timestamp": "2023-07-25T19:28:17.394Z", "signer_id": "eugenewolf507.near", "widget_name": "Gigs_AllArticlesList.Card", "source_code": "State.init({ copiedShareUrl: true });\n//TODO !!!!!! update authorForWidget\n// const authorForWidget = \"neardigitalcollective.near\";\nconst authorForWidget = \"eugenewolf507.near\";\nconst article = props.article;\nconst statusChangeHandler = props.statusChangeHandler;\nconst openModalHandler = props.openModalHandler;\nconst closeModalHandler = props.closeModalHandler;\nconst cardWithOpenModal = props.cardWithOpenModal;\nconst statusTagsArr = props.statusTagsArr;\n// const sharedArticleId = props.sharedArticleId;\nconst doesUserCanChangeStatus = props.doesUserCanChangeStatus;\nconst mainPartForSharingGig = `https://near.social/#/${authorForWidget}/widget/Gigs_AllArticlesList`;\nconst shareUrl = `${mainPartForSharingGig}?articleId=${article.articleId}`;\n\n// ========== UTILS ==========\nconst getDateLastEdit = (timestamp) => {\n  const date = new Date(Number(timestamp));\n  const dateString = {\n    date: date.toLocaleDateString(),\n    time: date.toLocaleTimeString(),\n  };\n  return dateString;\n};\n\n// ========== STYLED ==========\nconst CardWrapper = styled.div`\n  min-width: 340px;\n  font-family: \"Open Sans\", sans-serif;\n    margin-bottom: 16px;\n  @media (min-width: 900px) {\n    margin-bottom: 30px;\n  }\n`;\n\nconst Card = styled.div`\n  position: \"static\";\n  height: 100%;\n  background: #F8F8F9;\n  padding: 16px;\n  border-radius: 10px;\n  border: none;\n  @media (min-width: 900px) {\n    padding: 30px;\n  }\n`;\n\nconst PaddingWrapper = styled.div`\npadding-bottom: 16px;\n    @media (min-width: 900px) {\n    padding-bottom: 30px;\n  }\n`;\n\nconst MainInfoWrrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 8px 12px;\n  align-items: left;\n  gap: 4px;\n  border-radius: 6px;\n  background: #FFF;\n  font-size: 14px;\n`;\n\nconst ModalWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 2rem;\n  border-radius: .375rem;\n  background: rgba(100, 100, 100, 0.7); \n  z-index:100;\n`;\nconst ModalStyles = styled.div`\n  height: calc(100% - 3rem);\n  background: #fff;\n  border-radius: .375rem;\n`;\n\nconst ShareButtonWrapper = styled.div` \n.button {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 0.5em;\n    white-space: nowrap;\n    width: max-content;\n    padding: 4px 20px;\n    font-size: 12px;\n    border-radius: 8px;\n    font-weight: 600;\n    line-height: 24px;\n    text-align: center;\n    border: 1px solid transparent;\n    color: #11181c;\n    background: #ffd50d;\n    border-color: #ffd50d;\n    \n    &:hover,\n    &:focus {\n      text-decoration: none;\n      opacity: 0.85;\n    }\n  }\n`;\n\n// ========== JSX MODAL ==========\nconst Modal = ({ onClose, children }) => {\n  return (\n    <ModalWrapper>\n      <ModalStyles>\n        <div\n          class=\"d-flex justify-content-between align-items-baseline\"\n          style={{ padding: \"1rem 2rem 0\" }}\n        >\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip>Copy URL to clipboard</Tooltip>}\n          >\n            <ShareButtonWrapper>\n              <button\n                className=\"button\"\n                type=\"button\"\n                onMouseLeave={() => {\n                  State.update({ copiedShareUrl: false });\n                }}\n                onClick={() => {\n                  clipboard.writeText(shareUrl).then(() => {\n                    State.update({ copiedShareUrl: true });\n                  });\n                }}\n              >\n                {state.copiedShareUrl ? (\n                  <Widget src=\"eugenewolf507.near/widget/CheckIcon\" />\n                ) : (\n                  <Widget src=\"eugenewolf507.near/widget/ShareIcon\" />\n                )}{\" \"}\n                Share\n              </button>\n            </ShareButtonWrapper>\n          </OverlayTrigger>\n\n          <Widget\n            src=\"nui.sking.near/widget/Input.Button\"\n            props={{\n              children: <Widget src=\"eugenewolf507.near/widget/CloseIcon\" />,\n              variant: \"primary icon\",\n              size: \"sm\",\n              buttonProps: \"button\",\n              onClick: () => {\n                onClose();\n              },\n            }}\n          />\n        </div>\n        {children}\n      </ModalStyles>\n    </ModalWrapper>\n  );\n};\n\n// ========== JSX CARD ==========\nreturn (\n  <CardWrapper key={article.articleId}>\n    <Card>\n      {cardWithOpenModal === article.articleId && (\n        <Modal onClose={closeModalHandler}>\n          <Widget\n            src={`${authorForWidget}/widget/Gigs_AllArticlesList.OneArticle`}\n            props={{\n              article,\n              statusChangeHandler,\n              statusTagsArr,\n              doesUserCanChangeStatus,\n              closeModalHandler,\n            }}\n          />\n        </Modal>\n      )}\n      <div role=\"button\" onClick={() => openModalHandler(article.articleId)}>\n        <PaddingWrapper>\n          <Widget\n            src={`nui.sking.near/widget/Typography.Text`}\n            props={{\n              children: article.articleId,\n              tag: \"h2\",\n              size: \"20px\",\n              className: \"text-center pb-3 border-bottom\",\n            }}\n          />\n        </PaddingWrapper>\n        <PaddingWrapper>\n          <Widget\n            src=\"nui.sking.near/widget/Element.User\"\n            props={{\n              accountId: article.author,\n              options: {\n                size: \"md\",\n                showSocialName: true,\n                showImage: true,\n                showHumanBadge: true,\n              },\n            }}\n          />\n        </PaddingWrapper>\n        <MainInfoWrrapper>\n          <div>Posted on {getDateLastEdit(article.timeCreate).date}</div>\n          <div>Edited on {getDateLastEdit(article.timeLastEdit).date}</div>\n          <div>\n            Last edit by{\" \"}\n            <a\n              href={`https://near.social/#/mob.near/widget/ProfilePage?accountId=${article.lastEditor}`}\n              style={{ textDecoration: \"underline\" }}\n            >\n              {article.lastEditor}\n            </a>\n          </div>\n          <div>Edit versions: {article.version}</div>\n        </MainInfoWrrapper>\n      </div>\n    </Card>\n  </CardWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/Gigs_AllArticlesList.Card", "fact_widget_deployments_id": "2dfbf8fd9697551ad162a670577866a7", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 41}