{"tx_hash": "4tSmWnLLbGUqv5hfnozsto6GGfdJi8ZgyFkfo3Z2kTL6", "action_id_social": "3mhPJ4psVbzjKGBXEUUiBTxWFwc6GbKTa8uSv5wWpBry-0-widget", "block_id": 95916341, "block_timestamp": "2023-07-07T13:00:35.990Z", "signer_id": "eugenewolf507.near", "widget_name": "Gigs_AllArticlesList.Card", "source_code": "const authorForWidget = \"eugenewolf507.near\";\nState.init({ showModal: false });\nconst article = props.article;\nconst statusChangeHandler = props.statusChangeHandler;\nconst statusTagsArr = props.statusTagsArr;\n\n// ========== UTILS ==========\nconst getDateLastEdit = (timestamp) => {\n  const date = new Date(Number(timestamp));\n  const dateString = {\n    date: date.toLocaleDateString(),\n    time: date.toLocaleTimeString(),\n  };\n  return dateString;\n};\n\n// ========== HANDLERS ==========\nconst openModalHandler = () => {\n  State.update({\n    showModal: true,\n  });\n};\n\nconst closeModalHandler = () => {\n  State.update({\n    showModal: false,\n  });\n};\n\n// ========== STYLED ==========\nconst CardWrapper = styled.div`\n  min-width: 340px;\n`;\n\nconst ModalWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  padding: 2rem;\n  border-radius: .375rem;\n  background: rgba(100, 100, 100, 0.7); \n  z-index:100;\n`;\nconst ModalStyles = styled.div`\n  background: #fff;\n  border-radius: .375rem;\n`;\n\n// ========== JSX ==========\nconst StatusTagGroup = ({ activeStatus, articleId }) => (\n  <div className=\"d-flex flex-row flex-nowrap justify-content-between px-3 pb-3 \">\n    {statusTagsArr.map((tag) => (\n      <button\n        onClick={() => statusChangeHandler(activeStatus, tag, articleId)}\n        className={`btn btn-sm ${\n          activeStatus === tag ? \"btn-primary\" : \"btn-outline-primary\"\n        }`}\n        disabled={activeStatus === tag}\n      >\n        #{tag}\n      </button>\n    ))}\n  </div>\n);\n\nconst Modal = ({ onClose, children }) => {\n  return (\n    <ModalWrapper>\n      <ModalStyles>\n        <div\n          class=\"d-flex justify-content-between\"\n          style={{ padding: \"1rem 2rem 0\" }}\n        >\n          <button onClick={onClose} class=\"btn btn-outline-dark btn-sm\">\n            share\n          </button>\n          <button\n            onClick={onClose}\n            class=\"btn btn-outline-dark btn-sm\"\n            style={{ width: \"2rem\" }}\n          >\n            &times;\n          </button>\n        </div>\n        {children}\n      </ModalStyles>\n    </ModalWrapper>\n  );\n};\n\nreturn (\n  <CardWrapper className=\"col gy-3\" key={article.articleId}>\n    <div className=\"card h-100\" style={{ position: \"static\" }}>\n      {state.showModal && (\n        <Modal onClose={closeModalHandler}>\n          <Widget\n            src={`${authorForWidget}/widget/Gigs_AllArticlesList.OneArticle`}\n            props={{\n              articleId: article.articleId,\n              blockHeight: article.blockHeight,\n              lastEditor: article.lastEditor,\n            }}\n          />\n        </Modal>\n      )}\n      {/*\n      <a\n        className=\"text-decoration-none text-dark\"\n        href={`#/${authorForWidget}/widget/Gigs_OneArticle?articleId=${article.articleId}&blockHeight=${article.blockHeight}&lastEditor=${article.lastEditor}\n            `}\n      >\n      */}\n      <div role=\"button\" className=\"card-body\" onClick={openModalHandler}>\n        <div className=\"row d-flex justify-content-center\">\n          <h5 className=\"card-title text-center pb-2 border-bottom\">\n            {article.articleId}\n          </h5>\n          <div className=\"col flex-grow-1\">\n            <Widget\n              src=\"mob.near/widget/Profile.ShortInlineBlock\"\n              props={{\n                accountId: article.author,\n                tooltip: true,\n              }}\n            />\n          </div>\n        </div>\n        <div\n          className=\"mt-3 mb-0 alert alert-secondary\"\n          style={{ backgroundColor: \"white\" }}\n        >\n          <div>\n            Posted on {getDateLastEdit(article.timeCreate).date}\n            <br />\n            Edited on {getDateLastEdit(article.timeLastEdit).date}\n            <br />\n            Last edit by{\" \"}\n            <a\n              href={`https://near.social/#/mob.near/widget/ProfilePage?accountId=${article.lastEditor}`}\n              style={{ textDecoration: \"underline\" }}\n            >\n              {article.lastEditor}\n            </a>\n            <br />\n            Edit versions: {article.version}\n          </div>\n        </div>\n      </div>\n      {/*</a>*/}\n      <StatusTagGroup\n        activeStatus={article.statusTag}\n        articleId={article.articleId}\n      />\n    </div>\n  </CardWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/Gigs_AllArticlesList.Card", "fact_widget_deployments_id": "3cbf9e76e506a4e6eaebbdae5e0890c8", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 69}