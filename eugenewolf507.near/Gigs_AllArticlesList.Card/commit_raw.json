{"tx_hash": "BDbTv1CmzUx2FQ381BFQjDu9kXhTERq1JUaAPo2of5QK", "action_id_social": "6HjGfB4WVkB38ACSPevLMjTZUVPTnWHt8vXrbh7qA7RJ-0-widget", "block_id": 95919134, "block_timestamp": "2023-07-07T13:52:34.699Z", "signer_id": "eugenewolf507.near", "widget_name": "Gigs_AllArticlesList.Card", "source_code": "const authorForWidget = \"eugenewolf507.near\";\nState.init({ showModal: false, copiedShareUrl: false });\nconst article = props.article;\nconst statusChangeHandler = props.statusChangeHandler;\nconst statusTagsArr = props.statusTagsArr;\nconst mainPartForSharingGig =\n  \"https://near.social/#/eugenewolf507.near/widget/Gigs_AllArticlesList\";\nconst shareUrl = `${mainPartForSharingGig}?articleId=${article.articleId}`;\n\n// ========== UTILS ==========\nconst getDateLastEdit = (timestamp) => {\n  const date = new Date(Number(timestamp));\n  const dateString = {\n    date: date.toLocaleDateString(),\n    time: date.toLocaleTimeString(),\n  };\n  return dateString;\n};\n\n// ========== HANDLERS ==========\nconst openModalHandler = () => {\n  State.update({\n    showModal: true,\n  });\n};\n\nconst closeModalHandler = () => {\n  State.update({\n    showModal: false,\n  });\n};\n\n// ========== STYLED ==========\nconst CardWrapper = styled.div`\n  min-width: 340px;\n`;\n\nconst ModalWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  padding: 2rem;\n  border-radius: .375rem;\n  background: rgba(100, 100, 100, 0.7); \n  z-index:100;\n`;\nconst ModalStyles = styled.div`\n  background: #fff;\n  border-radius: .375rem;\n`;\n\nconst ShareButtonWrapper = styled.div`\n  .button {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    height: 32px;\n    border-radius: 100px;\n    font-weight: 600;\n    font-size: 12px;\n    text-align: center;\n    cursor: pointer;\n    background-color: transparent;\n    border: 0;\n    color: #11181c !important;\n\n    &:hover,\n    &:focus {\n      text-decoration: none;\n      outline: none;\n    }\n\n    i {\n      color: #000;\n    }\n\n    .bi-16 {\n      font-size: 21px;\n    }\n  }\n`;\n\n// ========== JSX ==========\nconst StatusTagGroup = ({ activeStatus, articleId }) => (\n  <div className=\"d-flex flex-row flex-nowrap justify-content-between px-3 pb-3 \">\n    {statusTagsArr.map((tag) => (\n      <button\n        onClick={() => statusChangeHandler(activeStatus, tag, articleId)}\n        className={`btn btn-sm ${\n          activeStatus === tag ? \"btn-primary\" : \"btn-outline-primary\"\n        }`}\n        disabled={activeStatus === tag}\n      >\n        #{tag}\n      </button>\n    ))}\n  </div>\n);\n\nconst Modal = ({ onClose, children }) => {\n  return (\n    <ModalWrapper>\n      <ModalStyles>\n        <div\n          class=\"d-flex justify-content-between align-items-baseline\"\n          style={{ padding: \"1rem 2rem 0\" }}\n        >\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip>Copy URL to clipboard</Tooltip>}\n          >\n            <ShareButtonWrapper>\n              <button\n                className=\"button\"\n                type=\"button\"\n                onMouseLeave={() => {\n                  State.update({ copiedShareUrl: false });\n                }}\n                onClick={() => {\n                  clipboard.writeText(shareUrl).then(() => {\n                    State.update({ copiedShareUrl: true });\n                  });\n                }}\n              >\n                {state.copiedShareUrl ? (\n                  <i className=\"bi-16 bi bi-check\"></i>\n                ) : (\n                  <i className=\"bi-16 bi-link-45deg\"></i>\n                )}\n              </button>\n            </ShareButtonWrapper>\n          </OverlayTrigger>\n          <span\n            role=\"button\"\n            onClick={onClose}\n            style={{ fontSize: \"1.5rem\", width: \"2rem\", textAlign: \"center\" }}\n          >\n            &times;\n          </span>\n        </div>\n        {children}\n      </ModalStyles>\n    </ModalWrapper>\n  );\n};\n\nreturn (\n  <CardWrapper className=\"col gy-3\" key={article.articleId}>\n    <div className=\"card h-100\" style={{ position: \"static\" }}>\n      {state.showModal && (\n        <Modal onClose={closeModalHandler}>\n          <Widget\n            src={`${authorForWidget}/widget/Gigs_AllArticlesList.OneArticle`}\n            props={{\n              articleId: article.articleId,\n              blockHeight: article.blockHeight,\n              lastEditor: article.lastEditor,\n            }}\n          />\n        </Modal>\n      )}\n      <div role=\"button\" className=\"card-body\" onClick={openModalHandler}>\n        <div className=\"row d-flex justify-content-center\">\n          <h5 className=\"card-title text-center pb-2 border-bottom\">\n            {article.articleId}\n          </h5>\n          <div className=\"col flex-grow-1\">\n            <Widget\n              src=\"mob.near/widget/Profile.ShortInlineBlock\"\n              props={{\n                accountId: article.author,\n                tooltip: true,\n              }}\n            />\n          </div>\n        </div>\n        <div\n          className=\"mt-3 mb-0 alert alert-secondary\"\n          style={{ backgroundColor: \"white\" }}\n        >\n          <div>\n            Posted on {getDateLastEdit(article.timeCreate).date}\n            <br />\n            Edited on {getDateLastEdit(article.timeLastEdit).date}\n            <br />\n            Last edit by{\" \"}\n            <a\n              href={`https://near.social/#/mob.near/widget/ProfilePage?accountId=${article.lastEditor}`}\n              style={{ textDecoration: \"underline\" }}\n            >\n              {article.lastEditor}\n            </a>\n            <br />\n            Edit versions: {article.version}\n          </div>\n        </div>\n      </div>\n      <StatusTagGroup\n        activeStatus={article.statusTag}\n        articleId={article.articleId}\n      />\n    </div>\n  </CardWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/Gigs_AllArticlesList.Card", "fact_widget_deployments_id": "02a03a13efa6f4ef2e89655957920191", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 76}