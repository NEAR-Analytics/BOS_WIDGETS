{"tx_hash": "2CykLLccTYcUDVTW49NSLMv4xcsjJ1FhLRQyHxk43gnQ", "action_id_social": "ESYaA36st83dxRtzPedyRPnCYgf2N88UZzvzYYZ3BPnX-0-widget", "block_id": 112698817, "block_timestamp": "2024-02-12T19:51:32.683Z", "signer_id": "box_factory.near", "widget_name": "MysteryBox.Manage.Screens.DeployContract", "source_code": "console.log('props', props);\n\nState.init({\n  title: '',\n});\n\nconst WrapperMenu = styled.div`\n  background: rgba(24, 36, 50, 1);\n  border: 0;\n  border-radius: 30px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n\n  flex-basis: 50%;\n\n  width: 48%;\n\n  @media (max-width: 1024px) {\n    width: 54%;\n  }\n\n  @media (max-width: 786px) {\n    width: 70%;\n  }\n\n  @media (max-width: 512px) {\n    width: 90%;\n  }\n`;\n\nconst MenuContent = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  justify-content: space-evenly;\n  align-items: center;\n\n  flex: 1;\n\n  width: 100%;\n`;\n\nconst FieldRow = styled.div`\n  width: 80%;\n  height: 72px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  background: #27384c;\n\n  border: 0;\n  border-radius: 10px;\n`;\n\nconst PrimaryText = styled.p`\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #ffffff;\n\n  padding: 0;\n  margin: 0;\n`;\n\nconst SecondaryText = styled.p`\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 11px;\n  font-weight: 400;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #2bccc2;\n\n  padding: 0;\n  margin: 0;\n`;\n\nconst TextInput = styled.input`\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #2bccc2;\n\n  background: #18243280;\n  border: 0;\n  border-radius: 50px;\n\n  height: 72%;\n  width: 90%;\n`;\n\nconst WrapperHeader = styled.div`\n  flex: 1;\n\n  width: 90%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst WrapperContent = styled.div`\n  flex: 1;\n\n  width: 90%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nfunction convertToSlug(text) {\n  return text\n    .toLowerCase()\n    .replace(/[^\\w ]+/g, '')\n    .replace(/ +/g, '-');\n}\n\nconst alias = state.title && convertToSlug(state.title).substring(0, 24);\n\nconst address = alias && alias + '.' + props.top_contract_id;\n\nconst shouldSubmitButtonBeDisabled = !state.title;\n\nconsole.log('shouldSubmitButtonBeDisabled', shouldSubmitButtonBeDisabled);\n\nconst submitTransactionToDeployContract = () => {\n  console.log('submitTransactionToDeployContract', state.title, address);\n\n  const baseDeposit = Big(10).pow(24).mul(6.1); // 6.1N\n  const argsDeposit = Big(240).mul(state.title.length).mul(Big(10).pow(18));\n\n  Near.call(\n    props.top_contract_id,\n    'deploy_mystery_box_contract',\n    {\n      alias,\n      title: state.title,\n    },\n    Big(10).pow(12).mul(300), // 300 TGas\n    baseDeposit.plus(argsDeposit)\n  );\n};\n\nreturn (\n  <>\n    <Widget\n      src=\"box_factory.near/widget/MysteryBox.Manage.Components.Title\"\n      props={{\n        text: 'Deploy Contract',\n      }}\n    />\n    <WrapperMenu>\n      <MenuContent>\n        <FieldRow>\n          <WrapperHeader>\n            <PrimaryText>Contract Title</PrimaryText>\n          </WrapperHeader>\n          <WrapperContent>\n            <TextInput\n              value={state.title}\n              placeholder=\"Tell us what this is gonna be about?\"\n              onChange={(e) => {\n                State.update({\n                  title: e.target.value,\n                });\n              }}\n            />\n          </WrapperContent>\n        </FieldRow>\n        <FieldRow>\n          <WrapperHeader>\n            <PrimaryText>Contract Address Is Going To Be</PrimaryText>\n          </WrapperHeader>\n          <WrapperContent>\n            <SecondaryText>{address || '<No Title>'}</SecondaryText>\n          </WrapperContent>\n        </FieldRow>\n      </MenuContent>\n    </WrapperMenu>\n    <Widget\n      src={`box_factory.near/widget/MysteryBox.Manage.Components.SubmitButton`}\n      props={{\n        text: 'Deploy',\n        disabled: shouldSubmitButtonBeDisabled,\n        onClick: submitTransactionToDeployContract,\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/box_factory.near/widget/MysteryBox.Manage.Screens.DeployContract", "fact_widget_deployments_id": "5ce8d17db0dfad6fe55b66a2d5484582", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}