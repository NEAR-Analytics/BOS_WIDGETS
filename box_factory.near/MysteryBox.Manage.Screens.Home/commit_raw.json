{"tx_hash": "2CykLLccTYcUDVTW49NSLMv4xcsjJ1FhLRQyHxk43gnQ", "action_id_social": "ESYaA36st83dxRtzPedyRPnCYgf2N88UZzvzYYZ3BPnX-0-widget", "block_id": 112698817, "block_timestamp": "2024-02-12T19:51:32.683Z", "signer_id": "box_factory.near", "widget_name": "MysteryBox.Manage.Screens.Home", "source_code": "const { href: linkHref } = VM.require('box_factory.near/widget/core.lib.url');\n\nlinkHref || (linkHref = () => {});\n\nconst defaultContractIndex = props.defaultContractId\n  ? (props.contracts || []).findIndex(\n      (contract) => contract.contract_id === props.defaultContractId\n    )\n  : -1;\nconst defaultActiveIndex =\n  defaultContractIndex !== -1 ? defaultContractIndex : 0;\n\nconsole.log('defaultActiveIndex', defaultActiveIndex);\n\nState.init({\n  active: defaultActiveIndex,\n});\n\nconst SliderWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n\n  flex-basis: 70%;\n\n  width: 48%;\n\n  @media (max-width: 1024px) {\n    width: 60%;\n  }\n\n  @media (max-width: 786px) {\n    width: 75%;\n  }\n  @media (max-width: 512px) {\n    width: 90%;\n  }\n`;\n\nconst Svg = styled.svg`\n  height: 36px;\n  cursor: pointer;\n\n  ${(props) =>\n    !props.disabled\n      ? `filter: drop-shadow(0px 0px 4px rgba(43, 204, 193, 0.5));`\n      : `filter: none;`}\n`;\n\nconst RightArrow = ({ onClick, disabled }) => (\n  <Svg\n    viewBox=\"0 0 35 58\"\n    disabled={disabled}\n    onClick={onClick}\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M0.550369 4.94975L5.50011 0L29.521 24.0209L29.542 24L34.4917 28.9497L34.4708 28.9707L34.4915 28.9914L29.5417 33.9411L29.521 33.9204L5.50032 57.9411L0.550575 52.9914L24.5713 28.9707L0.550369 4.94975Z\"\n        fill={disabled ? '#818B94' : '#fff'}\n      />\n    </g>\n  </Svg>\n);\n\nconst LeftArrow = ({ onClick, disabled }) => (\n  <Svg\n    viewBox=\"0 0 35 58\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    disabled={disabled}\n    onClick={onClick}\n  >\n    <g xmlns=\"http://www.w3.org/2000/svg\" transform=\"matrix(-1 0 0 -1 35 58)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M0.550369 4.94975L5.50011 0L29.521 24.0209L29.542 24L34.4917 28.9497L34.4708 28.9707L34.4915 28.9914L29.5417 33.9411L29.521 33.9204L5.50032 57.9411L0.550575 52.9914L24.5713 28.9707L0.550369 4.94975Z\"\n        fill={disabled ? '#818B94' : '#fff'}\n      />\n    </g>\n  </Svg>\n);\n\nconst WrapperMenu = styled.div`\n  background: rgba(24, 36, 50, 1);\n  border: 0;\n  border-radius: 30px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 80%;\n\n  height: 100%;\n  padding: 8px;\n`;\n\nconst MenuContent = styled.div`\n  flex-basis: 25%;\n`;\nconst MenuFooter = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  flex-basis: 45%;\n`;\nconst MenuFooterRow = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst Bottom = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  justify-content: space-between;\n  align-items: center;\n\n  width: 500px;\n\n  @media (max-width: 678px) {\n    flex-direction: column;\n\n    height: 84px;\n\n    justify-content: space-around;\n  }\n`;\n\nconst previousActiveContract = () => {\n  if (state.active === 0) return;\n\n  State.update({ active: state.active - 1 });\n};\n\nconst nextActiveContract = () => {\n  if (state.active === props.contracts.length - 1) return;\n\n  State.update({ active: state.active + 1 });\n};\n\nconst contract = props.contracts[state.active];\n\nconst createLinkToPage = (page) => {\n  return linkHref({\n    widgetSrc: 'box_factory.near/widget/MysteryBox.Manage',\n    params: {\n      contract_id: contract.contract_id,\n      page,\n    },\n  });\n};\n\nreturn (\n  <>\n    <Widget\n      src=\"box_factory.near/widget/MysteryBox.Manage.Components.Title\"\n      props={{\n        text: 'Contracts',\n      }}\n    />\n    <SliderWrapper>\n      <LeftArrow\n        disabled={state.active === 0}\n        onClick={previousActiveContract}\n      />\n      <WrapperMenu>\n        <Widget\n          src=\"box_factory.near/widget/MysteryBox.Manage.Components.MenuHeader\"\n          props={{\n            title: contract.title,\n            subtitle: contract.contract_id,\n          }}\n        />\n        <MenuContent></MenuContent>\n        <MenuFooter>\n          <MenuFooterRow>\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                text: 'Add NEAR reward',\n                href: createLinkToPage('AddNearReward'),\n              }}\n            />\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                text: 'Add NFT reward',\n                href: createLinkToPage('AddNftReward'),\n              }}\n            />\n          </MenuFooterRow>\n          <MenuFooterRow>\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                text: 'Mint BOX',\n                href: createLinkToPage('MintBox'),\n              }}\n            />\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                text: 'List Rewards',\n                href: createLinkToPage('ListRewards'),\n              }}\n            />\n          </MenuFooterRow>\n          <MenuFooterRow>\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                text: 'List User Boxes',\n                href: createLinkToPage('ListUserBoxes'),\n              }}\n            />\n            <Widget\n              src={`box_factory.near/widget/MysteryBox.Manage.Components.MenuButton`}\n              props={{\n                disabled: true,\n                text: 'Statistics',\n              }}\n            />\n          </MenuFooterRow>\n        </MenuFooter>\n      </WrapperMenu>\n      <RightArrow\n        disabled={state.active === props.contracts.length - 1}\n        onClick={nextActiveContract}\n      />\n    </SliderWrapper>\n    <Bottom>\n      <Widget\n        src={`box_factory.near/widget/MysteryBox.Manage.Components.PrimaryLinkButton`}\n        props={{\n          text: 'Create another contract',\n          href: linkHref({\n            widgetSrc: 'box_factory.near/widget/MysteryBox.Manage',\n            params: {\n              page: 'DeployContract',\n            },\n          }),\n        }}\n      />\n      <Widget\n        src={`box_factory.near/widget/MysteryBox.Manage.Components.PrimaryLinkButton`}\n        props={{\n          text: 'View Claiming Page',\n          href: linkHref({\n            widgetSrc: 'box_factory.near/widget/MysteryBox',\n            params: {\n              contract_id: contract.contract_id,\n            },\n          }),\n          target: '_blank',\n        }}\n      />\n    </Bottom>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/box_factory.near/widget/MysteryBox.Manage.Screens.Home", "fact_widget_deployments_id": "9f5af7d925e095d99a6df6ac475789ee", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}