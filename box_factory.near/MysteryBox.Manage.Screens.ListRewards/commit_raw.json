{"tx_hash": "2CykLLccTYcUDVTW49NSLMv4xcsjJ1FhLRQyHxk43gnQ", "action_id_social": "ESYaA36st83dxRtzPedyRPnCYgf2N88UZzvzYYZ3BPnX-0-widget", "block_id": 112698817, "block_timestamp": "2024-02-12T19:51:32.683Z", "signer_id": "box_factory.near", "widget_name": "MysteryBox.Manage.Screens.ListRewards", "source_code": "console.log('props', props);\n\nState.init({\n  activeKind: 'near',\n});\n\nconst WrapperMenu = styled.div`\n  background: rgba(24, 36, 50, 1);\n  border: 0;\n  border-radius: 30px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n\n  flex-basis: 80%;\n\n  width: 40%;\n\n  @media (max-width: 1024px) {\n    width: 54%;\n  }\n\n  @media (max-width: 786px) {\n    width: 70%;\n  }\n\n  @media (max-width: 512px) {\n    width: 90%;\n  }\n`;\n\nconst MenuTitle = styled.p`\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 28px;\n  font-weight: 700;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #ffffff;\n  margin: 0;\n`;\n\nconst MenuSubtitle = styled.p`\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 14px;\n  font-weight: 400;\n  letter-spacing: 0em;\n  text-align: center;\n  color: rgba(43, 204, 194, 1);\n  margin: 0;\n`;\n\nconst MenuHeader = styled.div``;\nconst MenuContent = styled.div`\n  width: 80%;\n\n  @media (max-width: 512px) {\n    width: 90%;\n  }\n\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n\n  flex-basis: 60%;\n`;\nconst MenuFooter = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  flex-basis: 10%;\n`;\n\nconst TableContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  flex-grow: 1;\n\n  width: 100%;\n\n  background: #27384c;\n\n  border: 0;\n  border-radius: 10px;\n`;\n\nconst TableScrollContainer = styled.div`\n  flex-basis: 160px;\n\n  @media (max-width: 786px) {\n    flex-basis: 180px;\n  }\n\n  @media (max-width: 512px) {\n    flex-basis: 200px;\n  }\n\n  overflow-x: hidden;\n  overflow-x: scroll;\n`;\n\nconst RarityButton = styled.div`\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  border: 0;\n\n  ${(props) => {\n    if (props.rarity === 'rare') return `background: #1EA3AF;`;\n    if (props.rarity === 'epic') return `background: #B263C3;`;\n    if (props.rarity === 'legendary') return `background: #FBC70F;`;\n  }}\n`;\n\nconst HeaderRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  background: #334a5f;\n  height: 30px;\n\n  border: 0;\n  border-radius: 10px;\n`;\n\nconst TableRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n\n  flex-grow: 1;\n  border-radius: 10px;\n\n  ${(props) =>\n    props.index % 2 === 1 ? 'background: rgba(24, 36, 50, 0.30);' : ''}\n`;\n\nconst HeaderCell = styled.div`\n  flex: 1;\n  ${(props) => (props.wide ? 'flex-grow: 2;' : '')}\n\n  text-align: center;\n\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 11px;\n  font-weight: 300;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #ffffff;\n\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n`;\n\nconst TableCell = styled.div`\n  flex: 1;\n  ${(props) => (props.wide ? 'flex-grow: 2;' : '')}\n\n  text-align: center;\n\n  height: 100%;\n\n  font-family: 'Kodchasan', sans-serif;\n  font-size: 11px;\n  font-weight: 500;\n  letter-spacing: 0em;\n  text-align: center;\n  color: #ffffff;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst TextCell = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  width: 80px;\n`;\n\nconst WrapperPoolButtons = styled.div`\n  width: 100%;\n  background: #202f3f;\n\n  border-radius: 10px;\n  height: 32px;\n\n  display: flex;\n\n  margin-bottom: 8px;\n`;\n\nconst PoolButton = styled.button`\n  flex-basis: 50%;\n\n  height: 100%;\n\n  border: 0;\n  border-radius: 10px;\n  text-align: center;\n\n  background: none;\n\n  color: #fff;\n  font-family: Kodchasan;\n  font-size: 12px;\n  font-weight: 400;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ${(props) =>\n    props.active\n      ? 'background: #27394B;'\n      : `&:hover {\n    cursor: pointer;\n  }`}\n`;\n\nconst updateActiveKind = (kind) => {\n  State.update({\n    activeKind: kind,\n  });\n};\n\nconst getTitleForReward = (reward) => {\n  switch (reward.kind) {\n    case 'near': {\n      const amount = Big(reward.amount).div(1e24).toFixed(2);\n\n      return `${amount} NEAR`;\n    }\n    case 'non_fungible_token': {\n      const metadata = Near.view(reward.contract_id, 'nft_metadata');\n\n      return metadata?.name;\n    }\n    default:\n      return '';\n  }\n};\n\nconst getAvailableForReward = (reward) => {\n  switch (reward.kind) {\n    case 'near': {\n      return reward.available;\n    }\n    case 'non_fungible_token': {\n      return (reward.token_ids || []).length;\n    }\n    default:\n      return '';\n  }\n};\n\nconst getTotalForReward = (reward) => {\n  switch (reward.kind) {\n    case 'near': {\n      return reward.total;\n    }\n    case 'non_fungible_token': {\n      return reward.total;\n    }\n    default:\n      return '';\n  }\n};\n\nconst rewards = (props.rewards || []).filter(\n  (reward) => reward.kind === state.activeKind\n);\n\nreturn (\n  <>\n    <Widget\n      src=\"box_factory.near/widget/MysteryBox.Manage.Components.Title\"\n      props={{\n        text: 'List Rewards',\n      }}\n    />\n    <WrapperMenu>\n      <Widget\n        src=\"box_factory.near/widget/MysteryBox.Manage.Components.MenuHeader\"\n        props={{\n          title: props.contract?.title,\n          subtitle: props.contract?.contract_id,\n        }}\n      />\n      <MenuContent>\n        <WrapperPoolButtons>\n          <PoolButton\n            active={state.activeKind === 'near'}\n            disabled={state.activeKind === 'near'}\n            onClick={() => updateActiveKind('near')}\n          >\n            NEAR Pool\n          </PoolButton>\n          <PoolButton\n            active={state.activeKind === 'non_fungible_token'}\n            disabled={state.activeKind === 'non_fungible_token'}\n            onClick={() => updateActiveKind('non_fungible_token')}\n          >\n            NFT Pool\n          </PoolButton>\n        </WrapperPoolButtons>\n        <TableContainer>\n          <HeaderRow key={0}>\n            <HeaderCell key={0} wide>\n              Reward\n            </HeaderCell>\n            <HeaderCell key={1}>Total</HeaderCell>\n            <HeaderCell key={2}>Available</HeaderCell>\n          </HeaderRow>\n          <TableScrollContainer>\n            {rewards.map((reward, index) => (\n              <TableRow index={index + 1}>\n                <TableCell key={0} wide>\n                  <div\n                    style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      flexBasis: '14px',\n                    }}\n                  >\n                    <RarityButton rarity={reward.rarity} />\n                  </div>\n                  <TextCell>{getTitleForReward(reward)}</TextCell>\n                </TableCell>\n                <TableCell key={1}>{getTotalForReward(reward)}</TableCell>\n                <TableCell key={2}>{getAvailableForReward(reward)}</TableCell>\n              </TableRow>\n            ))}\n          </TableScrollContainer>\n        </TableContainer>\n      </MenuContent>\n      <MenuFooter>{/* Filtering will be here */}</MenuFooter>\n    </WrapperMenu>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/box_factory.near/widget/MysteryBox.Manage.Screens.ListRewards", "fact_widget_deployments_id": "531f2c27fe7fa544452408e82297b4bc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}