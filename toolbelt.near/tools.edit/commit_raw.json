{"tx_hash": "5T3A6JyV158KedeLW554dk4DxWAbjRwwjTV6CbX3GuMJ", "action_id_social": "9QztRuE4eJEH4ZYuNN2PDzCKqSCbz4tJ4KhtNYbste9S-0-widget", "block_id": 117692099, "block_timestamp": "2024-04-26T21:35:59.039Z", "signer_id": "toolbelt.near", "widget_name": "tools.edit", "source_code": "const accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet to edit your homepage\";\n}\n\nconst toolbelt = context.accountId\n  ? Social.get(`${context.accountId}/settings/commons.build/tools`)\n  : undefined;\n\nif (toolbelt === null) {\n  return \"\";\n}\n\nconst defaultTools = [\n  \"devs.near/widget/Feed\",\n  \"hyperfiles.near/widget/app\",\n  \"everycanvas.near/widget/index\",\n  \"video.every.near/widget/app\",\n];\n\nconst settingTools = toolbelt && JSON.parse(toolbelt);\n\nif (state.tools === undefined) {\n  const tools = settingTools ?? defaultTools;\n  State.update({ tools });\n}\n\nconst move = (fromIndex, toIndex) => {\n  const updatedTools = [...state.tools];\n  const [removedTool] = updatedTools.splice(fromIndex, 1);\n  updatedTools.splice(toIndex, 0, removedTool);\n\n  State.update({ tools: updatedTools });\n};\n\nconst openButton = ({ widgetPath: src, onHide }) => {\n  return (\n    <button\n      className=\"btn btn-primary\"\n      onClick={() => {\n        State.update((prevState) => ({\n          tools: [src, ...prevState.tools],\n        }));\n        onHide();\n      }}\n    >\n      <i className=\"bi bi-plus-lg\" />\n    </button>\n  );\n};\n\nreturn (\n  <div className=\"m-2\">\n    <Widget\n      src=\"toolbelt.near/widget/tools.view\"\n      props={{ tools: state.tools }}\n    />\n    <hr />\n    <div className=\"d-flex flex-row justify-content-between\">\n      <h2 className=\"m-1\">Customize Your Toolbelt</h2>\n      <div className=\"m-1\">\n        {settingTools &&\n          JSON.stringify(state.tools) !== JSON.stringify(settingTools) && (\n            <button\n              className=\"ms-2 btn btn-outline-secondary\"\n              onClick={() => State.update({ tools: settingTools })}\n            >\n              Revert\n            </button>\n          )}\n        {JSON.stringify(state.tools) !== JSON.stringify(defaultTools) && (\n          <button\n            className=\"ms-2 btn btn-outline-secondary float-end\"\n            onClick={() => State.update({ tools: defaultTools })}\n          >\n            Reset\n          </button>\n        )}\n        <CommitButton\n          data={{\n            settings: {\n              \"commons.build\": { tools: JSON.stringify(state.tools) },\n            },\n          }}\n        >\n          Save\n        </CommitButton>\n      </div>\n    </div>\n    <div className=\"m-2 mt-3\">\n      <Widget\n        src=\"mob.near/widget/Welcome.RHS.Editor.ComponentSearch\"\n        props={{ extraButtons: openButton }}\n      />\n    </div>\n    <br />\n    {state.tools.map((tool, index) => (\n      <div\n        key={index}\n        className=\"d-flex flex-row justify-content-between border rounded-4 p-3 mb-3\"\n      >\n        <div>\n          <div className=\"font-monospace mb-3\">\n            <a href={`/${tool}`}>{tool}</a>\n          </div>\n          <button\n            className=\"btn btn-sm btn-primary\"\n            title=\"Move Up\"\n            disabled={index === 0}\n            onClick={() => move(index, index - 1)}\n          >\n            <i className=\"bi bi-chevron-up\" />\n          </button>\n          <button\n            className=\"btn btn-sm btn-primary ms-1\"\n            title=\"Move Down\"\n            disabled={index + 1 === state.tools.length}\n            onClick={() => move(index, index + 1)}\n          >\n            <i className=\"bi bi-chevron-down\" />\n          </button>\n          <button\n            className=\"btn btn-sm btn-danger ms-3\"\n            title=\"Remove\"\n            onClick={() => move(index, undefined)}\n          >\n            <i className=\"bi bi-x-lg\" />\n          </button>\n        </div>\n        <div>\n          <Widget src=\"toolbelt.near/widget/tool.stars\" props={{ src: tool }} />\n        </div>\n      </div>\n    ))}\n  </div>\n);\n", "metadata": {"fork_of": "mob.near/widget/Welcome.RHS.Editor@97556957"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/toolbelt.near/widget/tools.edit", "fact_widget_deployments_id": "372d39bd0fd04dd697b93639b655506e", "inserted_timestamp": "2024-04-26T23:42:43.400Z", "modified_timestamp": "2024-04-26T23:42:43.400Z", "__row_index": 0}