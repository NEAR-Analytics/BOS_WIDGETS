{"tx_hash": "Fv6TBWrjWsKupFTgLj8uSdtpuCoNLMbbe8KVLwHQghkP", "action_id_social": "CCgSU2fhsppLgP9z5rsxA9wAeKWRpyWmRFApxGawbemR-0-widget", "block_id": 96653771, "block_timestamp": "2023-07-17T02:53:56.906Z", "signer_id": "genadrop.near", "widget_name": "GenaDrop.NFT.Contract.holders", "source_code": "const title = props.title ?? \"GenaDrop NFT Holders\";\nconst contract = props.contract ?? \"genadrop-contract.nftgen.near\";\nconst showTitle = props.showTitle ?? true;\n\nconst data = Social.keys(\"*/profile\", \"final\");\n\nif (!data) {\n  return \"Loading...\";\n}\n\nconst accounts = Object.entries(data);\nconst holderData = [];\n\nfor (let i = 0; i < accounts.length; ++i) {\n  const accountId = accounts[i][0];\n\n  const nftData = Near.view(contract, \"nft_supply_for_owner\", {\n    account_id: accountId,\n  });\n\n  if (nftData && nftData > 0) {\n    holderData.push({ accountId, nftData });\n  }\n}\nholderData.sort((a, b) => b.nftData - a.nftData);\nconst holderProfiles = holderData.map((holder, index) => (\n  <div className=\"mb-2\" key={holder.accountId}>\n    <h5 className=\"m-3\">\n      <b>Rank {index + 1}:</b> Holds {holder.nftData} NFTs\n    </h5>\n    <Widget\n      src=\"near/widget/AccountProfileCard\"\n      props={{ accountId: holder.accountId }}\n    />\n  </div>\n));\n\n// const accounts = Object.entries(data);\n// const holderData = [];\n// const nftData = Near.view({ contract }, \"nft_supply_for_owner\", {\n//   account_id: accountId,\n// }); // add to this\n\n// holderData.sort((a, b) => b.nftData - a.nftData);\n\nreturn (\n  <>\n    {showTitle && <h3 className=\"m-3\">{title}</h3>}\n    <h5 className=\"m-3\">\n      <i>{holderProfiles.length} Total (Who has BOS Profile)</i>\n    </h5>\n    <div className=\"m-3\">{holderProfiles}</div>\n  </>\n);\n", "metadata": {"description": "Pass in contract, title to view how many people hold a NFT made with GenaDrop", "linktree": {"website": "bos.genadrop.io"}, "name": "GenaDrop NFT Holders", "platform": "nearpad", "tags": {"explorer": "", "holders": "", "nft": "", "nft-tool": ""}}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/genadrop.near/widget/GenaDrop.NFT.Contract.holders", "fact_widget_deployments_id": "040ca72f7e2d9fd37fd7b1ec09241e6f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}