{"tx_hash": "Evy9G8WCfEUgJJzhyWLxG8W7cfE88WmmWck5pRj9hwCE", "action_id_social": "3Hpy6GtUCrTXisqRBTdKt4PMBtnB5worBa61ysWZTNGa-0-widget", "block_id": 117327097, "block_timestamp": "2024-04-21T18:25:24.459Z", "signer_id": "hyperfiles.near", "widget_name": "view.tree", "source_code": "/**\n * Takes in a rootPath and rootType\n */\nconst rootPath = props.rootPath || context.accountId || \"hyperfiles.near\";\nconst rootType = props.rootType || \"account\";\nconst rootNode = props.rootNode || {};\nconst [inputValue, setInputValue] = useState(\"\");\n\nState.init({\n  path: rootPath,\n  type: rootType,\n  history: [rootPath],\n});\n\nfunction setPath(path) {\n  State.update({ path });\n}\n\nfunction setHistory(history) {\n  State.update({ history });\n}\n\nfunction setType(type) {\n  State.update({ type });\n}\n\nfunction setRoot(newPath, newType) {\n  State.update({\n    path: newPath,\n    type: newType,\n  });\n}\n\nconst handleInputChange = (event) => {\n  setInputValue(event.target.value);\n};\n\nconst handleExploreClick = () => {\n  setPath(inputValue); // Assuming setPath updates the state as needed\n};\n\n// WHEN A NEW ROOT IS SET //\n// GET DATA AT THIS PATH //\nfunction getNode(path, type) {\n  const parts = path.split(\"/\");\n  let value = {};\n\n  // ACCOUNT //\n  if (type === \"account\") {\n    if (parts.length > 1) {\n      // GRAPH // FOLLOW // BACK TO ACCOUNT : WORKING\n      setRoot(parts[3], \"account\");\n    } else {\n      if (parts[0] !== \"*\") {\n        parts.push(\"**\");\n      }\n      value = Social.get(parts.join(\"/\"), \"final\");\n      return value;\n    }\n    // THING //\n  } else if (type === \"thing\") {\n    // path: \"everything\"\n    // type: \"thing\"\n    return rootNode; // Or should \"everything\" be \"*\"?\n    // PROFILE //\n  } else if (type === \"profile\") {\n    value = Social.get(parts.join(\"/\"), \"final\");\n    // POST : WIP //\n  } else if (type === \"post\") {\n    value = path;\n    // NAMETAG : WIP //\n  } else if (type === \"nametag\") {\n    if (parts.length > 2) {\n      if (parts.length === 3) {\n        // BACK TO ACCOUNT\n        setRoot(parts[3], \"account\");\n      } else if (parts.length === 4) {\n        // ALL TAGS BY ACCOUNT\n        value = Social.keys(`${parts[0]}/profile/tags/*`, \"final\");\n      } else {\n        // THIS TAG\n        value = parts[5];\n      }\n    }\n  } else {\n    parts.push(\"**\");\n    value = Social.get(parts.join(\"/\"), \"final\");\n    return value;\n  }\n}\n\nconst node = getNode(state.path, state.type);\n\nreturn (\n  <div>\n    <label htmlFor=\"pathInput\" style={{ marginRight: \"10px\" }}>\n      Enter account name:\n    </label>\n\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\n      <input\n        id=\"pathInput\"\n        type=\"text\"\n        value={inputValue}\n        onChange={handleInputChange}\n        placeholder=\"e.g. hyperfiles.near\"\n      />\n      <button onClick={handleExploreClick}>Explore</button>\n    </div>\n    <hr />\n    <Widget\n      src=\"efiz.near/widget/Node\"\n      props={{\n        label: state.path,\n        node,\n        type: state.type,\n        path: state.path,\n        setPath: setPath,\n        history: state.history,\n        setHistory: setHistory,\n        setType: setType,\n        isRoot: true,\n        styles: {\n          subject: {\n            fontFamily: \"Times New Roman\",\n            fontSize: \"4em\",\n            lineHeight: \"1.25\",\n            fontWeight: 400,\n            cursor: \"pointer\",\n          },\n        },\n      }}\n    />\n  </div>\n);\n", "metadata": {"fork_of": "hyperfiles.near/widget/view.tree@117326834"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/hyperfiles.near/widget/view.tree", "fact_widget_deployments_id": "4988351f06eef359e808d68b4e29bb4d", "inserted_timestamp": "2024-04-21T19:32:54.290Z", "modified_timestamp": "2024-04-21T20:34:42.774Z", "__row_index": 3}