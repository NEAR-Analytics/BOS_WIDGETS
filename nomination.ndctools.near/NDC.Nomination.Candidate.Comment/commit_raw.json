{"tx_hash": "HUHQKyeFCLXFCkdzb5jcrdHUCceNzP9EQDNqGjDQd21h", "action_id_social": "CehE2WLQfezG3435TF5QP8bfJ1uEq6Uuqh8M2o4PgRkv-0-widget", "block_id": 99991600, "block_timestamp": "2023-08-30T08:48:26.314Z", "signer_id": "nomination.ndctools.near", "widget_name": "NDC.Nomination.Candidate.Comment", "source_code": "const { data, nomination_contract } = props;\n\nState.init({\n  showModal: false,\n  hasReply: false,\n  nominationData: Social.getr(`${data.commentator}/nominations`),\n});\n\nconst widgets = {\n  styledComponents: \"nomination.ndctools.near/widget/NDC.StyledComponents\",\n  comment: \"nomination.ndctools.near/widget/NDC.Nomination.Candidate.Comment\",\n};\n\nfunction handleDeleteComment() {\n  Near.call(nomination_contract, \"remove_comment\", {\n    candidate: data.candidate,\n    comment: data.id,\n  });\n}\n\nconst CommentCard = styled.div`\n  width: 100%;\n  display: flex;\n  padding: 14px 16px;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 12px;\n  border-radius: 10px;\n  background: ${(props) => (props.owner ? \"#4ba6ee17\" : \"#fff\")};\n  border: 1px solid ${(props) => (props.owner ? \"#4BA6EE\" : \"#fff\")};\n`;\n\nconst CommentCardHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n`;\n\nconst CommentUserContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst ProfileImageComment = styled.img`\n  width: 20px;\n  height: 20px;\n  flex-shrink: 0;\n  border-radius: 20px;\n`;\n\nconst CommentUser = styled.p`\n  color: #000;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 120%;\n  margin: 0px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst ReplyCounterDiv = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst ReplyIconPurple = styled.img`\n  width: 14px;\n  height: 14px;\n`;\n\nconst ReplyCounterText = styled.p`\n  color: #000;\n  font-size: 10px;\n  font-weight: 500;\n  margin: 0px;\n`;\n\nconst CommentCardContent = styled.p`\n  color: #585b5c;\n  font-size: 12px;\n  line-height: 18px;\n  display: flex;\n  flex-direction: column;\n  margin: 0px;\n`;\n\nconst CommentCardLowerSection = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 4px;\n  width: 100%;\n`;\n\nconst TimestampCommentDiv = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex: 1 0 0;\n`;\n\nconst TimestampIconComment = styled.img`\n  width: 12px;\n  height: 12px;\n`;\n\nconst TimestampTextComment = styled.p`\n  color: #000;\n  font-size: 10px;\n  font-weight: 300;\n  margin: 0px;\n`;\n\nconst CommentButtonDiv = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst DeleteCommentButton = styled.button`\n  display: flex;\n  width: 28px;\n  padding: 2px 12px;\n  justify-content: center;\n  align-items: center;\n  gap: 6px;\n  align-self: stretch;\n  border-radius: 4px;\n  border: 1px solid #c23f38;\n  background: #f1d6d5;\n`;\n\nconst DeleteCommentIcon = styled.img`\n  width: 14px;\n  height: 14px;\n  flex-shrink: 0;\n`;\n\nconst ShareCommentButton = styled.button`\n  display: flex;\n  width: 28px;\n  height: 28px;\n  padding: 2px 12px;\n  justify-content: center;\n  align-items: center;\n  gap: 6px;\n  border-radius: 4px;\n  border: solid 1px transparent;\n  background-image: linear-gradient(white, white),\n    radial-gradient(circle at top left, #9333ea 0%, #4f46e5 100%);\n  background-origin: border-box;\n  background-clip: padding-box, border-box;\n`;\n\nconst ShareCommentIcon = styled.img`\n  width: 14px;\n  height: 14px;\n  flex-shrink: 0;\n`;\n\nconst ReplyCommentButton = styled.div`\n  cursor: pointer;\n  display: flex;\n  padding: 2px 12px;\n  align-items: center;\n  gap: 6px;\n  align-self: stretch;\n  border-radius: 4px;\n  background: var(--buttons-yellow-default, #ffd50d);\n`;\n\nconst ReplyCommentText = styled.p`\n  color: var(--primary-black, #000);\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 24px;\n  margin: 0px;\n`;\n\nconst ReplyCommentIcon = styled.img`\n  width: 14px;\n  height: 14px;\n`;\n\nconst CommentReplySeparator = styled.hr`\n  height: 0px;\n  margin: 16px 0 16px 0;\n  border: 1px solid rgba(208, 214, 217, 1);\n`;\n\nconst ReplyContainer = styled.div`\n  display: flex;\n  width: 260px;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 12px;\n  margin: 0 0 0 35px;\n`;\n\nconst ReplyHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  align-self: stretch;\n`;\n\nconst ReplyContent = styled.p`\n  color: #828688;\n  font-size: 12px;\n  line-height: 120%;\n  margin: 0px;\n`;\n\nconst ReplyLowerSection = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst ReplyButtonSection = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst DeleteReplyButton = styled.button`\n  display: flex;\n  padding: 2px 12px;\n  align-items: center;\n  gap: 6px;\n  align-self: stretch;\n  border-radius: 4px;\n  border: 1px solid #c23f38;\n  background: #f1d6d5;\n`;\n\nconst DeleteReplyText = styled.p`\n  color: #c23f38;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 24px;\n  margin: 0px;\n`;\n\nconst formatName = (name) =>\n  name.length === 64\n    ? `${name.slice(0, 4)}..${name.slice(name.length - 4, name.length)}`\n    : name;\n\nreturn (\n  <CommentCard owner={data.commentator === data.candidate}>\n    <CommentCardHeader>\n      <CommentUserContent>\n        <Widget\n          src=\"mob.near/widget/ProfileImage\"\n          props={{\n            accountId: data.commentator,\n            imageClassName: \"rounded-circle w-100 h-100\",\n            style: { width: \"25px\", height: \"25px\" },\n          }}\n        />\n        <CommentUser>\n          {data.removed ? \"@[deleted]\" : formatName(data.commentator)}\n        </CommentUser>\n      </CommentUserContent>\n    </CommentCardHeader>\n    <CommentCardContent>\n      {data.removed ? (\n        \"This comment was deleted\"\n      ) : (\n        <Widget\n          src=\"mob.near/widget/SocialMarkdown\"\n          props={{ text: data.comment }}\n        />\n      )}\n    </CommentCardContent>\n    <CommentCardLowerSection>\n      <TimestampCommentDiv>\n        <i className=\"bi bi-clock\" />\n        <TimestampTextComment>\n          {new Date(data.timestamp).toDateString()}\n        </TimestampTextComment>\n      </TimestampCommentDiv>\n      <CommentButtonDiv>\n        {data.removed ? (\n          <></>\n        ) : context.accountId == data.commentator ? (\n          <Widget\n            src={widgets.styledComponents}\n            props={{\n              Button: {\n                text: \"Delete\",\n                size: \"sm\",\n                className: \"primary danger\",\n                onClick: handleDeleteComment,\n                icon: <i className=\"bi bi-trash\"></i>,\n              },\n            }}\n          />\n        ) : (\n          <></>\n        )}\n      </CommentButtonDiv>\n    </CommentCardLowerSection>\n  </CommentCard>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nomination.ndctools.near/widget/NDC.Nomination.Candidate.Comment", "fact_widget_deployments_id": "2651e0619527e56a3e1ee8e9f8360807", "inserted_timestamp": "2023-08-30T10:34:11.108Z", "modified_timestamp": "2023-08-30T10:34:11.108Z", "__row_index": 6}