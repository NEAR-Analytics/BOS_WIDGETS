{"tx_hash": "JAZBywaeqzwnvEkzWJhqAj5AJhNprM3EDjuSkkYf34it", "action_id_social": "5XHt7EPgkGdw9Xzz6v4YC2b2Hbey37LfSKJSm6QR7GKv-0-widget", "block_id": 101123025, "block_timestamp": "2023-09-14T17:43:21.920Z", "signer_id": "opencann.near", "widget_name": "substance.page", "source_code": "const path = props.path;\r\nconst blockHeight = props.blockHeight;\r\n\r\nconst eventThing = Social.getr(path, blockHeight);\r\n\r\nif (!eventThing) {\r\n  return <div>Loading...</div>;\r\n}\r\n\r\nconst {\r\n  title,\r\n  description,\r\n  start,\r\n  startTime,\r\n  end,\r\n  endTime,\r\n  location,\r\n  link,\r\n  organizer,\r\n  isAllDay,\r\n  category,\r\n  logo,\r\n  background,\r\n  hashTags,\r\n} = eventThing.data;\r\n\r\nconst startDate = new Date(`${start} ${startTime}`);\r\nconst endDate = new Date(`${end} ${endTime}`);\r\n\r\nconst formatDate = () => {\r\n  const eventStartDate = startDate.toLocaleString(\"en-is\", {\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  });\r\n  const eventStartTime = `${startDate.getHours()}:${startDate.getMinutes()}`;\r\n\r\n  const eventEndDate = endDate.toLocaleString(\"en-is\", {\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  });\r\n  const eventEndTime = `${endDate.getHours()}:${endDate.getMinutes()}`;\r\n\r\n  if (startDate.getDate() === endDate.getDate()) {\r\n    return `${eventStartDate} @ ${eventStartTime} - ${eventEndTime}`;\r\n  } else {\r\n    return `${eventStartDate} @ ${eventStartTime} - ${eventEndDate} @ ${eventEndTime}`;\r\n  }\r\n};\r\n\r\nconst tags = JSON.parse(hashTags);\r\n\r\nreturn (\r\n  <>\r\n    <div className=\"container\">\r\n      <div className=\"shadow mb-5 rounded\">\r\n        <div className=\"position-relative \">\r\n          {/* Background Image */}\r\n          <Widget\r\n            src=\"mob.near/widget/Image\"\r\n            props={{\r\n              image: background,\r\n              alt: \"event background\",\r\n              className: \"img-fluid rounded-top mb-3 shadow\",\r\n              style: { width: \"100%\", height: \"14rem\", objectFit: \"cover\" },\r\n              fallbackUrl:\r\n                \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\r\n            }}\r\n          />\r\n\r\n          <Widget\r\n            src=\"mob.near/widget/Image\"\r\n            props={{\r\n              image: logo,\r\n              alt: \"event logo\",\r\n              className: \"rounded-circle position-absolute shadow\",\r\n              style: {\r\n                width: \"128px\",\r\n                height: \"128px\",\r\n                objectFit: \"cover\",\r\n                bottom: -25,\r\n                left: 25,\r\n              },\r\n              fallbackUrl:\r\n                \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"mt-5 ms-3\">\r\n          <div className=\"d-flex flex-column\">\r\n            {/* Event Title */}\r\n            <h3>{title}</h3>\r\n\r\n            {/* Organizer */}\r\n            <p>\r\n              <i className=\"bi bi-person me-2\"></i>\r\n              {organizer}\r\n            </p>\r\n\r\n            {/* Event Description */}\r\n            <div>\r\n              <Widget\r\n                src=\"efiz.near/widget/every.markdown.view\"\r\n                props={{ data: description }}\r\n              />\r\n            </div>\r\n\r\n            {/* Time */}\r\n            <p>\r\n              <i className=\"bi bi-calendar-event me-2\"></i>\r\n              {formatDate()}\r\n            </p>\r\n\r\n            {/* Link */}\r\n            {link && (\r\n              <p>\r\n                <i className=\"bi bi-box-arrow-up-right me-2\"></i>\r\n                <a href={link}>{link}</a>\r\n              </p>\r\n            )}\r\n\r\n            {/* Location */}\r\n            {location && (\r\n              <p>\r\n                <i className=\"bi bi-pin-map me-2\"></i>\r\n                {location}\r\n              </p>\r\n            )}\r\n\r\n            {/* Hashtags */}\r\n            {tags.length !== 0 && (\r\n              <div className=\"d-flex\">\r\n                <i className=\"bi bi-hash me-2\"></i>\r\n                <p>\r\n                  {tags.map((item) => (\r\n                    <span className=\"badge bg-primary me-1\">#{item}</span>\r\n                  ))}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Widget\r\n        src=\"every.near/widget/every.feed.view\"\r\n        props={{\r\n          data: {\r\n            typeWhitelist: [\"md\"],\r\n            sources: [\r\n              {\r\n                domain: \"post\",\r\n                key: \"main\",\r\n              },\r\n            ],\r\n            hashtagWhitelist: tags,\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/opencann.near/widget/substance.page", "fact_widget_deployments_id": "d1ba98ac29434e30393318a9a9766d1a", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}