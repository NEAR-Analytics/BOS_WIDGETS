{"tx_hash": "3PvQkxe7bck2xXRVKErPG84rWUZD4JkYLxSH8yGnkfoX", "action_id_social": "4UpfdDQXUVkobAFmp8L2Y26XkptvtdrSwJ5mZrCQ7JpJ-0-widget", "block_id": 101122836, "block_timestamp": "2023-09-14T17:39:37.655Z", "signer_id": "opencann.near", "widget_name": "substance.new", "source_code": "const UUID = {\r\n  generate: (template) => {\r\n    if (typeof template !== \"string\") {\r\n      template = \"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx\";\r\n    }\r\n    return template.replace(/[xy]/g, (c) => {\r\n      var r = (Math.random() * 16) | 0;\r\n      var v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    });\r\n  },\r\n};\r\n\r\nconst accountId = context.accountId;\r\n\r\nif (!accountId) {\r\n  return \"Please connect your NEAR account\";\r\n}\r\n\r\nconst addSubstance = (target) => {\r\n  const thingId = target.data.id;\r\n\r\n  // index new substance\r\n  Social.set({\r\n    thing: {\r\n      [thingId]: target,\r\n    },\r\n    index: {\r\n      every: JSON.stringify({\r\n        key: \"every.near/type/substance\",\r\n        value: {\r\n          type: \"every.near/type/substance\",\r\n          id: thingId,\r\n        },\r\n      }),\r\n    },\r\n  });\r\n\r\n  State.update({ substance: target });\r\n};\r\n\r\nconst proposeSubstance = (target) => {\r\n  console.log(target);\r\n};\r\n\r\nreturn (\r\n  <>\r\n    <div>\r\n      <Widget\r\n        src=\"itexpert120-contra.near/widget/EventForm\"\r\n        props={{\r\n          addSubstance: addSubstance,\r\n          proposeSubstance: proposeSubstance,\r\n        }}\r\n      />\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/opencann.near/widget/substance.new", "fact_widget_deployments_id": "98522507ebba7bb6bd2dacacf5158194", "inserted_timestamp": "2023-09-14T19:36:38.371Z", "modified_timestamp": "2023-09-14T19:36:38.371Z", "__row_index": 0}