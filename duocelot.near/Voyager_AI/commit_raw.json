{"tx_hash": "Ac7nGE5NoBPSZGoMnJHoyq5j85cSgweCpGNifQqhsGXs", "action_id_social": "Aruj8Jr9qozzJ4BcoaWzquypDR2TfQKKsAJrzdsxGTTy-0-widget", "block_id": 98093298, "block_timestamp": "2023-08-05T00:33:18.860Z", "signer_id": "duocelot.near", "widget_name": "Voyager_AI", "source_code": "const accountId = context.accountId;\r\n\r\n<Widget src=\"duocelot.near/widget/error_001\" />;\r\n\r\ninitState({\r\n  img: {},\r\n  prompt:\r\n    \"a landscape mythical, clouds, sunset, sunrays, flare, 8k photorealistic, watercolor, cinematic lighting, HD, high details, atmospheric\",\r\n  seed: null,\r\n  rollImg:\r\n    \"https://ipfs.fleek.co/ipfs/bafybeih7tutznkvbuecy3nfmpwo7q5w7kzyqwdvlipjtcyqevnkpz2jf44\",\r\n  blur: 0,\r\n  width: \"auto\",\r\n  steps: 20,\r\n  scale: 7,\r\n});\r\n\r\nasync function uploadGeneratedImageToIpfs(imgSrc) {\r\n  const response = await fetch(imgSrc);\r\n  const blob = await response.blob();\r\n  const formData = new FormData();\r\n  formData.append(\"file\", blob);\r\n\r\n  const ipfsResponse = await fetch(\"https://ipfs.near.social/add\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n    },\r\n    body: formData,\r\n  });\r\n\r\n  const ipfsData = await ipfsResponse.json();\r\n  State.update({\r\n    img: {\r\n      cid: ipfsData.cid,\r\n    },\r\n  });\r\n}\r\n\r\nfunction rollImage() {\r\n  var seed = Math.trunc(Math.random() * 100000000);\r\n  state.seed = seed;\r\n  state.blur = 3;\r\n  State.update(state);\r\n\r\n  var imgSrc = `https://i.gpux.ai/gpux/sdxl?return_grid=true&prompt=${state.seed}&scale=${state.scale}&image_count=1&steps=${state.steps}&prompt=${state.prompt}`;\r\n\r\n  uploadGeneratedImageToIpfs(imgSrc);\r\n}\r\n\r\nvar imgSrc =\r\n  \"https://ipfs.fleek.co/ipfs/bafybeih7tutznkvbuecy3nfmpwo7q5w7kzyqwdvlipjtcyqevnkpz2jf44\";\r\nif (state.seed) {\r\n  imgSrc = `https://i.gpux.ai/gpux/sdxl?return_grid=true&prompt=${state.seed}&image_count=1&steps=${state.steps}&prompt=${state.prompt}`;\r\n}\r\n\r\nfunction deleteImage() {\r\n  state.imgRaw = null;\r\n  State.update(state);\r\n}\r\n\r\nreturn (\r\n  <div\r\n    style={{\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      background: \"linear-gradient(to right, black, #3a0201, black)\",\r\n      backgroundSize: \"100% 100%\",\r\n      backgroundPosition: \"center\",\r\n      position: \"relative\",\r\n      overflow: \"hidden\",\r\n      zIndex: 0,\r\n    }}\r\n  >\r\n    <div style={{ width: \"100%\" }}>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeihafj7gtw6jrwxb5xjyk22hy642hgwn2rjqguarkpvun5myovtb5i)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"162px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <img\r\n          src=\"https://ipfs.fleek.co/ipfs/bafybeihjvub4e3yqyazxr62dxpbohji45wnx7hp7gadxjbiet2nrgkhapy\"\r\n          alt=\"VG Logo\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeiazlfekaws35jiqvesssae66xybdsutug7ab7moumr2t35vntbleu)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"81px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        <div style={{ width: \"auto\" }}>\r\n          <input\r\n            type=\"text\"\r\n            value={state.prompt}\r\n            style={{\r\n              width: \"auto\",\r\n              backgroundColor: \"black\",\r\n              color: \"white\",\r\n              fontFamily: '\"Press Start 2P\", sans-serif',\r\n              border: \"1px solid #3a0201\",\r\n            }}\r\n            onChange={(e) => {\r\n              state.prompt = e.target.value;\r\n              State.update(state);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeiapzstltgyd6pyibvlgkg62wdsuqvbp2wqbwuqxmjhazxm7tgh2ee)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"15px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      ></div>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeibzasxppb76w62uje25cioacxzh5olpf76jezydpiywno5ab2zmqy)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"81px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        <div>\r\n          <input\r\n            type=\"range\"\r\n            min={0}\r\n            max={20}\r\n            value={state.scale}\r\n            onChange={(e) => {\r\n              state.scale = e.target.value;\r\n              State.update(state);\r\n            }}\r\n            style={{\r\n              width: \"100px\",\r\n              backgroundColor: \"black\",\r\n              color: \"white\",\r\n              fontFamily: '\"Press Start 2P\", sans-serif',\r\n              margin: \"10px 10px 10px 10px\",\r\n              border: \"1px solid #3a0201\",\r\n            }}\r\n          />\r\n          <a>CFG {state.scale}</a>\r\n        </div>\r\n        <div>\r\n          <input\r\n            type=\"range\"\r\n            min={1}\r\n            max={150}\r\n            value={state.steps}\r\n            onChange={(e) => {\r\n              state.steps = e.target.value;\r\n              State.update(state);\r\n            }}\r\n            style={{\r\n              width: \"100px\",\r\n              backgroundColor: \"black\",\r\n              color: \"white\",\r\n              fontFamily: '\"Press Start 2P\", sans-serif',\r\n              margin: \"10px 10px 10px 10px\",\r\n              border: \"1px solid #3a0201\",\r\n            }}\r\n          />\r\n          <a>STEPS {state.steps}</a>\r\n        </div>\r\n\r\n        <button\r\n          onClick={(e) => rollImage()}\r\n          style={{\r\n            width: \"200px\",\r\n            backgroundColor: \"black\",\r\n            color: \"white\",\r\n            fontFamily: '\"Press Start 2P\", sans-serif',\r\n            margin: \"20px 20px 20px 20px\",\r\n            border: \"1px solid #3a0201\",\r\n          }}\r\n        >\r\n          Generate\r\n        </button>\r\n      </div>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeiaye7rrdceoz44waxyn5ozulhopx6pbq7d4336cn6nenjwxuftsbe)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"8px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      ></div>\r\n      <div>\r\n        <div\r\n          style={{\r\n            backgroundImage:\r\n              \"url(https://ipfs.fleek.co/ipfs/bafybeihdd765olkr6w2d5p7tiv3cyjqae4eh3b3aokyezyksi65alswybu)\",\r\n            backgroundSize: \"auto\",\r\n            backgroundPosition: \"center\",\r\n            backgroundRepeat: \"no-repeat\",\r\n            height: \"526px\",\r\n            color: \"#333\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              border: \"2px solid red\",\r\n              backgroundImage:\r\n                \"url(https://fleek.ipfs.io/ipfs/bafybeih7tutznkvbuecy3nfmpwo7q5w7kzyqwdvlipjtcyqevnkpz2jf44)\",\r\n              backgroundSize: \"auto\",\r\n              backgroundPosition: \"center\",\r\n              backgroundRepeat: \"no-repeat\",\r\n              height: \"524px\",\r\n              width: \"524px\",\r\n              color: \"#333\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <img\r\n              src=\"https://ipfs.fleek.co/ipfs/bafybeiburel4azxripu5f6awh6azhitxbptqovppliyav6ilwndswk6yeq\"\r\n              style={{ position: \"absolute\", zIndex: 1 }}\r\n            />\r\n            <img\r\n              src={state.imgRaw}\r\n              onLoad={(e) => {\r\n                state.blur = 0;\r\n                State.update(state);\r\n              }}\r\n              style={{\r\n                filter: `blur(${state.blur}px)`,\r\n                zIndex: 0,\r\n                objectFit: \"cover\",\r\n                width: \"524px\",\r\n                height: \"524px\",\r\n              }}\r\n            />\r\n          </div>\r\n          {state.imgRaw && (\r\n            <div>\r\n              <button onClick={uploadImageToIpfs}>Upload to IPFS</button>\r\n              <button onClick={deleteImage}>Delete</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeihm5fiwy6dos2f4hiz67yaan3jafkndw5zkh23mb5rnue7qu6rh2y)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"123px\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      ></div>\r\n      <div\r\n        style={{\r\n          backgroundImage:\r\n            \"url(https://ipfs.fleek.co/ipfs/bafybeiamgwdx5uhhbgt7usn2wjxybn2b265mubicdj7bkyawgzjrmb22l4)\",\r\n          backgroundSize: \"auto\",\r\n          backgroundPosition: \"center\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          height: \"523px\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      ></div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/duocelot.near/widget/Voyager_AI", "fact_widget_deployments_id": "640fcc20e0a5b0db2c3c07e921a37757", "inserted_timestamp": "2023-08-05T01:57:55.517Z", "modified_timestamp": "2023-08-05T01:57:55.517Z", "__row_index": 9}