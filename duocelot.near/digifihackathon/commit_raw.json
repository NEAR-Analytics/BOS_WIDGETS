{"tx_hash": "FpvamwgZbaWWVnjN6Etm3qUD64RMTYUjv8iYuznrC6ip", "action_id_social": "BNBrzgtTYcYRZJFpviVcD6dxzeYvs1STwzHVsLpy9dFZ-0-widget", "block_id": 100993643, "block_timestamp": "2023-09-12T23:32:15.018Z", "signer_id": "duocelot.near", "widget_name": "digifihackathon", "source_code": "const accountId = props.accountId ?? context.accountId;\r\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\r\n\r\nconst commonStyles = {\r\n  width: \"100%\",\r\n  height: \"100vh\",\r\n  background: \"#415697\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  fontFamily: '\"Press Start 2P\", sans-serif',\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nif (!accountId) {\r\n  return (\r\n    <div style={commonStyles}>\r\n      <img\r\n        src=\"https://ipfs.near.social/ipfs/bafkreid25lsb6p73u3zpb7et23qc66fe63knsi22xneuzo3of4m4dnjqgu\"\r\n        alt=\"coinTAG\"\r\n        style={{\r\n          height: \"200px\",\r\n          width: \"200px\",\r\n          marginBottom: \"20px\",\r\n        }}\r\n      />\r\n      <h2 style={{ fontSize: \"14px\", color: \"white\" }}>\r\n        VOCE NAO ESTA LOGADO.\r\n      </h2>\r\n      <h3 style={{ fontSize: \"16px\", color: \"white\", textAlign: \"center\" }}>\r\n        CONECTE COM SUA\r\n      </h3>\r\n      <h3 style={{ fontSize: \"16px\", color: \"white\", textAlign: \"center\" }}>\r\n        CARTEIRA NEAR\r\n      </h3>\r\n      <h3 style={{ fontSize: \"16px\", color: \"white\", textAlign: \"center\" }}>\r\n        CRIE UMA CLICANDO\r\n      </h3>\r\n      <a\r\n        href=\"https://shard.dog/humansofbrazil\"\r\n        style={{\r\n          fontSize: \"24px\",\r\n          color: \"white\",\r\n          margin: \"20px 10px\",\r\n          textDecoration: \"underline\",\r\n        }}\r\n      >\r\n        AQUI\r\n      </a>\r\n      <img\r\n        src=\"https://ipfs.near.social/ipfs/bafkreiex77ly3hboiiyile6j2v3cjwhuaang2r4lqagdbld6fyvnzm4u6i\"\r\n        alt=\"QR Code\"\r\n        style={{\r\n          width: \"200px\",\r\n          height: \"AUTO\",\r\n          marginTop: \"20px\",\r\n        }}\r\n      />\r\n      <h3 style={{ fontSize: \"16px\", color: \"white\", textAlign: \"center\" }}>\r\n        OU SCANEIE O QRCODE\r\n      </h3>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Initialize state\r\nState.init({\r\n  entries: [],\r\n  prompt: \"\",\r\n  transaction: \"\",\r\n  dateInfo: \"\",\r\n});\r\n\r\nconst handleApply = () => {\r\n  if (state.prompt.trim()) {\r\n    const entryText = state.prompt;\r\n    const transactionText = state.transaction;\r\n    const dateInfoText = state.dateInfo;\r\n    const selectedOption =\r\n      state.choose && state.choose.length ? state.choose[0] : \"\";\r\n    const combinedText = `${selectedOption}: ${entryText} | Transaction: ${transactionText} | Date: ${dateInfoText}`;\r\n    State.update({\r\n      entries: [...state.entries, combinedText],\r\n      prompt: \"\",\r\n      transaction: \"\",\r\n      dateInfo: \"\",\r\n    });\r\n  }\r\n};\r\n\r\nfunction convertToCSV(array) {\r\n  return array.join(\"\\r\\n\");\r\n}\r\n\r\nfunction downloadCSV() {\r\n  let csv = convertToCSV(state.entries);\r\n  let blob = new Blob([\"\\ufeff\" + csv], { type: \"text/csv;charset=utf-8;\" });\r\n  let link = document.createElement(\"a\");\r\n\r\n  if (link.download !== undefined) {\r\n    let url = URL.createObjectURL(blob);\r\n    link.setAttribute(\"href\", url);\r\n    link.setAttribute(\"download\", \"tags.csv\");\r\n    link.style.visibility = \"hidden\";\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n}\r\n\r\nconst options = [\"DESPESA\", \"RECEITA\", \"ATIVO\", \"PASSIVO\"];\r\n\r\nreturn (\r\n  <div\r\n    style={{\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      background: \"linear-gradient(to right, white, black, white)\",\r\n      backgroundSize: \"100% 100%\",\r\n      backgroundPosition: \"center\",\r\n      position: \"relative\",\r\n      overflow: \"hidden\",\r\n      zIndex: 0,\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n    }}\r\n  >\r\n    <div style={{ width: \"80%\" }}>\r\n      {/* Image Section */}\r\n      <div\r\n        style={{\r\n          background: \"#415697\",\r\n          height: \"262px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <img\r\n          src=\"https://ipfs.near.social/ipfs/bafkreid25lsb6p73u3zpb7et23qc66fe63knsi22xneuzo3of4m4dnjqgu\"\r\n          alt=\"coinTAG\"\r\n          style={{\r\n            height: \"200px\",\r\n            width: \"200px\",\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Welcome Section */}\r\n      <div\r\n        style={{\r\n          background: \"#1b2441\",\r\n          height: \"181px\",\r\n          width: \"100%\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        {\" \"}\r\n        <Widget\r\n          src=\"mob.near/widget/ProfileImage\"\r\n          props={{\r\n            profile,\r\n            fast,\r\n            accountId,\r\n            style: { width: \"4rem\", height: \"4rem\", marginRight: \"10px\" },\r\n            className: \"mb-2\",\r\n            imageClassName: \"rounded-circle w-100 h-100 img-thumbnail d-block\",\r\n            thumbnail: false,\r\n          }}\r\n        />\r\n        <span>Bem Vindo {accountId}</span>\r\n      </div>\r\n\r\n      {/* Input Section */}\r\n      <div\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          height: \"auto\",\r\n          padding: \"20px 0\",\r\n          width: \"100%\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"space-between\",\r\n          position: \"relative\",\r\n        }}\r\n      >\r\n        <p\r\n          style={{\r\n            color: \"black\",\r\n            fontFamily: '\"Press Start 2P\", sans-serif',\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          Escreva a TAG\r\n        </p>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            marginBottom: \"10px\",\r\n            width: \"100%\",\r\n            gap: \"10px\",\r\n            paddingLeft: \"10px\",\r\n            paddingRight: \"10px\",\r\n          }}\r\n        >\r\n          <hr />\r\n          <div>\r\n            <Typeahead\r\n              options={options}\r\n              onChange={(value) => {\r\n                State.update({ choose: value.slice(0, 1) }); // Keep only the first selection\r\n              }}\r\n              placeholder=\"Tipo de Transa\u00e7\u00e3o\"\r\n            />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            value={state.prompt}\r\n            placeholder=\"Descri\u00e7\u00e3o\"\r\n            style={{\r\n              flex: 2,\r\n              backgroundColor: \"black\",\r\n              color: \"white\",\r\n              fontFamily: '\"Press Start 2P\", sans-serif',\r\n              border: \"1px solid white\",\r\n            }}\r\n            onChange={(e) => {\r\n              state.prompt = e.target.value;\r\n              State.update(state);\r\n            }}\r\n          />\r\n          <button\r\n            style={{\r\n              flex: 1,\r\n              backgroundColor: state.prompt.trim() ? \"#000\" : \"#aaa\",\r\n              color: state.prompt.trim() ? \"#fff\" : \"#888\",\r\n              cursor: state.prompt.trim() ? \"pointer\" : \"not-allowed\",\r\n              marginLeft: \"10px\",\r\n              marginRight: \"10px\",\r\n            }}\r\n            onClick={handleApply}\r\n            disabled={!state.prompt.trim()}\r\n          >\r\n            APLICAR\r\n          </button>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          value={state.transaction}\r\n          placeholder=\"Transa\u00e7\u00e3o\"\r\n          style={{\r\n            flex: 2,\r\n            backgroundColor: \"black\",\r\n            color: \"white\",\r\n            fontFamily: '\"Press Start 2P\", sans-serif',\r\n            border: \"1px solid white\",\r\n            marginTop: \"10px\",\r\n          }}\r\n          onChange={(e) => {\r\n            state.transaction = e.target.value;\r\n            State.update(state);\r\n          }}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          value={state.dateInfo}\r\n          placeholder=\"Data\"\r\n          pattern=\"\\d{2}/\\d{2}/\\d{4} \\d{2}:\\d{2}\"\r\n          style={{\r\n            flex: 2,\r\n            backgroundColor: \"black\",\r\n            color: \"white\",\r\n            fontFamily: '\"Press Start 2P\", sans-serif',\r\n            border: \"1px solid white\",\r\n            marginTop: \"10px\",\r\n          }}\r\n          onChange={(e) => {\r\n            state.dateInfo = e.target.value;\r\n            State.update(state);\r\n          }}\r\n        />\r\n        <p> Selected: {JSON.stringify(state.choose)} </p>\r\n        <button onClick={downloadCSV}>Exportar CSV</button>\r\n      </div>\r\n\r\n      {/* Tags Display Section */}\r\n      <div\r\n        style={{\r\n          background: \"orange\",\r\n          height: \"auto\",\r\n          width: \"100%\",\r\n          color: \"#000\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"flex-start\",\r\n          padding: \"10px 0\",\r\n          overflowY: \"auto\",\r\n        }}\r\n      >\r\n        {state.entries.map((entry, index) => (\r\n          <div\r\n            key={index}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n              width: \"80%\",\r\n              padding: \"5px\",\r\n              background: \"white\",\r\n              borderRadius: \"5px\",\r\n              margin: \"10px 0\",\r\n              marginLeft: \"10px\",\r\n              marginRight: \"10px\",\r\n            }}\r\n          >\r\n            <span>{entry}</span>\r\n            <input type=\"checkbox\" className=\"squareCheckbox\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Widget Section */}\r\n      <div\r\n        style={{\r\n          background: \"#415697\",\r\n          height: \"auto\",\r\n          width: \"100%\",\r\n          color: \"#333\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <div style={{ width: \"100%\", height: \"100%\", overflow: \"hidden\" }}>\r\n          <Widget\r\n            src=\"near/widget/Explorer.Account\"\r\n            props={{\r\n              accountId,\r\n              network: context.networkId,\r\n              language: \"en\",\r\n              baseUrl: props.baseUrl,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/duocelot.near/widget/digifihackathon", "fact_widget_deployments_id": "2978dcd5222371fa698f8faa01a13c65", "inserted_timestamp": "2023-09-13T01:09:48.370Z", "modified_timestamp": "2023-09-13T01:09:48.370Z", "__row_index": 0}