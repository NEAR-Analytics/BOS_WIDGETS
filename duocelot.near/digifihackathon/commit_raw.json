{"tx_hash": "311eVweyhyCn7WroyXkL5Ch7KB5gmvLcvFqwMuZSCYjQ", "action_id_social": "AFTkSPbNbQrgYkSnTe85uKKjeyBjLqFnxL1VecC5TEMb-0-widget", "block_id": 100711374, "block_timestamp": "2023-09-09T04:45:53.061Z", "signer_id": "duocelot.near", "widget_name": "digifihackathon", "source_code": "const accountId = props.accountId ?? context.accountId;\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\n\n// Initialize state\nState.init({\n  isLoaded: false,\n  entries: [],\n  prompt: \"\",\n});\n\nconst handleApply = () => {\n  if (state.prompt.trim()) {\n    State.update({ entries: [...state.entries, state.prompt], prompt: \"\" });\n  }\n};\n\nfunction convertToCSV(objArray) {\n  const array = typeof objArray !== \"object\" ? JSON.parse(objArray) : objArray;\n  let str = \"\";\n\n  for (let i = 0; i < array.length; i++) {\n    let line = \"\";\n    for (let index in array[i]) {\n      if (line !== \"\") line += \",\";\n      line += array[i][index];\n    }\n    str += line + \"\\r\\n\";\n  }\n  return str;\n}\n\nfunction downloadCSV(tags) {\n  let csv = convertToCSV(tags);\n  let blob = new Blob([\"\\ufeff\" + csv], { type: \"text/csv;charset=utf-8;\" });\n  let link = document.createElement(\"a\");\n\n  if (link.download !== undefined) {\n    let url = URL.createObjectURL(blob);\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"tags.csv\");\n    link.style.visibility = \"hidden\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n}\n\nreturn (\n  <div\n    style={{\n      width: \"100%\",\n      height: \"100%\",\n      background: \"linear-gradient(to right, white, black, white)\",\n      backgroundSize: \"100% 100%\",\n      backgroundPosition: \"center\",\n      position: \"relative\",\n      overflow: \"hidden\",\n      zIndex: 0,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    }}\n  >\n    <div style={{ width: \"80%\" }}>\n      <div\n        style={{\n          background: \"#415697\",\n          height: \"262px\",\n          width: \"100%\",\n          color: \"#fff\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <img\n          src=\"https://ipfs.near.social/ipfs/bafkreid25lsb6p73u3zpb7et23qc66fe63knsi22xneuzo3of4m4dnjqgu\"\n          alt=\"coinTAG\"\n          style={{\n            height: \"200px\",\n            width: \"200px\",\n          }}\n        />\n      </div>\n      <div\n        style={{\n          background: \"#1b2441\",\n          height: \"181px\",\n          width: \"100%\",\n          color: \"#fff\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Widget\n          src=\"mob.near/widget/ProfileImage\"\n          props={{\n            profile,\n            fast,\n            accountId,\n            style: { width: \"4rem\", height: \"4rem\", marginRight: \"10px\" },\n            className: \"mb-2\",\n            imageClassName: \"rounded-circle w-100 h-100 img-thumbnail d-block\",\n            thumbnail: false,\n          }}\n        />\n        <span>Bem Vindo {accountId}</span>\n      </div>\n      <div\n        style={{\n          backgroundColor: \"white\",\n          height: \"250px\",\n          padding: \"20px 0\",\n          width: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          position: \"relative\",\n        }}\n      >\n        <p\n          style={{\n            color: \"black\",\n            fontFamily: '\"Press Start 2P\", sans-serif',\n            marginBottom: \"10px\",\n          }}\n        >\n          Escreva a TAG\n        </p>\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginBottom: \"10px\",\n            width: \"100%\",\n            gap: \"10px\",\n            paddingLeft: \"10px\",\n            paddingRight: \"10px\",\n          }}\n        >\n          <input\n            type=\"text\"\n            value={state.prompt}\n            style={{\n              flex: 2,\n              backgroundColor: \"black\",\n              color: \"white\",\n              fontFamily: '\"Press Start 2P\", sans-serif',\n              border: \"1px solid white\",\n            }}\n            onChange={(e) => {\n              state.prompt = e.target.value;\n              State.update(state);\n            }}\n          />\n          <button\n            style={{\n              flex: 1,\n              backgroundColor: state.prompt.trim() ? \"#000\" : \"#aaa\",\n              color: state.prompt.trim() ? \"#fff\" : \"#888\",\n              cursor: state.prompt.trim() ? \"pointer\" : \"not-allowed\",\n              marginLeft: \"10px\",\n              marginRight: \"10px\",\n            }}\n            onClick={handleApply}\n            disabled={!state.prompt.trim()}\n          >\n            APLICAR\n          </button>\n        </div>\n        <button onClick={() => downloadCSV(state.tags)}>Export CSV</button>\n      </div>\n      <div\n        style={{\n          background: \"orange\",\n          height: \"330px\",\n          width: \"100%\",\n          color: \"#000\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"flex-start\", // Changed to flex-start\n          padding: \"10px 0\",\n          overflowY: \"auto\",\n        }}\n      >\n        {state.entries.map((entry, index) => (\n          <div\n            key={index}\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              width: \"80%\",\n              padding: \"5px\",\n              background: \"white\",\n              borderRadius: \"5px\",\n              margin: \"10px 0\",\n              marginLeft: \"10px\",\n              marginRight: \"10px\",\n            }}\n          >\n            <span>{entry}</span>\n            <input type=\"checkbox\" className=\"squareCheckbox\" />\n          </div>\n        ))}\n      </div>\n      <div\n        style={{\n          background: \"#415697\",\n          height: \"126px\",\n          width: \"100%\",\n          color: \"#333\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      ></div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/duocelot.near/widget/digifihackathon", "fact_widget_deployments_id": "984073871205459773795d1192039899", "inserted_timestamp": "2023-09-09T06:43:27.892Z", "modified_timestamp": "2023-09-09T06:43:27.892Z", "__row_index": 30}