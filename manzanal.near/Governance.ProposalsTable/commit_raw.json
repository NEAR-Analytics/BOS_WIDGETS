{"tx_hash": "FMTUEtzKdS49gBCmKN5C5wrSMgVC98tDdt4vkWMa1A9o", "action_id_social": "8upo63ck4siHTByhru82w5zohqDcBLj9TiwMfjAV2AKY-0-widget", "block_id": 96159186, "block_timestamp": "2023-07-10T16:48:33.031Z", "signer_id": "manzanal.near", "widget_name": "Governance.ProposalsTable", "source_code": "const proposals = props.proposals;\nconst authorId = \"manzanal.near\";\nconst contractId = \"v003.mpip.near\";\nState.init({});\nconst yoctoToNear = (amountYocto) =>\n  new Big(amountYocto).div(new Big(10).pow(24)).toFixed(0);\n\nconst formatStatus = (status) => {\n  switch (status) {\n    case \"VotingProcess\":\n      return \"In Progress\";\n    case \"Draft\":\n      return \"Draft\";\n    case \"Active\":\n      return \"Active\";\n    case \"Accepted\":\n      return \"Succeeded\";\n    case \"Rejected\":\n      return \"Rejected\";\n    case \"Canceled\":\n      return \"Canceled\";\n  }\n};\n\nconst getProposalState = (mpip_id) => {\n  const state = Near.view(contractId, \"get_proposal_state\", {\n    mpip_id,\n  });\n  return formatStatus(state);\n};\nconst getProposalVotes = (mpip_id) => {\n  const proposalVotes = Near.view(contractId, \"get_proposal_votes\", {\n    mpip_id,\n  });\n  if (!proposalVotes.has_voted.length) return \"-\";\n  const voting_power = proposalVotes.has_voted.reduce(\n    (accumulator, vote) => accumulator + parseInt(vote.voting_power),\n    0\n  );\n  return yoctoToNear(voting_power);\n};\n\nconst Link = styled.a`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  text-align: center;\n  color: #66a0ff;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5em;\n\n  svg {\n    transition: transform 0.2s ease-in-out;\n  }\n\n  &:hover {\n    svg {\n      transform: translateX(5px) scale(1.1);\n    }\n  }\n`;\n\nreturn (\n  <div class=\"table-responsive w-100 mt-2\">\n    <table class=\"table table-striped table-bordered\">\n      <thead>\n        <tr>\n          <th class=\"text-center\">MPIP</th>\n          <th class=\"text-center\">Title</th>\n          <th class=\"text-center\">Short Description</th>\n          <th class=\"text-center\">Status</th>\n          <th class=\"text-center\">Voting Start</th>\n          <th class=\"text-center\">Voting End </th>\n          <th class=\"text-center\">Voting Power</th>\n        </tr>\n      </thead>\n      <tbody>\n        {!proposals || (proposals.length == 0 && <>No proposals created</>)}\n        {proposals.length > 0 &&\n          proposals.map((proposal) => (\n            <tr className=\"align-middle\">\n              <td class=\"text-start\">\n                <span>{proposal.mpip_id}</span>\n              </td>\n              <td class=\"text-center\">\n                <a\n                  href={`/${authorId}/widget/Governance.Index?tab=proposal&mpip_id=${proposal.mpip_id}`}\n                  onClick={() =>\n                    props.update({\n                      tab: \"proposal\",\n                      mpip_id,\n                    })\n                  }\n                >\n                  {proposal.title}\n                </a>\n              </td>\n              <td class=\"text-end text-nowrap\">{proposal.short_description}</td>\n              <td class=\"text-end\">{getProposalState(proposal.mpip_id)}</td>\n              <td class=\"text-end\">\n                {proposal.vote_start_timestamp\n                  ? new Date(\n                      Number(proposal.vote_start_timestamp)\n                    ).toLocaleDateString()\n                  : \"-\"}\n              </td>\n\n              <td class=\"text-end text-nowrap\">\n                {proposal.vote_end_timestamp\n                  ? new Date(\n                      Number(proposal.vote_end_timestamp)\n                    ).toLocaleDateString()\n                  : \"-\"}\n              </td>\n              <td class=\"text-end text-nowrap\">\n                {getProposalVotes(proposal.mpip_id)}\n              </td>\n            </tr>\n          ))}\n      </tbody>\n    </table>\n  </div>\n);\n", "metadata": {"platform": "Components.gg"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/manzanal.near/widget/Governance.ProposalsTable", "fact_widget_deployments_id": "9bbb0224f396ad179126bc08220c26ca", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 0}