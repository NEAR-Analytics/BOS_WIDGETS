{"tx_hash": "AYmyqW693TE4X5U3VHpQHCsWHL3HYXP8joKhWE9eVs1e", "action_id_social": "5tbn81725NS3UwsGZtdXTouSb3GGpKZuaamoAwPxvNhs-0-widget", "block_id": 98444666, "block_timestamp": "2023-08-09T20:26:07.689Z", "signer_id": "1386e29ec7f4c7f33a83b268feadc5307d2136b197de0f2823cbb729c23549ef", "widget_name": "Top-Trending-Slider", "source_code": "State.init({\r\n  slide: [],\r\n  wichSlide: 0,\r\n});\r\n\r\nconst data = fetch(\r\n  `https://flipsidecrypto.xyz/api/discover/get?d_sort=terend&d_project=${props.project}&d_page=1`\r\n);\r\n\r\nlet tableRows = [];\r\n\r\nfor (let i = 0; i < 4; i++) {\r\n  const frank = data.body.dashboards[i];\r\n  //some avatarUrl are Null , so replace Nulls with the avatar below\r\n  let avatarUrl;\r\n\r\n  if (frank.avatarUrl) {\r\n    avatarUrl = frank.avatarUrl;\r\n  } else {\r\n    avatarUrl = \"https://s2.coinmarketcap.com/static/img/coins/64x64/6535.png\";\r\n  }\r\n\r\n  // shorten the title that are more than 28 char\r\n  let title;\r\n\r\n  if (frank.title.length > 28) {\r\n    title = frank.title.substring(0, 28) + \"...\";\r\n  } else {\r\n    title = frank.title;\r\n  }\r\n\r\n  // shorten the descriptions that are more than 70 char\r\n  let description;\r\n\r\n  if (frank.description.length > 70) {\r\n    description = frank.description.substring(0, 70) + \"...\";\r\n  } else if (frank.description.length < 1) {\r\n    description =\r\n      \"No description found, please open the dashboard to see more information.\";\r\n  } else {\r\n    description = frank.description;\r\n  }\r\n\r\n  // some screenshotUrl are Null, so replace the image below with Null\r\n  let screenshotUrl;\r\n\r\n  if (frank.screenshotUrl) {\r\n    screenshotUrl = frank.screenshotUrl;\r\n  } else {\r\n    screenshotUrl = \"https://i.postimg.cc/GtQ9pFK3/sdsdad.png\";\r\n  }\r\n\r\n  //some usernames are long, use this part to substring the first part and last part of usernames (4 first char+...+last 4 char)\r\n  let username;\r\n\r\n  if (frank.username.length > 15) {\r\n    username =\r\n      frank.username.substring(0, 4) + \"...\" + frank.username.substring(38, 42);\r\n  } else if (frank.username.length < 1) {\r\n    username =\r\n      \"No description found, please open the dashboard to see more information.\";\r\n  } else {\r\n    username = frank.username;\r\n  }\r\n\r\n  //make the Single digit to double digit (just for number < 10 )\r\n  let number;\r\n\r\n  if (i + pageto + 1 <= 9) {\r\n    number = \"0\" + (pageto + i + 1);\r\n  } else {\r\n    number = pageto + i + 1;\r\n  }\r\n\r\n  // turn data into (month + year) format\r\n  let date = new Date(frank.createdAt);\r\n  let monthNames = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n  let month = monthNames[date.getMonth()];\r\n  let year = date.getFullYear();\r\n  let createdAt;\r\n  createdAt = month + \" \" + year;\r\n  console.log(frank);\r\n\r\n  tableRows.push({\r\n    ...frank,\r\n\r\n    number: number,\r\n    username: username,\r\n    screenshotUrl: screenshotUrl,\r\n    description: description,\r\n    title: title,\r\n    avatarUrl: avatarUrl,\r\n  });\r\n}\r\n\r\nconst updateSlide = (table) =>\r\n  State.update({\r\n    slide: table,\r\n  });\r\n\r\nconst updateWhichSlide = (val) =>\r\n  State.update({\r\n    wichSlide: val,\r\n  });\r\nlet tbl = [...tableRows];\r\n\r\nlet showSlide = {\r\n  ...tableRows[0],\r\n};\r\n\r\nshowSlide.showSlide = true;\r\n\r\ntbl[0] = showSlide;\r\nupdateSlide(tbl);\r\n\r\nconst parentStyle = {\r\n  background: props.background,\r\n  borderRadius: \"25px\",\r\n  color: \"white\",\r\n  maxWidth: \"400px\",\r\n  minHeight: \"300px\",\r\n  position: \"relative\",\r\n  top: \"0\",\r\n  textDecoration: \"none\",\r\n  border: \"black\",\r\n  \"box-shadow\": \"-4px 4px 10px 1px rgba(0,0,0,0.75)\",\r\n  \"-webkit-box-shadow\": \"-4px 4px 10px 1px rgba(0,0,0,0.75)\",\r\n  \"-moz-box-shadow\": \"-4px 4px 10px 1px rgba(0,0,0,0.75)\",\r\n};\r\n\r\nconst imageSectionStyle = {\r\n  width: \"100%\",\r\n  maxHeight: \"200px\",\r\n  borderRadius: \"25px 25px 0 0\",\r\n};\r\n\r\nconst contentSection = {\r\n  padding: \"0 25px 0 25px\",\r\n};\r\n\r\nconst avatarSection = {\r\n  display: \"flex\",\r\n};\r\n\r\nconst avatarSpan = {\r\n  margin: \"10px\",\r\n};\r\n\r\nconst avatarImage = {\r\n  maxWidth: \"100px\",\r\n  maxHeight: \"100px\",\r\n  borderRadius: \"20px\",\r\n  marginTop: \"-30px\",\r\n  padding: 10,\r\n  background: \"rgb(55,58,83)\",\r\n};\r\n\r\nconst changeSlide = (type) => {\r\n  let wichSlide = state.wichSlide;\r\n\r\n  if (type == \"right\") {\r\n    if (wichSlide <= 2) {\r\n      console.log(wichSlide);\r\n      wichSlide = state.wichSlide + 1;\r\n    } else {\r\n      wichSlide = 0;\r\n    }\r\n  } else {\r\n    if (wichSlide == 0) {\r\n      wichSlide = 3;\r\n    } else {\r\n      console.log(wichSlide);\r\n      wichSlide = state.wichSlide - 1;\r\n    }\r\n  }\r\n\r\n  updateWhichSlide(wichSlide);\r\n\r\n  showSlide = {\r\n    ...tableRows[wichSlide],\r\n  };\r\n  showSlide.showSlide = true;\r\n  tbl[wichSlide] = showSlide;\r\n\r\n  updateSlide(tbl[wichSlide]);\r\n\r\n  State.update({\r\n    slide: tbl,\r\n  });\r\n};\r\n\r\nconst arrowRight = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  right: \"-13px\",\r\n  background: \"white\",\r\n  textAlign: \"center\",\r\n  minWidth: \"30px\",\r\n  minHeight: \"30px\",\r\n  borderRadius: \"25px\",\r\n  color: \"black\",\r\n  border: \"black 1px solid\",\r\n  cursor: \"pointer\",\r\n};\r\n\r\nconst arrowLeft = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"-13px\",\r\n  background: \"white\",\r\n  textAlign: \"center\",\r\n  minWidth: \"30px\",\r\n  minHeight: \"30px\",\r\n  borderRadius: \"25px\",\r\n  color: \"black\",\r\n  border: \"black 1px solid\",\r\n  cursor: \"pointer\",\r\n};\r\n\r\nconst description = {\r\n  display: \"flex\",\r\n  textAlign: \"left\",\r\n};\r\n\r\nreturn (\r\n  <div>\r\n    <div>\r\n      {state.slide.map((frank, index) => {\r\n        return (\r\n          <>\r\n            {index == state.wichSlide ? (\r\n              <div style={parentStyle}>\r\n                <div style={arrowRight} onClick={() => changeSlide(\"right\")}>\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"1em\"\r\n                    viewBox=\"0 0 448 512\"\r\n                  >\r\n                    <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\r\n                  </svg>\r\n                </div>\r\n                <div style={arrowLeft} onClick={changeSlide}>\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height=\"1em\"\r\n                    viewBox=\"0 0 448 512\"\r\n                  >\r\n                    <path d=\"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z\" />\r\n                  </svg>\r\n                </div>\r\n                <div style={imageSectionStyle}>\r\n                  <a\r\n                    style={linkStyle}\r\n                    href={`https: //flipsidecrypto.xyz/${frank.username}`}\r\n                    target=\"_blank\"\r\n                  >\r\n                    <img style={imageSectionStyle} src={frank.screenshotUrl} />\r\n                  </a>\r\n                </div>\r\n                <div style={contentSection}>\r\n                  <div style={avatarSection}>\r\n                    <span style={avatarSpan}>\r\n                      <img style={avatarImage} src={frank.avatarUrl} />\r\n                    </span>\r\n                    <span style={avatarSpan}>\r\n                      <h5> {frank.title}</h5>\r\n                      <a style={linkStyle} href={frank.url} target=\"_blank\">\r\n                        Analysis by {frank.username}\r\n                      </a>\r\n                    </span>\r\n                  </div>\r\n                  <div style={description}>\r\n                    <p> {frank.description}</p>\r\n                    <span\r\n                      style={{\r\n                        color: \"red\",\r\n                        fontSize: \"25px\",\r\n                        cursor: \"pointer\",\r\n                        fill: \"#ff0000\",\r\n                      }}\r\n                    >\r\n                      <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"1em\"\r\n                        viewBox=\"0 0 512 512\"\r\n                      >\r\n                        <path d=\"M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2H464c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48H294.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V320 272 247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192H96c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z\" />\r\n                      </svg>\r\n                      {frank.totalLikes}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </>\r\n        );\r\n      })}\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/1386e29ec7f4c7f33a83b268feadc5307d2136b197de0f2823cbb729c23549ef/widget/Top-Trending-Slider", "fact_widget_deployments_id": "ec1144f38699916fe4d97df8a933a71a", "inserted_timestamp": "2023-08-09T21:47:43.880Z", "modified_timestamp": "2023-08-09T21:47:43.880Z", "__row_index": 0}