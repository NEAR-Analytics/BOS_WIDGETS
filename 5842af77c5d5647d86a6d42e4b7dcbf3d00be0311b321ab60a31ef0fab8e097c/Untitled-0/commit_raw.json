{"tx_hash": "Dp1UmRhGN7nQjrcukXHkSkbp1nzuAJsMSDsfapufeuZv", "action_id_social": "9kXZ13MJprWULaqmHwbHa9JRABDeuuP56e9PcxWC3ksA-0-widget", "block_id": 96647205, "block_timestamp": "2023-07-17T00:52:09.324Z", "signer_id": "5842af77c5d5647d86a6d42e4b7dcbf3d00be0311b321ab60a31ef0fab8e097c", "widget_name": "Untitled-0", "source_code": null, "metadata": null, "branch": {"draft": {"": "const matches = Near.view(\"pickem.near\", \"getMatches\");\nconst picks = Near.view(\"pickem.near\", \"getAllPicks\");\n\nconst users = {};\npicks.forEach((pick) => {\n  const match = matches\n    .filter((m) => m.status === 1)\n    .find((match) => match.index === pick.index);\n  if (match) {\n    const winner = match.score1 > match.score2 ? 1 : 2;\n    if (pick.team === winner) {\n      if (users[pick.predictor]) {\n        users[pick.predictor] += 10;\n      } else {\n        users[pick.predictor] = 10;\n      }\n    }\n  }\n});\nconsole.log(picks, matches);\nconst leaderboard = Object.keys(users)\n  .map((user) => {\n    return { name: user, points: users[user] };\n  })\n  .sort((a, b) => b.points - a.points);\nconsole.log(leaderboard);\n\nreturn (\n  <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\n    {leaderboard.length > 0 &&\n      leaderboard.map((user, i) => (\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            border: \"1px solid #ADADAD\",\n            borderRadius: \"4px\",\n            padding: \"16px\",\n            alignContent: \"center\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              alignContent: \"center\",\n              gap: 8,\n            }}\n          >\n            <h2>{i + 1}</h2>\n            <h2>{user.name}</h2>\n          </div>\n          <h3 style={{ border: \"1px solid #ADADAD\" }}>{user.points}</h3>\n        </div>\n      ))}\n  </div>\n);\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/5842af77c5d5647d86a6d42e4b7dcbf3d00be0311b321ab60a31ef0fab8e097c/widget/Untitled-0", "fact_widget_deployments_id": "6b4de2213e48dba6c3d46d09b4aee781", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 63}