{"tx_hash": "22nuTnzwX9JYqXsVquCc49wZRKUPvFueq3swfpa5qczB", "action_id_social": "6a2URHy8TuC3dKAMZjBzPinuRooLQTKAvmALzy2YWVrS-0-widget", "block_id": 97313305, "block_timestamp": "2023-07-25T16:45:41.168Z", "signer_id": "5842af77c5d5647d86a6d42e4b7dcbf3d00be0311b321ab60a31ef0fab8e097c", "widget_name": "pick-em-leaderboard", "source_code": "const matches = Near.view(\"pickem.near\", \"getMatches\");\nconst picks = Near.view(\"pickem.near\", \"getAllPicks\");\n\nconst users = {\n  \"kingcash88.near\": 50,\n};\npicks.forEach((pick) => {\n  const match = matches\n    .filter((m) => m.status === 1)\n    .find((match) => match.index === pick.index);\n  if (match) {\n    const winner = match.score1 > match.score2 ? 1 : 2;\n    if (pick.team === winner) {\n      if (users[pick.predictor]) {\n        users[pick.predictor] += 10;\n      } else {\n        users[pick.predictor] = 10;\n      }\n    }\n  }\n});\nconst leaderboard = Object.keys(users)\n  .map((user) => {\n    return { name: user, points: users[user] };\n  })\n  .sort((a, b) => b.points - a.points);\n\nreturn (\n  <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\n    <h1 style={{ fontWeight: 800, opacity: 1 }}>BIG3 Pick 'Em Leaderboard</h1>\n    <p style={{ fontWeight: 400, opacity: 0.5 }}>\n      Top 30 accounts shown. If you don't see your username, make better picks\n      this week.\n    </p>\n    {leaderboard.length > 0 &&\n      leaderboard.slice(0, 30).map((user, i) => (\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            border: \"1px solid #ADADAD\",\n            borderRadius: \"8px\",\n            padding: \"16px\",\n            alignContent: \"center\",\n            backgroundColor: i < 10 ? \"#00A160\" : \"#ffffff\",\n            color: i < 10 ? \"#ffffff\" : \"#000000\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              alignContent: \"center\",\n              gap: 16,\n            }}\n          >\n            <div style={{ fontWeight: 600, fontSize: 24, opacity: 0.5 }}>\n              {i + 1}\n            </div>\n            <div style={{ fontWeight: 800, fontSize: 24, opacity: 1 }}>\n              {user.name}\n            </div>\n          </div>\n          <div style={{ fontWeight: 400, fontSize: 24, opacity: 0.5 }}>\n            {user.points}\n          </div>\n        </div>\n      ))}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/5842af77c5d5647d86a6d42e4b7dcbf3d00be0311b321ab60a31ef0fab8e097c/widget/pick-em-leaderboard", "fact_widget_deployments_id": "682b93c9624735c7b882b3f724d8c1bc", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}