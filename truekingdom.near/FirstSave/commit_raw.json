{"tx_hash": "8gnSkUAvLCuuwcCHayDkmtcocPXr2DT2GV6e6bqRx7zF", "action_id_social": "6Zg2omJ9HFCLmD5RTbWsF6PqECCiKzPS7SsJnBECR9LR-0-widget", "block_id": 107155125, "block_timestamp": "2023-12-04T18:55:18.890Z", "signer_id": "truekingdom.near", "widget_name": "FirstSave", "source_code": "const contract = \"guest-book.near\";\r\nconst total_messages = Near.view(contract, \"totalMessages\", {});\r\nconst messages = Near.view(contract, \"getMessages\", {\r\n  from_index: total_messages - 10,\r\n}).reverse();\r\nconsole.log(messages);\r\n\r\n// Additional CSS for styling\r\nconst styles = {\r\n  container: {\r\n    backgroundColor: \"#FFF5E9\", // Light orange background similar to the image\r\n    padding: \"1rem\",\r\n    borderRadius: \"0.5rem\",\r\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\", // subtle shadow\r\n  },\r\n  tableHeader: {\r\n    backgroundColor: \"#FFAD60\", // Orange background for headers\r\n    color: \"white\",\r\n  },\r\n  tableRow: {\r\n    borderBottom: \"1px solid #FFAD60\", // Orange border for separation\r\n  },\r\n  tableRowStriped: {\r\n    backgroundColor: \"#FFE9CC\", // Lighter orange for striped effect\r\n  },\r\n  actionButton: {\r\n    border: \"none\",\r\n    backgroundColor: \"transparent\",\r\n    cursor: \"pointer\",\r\n    color: \"#FF6A00\", // Orange color for icons\r\n  },\r\n};\r\n\r\nState.init({\r\n  newMessage: \"\",\r\n});\r\n\r\nconst addNewMessage = () => {\r\n  if (state.newMessage.trim() == \"\") {\r\n    return;\r\n  }\r\n\r\n  Near.call(contract, \"addMessage\", {\r\n    text: state.newMessage,\r\n  });\r\n};\r\n\r\nreturn (\r\n  <div style={styles.container}>\r\n    <h3>Libro de Visitas (BOS + NEAR)</h3> {/* Orange text for heading */}\r\n    <br />\r\n    {context.accountId ? (\r\n      <div class=\"p-3\">\r\n        <h3>Nuevo Mensaje</h3>\r\n        <div class=\"row\">\r\n          <div>\r\n            <input\r\n              class=\"form-control\"\r\n              placeholder=\"Message\"\r\n              onChange={(e) => State.update({ newMessage: e.target.value })}\r\n            />\r\n          </div>\r\n        </div>\r\n        <button\r\n          class=\"btn btn-primary mt-2\"\r\n          onClick={async () => {\r\n            addNewMessage();\r\n          }}\r\n        >\r\n          Guardar\r\n        </button>\r\n      </div>\r\n    ) : (\r\n      <p class=\"text-center py-2\">\r\n        Debes iniciar sesi\u00f3n para guardar un mensaje\r\n      </p>\r\n    )}\r\n    <br />\r\n    <div class=\"p-3\">\r\n      <h3>Listado de Mensajes</h3>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr style={styles.tableHeader}>\r\n            <th>ID</th>\r\n            <th>Message</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {messages.map((data, index) => {\r\n            const isEven = index % 2 === 0;\r\n            return (\r\n              <tr\r\n                key={index}\r\n                style={isEven ? styles.tableRowStriped : styles.tableRow}\r\n              >\r\n                <td>{data.sender}</td>\r\n                <td>{data.text}</td>\r\n                <td>\r\n                  <button style={styles.actionButton}>\u2665</button>\r\n                  <button style={styles.actionButton}>\u270e</button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/truekingdom.near/widget/FirstSave", "fact_widget_deployments_id": "ff999b833bd61a088bfc40c99d9a7855", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}