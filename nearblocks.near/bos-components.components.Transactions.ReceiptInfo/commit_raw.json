{"tx_hash": "3REMAWo1sGqiiJn4aRgVbkDifSD9k8BUsn13pYE11j8B", "action_id_social": "C2W4iZxfyFBXKwBo6HTrVPWq7m1sT6vrnMu2xUtsez1v-0-widget", "block_id": 112949036, "block_timestamp": "2024-02-16T12:05:50.900Z", "signer_id": "nearblocks.near", "widget_name": "bos-components.components.Transactions.ReceiptInfo", "source_code": "/**\n * Component: TransactionsReceiptInfo\n * Author: Nearblocks Pte Ltd\n * License: Business Source License 1.1\n * Description: Details of Transaction Receipt on Near Protocol.\n * @interface Props\n * @param {string} [network] - The network data to show, either mainnet or testnet\n * @param {Function} [t] - A function for internationalization (i18n) provided by the next-translate package.\n * @param {ReceiptsPropsInfo | any} [receipt] -  receipt of the transaction.\n */\n\n\n\n\n\n\n\n/* INCLUDE: \"includes/formats.jsx\" */\nfunction convertToMetricPrefix(numberStr) {\n  const prefixes = ['', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y']; // Metric prefixes\n\n  let result = new Big(numberStr);\n  let count = 0;\n\n  while (result.abs().gte('1e3') && count < prefixes.length - 1) {\n    result = result.div(1e3);\n    count++;\n  }\n\n  // Check if the value is an integer or has more than two digits before the decimal point\n  if (result.abs().lt(1e2) && result.toFixed(2) !== result.toFixed(0)) {\n    result = result.toFixed(2);\n  } else {\n    result = result.toFixed(0);\n  }\n\n  return result.toString() + ' ' + prefixes[count];\n}\n\nfunction formatNumber(value) {\n  let bigValue = new Big(value);\n  const suffixes = ['', 'K', 'M', 'B', 'T'];\n  let suffixIndex = 0;\n\n  while (bigValue.gte(10000) && suffixIndex < suffixes.length - 1) {\n    bigValue = bigValue.div(1000);\n    suffixIndex++;\n  }\n\n  const formattedValue = bigValue.toFixed(1).replace(/\\.0+$/, '');\n  return `${formattedValue} ${suffixes[suffixIndex]}`;\n}\n\nfunction gasFee(gas, price) {\n  const near = yoctoToNear(Big(gas).mul(Big(price)).toString(), true);\n\n  return `${near}`;\n}\n\nfunction currency(number) {\n  let absNumber = new Big(number).abs();\n\n  const suffixes = ['', 'K', 'M', 'B', 'T', 'Q'];\n  let suffixIndex = 0;\n\n  while (absNumber.gte(1000) && suffixIndex < suffixes.length - 1) {\n    absNumber = absNumber.div(1000); // Divide using big.js's div method\n    suffixIndex++;\n  }\n\n  const formattedNumber = absNumber.toFixed(2); // Format with 2 decimal places\n\n  return (\n    (number < '0' ? '-' : '') + formattedNumber + ' ' + suffixes[suffixIndex]\n  );\n}\n\nfunction formatDate(dateString) {\n  const inputDate = new Date(dateString);\n\n  const days = [\n    'Sunday',\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n  ];\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n\n  const dayOfWeek = days[inputDate.getDay()];\n  const month = months[inputDate.getMonth()];\n  const day = inputDate.getDate();\n  const year = inputDate.getFullYear();\n\n  const formattedDate = dayOfWeek + ', ' + month + ' ' + day + ', ' + year;\n  return formattedDate;\n}\n\nfunction formatCustomDate(inputDate) {\n  var date = new Date(inputDate);\n\n  // Array of month names\n  var monthNames = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n\n  // Get month and day\n  var month = monthNames[date.getMonth()];\n  var day = date.getDate();\n\n  // Create formatted date string in \"MMM DD\" format\n  var formattedDate = month + ' ' + (day < 10 ? '0' + day : day);\n\n  return formattedDate;\n}\n\nfunction shortenHex(address) {\n  return `${address && address.substr(0, 6)}...${address.substr(-4)}`;\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction shortenToken(token) {\n  return truncateString(token, 14, '');\n}\n\nfunction shortenTokenSymbol(token) {\n  return truncateString(token, 5, '');\n}\n\nfunction gasPercentage(gasUsed, gasAttached) {\n  if (!gasAttached) return 'N/A';\n\n  const formattedNumber = (Big(gasUsed).div(Big(gasAttached)) * 100).toFixed(2);\n  return `${formattedNumber}%`;\n}\n\nfunction serialNumber(index, page, perPage) {\n  return index + 1 + (page - 1) * perPage;\n}\n\nfunction capitalizeWords(str) {\n  const words = str.split('_');\n  const capitalizedWords = words.map(\n    (word) => word.charAt(0).toUpperCase() + word.slice(1),\n  );\n  const result = capitalizedWords.join(' ');\n  return result;\n}\nfunction truncateString(str, maxLength, suffix) {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.substring(0, maxLength) + suffix;\n}\nfunction yoctoToNear(yocto, format) {\n  const YOCTO_PER_NEAR = Big(10).pow(24).toString();\n\n  const near = Big(yocto).div(YOCTO_PER_NEAR).toString();\n\n  return format ? localFormat(near) : near;\n}\nfunction truncateString(str, maxLength, suffix) {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.substring(0, maxLength) + suffix;\n}\nfunction yoctoToNear(yocto, format) {\n  const YOCTO_PER_NEAR = Big(10).pow(24).toString();\n\n  const near = Big(yocto).div(YOCTO_PER_NEAR).toString();\n\n  return format ? localFormat(near) : near;\n}\nfunction truncateString(str, maxLength, suffix) {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.substring(0, maxLength) + suffix;\n}\nfunction yoctoToNear(yocto, format) {\n  const YOCTO_PER_NEAR = Big(10).pow(24).toString();\n\n  const near = Big(yocto).div(YOCTO_PER_NEAR).toString();\n\n  return format ? localFormat(near) : near;\n}\n/* END_INCLUDE: \"includes/formats.jsx\" */\n/* INCLUDE: \"includes/libs.jsx\" */\nfunction getConfig(network) {\n  switch (network) {\n    case 'mainnet':\n      return {\n        ownerId: 'nearblocks.near',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        backendUrl: 'https://api3.nearblocks.io/v1/',\n        rpcUrl: 'https://archival-rpc.testnet.near.org',\n        appUrl: 'https://nearblocks.io/',\n      };\n    case 'testnet':\n      return {\n        ownerId: 'nearblocks.testnet',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        backendUrl: 'https://api3-testnet.nearblocks.io/v1/',\n        rpcUrl: 'https://archival-rpc.testnet.near.org',\n        appUrl: 'https://testnet.nearblocks.io/',\n      };\n    default:\n      return {};\n  }\n}\n\nfunction debounce(\n  delay,\n  func,\n) {\n  let timer;\n  let active = true;\n  const debounced = (arg) => {\n    if (active) {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        active && func(arg);\n        timer = undefined;\n      }, delay);\n    } else {\n      func(arg);\n    }\n  };\n\n  debounced.isPending = () => {\n    return timer !== undefined;\n  };\n\n  debounced.cancel = () => {\n    active = false;\n  };\n\n  debounced.flush = (arg) => func(arg);\n\n  return debounced;\n}\n\nfunction timeAgo(unixTimestamp) {\n  const currentTimestamp = Math.floor(Date.now() / 1000);\n  const secondsAgo = currentTimestamp - unixTimestamp;\n\n  if (secondsAgo < 5) {\n    return 'Just now';\n  } else if (secondsAgo < 60) {\n    return `${secondsAgo} seconds ago`;\n  } else if (secondsAgo < 3600) {\n    const minutesAgo = Math.floor(secondsAgo / 60);\n    return `${minutesAgo} minute${minutesAgo > 1 ? 's' : ''} ago`;\n  } else if (secondsAgo < 86400) {\n    const hoursAgo = Math.floor(secondsAgo / 3600);\n    return `${hoursAgo} hour${hoursAgo > 1 ? 's' : ''} ago`;\n  } else {\n    const daysAgo = Math.floor(secondsAgo / 86400);\n    return `${daysAgo} day${daysAgo > 1 ? 's' : ''} ago`;\n  }\n}\n\nfunction shortenAddress(address) {\n  const string = String(address);\n\n  if (string.length <= 20) return string;\n\n  return `${string.substr(0, 10)}...${string.substr(-7)}`;\n}\n\nfunction urlHostName(url) {\n  try {\n    const domain = new URL(url);\n    return domain?.hostname ?? null;\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction holderPercentage(supply, quantity) {\n  return Math.min(Big(quantity).div(Big(supply)).mul(Big(100)).toFixed(2), 100);\n}\n\nfunction isAction(type) {\n  const actions = [\n    'DEPLOY_CONTRACT',\n    'TRANSFER',\n    'STAKE',\n    'ADD_KEY',\n    'DELETE_KEY',\n    'DELETE_ACCOUNT',\n  ];\n\n  return actions.includes(type.toUpperCase());\n}\nfunction localFormat(number) {\n  const bigNumber = Big(number);\n  const formattedNumber = bigNumber\n    .toFixed(5)\n    .replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,'); // Add commas before the decimal point\n  return formattedNumber.replace(/\\.?0*$/, ''); // Remove trailing zeros and the dot\n}\nfunction formatWithCommas(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\nfunction yoctoToNear(yocto, format) {\n  const YOCTO_PER_NEAR = Big(10).pow(24).toString();\n\n  const near = Big(yocto).div(YOCTO_PER_NEAR).toString();\n\n  return format ? localFormat(near) : near;\n}\n\nfunction fiatValue(big, price) {\n  const value = Big(big).mul(Big(price));\n  const stringValue = value.toFixed(6); // Set the desired maximum fraction digits\n\n  const [integerPart, fractionalPart] = stringValue.split('.');\n\n  // Format integer part with commas\n  const formattedIntegerPart = integerPart.replace(\n    /\\B(?=(\\d{3})+(?!\\d))/g,\n    ',',\n  );\n\n  // Combine formatted integer and fractional parts\n  const formattedNumber = fractionalPart\n    ? `${formattedIntegerPart}.${fractionalPart}`\n    : formattedIntegerPart;\n\n  return formattedNumber;\n}\n\nfunction nanoToMilli(nano) {\n  return Big(nano).div(Big(10).pow(6)).round().toNumber();\n}\n\nfunction truncateString(str, maxLength, suffix) {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.substring(0, maxLength) + suffix;\n}\n\nfunction getConfig(network) {\n  switch (network) {\n    case 'mainnet':\n      return {\n        ownerId: 'nearblocks.near',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        backendUrl: 'https://api3.nearblocks.io/v1/',\n        rpcUrl: 'https://archival-rpc.testnet.near.org',\n        appUrl: 'https://nearblocks.io/',\n      };\n    case 'testnet':\n      return {\n        ownerId: 'nearblocks.testnet',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        backendUrl: 'https://api3-testnet.nearblocks.io/v1/',\n        rpcUrl: 'https://archival-rpc.testnet.near.org',\n        appUrl: 'https://testnet.nearblocks.io/',\n      };\n    default:\n      return {};\n  }\n}\n\nfunction debounce(\n  delay,\n  func,\n) {\n  let timer;\n  let active = true;\n  const debounced = (arg) => {\n    if (active) {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        active && func(arg);\n        timer = undefined;\n      }, delay);\n    } else {\n      func(arg);\n    }\n  };\n\n  debounced.isPending = () => {\n    return timer !== undefined;\n  };\n\n  debounced.cancel = () => {\n    active = false;\n  };\n\n  debounced.flush = (arg) => func(arg);\n\n  return debounced;\n}\n\nfunction timeAgo(unixTimestamp) {\n  const currentTimestamp = Math.floor(Date.now() / 1000);\n  const secondsAgo = currentTimestamp - unixTimestamp;\n\n  if (secondsAgo < 5) {\n    return 'Just now';\n  } else if (secondsAgo < 60) {\n    return `${secondsAgo} seconds ago`;\n  } else if (secondsAgo < 3600) {\n    const minutesAgo = Math.floor(secondsAgo / 60);\n    return `${minutesAgo} minute${minutesAgo > 1 ? 's' : ''} ago`;\n  } else if (secondsAgo < 86400) {\n    const hoursAgo = Math.floor(secondsAgo / 3600);\n    return `${hoursAgo} hour${hoursAgo > 1 ? 's' : ''} ago`;\n  } else {\n    const daysAgo = Math.floor(secondsAgo / 86400);\n    return `${daysAgo} day${daysAgo > 1 ? 's' : ''} ago`;\n  }\n}\n\nfunction shortenAddress(address) {\n  const string = String(address);\n\n  if (string.length <= 20) return string;\n\n  return `${string.substr(0, 10)}...${string.substr(-7)}`;\n}\n\nfunction urlHostName(url) {\n  try {\n    const domain = new URL(url);\n    return domain?.hostname ?? null;\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction holderPercentage(supply, quantity) {\n  return Math.min(Big(quantity).div(Big(supply)).mul(Big(100)).toFixed(2), 100);\n}\n\nfunction isAction(type) {\n  const actions = [\n    'DEPLOY_CONTRACT',\n    'TRANSFER',\n    'STAKE',\n    'ADD_KEY',\n    'DELETE_KEY',\n    'DELETE_ACCOUNT',\n  ];\n\n  return actions.includes(type.toUpperCase());\n}\nfunction localFormat(number) {\n  const bigNumber = Big(number);\n  const formattedNumber = bigNumber\n    .toFixed(5)\n    .replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,'); // Add commas before the decimal point\n  return formattedNumber.replace(/\\.?0*$/, ''); // Remove trailing zeros and the dot\n}\nfunction formatWithCommas(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\nfunction localFormat(number) {\n  const bigNumber = Big(number);\n  const formattedNumber = bigNumber\n    .toFixed(5)\n    .replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,'); // Add commas before the decimal point\n  return formattedNumber.replace(/\\.?0*$/, ''); // Remove trailing zeros and the dot\n}\nfunction formatWithCommas(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n/* END_INCLUDE: \"includes/libs.jsx\" */\n\n\nfunction MainComponent(props) {\n  const { receipt, network } = props;\n  const hashes = ['output', 'inspect'];\n  const [pageHash, setHash] = useState('output');\n  const onTab = (index) => {\n    setHash(hashes[index]);\n  };\n\n  const [block, setBlock] = useState({} );\n  const [loading, setLoading] = useState(false);\n  const config = getConfig(network);\n\n  useEffect(() => {\n    function fetchBlocks() {\n      setLoading(true);\n      if (receipt?.outcome?.blockHash) {\n        asyncFetch(`${config.backendUrl}blocks/${receipt?.outcome.blockHash}`)\n          .then(\n            (res\n\n\n\n\n) => {\n              const resp = res?.body?.blocks?.[0];\n              if (res.status === 200) {\n                setBlock({\n                  author_account_id: resp.author_account_id,\n                  block_hash: resp.author_account_id,\n                  block_height: resp.block_height,\n                  block_timestamp: resp.block_timestamp,\n                  chunks_agg: resp.chunks_agg,\n                  gas_price: resp.gas_price,\n                  prev_block_hash: resp.author_account_id,\n                  receipts_agg: resp.receipts_agg,\n                  transactions_agg: resp.transactions_agg,\n                });\n              }\n            },\n          )\n          .catch(() => {});\n      }\n      setLoading(false);\n    }\n\n    fetchBlocks();\n  }, [receipt?.outcome?.blockHash, config.backendUrl]);\n\n  let statusInfo;\n\n  if (receipt?.outcome?.status?.type === 'successValue') {\n    if (receipt?.outcome?.status?.value.length === 0) {\n      statusInfo = (\n        <div className=\"bg-gray-100 rounded-md text-3f4246 p-5 font-medium my-3\">\n          Empty result\n        </div>\n      );\n    } else {\n      const args = receipt?.outcome?.status.value;\n      const decodedArgs = Buffer.from(args, 'base64');\n\n      let prettyArgs;\n      try {\n        const parsedJSONArgs = JSON.parse(decodedArgs.toString());\n        prettyArgs =\n          typeof parsedJSONArgs === 'boolean'\n            ? JSON.stringify(parsedJSONArgs)\n            : parsedJSONArgs;\n      } catch {\n        prettyArgs = Array.from(decodedArgs)\n          .map((byte) => byte.toString(16).padStart(2, '0'))\n          .join('');\n      }\n\n      statusInfo =\n        prettyArgs && typeof prettyArgs === 'object' ? (\n          <textarea\n            readOnly\n            rows={4}\n            defaultValue={JSON.stringify(prettyArgs)}\n            className=\"block appearance-none outline-none w-full border rounded-lg bg-gray-100 p-3 my-3 resize-y\"\n          ></textarea>\n        ) : (\n          <div>\n            <div className=\"bg-gray-100 rounded-md p-3 font-semibold my-3\">\n              <div className=\"bg-inherit text-inherit font-inherit text-base border-none p-0\">\n                <div className=\"max-h-52 overflow-auto\">\n                  <div className=\"p-4 h-full w-full\">{prettyArgs}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n    }\n  } else if (receipt?.outcome?.status?.type === 'failure') {\n    statusInfo = (\n      <textarea\n        readOnly\n        rows={4}\n        defaultValue={JSON.stringify(receipt.outcome.status.error, null, 2)}\n        className=\"block appearance-none outline-none w-full border rounded-lg bg-gray-100 p-3 my-3 resize-y\"\n      ></textarea>\n    );\n  } else if (receipt?.outcome?.status?.type === 'successReceiptId') {\n    statusInfo = (\n      <div className=\"bg-gray-100 rounded-md my-3 p-5 font-medium\">\n        <pre>{receipt?.outcome?.status?.receiptId}</pre>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pb-5 flex flex-col \">\n      <Tabs.Root defaultValue={'output'}>\n        <Tabs.List>\n          {hashes &&\n            hashes.map((hash, index) => (\n              <Tabs.Trigger\n                key={index}\n                onClick={() => onTab(index)}\n                className={`text-nearblue-600 text-sm mx-2.5 font-medium overflow-hidden inline-block cursor-pointer p-2 mb-3 mr-2 focus:outline-none ${\n                  pageHash === hash\n                    ? 'rounded-lg bg-green-600 text-white'\n                    : 'hover:bg-neargray-800 bg-neargray-700 rounded-lg hover:text-nearblue-600'\n                }`}\n                value={hash}\n              >\n                {hash === 'output' ? <h2>Output</h2> : <h2>Inspect</h2>}\n              </Tabs.Trigger>\n            ))}\n        </Tabs.List>\n        <Tabs.Content value={hashes[0]}>\n          <div className=\"flex flex-col my-4 mx-7\">\n            <div className=\"flex justify-between\">\n              <div className=\"flex flex-col w-full lg:w-1/2\">\n                <div className=\"\">\n                  <h2 className=\"text-sm font-semibold \">Logs</h2>\n                  <div className=\"bg-gray-100 rounded-md p-5 font-medium my-3 overflow-x-auto \">\n                    {receipt?.outcome?.logs?.length === 0 ? (\n                      'No logs'\n                    ) : (\n                      <pre>{receipt?.outcome?.logs.join('\\n')}</pre>\n                    )}\n                  </div>\n                </div>\n                <div>\n                  <h2 className=\"text-sm font-semibold \">Result</h2>\n                  {statusInfo}\n                </div>\n              </div>\n            </div>\n          </div>\n        </Tabs.Content>\n        <Tabs.Content value={hashes[1]}>\n          <table className=\"w-full my-4 mx-7\">\n            <tbody>\n              <tr>\n                <td>Receipt ID</td>\n                <td>{receipt?.id}</td>\n              </tr>\n              <tr>\n                <td>Executed in Block</td>\n                <td>\n                  <a\n                    href={`/blocks/${receipt?.outcome?.blockHash}`}\n                    className=\"whitespace-nowrap\"\n                  >{`#${block?.block_height}`}</a>\n                </td>\n              </tr>\n              <tr>\n                <td>Predecessor ID</td>\n                <td>{receipt?.predecessorId}</td>\n              </tr>\n\n              <tr>\n                <td>Receiver ID</td>\n                <td>{receipt?.receiverId}</td>\n              </tr>\n\n              <tr>\n                <td>Attached Gas</td>\n                <td>{receipt?.id}</td>\n              </tr>\n              <tr>\n                <td>Gas Burned</td>\n                <td>\n                  {!loading && receipt?.outcome?.gasBurnt\n                    ? convertToMetricPrefix(receipt?.outcome?.gasBurnt)\n                    : receipt?.outcome?.gasBurnt ?? ''}\n                  gas\n                </td>\n              </tr>\n              <tr>\n                <td>Tokens Burned</td>\n                <td>\n                  {!loading && receipt?.outcome?.tokensBurnt\n                    ? yoctoToNear(receipt?.outcome?.tokensBurnt, true)\n                    : receipt?.outcome?.tokensBurnt ?? ''}\n                  \u24c3\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </Tabs.Content>\n      </Tabs.Root>\n    </div>\n  );\n}\n\nreturn MainComponent(props, context);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocks.near/widget/bos-components.components.Transactions.ReceiptInfo", "fact_widget_deployments_id": "f37f0ec8931525d8095d6841773a94f2", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}