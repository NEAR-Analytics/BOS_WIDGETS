{"tx_hash": "ALyTkbzYVvrDA1CG75CWUABFB4nk8MxQjVz6jttStKW6", "action_id_social": "2rZJrdUjR5txWhg3WSFvsEgfW4opYwaQa8kvTTNeEV9j-0-widget", "block_id": 109499361, "block_timestamp": "2024-01-03T15:44:10.126Z", "signer_id": "nearblocks.near", "widget_name": "includes.icons.NFTImage", "source_code": "import TokenImage from '@/includes/icons/TokenImage';\n\n\n\n\n\n\n\n\n\nexport const NFTImage = ({\n  base,\n  media,\n  alt,\n  reference,\n  ...rest\n}) => {\n  const [src, setSrc] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    function getMediaUrl(base, media, reference) {\n      if (\n        media.startsWith('https://') ||\n        media.startsWith('http://') ||\n        media.startsWith('data:image')\n      )\n        return media;\n\n      if (\n        reference &&\n        (base.startsWith('https://arweave.net') ||\n          reference.startsWith('https://arweave.net'))\n      ) {\n        try {\n          return asyncFetch(\n            base ? `${base.replace(/\\/+$/, '')}/${reference}` : `${reference}`,\n          )\n            .then((resp) => {\n              return resp.data.media;\n            })\n            .catch(() => {});\n        } catch (error) {\n          //\n        }\n      }\n\n      if (base) return `${base}/${media}`;\n\n      return `https://cloudflare-ipfs.com/ipfs/${media}`;\n    }\n\n    if (media || base || reference) {\n      getMediaUrl(base || '', media || '', reference || '').then(setSrc);\n    }\n  }, [base, media, reference]);\n\n  const onLoad = () => setLoading(false);\n\n  return (\n    <span className=\"w-full h-full flex items-center justify-center relative\">\n      {loading && (\n        <span className=\"absolute inset-0 bg-white\">\n          <span className=\"absolute inset-0 animate-pulse bg-gray-300 rounded\" />\n        </span>\n      )}\n      <TokenImage src={src} alt={alt} {...rest} onLoad={onLoad} />\n    </span>\n  );\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearblocks.near/widget/includes.icons.NFTImage", "fact_widget_deployments_id": "28cbdcab61d0a47ed0e8c3d1cc5d034f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}