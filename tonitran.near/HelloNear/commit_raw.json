{"tx_hash": "D9xiMRQEmSho7Sfp5Zc93CSAFeYKWBJUeMeGuMtTnTMk", "action_id_social": "DXKUUtQXkRxCgRTSkvTJ7vpU3XZBLDgf2x8B8ATYGQ5H-0-widget", "block_id": 99515998, "block_timestamp": "2023-08-24T02:06:26.667Z", "signer_id": "tonitran.near", "widget_name": "HelloNear", "source_code": "State.init({\r\n  data: null,\r\n  isFetched: false,\r\n  isModalOpen: false,\r\n  isButtonShow: true,\r\n  selectingId: \"\",\r\n  chatcontent: \"\",\r\n  queryText: \"\",\r\n});\r\n\r\n// if (!state.isFetched) {\r\n//   asyncFetch(\"https://news.nftfi.cloud/titles/\").then(({ body }) => {\r\n//     State.update({ data: body, isFetched: true });\r\n//   });\r\n// }\r\n\r\n// const buttons = state.data.map((button, index) => {\r\n//   return <div key={index}>{button.title}</div>;\r\n// });\r\n\r\nfunction setQueryText(text) {\r\n  State.update({ queryText: text });\r\n}\r\n\r\nfunction handleKeyPress(event) {\r\n  console.log(\"handleKeyPress is called\");\r\n  console.log(\"event.key: \", event.key);\r\n  console.log(\"state.queryText: \", state.queryText);\r\n\r\n  if (event.key === \"Enter\" && state.queryText.trim() !== \"\") {\r\n    console.log(\"going to call onSendClick...\");\r\n    onSendClick(state.selectingId, state.queryText);\r\n  }\r\n}\r\n\r\nfunction updateChatbox(question, answer) {\r\n  console.log(\"updateChatbox is called\");\r\n  // const sanitizedQuestion = question.replace(/[&<>\"']/g, (match) => {\r\n  //   switch (match) {\r\n  //     case \"&\":\r\n  //       return \"&amp;\";\r\n  //     case \"<\":\r\n  //       return \"&lt;\";\r\n  //     case \">\":\r\n  //       return \"&gt;\";\r\n  //     case '\"':\r\n  //       return \"&quot;\";\r\n  //     case \"'\":\r\n  //       return \"&#39;\";\r\n  //     default:\r\n  //       return match;\r\n  //   }\r\n  // });\r\n\r\n  // const newChatContent =\r\n  //   state.chatcontent +\r\n  //   `<p class=\"text-right text-white-500\">Q: ` +\r\n  //   sanitizedQuestion +\r\n  //   `</p>`;\r\n\r\n  const newChatContent =\r\n    state.chatcontent + \"Q: \" + question + \"\\r\\n\" + \"A: \" + answer + \"\\r\\n\";\r\n\r\n  console.log(\"newChatContent: \", newChatContent);\r\n  State.update({ chatcontent: newChatContent });\r\n  console.log(\"state.chatcontent: \", state.chatcontent);\r\n}\r\n\r\nfunction openModal(articleId) {\r\n  console.log(\"Clicked on button with article ID:\", articleId);\r\n  // fetch(`https://news.nftfi.cloud/articles/${articleId}`)\r\n  //   .then((response) => response.json())\r\n  //   .then((article) => {\r\n  State.update({\r\n    isModalOpen: true,\r\n    isButtonShow: false,\r\n    selectingId: articleId,\r\n  });\r\n  console.log(\"isModalOpen: \", state.isModalOpen);\r\n  console.log(\"isButtonShow: \", state.isButtonShow);\r\n  console.log(\"buttons: \", buttons);\r\n}\r\n\r\nfunction closeModal() {\r\n  State.update({ isModalOpen: false, isButtonShow: true, selectingId: \"\" });\r\n  console.log(\"isModalOpen: \", state.isModalOpen);\r\n  console.log(\"isButtonShow: \", state.isButtonShow);\r\n  console.log(\"buttons: \", buttons);\r\n}\r\n\r\nfunction onSendClick(articleId, queryText) {\r\n  console.log(\"onSendClick is called with queryText:\", queryText);\r\n  asyncFetch(\"https://news.nftfi.cloud/articles/\" + articleId + \"/ask/\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ query: queryText }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      const answer = data.answer;\r\n      updateChatbox(queryText, answer);\r\n      State.update({ queryText: \"\" });\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Error:\", error);\r\n    });\r\n}\r\n\r\nconst body = [\r\n  {\r\n    id: \"2308.02996v1\",\r\n    title:\r\n      \"\u0110\u00e1nh gi\u00e1 kho\u1ea3ng c\u00e1ch gi\u1eefa Web 4.0 v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng m\u1ea1ng th\u00f4ng minh Web 3.0, \u0110\u00e1nh gi\u00e1 kho\u1ea3ng c\u00e1ch gi\u1eefa Web 4.0 v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng m\u1ea1ng th\u00f4ng minh Web 3.0, \u0110\u00e1nh gi\u00e1 kho\u1ea3ng c\u00e1ch gi\u1eefa Web 4.0 v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng m\u1ea1ng th\u00f4ng minh Web 3.0\",\r\n    published: \"2023-08-06\",\r\n  },\r\n  {\r\n    id: \"2308.02996v3\",\r\n    title: \"H\u1ea1 t\u1ea7ng m\u1ea1ng th\u00f4ng minh Web 3.0\",\r\n    published: \"2023-08-07\",\r\n  },\r\n];\r\nState.update({ data: body, isFetched: true });\r\n\r\nconst buttons = body.map((button) => {\r\n  return (\r\n    <button\r\n      key={button.id}\r\n      type=\"button\"\r\n      style={{\r\n        width: \"100%\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        textAlign: \"left\",\r\n      }}\r\n      onClick={() => openModal(button.id)}\r\n    >\r\n      {button.title.length > 100\r\n        ? button.title.slice(0, 100) + \"...\"\r\n        : button.title}\r\n    </button>\r\n  );\r\n});\r\nreturn (\r\n  <div>\r\n    {state.isButtonShow && buttons}\r\n    {state.isModalOpen && (\r\n      <div\r\n        id=\"modal\"\r\n        class=\"fixed z-10 inset-0 overflow-y-auto\"\r\n        aria-labelledby=\"modal-title\"\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n      >\r\n        <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n          <div\r\n            id=\"modal-backdrop\"\r\n            class=\"fixed inset-0 bg-gray-700 bg-opacity-75 transition-opacity\"\r\n            aria-hidden=\"true\"\r\n          ></div>\r\n          <span\r\n            class=\"sm:inline-block sm:align-middle sm:h-screen\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            &#8203;\r\n          </span>\r\n          <div class=\"inline-block align-bottom bg-gray-900 text-blue rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\r\n            <div class=\"px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n              <h3 id=\"modal-title\" class=\"text-lg leading-6 font-medium\"></h3>\r\n              <p id=\"modal-summary\" class=\"mt-2 text-sm\">\r\n                <p>\r\n                  Ti\u00eau \u0111\u1ec1: \u0110\u00e1nh gi\u00e1 kho\u1ea3ng c\u00e1ch gi\u1eefa Web 4.0 v\u00e0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng\r\n                  m\u1ea1ng th\u00f4ng minh Web 3.0 T\u00f3m t\u1eaft: B\u00e0i b\u00e1o \u0111\u00e1nh gi\u00e1 s\u1ef1 kh\u00e1c bi\u1ec7t\r\n                  gi\u1eefa Web 4.0 v\u00e0 Web 3.0 t\u1eeb c\u00e1c kh\u00eda c\u1ea1nh khoa h\u1ecdc v\u00e0 c\u00f4ng\r\n                  nghi\u1ec7p. N\u00f3 cung c\u1ea5p m\u1ed9t c\u00e1i nh\u00ecn v\u1ec1 s\u1ef1 ph\u00e1t tri\u1ec3n c\u1ee7a World\r\n                  Wide Web v\u00e0 nh\u1eefng y\u00eau c\u1ea7u c\u1ee7a Web 4.0 \u0111\u1ed1i v\u1edbi tr\u1ea3i nghi\u1ec7m web\r\n                  s\u1ed1ng \u0111\u1ed9ng h\u01a1n, d\u1ecbch v\u1ee5 tr\u00ed tu\u1ec7 ph\u00e2n t\u00e1n v\u00e0 quy\u1ec1n ri\u00eang t\u01b0 \u0111\u1ea3m\r\n                  b\u1ea3o. C\u00e1c \u0111i\u1ec3m n\u1ed5i b\u1eadt: 1. Web 4.0 \u0111ang ph\u00e1t tri\u1ec3n th\u00e0nh m\u1ed9t h\u1ec7\r\n                  sinh th\u00e1i th\u00f4ng minh v\u00e0 ph\u00e2n t\u00e1n v\u1edbi s\u1ef1 tham gia t\u00edch c\u1ef1c c\u1ee7a\r\n                  Ch\u00e2u \u00c2u. 2. Web 4.0 cam k\u1ebft mang l\u1ea1i tr\u1ea3i nghi\u1ec7m web s\u1ed1ng \u0111\u1ed9ng\r\n                  h\u01a1n, d\u1ecbch v\u1ee5 tr\u00ed tu\u1ec7 ph\u00e2n t\u00e1n v\u00e0 quy\u1ec1n ri\u00eang t\u01b0 \u0111\u1ea3m b\u1ea3o. 3.\r\n                  Web 4.0 y\u00eau c\u1ea7u c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng m\u1ea1ng th\u00f4ng minh v\u00e0 ph\u00e2n t\u00e1n \u0111\u1ec3\r\n                  \u0111\u00e1p \u1ee9ng nhu c\u1ea7u ng\u00e0y c\u00e0ng t\u0103ng v\u1ec1 n\u1ed9i dung VR/XR. 4. Web 4.0\r\n                  gi\u1edbi thi\u1ec7u c\u00e1c th\u1ef1c th\u1ec3 tr\u00ed tu\u1ec7 nh\u00e2n t\u1ea1o (NAEs) l\u00e0 m\u1ed9t ph\u1ea7n\r\n                  t\u00edch c\u1ef1c c\u1ee7a m\u1ea1ng, \u0111\u00f3ng vai tr\u00f2 quan tr\u1ecdng trong vi\u1ec7c mang \u0111\u1ebfn\r\n                  s\u1ef1 th\u00f4ng minh m\u1ea1ng l\u01b0\u1edbi. 5. NAEs ho\u1ea1t \u0111\u1ed9ng theo m\u00f4 h\u00ecnh v\u00f2ng\r\n                  \u0111\u1eddi, t\u1eeb kh\u1edfi t\u1ea1o v\u00e0 c\u1ea5u h\u00ecnh \u0111\u1ebfn ho\u1ea1t \u0111\u1ed9ng ban \u0111\u1ea7u v\u00e0 ph\u00e1t\r\n                  tri\u1ec3n, ho\u1ea1t \u0111\u1ed9ng \u1ed5n \u0111\u1ecbnh v\u00e0 m\u1edf r\u1ed9ng, v\u00e0 cu\u1ed1i c\u00f9ng l\u00e0 k\u1ebft th\u00fac\r\n                  v\u00e0 ch\u1ea5m d\u1ee9t. 6. C\u00e1c m\u1ea1ng ng\u1ea7m ph\u00e1t tri\u1ec3n trong Web 4.0 ph\u1ea3i\r\n                  \u0111\u1ea3m b\u1ea3o quy\u1ec1n ri\u00eang t\u01b0 v\u00e0 b\u1ea3o m\u1eadt th\u00f4ng tin khi x\u1eed l\u00fd d\u1eef li\u1ec7u\r\n                  nh\u1ea1y c\u1ea3m. 7. Web 4.0 \u0111\u1ed1i m\u1eb7t v\u1edbi th\u00e1ch th\u1ee9c v\u1ec1 quy\u1ec1n ri\u00eang t\u01b0,\r\n                  ch\u1eb3ng h\u1ea1n nh\u01b0 qu\u1ea3n l\u00fd danh t\u00ednh v\u00e0 ph\u00e2n ph\u1ed1i d\u1eef li\u1ec7u. 8. Web\r\n                  4.0 c\u00f3 th\u1ec3 t\u1ea1o ra c\u01a1 h\u1ed9i m\u1edbi cho quy \u0111\u1ecbnh v\u00e0 b\u1ea3o v\u1ec7 quy\u1ec1n\r\n                  ri\u00eang t\u01b0 c\u1ee7a ng\u01b0\u1eddi d\u00f9ng. 9. GDPR c\u00f3 th\u1ec3 c\u00f3 vai tr\u00f2 quan tr\u1ecdng\r\n                  trong vi\u1ec7c \u0111\u1ea3m b\u1ea3o s\u1ef1 ri\u00eang t\u01b0 v\u00e0 b\u1ea3o v\u1ec7 d\u1eef li\u1ec7u c\u00e1 nh\u00e2n trong\r\n                  Web 4.0. T\u1eeb kh\u00f3a: Web 4.0, Web 3.0, tr\u00ed tu\u1ec7 nh\u00e2n t\u1ea1o, m\u1ea1ng\r\n                  ng\u1ea7m, n\u1ed9i dung VR/XR, quy\u1ec1n ri\u00eang t\u01b0, quy\u1ec1n ri\u00eang t\u01b0, GDPR.\r\n                </p>\r\n                <a\r\n                  href=\"abc.com\"\r\n                  target=\"_blank\"\r\n                  class=\"mt-2 text-indigo-500 hover:text-indigo-400\"\r\n                >\r\n                  Link \u0111\u1ea7y \u0111\u1ee7\r\n                </a>\r\n                <div class=\"mt-4\">\r\n                  <div\r\n                    id=\"chatbox\"\r\n                    class=\"mt-4\"\r\n                    style={{ whiteSpace: \"pre-line\" }}\r\n                  >\r\n                    {state.chatcontent}\r\n                  </div>\r\n                  <div class=\"d-flex flex-column\">\r\n                    <div class=\"w-full button-container\">\r\n                      <textarea\r\n                        id=\"querytext\"\r\n                        rows=\"5\"\r\n                        maxlength=\"600\"\r\n                        class=\"w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:shadow-outline\"\r\n                        placeholder=\"Nh\u1eadp c\u00e2u h\u1ecfi ...\"\r\n                        value={state.queryText}\r\n                        onChange={(e) => setQueryText(e.target.value)}\r\n                        onKeyUp={(e) => handleKeyPress(e)}\r\n                      ></textarea>\r\n                      <button\r\n                        id=\"sendButton\"\r\n                        class=\"mt-2 bg-indigo-500 hover:bg-indigo-400 text-white font-bold py-2 px-4 rounded\"\r\n                        onClick={() =>\r\n                          onSendClick(state.selectingId, state.queryText)\r\n                        }\r\n                      >\r\n                        <i class=\"fas fa-chevron-right\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </p>\r\n            </div>\r\n            <div class=\"bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n              <button\r\n                id=\"modal-close\"\r\n                type=\"button\"\r\n                class=\"mt-3 w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-700 text-base font-medium hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-900 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\r\n                onClick={() => closeModal()}\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/tonitran.near/widget/HelloNear", "fact_widget_deployments_id": "cf5c81a95ea7b190bb2d289ecc704d9e", "inserted_timestamp": "2023-08-24T08:08:04.201Z", "modified_timestamp": "2023-08-24T08:08:04.201Z", "__row_index": 17}