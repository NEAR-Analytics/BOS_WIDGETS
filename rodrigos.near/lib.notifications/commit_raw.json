{"tx_hash": "9CBjwMM3wVdb1pPGq2L22Pfwfht1QGhBw3nwsGXazWGk", "action_id_social": "AevTCjJRXsV1PYzNWVct8qQUXB5q86gv7JwdeuVgYRRv-0-widget", "block_id": 113193800, "block_timestamp": "2024-02-20T02:48:58.936Z", "signer_id": "rodrigos.near", "widget_name": "lib.notifications", "source_code": "//lib.notifications\n\nconst { stateUpdate, imports, fatherNotificationsState } = props;\n\nif (!stateUpdate) {\n  stateUpdate = () => {};\n}\n\nif (!imports) {\n  imports = [];\n}\n\nconst newImportsFormat = { notifications: [\"getNotificationData\"] };\n\nlet fatherStateHasAllFunction = true;\nimports.forEach((fnName) => {\n  fatherStateHasAllFunction =\n    fatherStateHasAllFunction && fatherNotificationsState[fnName] !== undefined;\n});\n\nif (fatherStateHasAllFunction) {\n  return <></>;\n}\n\nfunction appendExports(fnName) {\n  if (fnName === \"getNotificationData\") {\n    libNotificationsOutput[fnName] = getNotificationData;\n  }\n}\n\nfunction getNotificationData(notificationType, usersToNotify, redirectTo) {\n  const notificationTypeText = {\n    mention: `I have mentioned @${usersToNotify} in this post: `,\n    mentionOnComment: `I have mentioned @${usersToNotify} on my comment on this post: `,\n    upVote: \"I have upVoted this post: \",\n    emoji: \"I have reacted to this post: \",\n    comment: \"I have commented this post: \",\n  };\n\n  const dataToAdd = {\n    post: {\n      main: JSON.stringify({\n        type: \"md\",\n        text: `${notificationTypeText[notificationType]} ${redirectTo}`,\n      }),\n    },\n    index: {\n      notify: JSON.stringify(\n        usersToNotify.map((user) => {\n          return {\n            key: user,\n            value: {\n              type: \"mention\",\n              item: {\n                type: \"social\",\n                path: `${context.accountId}/post/main`,\n              },\n            },\n          };\n        })\n      ),\n    },\n  };\n\n  return dataToAdd;\n}\n\nconst libNotificationsOutput = {};\n\nimports.forEach((fnName) => {\n  appendExports(fnName);\n});\n\nstateUpdate({ notifications: libNotificationsOutput });\n\nreturn <></>;\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/rodrigos.near/widget/lib.notifications", "fact_widget_deployments_id": "5e6b8231f5fe2dbba31416ff00e0ff02", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 10}