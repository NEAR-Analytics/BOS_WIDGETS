{"tx_hash": "4QtJw9LqHgZuj2YuBsbNgoATttGiBze8JN5AdQyBfNmW", "action_id_social": "9LE4DMLZg1fZ1HcM6UGEdrKgstU16MFtwJWCoG8NrZ9C-0-widget", "block_id": 111245697, "block_timestamp": "2024-01-25T01:51:31.823Z", "signer_id": "rodrigos.near", "widget_name": "Governance.Proposal.VotingResultsCard", "source_code": "let yesVotes = props.yesVotes ?? 0;\nlet noVotes = props.noVotes ?? 0;\nlet abstainVotes = props.abstainVotes ?? 0;\nconst quorum = props.quorum;\nconst onVotingPeriod = props.onVotingPeriod;\nconst isQuorumReached = props.isQuorumReached;\nconst isProposalSucceeded = props.isProposalSucceeded;\nconst hasEnded = new Date().getTime() > Number(endDate);\nconst yoctoToNear = (amountYocto) =>\n  parseInt(new Big(amountYocto).div(new Big(10).pow(24)));\n\nconst numberWithCommas = (x) =>\n  x.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\n\nyesVotes = yoctoToNear(yesVotes);\nnoVotes = yoctoToNear(noVotes);\nabstainVotes = yoctoToNear(abstainVotes);\nconst totalVotes = yesVotes + noVotes + abstainVotes;\n\nconst getProposalCompletionStatus = () => {\n  if (isQuorumReached && hasEnded) {\n    return isProposalSucceeded ? \"Proposal Succeeded\" : \"Proposal Rejected\";\n  }\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 0;\n  gap: 1em;\n  width: 100%;\n  padding: 1.25em 0.85em;\n  box-shadow: rgba(0, 0, 0, 0.18) 0px 2px 4px;\n  border-radius: 16px;\n  background: #ffffff;\n  & h4 {\n    font-family: \"Inter\";\n    font-style: normal;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 20px;\n    color: #797777;\n  }\n`;\n\nconst Heading = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px;\n  gap: 16px;\n  width: 100%;\n\n  & div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding: 0px;\n    gap: 16px;\n\n    & > h2 {\n      font-family: \"FK Grotesk\";\n      font-style: normal;\n      font-weight: 700;\n      font-size: 25px;\n      line-height: 36px;\n      color: #11181c;\n    }\n\n    & > span {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 19px;\n      line-height: 23px;\n      color: #7e868c;\n    }\n  }\n`;\n\nconst Values = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px;\n  gap: 16px;\n  width: 100%;\n\n  & div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding: 0px;\n    gap: 16px;\n\n    & > h3 {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 600;\n      font-size: 17px;\n      line-height: 20px;\n      color: #11181c;\n    }\n\n    & > h4 {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 14px;\n      line-height: 20px;\n      color: #797777;\n    }\n\n    & > span {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 19px;\n      line-height: 23px;\n      color: #7e868c;\n    }\n    & > div {\n      display: flex;\n      flex-direction: column;\n      align-items: start;\n      padding: 0px;\n      gap: 1px;\n      .yes {\n        color: #42A174;\n      }\n      .no {\n        color: #FF6369;\n      }\n      .abstain{\n        color: #FFBF00;\n      }\n    }\n  }\n  `;\n\nconst ProgressContainer = styled.div`\n  border-radius: 20px;\n  border: none;\n  display: flex;\n  padding: 0;\n  position: relative;\n  background: #f3f3f2;\n  width: 100%;\n  margin-bottom: 14px;\n\n  .bar {\n    border-radius: 0px;\n    padding: 12px 20px;\n    text-align: left;\n    font-weight: 600;\n    font-size: 15px;\n    transition: all 0.4s ease-in-out;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    color: #000;\n    min-width: 0;\n    @media (max-width: 600px) {\n      justify-content: start;\n    }\n  }\n  \n  .bar.yes {\n      background-color: #42A174;\n      min-width: 0;\n      width: ${(yesVotes / totalVotes) * 100 || 0}%;\n  }\n  .bar.no {\n    background-color: #FF6369;\n    min-width: 0;\n      width: ${(noVotes / totalVotes) * 100 || 0}%;\n  }\n  .bar.abstain {\n      background-color: #FFBF00;\n      min-width: 0;\n      width: ${(abstainVotes / totalVotes) * 100 || 0}%;\n  }\n`;\n\nreturn (\n  <Container>\n    <Heading>\n      <div>\n        <h2>Voting Results</h2>\n      </div>\n    </Heading>\n    <Values>\n      <div>\n        <div>\n          <h4>For {numberWithCommas(yesVotes)}VP</h4>\n          <h3 className=\"yes\">\n            {yesVotes\n              ? (\n                  (yesVotes * 100) /\n                  (yesVotes + noVotes + abstainVotes)\n                ).toFixed(2)\n              : \"0\"}\n            %\n          </h3>\n        </div>\n      </div>\n\n      <div>\n        <div>\n          <h4>Abstain {numberWithCommas(abstainVotes)}VP</h4>\n          <h3 className=\"abstain\">\n            {abstainVotes\n              ? (\n                  (abstainVotes * 100) /\n                  (yesVotes + noVotes + abstainVotes)\n                ).toFixed(2)\n              : \"0\"}\n            %\n          </h3>\n        </div>\n      </div>\n      <div>\n        <div>\n          <h4>Against {numberWithCommas(noVotes)}VP</h4>\n          <h3 className=\"no\">\n            {noVotes\n              ? ((noVotes * 100) / (yesVotes + noVotes + abstainVotes)).toFixed(\n                  2\n                )\n              : \"0\"}\n            %\n          </h3>\n        </div>\n      </div>\n    </Values>\n    <ProgressContainer>\n      {yesVotes > 0 && <span className=\"bar yes\"></span>}\n      {abstainVotes > 0 && (\n        <span className=\"bar abstain d-inline-block text-truncate\"></span>\n      )}\n      {noVotes > 0 && <span className=\"bar no\"></span>}\n    </ProgressContainer>\n    <h4>\n      {quorum &&\n        `Total Votes: ${numberWithCommas(\n          totalVotes\n        )}VP | Required for Quorum: ${numberWithCommas(\n          yoctoToNear(quorum).toFixed(0)\n        )}VP`}\n    </h4>\n    <h4>{getProposalCompletionStatus()}</h4>\n  </Container>\n);\n", "metadata": {"fork_of": "manzanal.near/widget/Governance.Proposal.VotingResultsCard@101622858"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rodrigos.near/widget/Governance.Proposal.VotingResultsCard", "fact_widget_deployments_id": "a1a7b42b7c25de3cd43eb79518e687d9", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}