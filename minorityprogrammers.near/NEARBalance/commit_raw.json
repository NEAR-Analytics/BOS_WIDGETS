{"tx_hash": "G1uwNWQ4HjMesT9yBsLRx7P4UwFbPokVKiNNoH7eAhba", "action_id_social": "63kjegR4yeJegWtF2oWa1VNLuJDvfSgXCvxYLi9CzTrA-1-widget", "block_id": 90656734, "block_timestamp": "2023-04-28T22:27:52.219Z", "signer_id": "minorityprogrammers.near", "widget_name": "NEARBalance", "source_code": "const balance = 0; // make it balance of account logged in\nconst accountId = context.accountId; // default for context\nif (accountId) {\n  accountId = \"minorityprogrammers.near\"; // for those not logged in\n}\n// if no context then should show root.near default\nState.init({\n  accountId: accountId,\n  balance: balance,\n  validReceiver: true,\n});\n// add balance change\n\nconst onChangeAccount = (accountId) => {\n  const validReceiverLink = isNearAddress(accountId); // add error message or change button based on this\n  State.update({\n    accountId,\n    validReceiver: validReceiverLink,\n  });\n};\n\nconst onChangeBalance = () => {\n  // add balance logic\n  // const balance1 =  near.account(accountId).getAccountBalance;\n  State.update({\n    balance,\n  });\n};\n\n/* HELPER FUNCTION */\nfunction isNearAddress(address) {\n  if (typeof address !== \"string\") {\n    return false;\n  }\n  if (!address.endsWith(\".near\")) {\n    return false;\n  }\n  const parts = address.split(\".\");\n  if (parts.length !== 2) {\n    return false;\n  }\n  if (parts[0].length < 2 || parts[0].length > 32) {\n    return false;\n  }\n  if (!/^[a-z0-9_-]+$/i.test(parts[0])) {\n    return false;\n  }\n  return true;\n}\nreturn (\n  <div>\n    <div\n      x\n      className=\"p-2\"\n      style={{\n        background: \"#fdfdfd\",\n        border: \"solid 1px #dee2e6\",\n        borderTop: 0,\n        borderBottomLeftRadius: \".375rem\",\n        borderBottomRightRadius: \".375rem\",\n        minHeight: \"9em\",\n      }}\n    >\n      <div>\n        Wallet Address\n        <input\n          type=\"text\"\n          placeholder={state.accountId}\n          onChange={(e) => onChangeAccount(e.target.value)}\n        />\n        <div className=\"mt-2\"></div>\n        NEAR Balance\n        <h2>{state.balance}</h2>\n        {!state.validReceiver && (\n          <div className=\"btn btn-danger \">Invalid Address</div>\n        )}\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"name": "NEAR Balance (WIP)"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/minorityprogrammers.near/widget/NEARBalance", "fact_widget_deployments_id": "7a977962705e2b7d6a24042c8e505b95", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}