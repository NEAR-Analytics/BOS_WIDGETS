{"tx_hash": "FHXc3hCcWDcWFsxQP4e5M1Qab8FCFHKaf8Ep67fWbYh9", "action_id_social": "7zw6RTb8UM1ox2qPS6imiFcZqG2LVYoNzwHD5Yb5eGH6-0-widget", "block_id": 112324419, "block_timestamp": "2024-02-07T18:08:45.532Z", "signer_id": "james.near", "widget_name": "BuilderHat.give", "source_code": "const { Button, InputField } = VM.require(\n  \"buildhub.near/widget/components\"\n) || {\n  Button: () => <></>,\n  InputField: () => <></>,\n};\n\nif (!Button || !InputField) {\n  return \"\";\n}\n\nconst accountId = context.accountId;\n\nif (!accountId) {\n  return \"\";\n}\n\nconst profile = Social.getr(`${recipient}/profile`);\nconst badges = Social.getr(`${recipient}/badge`);\n\nconst [recipient, setRecipient] = useState(account ?? \"\");\nconst [hatColor, setHatColor] = useState(badges.builder[accountId] ?? \"\");\n\nconst onHatChange = useCallback((e) => {\n  setHatColor(e.target.value);\n}, []);\n\nconst onRecipientChange = useCallback((e) => {\n  setRecipient(e.target.value);\n}, []);\n\nconst Container = styled.div`\n  background-color: #000;\n  padding: 39px;\n  border-radius: 8px;\n`;\n\nconst SpanLabel = styled.span`\n  color: var(--White-100, #fff);\n\n  /* Body/14px */\n  font-size: 15px;\n  font-style: normal;\n  font-weight: 555;\n  line-height: 170%; /* 23.8px */\n`;\n\nconst ProfileImageContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n  align-items: center;\n\n  img {\n    width: 64px;\n    height: 64px;\n    object-fit: cover;\n    border-radius: 100%;\n  }\n`;\n\nreturn (\n  <Container>\n    <div className=\"d-flex flex-column mb-3\" style={{ gap: 12 }}>\n      <span>\n        <h5 style={{ color: \"#fff\" }}>NEAR Account ID</h5>\n      </span>\n      <InputField\n        value={recipient}\n        key={\"recipient\"}\n        onChange={onRecipientChange}\n        placeholder=\"example.near\"\n        maxWidth=\"100%\"\n      />\n      <br />\n      <div className=\"d-flex flex-row\">\n        <ProfileImageContainer className=\"d-flex align-items-center gap-3\">\n          <Widget\n            src=\"james.near/widget/profile.image\"\n            props={{\n              accountId: recipient,\n            }}\n          />\n          <h5 className=\"mt-2\" style={{ color: \"#fff\" }}>\n            {profile.name || recipient}\n          </h5>\n        </ProfileImageContainer>\n        <div className=\"ms-auto m-2 mt-3\">\n          <Button\n            style={{ marginRight: 8 }}\n            variant=\"outline\"\n            onClick={() => {\n              Social.set(\n                {\n                  badge: {\n                    builder: {\n                      [recipient]: hatColor,\n                    },\n                  },\n                },\n                {\n                  onCommit: () => {\n                    setEditMode(false);\n                  },\n                  force: true,\n                }\n              );\n            }}\n            id={\"save-profile\"}\n          >\n            Save Profile\n          </Button>\n          <Button\n            variant=\"outline\"\n            onClick={() => setEditMode(false)}\n            id={\"cancel-edit\"}\n          >\n            Cancel\n          </Button>\n        </div>\n      </div>\n      <div className=\"d-flex flex-column\">\n        <span className=\"d-flex flex-row\">\n          <p className=\"me-3\" style={{ color: \"#fff\" }}>\n            <b>Builder Hat</b>\n          </p>\n          <Widget\n            src=\"james.near/widget/BuilderHat\"\n            props={{ color: hatColor, accountId: recipient }}\n          />\n        </span>\n        <InputField\n          value={hatColor}\n          key={\"hat\"}\n          onChange={onHatChange}\n          placeholder=\"red, green, blue, yellow, purple, gray, brown, orange, maroon, pink, white, black, rust\"\n          maxWidth=\"100%\"\n        />\n      </div>\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/james.near/widget/BuilderHat.give", "fact_widget_deployments_id": "050712a2c1e32b8bcc2f0d20a552aec3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}