{"tx_hash": "8jzUgfYQ6gMtmUB4W886n3Di7t8vSxU3FaHLHN3FdqT7", "action_id_social": "BP89fSDdud1MmJxMGjRDFQkhh5qQSZGosNApPLc1WNS2-0-widget", "block_id": 98378882, "block_timestamp": "2023-08-08T23:17:46.435Z", "signer_id": "james.near", "widget_name": "mutuals", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nif (!accountId) {\n  return \"Please connect your NEAR account :)\";\n}\n\nconst allAccounts = Social.keys(`*/graph/follow/*`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\n\nif (allAccounts === null) {\n  return \"\";\n}\n\nfor (const account of Object.keys(allAccounts)) {\n  const followers = allAccounts[account]?.graph?.follow;\n\nconst mutualFollowers = {};\n\nfor (const account of Object.keys(allAccounts)) {\n  const followers = allAccounts[account]?.graph?.follow;\n\n  if (followers) {\n    for (const follower of Object.keys(followers)) {\n      if (allAccounts[follower]?.graph?.follow?.[account]) {\n        if (!mutualFollowers[account]) {\n          mutualFollowers[account] = [];\n        }\n        mutualFollowers[account].push(follower);\n      }\n    }\n  }\n}\n\nconst Wrapper = styled.div`\n  max-width: 100%;\n  @media (max-width: 576px) {\n    .content {\n      flex-direction: column;\n    }\n  }\n`;\n\nconst FollowButtonWrapper = styled.div`\n  width: 100%;\n  padding: 2px;\n  display: flex;\n  justify-content: space-between;\n\n  div,\n  button {\n    flex-grow: 1;\n    padding: 8px;\n    margin: 4px;\n  }\n\n  @media (max-width: 1200px) {\n    width: auto;\n    div,\n    button {\n      width: auto;\n    }\n  }\n`;\n\nreturn (\n  <Wrapper>\n    <div className=\"d-flex border-bottom justify-content-between\">\n          <Widget\n            src=\"mob.near/widget/Profile\"\n            props={{ accountId: \"build.sputnik-dao.near\" }}\n          />\n    </div>\n    {mutualFollowers.map(accountId, i) => (\n      <div key={i} className=\"d-flex border-bottom justify-content-between\">\n        <div className=\"d-flex align-items-center\">\n          <div className=\"p-3\">\n            <h5>{i + 1}</h5>\n          </div>\n          <div className=\"p-2\">\n            <Widget src=\"mob.near/widget/Profile\" props={{ accountId }} />\n          </div>\n        </div>\n        <div className=\"p-1 m-3\">\n          <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n        </div>\n      </div>\n    )};\n  </Wrapper>\n);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/james.near/widget/mutuals", "fact_widget_deployments_id": "0f4b121e2cf4d1dd0674745c5bc41a98", "inserted_timestamp": "2023-08-09T00:45:33.878Z", "modified_timestamp": "2023-08-09T00:45:33.878Z", "__row_index": 3}