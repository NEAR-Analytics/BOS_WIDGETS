{"tx_hash": "BbKLqgcRgMVeniW9QQrusjTNWsaG51jUpUMVcrzJ7wf3", "action_id_social": "2yj1YbqecsFfFLNv9JkRRmAHyffyztodiWs5yALBCytf-0-widget", "block_id": 105280185, "block_timestamp": "2023-11-09T07:55:52.005Z", "signer_id": "james.near", "widget_name": "fork", "source_code": "const src = props.src ?? \"devs.near/widget/community\";\nconst [creatorId, type, name] = src.split(\"/\");\n\nconst { handleClose } = props;\n\nState.init({\n  name,\n});\n\nconst source = Social.get(`${src}`);\n\nconst forkClick = () => {\n  if (state.loading) {\n    return;\n  }\n\n  State.update({\n    loading: true,\n  });\n\n  const data = {\n    index: {\n      fork: JSON.stringify({\n        key: {\n          type: \"social\",\n          path: src,\n        },\n        value: {\n          update: `${context.accountId}/${type}/${state.name}`,\n        },\n      }),\n    },\n    [`${type}`]: {\n      [`${state.name}`]: {\n        \"\": `${source}`,\n        metadata: {\n          upstream: src,\n          downstream:\n            name !== state.name\n              ? `${context.accountId}/${type}/${state.name}`\n              : undefined,\n        },\n      },\n    },\n  };\n\n  data.index.notify = JSON.stringify({\n    key: creatorId,\n    value: {\n      type: \"fork\",\n      src,\n      update: `${context.accountId}/${type}/${state.name}`,\n    },\n  });\n\n  Social.set(data, {\n    onCommit: () => State.update({ loading: false }),\n    onCancel: () =>\n      State.update({\n        loading: false,\n      }),\n  });\n};\n\nconst Modal = styled.div`\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.7);\n`;\n\nconst ComponentWrapper = styled.div`\n  display: flex;\n  width: 80%;\n  height: 80%;\n  flex-direction: column;\n  align-items: flex-start;\n  border-radius: 10px;\n  background: #fff;\n  border: 1px solid transparent;\n  margin: 140px auto auto auto;\n  @media only screen and (max-width: 480px) {\n    width: 90%;\n  }\n`;\n\nconst CardStyled = styled.div`\n  width: 100%;\n  height: 100%;\n  background: #f8f8f9;\n  gap: 10px;\n  padding: 25px;\n  margin: 0 auto;\n  border-radius: 10px;\n  overflow-y: scroll;\n`;\n\nconst CardForm = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: auto;\n`;\n\nreturn (\n  <Modal>\n    <ComponentWrapper>\n      <CardStyled>\n        <CardForm>\n          <div className=\"d-flex flex-wrap justify-content-between mb-3\">\n            <div className=\"m-1\">\n              <h1>Fork</h1>\n            </div>\n            <div className=\"ms-auto me-0 me-md-2 d-flex align-items-center\">\n              <div className=\"top-right\">\n                <Widget\n                  src=\"james.near/widget/styling\"\n                  props={{\n                    Button: {\n                      style: \"danger\",\n                      text: \"Close\",\n                      onClick: handleClose,\n                    },\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"input-group m-1 mb-2\">\n            <input\n              className=\"form-control mt-2\"\n              defaultValue={state.name}\n              onChange={(e) => {\n                State.update({\n                  name: e.target.value,\n                });\n              }}\n            />\n          </div>\n          <button\n            className=\"btn btn-outline-secondary m-1 mt-3\"\n            onClick={forkClick}\n          >\n            <i className=\"bi bi-feather\"></i>\n            Submit\n          </button>\n        </CardForm>\n      </CardStyled>\n    </ComponentWrapper>\n  </Modal>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/james.near/widget/fork", "fact_widget_deployments_id": "177716e41a8102ddca98f4e2eb69a9cb", "inserted_timestamp": "2023-11-09T09:46:31.127Z", "modified_timestamp": "2023-11-09T09:46:31.127Z", "__row_index": 0}