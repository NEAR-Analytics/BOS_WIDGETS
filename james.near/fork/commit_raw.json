{"tx_hash": "ABNcdmZKwofo4tDZzPWJyWR9KksQQ859PpBYqguftQYm", "action_id_social": "AmGMAnmNfewbqKSgFvAyQF7Ct9rMCYorv9Yx4XL1BPmH-0-widget", "block_id": 105281900, "block_timestamp": "2023-11-09T08:30:58.016Z", "signer_id": "james.near", "widget_name": "fork", "source_code": "const src = props.src ?? \"devs.near/widget/community\";\nconst [creatorId, type, name] = src.split(\"/\");\n\nconst { handleClose } = props;\n\nState.init({\n  name,\n});\n\nconst source = Social.get(`${src}`);\n\nconst forkClick = () => {\n  if (state.loading) {\n    return;\n  }\n\n  State.update({\n    loading: true,\n  });\n\n  const data = {\n    index: {\n      fork: JSON.stringify({\n        key: {\n          type: \"social\",\n          path: src,\n        },\n        value: {\n          update: `${context.accountId}/${type}/${state.name}`,\n        },\n      }),\n    },\n    [`${type}`]: {\n      [`${state.name}`]: {\n        \"\": `${source}`,\n        metadata: {\n          upstream: src,\n          downstream:\n            name !== state.name\n              ? `${context.accountId}/${type}/${state.name}`\n              : undefined,\n        },\n      },\n    },\n  };\n\n  data.index.notify = JSON.stringify({\n    key: creatorId,\n    value: {\n      type: \"fork\",\n      src,\n      update: `${context.accountId}/${type}/${state.name}`,\n    },\n  });\n\n  Social.set(data, {\n    onCommit: () => State.update({ loading: false }),\n    onCancel: () =>\n      State.update({\n        loading: false,\n      }),\n  });\n};\n\nreturn (\n  <div className=\"m-1 row\">\n    <h5>Rename:</h5>\n    <div className=\"m-1 col-auto\">\n      <p className=\"m-1\">{`${context.accountId}/${type}/`}</p>\n    </div>\n    <div className=\"m-1 col-auto\">\n      <input\n        className=\"form-control\"\n        defaultValue={state.name}\n        onChange={(e) => {\n          State.update({\n            name: e.target.value,\n          });\n        }}\n      />\n    </div>\n    <div className=\"m-1 col-auto\">\n      <button className=\"btn btn-outline-secondary\" onClick={forkClick}>\n        <i className=\"bi bi-feather\"></i>\n        Submit\n      </button>\n    </div>\n    <div className=\"m-1 col-auto\">\n      <button className=\"btn btn-outline-danger\" onClick={handleClose}>\n        <i className=\"bi bi-feather\"></i>\n        Close\n      </button>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/james.near/widget/fork", "fact_widget_deployments_id": "bf2f0096e1146f935337e1bda09fe211", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 4}