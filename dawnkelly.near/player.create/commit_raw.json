{"tx_hash": "8TJgq6bwfDTuc5TDw78VBpdJu1EDdDsC8EBZ4ZX4pQdk", "action_id_social": "5PRmryLBjwftG1QHy9ASJ7Ltz1K2C4Gw1JTP4VkdP69c-0-widget", "block_id": 113840421, "block_timestamp": "2024-02-29T21:08:05.758Z", "signer_id": "dawnkelly.near", "widget_name": "player.create", "source_code": "const accountId = context.accountId;\n\nconst [player, setPlayer] = useState(() => {\n  const initialData = Social.getr(`${accountId}/game/player`) ?? {\n    metadata: {\n      name: \"\",\n      species: \"\",\n      class: \"\",\n      image: {},\n      attack: 0,\n      defense: 0,\n      strength: 0,\n      courage: 0,\n      magic: 0,\n    },\n  };\n  return initialData;\n});\n\nconst handleNameChange = (e) => {\n  const newName = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, name: newName },\n  }));\n};\n\nconst handleDescriptionChange = (e) => {\n  const newDescription = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, description: newDescription },\n  }));\n};\n\nconst handleSpeciesChange = (e) => {\n  const newSpecies = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, species: newSpecies },\n  }));\n};\n\nconst handleClassChange = (e) => {\n  const newClass = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, class: newClass },\n  }));\n};\n\nconst handleSkillChange = (e) => {\n  const newSkill = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, skill: newSkill },\n  }));\n};\n\nconst handleAbilityChange = (e) => {\n  const newAbility = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, ability: newAbility },\n  }));\n};\n\nconst handleWeaknessChange = (e) => {\n  const newWeakness = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, weakness: newWeakness },\n  }));\n};\n\nconst handleDefaultWeaponChange = (e) => {\n  const newDefaultWeapon = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, defaultWeapon: newDefaultWeapon },\n  }));\n};\n\nconst handleAttackChange = (e) => {\n  const newValue = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, attack: newValue },\n  }));\n\nconst handleDefenseChange = (e) => {\n  const newValue = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, defense: newValue },\n  }));\n};\n\nconst handleStrengthChange = (e) => {\n  const newValue = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, strength: newValue },\n  }));\n};\n\nconst handleCourageChange = (e) => {\n  const newValue = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, courage: newValue },\n  }));\n};\n\nconst handleMagicChange = (e) => {\n  const newValue = e.target.value;\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, magic: newValue },\n  }));\n};\n\nconst startingStatPoints = 50;\n\nconst handlePointsChange = (category, newValue) => {\n  const totalPoints = Object.values(player.metadata).reduce(\n    (acc, curr) => acc + curr,\n    0\n  );\n  const totalPointsExceptCategory = totalPoints - player.metadata[category];\n\n  if (newValue >= 0 && newValue <= 20 && totalPointsExceptCategory + newValue <= startingStatPoints) {\n      setPlayer((prevPlayer) => ({\n        ...prevPlayer,\n        metadata: {\n          ...prevPlayer.metadata,\n          [category]: newValue,\n        },\n      }));\n}\n\nconst isButtonDisabled = !context.accountId || totalPoints > startingStatPoints;\n\nconst totalPoints = Object.values(player.metadata).reduce(\n    (acc, curr) => acc + curr,\n    0\n  ); \n{\n  /*let startingStatPoints = 50;\nconst usedStatPoints =\n  JSON.parse(player.metadata.attack) +\n  JSON.parse(player.metadata.defense) +\n  JSON.parse(player.metadata.strength) +\n  JSON.parse(player.metadata.courage) +\n  JSON.parse(player.metadata.magic);\nconsole.log(usedStatPoints);*/\n}\n\nconst handleImageChange = (newImage) => {\n  setPlayer((prevPlayer) => ({\n    ...prevPlayer,\n    metadata: { ...prevPlayer.metadata, image: newImage },\n  }));\n};\n\nconst handleSave = () => {\n  Social.set({\n    game: { player },\n  });\n};\n\nreturn (\n  <div>\n    <div className=\"m-2\">\n      <h4>Create Your Character</h4>\n      <div className=\"mb-3 p-1\">\n        <label for=\"name\">Name:</label>\n        <input\n          id=\"name\"\n          type=\"text\"\n          placeholder=\"What is your character's name?\"\n          value={player.metadata.name}\n          onChange={handleNameChange}\n        />\n      </div>\n      <h5 className=\"mb-2\">Avatar</h5>\n      <div className=\"p-1\">\n        <Widget\n          src=\"mob.near/widget/ImageEditorTabs\"\n          props={{\n            image: player.metadata.image,\n            onChange: handleImageChange,\n          }}\n        />\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"description\">Description:</label>\n        <input\n          id=\"description\"\n          type=\"text\"\n          placeholder=\"What is your character's description?\"\n          value={player.metadata.description}\n          onChange={handleDescriptionChange}\n        />\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"species\">Species:</label>\n        <select\n          name=\"species\"\n          id=\"species\"\n          value={player.metadata.species}\n          onChange={handleSpeciesChange}\n        >\n          <option value=\"dwarf\">Dwarf</option>\n          <option value=\"orc\">Orc</option>\n          <option value=\"human\">Human</option>\n          <option value=\"elf\">Elf</option>\n          <option value=\"halfling\">Halfling</option>\n          <option value=\"human\">Human</option>\n          <option value=\"dragonborn\">Dragonborn</option>\n          <option value=\"gnome\">Gnome</option>\n          <option value=\"tiefling\">Tiefling</option>\n        </select>\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"class\">Class:</label>\n        <select\n          name=\"class\"\n          id=\"class\"\n          value={player.metadata.class}\n          onChange={handleClassChange}\n        >\n          <option value=\"barbarian\">Barbarian</option>\n          <option value=\"bard\">Bard</option>\n          <option value=\"cleric\">Cleric</option>\n          <option value=\"druid\">Druid</option>\n          <option value=\"fighter\">Fighter</option>\n          <option value=\"archer\">Archer</option>\n          <option vlaue=\"knight\">Knight</option>\n          <option value=\"monk\">Monk</option>\n          <option value=\"paladin\">Paladin</option>\n          <option value=\"ranger\">Ranger</option>\n          <option value=\"sorcerer\">Sorceror</option>\n          <option value=\"wizard\">Wizard</option>\n        </select>\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"skill\">Skill:</label>\n        <input\n          id=\"skill\"\n          type=\"text\"\n          placeholder=\"What is your character's skill?\"\n          value={player.metadata.skill}\n          onChange={handleSkillChange}\n        />\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"ability\">Ability:</label>\n        <input\n          id=\"ability\"\n          type=\"text\"\n          placeholder=\"What is your character's ability?\"\n          value={player.metadata.abililty}\n          onChange={handleAbilityChange}\n        />\n      </div>\n      <div className=\"mb-3 p-1\">\n        <label for=\"weakness\">Weakness:</label>\n        <input\n          id=\"weakness\"\n          type=\"text\"\n          placeholder=\"What is your character's weakness?\"\n          value={player.metadata.weakness}\n          onChange={handleWeaknessChange}\n        />\n      </div>\n    </div>\n\n    <div className=\"mb-3 p-1\">\n      <label for=\"defaultweapon\">Default Weapon:</label>\n      <select\n        name=\"defaultweapon\"\n        id=\"defaultweapon\"\n        value={player.metadata.defaultweapon}\n        onChange={handleDefaultWeaponChange}\n      >\n        <option value=\"bladeRadiance\">Blade of Radiance</option>\n        <option value=\"moonShadowBow\">Moon Shadow Bow</option>\n        <option value=\"thunderForgeHammer\">Thunderforge War Hammer</option>\n        <option value=\"celestialStaff\">Celestial Staff</option>\n        <option value=\"shadowScepter\">Shadow Scepter</option>\n        <option value=\"obsidianCleaver\">Obsidian Cleaver</option>\n        <option vlaue=\"graspingGauntlets\">Grasping Gauntlents</option>\n        <option value=\"voidDagger\">Void Dagger</option>\n      </select>\n    </div>\n\n    <div className=\"m-2\">\n      <h4>Create Character Stats</h4>\n      <h6>\n        You have up to 50 points to assign to your character stats. No more than\n        20 points may be assigned to a single category.\n      </h6>\n\n      <div className=\"mb-3 p-1\">\n        <label for=\"attack\">Attack:</label>\n\n        <input\n          id=\"attack\"\n          type=\"number\"\n          name=\"attack\"\n          min=\"0\"\n          max=\"20\"\n          placeholder=\"What is your character's attack level? (0-20)\"\n          value={player.metadata.attack}\n          onChange={(e) => handlePointsChange('attack', parseInt(e.target.value))}\n        />\n        <div className=\"mb-3 p-1\">\n          <label for=\"defense\">Defense:</label>\n          <input\n            id=\"defense\"\n            type=\"number\"\n            name=\"defense\"\n            min=\"0\"\n            max=\"20\"\n            placeholder=\"What is your character's defense level? (0-20)\"\n            value={player.metadata.defense}\n            onChange={(e) => handlePointsChange('defense', parseInt(e.target.value))}\n          />\n        </div>\n        <div className=\"mb-3 p-1\">\n          <label for=\"strength\">Strength:</label>\n          <input\n            id=\"strength\"\n            type=\"number\"\n            name=\"strength\"\n            min=\"0\"\n            max=\"20\"\n            placeholder=\"What is your character's strength level? (0-20)\"\n            value={player.metadata.strength}\n            onChange={(e) => handlePointsChange('strength', parseInt(e.target.value))}\n          />\n        </div>\n        <div className=\"mb-3 p-1\">\n          <label for=\"courage\">Courage:</label>\n          <input\n            id=\"courage\"\n            type=\"number\"\n            name=\"courage\"\n            min=\"0\"\n            max=\"20\"\n            placeholder=\"What is your character's courage level? (0-20)\"\n            value={player.metadata.courage}\n            onChange={(e) => handlePointsChange('courage', parseInt(e.target.value))}\n          />\n        </div>\n        <div className=\"mb-3 p-1\">\n          <label for=\"magic\">Magic:</label>\n          <input\n            id=\"magic\"\n            type=\"number\"\n            name=\"magic\"\n            placeholder=\"What is your character's magic level? (0-20)\"\n            value={player.metadata.magic}\n            onChange={(e) => handlePointsChange('magic', parseInt(e.target.value))}\n          />\n        </div>\n      </div>\n      <div className=\"m-3\">\n        <button\n          className=\"btn btn-outline-success\"\n          disabled={isButtonDisabled}\n          onClick={handleSave}\n        >\n          Save\n        </button>\n      </div>\n      <hr />\n      <div className=\"m-3\">\n        <h5 className=\"mb-2\">Preview</h5>\n        <Widget\n          src=\"james.near/widget/player.inline\"\n          props={{\n            accountId,\n            player,\n          }}\n        />\n      </div>\n    </div>\n  </div>\n)};\n", "metadata": {"fork_of": "dawnkelly.near/widget/player.create@113712627"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dawnkelly.near/widget/player.create", "fact_widget_deployments_id": "878b13270bf631f2ebd91fb91fa0b024", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 9}