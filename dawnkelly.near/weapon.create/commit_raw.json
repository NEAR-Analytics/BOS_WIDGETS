{"tx_hash": "3S5BeLTQedbKKwiW6eMQrDyEiNqmtYLh8dNqQjVNQVhD", "action_id_social": "3mTqryTLE8YQ5uW6nYGJgiCwSbT9kMUgYgbqzs1uPNVa-0-widget", "block_id": 115796393, "block_timestamp": "2024-03-30T16:29:23.065Z", "signer_id": "dawnkelly.near", "widget_name": "weapon.create", "source_code": "const accountId = context.accountId;\n\nconst [ammunition, setAmmunition] = useState(\"\");\nconst [finesse, setFinesse] = useState(\"\");\nconst [heavy, setHeavy] = useState(\"\");\nconst [light, setLight] = useState(\"\");\nconst [loading, setLoading] = useState(\"\");\nconst [reach, setReach] = useState(\"\");\nconst [special, setSpecial] = useState(\"\");\nconst [thrown, setThrown] = useState(\"\");\nconst [twoHanded, setTwoHanded] = useState(\"\");\nconst [versatile, setVersatile] = useState(\"\");\nconst [silvered, setSilvered] = useState(\"\");\n\n// handlers for property selector buttons\n\nconst handleAmmunitionChange = (event) => {\n  const newValue = event.target.value;\n  setAmmunition(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      ammunition: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.ammunition,\n    },\n  }));\n};\n\nconst handleFinesseChange = (event) => {\n  const newValue = event.target.value;\n  setFinesse(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      finesse: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.finesse,\n    },\n  }));\n};\n\nconst handleHeavyChange = (event) => {\n  const newValue = event.target.value;\n  setHeavy(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      heavy: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.heavy,\n    },\n  }));\n};\n\nconst handleLightChange = (event) => {\n  const newValue = event.target.value;\n  setLight(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      light: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.light,\n    },\n  }));\n};\n\nconst handleLoadingChange = (event) => {\n  const newValue = event.target.value;\n  setLoading(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      loading: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.loading,\n    },\n  }));\n};\n\nconst handleReachChange = (event) => {\n  const newValue = event.target.value;\n  setReach(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      reach: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.reach,\n    },\n  }));\n};\n\nconst handleSpecialChange = (event) => {\n  const newValue = event.target.value;\n  setSpecial(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      special: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.special,\n    },\n  }));\n};\n\nconst handleThrownChange = (event) => {\n  const newValue = event.target.value;\n  setThrown(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      thrown: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.thrown,\n    },\n  }));\n};\n\nconst handleTwoHandedChange = (event) => {\n  const newValue = event.target.value;\n  setTwoHanded(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      twoHanded: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.twoHanded,\n    },\n  }));\n};\n\nconst handleSilveredChange = (event) => {\n  const newValue = event.target.value;\n  setSilvered(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      silvered: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.silvered,\n    },\n  }));\n};\n\nconst handleVersatileChange = (event) => {\n  const newValue = event.target.value;\n  setVersatile(newValue);\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: {\n      ...prevWeapon.metadata,\n      versatile: newValue === \"yes\" ? \"yes\" : prevWeapon.metadata.versatile,\n    },\n  }));\n};\n\nconst [weapon, setWeapon] = useState(() => {\n  const initialData = Social.getr(`${accountId}/game/weapon`) ?? {\n    metadata: {\n      name: \"\",\n      type: \"\",\n      description: \"\",\n      class: \"\",\n      category: \"\",\n      weight: \"\",\n      cost: \"\",\n      damage: \"\",\n\n      image: {},\n    },\n  };\n  return initialData;\n});\n\nconst handleNameChange = (e) => {\n  const newName = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, name: newName },\n  }));\n};\n\nconst handleImageChange = (newImage) => {\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, image: newImage },\n  }));\n};\n\nconst handleDescriptionChange = (e) => {\n  const newDescription = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, description: newDescription },\n  }));\n};\n\nconst handleMoralsChange = (e) => {\n  const newMorals = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, morals: newMorals },\n  }));\n};\n\nconst handleEthicsChange = (e) => {\n  const newEthics = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, ethics: newEthics },\n  }));\n};\n\nconst handleTypeChange = (e) => {\n  const newType = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, type: newType },\n  }));\n};\n\nconst handleSizeChange = (e) => {\n  const newSize = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, size: newSize },\n  }));\n};\n\nconst handleChallengeChange = (e) => {\n  const newChallenge = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, challenge: newChallenge },\n  }));\n};\n\nconst handleArmorClassChange = (e) => {\n  const newArmorClass = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, armorClass: newArmorClass },\n  }));\n};\n\nconst handleHitPointsChange = (e) => {\n  const newHitPoints = e.target.value;\n  setWeapon((prevWeapon) => ({\n    ...prevWeapon,\n    metadata: { ...prevWeapon.metadata, hitPoints: newHitPoints },\n  }));\n};\n\nconst handleSave = () => {\n  Social.set({\n    game: { weapon },\n  });\n};\n\nreturn (\n  <div>\n    <div className=\"m-2\">\n      <h4>Create A Weapon</h4>\n      <p>\n        You will have a chance to preview your data before saving your creation\n      </p>\n      <div className=\"mb-3 p-1\">\n        <label for=\"name\">Name:</label>\n        <input\n          id=\"name\"\n          type=\"text\"\n          placeholder=\"What is the name of the weapon?\"\n          value={weapon.metadata.name}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div className=\"col-auto\">\n        <label htmlFor=\"type\">Type:</label>\n\n        <div className=\"col\">\n          <input\n            name=\"type\"\n            id=\"type\"\n            type=\"text\"\n            className=\"form-select\"\n            placeholder=\"What is the weapon type (club, rapier, etc)\"\n            value={weapon.metadata.type}\n            onChange={handleTypeChange}\n          ></input>\n        </div>\n      </div>\n    </div>\n\n    <h5 className=\"mb-2\">Weapon Image</h5>\n    <div className=\"p-1\">\n      <Widget\n        src=\"mob.near/widget/ImageEditorTabs\"\n        props={{\n          image: weapon.metadata.image,\n          onChange: handleImageChange,\n        }}\n      />\n    </div>\n\n    <div className=\"mb-3 p-1\">\n      <label for=\"description\">Description:</label>\n      <input\n        id=\"description\"\n        type=\"textarea\"\n        rows=\"4\"\n        cols=\"80\"\n        max-length=\"1200\"\n        placeholder=\"What is the weapon's description?\"\n        value={weapon.metadata.description}\n        onChange={handleDescriptionChange}\n      />\n    </div>\n\n    <div className=\"mb-3 p-1\">\n      <h5 className=\"mb-2 d-block\">Class & Category</h5>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <label for=\"class\">Class:</label>\n          <select\n            name=\"class\"\n            id=\"class\"\n            className=\"form-select\"\n            value={weapon.metadata.class}\n            onChange={handleClassChange}\n          >\n            <option value=\"null\">---</option>\n            <option value=\"melee\">Melee</option>\n            <option value=\"range\">Range</option>\n          </select>\n          <label for=\"category\">Category:</label>\n          <select\n            name=\"category\"\n            id=\"category\"\n            className=\"form-select\"\n            value={weapon.metadata.category}\n            onChange={handleCategoryChange}\n          >\n            <option value=\"null\">---</option>\n            <option value=\"simple\">Simple</option>\n            <option value=\"martial\">Martial</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div className=\"mb-3 p-1\">\n      <span className=\"mb-2 d-block\"></span>\n      <div className=\"mb-3 p-1\">\n        <label for=\"weight\">Weight:</label>\n        <input\n          id=\"weight\"\n          type=\"text\"\n          placeholder=\"What is the weapon's weight in pounds?\"\n          value={weapon.metadata.weight}\n          onChange={handleWeightChange}\n        />\n      </div>\n\n      <div className=\"mb-3 p-1\">\n        <label for=\"cost\">Cost:</label>\n        <input\n          name=\"cost\"\n          id=\"cost\"\n          type=\"text\"\n          className=\"form-select\"\n          placeholder=\"Weapon cost (in gold pieces)\"\n          value={weapon.metadata.cost}\n          onChange={handleCostChange}\n        ></input>\n      </div>\n\n      <div className=\"mb-3 p-1\">\n        <label for=\"damage\">Damage:</label>\n        <input\n          id=\"damage\"\n          type=\"number\"\n          placeholder=\"How much damage does the weapon deal?\"\n          value={weapon.metadata.damage}\n          onChange={handleDamageChange}\n        />\n      </div>\n    </div>\n\n    <div className=\"mb-3 p-1\">\n      <h5>Weapon Properties:</h5>\n      <p>Select 'yes' for properties you want to assign to this weapon.</p>\n\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Ammunition:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"ammunition\"\n              id=\"yesAmmunition\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={ammunition === \"yes\"}\n              onChange={handleAmmunitionChange}\n            />\n            <label htmlFor=\"yesAmmunition\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"ammunition\"\n              id=\"noAmmunition\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={ammunition === \"no\"}\n              onChange={handleAmmunitionChange}\n            />\n            <label htmlFor=\"noAmmunition\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Finesse:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"finesse\"\n              id=\"yesFinesse\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={finesse === \"yes\"}\n              onChange={handleFinesseChange}\n            />\n            <label htmlFor=\"yesFinesse\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"finesse\"\n              id=\"noFinesse\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={finesse === \"no\"}\n              onChange={handleFinesseChange}\n            />\n            <label htmlFor=\"noFinesse\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Heavy:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"heavy\"\n              id=\"yesHeavy\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={heavy === \"yes\"}\n              onChange={handleHeavyChange}\n            />\n            <label htmlFor=\"yesHeavy\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"heavy\"\n              id=\"noHeavy\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={heavy === \"no\"}\n              onChange={handleHeavyChange}\n            />\n            <label htmlFor=\"noHeavy\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Loading:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"loading\"\n              id=\"yesLoading\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={loading === \"yes\"}\n              onChange={handleLoadingChange}\n            />\n            <label htmlFor=\"yesLoading\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"loading\"\n              id=\"noLoading\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={loading === \"no\"}\n              onChange={handleLoadingChange}\n            />\n            <label htmlFor=\"noLoading\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Reach:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"reach\"\n              id=\"yesReach\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={reach === \"yes\"}\n              onChange={handleReachChange}\n            />\n            <label htmlFor=\"yesReach\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"reach\"\n              id=\"noReach\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={reach === \"no\"}\n              onChange={handleReachChange}\n            />\n            <label htmlFor=\"noReach\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Special:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"special\"\n              id=\"yesSpecial\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={special === \"yes\"}\n              onChange={handleSpecialChange}\n            />\n            <label htmlFor=\"yesSpecial\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"special\"\n              id=\"noSpecial\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={special === \"no\"}\n              onChange={handleSpecialChange}\n            />\n            <label htmlFor=\"noSpecial\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Thrown:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"thrown\"\n              id=\"yesThrown\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={thrown === \"yes\"}\n              onChange={handleThrownChange}\n            />\n            <label htmlFor=\"yesThrown\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"thrown\"\n              id=\"noThrown\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={thrown === \"no\"}\n              onChange={handleThrownChange}\n            />\n            <label htmlFor=\"noThrown\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Two-Handed:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"twoHanded\"\n              id=\"yesTwoHanded\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={twoHanded === \"yes\"}\n              onChange={handleTwoHandedChange}\n            />\n            <label htmlFor=\"yesTwoHanded\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"twoHanded\"\n              id=\"noTwoHanded\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={twoHanded === \"no\"}\n              onChange={handleTwoHandedChange}\n            />\n            <label htmlFor=\"noTwoHanded\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Versatile:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"versatile\"\n              id=\"yesVersatile\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={versatile === \"yes\"}\n              onChange={handleVersatileChange}\n            />\n            <label htmlFor=\"yesVersatile\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"versatile\"\n              id=\"noVersatile\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={versatile === \"no\"}\n              onChange={handleVersatileChange}\n            />\n            <label htmlFor=\"noVersatile\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n      <div className=\"row align-items-center\">\n        <div className=\"col\">\n          <span>Silvered:</span>\n        </div>\n        <div className=\"col\">\n          <div className=\"btn-group\" role=\"group\">\n            <input\n              type=\"radio\"\n              name=\"silvered\"\n              id=\"yesSilvered\"\n              value=\"yes\"\n              className=\"btn-check\"\n              checked={silvered === \"yes\"}\n              onChange={handleSilveredChange}\n            />\n            <label htmlFor=\"yesSilvered\" className=\"btn btn-outline-primary\">\n              Yes\n            </label>\n\n            <input\n              type=\"radio\"\n              name=\"silvered\"\n              id=\"noSilvered\"\n              value=\"no\"\n              className=\"btn-check\"\n              checked={silvered === \"no\"}\n              onChange={handleSilveredChange}\n            />\n            <label htmlFor=\"noSilvered\" className=\"btn btn-outline-primary\">\n              No\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div className=\"m-3\">\n      <h5 className=\"mb-2\">Preview</h5>\n      <p>If you are happy with your creation, be sure to click 'Save'</p>\n      <Widget\n        src=\"dawnkelly.near/widget/weapon.inline\"\n        props={{\n          accountId,\n          weapon,\n        }}\n      />\n    </div>\n    <hr />\n    <div className=\"m-2\">\n      <div className=\"m-3\">\n        <button\n          className=\"btn btn-outline-success\"\n          disabled={!context.accountId}\n          onClick={handleSave}\n        >\n          Save\n        </button>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/dawnkelly.near/widget/weapon.create", "fact_widget_deployments_id": "470281c251ff698a142c53b96faf5641", "inserted_timestamp": "2024-03-30T17:35:18.092Z", "modified_timestamp": "2024-03-30T18:33:58.268Z", "__row_index": 1}