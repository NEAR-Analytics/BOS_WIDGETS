{"tx_hash": "2hnZGjmC8X3vEhLJqAwZ6j7aAKawe6mEDVH8MB92kSzj", "action_id_social": "98B1tSZqZF2YbfYmanML828mZifSbRYNhMjqr5hVi2zC-0-widget", "block_id": 101124481, "block_timestamp": "2023-09-14T18:13:47.370Z", "signer_id": "anhtn512.near", "widget_name": "anhtn512-calendar", "source_code": "State.init({\n  events: [],\n  greating: \"Hi\",\n});\n\nfunction get_events() {\n  const API_URL = \"https://nearweek.com/api/google-calendar/events\";\n  asyncFetch(API_URL, {\n    headers: {\n      Accept: \"*/*\",\n      Authorization:\n        \"Bearer 15699f0723aa9fe9f655b1a94e450552476c08807f67b525b5a3c8011eecc8aee6d45923443620f17815b897858be058cd7bd89ddf23a28aabaecb178e7ebc55d380293beeb51a8ce87b40e1518ce4708e4d51a06b115f27fa64ab5cbee5a3511cec785d7ae6a155ecd05ac8196aadae3e9b8e9401b8df8d8b69904f7364f925\",\n    },\n  }).then((res) => {\n    // console.log(res.body);\n    const events = res.body;\n    // console.log(events);\n    State.update({\n      events: events,\n    });\n    console.log(\"done\");\n  });\n}\n\nget_events();\n\nconst srcData = `\n<!DOCTYPE html>\n<html>\n\n<head>\n\n    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>\n    <style>\n        html,\n        body {\n            height: 100%;\n            font-family: Inter, Space Grotesk, Open Sans, sans-serif;\n        }\n\n        #calendar {\n            height: 100%;\n        }\n    </style>\n    <link rel=\"stylesheet\" href=\"https://anhtn512.github.io/widget_nw/styles/83b0e3d8f3a03150.css\">\n    <link rel=\"stylesheet\" href=\"https://anhtn512.github.io/widget_nw/styles/f98edba19df5696e.css\">\n    <script>\n\n        document.addEventListener('DOMContentLoaded', function () {\n            var calendarEl = document.getElementById('calendar');\n\n            var calendar = new FullCalendar.Calendar(calendarEl, {\n                timeZone: 'UTC',\n                initialView: 'dayGridMonth',\n                height: \"auto\",\n                displayEventTime: true,\n                eventDisplay: \"auto\",\n                events: ${JSON.stringify(state.events)},\n                customButtons: {\n                    header: {\n                        ariaLabel: 'Do the custom action',\n                        text: \"COMMUNITY CALENDAR\",\n                    },\n                },\n                headerToolbar: {\n                    left: \"header\",\n                    center: \"\",\n                    right: \"prev,title,next\",\n                },\n                eventTimeFormat: { \n                    hour: 'numeric',\n                    minute: '2-digit',\n                    meridiem: 'short'\n                },\n                eventMouseEnter: function (info) {\n                    info.el.style = \"background-color: #099ce5; display: inline-flex; z-index: 1000; font-weight: bold; color: white; padding-left: 10px; padding-right: 10px\";\n                },\n                eventMouseLeave: function (info) {\n                    info.el.style = \"\";\n                },\n                eventClick: function (info) {\n                    info.jsEvent.preventDefault();\n                    console.log(info.event.extendedProps.location);\n                    if (info.event.extendedProps.location) {\n                        window.open(info.event.extendedProps.location);\n                    }\n                }\n            });\n\n            calendar.render();\n        })\n    </script>\n\n</head>\n\n<body>\n    <div class=\"bg-white\">\n        <div class=\"fc-view-front\">\n            <div id='calendar'></div>\n        </div>\n    </div>\n\n</body>\n\n</html>\n`;\n\nreturn (\n  <>\n    <iframe\n      srcDoc={srcData}\n      onMessage={(data) => {\n        console.log(data);\n      }}\n      style={{\n        height: \"100vh\",\n        width: \"100%\",\n      }}\n      sandbox=\"allow-popups allow-popups-to-escape-sandbox\"\n    />\n  </>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/anhtn512.near/widget/anhtn512-calendar", "fact_widget_deployments_id": "24cc76f132aed393e5a8043cef0b7596", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}