{"tx_hash": "E3bwS8EdPZ3bCWiXBmq5jCF6wWTkyF5K3fBT6HVihTaS", "action_id_social": "8odGAr3ctqnhgTDoorMkDbrTJvGcSQVQsaZH2vkmJ5Uy-0-widget", "block_id": 105217045, "block_timestamp": "2023-11-08T11:11:06.909Z", "signer_id": "rngtickets.near", "widget_name": "kp-ticket-handler-ndc", "source_code": "const kpContract = \"v2.keypom.near\";\nlet have_pk = false;\nlet curUse;\nif (\n  props.key != undefined &&\n  props.key != \"\" &&\n  props.pk != undefined &&\n  props.pk != \"\"\n) {\n  have_pk = true;\n  curUse = Near.view(kpContract, \"get_key_information\", {\n    key: props.key,\n  }).cur_key_use;\n  if (curUse == undefined) {\n    curUse = 0;\n  }\n}\n\nState.init({\n  keyUse: curUse,\n  contract: kpContract,\n  havePk: have_pk,\n});\n\nState.update({\n  keyUse: curUse,\n});\n\n// rendering stuff\nif (state.keyUse == 1) {\n  // QR code\n  return (\n    <>\n      <Widget\n        src=\"rngtickets.near/widget/kp-ticket2\"\n        props={{ key: props.key, pk: props.pk }}\n      />\n      <div className=\"content\">\n        <h1>NEAR WORLDWIDE</h1>\n        <p>\n          November 9th, 2023, from 7:30 - 10 PM\n          <br />\n          Community HQ\n          <br />\n          Rua Pereira Henriques\n          <br />\n          31950-242\n          <br />\n          Lisboa, Portugal\n        </p>\n        <p>\n          NEAR WORLDWIDE is an electrifying event bridging the gap between the\n          many regional communities that represent the NEAR ecosystem worldwide.\n          This event is a transformative experience focused on global\n          connectivity, innovation, and community growth. Join us in celebrating\n          the global community with this immersive experience and be ready to be\n          amazed, inspired, and connected like never before.\n        </p>\n      </div>\n    </>\n  );\n} else if (state.keyUse == 2) {\n  return (\n    <div className=\"content\">\n      <h1>You're all set! Enjoy the event</h1>\n      <a\n        href={`https://app.mynearwallet.com/linkdrop/${state.contract}/${props.pk}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <button className=\"onboard_button\">Claim your POAP</button>\n      </a>\n    </div>\n  );\n} else if (state.keyUse == 0 && !state.havePk) {\n  // Event Landing Page\n  return (\n    <div className=\"content\">\n      <h1>NEAR WORLDWIDE</h1>\n      <p>\n        November 9th, 2023, from 7:30 - 10 PM\n        <br />\n        Community HQ\n        <br />\n        Rua Pereira Henriques\n        <br />\n        31950-242\n        <br />\n        Lisboa, Portugal\n      </p>\n      <p>\n        NEAR WORLDWIDE is an electrifying event bridging the gap between the\n        many regional communities that represent the NEAR ecosystem worldwide.\n        This event is a transformative experience focused on global\n        connectivity, innovation, and community growth. Join us in celebrating\n        the global community with this immersive experience and be ready to be\n        amazed, inspired, and connected like never before.\n      </p>\n    </div>\n  );\n} else if (state.keyUse == 0) {\n  // Key has been depleted, show resources for NEAR\n  return (\n    <div className=\"content\">\n      <h1>Now that you have a wallet...</h1>\n      <a\n        href={\"https://near.org/learn\"}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <button className=\"onboard_button\">\n          Continue your journey into NEAR\n        </button>\n      </a>\n    </div>\n  );\n} else {\n  return (\n    <div>\n      <div style={{ textAlign: \"center\" }}>\n        Please visit drops page or enter key info in URL props\n      </div>{\" \"}\n    </div>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rngtickets.near/widget/kp-ticket-handler-ndc", "fact_widget_deployments_id": "d6aa649b2559305aaa65b32898257d72", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}