{"tx_hash": "HGhZLCxtiegipC2Jt3xMJ2wFZcfj2xgsFCYySV9u4Vtr", "action_id_social": "CirX4TSWdwzMu5RrqpbyKSJL8nxV7dnv9CPKj9Lo3kfD-0-widget", "block_id": 105217255, "block_timestamp": "2023-11-08T11:15:19.408Z", "signer_id": "rngtickets.near", "widget_name": "kp-ticket-handler", "source_code": "const kpContract = \"v2.keypom.near\";\nlet have_pk = false;\nlet curUse;\nif (\n  props.key != undefined &&\n  props.key != \"\" &&\n  props.pk != undefined &&\n  props.pk != \"\"\n) {\n  have_pk = true;\n  curUse = Near.view(kpContract, \"get_key_information\", {\n    key: props.key,\n  }).cur_key_use;\n  if (curUse == undefined) {\n    curUse = 0;\n  }\n}\n\nState.init({\n  keyUse: curUse,\n  contract: kpContract,\n  havePk: have_pk,\n});\n\nState.update({\n  keyUse: curUse,\n});\n\n// rendering stuff\nif (state.keyUse == 1) {\n  // QR code\n  return (\n    <>\n      <Widget\n        src=\"rngtickets.near/widget/kp-ticket2\"\n        props={{ key: props.key, pk: props.pk }}\n      />\n      <div className=\"content\">\n        <h1>Sunset Soiree</h1>\n        <p>November 11th, 2023, 5PM - 9PM</p>\n        <a href=\"https://maps.app.goo.gl/wc82qiLkiiSAULQJ6\" target=\"_blank\">\n          TOPO MARTIM MONIZ\n        </a>\n        , Lisbon\n        <p>\n          Elevate your weekend at the stunning Sunset Soiree. Nestled high above\n          the city, the event offers breathtaking panoramic views of Lisbon,\n          setting the stage for relaxed networking and unwinding. Guests can\n          enjoy vibrant conversations, eclectic tunes, and the opportunity to\n          connect with like-minded individuals, all while being inspired by the\n          city's energy and Lisbon's captivating skyline charm.\n        </p>\n      </div>\n    </>\n  );\n} else if (state.keyUse == 2) {\n  return (\n    <div className=\"content\">\n      <h1>You're all set! Enjoy the event</h1>\n      <a\n        href={`https://app.mynearwallet.com/linkdrop/${state.contract}/${props.pk}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <button className=\"onboard_button\">Claim your POAP</button>\n      </a>\n    </div>\n  );\n} else if (state.keyUse == 0 && !state.havePk) {\n  // Event Landing Page\n  return (\n    <div className=\"content\">\n      <h1>Sunset Soiree</h1>\n      <p>November 11th, 2023, 5PM - 9PM</p>\n      <a href=\"https://maps.app.goo.gl/wc82qiLkiiSAULQJ6\" target=\"_blank\">\n        TOPO MARTIM MONIZ\n      </a>\n      , Lisbon\n      <p>\n        Elevate your weekend at the stunning Sunset Soiree. Nestled high above\n        the city, the event offers breathtaking panoramic views of Lisbon,\n        setting the stage for relaxed networking and unwinding. Guests can enjoy\n        vibrant conversations, eclectic tunes, and the opportunity to connect\n        with like-minded individuals, all while being inspired by the city's\n        energy and Lisbon's captivating skyline charm.\n      </p>\n    </div>\n  );\n} else if (state.keyUse == 0) {\n  // Key has been depleted, show resources for NEAR\n  return (\n    <div className=\"content\">\n      <h1>Now that you have a wallet...</h1>\n      <a\n        href={\"https://near.org/learn\"}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <button className=\"onboard_button\">\n          Continue your journey into NEAR\n        </button>\n      </a>\n    </div>\n  );\n} else {\n  return (\n    <div>\n      <div style={{ textAlign: \"center\" }}>\n        Please visit drops page or enter key info in URL props\n      </div>{\" \"}\n    </div>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/rngtickets.near/widget/kp-ticket-handler", "fact_widget_deployments_id": "6bb9cb4f8721e215a226abbc218bb8d7", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}