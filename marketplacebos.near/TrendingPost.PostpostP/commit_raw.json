{"tx_hash": "HLVvRiJT28YLuLwzwtkR7BC2gXfsApPELajPvurY7Rsh", "action_id_social": "2STSi814nKTQxw8fiwSKoA1eha68qnbCBy4THkT24Qyq-0-widget", "block_id": 106705947, "block_timestamp": "2023-11-28T04:09:28.148Z", "signer_id": "marketplacebos.near", "widget_name": "TrendingPost.PostpostP", "source_code": "State.init({\n  selectedTab: Storage.privateGet(\"selectedTab\") || \"all\",\n  get_tagsList: [],\n  get_tags,\n  tag,\n});\n\nconst contract = \"jkjkjkjk.testnet\";\n\nconst fetchData = () => {\n  const result = Near.view(contract, \"get_tags\", {});\n  State.update({ get_feedbacksList: result });\n};\n\nfetchData();\n\nconst addTag = () => {\n  const tag = state.tag;\n\n  const message = {\n    tag: tag,\n  };\n\n  Near.call(\"jkjkjkjk.testnet\", \"add_tag\", message);\n};\n\nconst onInputStar = ({ target }) => {\n  State.update({ tag: target.value });\n};\n\nconst [newHashtag, setNewHashtag] = useState(\"\");\n\nconst addNewHashtag = () => {\n  console.log(\"Add button clicked\"); // Check this log\n  if (newHashtag.trim() !== \"\") {\n    const updatedHashtags = [...hashtags, newHashtag.trim()];\n    State.update({ hashtags: updatedHashtags });\n    setNewHashtag(\"\");\n  }\n};\n\nconst hashtags = [\"nearsocial\", \"dev\", \"near\", \"nearafrica\", \"ProofOfVibes\"];\n\nconst previousSelectedTab = Storage.privateGet(\"selectedTab\");\n\nif (previousSelectedTab && previousSelectedTab !== state.selectedTab) {\n  State.update({\n    selectedTab: previousSelectedTab,\n  });\n}\n\nlet accounts = undefined;\n\nif (state.selectedTab === \"following\" && context.accountId) {\n  const graph = Social.keys(`${context.accountId}/graph/follow/*`, \"final\");\n  if (graph !== null) {\n    accounts = Object.keys(graph[context.accountId].graph.follow || {});\n    accounts.push(context.accountId);\n  } else {\n    accounts = [];\n  }\n} else {\n  accounts = undefined;\n}\n\nfunction selectTab(selectedTab) {\n  Storage.privateSet(\"selectedTab\", selectedTab);\n  State.update({ selectedTab });\n}\n\nconst H2 = styled.h2`\n  font-size: 19px;\n  line-height: 22px;\n  color: #11181c;\n  margin: 0 0 24px;\n  padding: 0 24px;\n\n  @media (max-width: 1200px) {\n    display: none;\n  }\n`;\n\nconst Content = styled.div`\n  @media (max-width: 1200px) {\n    > div:first-child {\n      border-top: none;\n    }\n  }\n`;\n\nconst ComposeWrapper = styled.div`\n  border-top: 1px solid #eceef0;\n`;\n\nconst FilterWrapper = styled.div`\n  border-top: 1px solid #eceef0;\n  padding: 24px 24px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  @media (max-width: 1200px) {\n    padding: 12px;\n  }\n`;\n\nconst PillSelect = styled.div`\n  display: inline-flex;\n  align-items: center;\n\n  @media (max-width: 600px) {\n    width: 100%;\n\n    button {\n      flex: 1;\n    }\n  }\n`;\n\nconst PillSelectButton = styled.button`\n  display: block;\n  position: relative;\n  border: 1px solid #e6e8eb;\n  border-right: none;\n  padding: 3px 24px;\n  border-radius: 0;\n  font-size: 12px;\n  line-height: 18px;\n  color: ${(p) => (p.selected ? \"#fff\" : \"#687076\")};\n  background: ${(p) => (p.selected ? \"#006ADC !important\" : \"#FBFCFD\")};\n  font-weight: 600;\n  transition: all 200ms;\n\n  &:hover {\n    background: #ecedee;\n    text-decoration: none;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #006adc !important;\n    box-shadow: 0 0 0 1px #006adc;\n    z-index: 5;\n  }\n\n  &:first-child {\n    border-radius: 6px 0 0 6px;\n  }\n  &:last-child {\n    border-radius: 0 6px 6px 0;\n    border-right: 1px solid #e6e8eb;\n  }\n`;\n\nconst FeedWrapper = styled.div`\n  .post {\n    padding-left: 24px;\n    padding-right: 24px;\n\n    @media (max-width: 1200px) {\n      padding-left: 12px;\n      padding-right: 12px;\n    }\n  }\n`;\n\nreturn (\n  <>\n    <div class=\"alert alert-primary\" role=\"alert\">\n      Select searching post...\n    </div>\n\n    <Content>\n      {context.accountId && (\n        <>\n          <ComposeWrapper>\n            <Widget src=\"near/widget/Posts.Compose\" />\n          </ComposeWrapper>\n\n          <FilterWrapper>\n            <PillSelect>\n              <PillSelectButton\n                type=\"button\"\n                onClick={() => selectTab(\"all\")}\n                selected={state.selectedTab === \"all\"}\n              >\n                All\n              </PillSelectButton>\n\n              <PillSelectButton\n                type=\"button\"\n                onClick={() => selectTab(\"following\")}\n                selected={state.selectedTab === \"following\"}\n              >\n                Following\n              </PillSelectButton>\n            </PillSelect>\n            <div className=\"d-inline-flex gap-2\">\n              <Typeahead\n                options={[...hashtags, newHashtag]} // Include the new hashtag in the options\n                multiple\n                onChange={(value) => {\n                  State.update({ hashtags: value });\n                }}\n                placeholder=\"Hashtag filter\"\n              />\n              <input\n                type=\"text\"\n                value={newHashtag}\n                onChange={(e) => setNewHashtag(e.target.value)}\n                placeholder=\"Add new hashtag\"\n              />\n              <button onClick={addNewHashtag}>Add</button>\n            </div>\n          </FilterWrapper>\n        </>\n      )}\n\n      <FeedWrapper>\n        <Widget\n          src=\"marketplacebos.near/widget/TrendingPost.GetpostP\"\n          props={{ accounts, hashtags: state.hashtags }}\n        />\n      </FeedWrapper>\n    </Content>\n  </>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/marketplacebos.near/widget/TrendingPost.PostpostP", "fact_widget_deployments_id": "c926d08a8a955b9fd5bbdf2f0b2f17de", "inserted_timestamp": "2023-11-28T06:21:17.716Z", "modified_timestamp": "2023-11-28T06:21:17.716Z", "__row_index": 0}