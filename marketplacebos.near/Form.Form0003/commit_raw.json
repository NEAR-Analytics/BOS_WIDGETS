{"tx_hash": "GagBCAtP2TpdLWq8uBkFr8t4vY99379tA9feGKeURUax", "action_id_social": "2S8JHP3PFG2f7y1WxszzUxn8AFenBx2hkEJGt5TdjmG9-0-widget", "block_id": 106063039, "block_timestamp": "2023-11-19T15:40:05.138Z", "signer_id": "marketplacebos.near", "widget_name": "Form.Form0003", "source_code": "const fileAccept = props.fileAccept || \"*\";\nconst fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\nprops.fileType ||\n  initState({\n    file: null,\n  });\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nconst filesOnChange = (file) => {\n  if (file?.length > 0) {\n    State.update({\n      file: {\n        uploading: true,\n        cid: null,\n      },\n    });\n    const body = file[0];\n    asyncFetch(\"https://ipfs.near.social/add\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n      },\n      body,\n    }).then((res) => {\n      const cid = res.body.cid;\n      console.log(\"CID\", cid);\n      State.update({\n        file: {\n          cid,\n        },\n      });\n    });\n  } else {\n    State.update({\n      file: null,\n    });\n  }\n};\n\nconst FormContainer = styled.div`\n  width:100%;\n  background-color: #fff;\n  box-shadow: 0 10px 60px rgb(218, 229, 255);\n  border: 1px solid rgb(159, 159, 160);\n  border-radius: 20px;\n  padding: 2rem 0.7rem 0.7rem 0.7rem;\n  text-align: center;\n  font-size: 1.125rem;\n  max-width: 320px;\n`;\n\nconst FormTitle = styled.span`\n  color: #000000;\n  font-size: 1.8rem;\n  font-weight: 500;\n`;\n\nconst FormParagraph = styled.p`\n  margin-top: 10px;\n  font-size: 0.9375rem;\n  color: rgb(105, 105, 105);\n`;\n\nconst DropContainer = styled.label`\n  background-color: #fff;\n  position: relative;\n  display: flex;\n  gap: 10px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 10px;\n  margin-top: 2.1875rem;\n  border-radius: 10px;\n  border: 2px dashed rgb(171, 202, 255);\n  color: #444;\n  cursor: pointer;\n  transition: background 0.2s ease-in-out, border 0.2s ease-in-out;\n\n  &:hover {\n    background: rgba(0, 140, 255, 0.164);\n    border-color: rgba(17, 17, 17, 0.616);\n  }\n`;\n\nconst DropTitle = styled.span`\n  color: #444;\n  font-size: 20px;\n  font-weight: bold;\n  text-align: center;\n  transition: color 0.2s ease-in-out;\n`;\n\nconst FileInput = styled.input`\n  width: 100%;\n  max-width: 100%;\n  color: #444;\n  padding: 2px;\n  background: #fff;\n  border-radius: 10px;\n  border: 1px solid rgba(8, 8, 8, 0.288);\n`;\n\nconst props = {\n  copyBtn:\n    \"const FormContainer = styled.div`\\n\" +\n    `  width:100%;\n  background-color: #fff;\n  box-shadow: 0 10px 60px rgb(218, 229, 255);\n  border: 1px solid rgb(159, 159, 160);\n  border-radius: 20px;\n  padding: 2rem 0.7rem 0.7rem 0.7rem;\n  text-align: center;\n  font-size: 1.125rem;\n  max-width: 320px;\n` +\n    \"\\n`;\" +\n    \"\\nconst FormTitle = styled.span`\\n\" +\n    `  color: #000000;\n  font-size: 1.8rem;\n  font-weight: 500;\n` +\n    \"\\n`;\" +\n    \"\\nconst FormParagraph = styled.p`\\n\" +\n    `  margin-top: 10px;\n  font-size: 0.9375rem;\n  color: rgb(105, 105, 105);\n` +\n    \"\\n`;\" +\n    \"\\nconst DropContainer = styled.label`\\n\" +\n    `  background-color: #fff;\n  position: relative;\n  display: flex;\n  gap: 10px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 10px;\n  margin-top: 2.1875rem;\n  border-radius: 10px;\n  border: 2px dashed rgb(171, 202, 255);\n  color: #444;\n  cursor: pointer;\n  transition: background 0.2s ease-in-out, border 0.2s ease-in-out;\n\n  &:hover {\n    background: rgba(0, 140, 255, 0.164);\n    border-color: rgba(17, 17, 17, 0.616);\n  }\n` +\n    \"\\n`;\" +\n    \"\\nconst DropTitle = styled.span`\\n\" +\n    `  color: #444;\n  font-size: 20px;\n  font-weight: bold;\n  text-align: center;\n  transition: color 0.2s ease-in-out;\n` +\n    \"\\n`;\" +\n    \"\\nconst FileInput = styled.input`\\n\" +\n    `  width: 100%;\n  max-width: 100%;\n  color: #444;\n  padding: 2px;\n  background: #fff;\n  border-radius: 10px;\n  border: 1px solid rgba(8, 8, 8, 0.288);\n  ` +\n    \"\\n`;\" +\n    `\n    const fileAccept = props.fileAccept || \"*\";\nconst fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\nprops.fileType ||\n  initState({\n    file: null,\n  });\n  \\n\n    ` +\n    \"const ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\\n\" +\n    `\n    const filesOnChange = (file) => {\n  if (file?.length > 0) {\n    State.update({\n      file: {\n        uploading: true,\n        cid: null,\n      },\n    });\n    const body = file[0];\n    asyncFetch(\"https://ipfs.near.social/add\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n      },\n      body,\n    }).then((res) => {\n      const cid = res.body.cid;\n      console.log(\"CID\", cid);\n      State.update({\n        file: {\n          cid,\n        },\n      });\n    });\n  } else {\n    State.update({\n      file: null,\n    });\n  }\n};\n\\n\n    ` +\n    `\\n return(\n    <FormContainer>\n      <FormTitle>Upload your file</FormTitle>\n      <FormParagraph>File should be an image</FormParagraph>\n      <DropContainer htmlFor=\"file-input\">\n        <DropTitle>Drop files here</DropTitle>\n        or\n        <div>\n          {state.cid ? (\n            <a href={ipfsUrl(state.cid)} download>\n              {state.filename}\n            </a>\n          ) : (\n            <></>\n          )}\n          <Files\n            multiple={false}\n            accepts={[\"image/*\", \"video/*\", \".pdf\"]}\n            minFileSize={1}\n            clickable\n            className=\"btn btn-outline-primary\"\n            onChange={(files) => {\n              if (!files || !files.length) return;\n\n              const [body] = files;\n\n              State.update({ uploading: true, cid: null });\n              asyncFetch(\"https://ipfs.near.social/add\", {\n                method: \"POST\",\n                headers: { Accept: \"application/json\" },\n                body,\n              }).then(({ body: { cid } }) => {\n                State.update({ cid, filename: body.name, uploading: false });\n                // props.update(cid);\n              });\n            }}\n          >\n            {state.uploading ? \"Uploading\" : state.cid ? \"Replace\" : buttonText}\n          </Files>\n        </div>\n      </DropContainer>\n    </FormContainer>\n  )`,\n  component: (\n    <FormContainer>\n      <FormTitle>Upload your file</FormTitle>\n      <FormParagraph>File should be an image</FormParagraph>\n      <DropContainer htmlFor=\"file-input\">\n        <DropTitle>Drop files here</DropTitle>\n        or\n        <div>\n          {state.cid ? (\n            <a href={ipfsUrl(state.cid)} download>\n              {state.filename}\n            </a>\n          ) : (\n            <></>\n          )}\n          <Files\n            multiple={false}\n            accepts={[\"image/*\", \"video/*\", \".pdf\"]}\n            minFileSize={1}\n            clickable\n            className=\"btn btn-outline-primary\"\n            onChange={(files) => {\n              if (!files || !files.length) return;\n\n              const [body] = files;\n\n              State.update({ uploading: true, cid: null });\n              asyncFetch(\"https://ipfs.near.social/add\", {\n                method: \"POST\",\n                headers: { Accept: \"application/json\" },\n                body,\n              }).then(({ body: { cid } }) => {\n                State.update({ cid, filename: body.name, uploading: false });\n                // props.update(cid);\n              });\n            }}\n          >\n            {state.uploading ? \"Uploading\" : state.cid ? \"Replace\" : buttonText}\n          </Files>\n        </div>\n      </DropContainer>\n    </FormContainer>\n  ),\n  detailLink: \"https://near.org/marketplacebos.near/widget/Detail.F0003\",\n};\n\nreturn (\n  <>\n    <Widget src=\"marketplacebos.near/widget/CardMain.CardForm\" props={props} />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/marketplacebos.near/widget/Form.Form0003", "fact_widget_deployments_id": "a44371409d9a8af1aaa316d218a8726b", "inserted_timestamp": "2023-11-19T17:35:37.622Z", "modified_timestamp": "2023-11-19T17:35:37.622Z", "__row_index": 1}