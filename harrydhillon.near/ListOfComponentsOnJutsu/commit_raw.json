{"tx_hash": "DneKveBW5ySUxHvwR4odDJhRnbDZTNC3DkL9K47iz92Z", "action_id_social": "9rvaGJ4YZTNjhvQJhhrKR5GTZEV6jDS5DHGFNqefaPh-0-widget", "block_id": 101254563, "block_timestamp": "2023-09-16T13:02:14.097Z", "signer_id": "harrydhillon.near", "widget_name": "ListOfComponentsOnJutsu", "source_code": "State.init({ widgetData: [] });\n\nasync function fetchGraphQL(operationsDoc, operationName, variables) {\n  asyncFetch(\"https://near-queryapi.api.pagoda.co/v1/graphql\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      query: operationsDoc,\n      variables: variables,\n      operationName: operationName,\n    }),\n    headers: {\n      \"x-hasura-role\": \"harrydhillon_near\",\n      \"content-type\": \"application/json\",\n    },\n  }).then(({ body: { data } }) => {\n    State.update({ widgetData: Object.values(data) });\n  });\n}\n\nconst operationsDoc = `\nquery MyQuery {\n  harrydhillon_near_jutsu_widget_activity_search_widget_activity(\n    where: {widget_platform: {_iregex: \"jutsu\"}}\n  ) {\n    widget_name\n    widget_platform\n    account_id\n  }\n}\n`;\n\nfunction fetchMyQuery() {\n  return fetchGraphQL(operationsDoc, \"MyQuery\", {});\n}\n\nasync function startFetchMyQuery() {\n  const { errors, data } = fetchMyQuery();\n\n  if (errors) {\n    // handle those errors like a pro\n    console.error(errors);\n  }\n\n  // do something great with this precious data\n  console.log(data, \"mydatssa\");\n}\nstartFetchMyQuery();\nconsole.log(state.widgetData[0][0]);\n\nfunction addEllipsis(str) {\n  if (str.length > 200) {\n    return str.substring(0, 200) + \"...\";\n  } else {\n    return str;\n  }\n}\nreturn (\n  <div style={{ padding: 10 }}>\n    <h3>Components on JUTSU</h3>\n    <div\n      style={{\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        justifyContent: \"space-around\",\n        paddingBottom: 60,\n      }}\n    >\n      {state.widgetData[0].map((item) => {\n        const profile = Social.getr(`${item.account_id}/profile`);\n        const image = profile?.image;\n\n        const url = image.ipfs_cid\n          ? `https://ipfs.near.social/ipfs/${image?.ipfs_cid}`\n          : \"https://thewiki.io/static/media/sasha_anon.6ba19561.png\";\n        return (\n          <a\n            style={{\n              padding: 5,\n              borderRadius: 10,\n              border: \"1px solid lightgray\",\n              width: \"48%\",\n              margin: 3,\n              borderRadius: 5,\n            }}\n            target=\"_blank\"\n            href={`https://jutsu.ai/${item.account_id}/widget/${item.widget_name}`}\n          >\n            <p\n              style={{\n                fontSize: 12,\n                paddingTop: 10,\n                marginBottom: 0,\n                color: \"black\",\n              }}\n            >\n              <span style={{ fontWeight: \"bold\" }}>Account Id</span> :{\" \"}\n              {item.account_id}\n            </p>\n            <p style={{ fontSize: 12 }}>\n              <span\n                style={{ fontWeight: \"bold\", marginBottom: 0 }}\n              >\n                Widget Name\n              </span>{\" \"}\n              : {item.widget_name}\n            </p>\n          </a>\n        );\n      })}\n    </div>\n  </div>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/ListOfComponentsOnJutsu", "fact_widget_deployments_id": "fbd8b4b8dd1d73bff5dfbbeaa30e3ed8", "inserted_timestamp": "2023-09-16T14:48:53.118Z", "modified_timestamp": "2023-09-16T14:48:53.118Z", "__row_index": 0}