{"tx_hash": "4UuQeTfRYCgLWcHR2eGxyQLZ58g7ZmXAAqfv2pWvPZGK", "action_id_social": "57TfMZdJicMaLoX4eoQcoJnq6rcbm2yvh8BxxSF4LgZn-0-widget", "block_id": 100506364, "block_timestamp": "2023-09-06T08:25:46.320Z", "signer_id": "harrydhillon.near", "widget_name": "Keypom.EventInfo.Form", "source_code": "const FormBackground = styled.div`\nbackground-color:white;\npadding:10px;\npadding-top:30px;\nmargin-top:40px;\nmargin-bottom:60px;\nborder-radius:10px;\n  border: 2px solid #B6E8F7;\n`;\nState.init({\n  eventName: \"\",\n  location: \"\",\n  description: \"\",\n  date: null,\n  isSingleDateEvent: false,\n  isReadDataFromLocal: false,\n});\n\nconst Grid = styled.div`\n    display: grid;\n    grid-template-columns: 1fr;  // By default, 1 item per row\n    gap: 16px;  // Gap between rows and columns\n\n    @media (min-width: 1000px) {\n        grid-template-columns: 1fr 1fr;  // 2 items per row if width is greater than 1000px\n    }\n`;\nconst Label = styled.p`\nfont-size: 16px;\n translate: 3px 8px;\nfont-style: normal;\nfont-weight: 500;\n`;\n\nconst CheckBoxLabelStyling = styled.div`\n.label{\ncolor:gray !important;\nfont-size:13px;\n}\n`;\n\nconst AllSteps = [\n  {\n    label: \"Event Info\",\n    active: true,\n  },\n  {\n    label: \"Collect Info\",\n  },\n  {\n    label: \"Tickets\",\n  },\n  {\n    label: \"Review\",\n  },\n];\n\nconst setInput = (key, value) => {\n  const getValue = Storage.get(\"formValues\");\n  if (getValue === undefined) {\n    const values = { [key]: value };\n    Storage.set(`formValues`, JSON.stringify(values));\n  } else {\n    const parsedJson = JSON.parse(getValue);\n    const newValuesToSet = { ...parsedJson, [key]: value };\n    Storage.set(`formValues`, JSON.stringify(newValuesToSet));\n  }\n  State.update({ [key]: value });\n};\n\nif (!state.isReadDataFromLocal) {\n  const getValue = Storage.get(\"formValues\");\n  if (getValue) {\n    State.update({ ...JSON.parse(getValue), isReadDataFromLocal: true });\n  } else {\n    State.update({ isReadDataFromLocal: true });\n  }\n}\n\nconst showFormError = (key, label) =>\n  state.error[key] ? (\n    <p style={{ fontSize: 14, color: \"red\", marginTop: -3 }}>\n      {label} is required\n    </p>\n  ) : (\n    <></>\n  );\n\nconst executeValidation = () => {\n  const allErrors = {};\n  if (!state.eventName) {\n    allErrors.eventName = true;\n  }\n  if (!state.description) {\n    allErrors.description = true;\n  }\n  if (!state.location) {\n    allErrors.location = true;\n  }\n  if (state.isSingleDateEvent) {\n    if (!state.from) {\n      allErrors.from = true;\n    }\n  } else {\n    if (!state.from) {\n      allErrors.from = true;\n    }\n    if (!state.to) {\n      allErrors.to = true;\n    }\n  }\n  if (!state.image) {\n    allErrors.image = true;\n  }\n  State.update({ error: allErrors });\n  return allErrors;\n};\n\nif (props.validationMode) {\n    props.nextStep(Object.keys(executeValidation()).length === 0);\n}\n\nconst formContent = () => {\n  return (\n    <>\n      <Grid>\n        <div style={{ padding: 10 }}>\n          <Widget\n            src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n            props={{\n              label: \"Event name*\",\n              inputProps: {\n                placeholder: \"Add the name of your event\",\n                value: state.eventName,\n                onChange: (e) => {\n                  setInput(\"eventName\", e.target.value);\n                },\n              },\n            }}\n          />\n          {showFormError(\"eventName\", \"Event Name\")}\n          <Widget\n            src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n            props={{\n              label: \"Event description\",\n              inputProps: {\n                placeholder: \"Add a description to your event\",\n                value: state.description,\n                onChange: (e) => setInput(\"description\", e.target.value),\n              },\n            }}\n          />\n          {showFormError(\"description\", \"Event Description\")}\n          <Widget\n            src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n            props={{\n              label: \"Event location\",\n              inputProps: {\n                placeholder: \"Add a location or address to your event\",\n                value: state.location,\n                onChange: (e) => setInput(\"location\", e.target.value),\n              },\n            }}\n          />\n          {showFormError(\"location\", \"Event location\")}\n          <Label style={{ marginLeft: -5, fontWeight: \"bold\" }}>\n            Event dates *\n          </Label>\n          <p style={{ fontSize: 12, color: \"gray\", marginTop: -5 }}>\n            {state?.isSingleDateEvent\n              ? \" Please mention the date of your event\"\n              : \" Please mention the date range of your event\"}\n          </p>\n          {state?.isSingleDateEvent ? (\n            <>\n              <Widget\n                src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n                props={{\n                  label: \"Event date\",\n                  inputProps: {\n                    value: state.from,\n                    type: \"date\",\n                    onChange: (e) => setInput(\"from\", e.target.value),\n                  },\n                }}\n              />\n              {showFormError(\"date\", \"Event date\")}\n            </>\n          ) : (\n            <>\n              <div style={{ marginTop: -10 }}>\n                <Widget\n                  src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n                  props={{\n                    label: \"From\",\n                    labelProps: {\n                      style: {\n                        fontWeight: \"500\",\n                      },\n                    },\n                    inputProps: {\n                      placeholder: \"Select a date range\",\n                      value: state.from,\n                      type: \"date\",\n                      onChange: (e) => setInput(\"from\", e.target.value),\n                    },\n                  }}\n                />\n                {showFormError(\"from\", \"Event Date From\")}\n              </div>\n              <Widget\n                src=\"harrydhillon.near/widget/Keypom.Components.Input\"\n                props={{\n                  label: \"To\",\n                  labelProps: {\n                    style: {\n                      fontWeight: \"500\",\n                    },\n                  },\n                  inputProps: {\n                    placeholder: \"Select a date range\",\n                    value: state.to,\n                    type: \"date\",\n                    onChange: (e) => setInput(\"to\", e.target.value),\n                  },\n                }}\n              />\n              {showFormError(\"to\", \"Event Date To\")}\n            </>\n          )}\n          <div style={{ marginLeft: -5 }}>\n            <CheckBoxLabelStyling>\n              <Widget\n                src=\"nui.sking.near/widget/Input.Checkbox\"\n                props={{\n                  label: \"My event is a single day event\",\n                  checked: state.isSingleDateEvent,\n                  onChange: () =>\n                    State.update({\n                      isSingleDateEvent: !state.isSingleDateEvent,\n                    }),\n                }}\n              />\n            </CheckBoxLabelStyling>\n          </div>\n          <Label style={{ fontWeight: \"bold\", marginTop: 10 }}>\n            Event artwork\n          </Label>\n          <p style={{ fontSize: 12, color: \"gray\" }}>\n            Customize the artwork that appears in the header of the event page.\n          </p>\n          <Widget\n            props={{\n              setImageState: (props) => {\n                setInput(\"image\", props);\n              },\n              imageState: state.image,\n            }}\n            src=\"harrydhillon.near/widget/Keypom.Components.Imageupload\"\n          />\n          {showFormError(\"image\", \"Event Artwork\")}\n        </div>\n        <div style={{ padding: 10 }}>\n          <Widget\n            props={{ ...state, date: state.from }}\n            src=\"harrydhillon.near/widget/Keypom.EventInfo.Eventview\"\n          />\n        </div>\n      </Grid>\n    </>\n  );\n};\n\nreturn formContent();\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/Keypom.EventInfo.Form", "fact_widget_deployments_id": "9fefc404b37d22a84881e84755e9df24", "inserted_timestamp": "2023-09-06T10:20:42.375Z", "modified_timestamp": "2023-09-06T10:20:42.375Z", "__row_index": 0}