{"tx_hash": "GKbF7aLFgCRLa5MCWjxYhCugBb1FjRwZtvKN52CTpxAe", "action_id_social": "F8rp4onynH8qQQKgDN388p4EWnhHnwpnhT4RZE77kzKD-0-widget", "block_id": 101586025, "block_timestamp": "2023-09-21T00:04:41.759Z", "signer_id": "harrydhillon.near", "widget_name": "nft-selector", "source_code": "const accountId = props.accountId || context.accountId;\nconst onChange = props.onChange;\n\nif (!accountId) {\n  return <></>;\n}\n\nconst size = \"100%\";\n\nconst data = fetch(\"https://graph.mintbase.xyz\", {\n  method: \"POST\",\n  headers: {\n    \"mb-api-key\": \"omni-site\",\n    \"Content-Type\": \"application/json\",\n    \"x-hasura-role\": \"anonymous\",\n  },\n  body: JSON.stringify({\n    query: `\n  query v2_omnisite_GetOwnedTokens{\n    tokens: mb_views_nft_owned_tokens(\n      where: {\n        owner: { _eq: \"${accountId}\" }\n      }\n    ) {\n      tokenId: token_id\n      contractId: nft_contract_id\n      media\n    }}\n`,\n  }),\n});\n\nconst finalData = data?.body?.data;\n\nif (!finalData) {\n  return <></>;\n}\n\nconst selectedTokenID = (props?.selectedNFTS ? props?.selectedNFTS : [])?.map(\n  (item) => item.tokenId\n);\n\nreturn (\n  <>\n    <div\n      className=\"d-flex flex-wrap gap-2 justify-content-center\"\n      style={{\n        height: \"100%\",\n        overflow: \"auto\",\n      }}\n    >\n      {finalData.tokens.length === 0 && (\n        <p style={{ padding: 10 }}>User has no NFT's</p>\n      )}\n      {finalData.tokens.map((nft, index) => {\n        const isInsideList = selectedTokenID.includes(nft.tokenId);\n        const stylesForSelected = isInsideList\n          ? {\n              border: \"1px solid lightgray\",\n              borderRadius: 5,\n              padding: 2.5,\n            }\n          : {};\n        return (\n          <div\n            key={`${nft.contractId}-${nft.tokenId}-${index}`}\n            role=\"button\"\n            style={{\n              width: \"30%\",\n              aspectRatio: \"1/1\",\n              ...stylesForSelected,\n            }}\n            onClick={() => {\n              onChange(nft);\n            }}\n          >\n            <Widget\n              src=\"mob.near/widget/NftImage\"\n              props={{\n                nft: { tokenId: nft.tokenId, contractId: nft.contractId },\n                style: {\n                  width: size,\n                  height: size,\n                  objectFit: \"cover\",\n                  borderRadius: 5,\n                  minWidth: size,\n                  minHeight: size,\n                  maxWidth: size,\n                  maxHeight: size,\n                  overflowWrap: \"break-word\",\n                },\n                className: \"\",\n                fallbackUrl:\n                  \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\n                alt: `NFT ${nft.contractId} ${nft.tokenId}`,\n              }}\n            />\n            <p style={{ textAlign: \"center\", marginTop: 1, marginBottom: 0 }}>\n              {index}\n            </p>\n          </div>\n        );\n      })}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/nft-selector", "fact_widget_deployments_id": "f391dbca89195f013f94ea50689110a4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 13}