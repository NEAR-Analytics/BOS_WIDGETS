{"tx_hash": "DY59CUpmXx6Q82GzmidVM2ZfWZSPz9v6bf6ZMCT3GJRz", "action_id_social": "33pbMJMqRaeZzsDtvFjH9Hu3dz6iYJxRRQpwZ1bafrT5-0-widget", "block_id": 100619183, "block_timestamp": "2023-09-07T22:29:27.669Z", "signer_id": "harrydhillon.near", "widget_name": "Keypom.Review.TicketTable", "source_code": "const Table = styled.table`\n  width: 100%;\n  border-radius: 8px;\n  overflow:hidden;\n  border:0.1px solid #30C9F3;\n  margin: 20px 0;\n  border-collapse: separate;\n  border-spacing: 0;\n`;\n\nconst TableHead = styled.thead`\n  background-color: #F8FAFC;\n`;\n\nconst TableRow = styled.tr`\n\n`;\n\nconst TableHeader = styled.th`\n  padding: 8px;\n  font-weight:500;\n  text-align: left;\n`;\n\nconst TableCell = styled.td`\n  padding: 8px;\n`;\n\nconst UnstyledButton = styled.button`\n  background-color:transparent;\n  border-width:0px;\n  color:#00A7E4;\n`;\n\nconst ActionButton = styled.button`\n  color: black;\n  padding: 5px 10px;\n  padding-bottom:8px;\n  background-color:transparent;\n  border:1px solid lightgray;\n  border-radius: 5px;\n  cursor: pointer;\n`;\n\nfunction extractDateComponents(dateStr) {\n  const dateObj = new Date(dateStr);\n\n  const month = dateObj.toLocaleString(\"default\", { month: \"long\" }); // e.g., \"August\"\n  const date = dateObj.getDate(); // e.g., 3\n  const year = dateObj.getFullYear(); // e.g., 2023\n\n  return `${month} ${date}, ${year}`;\n}\n\nfunction ellipsisIfExceeds(str) {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.substring(0, 35 - 3) + \"...\";\n}\n\nreturn (\n  <>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableHeader>Ticket</TableHeader>\n          <TableHeader />\n          <TableHeader># of tickets</TableHeader>\n          <TableHeader>Price (NEAR)</TableHeader>\n          <TableHeader />\n        </TableRow>\n      </TableHead>\n      <tbody style={{ borderRadius: 10 }}>\n        {props?.ticketValue?.map((item, index) => (\n          <TableRow key={index}>\n            <TableCell style={{ width: \"30%\" }}>\n              <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                <div style={{ padding: 4 }}>\n                  <img\n                    src={`https://ipfs.near.social/ipfs/${item.image.cid}`}\n                    style={{\n                      width: 35,\n                      height: 35,\n                      borderRadius: 3,\n                    }}\n                  />\n                </div>\n                <div>\n                  <div style={{ fontSize: 16, fontWeight: \"500\" }}>\n                    {item.ticketName}\n                  </div>\n                  <p\n                    style={{\n                      textOverflow: \"ellipsis\",\n                      width: 200,\n                      fontSize: 12,\n                      whiteSpace: \"nowrap\",\n                      marginBottom: 0,\n                    }}\n                  >\n                    {ellipsisIfExceeds(item.description)}\n                  </p>\n                  <div style={{ fontSize: 12, color: \"#94A3B8\" }}>\n                    {extractDateComponents(item.from)} -{\" \"}\n                    {extractDateComponents(item.to)}\n                  </div>\n                </div>\n              </div>\n            </TableCell>\n            <TableCell>\n              <UnstyledButton\n                onClick={() => {\n                  State.update({ ticketPreview: item });\n                }}\n              >\n                Preview Ticket\n              </UnstyledButton>\n            </TableCell>\n            <TableCell>{item.numberOfTickets}</TableCell>\n            <TableCell>{item.ticketPricing}</TableCell>\n            <TableCell>\n              <ActionButton\n                onClick={() => {\n                  State.update({\n                    tickets: state.tickets.filter((item, idx) => idx !== index),\n                  });\n                }}\n              >\n                <Widget src=\"harrydhillon.near/widget/Keypom.Tickets.DeleteSVG\" />\n              </ActionButton>\n            </TableCell>\n          </TableRow>\n        ))}\n      </tbody>\n    </Table>\n    {!!state.ticketPreview && (\n      <Widget\n        src=\"harrydhillon.near/widget/Keypom.Tickets.TicketPreview\"\n        props={{\n          isOpen: !!state.ticketPreview,\n          ...state.ticketPreview,\n          onClose: () => {\n            State.update({\n              ticketPreview: null,\n            });\n          },\n        }}\n      />\n    )}\n  </>\n);", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/Keypom.Review.TicketTable", "fact_widget_deployments_id": "8544fac88e4ef227ce9a625206b2392b", "inserted_timestamp": "2023-09-08T00:30:36.255Z", "modified_timestamp": "2023-09-08T00:30:36.255Z", "__row_index": 6}