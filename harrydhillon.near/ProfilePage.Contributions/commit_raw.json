{"tx_hash": "DUADEYnrcTZUEkFPtSgYe9M3YDZrxZYwWToC6jm4nzm1", "action_id_social": "ESswDfVLLrt88bDcmt41qL18AqZHFueUe6nmitc3MNgP-0-widget", "block_id": 101203830, "block_timestamp": "2023-09-15T20:20:21.146Z", "signer_id": "harrydhillon.near", "widget_name": "ProfilePage.Contributions", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) return \"Login or send accountId in the props\";\n\nconst profile = Social.getr(`${accountId}/profile`);\n\nconst allWidgetsHistoryChangesBlocks = Social.keys(\n  `${accountId}/widget/*`,\n  \"final\",\n  {\n    return_type: \"History\",\n  }\n);\n\nif (allWidgetsHistoryChangesBlocks === null) return \"Loading...\";\n\nconst widget = allWidgetsHistoryChangesBlocks[accountId].widget;\n\nconst totalCommits = Object.keys(widget)\n  .map((key) => widget[key])\n  .flat()\n  .map((blockHeight) => {\n    const xs = Near.block(blockHeight);\n\n    const timeMs = parseFloat(xs.header.timestamp_nanosec) / 1e6;\n\n    return new Date(timeMs).toLocaleDateString();\n  });\n\nconst checkOccurrence = (array, element) => {\n  let counter = 0;\n  for (let i = 0; i <= array.length; i++) {\n    if (array[i] == element) {\n      counter++;\n    }\n  }\n  return counter;\n};\n\nconst generate = () => {\n  // Create an empty array to hold the objects\n  const dataArray = [] || [{ empty: true }];\n\n  // Loop through each day of 2023\n  for (let i = 0; i < 365; i++) {\n    // Create a new date object for the current day\n    const date = new Date(2023, 0, i + 1);\n\n    const value = checkOccurrence(totalCommits, date.toLocaleDateString());\n\n    // Create a new object with the date and value and add it to the array\n    dataArray.push({ date: date.toLocaleDateString(), value });\n  }\n\n  return dataArray;\n};\n\nconst array = generate();\n\nreturn (\n  <div\n    style={{ border: `1px solid ${props.theme.borderColor}` }}\n    className=\"contributions\"\n  >\n    <div className=\"header\">\n      <div className=\"headerContent\">\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Jan</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Feb</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Mar</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Apr</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>May</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Jun</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Jul</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Aug</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Sep</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Oct</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Nov</p>\n        <p style={{ color: props.theme.textColor3, fontSize: 12 }}>Dec</p>\n      </div>\n    </div>\n\n    <div className=\"contributionsContainer\">\n      <div className=\"weekdays\">\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Sun\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Mon\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Tues\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Wed\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Thur\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Fir\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Sat\n        </p>\n      </div>\n      <div className=\"contributionsContent\">\n        {array?.map((item, index) => {\n          let color;\n\n          if (item?.value === 0)\n            color = props.theme.name === \"light\" ? \"#ebedf0\" : \"#161b22\";\n          else if (item?.value === 1)\n            color = props.theme.name === \"light\" ? \"#9be9a8\" : \"#0e4429\";\n          else if (item?.value === 2)\n            color = props.theme.name === \"light\" ? \"#40c463\" : \"#26a641\";\n          else if (item?.value === 3)\n            color = props.theme.name === \"light\" ? \"#30a14e\" : \"#26a641\";\n          else color = props.theme.name === \"light\" ? \"#216e39\" : \"#39d353\";\n\n          const date = new Date(item.date);\n          const options = {\n            day: \"2-digit\",\n            month: \"short\",\n            year: \"numeric\",\n          };\n          const formattedDate = date.toLocaleDateString(\"en-GB\", options);\n\n          return (\n            <Widget\n              src=\"harrydhillon.near/widget/ProfilePage.Contributions.Item\"\n              props={{\n                color: color,\n                date: formattedDate,\n                item,\n                theme: props.theme.name,\n              }}\n            />\n          );\n        })}\n      </div>\n    </div>\n\n    <div className=\"footer\">\n      <p style={{ color: props.theme.textColor3 }} className=\"footerText\">\n        Less\n      </p>\n      <div\n        style={{\n          backgroundColor: props.theme.name === \"light\" ? \"#ebedf0\" : \"#161b22\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme.name === \"light\" ? \"#9be9a8\" : \"#0e4429\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme.name === \"light\" ? \"#40c463\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme.name === \"light\" ? \"#30a14e\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme.name === \"light\" ? \"#216e39\" : \"#39d353\",\n        }}\n      />\n      <p style={{ color: props.theme.textColor3 }} className=\"footerText\">\n        More\n      </p>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/ProfilePage.Contributions", "fact_widget_deployments_id": "d4ea4975a4c868daa2381a28e079a2f0", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}