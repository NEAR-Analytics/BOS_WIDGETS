{"tx_hash": "Bx8cgMSznGdymki6QFt5awEfVBsG5tfhdhjtmariCnWS", "action_id_social": "5vdGmb2JB72R7Yewp23hmDACPDky2v517uE2MbcLbMiY-0-widget", "block_id": 108021230, "block_timestamp": "2023-12-15T17:05:25.420Z", "signer_id": "keypom-marketplace.near", "widget_name": "Project.ActionsBuyNewSale", "source_code": "const ownerId = \"keypom-marketplace.testnet\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between';\n  width: 100%;\n`;\n\nconst SubRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 40px;\n`;\n\nconst eventRegistryId = 'dev-1699521073288-13420165222235'\nconst tickets = Near.view(eventRegistryId, \"view_keypom_contract\", { account_id: \"minqi.testnet\" })\n\n\n\n// function generateKey = () => {\n//   const str = ''\n// }\n\nconst Actions = () => (\n  <Widget\n    src={`${ownerId}/widget/Project.Actions`}\n    props={{\n      ...props,\n      drop_ids,\n      event_id\n    }}\n  />\n);\n\nreturn (\n  <Container className=\"gx-0\">\n    <SubRow className=\"col-12\">\n      <div>Purchase Options</div>\n      {props.drop_ids.map((drop, index) => (\n        <Widget\n          src={`${ownerId}/widget/Buttons.ActionButton`}\n          props={{\n            type: \"tertiary\",\n            // Use a template literal and a ternary operator to change the text based on the index\n            text: `Buy ${index === 0 ? 'Premium' : index === 1 ? 'Regular' : 'Discount'} Ticket`,\n            onClick: () => {\n              const attachedDeposit = \"70000000000000000000000000\"\n              const key = {\n                public_key: 'ed25519:1PJDR1iyzQuNinFhKzZdwDXwmjTGtvMM6XfYjiGCWus',\n                key_owner: 'olympihacks2.testnet',\n              }\n              console.log('action button pressed', index);\n              try {\n                console.log('props ', props.event_id)\n                const buyNew = Near.call(eventRegistryId, \"buy_initial_sale\", {\n                  event_id: props.event_id,\n                  new_key_info: key,\n                  ticket_tier: 1,\n                }, 1000000000000 * 150, attachedDeposit);\n              } catch (error) {\n                console.log(`Error purchasing ticket: `, error);\n              }\n            },\n          }}\n        />\n      ))}\n\n\n    </SubRow>\n\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/keypom-marketplace.near/widget/Project.ActionsBuyNewSale", "fact_widget_deployments_id": "7a2d72f56eb0a20a3c4c212aef3d9d9f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}