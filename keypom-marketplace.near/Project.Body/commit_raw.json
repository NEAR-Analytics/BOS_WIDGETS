{"tx_hash": "Bx8cgMSznGdymki6QFt5awEfVBsG5tfhdhjtmariCnWS", "action_id_social": "5vdGmb2JB72R7Yewp23hmDACPDky2v517uE2MbcLbMiY-0-widget", "block_id": 108021230, "block_timestamp": "2023-12-15T17:05:25.420Z", "signer_id": "keypom-marketplace.near", "widget_name": "Project.Body", "source_code": "const ownerId = \"keypom-marketplace.testnet\";\nconst IPFS_BASE_URL = \"https://nftstorage.link/ipfs/\";\n\nconst profile = props.profile;\nconst events = props.events;\n\nconst loraCss = fetch(\"https://fonts.cdnfonts.com/css/lora\").body;\n\nconst tags = Object.keys(profile.tags ?? {});\n\nconst BodyContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 48px;\n`;\n\nconst NameContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n`;\n\nconst Name = styled.div`\n  font-size: 48px;\n  font-weight: 500;\n  color: #2e2e2e;\n  line-height: 56px;\n  font-family: \"Lora\";\n  ${loraCss}\n`;\n\nconst AccountInfoContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  margin-bottom: 32px;\n`;\n\nconst AccountId = styled.div`\n  color: #7b7b7b;\n  font-size: 16px;\n  // font-family: Mona-Sans;\n  font-weight: 400;\n`;\n\nconst TagsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 12px;\n`;\n\nconst shareSvg = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    fill=\"currentColor\"\n    viewBox=\"0 0 16 16\"\n    stroke=\"currentColor\"\n    strokeWidth=\"0.363\"\n  >\n    <path d=\"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\" />\n    <path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z\" />\n  </svg>\n);\n\nconst projectLink = `https://near.social/keypom-marketplace.testnet/widget/Index?tab=project&projectId=${props.projectId}${context.accountId && `&referrerId=${context.accountId}`}`;\n\n\n\nconst projectId = props.projectId;\n\nconst eventRegistryId = 'dev-1699521073288-13420165222235';\nlet currentEvent = Near.view(eventRegistryId, \"get_events\", {projectId}) // will be a vector array\nconst { name, description, drop_ids, price_by_drop_id, max_tickets, max_markup, event_id } = currentEvent[0];\nconsole.log(currentEvent[0])\nconsole.log('current event = ', name)\nlet display_price = (price_by_drop_id[drop_ids[0]] / (Math.pow(10, TOKEN_DECIMALS))).toFixed(0);\n\nconst Actions = () => (\n  <Widget\n    src={`${ownerId}/widget/Project.ActionsBuyNewSale`}\n    props={{\n      ...props,\n      drop_ids, \n      event_id\n    }}\n  />\n);\n\nreturn (\n  <BodyContainer>\n    <div>\n      <NameContainer>\n        <Name>{name} Event </Name>\n        {props.projectId === context.accountId && (\n          <Widget\n            src={`${ownerId}/widget/Buttons.NavigationButton`}\n            props={{\n              type: \"secondary\",\n              text: \"Edit profile\",\n              disabled: false,\n              href: `?tab=editproject&projectId=${props.projectId}`,\n            }}\n          />\n        )}\n      </NameContainer>\n      <AccountInfoContainer>\n        <AccountId>@{'keypomxyz'}</AccountId>\n        <Widget\n          src={`${ownerId}/widget/Project.Share`}\n          props={{\n            text: 'keypom.xyz',\n            label: \"keypom.xyz\",\n            clipboardIcon: shareSvg,\n          }}\n        />\n      </AccountInfoContainer>\n      {/*<Widget\n        src={`${ownerId}/widget/Project.Tags`}\n        props={{\n          ...props,\n          tags,\n        }}\n      />*/}\n    </div>\n\n    <Widget\n      src={`${ownerId}/widget/Project.About`}\n      props={{\n        ...props,\n        description,\n        max_tickets\n      }}\n    />\n    <Actions />\n\n  </BodyContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/keypom-marketplace.near/widget/Project.Body", "fact_widget_deployments_id": "5bef6fbf9e99474e5250aa6f50010a10", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 10}