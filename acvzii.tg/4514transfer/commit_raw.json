{"tx_hash": "Gwdk2bGTwShmKLfCbgNufS2oTR4J6dBScwXsikFQZLud", "action_id_social": "AL9mT1y5MQqnKDYZpKpkE34uBvWS85ycZKLMNb2z3fss-0-widget", "block_id": 115913892, "block_timestamp": "2024-04-01T11:07:43.500Z", "signer_id": "acvzii.tg", "widget_name": "4514transfer", "source_code": "const { accountId } = context;\nconst rpcServer = \"https://1rpc.io/near\";\nconst contract = \"v2.ref-finance.near\";\nconst mft_balance = Near.view(contract, \"mft_balance_of\", {\n  account_id: accountId,\n  token_id: \":4514\",\n});\n\n// Use and manipulate state\nState.init({ receiverId });\n\nconst onInputChange = ({ target }) => {\n  State.update({ receiverId: target.value });\n};\n\nconst onRegBtnClick = () => {\n  Near.call([\n    {\n      contractName: contract,\n      methodName: \"mft_register\",\n      args: {\n        account_id: state.receiverId,\n        token_id: \":4514\",\n      },\n      deposit: 30000000000000000000000,\n    },\n  ]);\n};\n\nconst onSendBtnClick = () => {\n  Near.call([\n    {\n      contractName: contract,\n      methodName: \"mft_transfer\",\n      args: {\n        amount: mft_balance,\n        receiver_id: state.receiverId,\n        token_id: \":4514\",\n      },\n      deposit: 1,\n    },\n  ]);\n};\n\nconst sendingForm = (\n  <>\n    <div class=\"border border-black p-3\">\n      <label>receiver_id</label>\n      <input placeholder=\"acvzii.tg\" onChange={onInputChange} />\n      <button class=\"btn btn-primary mt-2\" onClick={onRegBtnClick}>\n        Register\n      </button>\n      <button class=\"btn btn-primary mt-2\" onClick={onSendBtnClick}>\n        Send\n      </button>\n    </div>\n  </>\n);\n\nconst notLoggedInWarning = <p class=\"text-center py-2\"> Please login </p>;\n\n// Render\nreturn (\n  <>\n    {\n      <div class=\"container py-5\">\n        <h1 class=\"text-center mb-4\">Welcome, {accountId}!</h1>\n        <div class=\"card shadow\">\n          <div class=\"card-body\">\n            <p class=\"card-text\">\n              Here you can check your Frax-USDC LP balance and send tokens to\n              other accounts.\n            </p>\n            <div class=\"d-flex align-items-center mb-3 balance-info\">\n              <i class=\"fas fa-wallet fa-2x mr-3\"></i>\n              <div>\n                <h2 class=\"h5 mb-0\">Frax-USDC LP Balance:</h2>\n                <span\n                  class=\"text-muted\"\n                  data-toggle=\"tooltip\"\n                  title=\"This is the amount of Frax-USDC LP tokens you currently hold.\"\n                >\n                  {mft_balance}\n                </span>\n              </div>\n            </div>\n            {context.accountId ? (\n              <div class=\"border border-secondary rounded p-3\">\n                <div class=\"form-group\">\n                  <label for=\"receiverId\">Receiver ID</label>\n                  <div class=\"input-group\">\n                    <input\n                      id=\"receiverId\"\n                      class=\"form-control\"\n                      placeholder=\"Enter the account ID of the recipient\"\n                      onChange={onInputChange}\n                    />\n                    <div class=\"input-group-append\">\n                      <button\n                        class=\"btn btn-outline-secondary\"\n                        onClick={onRegBtnClick}\n                      >\n                        <i class=\"fas fa-user-plus\"></i> Register\n                      </button>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-muted\">\n                    If the recipient hasn't registered for Frax-USDC LP tokens,\n                    they need to do so before you can send tokens to them.\n                  </small>\n                </div>\n                <button\n                  class=\"btn btn-primary btn-block mt-3\"\n                  onClick={onSendBtnClick}\n                >\n                  <i class=\"fas fa-paper-plane\"></i> Send Tokens\n                </button>\n              </div>\n            ) : (\n              <div class=\"alert alert-warning text-center mb-0\" role=\"alert\">\n                Please log in to view your balance and send tokens.\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    }\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/acvzii.tg/widget/4514transfer", "fact_widget_deployments_id": "f9150c087e68dcd6ac23dabe69dd7b1b", "inserted_timestamp": "2024-04-01T12:33:40.493Z", "modified_timestamp": "2024-04-01T12:33:40.493Z", "__row_index": 1}