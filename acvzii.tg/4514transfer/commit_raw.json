{"tx_hash": "2zZRi315e97SWN5iuErQWrJYtT2UZjtp31BMUUy1fvMa", "action_id_social": "4jTPeMjp7aSLDcXs95T38rQkoCqck5MrrX8MhqSjiQwK-0-widget", "block_id": 115909851, "block_timestamp": "2024-04-01T09:39:01.626Z", "signer_id": "acvzii.tg", "widget_name": "4514transfer", "source_code": "const { accountId } = context;\nconst rpcServer = \"https://1rpc.io/near\";\nconst contract = \"v2.ref-finance.near\";\nconst mft_balance = Near.view(contract, \"mft_balance_of\", {\n  account_id: accountId,\n  token_id: \":4514\",\n});\n\n// Use and manipulate state\nState.init({ receiverId });\n\nconst onInputChange = ({ target }) => {\n  State.update({ receiverId: target.value });\n};\n\nconst onRegBtnClick = () => {\n  Near.call([\n    {\n      contractName: contract,\n      methodName: \"mft_register\",\n      args: {\n        account_id: state.receiverId,\n        token_id: \":4514\",\n      },\n      deposit: 30000000000000000000000,\n    },\n  ]);\n};\n\nconst onSendBtnClick = () => {\n  Near.call([\n    {\n      contractName: contract,\n      methodName: \"mft_transfer\",\n      args: {\n        amount: mft_balance,\n        receiver_id: state.receiverId,\n        token_id: \":4514\",\n      },\n      deposit: 1,\n    },\n  ]);\n};\n\nconst sendingForm = (\n  <>\n    <div class=\"border border-black p-3\">\n      <label>receiver_id</label>\n      <input placeholder=\"acvzii.tg\" onChange={onInputChange} />\n      <button class=\"btn btn-primary mt-2\" onClick={onRegBtnClick}>\n        Register\n      </button>\n      <button class=\"btn btn-primary mt-2\" onClick={onSendBtnClick}>\n        Send\n      </button>\n    </div>\n  </>\n);\n\nconst notLoggedInWarning = <p class=\"text-center py-2\"> Please login </p>;\n\n// Render\nreturn (\n  <>\n    {\n      <div class=\"p-3\">\n        <h3>Hi, {accountId}</h3>\n        <h5>Frax-USDC LP balance: {mft_balance}</h5>\n        {context.accountId ? sendingForm : notLoggedInWarning}\n      </div>\n    }\n  </>\n);\n", "metadata": {"platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/acvzii.tg/widget/4514transfer", "fact_widget_deployments_id": "4dca2b94d910a01743c8cb4385de7167", "inserted_timestamp": "2024-04-01T11:28:51.383Z", "modified_timestamp": "2024-04-01T11:28:51.383Z", "__row_index": 0}