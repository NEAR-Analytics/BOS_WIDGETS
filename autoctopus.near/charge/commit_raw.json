{"tx_hash": "BJ8QiiQ9Dw9ZYGWH99FzFZh4LWMg9ZD7Pzf4n5YT5VMU", "action_id_social": "38mGPiSPiFgR18vRX75MP768mArwBkJonbLwa3CV4oYC-0-widget", "block_id": 98713286, "block_timestamp": "2023-08-13T13:25:17.383Z", "signer_id": "autoctopus.near", "widget_name": "charge", "source_code": "// \u6837\u5f0f\u7ec4\u4ef6\nconst Title = styled.div`\n  font-size: 16px;\n  font-weight: bold;\n  align-self: center; \n`;\n\nconst Separator = styled.div`\n  height: 1px;\n  width: 100%; \n  background: #ddd;\n  margin: 5px auto;  \n`;\n\nconst Desc = styled.div`\n  text-align: start;\n  color: #777;\n  font-size: 14px;\n  height: 200px;\n`;\n\nconst Price = styled.div`\n  font-size: 14px;\n  color: #a08f2e;\n  margin: 10px 0;\n`;\n\nconst Button = styled.button`\n  border: none;\n  background: #1890FF;\n  color: white;\n  padding: 8px 16px;\n  border-radius: 4px; \n`;\n\nconst RechargeItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px;\n  border: 1px solid #ddd;\n  width: 200px;\n`;\n\nconst accountId = context.accountId;\n\nif (accountId === \"\") {\n  return \"Please login first\";\n}\n\nconst charge = (days, price) => {\n  let plan = \"\";\n  if (days === 30) {\n    plan = \"MonthlyPlan\";\n  } else if (days === 90) {\n    plan = \"QuartlyPlan\";\n  } else if (days === 360) {\n    plan = \"YearlyPlan\";\n  }\n  const gas = 50000000000000;\n  const deposit = new Big(10).pow(24).mul(price).toFixed(0);\n  Near.call(\n    \"nft.autoctopus.near\",\n    \"charge\",\n    { charge_type: plan },\n    gas,\n    deposit\n  );\n};\n\n// \u5145\u503c\u7ec4\u4ef6\nfunction Recharge(props) {\n  return (\n    <div\n      className=\"recharge-list\"\n      style={{ flexWrap: \"wrap\", display: \"flex\" }}\n    >\n      {props.items.map((item) => (\n        <RechargeItem>\n          <Title>{item.title}</Title>\n          <Separator />\n          <Desc>{item.desc}</Desc>\n          <Separator />\n          <Price>{item.price}</Price>\n          <Separator />\n          <Button onClick={item.buttonClick}>{item.button}</Button>\n        </RechargeItem>\n      ))}\n    </div>\n  );\n}\nconsole.log(\"hello\");\nreturn (\n  <div>\n    <Recharge\n      items={[\n        {\n          title: \"Free way\",\n          desc: \"By participating in the monthly Community Calls, you can earn a POAP. Each POAP automatically recharges 30 days of usage rights.\",\n          price: \"Free\",\n          button: \"Check my POAP\",\n          buttonClick: () => {\n            console.log(\"this.title\");\n          },\n        },\n        {\n          title: \"30 days\",\n          desc: \"Purchase 30 days of service for this product\",\n          price: \"price: 5 NEAR\",\n          button: \"Buy\",\n          buttonClick: () => {\n            charge(30, 5);\n          },\n        },\n        {\n          title: \"90 days\",\n          desc: \"Purchase 90 days of service for this product. Enjoy a 10% discount!\",\n          price: \"price: 13.5 NEAR\",\n          button: \"Buy\",\n          buttonClick: () => {\n            charge(90, 13.5);\n          },\n        },\n        {\n          title: \"360 days\",\n          desc: \"Purchase 360 days of service for this product. Enjoy a 20% discount!\",\n          price: \"price: 48 NEAR\",\n          button: \"Buy\",\n          buttonClick: () => {\n            charge(360, 48);\n          },\n        },\n        {\n          title: \"VIP NFT\",\n          desc: \"Account holders of this NFT can enjoy the services of this product. The NFT can be traded. The minting price of the NFT increases each time it is minted.\",\n          price: `price: ${props.nft_current_price}`,\n          button: \"Check more detail\",\n          buttonClick: () => {\n            console.log(this.title);\n          },\n        },\n      ]}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/autoctopus.near/widget/charge", "fact_widget_deployments_id": "74518c47d0513f0f2ee2df93e04bbd0e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}