{"tx_hash": "FR1W6ratfKMLy6dSkG8MFpZwCWFQ247E9sZC3MLhox89", "action_id_social": "CwiRgGze9UQRsDSTthxY7zqHD5Zb2zuLDU5bSoDaT8je-0-widget", "block_id": 97852460, "block_timestamp": "2023-08-01T16:42:14.455Z", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "NDC.NavBar", "source_code": "const {\r\n  stateUpdate,\r\n  brand,\r\n  pills,\r\n  navigationButtons,\r\n  isTest,\r\n  displayedTabId,\r\n  writersWhiteList,\r\n} = props;\r\n\r\n/*\r\n======================================================PILLS EXAMPLE====================================================\r\n    *Note: the first pill allways has to be the first one displayed*\r\n    pills: [{\r\n        id: number,\r\n        title: string,\r\n    }]    \r\n============(When modified to be web app we should delete action to replace it with a propper State.update)============\r\n\r\n======================================================BRAND EXAMPLE====================================================\r\n    brand: {\r\n        homePageId: number,\r\n        brandName: string,\r\n        logoHref: string,\r\n        logoRemWidth: number/string,\r\n        logoRemHeight: number/string,\r\n    }\r\n    \r\n============(When modified to be web app we should delete action to replace it with a propper State.update)============\r\n*/\r\n\r\nconst logoRemWidth = brand.logoRemWidth\r\n  ? brand.logoRemWidth + \"rem\"\r\n  : undefined;\r\nconst logoRemHeight = brand.logoRemHeight\r\n  ? brand.logoRemHeight + \"rem\"\r\n  : undefined;\r\n\r\nif (\r\n  !stateUpdate ||\r\n  (!displayedTabId && displayedTabId != 0) ||\r\n  !pills ||\r\n  (brand && (!brand.logoHref || (!brand.homePageId && brand.homePageId != 0)))\r\n) {\r\n  const crucialPropMissingMsg = \"The following crucial props are missing:\";\r\n  return (\r\n    <div>\r\n      <h3 className=\"text-danger\">{crucialPropMissingMsg}</h3>\r\n      <ul>\r\n        {!stateUpdate && <li className=\"text-danger\">stateUpdate</li>}\r\n\r\n        {!displayedTabId && <li className=\"text-danger\">displayedTabId</li>}\r\n\r\n        {!pills && <li className=\"text-danger\">pills</li>}\r\n\r\n        {brand && !brand.logoHref && (\r\n          <li className=\"text-danger\">brand.logoHref</li>\r\n        )}\r\n\r\n        {brand && !brand.homePageId && brand.homePageId != 0 && (\r\n          <li className=\"text-danger\">brand.homePageId</li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst accountId = context.accountId;\r\n\r\n//============================================Styled components==================================================\r\nconst BrandLogoContainer = styled.div`\r\n    width: ${logoRemWidth ?? \"4rem\"};\r\n    height: ${logoRemHeight ?? \"4rem\"};\r\n    cursor: pointer;\r\n`;\r\n\r\nconst Pill = styled.div`\r\n    font-family: system-ui;\r\n    font-weight: 500;\r\n    font-size: 1.2rem;\r\n    line-height: 24px;\r\n    color: black;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        color: #9333EA;\r\n    }\r\n`;\r\n\r\nconst StylessATag = styled.a`\r\n    &:hover {\r\n        text-decoration: none;\r\n    }\r\n`;\r\n//============================================End styled components==============================================\r\n\r\n//=================================================Components====================================================\r\n\r\nconst renderButton = (button) => {\r\n  <Widget\r\n    src=\"rubycop.near/widget/NDC.StyledComponents\"\r\n    props={{\r\n      Button: {\r\n        size: \"big\",\r\n        onClick: () => {\r\n          stateUpdate({ displayedTabId: button.id });\r\n        },\r\n        text: button.title,\r\n        className: \"primary dark\",\r\n      },\r\n    }}\r\n  />;\r\n};\r\n//==============================================End components===================================================\r\n\r\n//==================================================FUNCTIONS====================================================\r\n\r\nfunction getLink(widgetName) {\r\n  let baseLink = widgetName\r\n    ? `#/${authorForWidget}/widget/${widgetName}`\r\n    : `#/${authorForWidget}/widget/SayALot_CreateArticle`;\r\n\r\n  if (isTest) {\r\n    return baseLink + \"?isTest=true\";\r\n  } else baseLink;\r\n}\r\n\r\nfunction handleArticlesListNavigation(filterBy) {\r\n  () => stateUpdate({ displayedTabId: brand.homePageId, listBy: filterBy });\r\n}\r\n\r\n//================================================END FUNCTIONS===================================================\r\n\r\nreturn (\r\n  <div className=\"navbar navbar-expand-md border-bottom mb-3\">\r\n    <div className=\"container-fluid\">\r\n      {brand && (\r\n        <BrandLogoContainer\r\n          className=\"navbar-brand text-decoration-none\"\r\n          onClick={handleArticlesListNavigation(navigationPills[0].title)}\r\n        >\r\n          <Widget\r\n            src=\"mob.near/widget/Image\"\r\n            props={{\r\n              // image: metadata.image,\r\n              className: \"w-100 h-100\",\r\n              style: {\r\n                objectFit: \"cover\",\r\n              },\r\n              thumbnail: false,\r\n              fallbackUrl: brand.logoHref,\r\n              alt: brand.brandName ?? \"\",\r\n            }}\r\n          />\r\n        </BrandLogoContainer>\r\n      )}\r\n      <button\r\n        className=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\"\r\n        aria-expanded=\"false\"\r\n        aria-label=\"Toggle navigation\"\r\n      >\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div\r\n        className=\"collapse navbar-collapse justify-content-center\"\r\n        id=\"navbarNav\"\r\n      >\r\n        <ul className=\"navbar-nav\">\r\n          {pills &&\r\n            pills.map((pill) => {\r\n              (!pill.id && pill.id != 0) || !pill.title ? (\r\n                <p className=\"text-danger border\">Pill passed wrong</p>\r\n              ) : (\r\n                <li className=\"nav-item\">\r\n                  <Pill\r\n                    onClick={handleArticlesListNavigation(title)}\r\n                    className={`nav-link ${\r\n                      id === displayedTabId\r\n                        ? \"active text-decoration-underline\"\r\n                        : \"text-decoration-none\"\r\n                    } `}\r\n                  >\r\n                    {title}\r\n                  </Pill>\r\n                </li>\r\n              );\r\n            })}\r\n          {navigationButtons &&\r\n            accountId &&\r\n            writersWhiteList &&\r\n            writersWhiteList.some((whiteAddr) => whiteAddr === accountId) &&\r\n            navigationButtons.map((button) =>\r\n              (!button.id && button.id != 0) || !button.title ? (\r\n                <p className=\"text-danger border\">Button passed wrong</p>\r\n              ) : (\r\n                <div className=\"d-block d-md-none\">{renderButton(button)}</div>\r\n              )\r\n            )}\r\n        </ul>\r\n      </div>\r\n      {navigationButtons &&\r\n        accountId &&\r\n        writersWhiteList &&\r\n        writersWhiteList.some((whiteAddr) => whiteAddr === accountId) &&\r\n        navigationButtons.map((button) => (\r\n          <div className=\"d-none d-md-block\">{renderButton(button)}</div>\r\n        ))}\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/NDC.NavBar", "fact_widget_deployments_id": "2e2b48cfbcc2cc460d4ca9d60eb83faa", "inserted_timestamp": "2023-08-01T18:37:56.289Z", "modified_timestamp": "2023-08-01T18:37:56.289Z", "__row_index": 11}