{"tx_hash": "GDeDyEn1LUTbnL2FZYXJsJEPr7aSjZSFawA4BvdnhTfc", "action_id_social": "AxxdbcL7F8zHRzx6yHuW9gAxuzA27yDPF35YVKwzBnhZ-0-widget", "block_id": 103060558, "block_timestamp": "2023-10-10T15:36:58.130Z", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "MarkdownEditorIframe", "source_code": "const initialText = props.initialText ?? \"# Hello World\\n\\n\";\r\nconst clear = props.clearArticleBody ?? false;\r\n\r\nconst embedCss = props.embedCss || \"\";\r\n\r\nconst code = `\r\n<script src=\"https://unpkg.com/react@18/umd/react.development.js\" crossorigin></script>\r\n<script src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\" crossorigin></script>\r\n<script src=\"https://unpkg.com/react-markdown-editor-lite@1.3.4/lib/index.js\" crossorigin></script>\r\n<link rel=\"stylesheet\" href=\"https://unpkg.com/react-markdown-editor-lite@1.3.4/lib/index.css\" />\r\n\r\n<style>\r\n${embedCss}\r\n</style>\r\n\r\n<div id=\"react-root\"></div>\r\n\r\n<script>\r\nfunction TestReact(props) {\r\n  const [value, setValue] = React.useState(props.initialText || \"\");\r\n  \r\n  React.useEffect(() => {\r\n    if(props.clear) setValue(props.initialText)\r\n  }, [props.initialText, props.clear])\r\n\r\n  return React.createElement(ReactMarkdownEditorLite.default, {\r\n      value,\r\n      view: { menu: true, md: true, html: false },\r\n      canView: { menu: true, md: false, html: false, fullScreen: false, hideMenu: true },\r\n      onChange: ({ text }) => {\r\n        setValue(text);\r\n        window.top.postMessage(text, \"*\");\r\n      },\r\n      renderHTML: () => {},\r\n      className: \"full\",\r\n    }); \r\n}\r\n\r\nconst domContainer = document.querySelector('#react-root');\r\nconst root = ReactDOM.createRoot(domContainer);\r\n\r\nwindow.addEventListener(\"message\", (event) => {\r\n  root.render(React.createElement(TestReact, {\r\n    initialText: event.data.initialText,\r\n    clear: event.data.clear,\r\n  }));\r\n});\r\n\r\n</script>\r\n`;\r\n\r\nreturn (\r\n  <iframe\r\n    className=\"w-100 h-100\"\r\n    srcDoc={code}\r\n    message={{ initialText, clear }}\r\n    onMessage={props.onChange}\r\n  />\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/MarkdownEditorIframe", "fact_widget_deployments_id": "9bb8aa1bf3292774825c15a5ff507660", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 3}