{"tx_hash": "2aX5PErnZES64AEf5xTUF6JNbJ2XjUo9YsHsLqqjHk15", "action_id_social": "83DY9emAN8HS4FpVHUYaeNiwSrVQXJPoQCJ6uBf9u11T-0-widget", "block_id": 96493459, "block_timestamp": "2023-07-15T01:06:22.136Z", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "SayALot_FasterArticleEditInputs", "source_code": "//======= Get props =======\nconst defaultStateUpdate = (obj) => State.update(obj);\nconst stateUpdate = props.stateUpdate ?? defaultStateUpdate;\n\nconst saveHandler = props.saveHandler;\nconst isSaving = props.isSaving;\nconst articleTags = props.articleTags ?? [];\nconst textAreaInitialText = props.firstTextareaText ?? \"\";\nconst isDebug = props.isDebug;\n\n//======= Initialisation =======\n\nState.init({ textAreaText: textAreaInitialText });\nconst authorForWidget =\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\n\n//======= Functions =======\n\nconst getTagObjectfromArray = (tagArray) => {\n  if (!tagArray) return {};\n  return tagArray.reduce((acc, value) => ({ ...acc, [value]: \"\" }), {});\n};\n\n// Next function cames from parent widget. Not sure what it was used for.\n// const filterTagsFromNull = (tagsObj) => {\n//   const entries = Object.entries(tagsObj);\n\n//   const result = entries.reduce((acc, value) => {\n//     if (value[1] !== null) {\n//       return [...acc, value[0]];\n//     } else {\n//       return acc;\n//     }\n//   }, []);\n//   return result;\n// };\n\n//======= Render =======\nreturn (\n  <>\n    {/* === BUTTON - EDIT ARTICLE === */}\n    <div className=\"d-flex justify-content-center w-100\">\n      <button\n        type=\"button\"\n        className=\"btn btn-outline-success mx-1\"\n        style={{ minWidth: \"120px\" }}\n        onClick={saveHandler}\n        onMouseEnter={() =>\n          stateUpdate({ note: state.textAreaText, tags: state.tags })\n        }\n      >\n        {isSaving && (\n          <div\n            className=\"spinner-border text-secondary\"\n            style={{ height: \"1rem\", width: \"1rem\" }}\n            role=\"status\"\n          >\n            <span className=\"sr-only\" title=\"Loading...\"></span>\n          </div>\n        )}\n        Save Article\n      </button>\n\n      <button\n        type=\"button\"\n        className=\"btn btn-outline-danger mx-1\"\n        style={{ minWidth: \"120px\" }}\n        onClick={() => {\n          stateUpdate({\n            editArticle: false,\n          });\n        }}\n      >\n        Close\n      </button>\n    </div>\n    <hr />\n    <div className=\"d-flex gap-2\" style={{ minHeight: \"300px\" }}>\n      <div className=\"w-50\">\n        <Widget\n          src=\"mob.near/widget/MarkdownEditorIframe\"\n          props={{\n            initialText: state.textAreaText,\n            onChange: (textAreaText) => State.update({ textAreaText }),\n          }}\n        />\n      </div>\n      <div className=\"w-50\">\n        <Widget\n          src=\"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/TagsEditor\"\n          props={{\n            initialTagsObject: getTagObjectfromArray(articleTags),\n            placeholder: \"Input tags\",\n            setTagsObject: (tags) => {\n              // console.log(filterTagsFromNull(tags));\n              // Next line is from parent widget. Not sure what it was used for.\n              // state.tags = filterTagsFromNull(tags);\n              State.update({ tags });\n            },\n          }}\n        />\n\n        <Widget\n          src=\"mob.near/widget/SocialMarkdown\"\n          props={{\n            text: state.textAreaText,\n            onHashtag: (hashtag) => (\n              <span\n                key={hashtag}\n                className=\"d-inline-flex\"\n                style={{ fontWeight: 500 }}\n              >\n                <a\n                  href={\n                    isDebug\n                      ? `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}&isDebug=true`\n                      : `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}`\n                  }\n                >\n                  #{hashtag}\n                </a>\n              </span>\n            ),\n          }}\n        />\n      </div>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/SayALot_FasterArticleEditInputs", "fact_widget_deployments_id": "c0e1c77e9d969bc4011928194c82984f", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 21}