{"tx_hash": "7kPnmzQeMT9wom5zwMRFRsMEWgH83TREXKv4UZZcCux7", "action_id_social": "9yQvUrMAJ8cBp395oLTNBQq1MrVxbveDMfPgGeyMxtS9-0-widget", "block_id": 96486866, "block_timestamp": "2023-07-14T23:04:17.676Z", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "SayALot_FasterArticleEditInputs", "source_code": "//======= Get props =======\r\nconst defaultStateUpdate = (obj) => State.update(obj);\r\nconst stateUpdate = props.stateUpdate ?? defaultStateUpdate;\r\n\r\nconst saveHandler = props.saveHandler;\r\nconst isSaving = props.isSaving;\r\nconst articleTags = props.articleTags ?? [];\r\nconst textAreaInitialText = props.firstTextareaText ?? \"\";\r\nconst isDebug = props.isDebug;\r\n\r\n//======= Initialisation =======\r\n\r\nState.init({ textAreaText: textAreaInitialText });\r\nconst authorForWidget =\r\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\r\n\r\n//======= Functions =======\r\n\r\nconst getTagObjectfromArray = (tagArray) => {\r\n  if (!tagArray) return {};\r\n  return tagArray.reduce((acc, value) => ({ ...acc, [value]: \"\" }), {});\r\n};\r\n\r\n// Next function cames from parent widget. Not sure what it was used for.\r\n// const filterTagsFromNull = (tagsObj) => {\r\n//   const entries = Object.entries(tagsObj);\r\n\r\n//   const result = entries.reduce((acc, value) => {\r\n//     if (value[1] !== null) {\r\n//       return [...acc, value[0]];\r\n//     } else {\r\n//       return acc;\r\n//     }\r\n//   }, []);\r\n//   return result;\r\n// };\r\n\r\nif (state.isOverSaveButton) {\r\n  stateUpdate({ note: state.textAreaText, tags: state.tags });\r\n}\r\n\r\n//======= Render =======\r\nreturn (\r\n  <>\r\n    {/* === BUTTON - EDIT ARTICLE === */}\r\n    <div className=\"d-flex justify-content-center w-100\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-outline-success mx-1\"\r\n        style={{ minWidth: \"120px\" }}\r\n        onClick={saveHandler}\r\n        onMouseEnter={() => State.update({ overSaveButton: true })}\r\n        onMouseLeave={() => State.update({ overSaveButton: false })}\r\n      >\r\n        {isSaving && (\r\n          <div\r\n            className=\"spinner-border text-secondary\"\r\n            style={{ height: \"1rem\", width: \"1rem\" }}\r\n            role=\"status\"\r\n          >\r\n            <span className=\"sr-only\" title=\"Loading...\"></span>\r\n          </div>\r\n        )}\r\n        Save Article\r\n      </button>\r\n\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-outline-danger mx-1\"\r\n        style={{ minWidth: \"120px\" }}\r\n        onClick={() => {\r\n          stateUpdate({\r\n            editArticle: false,\r\n          });\r\n        }}\r\n      >\r\n        Close\r\n      </button>\r\n    </div>\r\n    <hr />\r\n    <div className=\"d-flex gap-2\" style={{ minHeight: \"300px\" }}>\r\n      <div className=\"w-50\">\r\n        <Widget\r\n          src=\"mob.near/widget/MarkdownEditorIframe\"\r\n          props={{\r\n            initialText: state.textAreaText,\r\n            onChange: (textAreaText) => State.update({ textAreaText }),\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"w-50\">\r\n        <Widget\r\n          src=\"mob.near/widget/TagsEditor\"\r\n          props={{\r\n            initialTagsObject: getTagObjectfromArray(articleTags),\r\n            placeholder: \"Input tags\",\r\n            setTagsObject: (tags) => {\r\n              // console.log(filterTagsFromNull(tags));\r\n              // Next line is from parent widget. Not sure what it was used for.\r\n              // state.tags = filterTagsFromNull(tags);\r\n              State.update({ tags });\r\n            },\r\n          }}\r\n        />\r\n\r\n        <Widget\r\n          src=\"mob.near/widget/SocialMarkdown\"\r\n          props={{\r\n            text: state.textAreaText,\r\n            onHashtag: (hashtag) => (\r\n              <span\r\n                key={hashtag}\r\n                className=\"d-inline-flex\"\r\n                style={{ fontWeight: 500 }}\r\n              >\r\n                <a\r\n                  href={\r\n                    isDebug\r\n                      ? `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}&isDebug=true`\r\n                      : `https://near.social/#/${authorForWidget}/widget/SayALot_ArticlesByTag?tag=${hashtag}`\r\n                  }\r\n                >\r\n                  #{hashtag}\r\n                </a>\r\n              </span>\r\n            ),\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/SayALot_FasterArticleEditInputs", "fact_widget_deployments_id": "cf7499e8335144309eaa141256d10010", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 2}