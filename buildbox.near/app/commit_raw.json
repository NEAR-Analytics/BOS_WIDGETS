{"tx_hash": "F8t7qUCtsujthEkReWXR7uvach1eJajqN2iuB8dnjc8j", "action_id_social": "BgBMs83dnyJ9QDDkLHB6UHshq25kPxTeBq9F9uqKvKBu-0-widget", "block_id": 111210799, "block_timestamp": "2024-01-24T15:31:30.171Z", "signer_id": "buildbox.near", "widget_name": "app", "source_code": "const { page, layout, loading, ...passProps } = props;\n\nconst { routes, theme } = VM.require(\"buildbox.near/widget/config\") ?? {\n  routes: {},\n};\n\nconst { AppLayout } = VM.require(\"buildbox.near/widget/layout\") || {\n  AppLayout: () => <>Layout loading...</>,\n};\n\nif (!page) page = Object.keys(routes)[0] || \"home\";\n\nconst Root = styled.div`\n  a {\n    color: inherit;\n  }\n`;\n\nconst [activeRoute, setActiveRoute] = useState(page);\n\nuseEffect(() => {\n  setActiveRoute(page);\n}, [page]);\n\nfunction Router({ active, routes }) {\n  // this may be converted to a module at devs.near/widget/Router\n  const routeParts = active.split(\".\");\n\n  let currentRoute = routes;\n  let src = \"\";\n  let defaultProps = {};\n\n  for (let part of routeParts) {\n    if (currentRoute[part]) {\n      currentRoute = currentRoute[part];\n      src = currentRoute.path;\n\n      if (currentRoute.init) {\n        defaultProps = { ...defaultProps, ...currentRoute.init };\n      }\n    } else {\n      // Handle 404 or default case for unknown routes\n      return <p>404 Not Found</p>;\n    }\n  }\n\n  return (\n    <div key={active}>\n      <Widget\n        src={src}\n        props={{ ...passProps, ...defaultProps, path: src }}\n      />\n    </div>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  height: 100vh;\n`;\n\nconst Content = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n`;\n\nreturn (\n  <Root>\n    <Container>\n      <AppLayout active={activeRoute} routes={routes}>\n        <Content>\n          <Router active={activeRoute} routes={routes} />\n        </Content>\n      </AppLayout>\n    </Container>\n  </Root>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildbox.near/widget/app", "fact_widget_deployments_id": "e23d669b88af82a3795bd4b153769aa3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 125}