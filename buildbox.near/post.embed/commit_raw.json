{"tx_hash": "F8t7qUCtsujthEkReWXR7uvach1eJajqN2iuB8dnjc8j", "action_id_social": "BgBMs83dnyJ9QDDkLHB6UHshq25kPxTeBq9F9uqKvKBu-0-widget", "block_id": 111210799, "block_timestamp": "2024-01-24T15:31:30.171Z", "signer_id": "buildbox.near", "widget_name": "post.embed", "source_code": "// will need to create the post embedding\n\n// This widget is used for embedding whitelisted set of widgets into a post body.\n\nconst EmbedMap = new Map([\n  [\n    \"mob.near/widget/MainPage.N.Post.Page\",\n    \"mob.near/widget/MainPage.N.Post.Embed\",\n  ],\n  [\n    \"mob.near/widget/MainPage.N.Post.Embed\",\n    \"mob.near/widget/MainPage.N.Post.Embed\",\n  ],\n]);\n\nconst href = props.href;\n\nconst parseUrl = (url) => {\n  if (typeof url !== \"string\") {\n    return null;\n  }\n  if (url.startsWith(\"/\")) {\n    url = `https://near.social${url}`;\n  }\n  try {\n    return new URL(url);\n  } catch {\n    return null;\n  }\n};\n\nconst parsed = useMemo(() => {\n  const url = parseUrl(href);\n  if (!url) {\n    return null;\n  }\n  return {\n    widgetSrc: url.pathname.substring(1),\n    props: Object.fromEntries([...url.searchParams.entries()]),\n  };\n}, [href]);\n\nif (!parsed || !EmbedMap.has(parsed.widgetSrc)) {\n  return <a href={href}>{props.children}</a>;\n}\n\nconst widgetSrc = EmbedMap.get(parsed.widgetSrc);\n\nconst Wrapper = styled.div`\n  border-radius: 1rem;\n  width: 100%;\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  white-space: normal;\n  margin-top: 12px;\n`;\n\nreturn (\n  <Wrapper>\n    <Widget loading=\"\" src={widgetSrc} props={parsed.props} />\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/buildbox.near/widget/post.embed", "fact_widget_deployments_id": "b2c6c677043e8e6082df9f3c9ba2a01e", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 2}