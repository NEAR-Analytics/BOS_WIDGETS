{"tx_hash": "FhQ6Fqa9uVLjGtmy3ckQ4d6k8wiC8kCvVW8MN8MVLcqN", "action_id_social": "Em4NZqvPW3f76SPCkHbkkZZBSBYrpE8FfFQyAQZvSrjK-0-widget", "block_id": 101408611, "block_timestamp": "2023-09-18T15:03:46.184Z", "signer_id": "nearhorizon.near", "widget_name": "Project.Page", "source_code": "const ownerId = \"nearhorizon.near\";\nconst accountId = props.accountId ?? context.accountId;\n\nState.init({\n  isAdmin: false,\n  isAdminIsFetched: false,\n  project: null,\n  projectIsFetched: false,\n});\n\nif (!state.isAdminIsFetched) {\n  if (!context.accountId) {\n    State.update({ isAdmin: false, isAdminIsFetched: true });\n  } else {\n    Near.asyncView(\n      ownerId,\n      \"check_is_project_admin\",\n      { project_id: accountId, account_id: context.accountId },\n      \"final\",\n      false,\n    ).then((isAdmin) => State.update({ isAdmin, isAdminIsFetched: true }));\n  }\n}\n\nif (!state.projectIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project\",\n    { account_id: accountId },\n    \"final\",\n    false,\n  ).then((project) => State.update({ project, projectIsFetched: true }));\n}\n\nif (!state.projectIsFetched || !state.isAdminIsFetched) {\n  return <>Loading...</>;\n}\n\nconst availableContent = [\"overview\", \"details\", \"requests\", \"history\"];\n\nconst getContent = (content) => {\n  if (!content || !availableContent.includes(content)) {\n    return \"overview\";\n  }\n\n  return content;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n\n  @media screen and (max-width: 1100px) {\n    flex-direction: column;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst HeaderDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 80%;\n`;\n\nconst HeaderProgress = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  width: 20%;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 100%;\n\n  @media screen and (max-width: 1100px) {\n    width: 100%;\n  }\n`;\n\nconst Sidebar = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 30%;\n\n  @media screen and (max-width: 1100px) {\n    width: 100%;\n  }\n`;\n\nconst circledPlus = (\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_1624_38049)\">\n      <path\n        d=\"M9 6V12M6 9H12M16.5 9C16.5 13.1421 13.1421 16.5 9 16.5C4.85786 16.5 1.5 13.1421 1.5 9C1.5 4.85786 4.85786 1.5 9 1.5C13.1421 1.5 16.5 4.85786 16.5 9Z\"\n        stroke=\"currentColor\"\n        stroke-width=\"1.66667\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_1624_38049\">\n        <rect width=\"18\" height=\"18\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nconst plus = (\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M9 3.75V14.25M3.75 9H14.25\"\n      stroke=\"#006ADC\"\n      stroke-width=\"1.66667\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\n\nconst CTARow = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.75em;\n  margin-top: 1em;\n`;\n\nconst contentWidget = {\n  overview: \"About\",\n  details: \"Details\",\n  requests: \"Requests\",\n  history: \"History\",\n}[getContent(props.content)];\n\nconst content = (\n  <Widget\n    src={`${ownerId}/widget/Project.${contentWidget}`}\n    props={{ accountId: props.accountId, isAdmin: state.isAdmin }}\n  />\n);\n\nconst GreyButton = styled.a`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0.75em 1em;\n  gap: 0.5em;\n  background: #fafafa;\n  border: 1px solid #eceef0;\n  border-radius: 50px;\n  color: #006adc;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  text-align: center;\n  white-space: nowrap;\n`;\n\nreturn (\n  <Container>\n    <ContentContainer>\n      <Header>\n        <HeaderDetails>\n          <Widget\n            src={`${ownerId}/widget/Project.HeaderDetails`}\n            props={{ accountId, isAdmin: state.isAdmin }}\n          />\n          <CTARow>\n            {state.isAdmin ? (\n              <>\n                <GreyButton\n                  href={`/${ownerId}/widget/Index?tab=createrequest&accountId=${accountId}`}\n                >\n                  {plus}Create request\n                </GreyButton>\n                <GreyButton href={`/${ownerId}/widget/Index?tab=partners`}>\n                  <svg\n                    width=\"18\"\n                    height=\"18\"\n                    viewBox=\"0 0 18 18\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M9 11.2502L6.75 9.00019M9 11.2502C10.0476 10.8517 11.0527 10.3492 12 9.75019M9 11.2502V15.0002C9 15.0002 11.2725 14.5877 12 13.5002C12.81 12.2852 12 9.75019 12 9.75019M6.75 9.00019C7.14911 7.96476 7.65165 6.97223 8.25 6.03769C9.12389 4.64043 10.3407 3.48997 11.7848 2.69575C13.2288 1.90154 14.852 1.48996 16.5 1.50019C16.5 3.54019 15.915 7.12519 12 9.75019M6.75 9.00019H3C3 9.00019 3.4125 6.72769 4.5 6.00019C5.715 5.19019 8.25 6.00019 8.25 6.00019M3.375 12.3752C2.25 13.3202 1.875 16.1252 1.875 16.1252C1.875 16.1252 4.68 15.7502 5.625 14.6252C6.1575 13.9952 6.15 13.0277 5.5575 12.4427C5.26598 12.1644 4.88197 12.0037 4.47917 11.9912C4.07637 11.9787 3.68316 12.1155 3.375 12.3752Z\"\n                      stroke=\"#006ADC\"\n                      stroke-width=\"1.66667\"\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                    />\n                  </svg>\n                  Apply to accelerator\n                </GreyButton>\n              </>\n            ) : (\n              <Widget\n                src={`${ownerId}/widget/Project.ProposeSideWindow`}\n                props={{ accountId }}\n              />\n            )}\n          </CTARow>\n        </HeaderDetails>\n        {/* <HeaderProgress> */}\n        {/*   <Widget */}\n        {/*     src={`${ownerId}/widget/Project.Progress`} */}\n        {/*     props={{ accountId }} */}\n        {/*   /> */}\n        {/* </HeaderProgress> */}\n      </Header>\n      <Widget\n        src={`${ownerId}/widget/TabSelector`}\n        props={{\n          tab: \"project\",\n          content: getContent(props.content),\n          search: props.search,\n          update: props.update,\n          accountId: props.accountId,\n          buttons: [\n            {\n              id: \"overview\",\n              text: \"Overview\",\n            },\n            {\n              id: \"details\",\n              text: \"Details\",\n            },\n            {\n              id: \"requests\",\n              text: \"Requests\",\n            },\n            {\n              id: \"history\",\n              text: \"Work history\",\n            },\n          ],\n        }}\n      />\n      {content}\n    </ContentContainer>\n    {/* <Sidebar> */}\n    {/*   <Widget */}\n    {/*     src={`${ownerId}/widget/Project.Sidebar`} */}\n    {/*     props={{ */}\n    {/*       accountId, */}\n    {/*       isAdmin: state.isAdmin, */}\n    {/*     }} */}\n    {/*   /> */}\n    {/* </Sidebar> */}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Project.Page", "fact_widget_deployments_id": "b6b709b94f5df027cba9cc70e49d0dc4", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}