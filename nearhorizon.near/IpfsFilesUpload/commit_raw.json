{"tx_hash": "yBxajtT28CbGzaP6qeD5vAZtbhcTCobciM45ncjCYZt", "action_id_social": "CQRCNUWCy9isw5QmsKwqm2xkLNYcFWzGNkt3KfjkmDGj-0-widget", "block_id": 90464921, "block_timestamp": "2023-04-26T09:40:00.872Z", "signer_id": "nearhorizon.near", "widget_name": "IpfsFilesUpload", "source_code": "const fileAccept = props.fileAccept || \"*\";\nconst fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\n\n// if (!props.update) return \"Update function is required\";\n\nState.init({\n  uploading: false,\n  cid: null,\n  filename: null,\n});\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nreturn (\n  <div>\n    {state.cid ? (\n      <a href={ipfsUrl(state.cid)} download>\n        {state.filename}\n      </a>\n    ) : (\n      <></>\n    )}\n    <Files\n      multiple={false}\n      accepts={[\"image/*\", \"video/*\", \".pdf\"]}\n      minFileSize={1}\n      clickable\n      className=\"btn btn-outline-primary\"\n      onChange={(files) => {\n        if (!files || !files.length) return;\n\n        const [body] = files;\n\n        State.update({ uploading: true, cid: null });\n        asyncFetch(\"https://ipfs.near.social/add\", {\n          method: \"POST\",\n          headers: { Accept: \"application/json\" },\n          body,\n        }).then(({ body: { cid } }) => {\n          State.update({ cid, filename: body.name, uploading: false });\n          // props.update(cid);\n        });\n      }}\n    >\n      {state.uploading ? \"Uploading\" : state.cid ? \"Replace\" : buttonText}\n    </Files>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/IpfsFilesUpload", "fact_widget_deployments_id": "fe8ccfdefb80d1b06f6e8c73abf90cf8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 1}