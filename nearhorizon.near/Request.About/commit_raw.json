{"tx_hash": "FhQ6Fqa9uVLjGtmy3ckQ4d6k8wiC8kCvVW8MN8MVLcqN", "action_id_social": "Em4NZqvPW3f76SPCkHbkkZZBSBYrpE8FfFQyAQZvSrjK-0-widget", "block_id": 101408611, "block_timestamp": "2023-09-18T15:03:46.184Z", "signer_id": "nearhorizon.near", "widget_name": "Request.About", "source_code": "const ownerId = \"nearhorizon.near\";\nconst apiUrl = \"https://api-op3o.onrender.com\";\nconst accountId = props.accountId;\nconst cid = props.cid;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  padding: 0.5em 0.2em;\n  width: 100%;\n`;\n\nState.init({\n  request: null,\n  requestIsFetched: false,\n});\n\nconst getDate = (timestamp) => {\n  const timestampString = `${timestamp}`;\n  return new Date(\n    Number(timestampString.substring(0, 13)),\n  ).toLocaleDateString();\n};\n\nif (!state.requestIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_request\",\n    { account_id: accountId, cid },\n    \"final\",\n    false,\n  ).then((request) => State.update({ request, requestIsFetched: true }));\n  asyncFetch(`${apiUrl}/transactions/all`).then(({ body: txs }) => {\n    const tx = txs.find((tx) => {\n      const start = \"EVENT_JSON:\";\n      const logData = JSON.parse(tx.log.substring(start.length)).data;\n      return (\n        logData.cid === cid &&\n        tx.method_name === \"add_request\" &&\n        tx.args.request.project_id === accountId\n      );\n    });\n    State.update({\n      created_at: tx.timestamp,\n    });\n  });\n}\n\nif (!state.requestIsFetched) {\n  return <>Loading...</>;\n}\n\nconst Label = styled.label`\n  color: var(--ui-elements-dark, #11181c);\n  font-family: \"Mona Sans\";\n  font-size: 0.875rem;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 142%; /* 1.2425rem */\n`;\n\nconst Detail = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.375em;\n  width: 33%;\n`;\n\nconst Details = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: flex-start;\n  align-content: flex-start;\n  gap: 1rem;\n  flex-wrap: wrap;\n`;\n\nconst MarkdownText = styled.div`\n  font-size: 0.9em;\n  line-height: 1.25em;\n\n  p {\n    color: #101828;\n    font-weight: 400;\n    margin-bottom: 1em;\n  }\n`;\n\nconst details = [\n  {\n    label: \"Request Type\",\n    value: state.request.request_type,\n  },\n  {\n    label: \"Payment Type\",\n    value: state.request.payment_type,\n  },\n  {\n    label: \"Payment Source\",\n    value: state.request.source,\n  },\n  {\n    label: \"Budget\",\n    value: state.request.budget,\n  },\n  {\n    label: \"Deadline\",\n    value: getDate(state.request.deadline),\n  },\n  {\n    label: \"Created at\",\n    value: getDate(state.created_at),\n  },\n];\n\nreturn (\n  <Container>\n    <Details>\n      {details.map(({ label, value }) => (\n        <Detail key={label}>\n          <Label>{label}</Label>\n          <div>{value}</div>\n        </Detail>\n      ))}\n    </Details>\n    <MarkdownText>\n      <Markdown text={state.request.description} />\n    </MarkdownText>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Request.About", "fact_widget_deployments_id": "9742daf750509e3a6c7e733a21061d12", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 10}