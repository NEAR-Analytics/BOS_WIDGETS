{"tx_hash": "BnMe98RuHnRXAkEqbTtBV6XurRWL9c4gEYjMWkQkLwyD", "action_id_social": "4y1PJT5TYPotsjTDb2UeKP4TNn3UmZnGy6cELSDdir57-0-widget", "block_id": 91293688, "block_timestamp": "2023-05-07T09:16:29.162Z", "signer_id": "nearhorizon.near", "widget_name": "Project.People", "source_code": "const ownerId = \"nearhorizon.near\";\nconst accountId = props.accountId ?? context.accountId;\n\nState.init({\n  founders: null,\n  foundersIsFetched: false,\n  team: null,\n  teamIsFetched: false,\n});\n\nif (!state.foundersIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_founders\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((founders) => State.update({ founders, foundersIsFetched: true }));\n}\n\nif (!state.teamIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_team\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((team) => State.update({ team, teamIsFetched: true }));\n}\n\nif (!state.foundersIsFetched || !state.teamIsFetched) {\n  return <>Loading...</>;\n}\n\nif (!state.namesIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    {\n      keys: [...state.founders, ...Object.keys(state.team)].map(\n        (key) => `${key}/profile/name`\n      ),\n    },\n    \"final\",\n    false\n  ).then((names) => {\n    State.update({\n      names: new Map(\n        Object.keys(names).map((account) => [\n          account,\n          names[account].profile.name,\n        ])\n      ),\n      namesIsFetched: true,\n    });\n  });\n}\n\nif (!state.namesIsFetched) {\n  return <>Loading...</>;\n}\n\nconst List = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 1em;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  width: 100%;\n`;\n\nconst Item = styled.li`\n  display: flex;\n  flex-direction: row;\n  gap: 1em;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  padding: 1.5em 0px;\n  border-bottom: 1px solid #eaecf0;\n`;\n\nconst Heading = styled.h3`\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1.125em;\n  line-height: 1.5em;\n  margin-top: 1em;\n\n  color: #000000;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n`;\n\nreturn (\n  <Container>\n    <Heading>Founders</Heading>\n    <List>\n      {state.founders.map((founder) => (\n        <Item>\n          <Widget\n            src={`${ownerId}/widget/Vendor.Icon`}\n            props={{ accountId: founder, size: \"2em\" }}\n          />\n          <Widget\n            src={`${ownerId}/widget/NameAndAccount`}\n            props={{\n              accountId: founder,\n              name: state.names.get(founder),\n              nameSize: \".9em\",\n            }}\n          />\n        </Item>\n      ))}\n    </List>\n    <Heading>Team</Heading>\n    {props.isAdmin ? (\n      <Widget\n        src={`${ownerId}/widget/Inputs.Team`}\n        props={{\n          team: state.team,\n          update: (team) => State.update({ team }),\n          onSave: (team) =>\n            Near.call(ownerId, \"add_team\", { account_id: accountId, team }),\n        }}\n      />\n    ) : (\n      <List>\n        {Object.keys(state.team).map((member) => (\n          <Item>\n            <Widget\n              src={`${ownerId}/widget/Vendor.Icon`}\n              props={{ accountId: member, size: \"2em\" }}\n            />\n            <Widget\n              src={`${ownerId}/widget/NameAndAccount`}\n              props={{\n                accountId: member,\n                name: state.names.get(member),\n                nameSize: \".9em\",\n              }}\n            />\n          </Item>\n        ))}\n      </List>\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Project.People", "fact_widget_deployments_id": "7798350be34bdd7c2e9f68202a296764", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 10}