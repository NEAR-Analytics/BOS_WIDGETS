{"tx_hash": "8ShsDCzpHEsrunz7dmeXsr4pSVct4JMmNTNowhuwTQtS", "action_id_social": "ENAMe6SWNvZJpMehMhDfG9VbhK5saCvPmhpy6R21QzwY-0-widget", "block_id": 90465249, "block_timestamp": "2023-04-26T09:46:27.824Z", "signer_id": "nearhorizon.near", "widget_name": "Contribution.Line", "source_code": "const ownerId = \"nearhorizon.near\";\nconst projectId = props.projectId;\nconst vendorId = props.vendorId;\nconst cid = props.cid;\nconst size = props.size ?? \"1em\";\n\nState.init({\n  request: null,\n  requestIsFetched: false,\n  contribution: null,\n  contributionIsFetched: false,\n});\n\nif (!state.requestIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_request\",\n    { account_id: projectId, cid },\n    \"final\",\n    false\n  ).then((request) => State.update({ request, requestIsFetched: true }));\n}\n\nif (!state.contributionIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_contribution\",\n    { project_id: projectId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((contribution) =>\n    State.update({ contribution, contributionIsFetched: true })\n  );\n}\n\nif (!state.requestIsFetched || !state.contributionIsFetched) {\n  return <>Loading...</>;\n}\n\nconst Container = styled.div`\n  width: 100%;\n  color: #101828;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 16px 24px;\n  gap: 8px;\n  background: #fafafa;\n  border-bottom: 1px solid #eceef0;\n  border-radius: 8px;\n`;\n\nconst Title = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  color: #101828;\n`;\n\nconst Details = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.5em 0px 0px;\n  gap: 1.5em;\n  flex: none;\n  order: 4;\n  align-self: stretch;\n  flex-grow: 0;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0px;\n  gap: 0.4em;\n  flex: none;\n  order: 1;\n  flex-grow: 0;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #11181c;\n`;\n\nconst lastAction =\n  state.contribution.actions.length > 0\n    ? state.contribution.actions[state.contribution.actions.length - 1]\n    : null;\n\nconst lastActivity = (\n  <Item>\n    Last activity:\n    <br />\n    {lastAction ? (\n      <>\n        {lastAction.description} at{\" \"}\n        {new Date(Number(lastAction.start_date)).toLocaleDateString()}\n      </>\n    ) : (\n      <>Contract has started</>\n    )}\n  </Item>\n);\n\nconst Label = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1.25em;\n  color: #344054;\n`;\n\nreturn (\n  <Container>\n    <Label>Project</Label>\n    <Widget\n      src={`${ownerId}/widget/Project.Line`}\n      props={{ accountId: projectId, size: \"1.5em\" }}\n    />\n    <Label>Vendor</Label>\n    <Widget\n      src={`${ownerId}/widget/Vendor.Line`}\n      props={{ accountId: vendorId, size: \"1.5em\" }}\n    />\n    <Title>{state.request.title}</Title>\n    <Details>{lastActivity}</Details>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Contribution.Line", "fact_widget_deployments_id": "38256a95a4494a905edc282017c8508f", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 8}