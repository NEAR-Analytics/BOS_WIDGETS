{"tx_hash": "b8hoLcsubgCbPz3bDTdnZaygYGzCcxR7e457YDeezA6", "action_id_social": "EFNentavbsrUyMYCo4JVc9CCYASSZuyVW9ANR5MuAvBm-0-widget", "block_id": 100512392, "block_timestamp": "2023-09-06T10:31:30.718Z", "signer_id": "nearhorizon.near", "widget_name": "Project.About", "source_code": "const ownerId = \"nearhorizon.near\";\nconst accountId = props.accountId;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  padding: 0.5em 0.2em;\n  width: 100%;\n`;\n\nconst Separator = styled(\"Separator.Root\")`\n  width: 100%;\n  height: 1px;\n  background-color: #eaeaea;\n`;\n\nconst Details = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n  width: 100%;\n  gap: 1rem;\n\n  @media screen and (max-width: 768px) {\n    grid-template-columns: repeat(1, minmax(0, 1fr));\n  }\n\n  @media screen and (min-width: 768px) and (max-width: 1024px) {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n`;\n\nState.init({\n  project: null,\n  projectIsFetched: false,\n  profile: \"\",\n  profileIsFetched: false,\n  requests: null,\n  requestsIsFetched: false,\n  contracts: null,\n  contractsIsFetched: false,\n});\n\nif (!state.projectIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((project) => State.update({ project, projectIsFetched: true }));\n}\n\nif (!state.profileIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${accountId}/profile/**`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      profile: data[accountId].profile,\n      profileIsFetched: true,\n    })\n  );\n}\n\nif (!state.requestsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project_requests\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((requests) => State.update({ requests, requestsIsFetched: true }));\n}\n\nif (!state.contractsIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project_contributions\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((contracts) => State.update({ contracts, contractsIsFetched: true }));\n}\n\nif (!state.projectIsFetched || !state.profileIsFetched) {\n  return <>Loading...</>;\n}\n\nconst onSave = (project) => {\n  Near.call(ownerId, \"edit_project\", {\n    account_id: accountId,\n    project,\n  });\n};\n\nconst onPrivateSave = (project) => {\n  // TODO: Call encryption service to encrypt the project data\n  onSave(project);\n};\n\nconst onSocialSave = (data) => {\n  Social.set(data, {\n    onCommit: () =>\n      State.update({ profile: { ...state.profile, ...data.profile } }),\n  });\n};\n\nconst Heading = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px;\n  gap: 16px;\n  width: 100%;\n\n  & div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding: 0px;\n    gap: 16px;\n\n    & > h2 {\n      font-family: \"FK Grotesk\";\n      font-style: normal;\n      font-weight: 700;\n      font-size: 25px;\n      line-height: 36px;\n      color: #11181c;\n    }\n\n    & > span {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 19px;\n      line-height: 23px;\n      color: #7e868c;\n    }\n  }\n\n  & > a {\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 8px 14px;\n    gap: 8px;\n    background: #fafafa;\n    border: 1px solid #eceef0;\n    border-radius: 50px;\n\n    font-family: \"Inter\";\n    font-style: normal;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 15px;\n    text-align: center;\n    color: #101828;\n\n    &:hover,\n    &:focus {\n      font-family: \"Inter\";\n      font-style: normal;\n      font-weight: 600;\n      font-size: 12px;\n      line-height: 15px;\n      text-align: center;\n      color: #101828;\n    }\n  }\n`;\n\nreturn (\n  <Container>\n    <Heading>\n      <div>\n        <h2>About</h2>\n      </div>\n      <Link\n        href={`/${ownerId}/widget/Index?tab=project&accountId=${accountId}&content=details`}\n      >\n        View all details\n      </Link>\n    </Heading>\n    <Markdown text={state.profile.description} />\n    <Details>\n      <Widget\n        src={`${ownerId}/widget/Inputs.Viewable.Number`}\n        props={{\n          label: \"Company size\",\n          id: \"size\",\n          value: state.profile.team,\n          onSave: (team) => onSave({ profile: { team: `${team}` } }),\n          canEdit: isAdmin,\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Viewable.Links`}\n        props={{\n          label: \"Links\",\n          id: \"links\",\n          value: state.profile.linktree ?? {},\n          onSave: (linktree) => onSave({ profile: { linktree } }),\n          canEdit: isAdmin,\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Viewable.Text`}\n        props={{\n          label: \"Location\",\n          id: \"location\",\n          value: state.project.geo,\n          onSave: (geo) => horizonOnSave({ geo }),\n          canEdit: isAdmin,\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Viewable.Text`}\n        props={{\n          label: \"Website\",\n          id: \"website\",\n          value: state.profile.linktree?.website ?? state.profile.website ?? \"\",\n          link: `https://${\n            state.profile.linktree.website ?? state.profile.website\n          }`,\n          onSave: (website) => onSave({ profile: { linktree: { website } } }),\n          canEdit: isAdmin,\n        }}\n      />\n    </Details>\n\n    <Separator />\n\n    <Widget\n      src={`${ownerId}/widget/Home.ListSection`}\n      props={{\n        title: \"Requests\",\n        count: state.requests.length,\n        link: `/${ownerId}/widget/Index?tab=project&accountId=${accountId}&content=requests`,\n        linkText: \"See all requests\",\n        items: state.requests,\n        renderItem: (item) => (\n          <Widget\n            src={`${ownerId}/widget/Request.Card`}\n            props={{\n              accountId: item[0],\n              cid: item[1],\n            }}\n          />\n        ),\n      }}\n    />\n\n    <Separator />\n\n    <Widget\n      src={`${ownerId}/widget/Home.ListSection`}\n      props={{\n        title: \"Work history\",\n        count: state.contracts.length,\n        link: `/${ownerId}/widget/Index?tab=project&accountId=${accountId}&content=history`,\n        linkText: \"See full history\",\n        items: state.contracts,\n        renderItem: (item) => (\n          <Widget\n            src={`${ownerId}/widget/Contribution.Card`}\n            props={{\n              accountId: item[0][0],\n              cid: item[0][1],\n              vendorId: item[1],\n            }}\n          />\n        ),\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Project.About", "fact_widget_deployments_id": "c188488707375e89751183226bf54176", "inserted_timestamp": "2023-09-06T12:32:37.594Z", "modified_timestamp": "2023-09-06T12:32:37.594Z", "__row_index": 0}