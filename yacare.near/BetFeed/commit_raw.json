{"tx_hash": "BWSQFaE4gv56kPKo7tgH16D5nxkKFBLyRQhJyR2LRUiF", "action_id_social": "C5RFdFBMRd4cC7pJn1DGoQWGhA1BMM8sHiTSxVy7mccs-0-widget", "block_id": 106939829, "block_timestamp": "2023-12-01T16:45:41.415Z", "signer_id": "yacare.near", "widget_name": "BetFeed", "source_code": "const simpleBetAccountId = \"simplebet.near\";\nconst defaultValue = \"1\";\n\nfunction getEvents() {\n  return Near.view(simpleBetAccountId, \"events\");\n}\n\nfunction toNear(yoctoNear) {\n  if (yoctoNear.length < 25) {\n    yoctoNear = \"0\".repeat(25 - yoctoNear.length) + yoctoNear;\n  }\n  let len = yoctoNear.length;\n  let big = yoctoNear.slice(0, len - 24);\n  let small = yoctoNear.slice(len - 24, len - 24 + 5);\n  return big + \".\" + small;\n}\n\nfunction getCurrentTimestamp() {\n  return Date.now();\n}\n\nfunction humanizeDelta(when) {\n  let current = Date.now();\n\n  let delta = current / 1000 - when / 1000000000;\n\n  if (delta < 60) {\n    return `${Math.round(delta)} seconds ago`;\n  }\n\n  delta /= 60;\n\n  if (delta < 60) {\n    return `${Math.round(delta)} minutes ago`;\n  }\n\n  delta /= 60;\n\n  if (delta < 24) {\n    return `${Math.round(delta)} hours ago`;\n  }\n\n  delta /= 24;\n\n  return `${Math.round(delta)} days ago`;\n}\n\nlet events = getEvents();\nevents = events.reverse();\n\nconst Wrapper = styled.div`\n  margin: 0 -12px;\n  line-height: normal;\n  \n  .post {\n    position: relative;\n    padding: 12px;\n    padding-bottom: 4px;\n    display: flex;\n    h1, h2, h3, h4, h5, h6 {\n      font-size: 16px !important;\n    }\n    @media(max-width: 767px) {\n      font-size: 15px !important;\n      h1, h2, h3, h4, h5, h6 {\n        font-size: 15px !important;\n      }\n    }\n\n    h1, h2, h3, h4, h5, h6, strong, b {\n      font-weight: 500 !important;\n    }\n    ol, ul, dl {\n      margin-bottom: 0.5rem;\n      white-space: inherit;\n    }\n    p {\n      margin-bottom: 0.5rem;\n    }\n    hr {\n      display: none;\n    }\n    img {\n      border-radius: var(--bs-border-radius-lg);\n      max-height: 40em;\n    }\n    th {\n      min-width: 5em;\n    }\n\n    .table>:not(caption)>*>* {\n      padding: .3rem;\n    }\n\n    &:hover {\n      background-color: rgba(0, 0, 0, 0.03);\n      .expand-post {\n        background-image : linear-gradient(to bottom, \n                      rgba(0,0,0, 0), \n                      rgba(247.35,247.35,247.35, 1) 25%);\n      }\n    }\n\n    .post-header {\n      margin: 4px 0;\n    }\n  }\n\n  .post:not(:last-child):before {\n    content: \"\";\n    position: absolute;\n    left: 30px;\n    top: 56px;\n    bottom: 0;\n    width: 2px;\n    background-color: #ddd;\n    z-index: -1;\n  }\n\n  .post:not(:first-child):after {\n    content: \"\";\n    position: absolute;\n    left: 30px;\n    top: 0;\n    width: 2px;\n    height: 8px;\n    background-color: #ddd;\n    z-index: -1;\n  }\n  \n  .left {\n    margin-right: 12px;\n    min-width: 40px;\n    width: 40px;\n    overflow: hidden;\n  }\n  .right {\n    margin-top: -4px;\n    flex-grow: 1;\n    min-width: 0;\n  }\n\n  .buttons-placeholder {\n    padding-bottom: 10px;\n  }\n\n  .buttons {\n    margin-top: 10px;\n    margin-bottom: 6px;\n    column-gap: 4px;\n    color: #888;\n  }\n\n  .reposted {\n    padding-top: 30px;\n  }\n`;\n\nfunction styledResult(result, amount) {\n  if (result === \"Lose\") {\n    return `\ud83d\udcb8 Lost ${amount} \u24c3`;\n  } else {\n    return `\ud83e\udd11 Won ${amount} \u24c3`;\n  }\n}\n\nfunction color(result) {\n  if (result === \"Lose\") {\n    return \"red\";\n  } else {\n    return \"green\";\n  }\n}\n\nreturn (\n  <>\n    {events.map(({ bettor, result, bet, timestamp }) => (\n      <Wrapper\n        style={\n          props.hideComments || props.noBorder\n            ? undefined\n            : {\n                borderBottom: \"1px solid #eee\",\n              }\n        }\n      >\n        <div className={`post ${props.reposted ? \"reposted\" : \"\"}`}>\n          <div className=\"left\">\n            <Widget\n              loading=\"\"\n              src=\"mob.near/widget/MainPage.N.Post.Left\"\n              props={{ accountId: bettor }}\n            />\n          </div>\n          <div className=\"right\">\n            <Widget\n              loading={<div className=\"post-header\" />}\n              src=\"yacare.near/widget/MainPage.N.Post.Header\"\n              props={{\n                link: \"#\",\n                accountId: bettor,\n                hideMenu: true,\n                timeMs: timestamp / 1000000,\n              }}\n            />\n            <p style={{ color: color(result) }}>\n              <strong>{styledResult(result, toNear(bet))}</strong>\n            </p>\n          </div>\n        </div>\n      </Wrapper>\n    ))}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/yacare.near/widget/BetFeed", "fact_widget_deployments_id": "af6e8db464f49ee8fb08ab77fd97c4f3", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}