{"tx_hash": "FBQKe2zrbsnHAL1qQTNzn4yYo2frHy3LdeoMdJ8LHRm5", "action_id_social": "CyAwcLG1vRR8jhmbAfg7pVWy3LJFcgVFuBeacmFnjHjV-0-widget", "block_id": 117389953, "block_timestamp": "2024-04-22T15:27:45.347Z", "signer_id": "video.every.near", "widget_name": "view", "source_code": "const { HeroBanner } = VM.require(\n  \"video.every.near/widget/Components.hero-banner\"\n) || {\n  HeroBanner: () => <></>,\n};\nconst { BrowseTabs } = VM.require(\n  \"video.every.near/widget/Components.browse-tabs\"\n) || {\n  BrowseTabs: () => <></>,\n};\nconst { Feed } = VM.require(\"devs.near/widget/Feed\") || {\n  Feed: () => <></>,\n};\nconst path = props.path;\nconst blockHeight = props.blockHeight;\nconst accountId = path.split(\"/\")[0];\nconst item = {\n  path,\n  type: \"every.near/type/video\",\n};\nconst ModalBox = styled.div`\n  background-color: white;\n  min-width: 400px;\n  max-width: 600px;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n  z-index: 1003;\n`;\nconst VideoTitle = styled.h3`\n  margin: 0;\n  padding: 0;\n  font-size: 1.2em;\n`;\nconst VideoDescription = styled.p`\n  font-size: 0.9em;\n  color: #666;\n`;\nconst VideoInfo = styled.div`\n  display: flex;\n  gap: 1rem;\n  font-size: 0.8em;\n  color: #888;\n`;\nconst VideoThumbnail = styled.img`\n  width: 100%;\n  height: auto;\n  border-radius: 4px;\n  margin-bottom: 12px;\n`;\nfunction handleExpandVideo() {\n  console.log(\"hey\");\n  if (props.handleExpandVideo) {\n    props.handleExpandVideo(path, blockHeight);\n  }\n}\nconst videoThing = Social.getr(path, blockHeight);\nif (!videoThing) return <p>Loading...</p>;\nconst data = JSON.parse(videoThing[\"\"] || \"null\");\nconst Button = styled.button``;\nconst { href } = VM.require(\"buildhub.near/widget/lib.url\") || {\n  href: () => {},\n};\nconst ViewContainer = styled.div`\n  padding: 32px 40px;\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  @media (max-width: 768px) {\n    padding: 1.5rem;\n  }\n`;\nconst tabs = [\n  { label: \"All\" },\n  { label: \"Near\" },\n  { label: \"Everything\" },\n  { label: \"Build\" },\n  { label: \"User interface design\" },\n  { label: \"Music\" },\n  { label: \"Live\" },\n];\nconst GridContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(12, minmax(0, 1fr));\n  gap: 2rem;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n  }\n`;\nconst Content = styled.div`\n  grid-column: span 9 / span 9;\n`;\nconst SideContent = styled.div`\n  grid-column: span 3 / span 3;\n`;\nconst List = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\nreturn (\n  <ViewContainer>\n    <HeroBanner />\n    <BrowseTabs tabs={tabs} />\n    <GridContainer>\n      <Content>\n        <div>\n          <Widget\n            src=\"trylivepeer.near/widget/Player\"\n            props={{\n              playerProps: {\n                playbackId: data.playbackId,\n                title: videoThing.metadata.name,\n                PostImage: data?.poster && (\n                  <img\n                    src={\n                      data?.poster ||\n                      \"https://placehold.co/450x300/000000/FFFFFF/png\"\n                    }\n                    alt={videoThing.metadata.name}\n                  />\n                ),\n              },\n            }}\n          />\n          <div className=\"mt-4\">\n            <VideoTitle>{videoThing.metadata.name}</VideoTitle>\n            <VideoDescription>\n              {videoThing.metadata.description}\n            </VideoDescription>\n            <VideoInfo>\n              <Widget\n                loading=\"\"\n                src=\"mob.near/widget/TimeAgo\"\n                props={{ blockHeight }}\n              />\n              <span>Format: {data?.videoSpec?.format || \"N/A\"}</span>\n            </VideoInfo>\n            <div\n              className=\"d-flex align-items-center justify-content-between flex-wrap\"\n              style={{\n                border: \"1px solid rgba(0, 0, 0, 0.13)\",\n                borderLeft: 0,\n                borderRight: 0,\n                padding: \"1rem 0\",\n                margin: \"2rem 0\",\n              }}\n            >\n              <div className=\"d-flex align-items-center gap-3 flex-wrap\">\n                <Widget\n                  src=\"mob.near/widget/ProfileImage\"\n                  props={{\n                    accountId: accountId,\n                  }}\n                />\n                <div className=\"d-flex align-items-center gap-1 flex-wrap\">\n                  {accountId}{\" \"}\n                  <Widget\n                    loading={\"\"}\n                    src=\"mob.near/widget/Checkmark\"\n                    props={{ isPremium, accountId }}\n                  />\n                </div>\n              </div>\n              <div className=\"d-flex align-items-center gap-2\">\n                <Widget\n                  src=\"video.every.near/widget/Components.like-button\"\n                  props={{ item }}\n                />\n                <Widget\n                  src=\"nui.sking.near/widget/Layout.Modal\"\n                  props={{\n                    open: state.postModalOpen,\n                    onOpenChange: (open) => {\n                      State.update({\n                        ...state,\n                        postModalOpen: open,\n                      });\n                    },\n                    toggle: (\n                      <Button\n                        className=\"d-flex align-items-center gap-1\"\n                        disabled={!path}\n                        style={{ fontWeight: 500 }}\n                      >\n                        <>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"24\"\n                            height=\"24\"\n                            viewBox=\"0 0 24 24\"\n                            fill=\"none\"\n                          >\n                            <path\n                              d=\"M15 5.63L20.66 12L15 18.37V15V14H14C10.04 14 6.86 15 4.25 17.09C6.09 13.02 9.36 10.69 14.14 9.99L15 9.86V9V5.63ZM14 3V9C6.22 10.13 3.11 15.33 2 21C4.78 17.03 8.44 15 14 15V21L22 12L14 3Z\"\n                              fill=\"black\"\n                            />\n                          </svg>\n                          share\n                        </>\n                      </Button>\n                    ),\n                    content: (\n                      <div className=\"w-100\">\n                        <ModalBox>\n                          <Widget\n                            src={\"devs.near/widget/modal.post\"}\n                            props={{\n                              creatorId: context.accountId,\n                              path: `video.every.near/widget/app?path=${path}`,\n                              type: \"every.near/type/video\",\n                              closeModal: () => {\n                                State.update({\n                                  ...state,\n                                  postModalOpen: false,\n                                });\n                              },\n                            }}\n                          />\n                        </ModalBox>\n                      </div>\n                    ),\n                  }}\n                />\n                <a\n                  href={data?.downloadUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"d-flex align-items-center gap-1 text-black\"\n                  style={{ textDecoration: \"none\", fontWeight: 500 }}\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                  >\n                    <path\n                      d=\"M17 18V19H6V18H17ZM16.5 11.4L15.8 10.7L12 14.4V4H11V14.4L7.2 10.6L6.5 11.3L11.5 16.3L16.5 11.4Z\"\n                      fill=\"black\"\n                    />\n                  </svg>\n                  download\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div>\n          <VideoTitle>Comments</VideoTitle>\n          <hr />\n          <Feed\n            index={{\n              action: \"post\",\n              key: item,\n            }}\n            showCompose={true}\n            Item={(p) => {\n              return (\n                <Widget\n                  src=\"mob.near/widget/MainPage.N.Post\"\n                  loading={<div style={{ height: \"200px\" }} />}\n                  props={{ accountId: p.accountId, blockHeight: p.blockHeight }}\n                />\n              );\n            }}\n          />\n        </div>\n      </Content>\n      <SideContent>\n        <h5>Suggested Videos</h5>\n        <Widget\n          src=\"devs.near/widget/Feed@100100160\"\n          props={{\n            index: {\n              action: \"every\",\n              key: \"video\",\n              options: {\n                limit: 10,\n                order: \"desc\",\n              },\n            },\n            Item: (p) => (\n              <Widget\n                src=\"video.every.near/widget/Components.suggested-video\"\n                props={{ ...p }}\n              />\n            ),\n            Layout: List,\n            buildPath: (item) => `${item.accountId}/thing/${item.value.id}`,\n          }}\n        />\n      </SideContent>\n    </GridContainer>\n  </ViewContainer>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/video.every.near/widget/view", "fact_widget_deployments_id": "cbba7770c6c91e6a0ad1a65ddb66381e", "inserted_timestamp": "2024-04-22T16:48:17.557Z", "modified_timestamp": "2024-04-22T16:48:17.557Z", "__row_index": 0}