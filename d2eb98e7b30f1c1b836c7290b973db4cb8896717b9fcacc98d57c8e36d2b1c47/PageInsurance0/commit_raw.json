{"tx_hash": "GuQbB3Z5u7thRMevYGZUnP1VpjQYw9pFznEaGGUpHp5Q", "action_id_social": "5i68MCt7y8kJ1vTnasNr8Lw4n3fLZJgbUBsWb3bWaayM-0-widget", "block_id": 104985897, "block_timestamp": "2023-11-05T09:56:22.611Z", "signer_id": "d2eb98e7b30f1c1b836c7290b973db4cb8896717b9fcacc98d57c8e36d2b1c47", "widget_name": "PageInsurance0", "source_code": "const abi = fetch(\n  \"https://eth-sepolia.blockscout.com/api?module=contract&action=getabi&address=0x599105825869225cf48a60a91097930bd860A2AE\"\n);\n/*\nif (!abi.ok) {\n  return \"Loading\";\n}*/\n\nState.init({\n  gravity: 0,\n  selectedType: \"bonus\",\n  recipientAddress: \"\",\n  accidentType: \"\",\n  responsibility: \"\",\n  date: \"\",\n});\n\nasync function mintToken() {\n  //if (typeof window.ethereum !== \"undefined\") { //Regarde si connecter metamask\n  // create a contract instance\n  const wEthContract = new ethers.Contract(\n    \"0x599105825869225cf48a60a91097930bd860A2AE\",\n    abi.body.result,\n    Ethers.provider().getSigner()\n  );\n\n  const isBonus = state.selectedType === \"bonus\";\n\n  // perform a given method (withdraw in this case)\n  wEthContract\n    .safeMint(\n      state.recipientAddress,\n      isBonus,\n      state.gravity,\n      state.accidentType,\n      state.responsibility,\n      state.date\n    )\n    .then((transactionHash) => {\n      console.log(transactionHash);\n    });\n}\n\nreturn (\n  <>\n    <div>\n      <Web3Connect\n        className=\"swap-button-enabled swap-button-text p-2\"\n        connectLabel=\"Connect with Web3\"\n      />\n    </div>\n    <div>\n      Bonus: <input type=\"text\" value={state.selectedType} />\n      Address: <input type=\"text\" value={state.recipientAddress} />\n      Gravity: <input type=\"text\" value={state.gravity} />\n      Accident Type: <input type=\"text\" value={state.accidentType} />\n      Responsibility: <input type=\"text\" value={state.responsibility} />\n      Date: <input type=\"text\" value={state.date} />\n      <button id=\"mintButton\" onClick={mintToken}>\n        Mint Token\n      </button>\n      <a href=\"https://near.org/d2eb98e7b30f1c1b836c7290b973db4cb8896717b9fcacc98d57c8e36d2b1c47/widget/History\">\n        <button>History</button>\n      </a>\n      \u00a0\n    </div>\n    \u00a0\u00a0\n  </>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/d2eb98e7b30f1c1b836c7290b973db4cb8896717b9fcacc98d57c8e36d2b1c47/widget/PageInsurance0", "fact_widget_deployments_id": "065632d3930ab17fae4eab20a66b9f21", "inserted_timestamp": "2023-11-05T11:47:07.632Z", "modified_timestamp": "2023-11-05T11:47:07.632Z", "__row_index": 16}