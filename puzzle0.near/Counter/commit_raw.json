{"tx_hash": "BmY33AeTL5BGCuJuWsQ1tVDPfSyj1a7nLbGPGuMV98oL", "action_id_social": "5xrf9qZCDwa9MwBv3RRMTGyFJL1NCjg9ZHuq2RxvsaVW-0-widget", "block_id": 104403279, "block_timestamp": "2023-10-28T17:49:01.151Z", "signer_id": "puzzle0.near", "widget_name": "Counter", "source_code": "const [count, setCount] = useState(0);\nconst [page, setPage] = useState(0);\nconst [payment, setPayment] = useState(0);\n\nlet cost_per_item = 0.05;\n\nconst getTotalRewards = () => {\n  return count * cost_per_item;\n};\n\nconst getBitcoinRewards = () => {\n  return ((count * cost_per_item) / bitcoinPrice()) * 100000000;\n};\n\nfunction bitcoinPrice() {\n  const response = fetch(\n    \"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\"\n  );\n  console.log(response);\n  const bitcoinPrice = response.body.bitcoin.usd;\n  return bitcoinPrice;\n}\n\nfunction handleStartNew() {\n  setCount(0); // Reset count to zero when Start New is clicked\n  setPage(1); // Move to the next page after resetting the count\n}\n\nfunction Page() {\n  switch (page) {\n    case 0: {\n      return (\n        <div>\n          <h1>Start A Recycling Session</h1>\n          <button onClick={() => handleStartNew()}>Start New</button>\n        </div>\n      );\n    }\n    case 1: {\n      return (\n        <div>\n          <h1>Recycling for Bitcoin</h1>\n          <p>Insert Can or Bottle</p>\n          <p>Count: {count}</p>\n          <button onClick={() => setCount(count + 1)}>+</button>\n          <button onClick={() => setPage(page - 1)} disabled={page === 0}>\n            Back\n          </button>\n          <button onClick={() => setPage(page + 1)} disabled={count === 0}>\n            Next\n          </button>\n        </div>\n      );\n    }\n    case 2: {\n      return (\n        <div>\n          <h2>Summary + Choose Payment</h2>\n          <p>Recycling Count: {count}</p>\n          <p>Price Per Recycled Item: ${cost_per_item} </p>\n          <p>Bottle Refund Amount: ${getTotalRewards()}</p>\n          <p>Bitcoin Price: ${bitcoinPrice()}</p>\n          <p>BTC Rewards Amount: {getBitcoinRewards()} Satoshis</p>\n          <p>Select Payment Type:</p>\n          <button onClick={() => setPage(page + 1)}>Cash</button>\n          <button onClick={() => setPage(page + 2)}>Bitcoin</button>\n        </div>\n      );\n    }\n    case 3: {\n      return (\n        <div>\n          <h2>Cash</h2>\n          <p>Bottle Refund Amount: ${getTotalRewards()}</p>\n          <p>Printing Receipt</p>\n          <button onClick={() => setPage(0)}>Complete</button>\n        </div>\n      );\n    }\n    case 4: {\n      return (\n        <div>\n          <h2>Bitcoin</h2>\n          <p>BTC Rewards Amount: {getBitcoinRewards()} Satoshis</p>\n          <p>Displaying LNURL</p>\n          <img\n            src={\n              \"https:lnurl1?bfg=7cdf0df9e5b360eb823a8e0968e0a6ae&dfg=1e6156323fc703840bab8892ba1f7778&wfg=19201055&h-captcha-response=undefined&g-recaptcha-response=03AFcWeA6gl18jP7wl1oEuCetV6J7Usz_3BcU2U_jJw2YfTIAU7cyQ_0u4YDlzOeJ7Eudmu-Fr3fKmWir_eDmcCteS-niYZNLqebJSxddhW6QqGwBsymq0wTC6cbkPz9fLedmlaFZ1vNxaIzCZ034Gj2tSEhP-jk2IRXPPnwB6s0CgjWSSACVQmzDYyf1a8N5paLHfQMzhX_tFG63BDNk7RHNm4zkKiy2MHS0aXJowlJONCrg04TrR2wdHTXCG5xJGEoM8ArI0QvT8jioi73B4IQ_lEj7OUMPmnmlh0p1BzSCaOn7XKRsgwkHsSUlLF4GfloklPZPzyUqwTLVy44J0ukJuP_YXCSeRdzVelX7JsMaJV9hNC7n1qrbCNfhLDduU5ua9mq3JQsQewGPvhgOKymRnp5aar_ktT1438Lg_z1TwIMP7oCbUlZb2kEHrXpXo9ifO2Krl9P1QVjFBfrBYApVs1VsBLhHEJNPSX5oF_NMrEom0XADb-UV6_OmisrqA_ObHl31Ly-n19vK9vuzYzY0m8ZXV2UqtAkgzMonh_1KhT0u8MWIww1gYPG4yiscqhb28G0Qh9Pd-\"\n            }\n          />\n          <p></p>\n          <button onClick={() => setPage(0)}>Print</button>\n        </div>\n      );\n    }\n  }\n}\n\nreturn (\n  <div>\n    <Page />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/puzzle0.near/widget/Counter", "fact_widget_deployments_id": "c0bfd274df269e4cc890f84ce74c95f2", "inserted_timestamp": "2023-10-28T19:42:21.538Z", "modified_timestamp": "2023-10-28T19:42:21.538Z", "__row_index": 1}