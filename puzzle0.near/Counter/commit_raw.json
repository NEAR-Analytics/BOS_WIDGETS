{"tx_hash": "2Q69fDkEYyQFFXZCzj69mbwQbn9gHx5SW647AMiBiGPm", "action_id_social": "2Y9YMjf5ny63hX92jCcnmBxEAhRCKuraeMVexo2X6vXG-0-widget", "block_id": 104406290, "block_timestamp": "2023-10-28T18:44:52.691Z", "signer_id": "puzzle0.near", "widget_name": "Counter", "source_code": "const [count, setCount] = useState(0);\nconst [page, setPage] = useState(0);\nconst [payment, setPayment] = useState(0);\n\nlet cost_per_item = 0.05;\n\nconst Button0024 = styled.button`\n  font-size: 16px;\n  font-weight: 700;\n  color: #ff7576;\n  background-color: #2b3044;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  padding: 12px 24px;\n  position: relative;\n  line-height: 24px;\n  border-radius: 9px;\n  box-shadow: 0px 1px 2px #2b3044, 0px 4px 16px #2b3044;\n  transform-style: preserve-3d;\n  transform: scale(var(--s, 1)) perspective(600px)\n    rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg));\n  perspective: 600px;\n  transition: transform 0.1s;\n\n  .sp {\n    background: linear-gradient(\n      90deg,\n      #866ee7,\n      #ea60da,\n      #ed8f57,\n      #fbd41d,\n      #2cca91\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    text-fill-color: transparent;\n    display: block;\n  }\n\n  &:active {\n    transition: 0.3s;\n    transform: scale(0.93);\n  }\n`;\n\nconst getTotalRewards = () => {\n  return (count * cost_per_item).toFixed(2);\n};\n\nconst getBitcoinRewards = () => {\n  return (((count * cost_per_item) / bitcoinPrice()) * 100000000).toFixed(0);\n};\n\nfunction bitcoinPrice() {\n  const response = fetch(\n    \"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\"\n  );\n  console.log(response);\n  const bitcoinPrice = response.body.bitcoin.usd;\n  return bitcoinPrice;\n}\n\nfunction handleStartNew() {\n  setCount(0); // Reset count to zero when Start New is clicked\n  setPage(1); // Move to the next page after resetting the count\n}\n\nfunction Page() {\n  switch (page) {\n    case 0: {\n      return (\n        <div>\n          <h1>Start A Recycling Session</h1>\n          <Button0024 onClick={() => handleStartNew()}>Start New</Button0024>\n        </div>\n      );\n    }\n    case 1: {\n      return (\n        <div>\n          <h1>Recycling for Bitcoin</h1>\n          <p>Insert Can or Bottle</p>\n          <p>Count: {count}</p>\n          <Button0024 onClick={() => setCount(count + 1)}>+</Button0024>\n          <Button0024 onClick={() => setPage(page - 1)} disabled={page === 0}>\n            Back\n          </Button0024>\n          <Button0024 onClick={() => setPage(page + 1)} disabled={count === 0}>\n            Next\n          </Button0024>\n        </div>\n      );\n    }\n\n    case 2: {\n      return (\n        <div>\n          <h2>Summary + Choose Payment</h2>\n          <p>Recycling Count: {count}</p>\n          <p>Price Per Recycled Item: ${cost_per_item} </p>\n          <p>Bottle Refund Amount: ${getTotalRewards()}</p>\n          <p>Bitcoin Price: ${bitcoinPrice()}</p>\n          <p>BTC Rewards Amount: {getBitcoinRewards()} Satoshis</p>\n          <p>Select Payment Type:</p>\n          <Button0024 onClick={() => setPage(page + 1)}>Cash</Button0024>\n          <Button0024 onClick={() => setPage(page + 2)}>Bitcoin</Button0024>\n        </div>\n      );\n    }\n    case 3: {\n      return (\n        <div>\n          <h2>Cash</h2>\n          <p>Bottle Refund Amount: ${getTotalRewards()}</p>\n          <p>Printing Receipt</p>\n          <Button0024 onClick={() => setPage(0)}>Complete</Button0024>\n        </div>\n      );\n    }\n    case 4: {\n      return (\n        <div>\n          <h2>Bitcoin</h2>\n          <p>BTC Rewards Amount: {getBitcoinRewards()} Satoshis</p>\n          <p>Displaying LNURL</p>\n          <a href=\"https://imgur.com/PnpEJTj\">\n            <img\n              src=\"https://i.imgur.com/PnpEJTjb.png\"\n              title=\"source: imgur.com\"\n            />\n          </a>\n          <p></p>\n          <Button0024 onClick={() => setPage(0)}>Print</Button0024>\n        </div>\n      );\n    }\n  }\n}\n\nreturn (\n  <div>\n    <Page />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/puzzle0.near/widget/Counter", "fact_widget_deployments_id": "d8fad38aceeedf20d19ba97c49e80cfa", "inserted_timestamp": "2023-10-28T20:38:17.775Z", "modified_timestamp": "2023-10-28T20:38:17.775Z", "__row_index": 0}