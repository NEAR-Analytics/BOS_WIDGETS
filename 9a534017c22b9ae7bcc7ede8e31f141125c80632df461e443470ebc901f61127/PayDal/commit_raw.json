{"tx_hash": "8rTRS8pnQcWJWHn5yWRPk96uqkHkFuqUfoduUXsX4CZN", "action_id_social": "58kvhpzxV4iC8SndqJ8P339SJq8ZKuSq86YsQStqyU1k-0-widget", "block_id": 104989945, "block_timestamp": "2023-11-05T11:10:20.319Z", "signer_id": "9a534017c22b9ae7bcc7ede8e31f141125c80632df461e443470ebc901f61127", "widget_name": "PayDal", "source_code": "// State for your token selection and amount\nconst [selectedToken, setSelectedToken] = useState(\"\"); // default token\nconst [amount, setAmount] = useState(\"\");\nconst [quote, setQuote] = useState(\"\");\nconst [status, setStatus] = useState(\"Awaiting payment...\");\nconst [tokens, setTokens] = useState([]); // Array of available tokens\n\n// Fetch available tokens on component mount\nuseEffect(() => {\n  const fetchTokens = async () => {\n    try {\n      const response = await axios.get(\n        \"https://api.1inch.exchange/v3.0/1/tokens\"\n      );\n      setTokens(Object.values(response.data.tokens));\n    } catch (error) {\n      console.error(\"Error fetching tokens:\", error);\n      setStatus(\"Error fetching tokens\");\n    }\n  };\n\n  fetchTokens();\n}, []);\n\n// Function to update the selected token\nconst handleTokenChange = (e) => {\n  setSelectedToken(e.target.value);\n};\n\n// Function to update the amount to be swapped\nconst handleAmountChange = (e) => {\n  setAmount(e.target.value);\n};\n\n// Function to fetch quote from 1inch\nconst getQuote = async () => {\n  if (!selectedToken || !amount) {\n    alert(\"Please select a token and enter an amount\");\n    return;\n  }\n  try {\n    const response = await axios.get(\n      `https://api.1inch.exchange/v3.0/1/quote?fromTokenSymbol=${selectedToken}&toTokenSymbol=ETH&amount=${amount}`\n    );\n    setQuote(response.data);\n  } catch (error) {\n    console.error(\"Error fetching quote:\", error);\n    setStatus(\"Error fetching quote\");\n  }\n};\n\n// Function to perform the swap\nconst doSwap = async () => {\n  // You would typically pass the wallet address and slippage as well\n  const fromAddress = \"YOUR_WALLET_ADDRESS\"; // This must be the actual user's address\n  const slippage = 1; // 1% slippage\n\n  if (!selectedToken || !amount) {\n    alert(\"Please select a token and enter an amount\");\n    return;\n  }\n  try {\n    const response = await axios.get(\n      `https://api.1inch.exchange/v3.0/1/swap?fromTokenSymbol=${selectedToken}&toTokenSymbol=ETH&amount=${amount}&fromAddress=${fromAddress}&slippage=${slippage}`\n    );\n    // This response will contain the transaction data\n    // Typically, you would then pass this data to a wallet provider (e.g., MetaMask) to perform the transaction\n    console.log(response.data);\n    setStatus(\"Swap executed, transaction hash: \" + response.data.tx.hash);\n  } catch (error) {\n    console.error(\"Error performing swap:\", error);\n    setStatus(\"Error performing swap\");\n  }\n};\n\nreturn (\n  <div\n    style={{\n      height: \"100vh\", // changed to viewport height to fill the screen\n      width: \"100vw\", // changed to viewport width to fill the screen\n      display: \"flex\",\n      justifyContent: \"center\",\n      background: \"linear-gradient(to top left, #0d6efd, #f6851b)\",\n      paddingTop: \"5vh\", // using viewport height units instead of percentage\n      paddingBottom: \"5vh\", // using viewport height units instead of percentage\n      paddingLeft: \"10%\",\n      paddingRight: \"10%\",\n    }}\n  >\n    <div\n      style={{\n        width: \"60%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        paddingLeft: \"3rem\",\n        paddingRight: \"3rem\",\n      }}\n    >\n      <div\n        style={{\n          borderBottom: \"2px solid\",\n          width: \"100%\",\n          height: \"15%\",\n          paddingTop: \"3rem\",\n          paddingBottom: \"3rem\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"baseline\",\n            justifyContent: \"space-between\",\n            marginBottom: \"3rem\",\n          }}\n        >\n          <div style={{ display: \"flex\" }}>\n            <h1 style={{ fontSize: \"1.5rem\", fontStyle: \"italic\" }}>Pay</h1>\n            <h1 style={{ fontSize: \"1.5rem\", fontStyle: \"italic\" }}>Dal</h1>\n          </div>\n          <h3\n            style={{\n              fontSize: \"0.5rem\",\n              opacity: \"0.8\",\n              alignSelf: \"flex-end\",\n            }}\n          >\n            {\" \"}\n            a faster, scalable way to pay.{\" \"}\n          </h3>\n        </div>\n      </div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          flexGrow: 1,\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          paddingTop: \"3rem\",\n          paddingBottom: \"3rem\",\n        }}\n      >\n        <div\n          class=\"text-center\"\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: \"33.333%\",\n            width: \"100%\",\n          }}\n        >\n          <h1\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"0.5rem\",\n              opacity: \"0.8\",\n              marginBottom: \"2rem\",\n            }}\n          >\n            {\" \"}\n            PRODUCT/MERCHANT INFO{\" \"}\n          </h1>\n          <h3>{props.seller}</h3>\n          <h4>{props.product}</h4>\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: \"66.666%\",\n          }}\n        >\n          <h1\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"0.5rem\",\n              opacity: \"0.8\",\n            }}\n          >\n            {\" \"}\n            AMOUNT DUE{\" \"}\n          </h1>\n          <h1 style={{ fontSize: \"3rem\" }}>\n            {props.amount} {props.pref_token}\n          </h1>\n        </div>\n      </div>\n    </div>\n    <div\n      style={{\n        width: \"40%\",\n        height: \"calc(100vh - 10vh)\",\n        backgroundColor: \"white\",\n        borderRadius: \"1rem\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          backgroundColor: \"#1d4ed8\",\n          color: \"white\",\n          fontSize: \"0.5rem\",\n          fontWeight: \"bold\",\n          height: \"15%\",\n          width: \"100%\",\n          borderRadius: \"0.25rem\",\n          display: \"flex\",\n        }}\n      >\n        <Web3Connect />{\" \"}\n      </div>\n\n      <div\n        style={{\n          height: \"85%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          padding: \"1rem 3rem 1rem 3rem\",\n        }}\n      >\n        <div\n          style={{\n            height: \"85%\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            padding: \"1rem 3rem 0rem 3rem\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: \"1rem\",\n              width: \"100%\",\n              height: \"33.333%\",\n            }}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                width: \"100%\",\n                justifyContent: \"space-between\",\n                gap: \"3rem\",\n                borderBottom: \"1px solid\",\n              }}\n            >\n              {\" \"}\n              {/* Token Selection Dropdown */}{\" \"}\n              <div style={{ width: \"100%\" }}>\n                <label\n                  style={{\n                    display: \"block\",\n                    fontSize: \"0.85rem\",\n                    fontWeight: \"bold\",\n                    marginBottom: \"0.5rem\",\n                    color: \"black\",\n                  }}\n                  htmlFor=\"token-selection\"\n                >\n                  {\" \"}\n                  Choose Token:{\" \"}\n                </label>\n                <select\n                  id=\"token-selection\"\n                  style={{\n                    color: \"black\",\n                    marginTop: \"0.25rem\",\n                    width: \"100%\",\n                    padding: \"0.5rem\",\n                    fontSize: \"0.5rem\",\n                    borderWidth: \"1px\",\n                    borderColor: \"#d1d5db\",\n                    borderRadius: \"0.25rem\",\n                  }}\n                >\n                  <option>Token A</option>\n                  <option>Token B</option> {/* ... more tokens ... */}\n                </select>\n              </div>\n              {/* Amount Input */}\n              <div style={{ width: \"100%\" }}>\n                <label\n                  style={{\n                    display: \"block\",\n                    fontSize: \"0.85rem\",\n                    fontWeight: \"bold\",\n                    marginBottom: \"0.5rem\",\n                    color: \"black\",\n                  }}\n                  htmlFor=\"amount\"\n                >\n                  {\" \"}\n                  Amount to Send:{\" \"}\n                </label>\n                <input\n                  id=\"amount\"\n                  type=\"number\"\n                  style={{\n                    color: \"black\",\n                    width: \"100%\",\n                    padding: \"0.5rem\",\n                    fontSize: \"0.5rem\",\n                    borderWidth: \"1px\",\n                    borderColor: \"#d1d5db\",\n                    borderRadius: \"0.25rem\",\n                  }}\n                  placeholder=\"Enter amount\"\n                />\n              </div>\n            </div>\n            <div style={{ width: \"100%\" }}>\n              <div\n                style={{\n                  backgroundColor: \"#f3f4f6\",\n                  padding: \"0.5rem\",\n                  borderRadius: \"0.5rem\",\n                }}\n              >\n                <p\n                  id=\"conversion-rate\"\n                  style={{\n                    fontSize: \"0.5rem\",\n                    color: \"black\",\n                  }}\n                >\n                  {\" \"}\n                  Current rate to `ETH` ~ xx.xx${\" \"}\n                </p>\n              </div>\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: \"2rem\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                width: \"100%\",\n                flex: 1,\n              }}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  gap: \"1rem\",\n                  justifyContent: \"space-between\",\n                  width: \"100%\",\n                }}\n              >\n                <button\n                  style={{\n                    backgroundColor: \"#22c55e\",\n                    color: \"white\",\n                    fontWeight: \"bold\",\n                    fontSize: \"0.5rem\",\n                    padding: \"0.25rem 0.5rem\",\n                    borderRadius: \"0.25rem\",\n                    flex: 1,\n                  }}\n                >\n                  {\" \"}\n                  Add Amount{\" \"}\n                </button>\n                <button\n                  style={{\n                    backgroundColor: \"#ef4444\",\n                    color: \"white\",\n                    fontWeight: \"bold\",\n                    fontSize: \"0.5rem\",\n                    padding: \"0.25rem 0.5rem\",\n                    borderRadius: \"0.25rem\",\n                    flex: 1,\n                  }}\n                >\n                  {\" \"}\n                  Cancel{\" \"}\n                </button>\n              </div>\n            </div>\n\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                marginTop: \"3rem\",\n                marginBottom: \"rem\",\n                height: \"20%\",\n              }}\n            >\n              <h1\n                style={{\n                  color: \"black\",\n                  marginBottom: \"0rem\",\n                  fontSize: \"0.75rem\",\n                }}\n              >\n                {\" \"}\n                AMOUNT APPENDED{\" \"}\n              </h1>\n              <h1\n                style={{\n                  color: \"black\",\n                  fontSize: \"3rem\",\n                }}\n              >\n                {\" \"}\n                0 {props.pref_token}{\" \"}\n              </h1>\n            </div>\n          </div>{\" \"}\n          {/* Transaction Status Display */}\n          <div style={{ width: \"100%\", height: \"5rem\", marginTop: \"10rem\" }}>\n            <label\n              style={{\n                display: \"block\",\n                color: \"black\",\n                fontSize: \"0.85rem\",\n                fontWeight: \"bold\",\n                marginBottom: \"0.5rem\",\n              }}\n              htmlFor=\"transaction-status\"\n            >\n              {\" \"}\n              Status:{\" \"}\n            </label>\n            <div\n              id=\"transaction-status\"\n              style={{\n                backgroundColor: \"#f3f4f6\",\n                padding: \"0.5rem\",\n                borderRadius: \"0.5rem\",\n              }}\n            >\n              <p\n                style={{\n                  fontSize: \"0.5rem\",\n                  color: \"black\",\n                }}\n              >\n                {\" \"}\n                Awaiting payment...{\" \"}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": {"description": "payment gateway using 1inch's swap api", "image": {}, "name": "PayDal - payment gateway", "platform": "jutsu.ai"}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/9a534017c22b9ae7bcc7ede8e31f141125c80632df461e443470ebc901f61127/widget/PayDal", "fact_widget_deployments_id": "825f7657f907aba7f0d5180cf2b1ac78", "inserted_timestamp": "2023-11-05T13:18:42.023Z", "modified_timestamp": "2023-11-05T13:18:42.023Z", "__row_index": 0}