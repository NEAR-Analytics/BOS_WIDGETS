{"tx_hash": "DTRhMNG4qYYQhuC22Wgbs54MDyovXUbcEcML34d6mqPY", "action_id_social": "BgiZHvEs83GJFGsq3ZWyqeoouq7KgkcfAguc9naCVcZq-0-widget", "block_id": 95847167, "block_timestamp": "2023-07-06T15:31:42.545Z", "signer_id": "saidulbadhon.near", "widget_name": "EditorPage.Metadata.ImageEditorTabs", "source_code": "const image = props.image;\nconst onChange = props.onChange;\n\nconst Tab = {\n  Upload: \"Upload\",\n  NFT: \"NFT\",\n  URL: \"URL\",\n};\n\nconst origTab = () =>\n  image.nft.contractId || image.nft.tokenId\n    ? Tab.NFT\n    : !image.ipfs_cid && image.url\n    ? Tab.URL\n    : Tab.Upload;\n\nState.init({\n  origImage: image,\n  tab: origTab(),\n  url: image.url,\n  nft: image.nft ?? {},\n  img: { cid: image.ipfs_cid },\n});\n\nconst setTab = (tab) => State.update({ tab });\n\nif (JSON.stringify(image) !== JSON.stringify(state.image)) {\n  State.update({\n    image,\n  });\n}\n\nlet localImage = {};\n\nif (state.origImage.nft.contractId || state.origImage.nft.tokenId) {\n  localImage.nft = {};\n  if (state.origImage.nft.contractId) {\n    localImage.nft.contractId = null;\n  }\n  if (state.origImage.nft.tokenId) {\n    localImage.nft.tokenId = null;\n  }\n}\nif (state.origImage.ipfs_cid) {\n  localImage.ipfs_cid = null;\n}\nif (state.origImage.url) {\n  localImage.url = null;\n}\n\nif (state.tab === Tab.NFT && (state.nft.contractId || state.nft.tokenId)) {\n  localImage.nft = {\n    contractId: state.nft.contractId || \"\",\n    tokenId: state.nft.tokenId || \"\",\n  };\n} else if (state.tab === Tab.Upload && state.img.cid) {\n  localImage.ipfs_cid = state.img.cid;\n}\nif (state.tab === Tab.URL && state.url) {\n  localImage.url = state.url;\n}\n\nif (onChange && JSON.stringify(image) !== JSON.stringify(localImage)) {\n  onChange(localImage);\n}\n\nconst debounce = (func, wait) => {\n  const pause = wait || 350;\n  let timeout;\n\n  return (args) => {\n    const later = () => {\n      clearTimeout(timeout);\n      func(args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, pause);\n  };\n};\n\nconst onNFTChange = debounce((e) => {\n  State.update({\n    nft: {\n      ...state.nft,\n      [e.target.id]: e.target.value,\n    },\n  });\n});\nconst onImageChange = debounce((e) => {\n  State.update({\n    [e.target.id]: e.target.value,\n  });\n});\n\nreturn (\n  <div>\n    <ul\n      className={`nav nav-tabs`}\n      style={{\n        backgroundColor: props.theme.ui,\n        borderBottom: `1px ${props.theme.borderColor} solid`,\n      }}\n    >\n      <li className=\"nav-item\">\n        <button\n          className=\"nav-link\"\n          style={{\n            color:\n              state.tab === Tab.Upload\n                ? props.theme.buttonColor\n                : props.theme.textColor3,\n            backgroundColor:\n              state.tab === Tab.Upload\n                ? props.theme.backgroundColor\n                : props.theme.ui,\n            outline: \"none\",\n            border:\n              state.tab === Tab.Upload\n                ? `1px ${props.theme.borderColor} solid`\n                : \"none\",\n            borderBottom: \"none\",\n          }}\n          aria-current=\"page\"\n          onClick={() => setTab(Tab.Upload)}\n        >\n          Upload\n        </button>\n      </li>\n      <li className=\"nav-item\">\n        <button\n          className=\"nav-link\"\n          style={{\n            color:\n              state.tab === Tab.NFT\n                ? props.theme.buttonColor\n                : props.theme.textColor3,\n            backgroundColor:\n              state.tab === Tab.NFT\n                ? props.theme.backgroundColor\n                : props.theme.ui,\n            outline: \"none\",\n            border:\n              state.tab === Tab.NFT\n                ? `1px ${props.theme.borderColor} solid`\n                : \"none\",\n            borderBottom: \"none\",\n          }}\n          aria-current=\"page\"\n          onClick={() => setTab(Tab.NFT)}\n        >\n          NFT\n        </button>\n      </li>\n      <li className=\"nav-item\">\n        <button\n          className=\"nav-link\"\n          style={{\n            color:\n              state.tab === Tab.URL\n                ? props.theme.buttonColor\n                : props.theme.textColor3,\n            backgroundColor:\n              state.tab === Tab.URL\n                ? props.theme.backgroundColor\n                : props.theme.ui,\n            outline: \"none\",\n            border:\n              state.tab === Tab.URL\n                ? `1px ${props.theme.borderColor} solid`\n                : \"none\",\n            borderBottom: \"none\",\n          }}\n          aria-current=\"page\"\n          onClick={() => setTab(Tab.URL)}\n        >\n          URL\n        </button>\n      </li>\n    </ul>\n    <div\n      className=\"p-2\"\n      style={{\n        border: `solid 1px ${props.theme.borderColor}`,\n        borderTop: 0,\n        borderBottomLeftRadius: \".375rem\",\n        borderBottomRightRadius: \".375rem\",\n        minHeight: \"9em\",\n\n        backgroundColor: props.theme.backgroundColor,\n      }}\n    >\n      <div className={`${state.tab === Tab.Upload ? \"\" : \"visually-hidden\"}`}>\n        <IpfsImageUpload image={state.img} />\n      </div>\n      <div\n        className={`${state.tab === Tab.NFT ? \"\" : \"visually-hidden\"}`}\n        style={{ color: props.theme.textColor3 }}\n      >\n        NFT contract\n        <input\n          type=\"text\"\n          id=\"contractId\"\n          defaultValue={state.nft.contractId}\n          onChange={onNFTChange}\n          onChange={onNFTChange}\n          style={{\n            backgroundColor: props.theme.ui,\n            color: props.theme.textColor,\n            borderColor: props.theme.borderColor,\n          }}\n        />\n        NFT token id\n        <input\n          type=\"text\"\n          id=\"tokenId\"\n          defaultValue={state.nft.tokenId}\n          onChange={onNFTChange}\n          style={{\n            backgroundColor: props.theme.ui,\n            color: props.theme.textColor,\n            borderColor: props.theme.borderColor,\n          }}\n        />\n      </div>\n      <div\n        className={`${state.tab === Tab.URL ? \"\" : \"visually-hidden\"}`}\n        style={{ color: props.theme.textColor3 }}\n      >\n        Image URL\n        <input\n          type=\"text\"\n          id=\"url\"\n          defaultValue={state.url}\n          onChange={onImageChange}\n          style={{\n            backgroundColor: props.theme.ui,\n            color: props.theme.textColor,\n            borderColor: props.theme.borderColor,\n          }}\n        />\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/EditorPage.Metadata.ImageEditorTabs", "fact_widget_deployments_id": "e9c87da81ffa0b815aa824cfcd913cb8", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}