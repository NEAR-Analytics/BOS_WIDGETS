{"tx_hash": "8Yy5soAF7wd1PEYTQPmqWMhaUKRgxnsJRg6xVGeCpj3o", "action_id_social": "FVno6zm7mqhuVGStKsmEuonGWfN39dV44oJ5RKFEBTTP-0-widget", "block_id": 95613693, "block_timestamp": "2023-07-03T14:36:27.629Z", "signer_id": "saidulbadhon.near", "widget_name": "ProfilePage.Contributions", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) return \"Login or send accountId in the props\";\n\nconst profile = Social.getr(`${accountId}/profile`);\n\nconst allWidgetsHistoryChangesBlocks = Social.keys(\n  `${accountId}/widget/*`,\n  \"final\",\n  {\n    return_type: \"History\",\n  }\n);\n\nif (allWidgetsHistoryChangesBlocks === null) return \"Loading...\";\n\nconst widget = allWidgetsHistoryChangesBlocks[accountId].widget;\n\nconst totalCommits = Object.keys(widget)\n  .map((key) => widget[key])\n  .flat()\n  .map((blockHeight) => {\n    const xs = Near.block(blockHeight);\n\n    const timeMs = parseFloat(xs.header.timestamp_nanosec) / 1e6;\n\n    return new Date(timeMs).toLocaleDateString();\n  });\n\nconst checkOccurrence = (array, element) => {\n  let counter = 0;\n  for (let i = 0; i <= array.length; i++) {\n    if (array[i] == element) {\n      counter++;\n    }\n  }\n  return counter;\n};\n\nconst generate = () => {\n  // Create an empty array to hold the objects\n  const dataArray = [] || [{ empty: true }];\n\n  // Loop through each day of 2023\n  for (let i = 0; i < 365; i++) {\n    // Create a new date object for the current day\n    const date = new Date(2023, 0, i + 1);\n\n    const value = checkOccurrence(totalCommits, date.toLocaleDateString());\n\n    // Create a new object with the date and value and add it to the array\n    dataArray.push({ date: date.toLocaleDateString(), value });\n  }\n\n  console.log(\"====\", dataArray);\n  return dataArray;\n};\n\nconst array = generate();\n\nreturn (\n  <div\n    style={{ border: `1px solid ${props.theme.borderColor}` }}\n    className=\"contributions\"\n  >\n    <div className=\"header\">\n      <div className=\"headerContent\">\n        <p style={{ color: props.theme.textColor3 }}>Jan</p>\n        <p style={{ color: props.theme.textColor3 }}>Feb</p>\n        <p style={{ color: props.theme.textColor3 }}>Mar</p>\n        <p style={{ color: props.theme.textColor3 }}>Apr</p>\n        <p style={{ color: props.theme.textColor3 }}>May</p>\n        <p style={{ color: props.theme.textColor3 }}>Jun</p>\n        <p style={{ color: props.theme.textColor3 }}>Jul</p>\n        <p style={{ color: props.theme.textColor3 }}>Aug</p>\n        <p style={{ color: props.theme.textColor3 }}>Sep</p>\n        <p style={{ color: props.theme.textColor3 }}>Oct</p>\n        <p style={{ color: props.theme.textColor3 }}>Nov</p>\n        <p style={{ color: props.theme.textColor3 }}>Dec</p>\n      </div>\n    </div>\n\n    <div className=\"contributionsContainer\">\n      <div className=\"weekdays\">\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\" />\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Mon\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\" />\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Wed\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\" />\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\">\n          Fir\n        </p>\n        <p style={{ color: props.theme.textColor3 }} className=\"weekday\" />\n      </div>\n      <div className=\"contributionsContent\">\n        {array?.map((item, index) => {\n          let color;\n\n          if (item?.value === 0)\n            color = props.theme === \"light\" ? \"#ebedf0\" : \"#161b22\";\n          else if (item?.value === 1)\n            color = props.theme === \"light\" ? \"#9be9a8\" : \"#0e4429\";\n          else if (item?.value === 2)\n            color = props.theme === \"light\" ? \"#40c463\" : \"#26a641\";\n          else if (item?.value === 3)\n            color = props.theme === \"light\" ? \"#30a14e\" : \"#26a641\";\n          else color = props.theme === \"light\" ? \"#216e39\" : \"#39d353\";\n\n          const date = new Date(item.date);\n          const options = {\n            day: \"2-digit\",\n            month: \"short\",\n            year: \"numeric\",\n          };\n          const formattedDate = date.toLocaleDateString(\"en-GB\", options);\n\n          return (\n            <Widget\n              src=\"zahidulislam.near/widget/Profile.Contributions.Item\"\n              props={{\n                color: color,\n                date: formattedDate,\n                item,\n                theme: props.theme,\n              }}\n            />\n          );\n        })}\n      </div>\n    </div>\n\n    <div className=\"footer\">\n      <p className=\"footerText\">Less</p>\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#ebedf0\" : \"#161b22\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#9be9a8\" : \"#0e4429\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#40c463\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#30a14e\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#216e39\" : \"#39d353\",\n        }}\n      />\n      <p className=\"footerText\">More</p>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/ProfilePage.Contributions", "fact_widget_deployments_id": "67b0234f835c592b6a9e08c3c7dffc25", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 4}