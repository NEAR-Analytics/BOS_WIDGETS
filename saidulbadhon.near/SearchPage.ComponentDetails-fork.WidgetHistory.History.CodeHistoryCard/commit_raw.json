{"tx_hash": "8ajdGu1ckAHwki6TwGijjmpmbZoe9Mc2zv6sbPk7K3oT", "action_id_social": "9QRXn673ueyPBeqBLrjrKJPxrtNKKZ6styD9DMJ5Ub1t-0-widget", "block_id": 100172573, "block_timestamp": "2023-09-01T18:27:40.237Z", "signer_id": "saidulbadhon.near", "widget_name": "SearchPage.ComponentDetails-fork.WidgetHistory.History.CodeHistoryCard", "source_code": "State.init({});\n\nfunction getDatastringFromBlockHeight(blockHeight) {\n  const block = Near.block(blockHeight);\n  const date = new Date(block.header.timestamp_nanosec / 1e6);\n  return date.toDateString() + \" \" + date.toLocaleTimeString();\n}\n\nlet CodeWrapper = styled.div`\n& > pre > div {\n  margin: 0px !important;\n}\n\n& > pre {\n  margin: 0px !important;\n  border-radius: 0px 0px 5px 5px;\n}\n`;\n\nreturn (\n  <div className=\"card border-primary\">\n    <div className=\"card-header\">\n      <small class=\"text-muted\">\n        <div class=\"row justify-content-between\">\n          <div class=\"col-4 d-flex frex-row justify-content-start align-items-center\">\n            <div class=\"p-2\">changes in block #{props.currentBlockHeight}</div>\n\n            <OverlayTrigger\n              placement=\"auto\"\n              overlay={<Tooltip>count inserted lines</Tooltip>}\n            >\n              <span class=\"badge text-bg-success p-2 me-1 align-self-center\">\n                {state.lineCountInserted}\n              </span>\n            </OverlayTrigger>\n\n            <OverlayTrigger\n              placement=\"auto\"\n              overlay={<Tooltip>count deleted lines</Tooltip>}\n            >\n              <span class=\"badge text-bg-danger p-2 me-1 align-self-center\">\n                {state.lineCountDeleted}\n              </span>\n            </OverlayTrigger>\n          </div>\n\n          <div class=\"col-7 d-flex justify-content-end align-items-center\">\n            {getDatastringFromBlockHeight(props.currentBlockHeight)}\n\n            <button\n              style={{ marginLeft: 8 }}\n              data-toggle=\"tooltip\"\n              data-placement=\"top\"\n              title=\"Copy Widget\"\n              onClick={() => {\n                const currentCode = Social.get(\n                  `${props.pathToWidget}`,\n                  props.currentBlockHeight\n                );\n\n                // const prevCode = props.prevBlockHeight\n                //   ? Social.get(`${props.pathToWidget}`, props.prevBlockHeight)\n                //   : undefined;\n\n                props?.copyToClipboard && props?.copyToClipboard(currentCode);\n              }}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                height=\"1em\"\n                viewBox=\"0 0 512 512\"\n                fill=\"#FFF\"\n                style={{marginRight:4}}\n              >\n                <path d=\"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z\" />\n              </svg>\n\n            Revert Change\n            </button>\n          </div>\n        </div>\n      </small>\n    </div>\n\n    <CodeWrapper>\n      <Widget\n        src={`bozon.near/widget/WidgetHistory.CodeHistory`}\n        props={{\n          pathToWidget: props.pathToWidget,\n          currentBlockHeight: props.currentBlockHeight,\n          prevBlockHeight: props.prevBlockHeight,\n          findUniqueResult: (\n            lineCountDeleted,\n            lineCountInserted,\n            lineCountCurrentCode,\n            lineCountPrevCode,\n            allLineCount\n          ) => {\n            if (\n              state.lineCountDeleted === undefined ||\n              state.lineCountInserted === undefined\n            )\n              State.update({ lineCountDeleted, lineCountInserted });\n          },\n        }}\n      />\n    </CodeWrapper>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/SearchPage.ComponentDetails-fork.WidgetHistory.History.CodeHistoryCard", "fact_widget_deployments_id": "932a3d4232253b6bd86b31cd10197f67", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}