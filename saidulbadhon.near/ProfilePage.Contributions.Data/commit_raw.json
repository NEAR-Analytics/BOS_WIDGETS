{"tx_hash": "J7aEVgZnsdod1Qf6yF2ksmi26PEtcxyfWb8Qinsc3NDz", "action_id_social": "6U4JBdxF5ZfmF4PkQLb4v5EAmPcUij3fNoFK2FWQNS3e-0-widget", "block_id": 102138436, "block_timestamp": "2023-09-28T09:39:00.324Z", "signer_id": "saidulbadhon.near", "widget_name": "ProfilePage.Contributions.Data", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) return \"Login or send accountId in the props\";\n\nconst profile = Social.getr(`${accountId}/profile`);\n\nconst allWidgetsHistoryChangesBlocks = Social.keys(\n  `${accountId}/widget/*`,\n  \"final\",\n  {\n    return_type: \"History\",\n  }\n);\n\n// console.log(\n//   \"allWidgetsHistoryChangesBlocks : \",\n//   allWidgetsHistoryChangesBlocks\n// );\n\nif (allWidgetsHistoryChangesBlocks === null) return \"Loading...\";\n\nconst widget = allWidgetsHistoryChangesBlocks[accountId].widget;\n\nconst totalCommits = Object.keys(widget)\n  .map((key) => widget[key])\n  .flat()\n  .map((blockHeight) => {\n    const xs = Near.block(blockHeight);\n\n    const timeMs = parseFloat(xs.header.timestamp_nanosec) / 1e6;\n\n    return new Date(timeMs).toLocaleDateString();\n  });\n\nconst checkOccurrence = (array, element) => {\n  let counter = 0;\n  for (let i = 0; i <= array.length; i++) {\n    if (array[i] == element) {\n      counter++;\n    }\n  }\n  return counter;\n};\n\nconst generate = () => {\n  if (!widget) return;\n\n  const dataArray = [];\n\n  // Get the current date\n  const currentDate = new Date();\n\n  // Loop through the last 365 days\n  for (let i = 0; i < 365; i++) {\n    // Calculate the date for the current iteration (going back in time)\n    const date = new Date();\n    date.setDate(currentDate.getDate() - i);\n\n    const value = checkOccurrence(totalCommits, date.toLocaleDateString());\n\n    // Create a new object with the date and value and add it to the array\n    dataArray.unshift({ date: date, count: value });\n    // dataArray.unshift({ date: date.toLocaleDateString(), count: value });\n  }\n\n  return dataArray;\n};\n\n// const generate = () => {\n//   // Create an empty array to hold the objects\n//   const dataArray = [] || [{ empty: true }];\n\n//   // Loop through each day of 2023\n//   for (let i = 0; i < 365; i++) {\n//     // Create a new date object for the current day\n//     const date = new Date(2023, 0, i + 1);\n\n//     const value = checkOccurrence(totalCommits, date.toLocaleDateString());\n\n//     // Create a new object with the date and value and add it to the array\n//     dataArray.push({ date: date.toLocaleDateString(), count: value });\n//   }\n\n//   return dataArray;\n// };\n\n// const array = generate();\n\n// console.log(array);\n\n// console.log(\"widget : \", widget);\n// console.log(\"widget : \", widget);\n\nuseEffect(() => {\n  const data = generate();\n  props.responce(data);\n}, []);\n\nreturn (\n  <div\n    id=\"Getting-Contributions\"\n    // onClick={() => {\n    //   // console.log(\"X\", widget);\n    //   if (widget) {\n    //     const data = generate();\n\n    //     // console.log(\"data : \", data);\n    //     props.responce(data);\n    //   }\n    // }}\n    // >\n    //   asdasd\n    // </div\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/ProfilePage.Contributions.Data", "fact_widget_deployments_id": "c54968c441e8bf230dbc4fff0c0d6330", "inserted_timestamp": "2023-09-28T11:29:59.984Z", "modified_timestamp": "2023-09-28T11:29:59.984Z", "__row_index": 0}