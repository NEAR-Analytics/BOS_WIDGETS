{"tx_hash": "6fZa9rhu1rBg7b6AACc4cseg4qbDbzNpgZo7axsiLn5N", "action_id_social": "4vBgRy2gr2nkVb3BZqf2d5Hi8UavD4GFgZw4SdZLi7LT-0-widget", "block_id": 99856922, "block_timestamp": "2023-08-28T14:05:06.070Z", "signer_id": "ijoh.near", "widget_name": "Calendar", "source_code": "const holidays = [\n  [1, 1], // New Year's Day\n  [3, 1], // Independence Movement Day\n  [5, 5], // Children's Day\n  [6, 6], // Memorial Day\n  [8, 15], // Liberation Day\n  [10, 3], // National Foundation Day\n  [12, 25], // Christmas\n];\n\nconst Calendar = () => {\n  // //const [currentYear, setCurrentYear] = useState(new Date().getFullYear());\n  // const [currentMonth, setCurrentMonth] = useState(new Date().getMonth());\n  // const [notes, setNotes] = useState({});\n\n  State.init({\n    currentYear: new Date().getFullYear(),\n    currentMonth: new Date().getMonth(),\n    notes: {},\n  });\n\n  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();\n  const firstDayOfWeek = new Date(currentYear, currentMonth, 1).getDay();\n\n  const createCalendar = () => {\n    const calendar = [];\n\n    for (let i = 0; i < firstDayOfWeek; i++) {\n      calendar.push(<div key={`empty-${i}`} className=\"day\"></div>);\n    }\n\n    for (let day = 1; day <= daysInMonth; day++) {\n      const currentDate = new Date(currentYear, currentMonth, day);\n      const dayOfWeek = currentDate.getDay();\n      let dayClasses = \"day\";\n\n      if (dayOfWeek === 0) {\n        dayClasses += \" sunday\";\n      } else if (dayOfWeek === 6) {\n        dayClasses += \" saturday\";\n      }\n\n      for (const holiday of holidays) {\n        if (currentMonth === holiday[0] - 1 && day === holiday[1]) {\n          dayClasses += \" holiday\";\n          break;\n        }\n      }\n\n      if (notes[`${currentYear}-${currentMonth + 1}-${day}`]) {\n        dayClasses += \" active\";\n      }\n\n      calendar.push(\n        <div\n          key={`day-${day}`}\n          className={dayClasses}\n          onClick={() => openNoteInput(currentYear, currentMonth, day)}\n        >\n          {day}\n        </div>\n      );\n    }\n\n    return calendar;\n  };\n\n  const openNoteInput = (year, month, day) => {\n    const existingNote = notes[`${year}-${month + 1}-${day}`] || \"\";\n    const noteInput = prompt(\n      `Enter note for ${year}-${month + 1}-${day}:`,\n      existingNote\n    );\n\n    if (noteInput !== null) {\n      // setNotes(prevNotes => ({\n      //     ...prevNotes,\n      //     [`${year}-${month + 1}-${day}`]: noteInput,\n      // }));\n\n      State.update({\n        notes: (prevNotes) => ({\n          ...prevNotes,\n          [`${year}-${month + 1}-${day}`]: noteInput,\n        }),\n      });\n    }\n  };\n\n  const goToPrevMonth = () => {\n    setCurrentMonth((prevMonth) => {\n      if (prevMonth === 0) {\n        // setCurrentYear(year => year - 1);\n        // return 11;\n        State.update({ currentYear: (year) => year - 1 });\n      }\n      return prevMonth - 1;\n    });\n  };\n\n  const goToNextMonth = () => {\n    setCurrentMonth((prevMonth) => {\n      if (prevMonth === 11) {\n        // setCurrentYear(year => year + 1);\n        State.update({ currentYear: (year) => year + 1 });\n        return 0;\n      }\n      return prevMonth + 1;\n    });\n  };\n\n  return (\n    <div className=\"calendar\">\n      <div className=\"nav-buttons\">\n        <div className=\"nav-button\" onClick={goToPrevMonth}>\n          \u2190 \uc774\uc804 \uc6d4\n        </div>\n        <div className=\"nav-button\" onClick={goToNextMonth}>\n          \ub2e4\uc74c \uc6d4 \u2192\n        </div>\n      </div>\n      <div className=\"month-title\">\n        {currentYear}\ub144 {currentMonth + 1}\uc6d4\n      </div>\n      <div className=\"weekdays\">\n        {[\"\uc77c\", \"\uc6d4\", \"\ud654\", \"\uc218\", \"\ubaa9\", \"\uae08\", \"\ud1a0\"].map((day) => (\n          <div key={day} className=\"weekday\">\n            {day}\n          </div>\n        ))}\n      </div>\n      <div className=\"days\">{createCalendar()}</div>\n    </div>\n  );\n};\n\nreturn Calendar();\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ijoh.near/widget/Calendar", "fact_widget_deployments_id": "2fa397e2f4a424beb36b7868e81993f7", "inserted_timestamp": "2023-08-28T15:50:53.044Z", "modified_timestamp": "2023-08-28T15:50:53.044Z", "__row_index": 15}