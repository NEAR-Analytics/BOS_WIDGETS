{"tx_hash": "61c4kdzTkURBsNRWmCwW65FtxiqbM4cSwjJ41JUxVAF7", "action_id_social": "Gt4vupD4ukDbKJC9ML4J4JTWT4bDToMWB2jjCLExMc5F-0-widget", "block_id": 119637573, "block_timestamp": "2024-05-24T13:12:03.590Z", "signer_id": "nearweekapp.near", "widget_name": "nw-articles", "source_code": "const breakpoints = {\n  md: \"768px\",\n  lg: \"1100px\",\n  xl: \"1300px\",\n};\n\nconst defImgSrc = `https://ipfs.near.social/ipfs/bafkreih5d2mix23e4hqsblgob74chyp3yyoze2ygtdm4cbo7dblt565rwa`;\n\nfunction Articles() {\n  State.init({ page: 1 });\n  let mediumPosts = [];\n\n  const Post = (props) => {\n    const { key, post } = props;\n    return (\n      <Card key={key} index={props.index} href={post.url} target=\"_blank\">\n        <CardImage src={post.thumbnail} alt=\"\" />\n        <CardContent>\n          <CardTitle>\n            <a href={post.url} target=\"_blank\">\n              {post.title}\n            </a>\n          </CardTitle>\n          <CardFooter>\n            <Badges>\n              {post.categories &&\n                post.categories.length > 0 &&\n                post.categories\n                  .slice(0, window.innerWidth < 255 ? 1 : 2)\n                  .map((category, index) => (\n                    <Badge index={index}>{category}</Badge>\n                  ))}\n            </Badges>\n            <AuthorNDate>\n              {post.author && ( // Check if author is available\n                <Author>\n                  <span>@{post.author}</span>\n                </Author>\n              )}\n              <Dot>\u00b7</Dot>\n              <CardDate>\n                {post.createdAt ? dateToDays(post.createdAt) : \"\"}\n              </CardDate>\n            </AuthorNDate>\n          </CardFooter>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  const fetchMedium = fetch(\n    \"https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/nearprotocol\",\n    { method: \"GET\" }\n  );\n\n  console.log(fetchMedium);\n\n  if (fetchMedium && fetchMedium?.body?.items?.length > 0) {\n    fetchMedium.body.items.forEach((item) => {\n      let resizedImgURL;\n      const imgURL = item[\"description\"]\n        .toString()\n        .match(/<img[^>]+src=\"([^\">]+)\"/)[1];\n      if (imgURL) {\n        const filename = imgURL.split(\"/\").pop();\n        resizedImgURL = `https://cdn-images-1.medium.com/v2/resize:fit:360/${filename}`;\n      }\n      mediumPosts.push({\n        title: item.title,\n        url: item.link,\n        thumbnail: resizedImgURL ?? defImgSrc,\n        createdAt: item.pubDate,\n        categories: item.categories,\n        author: item.author,\n      });\n    });\n  }\n\n  function dateToDays(date) {\n    const timeAgo = (diffSec) =>\n      diffSec < 60000\n        ? `${(diffSec / 1000) | 0}s`\n        : diffSec < 3600000\n        ? `${(diffSec / 60000) | 0}m`\n        : diffSec < 86400000\n        ? `${(diffSec / 3600000) | 0}h`\n        : `${(diffSec / 86400000) | 0}d`;\n\n    var d = new Date(date);\n    return timeAgo(Date.now() - d.getTime());\n  }\n\n  const articles = [...mediumPosts];\n\n  const AuthorNDate = styled.div`\n    display: flex;\n    flex-direction: row;\n    align-items: baseline;\n    gap:4px;\n  `;\n  const Dot = styled.span`\n  color: rgba(28, 31, 65, 0.45);\n  text-align: right;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 8.5px; /* 70.833% */\n  letter-spacing: 0.12px;\n    `;\n\n  const Author = styled.div`\n  & span {\n  color: rgba(28, 31, 65, 0.45);\n  text-align: right;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 8.5px;\n  letter-spacing: 0.12px;\n  }\n  `;\n\n  const NwWidget = styled.div`\n  border-radius: 16px;\n  background: hsla(0, 0%, 100%, 1);\n  margin-bottom: 20px;\n\n  @media screen and (min-width: 1300px) {\n    display: flex;\n    gap:10px;\n    flex-wrap: wrap;\n  }\n\n`;\n\n  const Card = styled.a`\n    color: #1C1F41;\n    text-decoration: none !important;\n    display: flex;\n    flex-direction: column;\n    border-radius: 8px;\n    padding:12px;\n    margin-bottom:10px;\n    border: 1px solid #eceef0;\n    max-width:265px;\n    @media screen and (max-width: 1300px) {\n        max-width:100%;\n    }\n`;\n\n  const CardImage = styled.img`\n    width: 100%;\n    height: auto;\n    aspect-ratio: 16 / 9;\n    border-radius: 8px;\n    margin-top: 16px;\n    margin-bottom: 16px;\n    object-fit: cover;\n`;\n\n  const CardContent = styled.div`\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    justify-content: space-between;\n    margin-top: 0;\n`;\n\n  const CardTitle = styled.div`\n    margin-top: 5px;\n    margin-bottom: 16px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    whitespace: nowrap;\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 18px;\n    text-transform: capitalise;\n    a {\n        color: inherit;\n    }\n`;\n\n  const CardFooter = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom:0px;\n`;\n\n  const Badges = styled.div`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 6px;\n`;\n\n  const Badge = styled.span`\n    background: #F5F5F5;\n    padding: 6px 20px;  \n    border-color: hsla(214, 10%, 86%, 1);\n    border-radius: 4px;\n    color: #9C9C9C;\n    text-align: center;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 8.5px;\n    display:   ${(props) => (props.index > 1 ? \"none\" : \"block\")}; \n`;\n\n  const CardDate = styled.div`\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    color: rgba(28, 31, 65, 0.45);\n    text-align: right;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 8.5px;\n`;\n\n  const H2 = styled.h2`\n    color: #1C1F41;\n    font-size: 24px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 15px;\n    margin-bottom: 15px;\n  `;\n\n  return (\n    <div>\n      <H2>ARTICLES</H2>\n      <NwWidget>\n        <>\n          {articles.length > 0 ? (\n            articles.map((article, index) => (\n              <Post post={article} index={index} />\n            ))\n          ) : (\n            <div>Loading ...</div>\n          )}\n        </>\n      </NwWidget>\n    </div>\n  );\n}\n\nreturn <Articles />;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearweekapp.near/widget/nw-articles", "fact_widget_deployments_id": "4f313b0c1a3104d61c00ee8c859993d0", "inserted_timestamp": "2024-05-24T14:52:52.672Z", "modified_timestamp": "2024-05-24T14:52:52.672Z", "__row_index": 11}