{"tx_hash": "AWZz5Mq6fHXv2J1cupe4J7n3egkyE46JTqcXo1YC7YFs", "action_id_social": "6YAMwvPj68p2Fosr8p7SNCg3vc3baXU7b4a4UnMpgbhm-0-widget", "block_id": 92670175, "block_timestamp": "2023-05-25T10:26:44.914Z", "signer_id": "7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c", "widget_name": "TestComponent", "source_code": "const accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet\";\n}\n\nlet items = Social.get(`${accountId}/testPersons/**`);\n\nconsole.log(\"items\", items);\nconst myState = State.init({\n  name: \"\",\n  profession: \"\",\n  description: \"\",\n  allPersons: items ? items : null,\n});\n\nif (myState.allPersons === null) {\n  State.update(\n    {\n      allPersons: items,\n    },\n    [items]\n  );\n}\n//Add items to the local state\nfunction addItem() {\n  let currItems = myState.allPersons;\n  //If key has space\n  let key = Object.keys(myState.allPersons).length;\n\n  currItems[key] = {\n    name: myState.name,\n    description: myState.description,\n    profession: myState.profession,\n  };\n\n  State.update({\n    allPersons: currItems,\n    name: \"\",\n    profession: \"\",\n    description: \"\",\n  });\n\n  console.log(myState);\n}\n\nreturn (\n  <div>\n    <div>\n      <h2>All Persons</h2>\n      <div>\n        {Object.values(myState.allPersons).map((item) => (\n          <div>\n            <h4>{item.name}</h4>\n            <h6>{item.profession}</h6>\n            <h6>{item.description}</h6>\n          </div>\n        ))}\n      </div>\n    </div>\n\n    <label for=\"name\">Name: </label>\n    <input\n      type=\"text\"\n      id=\"name\"\n      value={myState.name}\n      onChange={(e) => State.update({ name: e.target.value })}\n    />\n    <label for=\"profession\">Profession: </label>\n    <input\n      type=\"text\"\n      id=\"profession\"\n      value={myState.profession}\n      onChange={(e) => State.update({ profession: e.target.value })}\n    />\n\n    <label for=\"description\">Description: </label>\n    <input\n      type=\"text\"\n      id=\"description\"\n      value={myState.description}\n      onChange={(e) => State.update({ description: e.target.value })}\n    />\n    <button onClick={addItem}>Add item</button>\n    <CommitButton\n      data={{ testPersons: myState.allPersons }}\n      onCommit={onCommit}\n    >\n      Upload data\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c/widget/TestComponent", "fact_widget_deployments_id": "086fadb010273f7d8954c03ff89c0096", "inserted_timestamp": "2000-01-01T00:00:00.000Z", "modified_timestamp": "2000-01-01T00:00:00.000Z", "__row_index": 10}