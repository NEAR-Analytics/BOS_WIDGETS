{"tx_hash": "FzoQzyL8Q7iU5dZHjU4T6HL2sYPb8c6YFbqvEnYgt3po", "action_id_social": "Paqp9d3oSixKMydEz1YjY4g67c4EQVGTP8zN3p1u3EP-0-widget", "block_id": 92672082, "block_timestamp": "2023-05-25T11:02:46.000Z", "signer_id": "7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c", "widget_name": "TestComponent", "source_code": "const accountId = context.accountId;\nconst authorForWidget =\n  \"7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c\";\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet\";\n}\n\nlet items = Social.get(`${accountId}/testPersons/**`);\n\nconsole.log(\"items\", items);\nconst myState = State.init({\n  name: \"\",\n  profession: \"\",\n  description: \"\",\n  allPersons: items ? items : null,\n});\n\nif (myState.allPersons === null) {\n  State.update(\n    {\n      allPersons: items,\n    },\n    [items]\n  );\n}\n//Add items to the local state\nfunction addItem() {\n  let currItems = myState.allPersons;\n  //If key has space\n  let key = Object.keys(myState.allPersons).length;\n\n  currItems[key] = {\n    name: myState.name,\n    description: myState.description,\n    profession: myState.profession,\n  };\n\n  State.update({\n    allPersons: currItems,\n    name: \"\",\n    profession: \"\",\n    description: \"\",\n  });\n\n  console.log(myState);\n}\n\nreturn (\n  <div>\n    <div>\n      <h2>All Persons</h2>\n      <div>\n        {Object.entries(myState.allPersons).map((item) => (\n          <div>\n            <a\n              href={`#/${authorForWidget}/widget/SingleTestItem?userId=${item[0]}\n        `}\n            >\n              <h4>{item[1].name}</h4>\n            </a>\n            <h6>{item[1].profession}</h6>\n            <h6>{item[1].description}</h6>\n          </div>\n        ))}\n      </div>\n    </div>\n\n    <label for=\"name\">Name: </label>\n    <input\n      type=\"text\"\n      id=\"name\"\n      value={myState.name}\n      onChange={(e) => State.update({ name: e.target.value })}\n    />\n    <label for=\"profession\">Profession: </label>\n    <input\n      type=\"text\"\n      id=\"profession\"\n      value={myState.profession}\n      onChange={(e) => State.update({ profession: e.target.value })}\n    />\n\n    <label for=\"description\">Description: </label>\n    <input\n      type=\"text\"\n      id=\"description\"\n      value={myState.description}\n      onChange={(e) => State.update({ description: e.target.value })}\n    />\n    <button onClick={addItem}>Add item</button>\n    <CommitButton\n      data={{ testPersons: myState.allPersons }}\n      onCommit={onCommit}\n    >\n      Upload data\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c/widget/TestComponent", "fact_widget_deployments_id": "6846630f62f4e2b04c9783c54fcf0b31", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 12}