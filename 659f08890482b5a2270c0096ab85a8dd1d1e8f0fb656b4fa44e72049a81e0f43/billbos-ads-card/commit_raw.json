{"tx_hash": "595ZQLJn7WqGPiufWRxLE2jJbokk13dkmmWP4APQ84o3", "action_id_social": "BLmDM4CdcyDi5NenHZN2YHcGr6ect73EHn1XiwK2gWV8-0-widget", "block_id": 111221590, "block_timestamp": "2024-01-24T18:34:33.791Z", "signer_id": "659f08890482b5a2270c0096ab85a8dd1d1e8f0fb656b4fa44e72049a81e0f43", "widget_name": "billbos-ads-card", "source_code": "const isShowAction = props.isShowAction;\nconst adsId = props.adsId || \"1\";\nconst adsContent = props.adsContent || \"0\";\nconst adsStakedBalance = props.adsStakedBalance || \"0\";\nconst adsViewed = props.adsViewed || \"0\";\nconst chainId = props.chainId || \"25925\";\nconst coreContractAddress =\n  props.coreContractAddress || \"0xD8D21C24F8513E35bdC26832aD366ac2F4EE0d7F\";\n\nconst chainName = () => {\n  if (chainId == \"25925\") {\n    return \"Bitkub Chain\";\n  }\n  if (chainId == \"35011\") {\n    return \"J2O Chain\";\n  }\n  return \"Network Error\";\n};\n\nconst BillBOSCoreABI = fetch(\n  \"https://gist.githubusercontent.com/Chayanonc/1c7b2cf1559ed20b342f76846966cb65/raw/fa27150e36d18d43d6298c8dd27f8c8e852dde23/billbos-core.json\"\n);\nif (!BillBOSCoreABI.ok) {\n  return \"Loading\";\n}\nconst IBillBOSCore = new ethers.utils.Interface(BillBOSCoreABI.body);\n\nState.init({\n  isOpenStake: false,\n});\n\nconst handleUnstake = () => {\n  State.update({\n    isOpenLoadingModal: true,\n  });\n  const billbosProvider = new ethers.Contract(\n    coreContractAddress,\n    IBillBOSCore,\n    Ethers.provider().getSigner()\n  );\n  billbosProvider\n    .unboostAll(adsId)\n    .then((res) => {\n      console.log(res);\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nconst content = (\n  <div class=\"w-full border rounded-xl pb-4 relative bg-white\">\n    <img\n      style={{\n        height: \"126px\",\n      }}\n      class=\"w-full rounded-t-xl object-cover object-left\"\n      src={`https://ipfs.near.social/ipfs/${\n        adsContent?.imageCID ??\n        \"bafkreihtf7uoqlzugb347zlo24s5l5zdgj7kbdbltepgekutnnv43zgfze\"\n      }`}\n      alt=\"uploaded\"\n    />\n    <div class=\"w-full flex flex-col justify-center items-center text-center px-8\">\n      <p class=\"mt-4 text-xl font-semibold\">{adsContent?.name ?? \"\"}</p>\n      <p class=\"w-2/3 mt-1 font-light text-gray-400 truncate\">\n        {adsContent?.newTabLink ?? \"\"}\n      </p>\n      <div class=\"mt-8 grid grid-cols-5\">\n        <div class=\"flex flex-col justify-center col-span-2\">\n          <p class=\"font-semibold\">{`${\n            ethers.utils.formatEther(adsStakedBalance) ?? \"\"\n          } USDT`}</p>\n          <p class=\"text-gray-400 text-sm\">{\"Staked\"}</p>\n        </div>\n        <div class=\"flex justify-center\">\n          <div class=\"h-full border-l-2\"></div>\n        </div>\n        <div class=\"flex flex-col justify-center col-span-2\">\n          <p class=\"font-semibold\">{adsViewed}</p>\n          <p class=\"text-gray-400 text-sm\">{\"Viewed\"}</p>\n        </div>\n      </div>\n      {isShowAction && (\n        <div class=\"w-full grid grid-cols-2 gap-2 mt-12\">\n          <button\n            onClick={() => {\n              State.update({ isOpenStake: true });\n            }}\n            class=\"w-full py-2 text-white font-semibold brand-green rounded-lg\"\n          >\n            Stake Now\n          </button>\n          <button\n            onClick={handleUnstake}\n            class=\"w-full py-2 green-text font-semibold border-1 border-green-300 rounded-lg\"\n          >\n            Unstake\n          </button>\n        </div>\n      )}\n    </div>\n    <div\n      style={{ width: \"135px\", height: \"44px\" }}\n      class={`\n      absolute \n      top-0 \n      right-0 \n      bg-gray-900 \n      text-white \n      flex \n      justify-center \n      items-center\n      rounded-tr-xl\n      rounded-bl-xl\n      `}\n    >\n      <p>{chainName()}</p>\n    </div>\n  </div>\n);\n\nreturn (\n  <>\n    <Widget\n      src=\"chayanonc-ph.near/widget/billbos-css\"\n      props={{\n        children: content,\n      }}\n    />\n    <Widget\n      src=\"659f08890482b5a2270c0096ab85a8dd1d1e8f0fb656b4fa44e72049a81e0f43/widget/billbos-stake-modal\"\n      props={{\n        isOpenStake: state.isOpenStake,\n        onCloseStake: () => {\n          State.update({ isOpenStake: false });\n        },\n        coreContractAddress: coreContractAddress,\n        adsId: adsId,\n      }}\n    />\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/659f08890482b5a2270c0096ab85a8dd1d1e8f0fb656b4fa44e72049a81e0f43/widget/billbos-ads-card", "fact_widget_deployments_id": "bb8921ff77e9b25ca8a49ac74ab999b5", "inserted_timestamp": "2024-03-07T05:24:05.087Z", "modified_timestamp": "2024-03-07T05:24:05.087Z", "__row_index": 0}